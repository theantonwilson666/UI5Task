sap.ui.define(["./IndexCompressor"],function(I){"use strict";var a=1;var H=2;var b=4;var V=0;var c=3;var G=function(){};G.getGeometryInfo=function(g,f){var h=new DataView(f.buffer,f.byteOffset,f.byteLength);var o=0;var k=(g.flags&H)>0;var l=(g.flags&b)>0;var m=(g.flags&a)>0;var n=false;var p=[];var q=[];var u=[];var r=[];var s=1;var t=1;var v=1;var w=new THREE.Vector3(0,0,0);var x=[w.x-s/2,w.y-t/2,w.z-v/2,w.x+s/2,w.y+t/2,w.z+v/2];var y=new I(f,f.length);y.setCurByte(o);if(!y.ReadCommand()){throw"buffer over flow";}var z=y.rvalue;var A;if(z){A=U(y,g.pointCount,z,x,p);if(A.isOk){p=A.array;n=true;}else{return false;}}var B=1;if(k){if(!y.ReadCommand()){return false;}B=y.rvalue;if(B){A=d(y,g.pointCount,B);if(A.isOk){q=A.array;}else{return false;}}}var C=1;var N=false;if(l){if(!y.ReadCommand()){return false;}C=y.rvalue;if(C){A=e(y,g.pointCount,C);if(A.isOk){N=true;u=A.array;}else{return false;}}}if(!z||!B||!C||N){if(N){o=y.getCurByte();var D=h.getFloat32(o,true);var E=h.getFloat32(o+4,true);y.moveCurByte(8);if((D!==0.0)||(E!==1.0)){var F=E-D;for(var J=0;J<g.pointCount*2;J++){u[J]=u[J]*F+D;}}}var K;if(!z){o=y.getCurByte();for(K=0;K<g.pointCount;K++){p.push(h.getFloat32(o+K*4,true));p.push(h.getFloat32(o+(K+g.pointCount)*4,true));p.push(h.getFloat32(o+(K+g.pointCount*2)*4,true));}y.moveCurByte(g.pointCount*3*4);}if(!B){o=y.getCurByte();for(K=0;K<g.pointCount;K++){q.push(h.getFloat32(o+(K)*4,true));q.push(h.getFloat32(o+(K+g.pointCount*1)*4,true));q.push(h.getFloat32(o+(K+g.pointCount*2)*4,true));}y.moveCurByte(g.pointCount*3*4);}if(!C){if(l){o=y.getCurByte();for(K=0;K<g.pointCount;K++){u.push(h.getFloat32(o+(K)*4,true));u.push(h.getFloat32(o+(K+g.pointCount*1)*4,true));}y.moveCurByte(g.pointCount*2*4);}}}var L=y.getCurByte();y.Reset();y.setCurByte(L);var M=[0,0,0];var O=m?2:3;for(var i=0;i<g.elementCount;i++){for(var j=0;j<O;j++){if(!y.ReadCommand(M[j])){throw"UIC1 Decompression error!!!";}else{r.push(y.rvalue);M[j]=y.rvalue;}}}return{id:g.id,isPolyline:m,isPositionQuantized:n,data:{indices:r,points:p,normals:q,uvs:u}};};function U(f,p,n,g){var r={array:new Array(p*3),isOk:false};for(var x=0;x<3;x++){var v=g[V+x];var q=(g[c+x]-v)/n;for(var i=0;i<p;i++){if(!f.ReadCommand()){return r;}r.array[i*3+x]=q*f.rvalue+v;}}r.isOk=true;return r;}function d(i,p,n){var r={array:[],isOk:false};var t=[];var f;for(f=0;f<p;f++){if(!i.ReadCommand()){return r;}t.push(i.rvalue);}var q=2*Math.PI/n;var g;var h;var k;for(f=0;f<p;f++){if(!i.ReadCommand()){return r;}g=q*t[f];h=q*i.rvalue;k=Math.sin(h);r.array.push(k*Math.cos(g));r.array.push(k*Math.sin(g));r.array.push(Math.cos(h));}r.isOk=true;return r;}function e(f,p,n){var r={array:new Array(p*2),isOk:false};var q=1.0/n;for(var u=0;u<2;u++){for(var i=0;i<p;i++){if(!f.ReadCommand()){return false;}r.array[i*2+u]=q*f.rvalue;}}r.isOk=true;return r;}return G;});
