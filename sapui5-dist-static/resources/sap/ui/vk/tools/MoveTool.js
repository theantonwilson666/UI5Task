/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
sap.ui.define(["./Tool","./CoordinateSystem","./GizmoPlacementMode","./MoveToolHandler","./MoveToolGizmo","./Detector","./ToolNodeSet"],function(T,C,G,M,a,D,b){"use strict";var c=T.extend("sap.ui.vk.tools.MoveTool",{metadata:{properties:{coordinateSystem:{type:"sap.ui.vk.tools.CoordinateSystem",defaultValue:C.World},placementMode:{type:"sap.ui.vk.tools.GizmoPlacementMode",defaultValue:G.Default},enableStepping:{type:"boolean",defaultValue:false},enableSnapping:{type:"boolean",defaultValue:false},showEditingUI:{type:"boolean",defaultValue:false},autoResetValues:{type:"boolean",defaultValue:true},allowContextMenu:{type:"boolean",defaultValue:true},nodeSet:{type:"sap.ui.vk.tools.ToolNodeSet",defaultValue:b.Highlight}},events:{moving:{parameters:{x:"float",y:"float",z:"float",nodesProperties:"any[]"}},moved:{parameters:{x:"float",y:"float",z:"float",nodesProperties:"any[]"}},coordinateSystemChanged:{parameters:{coordinateSystem:"sap.ui.vk.tools.CoordinateSystem"}},placementModeChanged:{parameters:{placementMode:"sap.ui.vk.tools.GizmoPlacementMode"}}}},constructor:function(i,s){T.apply(this,arguments);this._viewport=null;this._handler=new M(this);this._gizmo=null;this._detector=new D();}});c.prototype.init=function(){if(T.prototype.init){T.prototype.init.call(this);}this.setFootprint(["sap.ui.vk.threejs.Viewport"]);this.setAggregation("gizmo",new a());};c.prototype.setActive=function(v,d,g){T.prototype.setActive.call(this,v,d,g);if(this._viewport){if(v){this._gizmo=this.getGizmo();this._gizmo.setCoordinateSystem(this.getCoordinateSystem());this._gizmo.setPlacementMode(this.getPlacementMode());this._gizmo.show(this._viewport,this);this._addLocoHandler();}else{this._removeLocoHandler();if(this._gizmo){this._gizmo.hide();this._gizmo=null;}}}return this;};c.prototype.queueCommand=function(d){if(this._addLocoHandler()){if(this.isViewportType("sap.ui.vk.threejs.Viewport")){d();}}return this;};c.prototype.setPlacementMode=function(v){var d=this.getPlacementMode();if(d!==v){this.setProperty("placementMode",v,true);this.getGizmo().setPlacementMode(v);if(this._viewport){this._viewport.setShouldRenderFrame();}this.firePlacementModeChanged({placementMode:v});}return this;};c.prototype.setCoordinateSystem=function(v){var d=this.getCoordinateSystem();if(d!==v){this.setProperty("coordinateSystem",v,true);this.getGizmo().setCoordinateSystem(v);if(this._viewport){this._viewport.setShouldRenderFrame();}this.fireCoordinateSystemChanged({coordinateSystem:v});}return this;};c.prototype.setShowEditingUI=function(v){this.setProperty("showEditingUI",v,true);if(this._viewport){this._viewport.setShouldRenderFrame();}return this;};c.prototype.setEnableSnapping=function(v){this.setProperty("enableSnapping",v,true);if(this._viewport){this._viewport.setShouldRenderFrame();}return this;};c.prototype.resetValues=function(){this.getGizmo().resetValues();if(this._viewport){this._viewport.setShouldRenderFrame();}return this;};c.prototype.setNodeSet=function(v){this.setProperty("nodeSet",v,true);if(this._gizmo){this._gizmo.handleSelectionChanged();}};c.prototype.getDetector=function(){return this._detector;};c.prototype.move=function(x,y,z,d){var o;if(d&&d!==this.getCoordinateSystem()){o=this.getCoordinateSystem();this.setCoordinateSystem(d);}if(this._gizmo){this._gizmo.move(x,y,z);}if(o){this.setCoordinateSystem(o);}if(this._gizmo){this._gizmo.endGesture();}if(this._viewport){this._viewport.setShouldRenderFrame();}return this;};c.prototype.prepareForCreatingTranslateKey=function(p){if(this._gizmo){this._gizmo._prepareForCreatingKey(p);return this._gizmo._getNodesProperties();}return null;};return c;});
