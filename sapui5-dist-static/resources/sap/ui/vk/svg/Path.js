/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
sap.ui.define(["sap/base/Log","./Element"],function(L,E){"use strict";var P=function(a){a=a||{};E.call(this,a);this.type="Path";this.segments=a.segments||[];if(a.isTriangleMesh){this.isTriangleMesh=true;}this.setMaterial(a.material);};P.prototype=Object.assign(Object.create(E.prototype),{constructor:P});P.prototype.tagName=function(){return"path";};P.prototype.isFillable=function(){return this.isTriangleMesh;};function p(a,d,r,h,i){var x=a+r*Math.cos(i);var y=d+h*Math.sin(i);return{x:x,y:y};}P.prototype._expandBoundingBox=function(d,m){if(this.domRef){var h=this.domRef.getBBox();if(h){this._expandBoundingBoxCE(d,m,h.x+h.width*0.5,h.y+h.height*0.5,h.width*0.5,h.height*0.5);return;}}var s=isNaN(this.strokeWidth)?0:this.strokeWidth*0.5;var x=0,y=0;for(var j=0,k=this.segments.length;j<k;j++){var o=this.segments[j];var q=o.points;var r=o.dimension||2,i,l;switch(o.type){case"arc":if(q){if(o.relative){x+=q[0];y+=q[1];}else{x=q[0];y=q[1];}this._expandBoundingBoxCE(d,m,x,y,s,s);}else{for(var a=0,n=6;a<n;a++){var t=p(o.cx,o.cy,o.rx,o.ry,o.start+(o.end-o.start)*a/(n-1));this._expandBoundingBoxCE(d,m,t.x,t.y,s,s);}if(o.closed){this._expandBoundingBoxCE(d,m,o.cx,o.cy,s,s);}}break;case"move":case"polyline":case"mesh":x=q[0];y=q[1];this._expandBoundingBoxCE(d,m,x,y,s,s);for(i=r,l=q.length-1;i<l;i+=r){if(o.relative){x+=q[i];y+=q[i+1];}else{x=q[i];y=q[i+1];}this._expandBoundingBoxCE(d,m,x,y,s,s);}break;case"line":for(i=0,l=q.length-1;i<l;i+=r){if(o.relative){x+=q[i];y+=q[i+1];}else{x=q[i];y=q[i+1];}this._expandBoundingBoxCE(d,m,x,y,s,s);}break;case"bezier":var u=o.degree||2;for(i=0,l=q.length-1;i<l;i+=r){if(o.relative){this._expandBoundingBoxCE(d,m,x+q[i],y+q[i+1],s,s);if((i/r)%u===u-1){x+=q[i];y+=q[i+1];}}else{x=q[i];y=q[i+1];this._expandBoundingBoxCE(d,m,x,y,s,s);}}break;default:break;}}};function b(d,s){var i,l;var a=s.points;switch(s.degree||2){case 2:for(i=0,l=a.length-3;i<l;i+=4){d.push(s.relative?"q":"Q",a[i],a[i+1],a[i+2],a[i+3]);}break;case 3:if(!s.smooth){for(i=0,l=a.length-5;i<l;i+=6){d.push(s.relative?"c":"C",a[i],a[i+1],a[i+2],a[i+3],a[i+4],a[i+5]);}}else{for(i=0,l=a.length-3;i<l;i+=4){d.push(s.relative?"s":"S",a[i],a[i+1],a[i+2],a[i+3]);}}break;default:L.warning("Unsupported bezier segment degree:",s.type);break;}}function c(d,s){var a=s.points;d.push("M",a[0],a[1]);var h=s.dimension||2;for(var i=h,l=a.length-1;i<l;i+=h){d.push("L",a[i],a[i+1]);}if(s.closed){d.push("Z");}}function e(d,s){var a=s.points;var h=s.dimension||2;for(var i=0,l=a.length-1;i<l;i+=h){d.push(s.relative?"l":"L",a[i],a[i+1]);}}function f(d,s){var a=s.points;for(var i=0,l=a.length-5;i<l;i+=6){d.push("M",a[i],a[i+1],"L",a[i+2],a[i+3],"L",a[i+4],a[i+5],"Z");}}function g(d,s){var a=s.points;if(a){d.push(s.relative?"a":"A",s.major,s.minor,"0",s.followLargeArc?"1":"0",s.clockwise?"1":"0",a[0],a[1]);}else{var h=p(s.cx,s.cy,s.rx,s.ry,s.start);var i=p(s.cx,s.cy,s.rx,s.ry,s.end);d.push("M",h.x,h.y,"A",s.rx,s.ry,"0",Math.abs(s.end-s.start)<Math.PI?"0":"1",s.end>s.start?"1":"0",i.x,i.y);if(s.closed){d.push("L",s.cx,s.cy,"Z");}}}P.prototype._setSpecificAttributes=function(s){var d=[];this.segments.forEach(function(a){switch(a.type){case"arc":g(d,a);break;case"line":e(d,a);break;case"close":d.push("Z");break;case"bezier":b(d,a);break;case"move":case"polyline":c(d,a);break;case"mesh":f(d,a);break;default:L.warning("Unsupported path segment type:",a.type,JSON.stringify(a));break;}});if(d.length>0){s("d",d.join(" "));}if(!this.isTriangleMesh){s("stroke-linejoin","round");}};P.prototype.copy=function(s,r){E.prototype.copy.call(this,s,r);for(var i=0,l=s.segments.length;i<l;i++){var a=s.segments[i];var d={type:a.type};if(a.points!==undefined){d.points=a.points.slice();}if(a.dimension!==undefined){d.dimension=a.dimension;}if(a.degree!==undefined){d.degree=a.degree;}if(a.smooth){d.smooth=true;}if(a.relative){d.relative=true;}if(a.closed){d.closed=true;}if(a.major){d.major=a.major;}if(a.minor){d.minor=a.minor;}if(a.followLargeArc){d.followLargeArc=true;}if(a.clockwise){d.clockwise=true;}if(a.cx!==undefined){d.cx=a.cx;}if(a.cy!==undefined){d.cy=a.cy;}if(a.rx!==undefined){d.rx=a.rx;}if(a.ry!==undefined){d.ry=a.ry;}if(a.start!==undefined){d.start=a.start;}if(a.end!==undefined){d.end=a.end;}this.segments.push(d);}if(s.isTriangleMesh){this.isTriangleMesh=true;}return this;};return P;});
