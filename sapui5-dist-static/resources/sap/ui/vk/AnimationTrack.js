/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
sap.ui.define(["sap/ui/base/Object","./AnimationTrackValueType","./findIndexInArray","./Core"],function(B,A,f,v){"use strict";var c=B.extend("sap.ui.vk.AnimationTrack",{constructor:function(i,p){this._jsonData={};this._jsonData.id=i;this._jsonData.type=p&&p.trackValueType?p.trackValueType:A.Scalar;this._jsonData.keys=[];this._jsonData.cycleForward=!!(p&&p.cycleForward);this._jsonData.cycleBackward=!!(p&&p.cycleBackward);this._jsonData.infinite=!!(p&&p.infinite);this._jsonData._isAbsoluteValue=p&&p.isAbsoluteValue?p.isAbsoluteValue:false;}});c.prototype.setJSONModel=function(m){this._model=m;return this;};c.prototype.getIsAbsoluteValue=function(){return this._jsonData._isAbsoluteValue;};c.prototype.setIsAbsoluteValue=function(i){this._jsonData._isAbsoluteValue=i;};c.prototype.getId=function(){return this._jsonData.id;};c.prototype.getKeysType=function(){return this._jsonData.type;};c.prototype.setKeysType=function(t){if(this.getKeysCount()>0){return false;}this._jsonData.type=t;return true;};c.prototype.isCycleForward=function(){return this._jsonData.cycleForward;};c.prototype.setCycleForward=function(a){this._jsonData.cycleForward=a;if(this._model){this._model.updateBindings();}return this;};c.prototype.isCycleBackward=function(){return this._jsonData.cycleBackward;};c.prototype.setCycleBackward=function(a){this._jsonData.cycleBackward=a;if(this._model){this._model.updateBindings();}return this;};c.prototype.isInfinite=function(){return this._jsonData.infinite;};c.prototype.setInfinite=function(i){this._jsonData.infinite=i;if(this._model){this._model.updateBindings();}return this;};c.prototype.getKeysCount=function(){return this._jsonData.keys.length;};c.prototype.getKey=function(i){if(i<0||i>=this._jsonData.keys.length){return undefined;}return this._jsonData.keys[i];};c.prototype.updateKey=function(i,a,b){if(i>=0||i<this._jsonData.keys.length){this._jsonData.keys[i].value=a;if(this._model){this._model.updateBindings();}}if(!b){this._fireTrackChanged();}return this;};c.prototype.removeKey=function(i,b){var e=false;if(i>=0||i<this._jsonData.keys.length){this._jsonData.keys.splice(i,1);if(this._jsonData.keys.length===0){e=true;}if(this._model){this._model.updateBindings();}}if(!b){this._fireTrackChanged(e);}return this;};c.prototype.findKeyIndex=function(t){var i=-1;if(this._jsonData.keys.length===1){i=0;}else if(this._jsonData.keys.length>1){for(var a=1;a<this._jsonData.keys.length;a++){var l=this.getKey(a-1);var r=this.getKey(a);if(t>=l.time&&t<=r.time){i=t-l.time<r.time-t?a-1:a;break;}}}return i;};c.prototype.insertKey=function(t,d,e){var i=f(this._jsonData.keys,function(k){return k.time===t;});if(i<0){this._jsonData.keys.push({time:t,value:d});this._jsonData.keys.sort(function(a,b){return a.time-b.time;});}else{this.updateKey(i,d,true);if(this._model){this._model.updateBindings();}}if(!e){this._fireTrackChanged();}return this;};c.prototype._fireTrackChanged=function(e){v.getEventBus().publish("sap.ui.vk","trackChanged",{trackId:this._jsonData.id,emptyTrack:e});};c.prototype.getJSONData=function(){return this._jsonData;};return c;});
