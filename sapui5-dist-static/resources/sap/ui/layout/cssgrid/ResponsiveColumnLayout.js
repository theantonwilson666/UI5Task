/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Core","sap/ui/layout/cssgrid/GridLayoutBase","sap/ui/layout/cssgrid/VirtualGrid","sap/ui/dom/units/Rem","sap/ui/Device","sap/ui/layout/library"],function(C,G,V,R,D){"use strict";var g=R.toPx(1);var r=C.getConfiguration().getRTL();var s={S:4,M:8,ML:12,L:12,XL:16,XXL:20,XXXL:20};var a="RCLRangeSet";D.media.initRangeSet(a,[600,1024,1280,1440,1620,1920],"px",["S","M","ML","L","XL","XXL","XXXL"],true);function b(i){var l=i.getLayoutData();return(l&&l.isA("sap.ui.layout.cssgrid.ResponsiveColumnItemLayoutData"))?l.getColumns():1;}function c(i){var l=i.getLayoutData();return(l&&l.isA("sap.ui.layout.cssgrid.ResponsiveColumnItemLayoutData"))?l.getRows():1;}var d=G.extend("sap.ui.layout.cssgrid.ResponsiveColumnLayout",{metadata:{library:"sap.ui.layout",properties:{},events:{layoutChange:{parameters:{layout:{type:"string"}}}}}});d.prototype._sCurrentLayoutClassName="";d.prototype.isResponsive=function(){return true;};d.prototype.onGridAfterRendering=function(o){this._applyLayout(o);};d.prototype.getActiveGridSettings=function(){return null;};d.prototype.onGridResize=function(e){if(!e||e.size.width===0){return;}this._applyLayout(e.control);};d.prototype.renderSingleGridLayout=function(o){if(this.isGridSupportedByBrowser()){o.class("sapUiLayoutCSSGridRCL");}else{o.class("sapUiLayoutCSSGridRCLPolyfill");}};d.prototype.hasGridPolyfill=function(){return true;};d.prototype.getPolyfillSizes=function(o){var $=o.$(),w=$.parent().outerWidth(),e=D.media.getCurrentRange(a,w),i=s[e.name],I=$.innerWidth(),f=Math.floor((I-g*(i-1))/i);return{gap:g,rows:this._oVirtualGrid.rowsHeights.map(function(h){return h+"px";}),columns:new Array(i).fill(f+"px")};};d.prototype._applyLayout=function(o){var w=o.$().parent().outerWidth(),e=D.media.getCurrentRange(a,w),f="sapUiLayoutCSSGridRCL-Layout"+e.name,h=this.isGridSupportedByBrowser();if(!h){this._scheduleIEPolyfill(o,e);}if(this._sCurrentLayoutClassName===f){return;}if(h){o.removeStyleClass(this._sCurrentLayoutClassName);o.addStyleClass(f);}this._sCurrentLayoutClassName=f;this.fireLayoutChange({layout:e.name});};d.prototype._scheduleIEPolyfill=function(o,e){if(this._iPolyfillCallId){clearTimeout(this._iPolyfillCallId);}this._iPolyfillCallId=setTimeout(function(){var f=o.isA("sap.f.GridList")?"listUl":"",$=o.$(f);this._applyIEPolyfillLayout(o,$,e);}.bind(this),0);};d.prototype._applyIEPolyfillLayout=function(o,$,e){if(o.bIsDestroyed){return;}var f=s[e.name],I=$.innerWidth(),h=o.getItems(),j=Math.floor((I-g*(f-1))/f),k,l,m,n,v,p,i;for(i=0;i<h.length;i++){m=h[i];n=m.$();k=b(m);n.css({position:'absolute',height:'auto',width:j*k+g*(k-1)});}var q=new V();this._oVirtualGrid=q;q.init({numberOfCols:f,cellWidth:j,unitOfMeasure:"px",gapSize:g,topOffset:0,leftOffset:0,allowDenseFill:false,rtl:r,width:I,rowsAutoHeight:true});for(i=0;i<h.length;i++){m=h[i];if(!m.getVisible()){continue;}n=m.$();k=b(m);l=c(m);q.fitElement(i+'',k,l,n.outerHeight(true));}q.calculatePositions();v=q.getItems();for(i=0;i<h.length;i++){m=h[i];n=m.$();p=v[i];n.css({position:'absolute',top:p.top,left:p.left,height:p.height});}$.height(q.getHeight());};return d;});
