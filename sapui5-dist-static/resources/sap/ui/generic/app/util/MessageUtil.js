/*
 * ! SAPUI5

(c) Copyright 2009-2020 SAP SE. All rights reserved
 */
sap.ui.getCore().loadLibrary("sap.m");sap.ui.define(["sap/ui/core/ValueState","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/json/JSONModel","sap/m/MessageToast","sap/ui/core/syncStyleClass"],function(V,F,a,J,M,s){"use strict";var h={badRequest:"400",unauthorized:"401",forbidden:"403",notFound:"404",methodNotAllowed:"405",preconditionFailed:"428",internalServerError:"500",notImplemented:"501",badGateway:"502",serviceUnavailable:"503",gatewayTimeout:"504",httpVersionNotSupported:"505"};var o={callAction:"callAction",addEntry:"addEntry",saveEntity:"saveEntity",deleteEntity:"deleteEntity",editEntity:"editEntity",modifyEntity:"modifyEntity",activateDraftEntity:"activateDraftEntity",saveAndPrepareDraftEntity:"saveAndPrepareDraftEntity",getCollection:"getCollection"};var m;function g(R){var t=[],e;var f=sap.ui.getCore().getMessageManager();var j=f.getMessageModel().getData();for(var i=0;i<j.length;i++){e=j[i];if(e.getPersistent()){t.push(e);}}return t;}function c(P,C){var D;D=function(n,f){var e;var i={onMessageDialogClose:function(){f.onMessageDialogClose();e.destroy();},onActionButtonPressed:function(){f.onActionButtonPressed();e.destroy();}};e=sap.ui.xmlfragment(n,i);if(C){s(C,P,e);}P.addDependent(P);return e;};return D;}function b(v,A,e){var t=g();var l=sap.ui.getCore().getLibraryResourceBundle("sap.ui.generic.app");if(t.length===0){return Promise.resolve();}r();var S=V.None;for(var i=0;i<t.length&&S!==V.Error;i++){var f=t[i];switch(f.type){case sap.ui.core.MessageType.Error:S=V.Error;break;case sap.ui.core.MessageType.Warning:S=V.Warning;break;case sap.ui.core.MessageType.Success:if(S===sap.ui.core.ValueState.None){S=V.Success;}}}if(t.length===1&&(S===V.Success||S===V.None)){M.show(t[0].message);return Promise.resolve();}return new Promise(function(R){var j=(typeof v==="function")?v:c(v.owner,v.contentDensityClass);var D,k,n;var q=function(){D.close();n.setProperty("/backButtonVisible",false);n.setProperty("/messages",[]);n.setProperty("/messageToGroupName",Object.create(null));k.navigateBack();n.getProperty("/resolve")();};var u={onMessageDialogClose:function(){q(n);},onActionButtonPressed:function(){n.getProperty("/actionButtonCallback")();q(n);},onBackButtonPress:function(){n.setProperty("/backButtonVisible",false);k.navigateBack();},onMessageSelect:function(){n.setProperty("/backButtonVisible",true);}};D=j("sap.ui.generic.app.fragments.MessageDialog",u);k=D.getContent()[0];var w=D.getModel();var x=w&&w.getMetaModel();var G=false;var y=!!(e&&e.action);var z=Object.create(null);if(x){t.forEach(function(f){var B=f.getTarget();if(!B){return;}if(B.lastIndexOf("/")>0){B=B.substring(0,B.lastIndexOf("/"));}var E=B.substring(1,B.indexOf("("));var C=E&&x.getODataEntitySet(E);var H=C&&x.getODataEntityType(C.entityType);var I=H&&H["com.sap.vocabularies.UI.v1.HeaderInfo"];var T=I&&I.Title&&I.Title.Value&&I.Title.Value.Path;var K=w.getProperty(B);var L=K&&K[T];if(L){z[f.getId()]=L;G=true;}});}n=D.getModel("settings");if(!n){n=new J({genericGroupName:l.getText("GENERAL_TITLE"),backButtonVisible:false,cancelButtonText:l.getText("DIALOG_CANCEL"),closeButtonText:l.getText("DIALOG_CLOSE")});D.setModel(n,"settings");}n.setProperty("/showActionButton",y);if(y){n.setProperty("/actionButtonText",e.actionLabel);n.setProperty("/actionButtonCallback",e.action);}n.setProperty("/title",A||l.getText("DIALOG_TITLE"));n.setProperty("/messages",t);n.setProperty("/grouping",G);n.setProperty("/state",S);n.setProperty("/resolve",R);n.setProperty("/messageToGroupName",z);D.open();});}function r(){var e=sap.ui.getCore().getMessageManager();var t=g();if(t.length>0){e.removeMessages(t);}}function d(e,D,f){var t=new sap.ui.core.message.Message({message:e,description:D,type:sap.ui.core.MessageType.Error,processor:f,target:'',persistent:true});sap.ui.getCore().getMessageManager().addMessages(t);}function p(e){var R;m=e&&e.url;if(m){m="/"+m.substring(0,m.indexOf(")")+1);}var f=sap.ui.getCore().getLibraryResourceBundle("sap.ui.generic.app").getText("ERROR_UNKNOWN");var H;if(e instanceof Error){if(e.message){f=e.message;}}else if(e.response){if(e.response.message){f=e.response.message;}var v=e.response.statusCode;H=!Number.isInteger(v)?Number(v):v;if(e.response.headers){for(var i in e.response.headers){if(i.toLowerCase()==="content-type"){var j=e.response.headers[i];if(j.toLowerCase().indexOf("application/json")===0){if(e.response.responseText){var O=JSON.parse(e.response.responseText);if(O&&O.error&&O.error.message&&O.error.message.value){f=O.error.message.value;}}}else if(e.message){f=e.message;}break;}}}}var t=g(e);R={httpStatusCode:H,messageText:f,description:null,containsTransientMessage:(t.length===0)?false:true};return R;}return{operations:o,httpStatusCodes:h,handleTransientMessages:b,removeTransientMessages:r,addTransientErrorMessage:d,parseErrorResponse:p,getTransientMessages:g};},true);
