//@ui5-bundle sap/ui/generic/app/library-preload.js
/*
 * ! @copyright@
 */
sap.ui.predefine('sap/ui/generic/app/navigation/service/NavigationHandler',["sap/fe/navigation/NavigationHandler","sap/fe/navigation/library","./NavError","./SelectionVariant","sap/ui/generic/app/library"],function(F,N,a,S){"use strict";
var b=F.extend("sap.ui.generic.app.navigation.service.NavigationHandler",{
metadata:{publicMethods:["navigate","parseNavigation","storeInnerAppState","openSmartLinkPopover","mixAttributesAndSelectionVariant","setModel"]},
constructor:function(c,p){try{F.apply(this,[c,N.Mode.ODataV2,p]);}catch(e){if(e){throw new a(e._sErrorCode);}}},
navigate:function(s,A,n,i,o,e,c){try{var _=function(o,E){if(E){var d=new a(E._sErrorCode);o(d);}};F.prototype.navigate.apply(this,[s,A,n,i,_.bind(this,o),e,c]);}catch(E){if(E){throw new a(E._sErrorCode);}}},
parseNavigation:function(){try{var m=jQuery.Deferred();var p=F.prototype.parseNavigation.apply(this);p.done(function(A,s,n){if(Object.keys(A).length){var o=A.oSelectionVariant;var d=A.oDefaultedSelectionVariant;A.oSelectionVariant=o&&new S(o.toJSONObject());A.oDefaultedSelectionVariant=d&&new S(d.toJSONObject());var D=A.oDefaultedSelectionVariant;if(D&&D.getText()==="Selection Variant with ID "+D.getID()){delete A.oDefaultedSelectionVariant._sText;}}m.resolve(A,s,n);});p.fail(function(e,s,n){var g=new a(e._sErrorCode);m.reject(g,s,n);});return m.promise();}catch(e){if(e){throw new a(e._sErrorCode);}}},
setTechnicalParameters:function(t){try{F.prototype.setTechnicalParameters.apply(this,[t]);}catch(e){if(e){throw new a(e._sErrorCode);}}},
getTechnicalParameters:function(){return F.prototype.getTechnicalParameters.apply(this);},
replaceHash:function(A){F.prototype.replaceHash.apply(this,[A]);},
storeInnerAppState:function(i,I){return F.prototype.storeInnerAppState.apply(this,[i,I]);},
storeInnerAppStateWithImmediateReturn:function(i,I){return F.prototype.storeInnerAppStateWithImmediateReturn.apply(this,[i,I]);},
processBeforeSmartLinkPopoverOpens:function(t,s,i,e){return F.prototype.processBeforeSmartLinkPopoverOpens.apply(this,[t,s,i,e]);},
mixAttributesAndSelectionVariant:function(s,c,i){try{var o=F.prototype.mixAttributesAndSelectionVariant.apply(this,[s,c,i]);return new sap.ui.generic.app.navigation.service.SelectionVariant(o.toJSONObject());}catch(e){if(e){throw new a(e._sErrorCode);}}},
setModel:function(m){F.prototype.setModel.apply(this,[m]);},
constructContextUrl:function(e,m){try{return F.prototype.constructContextUrl.apply(this,[e,m]);}catch(E){if(E){throw new a(E._sErrorCode);}}}
});
return b;});
/*!
 * @copyright@
 */
sap.ui.predefine('sap/ui/generic/app/navigation/service/PresentationVariant',["sap/fe/navigation/PresentationVariant","./NavError"],function(F,N){"use strict";
var P=F.extend("sap.ui.generic.app.navigation.service.PresentationVariant",{
constructor:function(p){try{F.apply(this,[p]);}catch(e){if(e){throw new N(e._sErrorCode);}}},
getID:function(){return F.prototype.getID.apply(this);},
setID:function(i){F.prototype.setID.apply(this,[i]);},
setText:function(n){try{F.prototype.setText.apply(this,[n]);}catch(e){if(e){throw new N(e._sErrorCode);}}},
getText:function(){return F.prototype.getText.apply(this);},
setContextUrl:function(u){try{F.prototype.setContextUrl.apply(this,[u]);}catch(e){if(e){throw new N(e._sErrorCode);}}},
getContextUrl:function(){return F.prototype.getContextUrl.apply(this);},
isEmpty:function(){return F.prototype.isEmpty.apply(this);},
setProperties:function(p){F.prototype.setProperties.apply(this,[p]);},
getProperties:function(){return F.prototype.getProperties.apply(this);},
setTableVisualization:function(p){F.prototype.setTableVisualization.apply(this,[p]);},
getTableVisualization:function(){return F.prototype.getTableVisualization.apply(this);},
setChartVisualization:function(p){F.prototype.setChartVisualization.apply(this,[p]);},
getChartVisualization:function(){return F.prototype.getChartVisualization.apply(this);},
toJSONObject:function(){return F.prototype.toJSONObject.apply(this);},
toJSONString:function(){return F.prototype.toJSONString.apply(this);}
});
return P;});
sap.ui.predefine('sap/ui/generic/app/navigation/service/SelectionVariant',["sap/fe/navigation/SelectionVariant","./NavError"],function(F,N){"use strict";
var S=F.extend("sap.ui.generic.app.navigation.service.SelectionVariant",{
constructor:function(s){try{F.apply(this,[s]);}catch(e){if(e){throw new N(e._sErrorCode);}}},
getID:function(){return F.prototype.getID.apply(this);},
setID:function(i){F.prototype.setID.apply(this,[i]);},
setText:function(n){try{F.prototype.setText.apply(this,[n]);}catch(e){if(e){throw new N(e._sErrorCode);}}},
getText:function(){return F.prototype.getText.apply(this);},
setParameterContextUrl:function(u){try{F.prototype.setParameterContextUrl.apply(this,[u]);}catch(e){if(e){throw new N(e._sErrorCode);}}},
getParameterContextUrl:function(){return F.prototype.getParameterContextUrl.apply(this);},
getFilterContextUrl:function(){return F.prototype.getFilterContextUrl.apply(this);},
setFilterContextUrl:function(u){try{F.prototype.setFilterContextUrl.apply(this,[u]);}catch(e){if(e){throw new N(e._sErrorCode);}}},
addParameter:function(n,v){try{F.prototype.addParameter.apply(this,[n,v]);return this;}catch(e){if(e){throw new N(e._sErrorCode);}}},
removeParameter:function(n){try{F.prototype.removeParameter.apply(this,[n]);return this;}catch(e){if(e){throw new N(e._sErrorCode);}}},
renameParameter:function(n,s){try{F.prototype.renameParameter.apply(this,[n,s]);return this;}catch(e){if(e){throw new N(e._sErrorCode);}}},
getParameter:function(n){try{return F.prototype.getParameter.apply(this,[n]);}catch(e){if(e){throw new N(e._sErrorCode);}}},
getParameterNames:function(){return F.prototype.getParameterNames.apply(this);},
addSelectOption:function(p,s,o,l,h){try{F.prototype.addSelectOption.apply(this,[p,s,o,l,h]);return this;}catch(e){if(e){throw new N(e._sErrorCode);}}},
removeSelectOption:function(n){try{F.prototype.removeSelectOption.apply(this,[n]);return this;}catch(e){if(e){throw new N(e._sErrorCode);}}},
renameSelectOption:function(n,s){try{F.prototype.renameSelectOption.apply(this,[n,s]);return this;}catch(e){if(e){throw new N(e._sErrorCode);}}},
getSelectOption:function(p){try{return F.prototype.getSelectOption.apply(this,[p]);}catch(e){if(e){throw new N(e._sErrorCode);}}},
getSelectOptionsPropertyNames:function(){return F.prototype.getSelectOptionsPropertyNames.apply(this);},
getPropertyNames:function(){return F.prototype.getPropertyNames.apply(this);},
massAddSelectOption:function(p,s){try{F.prototype.massAddSelectOption.apply(this,[p,s]);return this;}catch(e){if(e){throw new N(e._sErrorCode);}}},
getValue:function(n){try{return F.prototype.getValue.apply(this,[n]);}catch(e){if(e){throw new N(e._sErrorCode);}}},
isEmpty:function(){return F.prototype.isEmpty.apply(this);},
toJSONObject:function(){return F.prototype.toJSONObject.apply(this);},
toJSONString:function(){return F.prototype.toJSONString.apply(this);}
});
return S;},true);
/*
 * SAPUI5

(c) Copyright 2009-2020 SAP SE. All rights reserved
 */
sap.ui.predefine('sap/ui/generic/app/ApplicationController',["sap/ui/thirdparty/jquery","./transaction/BaseController","./transaction/TransactionController","sap/ui/generic/app/util/ModelUtil","sap/base/Log"],function(q,B,T,M,L){"use strict";
var A=B.extend("sap.ui.generic.app.ApplicationController",{constructor:function(m,v){B.apply(this,[m]);this._oGroupChanges={};this.sName="sap.ui.generic.app.ApplicationController";this._initModel(m);this.registerView(v);}});
A.prototype.propertyChanged=function(P,c){var t=this,m={batchGroupId:"Changes",changeSetId:"Changes",onlyIfPending:true,noShowResponse:true,noBlockUI:true,draftSave:true},s,e={};if(c&&c instanceof sap.ui.model.Context){var E=M.getEntitySetFromContext(c);var o=c.getModel().getMetaModel();var a=o.getODataEntitySet(E).entityType;e=o.getODataEntityType(a);}for(var p in e){if(p.startsWith("com.sap.vocabularies.Common.v1.SideEffects")){s=e[p];if(s.SourceProperties&&s.SourceProperties.length){for(var i=0;i<s.SourceProperties.length;i++){if(s.SourceProperties[i].PropertyPath===P){t.registerGroupChange(t._getSideEffectsQualifier(p));}}}}}return new Promise(function(r,b){setTimeout(function(){t.triggerSubmitChanges(m).then(function(R){r(R);},function(d){b(d);});});});};
A.prototype.registerGroupChange=function(g){this._oGroupChanges[g]=true;};
A.prototype.registerView=function(v){var t=this;if(v){this._fnAttachValidateFieldGroup=function(e){var I,o,l,i,a=[];var b=this.getBindingContext();if(!b){return false;}if(!t.getTransactionController().getDraftController().getDraftContext().hasDraft(b)){this.detachValidateFieldGroup(t._fnAttachValidateFieldGroup);return false;}if(e.mParameters.fieldGroupIds){l=e.mParameters.fieldGroupIds.length;}for(i=0;i<l;i++){I=e.mParameters.fieldGroupIds[i];o=v.data(I);if(o){a.push({uuid:I,objid:o});}}t._onValidateFieldGroup(a,v);};v.attachValidateFieldGroup(this._fnAttachValidateFieldGroup);}};
A.prototype._initModel=function(m){if(m.getDefaultBindingMode()!==sap.ui.model.BindingMode.TwoWay){L.error("ApplicationController: The model's DefaultBindingMode wasn't but is now set to 'TwoWay'.");m.setDefaultBindingMode(sap.ui.model.BindingMode.TwoWay);}if(m.getRefreshAfterChange()!==false){L.error("ApplicationController: The model's setting 'RefreshAfterChange' wasn't but is now set to 'false'.");m.setRefreshAfterChange(false);}m.setDeferredBatchGroups(["Changes"]);m.setChangeBatchGroups({"*":{batchGroupId:"Changes",changeSetId:"Changes",single:false}});};
A.prototype._onValidateFieldGroup=function(g,v){var i,l=g.length,r,R={bGlobal:false,aRequests:[]},V=[],t=this;for(i=0;i<l;i++){V.push(this._executeFieldGroup(g[i],R,v).then(function(){return true;},function(){return false;}));}var f=function(a){if(a.find(function(b){return b;})){l=R.aRequests.length;for(i=0;i<l;i++){r=R.aRequests[i];r(R.bGlobal);}if(R.bGlobal){t._oModel.refresh(true,false,"Changes");}var p=t.triggerSubmitChanges({batchGroupId:"Changes",noShowSuccessToast:true,forceSubmit:true,noBlockUI:true,urlParameters:{},draftSave:t._oModel.hasPendingChanges()});t.fireEvent("beforeSideEffectExecution",{promise:p});return p;}};return Promise.all(V).then(f);};
A.prototype._executeFieldGroup=function(g,r,v){var s,c,S,p={batchGroupId:"Changes",changeSetId:"SideEffects",noShowSuccessToast:true,forceSubmit:true,noBlockUI:true,urlParameters:{}},t=this;s=this._getSideEffectsQualifier(g.objid.name);p.urlParameters.SideEffectsQualifier=s;c=g.objid.contextObject;S=this._getSideEffect(g.objid);return this._hasClientErrors(g.uuid,v).then(function(){if(!t._oGroupChanges[s]&&!t._oModel.hasPendingChanges()){return Promise.reject();}t._oGroupChanges[s]=false;t._executeSideEffects(S,c,p,r);});};
A.prototype._getSideEffectsQualifier=function(a){var s=a.replace("com.sap.vocabularies.Common.v1.SideEffects","");if(s.indexOf("#")===0){s=s.replace("#","");}return s;};
A.prototype._executeSideEffectsForActions=function(s,c,t){var r;var C="_it/";var R={bGlobal:false,aRequests:[]};var p={batchGroupId:"Changes",changeSetId:"SideEffects",noShowSuccessToast:true,forceSubmit:true,noBlockUI:true,urlParameters:{}};var i=0;if(t===false){p.batchGroupId="NonDraftChanges";}if(s.TargetEntities&&s.TargetEntities.length){for(i=0;i<s.TargetEntities.length;i++){if(s.TargetEntities[i].NavigationPropertyPath.indexOf(C)===0){s.TargetEntities[i].NavigationPropertyPath=s.TargetEntities[i].NavigationPropertyPath.substr(4);}}}var a=function(o,P){var b=o[P];if(b&&b.startsWith(C)){o[P]=b.substr(4);}};(s.TargetProperties||[]).forEach(function(o){["PropertyPath","String"].forEach(a.bind(null,o));});for(i=0;i<c.length;i++){this._executeSideEffects(s,c[i],p,R);if(R.aRequests[0]){r=R.aRequests[0];r(R.bGlobal);R.aRequests=[];}}if(R.bGlobal){this._oModel.refresh(true,false,p.batchGroupId);}};
A.prototype._executeSideEffects=function(s,c,p,r){var t=this,f,a;if(t.getTransactionController().getDraftController().getDraftContext().hasDraft(c)){if(s.TriggerAction&&s.TriggerAction.String){a=s.TriggerAction.String;}}this._setSelect(s,p,r,c);f=function(g){if(a){t._callAction(a,c,p);}if(!g){var R=q.extend({},p);R.context=c;t._read("",R);}};r.aRequests.push(f);};
A.prototype._hasClientErrors=function(g,v){var c,C=[];c=v.getControlsByFieldGroupId(g);c.forEach(function(o){var p=o.getParent();C.push(p&&p.checkValuesValidity&&p.checkValuesValidity());});return Promise.all(C);};
A.prototype._setSelect=function(s,p,r,c){var i,l=0,t,S=[],e=[],a=[],n;if(!r.bGlobal){if((!s.TargetEntities||s.TargetEntities.length===0)&&(!s.TargetProperties||s.TargetProperties.length===0)){r.bGlobal=true;return;}if(s.TargetEntities){l=s.TargetEntities.length;if(l>0){for(i=0;i<l;i++){t=s.TargetEntities[i];if(t.NavigationPropertyPath===""){S.push('*');}else{S.push(t.NavigationPropertyPath);if(e.indexOf(t.NavigationPropertyPath)===-1){e.push(t.NavigationPropertyPath);}}a.push(t.NavigationPropertyPath);}}}if(s.TargetProperties){l=s.TargetProperties.length;if(l>0){for(i=0;i<l;i++){t=s.TargetProperties[i];n="";if(t.PropertyPath?t.PropertyPath.indexOf("/")!==-1:t.String.indexOf("/")!==-1){var E=M.getEntitySetFromContext(c);var m=this._oModel.getMetaModel();var b=m.getODataEntitySet(E).entityType;var o=m.getODataEntityType(b);var P=t.PropertyPath?t.PropertyPath.split("/"):t.String.split("/");var d;if(P.length>1){for(var j=0;j<(P.length-1);j++){d=m.getODataAssociationEnd(o,P[j]);if(d){o=m.getODataEntityType(d.type);if(n){n=n+"/";}n=n+P[j];}else{break;}}}}if(a.indexOf(n)===-1){if(n&&e.indexOf(n)===-1){e.push(n);}S.push(t.PropertyPath||t.String);}}}}}if(S.length>0){p.readParameters=["$select="+S.join(",")];if(e.length>0){p.readParameters.push("$expand="+e.join(','));}}};
A.prototype._getSideEffect=function(i){var m,r,s,f;m=this._oModel.getMetaModel();s="getOData"+i.originType.substring(0,1).toUpperCase()+i.originType.substring(1);if(i.originNamespace){f=i.originNamespace+"."+i.originName;}else{f=i.originName;}if(m[s]){r=m[s](f);if(r){return r[i.name];}}throw"Unknown SideEffect originType: "+i.originType;};
A.prototype.getTransactionController=function(){if(!this._oTransaction){this._oTransaction=new T(this._oModel,this._oQueue,{noBatchGroups:true});}return this._oTransaction;};
A.prototype.invokeActions=function(f,c,P){var C,i,l,a,b=[],s;P=P||{};l=c.length;a=this._getChangeSetFunc(c,P.operationGrouping);if(l===0){b.push(this._invokeAction(f,null,null,P));}else{for(i=0;i<l;i++){b.push(this._invokeAction(f,c[i],a(i),P));}}var F=this._oModel.getMetaModel().getODataFunctionImport(f.split("/")[1]);for(var p in F){if(p.startsWith("com.sap.vocabularies.Common.v1.SideEffects")){s=F[p];break;}}if(s){this._executeSideEffectsForActions(s,c,P.triggerChanges);}if(P.triggerChanges!==false){P={batchGroupId:"Changes",changeSetId:"Action"+a(i+1),successMsg:"Call of action succeeded",failedMsg:"Call of action failed",forceSubmit:true,context:C};b.push(this.triggerSubmitChanges(P));}var t=this;return this._newPromiseAll(b).then(function(r){var d=false;if(r&&P.triggerChanges!==false&&r.length>c.length){r.pop();}d=t._checkAtLeastOneSuccess(c,r);if(d){return r;}else{return Promise.reject(r);}});};
A.prototype.executeSideEffects=function(c,s,S,f){var o,n,P,e,r,Q;var b=false;var g=!s&&!S;var R={bGlobal:false,aRequests:[]};var m={batchGroupId:"Changes",changeSetId:"SideEffects",noShowSuccessToast:true,forceSubmit:true,noBlockUI:true,urlParameters:{}};var E=M.getEntitySetFromContext(c);var a=c.getModel().getMetaModel();var d=a.getODataEntitySet(E).entityType;var h=a.getODataEntityType(d);var i=0;f=!(f===false);S=S||[];s=s||[];var j=function(o){if(Q){m.urlParameters.SideEffectsQualifier=Q;}else{delete m.urlParameters.SideEffectsQualifier;}this._executeSideEffects(o,c,m,R);if(R.aRequests[0]){r=R.aRequests[0];r(R.bGlobal);R.aRequests=[];}}.bind(this);for(var p in h){if(p.startsWith("com.sap.vocabularies.Common.v1.SideEffects")){o=h[p];e=false;Q=this._getSideEffectsQualifier(p);if(g){if(!o.SourceProperties&&!o.SourceEntities){j(o);e=true;b=true;break;}}else{if(o.SourceEntities&&o.SourceEntities.length){for(i=0;i<o.SourceEntities.length;i++){n=o.SourceEntities[i].NavigationPropertyPath;if(S.indexOf(n)!==-1){e=true;}}}if(!e&&o.SourceProperties&&o.SourceProperties.length){for(i=0;i<o.SourceProperties.length;i++){P=o.SourceProperties[i].PropertyPath;if(s.indexOf(P)!==-1){e=true;}}}if(e){j(o);b=true;}}}}if(R.bGlobal||(g&&!e)){if(g&&o){j({});b=true;}if(f){this._oModel.refresh(true,false,"Changes");b=true;}}var k=null;if(b){k=this.triggerSubmitChanges({batchGroupId:"Changes",noShowSuccessToast:true,forceSubmit:true,noBlockUI:true,urlParameters:{},draftSave:this._oModel.hasPendingChanges()});}else{k=Promise.resolve();}this.fireEvent("beforeSideEffectExecution",{promise:k});return k;};
A.prototype._checkAtLeastOneSuccess=function(c,r){var i,a=false;if(c.length<=r.length){for(i=0;i<c.length;i++){r[i].actionContext=c[i];if(!r[i].error){a=true;}}if(c.length===0){for(i=0;i<r.length;i++){if(!r[i].error){a=true;}}}}return a;};
A.prototype._newPromiseAll=function(p){var r=[];var R=Promise.resolve(null);p.forEach(function(P){R=R.then(function(){return P;}).then(function(o){r.push({response:o});},function(e){r.push({error:e});});});return R.then(function(){return Promise.resolve(r);});};
A.prototype._getChangeSetFunc=function(c,o){var l=c.length;var s=function(){return"Changes";};if(l===1){return s;}if(o==="com.sap.vocabularies.UI.v1.OperationGroupingType/ChangeSet"){return s;}return function(i){return"Changes"+i;};};
A.prototype.getNewActionContext=function(f,e,p){var t=this;p=q.extend({batchGroupId:"Changes",changeSetId:"SingleAction",successMsg:"Call of action succeeded",failedMsg:"Call of action failed",forceSubmit:true,context:e,functionImport:this._oMeta.getODataFunctionImport(f.split("/")[1])},p);var F=this._createFunctionContext(e,p);F.result=F.result.then(function(r){return t._normalizeResponse(r,true);},function(r){var o=t._normalizeError(r);throw o;});return F;};
A.prototype.submitActionContext=function(e,a,f){var s;var F=this._oModel.getMetaModel().getODataFunctionImport(f);for(var p in F){if(p.startsWith("com.sap.vocabularies.Common.v1.SideEffects")){s=F[p];break;}}if(s){this._executeSideEffectsForActions(s,[e]);}this.triggerSubmitChanges({batchGroupId:"Changes",successMsg:"Call of action succeeded",failedMsg:"Call of action failed",forceSubmit:true,context:a});};
A.prototype._invokeAction=function(f,c,C,p){var t=this;var h=Object.assign({},p.headers);var u=Object.assign({},p.urlParameters);var P={batchGroupId:"Changes",changeSetId:C,successMsg:"Call of action succeeded",failedMsg:"Call of action failed",urlParameters:u,forceSubmit:true,context:c,headers:h};if(p.triggerChanges===false){P.batchGroupId="NonDraftChanges";}return this._callAction(f,c,P).then(function(r){return t._normalizeResponse(r,true);},function(r){var o=t._normalizeError(r);throw o;});};
A.prototype.destroy=function(){B.prototype.destroy.apply(this,[]);if(this._oTransaction){this._oTransaction.destroy();}this._oModel=null;this._oTransaction=null;this._oGroupChanges=null;};
return A;},true);
sap.ui.predefine('sap/ui/generic/app/library',['sap/ui/core/library','sap/fe/navigation/library'],function(l){"use strict";sap.ui.getCore().initLibrary({name:"sap.ui.generic.app",version:"1.88.0",dependencies:["sap.ui.core","sap.fe.navigation"],types:["sap.ui.generic.app.navigation.service.NavType","sap.ui.generic.app.navigation.service.ParamHandlingMode","sap.ui.generic.app.navigation.service.SuppressionBehavior"],interfaces:[],controls:[],elements:[],noLibraryCSS:true});sap.ui.generic.app.navigation.service.ParamHandlingMode={SelVarWins:"SelVarWins",URLParamWins:"URLParamWins",InsertInSelOpt:"InsertInSelOpt"};sap.ui.generic.app.navigation.service.NavType={initial:"initial",URLParams:"URLParams",xAppState:"xAppState",iAppState:"iAppState"};sap.ui.generic.app.navigation.service.SuppressionBehavior={standard:0,ignoreEmptyString:1,raiseErrorOnNull:2,raiseErrorOnUndefined:4};sap.ui.lazyRequire("sap.ui.generic.app.AppComponent","new extend getMetadata");return sap.ui.generic.app;});
sap.ui.predefine('sap/ui/generic/app/navigation/service/NavError',["sap/fe/navigation/NavError"],function(F){"use strict";
var N=F.extend("sap.ui.generic.app.navigation.service.NavError",{
metadata:{publicMethods:["getErrorCode"],properties:{},library:"sap.ui.generic.app"},
constructor:function(e){F.apply(this);this._sErrorCode=e;}
});
N.prototype.getErrorCode=function(){return this._sErrorCode;};
return N;});
sap.ui.predefine('sap/ui/generic/app/transaction/BaseController',["sap/ui/base/EventProvider","sap/ui/generic/app/util/ModelUtil","sap/ui/generic/app/util/DraftUtil","sap/ui/generic/app/util/Queue","sap/base/Log"],function(E,M,D,Q,L){"use strict";
var B=E.extend("sap.ui.generic.app.transaction.BaseController",{
metadata:{publicMethods:["hasClientMessages","triggerSubmitChanges","attachFatalError","detachFatalError","destroy","updateMultipleEntities"]},
constructor:function(m,q){if(!m){throw new Error("No model");}if(m.bUseBatch==false){L.error("sap.ui.generic.app.transaction.BaseController: Only ODataModel with batch mode enabled are supported!");B.prototype.NonBatchEventHandlers={};m.attachRequestCompleted(function(e){var r=e.getParameters().ID;var o=B.prototype.NonBatchEventHandlers[r];if(o&&e.getParameters().success){o.success();delete B.prototype.NonBatchEventHandlers[r];}else if(o&&!e.getParameters().success){o.error();delete B.prototype.NonBatchEventHandlers[r];}});}E.apply(this,arguments);this.sName="sap.ui.generic.app.transaction.BaseController";this._oModel=m;this._oMeta=m.getMetaModel();this._oDraftUtil=new D();this._oModelUtil=new M(m);if(q){this._oQueue=q;}else{this._oQueue=new Q();this._bOwnsQueue=true;}this._initCounts();}
});
B.prototype.attachFatalError=function(f,l){this.attachEvent("fatalError",f,l);};
B.prototype.detachFatalError=function(f,l){this.detachEvent("fatalError",f,l);};
B.prototype._prepareCallAction=function(f,c,p){var e,o,a,s,k;if(!f){throw new Error("Invalid Function Import");}p.urlParameters=p.urlParameters||{};p.functionImport=this._oMeta.getODataFunctionImport(f.split("/")[1]);if(!p.functionImport){throw new Error("Unknown Function Import "+f);}if(c){s=M.getEntitySetFromContext(c);e=this._oMeta.getODataEntitySet(s,false);o=this._oMeta.getODataEntityType(e.entityType,false);k=o.key.propertyRef;a=c.getObject();}if(a){this._getActionParameters(a,p,k);this._getAdditionalActionParameters(a,p,k);this._getActionRequestHeaders(c,a,p);}return p;};
B.prototype._callAction=function(f,c,p){var t=this;if(!p.urlParameters||!p.functionImport){p=this._prepareCallAction(f,c,p);}return new Promise(function(r,a){var F,C;F="/"+p.functionImport.name;C=t._getRequestCallbacks(r,a);t._oModel.callFunction(F,{method:p.functionImport.httpMethod,urlParameters:p.urlParameters,success:C.success,error:C.error,batchGroupId:p.batchGroupId,changeSetId:p.changeSetId,headers:p.headers,expand:p.expand});});};
B.prototype._createFunctionContext=function(c,p){var a={};var C;var h;var t=this;a.result=new Promise(function(r,R){C=t._getRequestCallbacks(r,R);});this._getActionRequestHeaders(c,c.getObject(),p);h=this._oModel.callFunction("/"+p.functionImport.name,{method:p.functionImport.httpMethod,urlParameters:p.urlParameters,success:C.success,error:C.error,batchGroupId:p.batchGroupId,changeSetId:p.changeSetId,headers:p.headers,eTag:t._oModel.getETag(c.getPath())});a.context=h.contextCreated();a.abort=h.abort;return a;};
B.prototype._getActionRequestHeaders=function(c,e,p){var s;if(!p.headers){p.headers={};}if(!p.headers["If-Match"]&&p.functionImport["sap:action-for"]){s=this._oModel.getETag(null,c,e);if(s){p.headers["If-Match"]=s;}}};
B.prototype._getActionParameters=function(e,p,k){var i,a,l=k.length,A={},s;s=p.functionImport["sap:action-for"];a=function(P){if(p.functionImport.parameter){var j,b=p.functionImport.parameter.length;for(j=0;j<b;j++){if(p.functionImport.parameter[j].name===P){return true;}}}return false;};if(!p.functionImport.parameter&&s){L.error("Action doesn't have any parameters");throw new Error("Action doesn't have any parameters");}for(i=0;i<l;i++){if(a(k[i].name)){p.urlParameters[k[i].name]=e[k[i].name];}else if(s&&(k[i].name!="IsActiveEntity"||k[i].name!="DraftUUID")){L.error("Action does not contain a equally-named parameter for key property: "+k[i].name);throw new Error("Action does not contain a equally-named parameter for key property: "+k[i].name);}}return A;};
B.prototype._getAdditionalActionParameters=function(e,p,k){var j,l=0,P;var I=function(s){var i=0,a=k.length;for(i=0;i<a;i++){if(k[i].name===s){return true;}}return false;};if(p.functionImport.parameter){l=p.functionImport.parameter.length;}if(l>k.length){for(j=0;j<l;j++){P=p.functionImport.parameter[j];if(!I(P.name)){var n=(P.nullable==="true")?true:false;if(!p.urlParameters.hasOwnProperty(P.name)&&!n){L.error("Unknown parameter "+P.name);throw new Error("Unknown parameter "+P.name);}}}}};
B.prototype._read=function(p,P){var t=this;return new Promise(function(r,a){var c,u;if(P.readParameters){u=P.readParameters;}else if(P.urlParameters){u=P.urlParameters;}c=t._getRequestCallbacks(r,a);t._oModel.read(p,{context:P.context,success:c.success,error:c.error,batchGroupId:P.batchGroupId,changeSetId:P.changeSetId,urlParameters:u});});};
B.prototype._remove=function(p,P){var t=this;return new Promise(function(r,a){var c=t._getRequestCallbacks(r,a);t._oModel.remove(p,{success:c.success,error:c.error,eTag:"*",batchGroupId:P.batchGroupId,changeSetId:P.changeSetId,headers:P.headers});});};
B.prototype._syncRemove=function(p,P,s,e){var c=this._getRequestCallbacks(s,e);return this._oModel.remove(p,{success:c.success,error:c.error,eTag:"*",batchGroupId:P.batchGroupId,changeSetId:P.changeSetId});};
B.prototype._submitChanges=function(p){var t=this;if(!this._checkSubmit(p)){return Promise.resolve({context:p&&p.context});}if(this._oModel.bUseBatch==true){return new Promise(function(r,a){var c=t._getRequestCallbacks(r,a);t._oModel.submitChanges({batchGroupId:p.batchGroupId,success:c.success,error:c.error,eTag:p.eTag});});}else{return new Promise(function(r,a){var c=t._getRequestCallbacks(r,a);if(p.batchGroupId&&this._oModel.mDeferredRequests&&this._oModel.mDeferredRequests[p.batchGroupId]&&this._oModel.mDeferredRequests[p.batchGroupId].changes){var C=this._oModel.mDeferredRequests[p.batchGroupId].changes[p.changeSetId]||[];for(var i=0;i<C.length;i++){if(C[i].request._aborted==undefined||C[i].request._aborted==false){B.prototype.NonBatchEventHandlers[C[i].request.requestID]={"success":c.success,"error":c.error};}}}if(p.batchGroupId&&this._oModel.mDeferredRequests&&this._oModel.mDeferredRequests[p.batchGroupId]&&this._oModel.mDeferredRequests[p.batchGroupId].requests){var R=this._oModel.mDeferredRequests[p.batchGroupId].requests;for(var i=0;i<R.length;i++){if(R[i].request._aborted==undefined||R[i].request._aborted==false){B.prototype.NonBatchEventHandlers[R[i].request.requestID]={"success":c.success,"error":c.error};}}}t._oModel.submitChanges({batchGroupId:p.batchGroupId,eTag:p.eTag});}.bind(this));}};
B.prototype._checkSubmit=function(p){if(this._oModel.hasPendingChanges()){p.pendingChanges=true;return true;}if(p.forceSubmit&&p.forceSubmit==true){if(p.batchGroupId&&this._oModel.mDeferredRequests&&this._oModel.mDeferredRequests[p.batchGroupId]&&this._oModel.mDeferredRequests[p.batchGroupId].changes){var c=this._oModel.mDeferredRequests[p.batchGroupId].changes;var C=[];var a=[];var b;for(var k in c){if(c.hasOwnProperty(k)){C.push(k);}}for(var i=0;i<C.length;i++){b=this._oModel.mDeferredRequests[p.batchGroupId].changes[C[i]]||[];a=a.concat(b);}for(var i=0;i<a.length;i++){if(a[i].request._aborted==undefined||a[i].request._aborted==false){return true;}}}if(p.batchGroupId&&this._oModel.mDeferredRequests&&this._oModel.mDeferredRequests[p.batchGroupId]&&this._oModel.mDeferredRequests[p.batchGroupId].requests){var r=this._oModel.mDeferredRequests[p.batchGroupId].requests||[];for(var i=0;i<r.length;i++){if(r[i].request._aborted==undefined||r[i].request._aborted==false){return true;}}}}return false;};
B.prototype.triggerSubmitChanges=function(p){var t=this,f,r;p=p||{};p.successMsg=p.successMsg||"Action succeeded";p.failedMsg=p.failedMsg||"Action failed";r=function(e){t.fireEvent("fatalError",{response:e});throw e;};f=function(){return t._submitChanges(p).then(function(R){var _=function(R,p){try{t._checkImplicitError({httpResponse:R,responseData:R.data},p);return t._normalizeResponse({httpResponse:R,responseData:R.data},true);}catch(e){r(e);}};var b;var c;var n=[];if(R&&R.responseData&&R.responseData.__batchResponses){if(R.responseData.__batchResponses.length==1&&R.responseData.__batchResponses[0].__changeResponses&&R.responseData.__batchResponses[0].__changeResponses.length==1){return _(R.responseData.__batchResponses[0].__changeResponses[0],p);}for(var i=0;i<R.responseData.__batchResponses.length;i++){b=R.responseData.__batchResponses[i];if(b.__changeResponses){for(var j=0;j<b.__changeResponses.length;j++){c=b.__changeResponses[j];n.push(_(c,p));}}else{return _(b,p);}}}else{try{t._checkImplicitError(R,p);return t._normalizeResponse(R,true);}catch(e){r(e);}}return n;},function(R){var o=t._normalizeError(R);r(o);});};return this._oQueue.enqueue(f,{draftSave:p.draftSave});};
B.prototype._updateEntity=function(c,u){var t=this;return new Promise(function(r,a){var C=t._getRequestCallbacks(r,a);var p={success:C.success,error:C.error};t._oModel.update(c,u,p);});};
B.prototype.updateMultipleEntities=function(c){var p=[];for(var i=0;i<c.length;i++){var P=this._updateEntity(c[i].sContextPath,c[i].oUpdateData);p.push(P);}return Promise.all(p);};
B.prototype.addOperationToQueue=function(f,e){this._oQueue.enqueue(f,e);};
B.prototype.attachBeforeQueueItemProcess=function(f){this._oQueue._attachEvent('beforeQueueItemProcess',f);};
B.prototype.detachBeforeQueueItemProcess=function(f){this._oQueue._detachEvent('beforeQueueItemProcess',f);};
B.prototype.attachOnQueueCompleted=function(f){this._oQueue._attachEvent('onQueueCompleted',f);};
B.prototype.detachOnQueueCompleted=function(f){this._oQueue._detachEvent('onQueueCompleted',f);};
B.prototype.attachOnQueueFailed=function(f){this._oQueue._attachEvent('onQueueFailed',f);};
B.prototype.detachOnQueueFailed=function(f){this._oQueue._detachEvent('onQueueFailed',f);};
B.prototype.hasClientMessages=function(){if(this._oModelUtil.hasClientMessages()){return Promise.reject(new Error("Client messages detected"));}return null;};
B.prototype._normalizeResponse=function(r,c){if(r&&(r.httpResponse||r.responseData)){return{data:r.responseData,response:r.httpResponse||null,context:c?this._oModelUtil.getContextFromResponse(r.responseData):null};}return r;};
B.prototype._normalizeError=function(r){if(r&&r.message){return{response:r};}return r;};
B.prototype._returnPromiseAll=function(p){return Promise.all(p).then(function(r){if(r.length){return r[0];}return r;});};
B.prototype._atLeastOnePromiseResolved=function(p,d){var r=[];var R=Promise.resolve(null);var a=false;var P=p.length;var f=function(o){if(!d){r.push(o);a=true;}else if(P-1>r.length&&d){r.push(o);a=true;}};p.forEach(function(o,i){R=R.then(function(){return o;}).then(f,function(e){r.push(e);},this);});return R.then(function(){if(a){return Promise.resolve(r);}else{return Promise.reject(r);}});};
B.prototype._checkImplicitError=function(r,p){var P,o,s,c=false;if(this._mCounts.requestSent===1&&this._mCounts.requestCompleted===1){c=true;}this._initCounts();if(p.pendingChanges&&c){if(r&&r.httpResponse){P=r.httpResponse;}if(P&&P.response&&P.response.statusCode){s=parseInt(P.response.statusCode);if(s<200||s>299){o=this._parseError(P);throw this._normalizeError(o);}}}};
B.prototype._parseError=function(p){var r={};if(p.message){r.message=p.message;}if(p.response){r.statusCode=p.response.statusCode;r.statusText=p.response.statusText;r.headers=p.response.headers;r.responseText=p.response.body;}return r;};
B.prototype._initCounts=function(){this._mCounts={requestSent:0,requestCompleted:0};};
B.prototype._getRequestCallbacks=function(r,a){var t=this;this._mCounts.requestSent++;return{success:function(d,R){t._mCounts.requestCompleted++;r({responseData:d,httpResponse:R});},error:function(R){t._mCounts.requestCompleted++;a(R);}};};
B.prototype.destroy=function(){if(this._oModelUtil){this._oModelUtil.destroy();}if(this._oQueue&&this._bOwnsQueue){this._oQueue.destroy();}this._oModel=null;this._oMeta=null;this._oDraftUtil=null;this._oModelUtil=null;};
return B;},true);
sap.ui.predefine('sap/ui/generic/app/transaction/DraftContext',["sap/ui/base/Object","sap/ui/generic/app/util/ModelUtil"],function(B,M){"use strict";
var D=B.extend("sap.ui.generic.app.transaction.DraftContext",{
metadata:{publicMethods:["isDraftEnabled","isDraftRoot","hasDraft","hasDraftRoot","hasDraftValidationFunction","hasDraftPreparationAction","isTechnicalKey","isSemanticKey","getSemanticKey","checkUpdateOnChange","getODataDraftFunctionImportName","hasDraftAdministrativeData","hasSiblingEntity","destroy","hasPreserveChanges"]},
constructor:function(m){if(!m){throw new Error("No model");}this._oModel=m;this._oMeta=m.getMetaModel();this._oModelUtil=new M(m);return this.getInterface();}
});
D.prototype.isDraftEnabled=function(e){var d=this._getODataDraftEntitySet(e);return!!(d&&d.isDraft);};
D.prototype.isDraftRoot=function(e){var d=this._getODataDraftEntitySet(e);return!!(d&&d.isRoot);};
D.prototype.hasDraft=function(c){var e=M.getEntitySetFromContext(c);if(e==null){return false;}return this.isDraftEnabled(e);};
D.prototype.hasDraftRoot=function(c){var e=M.getEntitySetFromContext(c);return this.isDraftRoot(e);};
D.prototype.hasDraftValidationFunction=function(c){return!!this.getODataDraftFunctionImportName(c,"ValidationFunction");};
D.prototype.hasDraftPreparationAction=function(c){return!!this.getODataDraftFunctionImportName(c,"PreparationAction");};
D.prototype.isTechnicalKey=function(e,k){var E,o,K,i,s;if(!e){throw new Error("No entity set");}E=this._oMeta.getODataEntitySet(e);o=this._oMeta.getODataEntityType(E.entityType);K=o.key.propertyRef.length;if(Object.keys(k).length!==K){return false;}for(i=0;i<K;i++){s=o.key.propertyRef[i].name;if(!k[s]){return false;}}return true;};
D.prototype.isSemanticKey=function(e,k){var s,i,l;if(this.isDraftEnabled(e)){s=this.getSemanticKey(e);l=s.length;for(i=0;i<l;i++){if(!k[s[i].name]){return false;}}return true;}return false;};
D.prototype.getSemanticKey=function(e){var E,o,s,S=[],i,l;if(!e){throw new Error("No entity set");}E=this._oMeta.getODataEntitySet(e);o=this._oMeta.getODataEntityType(E.entityType);s=o["com.sap.vocabularies.Common.v1.SemanticKey"];if(s){l=s.length;for(i=0;i<l;i++){S.push({name:s[i].PropertyPath});}}return S;};
D.prototype.getODataDraftFunctionImportName=function(c,d){var e,o;e=M.getEntitySetFromContext(c);o=this._getODataDraftEntitySet(e);if(o.oDraft[d]&&o.oDraft[d].String){return o.oDraft[d].String;}return null;};
D.prototype._getODataDraftEntitySet=function(e){var o={},E;if(!e){throw new Error("No entity set");}E=this._oMeta.getODataEntitySet(e);o.ODataEntitySet=E;if(E["com.sap.vocabularies.Common.v1.DraftRoot"]){o.isDraft=true;o.isRoot=true;o.oDraft=E["com.sap.vocabularies.Common.v1.DraftRoot"];}else if(E["com.sap.vocabularies.Common.v1.DraftNode"]){o.isDraft=true;o.isRoot=false;o.oDraft=E["com.sap.vocabularies.Common.v1.DraftNode"];}return o;};
D.prototype.hasDraftAdministrativeData=function(e){return this._hasNavigationProperty(e,"DraftAdministrativeData");};
D.prototype.hasSiblingEntity=function(e){return this._hasNavigationProperty(e,"SiblingEntity");};
D.prototype._hasNavigationProperty=function(e,n){var E,o,i,l;E=this._oMeta.getODataEntitySet(e);o=this._oMeta.getODataEntityType(E.entityType);if(o.navigationProperty){l=o.navigationProperty.length;for(i=0;i<l;i++){if(o.navigationProperty[i].name===n){return true;}}}return false;};
D.prototype.checkUpdateOnChange=function(e,p){var P,E,s;if(!e){throw new Error("No entity set");}E=this._oMeta.getODataEntitySet(e);for(P in E){if(P.indexOf&&P.indexOf("com.sap.vocabularies.Common.v1.SideEffects")===0){s=E[P];if(s.SourceProperties&&s.SourceProperties.length){if(s.SourceProperties.length===1&&s.SourceProperties[0].PropertyPath){if(s.SourceProperties[0].PropertyPath===p){return true;}}}}}return false;};
D.prototype.hasPreserveChanges=function(c){var e=this._oMeta.getODataFunctionImport(this.getODataDraftFunctionImportName(c,"EditAction"));if(e&&e.parameter){for(var i=0;i<e.parameter.length;i++){var p=e.parameter[i];if(p.mode==='In'&&p.name==="PreserveChanges"){return true;}}}return false;};
D.prototype.destroy=function(){if(this._oModelUtil){this._oModelUtil.destroy();}this._oModelUtil=null;this._oModel=null;this._oMeta=null;};
return D;},true);
sap.ui.predefine('sap/ui/generic/app/transaction/DraftController',["sap/ui/thirdparty/jquery","./BaseController","./DraftContext","sap/base/Log","sap/ui/model/Context","sap/ui/generic/app/util/ActionUtil"],function(q,B,D,L,C,A){"use strict";
var a=B.extend("sap.ui.generic.app.transaction.DraftController",{
metadata:{publicMethods:["getDraftContext","getDraftForActiveEntity","createNewDraftEntity","createEditDraftEntity","validateDraftEntity","validateDraft","prepareDraft","prepareDraftEntity","saveAndPrepareDraftEntity","activateDraftEntity","isActiveEntity","hasActiveEntity","destroy","fetchHeader","discardDraft"]},
constructor:function(m,Q){B.apply(this,[m,Q]);this.sName="sap.ui.generic.app.transaction.DraftController";this._oContext=null;}
});
a.prototype.getDraftContext=function(){if(!this._oContext){this._oContext=new D(this._oModel);}return this._oContext;};
a.prototype.createDraft=function(e,p,P){var t=this;if(!e){throw new Error("No entity set");}P=P||{};return new Promise(function(r,b){var s=function(d,R){r({responseData:d,httpResponse:R});};var c;var E=function(o){t._oModel.deleteCreatedEntry(c);b(o);};c=t._oModel.createEntry(p,{properties:P.predefinedValues,success:s,error:E,batchGroupId:P.batchGroupId,changeSetId:P.changeSetId,canonicalRequest:!!P.canonicalRequest,expand:P.expand});});};
a.prototype.validateDraft=function(c,p){if(!c.getModel().getObject(c.getPath()).IsActiveEntity){var i=this.getDraftContext().getODataDraftFunctionImportName(c,"ValidationFunction");return this._callAction(i,c,p);}else{return Promise.resolve();}};
a.prototype.prepareDraft=function(c,p){if(!c.getModel().getObject(c.getPath()).IsActiveEntity){var i;p=p||{};p.urlParameters=p.urlParameters||{};i=this.getDraftContext().getODataDraftFunctionImportName(c,"PreparationAction");return this._callAction(i,c,p);}else{return Promise.resolve();}};
a.prototype.activateDraft=function(c,p,o){var b=this.prepareDraft(c,p);var i=this.getDraftContext().getODataDraftFunctionImportName(c,"ActivationAction");var d=this._callAction(i,c,o);return Promise.all([b,d]);};
a.prototype.editDraft=function(c,p){var i=this.getDraftContext().getODataDraftFunctionImportName(c,"EditAction");if(i){return this._callAction(i,c,p);}throw new Error(c?"No Edit action defined for the given context":"No context provided for the Edit action");};
a.prototype.discardDraft=function(c,p){if(!c){throw new Error("No context");}var P={};q.extend(true,P,p);var f=this.getDraftContext().getODataDraftFunctionImportName(c,"DiscardAction");if(f){return this._callAction(f,c,P);}return this._remove(c.getPath(),P);};
a.prototype.getDraftForActive=function(c,p){var t=this;if(!c){throw new Error("No context");}p=p||{};p.urlParameters={"$expand":"SiblingEntity"};return this._read(c.getPath(),p).then(function(r){if(r.responseData&&r.responseData.hasOwnProperty("SiblingEntity")){r.context=t._oModel.getContext("/"+t._oModel.getKey(r.responseData.SiblingEntity));return r;}throw new Error("No draft entity could be found");});};
a.prototype.getDraftForActiveEntity=function(c){var p,P,t=this,m={batchGroupId:"Changes",changeSetId:"Changes",noShowSuccessToast:true,forceSubmit:true};p=this.getDraftForActive(c,m).then(function(r){return r;},function(r){throw t._normalizeError(r);});P=this.triggerSubmitChanges(m);return this._returnPromiseAll([p,P]);};
a.prototype.createNewDraftEntity=function(e,p,P,c,o){var t=this;o=o||{};o.fnSetBusy=o.fnSetBusy||Function.prototype;var i="Changes";var m={predefinedValues:P,batchGroupId:i,changeSetId:i,canonicalRequest:c,expand:o.sRootExpand};var b=new C(t._oModel,p);var f=t.getDraftContext().getODataDraftFunctionImportName(b,"NewAction");var F=f&&t._oMeta.getODataFunctionImport(f);var d;if(o.bUseNewActionForCreate&&F){var s=f.split('/')[1];var S={ResultIsActiveEntity:true};var I=t.getDraftContext().isDraftEnabled(e);var g=new A({controller:o.oController,contexts:[b],applicationController:o.oApplicationController,operationGrouping:undefined});d=g.call(f,s,I,S).then(function(r){o.fnSetBusy(r.executionPromise);return r.executionPromise;});}else{d=this.createDraft(e,p,m);o.fnSetBusy(d);}var h=d.then(function(r){return t._normalizeResponse(Array.isArray(r)?r[0]:r,true);},function(r){var R=r?t._normalizeError(r):null;throw R;});function j(r){var n,H,R,u=t._normalizeResponse(r,true);if(u.context){R=u.context.getObject();}if(!R){L.error("Activate function returned no entity");return Promise.reject(new Error("Activate function returned no entity"));}n=t._oDraftUtil.isActiveEntity(R);if(n){L.error("New draft entity is not marked as draft - isActiveEntity = "+n);return Promise.reject("New draft entity is not marked as draft - isActiveEntity = "+n);}H=t._oDraftUtil.hasDraftEntity(R);if(H){L.error("Wrong value for HasTwin of new draft entity - HasDraftEntity = "+H);return Promise.reject(new Error("Wrong value for HasTwin of new draft entity - HasDraftEntity = "+H));}return u;}var k;if(o.bUseNewActionForCreate&&F){k=h.then(j);}else{var l={batchGroupId:i,changeSetId:i,noShowSuccessToast:true,forceSubmit:true,failedMsg:"New draft document could not be created"};k=this.triggerSubmitChanges(l).then(function(){return h.then(j);});}return this._returnPromiseAll([h,k]);};
a.prototype.createEditDraftEntity=function(c,p,r){var P,o,t=this,m={batchGroupId:"Changes",changeSetId:"Changes",successMsg:"Draft for document was created",failedMsg:"Could not create draft for document",forceSubmit:true,context:c,expand:r};if(p){m.urlParameters={PreserveChanges:true};}P=this.editDraft(c,m).then(function(R){var i,b,d;d=t._normalizeResponse(R,true);if(d.context){b=d.context.getObject();}if(!b){L.error("Activate function returned no entity");return Promise.reject(new Error("Activate function returned no entity"));}i=t._oDraftUtil.isActiveEntity(b);if(i){L.error("Edit function returned an entity which is not a draft instance - IsActiveEntity = "+i);return Promise.reject(new Error("Returned entity ist not a draft instance - IsActiveEntity = "+i));}return d;},function(R){var b=t._normalizeError(R);throw b;});o=this.triggerSubmitChanges(m);return this._returnPromiseAll([P,o]);};
a.prototype.validateDraftEntity=function(c){var p,P,t=this,m={batchGroupId:"Changes",changeSetId:"Changes",context:c,forceSubmit:true};p=this.validateDraft(c,m).then(function(r){return t._normalizeResponse(r,true);},function(r){var R=t._normalizeError(r);throw R;});P=this.triggerSubmitChanges(m);return this._returnPromiseAll([p,P]);};
a.prototype.saveAndPrepareDraftEntity=function(c,p){var P,o,t=this;p=p||{};p.batchGroupId="Changes";p.changeSetId="Changes";p.successMsg="Saved";p.failedMsg="Save failed";p.context=c;p.forceSubmit=true;P=this.prepareDraft(c,p).then(function(r){var i,R,b;b=t._normalizeResponse(r,true);if(b.context){R=b.context.getObject();}if(!R){L.error("Activate function returned no entity");return Promise.reject(new Error("Activate function returned no entity"));}i=t._oDraftUtil.isActiveEntity(R);if(i){L.error("Prepare function returned an entity which is not a draft instance - IsActiveEntity = "+i);return Promise.reject(new Error("Returned entity ist not a draft instance - IsActiveEntity = "+i));}return b;},function(r){var R=t._normalizeError(r);throw R;});if(p.binding){p.binding.refresh(true,"Changes");}o=this.triggerSubmitChanges(p);return this._returnPromiseAll([P,o]);};
a.prototype.prepareDraftEntity=function(c){var t=this;return this.prepareDraft(c).then(function(r){var R,o;R=t._normalizeResponse(r,true);o=R.context.getObject();if(t._oDraftUtil.isActiveEntity(o)){L.error("Prepare function returned an entity which is not a draft instance - IsActiveEntity = "+true);return Promise.reject(new Error("Returned entity ist not a draft instance - IsActiveEntity = "+true));}return R;},function(r){var R=t._normalizeError(r);throw R;});};
a.prototype.activateDraftEntity=function(c,i){var p,P,t=this,o={batchGroupId:"Changes",successMsg:"Document activated",failedMsg:"Activation of document failed",forceSubmit:true,context:c};var b=q.extend({},o);o.changeSetId="Changes";b.changeSetId="Activation";var h=i?"lenient":"strict";b.headers={Prefer:"handling="+h};var e=this._oModel.getETag(c.getPath());if(e){o.headers={"If-Match":"*"};b.headers["If-Match"]="*";}p=this.activateDraft(c,o,b).then(function(r){var I,R,d;var f=r[1];d=t._normalizeResponse(f,true);if(d.context){R=d.context.getObject();}if(!R){L.error("Activate function returned no entity");return Promise.reject(new Error("Activate function returned no entity"));}I=t._oDraftUtil.isActiveEntity(R);if(!I){L.error("Activate function returned an entity which is still a draft instance - IsActiveEntity = "+I);return Promise.reject(new Error("Returned entity is still a draft instance - IsActiveEntity = "+I));}return d;},function(r){var R=t._normalizeError(r);throw R;});P=this.triggerSubmitChanges(o);return this._returnPromiseAll([p,P]);};
a.prototype.fetchHeader=function(c,p){p=p||{};p.batchGroupId="Changes";p.successMsg="Header section is fetched successfully";p.failedMsg="Fetching header data failed";p.context=c;p.forceSubmit=true;return this._read(c.getPath(),p);};
a.prototype.isActiveEntity=function(c){if(this.getDraftContext().hasDraft(c)){return this._oDraftUtil.isActiveEntity(c.getObject());}return true;};
a.prototype.hasActiveEntity=function(c){return this._oDraftUtil.hasActiveEntity(c.getObject());};
a.prototype.destroy=function(){if(this._oContext){this._oContext.destroy();}this._oContext=null;this._oModel=null;B.prototype.destroy.apply(this,[]);};
return a;},true);
sap.ui.predefine('sap/ui/generic/app/transaction/TransactionController',["sap/ui/thirdparty/jquery","./BaseController","./DraftController","sap/ui/generic/app/util/ModelUtil"],function(q,B,D,M){"use strict";
var T=B.extend("sap.ui.generic.app.transaction.TransactionController",{
metadata:{publicMethods:["destroy","setBatchStrategy","getDraftController","invokeAction","editEntity","deleteEntity","deleteEntities","propertyChanged","hasClientValidationErrors","resetChanges"]},
constructor:function(m,Q,p){B.apply(this,[m,Q]);this.sName="sap.ui.generic.app.transaction.TransactionController";this._oDraft=null;p=p||{};if(!p.noBatchGroups){m.setDeferredGroups(["Changes"]);m.setChangeGroups({"*":{groupId:"Changes",changeSetId:"Changes",single:false}});}return this.getInterface();}
});
T.prototype.setBatchStrategy=function(s){var n,c=this._oModel.getChangeGroups();for(n in c){c[n].single=s;}this._oModel.setChangeGroups(c);};
T.prototype.getDraftController=function(){if(!this._oDraft){this._oDraft=new D(this._oModel,this._oQueue);}return this._oDraft;};
T.prototype.editEntity=function(c,p,r){var t=this;return new Promise(function(a){var d,e;d=t.getDraftController().getDraftContext();e=M.getEntitySetFromContext(c);if(d.isDraftEnabled(e)&&t._oDraftUtil.isActiveEntity(c.getObject())){return a(t.getDraftController().createEditDraftEntity(c,p,r));}return a({context:c});});};
T.prototype.deleteEntity=function(e,p,i){var P,o,t=this,s,c,d;if(typeof e=="string"){s=e;}else if(typeof e=="object"&&e instanceof sap.ui.model.Context){c=e;s=c.getPath();}p=p||{};q.extend(p,{batchGroupId:"Changes",changeSetId:"Changes",successMsg:"Changes were discarded",failedMsg:"Discarding of changes failed",forceSubmit:true,context:c});var h=i?"lenient":"strict";p.headers={Prefer:"handling="+h};if(t._oModel.getObject(s)&&t._oDraftUtil.isActiveEntity(t._oModel.getObject(s))!==undefined&&!t._oDraftUtil.isActiveEntity(t._oModel.getObject(s))){if(!c){c=new sap.ui.model.Context(this._oModel,s);}d=t.getDraftController();P=d.discardDraft(c,p);}else{P=this._remove(s,p);}P.then(function(r){return t._normalizeResponse(r,true);},function(r){var R=t._normalizeError(r);throw R;});o=this.triggerSubmitChanges(p);return this._returnPromiseAll([P,o]);};
T.prototype.deleteEntities=function(e,p){var P,a=[],t=this,s,c,d;p=p||{};var h=p.bIsStrict?"strict":"lenient";p.headers=p.headers||{};p.headers.Prefer="handling="+h;q.extend(p,{batchGroupId:"Changes",changeSetId:"Changes",successMsg:"Changes were discarded",failedMsg:"Discarding of changes failed",forceSubmit:true});var r=function(o){return t._normalizeResponse(o,true);};var R=function(o){var b=t._normalizeError(o);throw b;};for(var i=0;i<e.length;i++){c=null;if(typeof e[i]=="string"){s=e[i];}else if(typeof e[i]=="object"&&e[i]instanceof sap.ui.model.Context){c=e[i];s=c.getPath();}if(t._oModel.getObject(s)&&t._oDraftUtil.isActiveEntity(t._oModel.getObject(s))!==undefined&&!t._oDraftUtil.isActiveEntity(t._oModel.getObject(s))){p.changeSetId="Changes";if(!c){c=new sap.ui.model.Context(this._oModel,s);}d=t.getDraftController();P=d.discardDraft(c,p).then(r,R);}else{p.changeSetId="ActiveChanges";P=this._remove(s,p).then(r,R);}a.push(P);}P=this.triggerSubmitChanges(p);a.push(P);return this._atLeastOnePromiseResolved(a,true);};
T.prototype.invokeAction=function(f,c,p){var t=this,P,o;P=this.hasClientMessages();if(P){return P;}p={batchGroupId:"Changes",changeSetId:"Changes",successMsg:"Call of action succeeded",failedMsg:"Call of action failed",urlParameters:p.urlParameters,forceSubmit:true,context:c};P=this._callAction(f,c,p).then(function(r){return t._normalizeResponse(r,true);},function(r){var O=t._normalizeError(r);throw O;});this._oModel.refresh(true,false,"Changes");o=this.triggerSubmitChanges(p);return this._returnPromiseAll([P,o]);};
T.prototype.resetChanges=function(k){this._oModel.resetChanges(k);};
T.prototype.propertyChanged=function(e,p,b){var d,c,P={batchGroupId:"Changes",changeSetId:"Changes",binding:b};d=this.getDraftController().getDraftContext();if(d.checkUpdateOnChange(e,p)){c=b.getBoundContext();if(d.hasDraftPreparationAction(c)){return this.getDraftController().saveAndPrepareDraftEntity(c,P);}P.onlyIfPending=true;return this.triggerSubmitChanges(P);}P.onlyIfPending=true;P.noShowResponse=true;P.noBlockUI=true;return this.triggerSubmitChanges(P);};
T.prototype.destroy=function(){B.prototype.destroy.apply(this,[]);if(this._oDraft){this._oDraft.destroy();}this._oDraft=null;};
return T;},true);
sap.ui.predefine('sap/ui/generic/app/util/DraftUtil',[],function(){"use strict";var D=function(){};
D.prototype.isActiveEntity=function(e){return e.IsActiveEntity;};
D.prototype.hasDraftEntity=function(e){return e.HasDraftEntity;};
D.prototype.hasActiveEntity=function(e){return e.HasActiveEntity;};
D.prototype.destroy=function(){};
return D;},true);
sap.ui.predefine('sap/ui/generic/app/util/ModelUtil',[],function(){"use strict";var M=function(m){this._oModel=m;};
M.prototype.getContextFromResponse=function(r){var p="/"+this._oModel.getKey(r);return this._oModel.getContext(p);};
M.getEntitySetFromContext=function(c){var p,e;if(!c){throw new Error("No context");}if(c&&c.getPath){p=c.getPath().split("(")[0];e=p.substring(1);}if(e==null){return null;}else{return c.getModel().getMetaModel().getODataEntitySet(e)&&c.getModel().getMetaModel().getODataEntitySet(e).name;}};
M.prototype.hasClientMessages=function(){var m,o,a,b,i=0,l=0;m=sap.ui.getCore().getMessageManager();o=m.getMessageModel();a=o.getData();if(a){l=a.length;}for(i=0;i<l;i++){b=a[i];if(b.processor.getMetadata()._sClassName==="sap.ui.core.message.ControlMessageProcessor"){return true;}}return false;};
M.prototype.destroy=function(){this._oModel=null;};
return M;},true);
sap.ui.predefine('sap/ui/generic/app/util/Queue',["sap/ui/thirdparty/jquery"],function(q){"use strict";var Q=function(m){this._iMaxLength=m;this._aQueue=[];this._aEventHandlerRegistry=[];};
Q.prototype._attachEvent=function(e,f){if(typeof f!=="function"){throw new Error("Event handler must be a function");}this._aEventHandlerRegistry.push({event:e,handler:f});};
Q.prototype._detachEvent=function(e,f){for(var i=this._aEventHandlerRegistry.length;i--;){if(this._aEventHandlerRegistry[i].handler===f&&this._aEventHandlerRegistry[i].event===e){this._aEventHandlerRegistry.splice(i,1);}}};
Q.prototype._fireEvent=function(e,E){for(var i=0;i<this._aEventHandlerRegistry.length;i++){if(this._aEventHandlerRegistry[i].event===e){this._aEventHandlerRegistry[i].handler(E);}}};
Q.prototype._execNext=function(){var n,t=this;setTimeout(function(){t._aQueue.shift();n=t._aQueue[0];if(n){t._exec(n);}else{t._fireEvent('onQueueCompleted');}});};
Q.prototype._exec=function(i){var t=this,s=function(){t._execNext();};this._fireEvent('beforeQueueItemProcess',i.eventParameters);i.jqdeferred.resolve();i.wait.then(function(){i.wait.then(s);},q.proxy(t._cancel,t));};
Q.prototype.enqueue=function(f,e){var i={fn:f,eventParameters:e};i.jqdeferred=q.Deferred();i.defer=new Promise(function(a,r){i.jqdeferred.then(a,r);});i.wait=i.defer.then(f);if(!(this._iMaxLength===undefined)&&this._aQueue.length>=this._iMaxLength){i.jqdeferred.reject(new Error("Queue overflow: "+this._aQueue.length));}else{this._aQueue.push(i);if(this._aQueue.length===1){this._exec(i);}}return i.wait.then();};
Q.prototype._cancel=function(){var I,i,l=this._aQueue.length;for(i=0;i<l;i++){I=this._aQueue[i];I.jqdeferred.reject(new Error("Queue cancellation"));}this._fireEvent('onQueueFailed');this._aQueue=[];};
Q.prototype.destroy=function(){this._aQueue=[];};
return Q;},true);
sap.ui.require.preload({
	"sap/ui/generic/app/fragments/MessageDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:layout="sap.ui.layout"><Dialog class="sapUiNoContentPadding" id="messageDialog" state="{settings&gt;/state}" type="Message" showHeader="true" horizontalScrolling="false" draggable="true" contentHeight="440px" contentWidth="440px" verticalScrolling="false"><content><MessageView items="{settings&gt;/messages}" showDetailsPageHeader="false" itemSelect="onMessageSelect" groupItems="{settings&gt;/grouping}"><MessageItem type="{settings&gt;type}" title="{settings&gt;message}" description="{settings&gt;description}" longtextUrl="{settings&gt;descriptionUrl}" groupName="{= ${settings&gt;/messageToGroupName}[${settings&gt;id}] || ${settings&gt;/genericGroupName} }"/></MessageView></content><customHeader><Bar><contentMiddle><Text text="{settings&gt;/title}"/></contentMiddle><contentLeft><Button icon="sap-icon://nav-back" visible="{settings&gt;/backButtonVisible}" press="onBackButtonPress"/></contentLeft></Bar></customHeader><buttons><Button text="{settings&gt;/actionButtonText}" visible="{settings&gt;/showActionButton}" id="actionButton" press="onActionButtonPressed" type="Emphasized"/><Button text="{=${settings&gt;/showActionButton} ? ${settings&gt;/cancelButtonText} : ${settings&gt;/closeButtonText}}" id="Close" press="onMessageDialogClose"/></buttons></Dialog></core:FragmentDefinition>',
	"sap/ui/generic/app/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.ui.generic.app","type":"library","embeds":[],"applicationVersion":{"version":"1.88.0"},"title":"The SAPUI5 library contains classes that are mainly used in smart template applications, but can also be used in any Fiori/UI5 application that uses the OData protocol to communicate with an application server.","description":"The SAPUI5 library contains classes that are mainly used in smart template applications, but can also be used in any Fiori/UI5 application\\n                   that uses the OData protocol to communicate with an application server.","resources":"resources.json","offline":true},"sap.ui":{"technology":"UI5","supportedThemes":[]},"sap.ui5":{"dependencies":{"minUI5Version":"1.88","libs":{"sap.ui.core":{"minVersion":"1.88.0"},"sap.ui.comp":{"minVersion":"1.88.0","lazy":true},"sap.m":{"minVersion":"1.88.0","lazy":true},"sap.fe.navigation":{"minVersion":"1.88.0","lazy":true}}},"library":{"i18n":{"bundleUrl":"messagebundle.properties","supportedLocales":["","ar","bg","ca","cs","cy","da","de","el","en","en-GB","en-US-sappsd","en-US-saprigi","en-US-saptrc","es","es-MX","et","fi","fr","fr-CA","hi","hr","hu","id","it","iw","ja","kk","ko","lt","lv","ms","nl","no","pl","pt","pt-PT","ro","ru","sh","sk","sl","sv","th","tr","uk","vi","zh-CN","zh-TW"]},"css":false,"content":{"controls":[],"elements":[],"types":["sap.ui.generic.app.navigation.service.NavType","sap.ui.generic.app.navigation.service.ParamHandlingMode","sap.ui.generic.app.navigation.service.SuppressionBehavior"],"interfaces":[]}}}}',
/*
 * ! SAPUI5

(c) Copyright 2009-2020 SAP SE. All rights reserved
 */
	"sap/ui/generic/app/AppComponent.js":function(){sap.ui.getCore().loadLibrary("sap.suite.ui.generic.template");sap.ui.define(["sap/suite/ui/generic/template/lib/AppComponent"],function(A){"use strict";return A;},true);
},
	"sap/ui/generic/app/util/ActionUtil.js":function(){sap.ui.getCore().loadLibrary("sap.m");sap.ui.getCore().loadLibrary("sap.ui.comp");sap.ui.define(["sap/ui/thirdparty/jquery","sap/ui/base/ManagedObject","sap/m/MessageBox","sap/ui/layout/form/SimpleForm","sap/ui/comp/smartfield/SmartField","sap/ui/comp/smartfield/SmartLabel","sap/m/Dialog","sap/ui/generic/app/util/ModelUtil","sap/m/VBox","sap/m/Text","sap/base/strings/formatMessage","sap/base/Log"],function(q,M,a,S,b,c,D,d,V,T,f,L){"use strict";
var A=M.extend("sap.ui.generic.app.util.ActionUtil",{metadata:{properties:{controller:{type:"object",group:"Misc",defaultValue:null},applicationController:{type:"object",group:"Misc",defaultValue:null},contexts:{type:"object",group:"Misc",defaultValue:null},successCallback:{type:"function",group:"Misc",defaultValue:null},operationGrouping:{type:"string",group:"Misc",defaultValue:null}}}});
A.prototype.call=function(F,s,i,o,I,m){var t=this;return new Promise(function(r,e){var g;t._oActionPromiseCallback={resolve:r,reject:e};t._sFunctionImportPath=F;var C=t.getController();if(!C||!C.getView()){e("No View Controller provided");}t._oMetaModel=C.getView().getModel().getMetaModel();var h=F.split('/')[1];t._oFunctionImport=t._oMetaModel.getODataFunctionImport(h);t._sFunctionImportLabel=s||h;t._oSkipProperties=o||{};var p=function(){var l=t.getContexts();g=t._prepareParameters(l,i,m);g=g||[{}];t._initiateCall(g,i,I);};if(!t._oFunctionImport){e("Unknown Function Import "+h);}if(t._isActionCritical()){var j="ACTION_CONFIRM|"+h;var k;var R=C.getOwnerComponent().getAppComponent&&C.getOwnerComponent().getAppComponent().getModel("i18n")&&C.getOwnerComponent().getAppComponent().getModel("i18n").getResourceBundle();if(R&&R.hasText(j)){k=R.getText(j);}else{k=sap.ui.getCore().getLibraryResourceBundle("sap.ui.generic.app").getText("ACTION_CONFIRM");k=f(k,t._sFunctionImportLabel);}a.confirm(k,{title:t._sFunctionImportLabel,onClose:function(l){if(l==="OK"){p();}else if(l==="CANCEL"){t._oActionPromiseCallback.reject();}},sClass:t._getCompactModeStyleClass()});}else{p();}});};
A.prototype._getCompactModeStyleClass=function(){if(this.getController().getView().$().closest(".sapUiSizeCompact").length){return"sapUiSizeCompact";}return"";};
A.prototype._isActionCritical=function(){var C=this._oFunctionImport["com.sap.vocabularies.Common.v1.IsActionCritical"];if(!C){return false;}if(C.Bool===undefined){return true;}return this._toBoolean(C.Bool);};
A.prototype._toBoolean=function(p){if(typeof p==="string"){var v=p.toLowerCase();return!(v=="false"||v==""||v==" ");}return!!p;};
A.prototype._prepareParameters=function(C,I,m){if(!Array.isArray(C)&&!C.length){return undefined;}var e=[];C.forEach(function(s){var E=null;var o=s.getObject();if(s&&s.getPath()){var g=d.getEntitySetFromContext(s);var h=s.getModel().getMetaModel().getODataEntitySet(g,false);E=s.getModel().getMetaModel().getODataEntityType(h.entityType,false);}var k=this._getPropertyKeys(E);var p;var j={parameterData:{},additionalParameters:[],isDraftEnabled:I};if(this._oFunctionImport.parameter){for(var i=0;i<this._oFunctionImport.parameter.length;i++){var P=this._oFunctionImport.parameter[i];this._addParameterLabel(P,E);var l=P.name;var n=!!k[l];p=undefined;if(o&&o.hasOwnProperty(l)){p=o[l];}else if(n){L.error("Key parameter of action not found in current context: "+l);throw new Error("Key parameter of action not found in current context: "+l);}j.parameterData[l]=(m&&m[l])||p;var r=!!this._oSkipProperties[l];if(!r&&!n&&P.mode.toUpperCase()=="IN"){j.additionalParameters.push(P);}}e.push(j);}else{e.push(j);}}.bind(this));return e;};
A.prototype._getPropertyKeys=function(e){var k={};if(e&&e.key&&e.key.propertyRef){for(var i=0;i<e.key.propertyRef.length;i++){var K=e.key.propertyRef[i].name;k[K]=true;}}return k;};
A.prototype._setAdditionalParameters=function(e,k,p,g){e.filter(function(o){if(k===o.name){if(o.hasOwnProperty("com.sap.vocabularies.UI.v1.Hidden")){g.oModel.setProperty(k,p[k],g);}else{g.oModel.setProperty(k,undefined,g);}}});};
A.prototype._initiateCall=function(m,I,e){var g=m[0];var h=e?"strict":"lenient";var H={Prefer:"handling="+h};var u;if(g!=undefined&&g.additionalParameters&&g.additionalParameters.length==0){this._call(g.parameterData,g.isDraftEnabled,H);}else if(g!=undefined&&g.additionalParameters&&g.additionalParameters.length>0){var t=this;var p={urlParameters:{},headers:H};var E=this.getContexts();var C=this.getApplicationController()._getChangeSetFunc(E,this.getOperationGrouping());var F=E.map(function(o,i){p.changeSetId=C(i);return this.getApplicationController().getNewActionContext(this._sFunctionImportPath,o,p);}.bind(this));var j=F.map(function(o){return o.context;});Promise.all(j).then(function(o){var k=o[0];var P=t._buildParametersForm(g,k);var _=g.additionalParameters.map(function(i){return i.name;});o.forEach(function(r,i){var s=m[i].parameterData;for(var K in s){if(o.length>1&&_.indexOf(K)>-1){t._setAdditionalParameters(m[i].additionalParameters,K,s,r);}else{r.oModel.setProperty(K,s[K],r);}}});var l=false;var n=new D({title:t._sFunctionImportLabel,content:[P.form],beginButton:new sap.m.Button({text:t._sFunctionImportLabel,type:'Emphasized',press:function(r){if(P.hasNoClientErrors()){if(P.getEmptyMandatoryFields().length==0){n.close();u={};t._oActionPromiseCallback.resolve({executionPromise:t.getApplicationController()._newPromiseAll(F.map(function(y){return y.result;})).then(function(y){t._bExecutedSuccessfully=t.getApplicationController()._checkAtLeastOneSuccess(E,y);y.forEach(function(z){z.userEnteredAdditionalParams=u;});if(t._bExecutedSuccessfully){return y;}else{return Promise.reject(y);}},function(y){t._bExecutedSuccessfully=false;y.forEach(function(z){z.userEnteredAdditionalParams=u;});throw y;})});l=true;var s=k.getObject();g.additionalParameters.forEach(function(y){var z=s[y.name];if(y.type=="Edm.Boolean"&&z==undefined){s[y.name]=false;z=false;}u[y.name]=z;o.forEach(function(B){B.oModel.setProperty(y.name,z,B);});});var v=t._sFunctionImportPath.split('/')[1];E.forEach(function(y,i){t.getApplicationController().submitActionContext(y,o[i],v);});}else{var w=new V();var R=sap.ui.getCore().getLibraryResourceBundle("sap.ui.generic.app").getText("ACTION_MISSING_MANDATORY");for(var i=0;i<P.getEmptyMandatoryFields().length;i++){var x=f(R,P.getEmptyMandatoryFields()[i].getTextLabel());w.addItem(new T({text:x}));}a.error(w,{sClass:t._getCompactModeStyleClass()});}}}}),endButton:new sap.m.Button({text:sap.ui.getCore().getLibraryResourceBundle("sap.ui.generic.app").getText("ACTION_CANCEL"),press:function(){F[0].abort();n.close();t._oActionPromiseCallback.reject();l=true;}}),afterClose:function(i){n.destroy();if(!l){t._oActionPromiseCallback.reject();}}}).addStyleClass("sapUiNoContentPadding");n.addStyleClass(t._getCompactModeStyleClass());n.setModel(k.oModel);if(this.getController().getView().getModel("@i18n")){n.setModel(this.getController().getView().getModel("@i18n"),"@i18n");}n.open();}.bind(this));}else{this._call(null,g!=undefined?g.isDraftEnabled:I,H);}};
A.prototype._call=function(u,i,h){var C=this.getContexts();var p={urlParameters:u,operationGrouping:this.getOperationGrouping(),triggerChanges:i,headers:h};var o=this.getController();var e=this.getApplicationController()||o.getApplicationController();var t=this;t._oActionPromiseCallback.resolve({executionPromise:e.invokeActions(this._sFunctionImportPath,C,p).then(function(r){t._bExecutedSuccessfully=true;return r;},function(E){t._bExecutedSuccessfully=false;throw E;})});};
A.prototype._getActionParameterData=function(p){var m=[];var r=p.getObject('/');var P={};for(var i=0;i<this._oFunctionImport.parameter.length;i++){var o=this._oFunctionImport.parameter[i];var s=o.name;if(r.hasOwnProperty(s)){var v=r[s];if(v===undefined){if(!this._toBoolean(o.nullable)){if(o.type==='Edm.Boolean'){P[s]=false;}else{m.push(o);}}}else{P[s]=v;}}else{throw new Error("Unknown parameter: "+s);}}return{preparedParameterData:P,missingMandatoryParameters:m};};
A.prototype._buildParametersForm=function(p,C){var F=new S({editable:true});F.setBindingContext(C);var s;var e=[];var o;var v;for(var i=0;i<p.additionalParameters.length;i++){var P=p.additionalParameters[i];if(P["com.sap.vocabularies.UI.v1.Hidden"]&&!(P["com.sap.vocabularies.UI.v1.Hidden"].Bool=="false")){continue;}v=P["com.sap.vocabularies.Common.v1.ValueListWithFixedValues"]?"fixed-values":undefined;if(v==undefined){v=P["sap:value-list"]=="fixed-values"?"fixed-values":undefined;}s=new b("ActionUtil-"+this._sFunctionImportPath.replace("/","-")+"-"+P.name,{value:'{'+P.name+'}',textLabel:this._getParameterName(P),width:"100%"});s.data("configdata",{"configdata":{isInnerControl:false,path:P.name,entitySetObject:{},annotations:{valuelist:P["com.sap.vocabularies.Common.v1.ValueList"],valuelistType:v},modelObject:C.oModel,entityType:P.type,property:{property:P,typePath:P.name}}});if(P.nullable=="false"){s.setMandatory(true);}e.push(s);o=new c();o.setLabelFor(s);F.addContent(o);F.addContent(s);}var h=function(){var n=true;for(var i=0;i<e.length;i++){if(e[i].getValueState()!="None"){n=false;break;}}return n;};var g=function(){var m=q.grep(e,function(j){return(j.getMandatory()==true&&j.getValue()==""&&j.getDataType()!="Edm.Boolean");});return m;};return{form:F,hasNoClientErrors:h,getEmptyMandatoryFields:g};};
A.prototype._getParameterName=function(p){return p["com.sap.vocabularies.Common.v1.Label"]?p["com.sap.vocabularies.Common.v1.Label"].String:p.name;};
A.prototype._addParameterLabel=function(p,e){if(e&&p&&!p["com.sap.vocabularies.Common.v1.Label"]){var P=this._oMetaModel.getODataProperty(e,p.name,false);if(P&&P["com.sap.vocabularies.Common.v1.Label"]){p["com.sap.vocabularies.Common.v1.Label"]=P["com.sap.vocabularies.Common.v1.Label"];}}};
A.prototype.getFunctionImportLabel=function(){return this._sFunctionImportLabel;};
A.prototype.getExecutedSuccessfully=function(){return this._bExecutedSuccessfully;};
return A;});
},
	"sap/ui/generic/app/util/MessageUtil.js":function(){sap.ui.getCore().loadLibrary("sap.m");sap.ui.define(["sap/ui/core/ValueState","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/json/JSONModel","sap/m/MessageToast","sap/ui/core/syncStyleClass"],function(V,F,a,J,M,s){"use strict";var h={badRequest:"400",unauthorized:"401",forbidden:"403",notFound:"404",methodNotAllowed:"405",preconditionFailed:"428",internalServerError:"500",notImplemented:"501",badGateway:"502",serviceUnavailable:"503",gatewayTimeout:"504",httpVersionNotSupported:"505"};var o={callAction:"callAction",addEntry:"addEntry",saveEntity:"saveEntity",deleteEntity:"deleteEntity",editEntity:"editEntity",modifyEntity:"modifyEntity",activateDraftEntity:"activateDraftEntity",saveAndPrepareDraftEntity:"saveAndPrepareDraftEntity",getCollection:"getCollection"};var m;
function g(R){var t=[],e;var f=sap.ui.getCore().getMessageManager();var j=f.getMessageModel().getData();for(var i=0;i<j.length;i++){e=j[i];if(e.getPersistent()){t.push(e);}}return t;}
function c(P,C){var D;D=function(n,f){var e;var i={onMessageDialogClose:function(){f.onMessageDialogClose();e.destroy();},onActionButtonPressed:function(){f.onActionButtonPressed();e.destroy();}};e=sap.ui.xmlfragment(n,i);if(C){s(C,P,e);}P.addDependent(P);return e;};return D;}
function b(v,A,e){var t=g();var l=sap.ui.getCore().getLibraryResourceBundle("sap.ui.generic.app");if(t.length===0){return Promise.resolve();}r();var S=V.None;for(var i=0;i<t.length&&S!==V.Error;i++){var f=t[i];switch(f.type){case sap.ui.core.MessageType.Error:S=V.Error;break;case sap.ui.core.MessageType.Warning:S=V.Warning;break;case sap.ui.core.MessageType.Success:if(S===sap.ui.core.ValueState.None){S=V.Success;}}}if(t.length===1&&(S===V.Success||S===V.None)){M.show(t[0].message);return Promise.resolve();}return new Promise(function(R){var j=(typeof v==="function")?v:c(v.owner,v.contentDensityClass);var D,k,n;var q=function(){D.close();n.setProperty("/backButtonVisible",false);n.setProperty("/messages",[]);n.setProperty("/messageToGroupName",Object.create(null));k.navigateBack();n.getProperty("/resolve")();};var u={onMessageDialogClose:function(){q(n);},onActionButtonPressed:function(){n.getProperty("/actionButtonCallback")();q(n);},onBackButtonPress:function(){n.setProperty("/backButtonVisible",false);k.navigateBack();},onMessageSelect:function(){n.setProperty("/backButtonVisible",true);}};D=j("sap.ui.generic.app.fragments.MessageDialog",u);k=D.getContent()[0];var w=D.getModel();var x=w&&w.getMetaModel();var G=false;var y=!!(e&&e.action);var z=Object.create(null);if(x){t.forEach(function(f){var B=f.getTarget();if(!B){return;}if(B.lastIndexOf("/")>0){B=B.substring(0,B.lastIndexOf("/"));}var E=B.substring(1,B.indexOf("("));var C=E&&x.getODataEntitySet(E);var H=C&&x.getODataEntityType(C.entityType);var I=H&&H["com.sap.vocabularies.UI.v1.HeaderInfo"];var T=I&&I.Title&&I.Title.Value&&I.Title.Value.Path;var K=w.getProperty(B);var L=K&&K[T];if(L){z[f.getId()]=L;G=true;}});}n=D.getModel("settings");if(!n){n=new J({genericGroupName:l.getText("GENERAL_TITLE"),backButtonVisible:false,cancelButtonText:l.getText("DIALOG_CANCEL"),closeButtonText:l.getText("DIALOG_CLOSE")});D.setModel(n,"settings");}n.setProperty("/showActionButton",y);if(y){n.setProperty("/actionButtonText",e.actionLabel);n.setProperty("/actionButtonCallback",e.action);}n.setProperty("/title",A||l.getText("DIALOG_TITLE"));n.setProperty("/messages",t);n.setProperty("/grouping",G);n.setProperty("/state",S);n.setProperty("/resolve",R);n.setProperty("/messageToGroupName",z);D.open();});}
function r(){var e=sap.ui.getCore().getMessageManager();var t=g();if(t.length>0){e.removeMessages(t);}}
function d(e,D,f){var t=new sap.ui.core.message.Message({message:e,description:D,type:sap.ui.core.MessageType.Error,processor:f,target:'',persistent:true});sap.ui.getCore().getMessageManager().addMessages(t);}
function p(e){var R;m=e&&e.url;if(m){m="/"+m.substring(0,m.indexOf(")")+1);}var f=sap.ui.getCore().getLibraryResourceBundle("sap.ui.generic.app").getText("ERROR_UNKNOWN");var H;if(e instanceof Error){if(e.message){f=e.message;}}else if(e.response){if(e.response.message){f=e.response.message;}var v=e.response.statusCode;H=!Number.isInteger(v)?Number(v):v;if(e.response.headers){for(var i in e.response.headers){if(i.toLowerCase()==="content-type"){var j=e.response.headers[i];if(j.toLowerCase().indexOf("application/json")===0){if(e.response.responseText){var O=JSON.parse(e.response.responseText);if(O&&O.error&&O.error.message&&O.error.message.value){f=O.error.message.value;}}}else if(e.message){f=e.message;}break;}}}}var t=g(e);R={httpStatusCode:H,messageText:f,description:null,containsTransientMessage:(t.length===0)?false:true};return R;}
return{operations:o,httpStatusCodes:h,handleTransientMessages:b,removeTransientMessages:r,addTransientErrorMessage:d,parseErrorResponse:p,getTransientMessages:g};},true);
}
},"sap/ui/generic/app/library-preload"
);
//# sourceMappingURL=library-preload.js.map