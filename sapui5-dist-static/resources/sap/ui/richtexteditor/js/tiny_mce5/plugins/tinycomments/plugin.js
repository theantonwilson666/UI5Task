/* Tiny Comments plugin
*
* Copyright 2010-2020 Tiny Technologies Inc. All rights reserved.
*
* Version: 2.2.0-112
*/
!function(h){"use strict";var l=function(){return(l=Object.assign||function(n){for(var e,t=1,o=arguments.length;t<o;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}).apply(this,arguments)};function p(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;var o=Array(n),r=0;for(e=0;e<t;e++)for(var i=arguments[e],u=0,c=i.length;u<c;u++,r++)o[r]=i[u];return o}var n,e,t,o,r,i,u,c,a,s,f=function(){},g=function(n){return function(){return n}},d=function(n){return n},m=g(!1),v=g(!0),_=function(){return y},y=(n=function(n){return n.isNone()},o={fold:function(n,e){return n()},is:m,isSome:m,isNone:v,getOr:t=function(n){return n},getOrThunk:e=function(n){return n()},getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:g(null),getOrUndefined:g(void 0),or:t,orThunk:e,map:_,each:f,bind:_,exists:m,forall:v,filter:_,equals:n,equals_:n,toArray:function(){return[]},toString:g("none()")},Object.freeze&&Object.freeze(o),o),w=function(t){var n=g(t),e=function(){return r},o=function(n){return n(t)},r={fold:function(n,e){return e(t)},is:function(n){return t===n},isSome:v,isNone:m,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:e,orThunk:e,map:function(n){return w(n(t))},each:function(n){n(t)},bind:o,exists:o,forall:o,filter:function(n){return n(t)?r:y},toArray:function(){return[t]},toString:function(){return"some("+t+")"},equals:function(n){return n.is(t)},equals_:function(n,e){return n.fold(m,function(n){return e(t,n)})}};return r},b={some:w,none:_,from:function(n){return null==n?y:w(n)}},T=function(e){return function(n){return function(n){if(null===n)return"null";var e=typeof n;return"object"===e&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":e}(n)===e}},O=T("string"),S=T("object"),C=T("boolean"),E=T("function"),x=T("number"),D=Array.prototype.slice,A=Array.prototype.indexOf,N=function(n,e){return t=n,o=e,-1<A.call(t,o);var t,o},k=function(n,e){for(var t=n.length,o=new Array(t),r=0;r<t;r++){var i=n[r];o[r]=e(i,r)}return o},R=function(n,e){for(var t=0,o=n.length;t<o;t++){e(n[t],t)}},M=function(n,e){for(var t=[],o=0,r=n.length;o<r;o++){var i=n[o];e(i,o)&&t.push(i)}return t},j=function(n,e){for(var t=0,o=n.length;t<o;t++){var r=n[t];if(e(r,t))return b.some(r)}return b.none()},I=(E(Array.from)&&Array.from,function(n){var e=n,t=function(){return e};return{get:t,set:function(n){e=n},clone:function(){return I(t())}}}),L=function(n){return parseInt(n,10)},U=function(n,e){var t=n-e;return 0===t?0:0<t?1:-1},P=function(n,e,t){return{major:n,minor:e,patch:t}},F=function(n){var e=/([0-9]+)\.([0-9]+)\.([0-9]+)(?:(\-.+)?)/.exec(n);return e?P(L(e[1]),L(e[2]),L(e[3])):P(0,0,0)},B=function(n,e){var t=U(n.major,e.major);if(0!==t)return t;var o=U(n.minor,e.minor);if(0!==o)return o;var r=U(n.patch,e.patch);return 0!==r?r:0},H=function(n){return F([(e=n).majorVersion,e.minorVersion].join(".").split(".").slice(0,3).join("."));var e},V=function(n,e){return!!n&&-1===B(H(n),F(e))},Y=0,q=function(n){var e=(new Date).getTime();return n+"_"+Math.floor(1e9*Math.random())+ ++Y+String(e)},W=Object.keys,z=function(n,e){for(var t=W(n),o=0,r=t.length;o<r;o++){var i=t[o];e(n[i],i)}},G=function(n,t){return X(n,function(n,e){return{k:e,v:t(n,e)}})},X=function(n,o){var r={};return z(n,function(n,e){var t=o(n,e);r[t.k]=t.v}),r},J=(h.Node.ATTRIBUTE_NODE,h.Node.CDATA_SECTION_NODE,h.Node.COMMENT_NODE),$=h.Node.DOCUMENT_NODE,K=(h.Node.DOCUMENT_TYPE_NODE,h.Node.DOCUMENT_FRAGMENT_NODE,h.Node.ELEMENT_NODE),Q=(h.Node.TEXT_NODE,h.Node.PROCESSING_INSTRUCTION_NODE,h.Node.ENTITY_REFERENCE_NODE,h.Node.ENTITY_NODE,h.Node.NOTATION_NODE,void 0!==h.window?h.window:Function("return this;")(),function(n,e,t){!function(n,e,t){if(!(O(t)||C(t)||x(t)))throw h.console.error("Invalid call to Attr.set. Key ",e,":: Value ",t,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(e,t+"")}(n.dom(),e,t)}),Z=function(n,e){n.dom().removeAttribute(e)},nn=function(n){if(null==n)throw new Error("Node cannot be null or undefined");return{dom:g(n)}},en={fromHtml:function(n,e){var t=(e||h.document).createElement("div");if(t.innerHTML=n,!t.hasChildNodes()||1<t.childNodes.length)throw h.console.error("HTML does not have a single root node",n),new Error("HTML must have a single root node");return nn(t.childNodes[0])},fromTag:function(n,e){var t=(e||h.document).createElement(n);return nn(t)},fromText:function(n,e){var t=(e||h.document).createTextNode(n);return nn(t)},fromDom:nn,fromPoint:function(n,e,t){var o=n.dom();return b.from(o.elementFromPoint(e,t)).map(nn)}},tn=(u=!(r=function(){return on(en.fromDom(h.document))}),function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return u||(u=!0,i=r.apply(null,n)),i}),on=function(n){var e=n.dom().body;if(null==e)throw new Error("Body is not available yet");return en.fromDom(e)},rn=function(n,e){return-1!==n.indexOf(e)},un=function(n,e,t){if(!O(t))throw h.console.error("Invalid call to CSS.set. Property ",e,":: Value ",t,":: Element ",n),new Error("CSS value must be a string: "+t);var o;void 0!==(o=n).style&&E(o.style.getPropertyValue)&&n.style.setProperty(e,t)},cn=function(n,e,t){return 0!=(n.compareDocumentPosition(e)&t)},an=function(n,e){return cn(n,e,h.Node.DOCUMENT_POSITION_CONTAINED_BY)},sn=function(){return fn(0,0)},fn=function(n,e){return{major:n,minor:e}},dn={nu:fn,detect:function(n,e){var t=String(e).toLowerCase();return 0===n.length?sn():function(n,e){var t=function(n,e){for(var t=0;t<n.length;t++){var o=n[t];if(o.test(e))return o}}(n,e);if(!t)return{major:0,minor:0};var o=function(n){return Number(e.replace(t,"$"+n))};return fn(o(1),o(2))}(n,t)},unknown:sn},mn="Firefox",ln=function(n,e){return function(){return e===n}},vn=function(n){var e=n.current;return{current:e,version:n.version,isEdge:ln("Edge",e),isChrome:ln("Chrome",e),isIE:ln("IE",e),isOpera:ln("Opera",e),isFirefox:ln(mn,e),isSafari:ln("Safari",e)}},hn={unknown:function(){return vn({current:void 0,version:dn.unknown()})},nu:vn,edge:g("Edge"),chrome:g("Chrome"),ie:g("IE"),opera:g("Opera"),firefox:g(mn),safari:g("Safari")},pn="Windows",_n="Android",gn="Solaris",yn="FreeBSD",wn="ChromeOS",bn=function(n,e){return function(){return e===n}},Tn=function(n){var e=n.current;return{current:e,version:n.version,isWindows:bn(pn,e),isiOS:bn("iOS",e),isAndroid:bn(_n,e),isOSX:bn("OSX",e),isLinux:bn("Linux",e),isSolaris:bn(gn,e),isFreeBSD:bn(yn,e),isChromeOS:bn(wn,e)}},On={unknown:function(){return Tn({current:void 0,version:dn.unknown()})},nu:Tn,windows:g(pn),ios:g("iOS"),android:g(_n),linux:g("Linux"),osx:g("OSX"),solaris:g(gn),freebsd:g(yn),chromeos:g(wn)},Sn=function(n,e){var t=String(e).toLowerCase();return j(n,function(n){return n.search(t)})},Cn=function(n,t){return Sn(n,t).map(function(n){var e=dn.detect(n.versionRegexes,t);return{current:n.name,version:e}})},En=function(n,t){return Sn(n,t).map(function(n){var e=dn.detect(n.versionRegexes,t);return{current:n.name,version:e}})},xn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Dn=function(e){return function(n){return rn(n,e)}},An=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return rn(n,"edge/")&&rn(n,"chrome")&&rn(n,"safari")&&rn(n,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,xn],search:function(n){return rn(n,"chrome")&&!rn(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return rn(n,"msie")||rn(n,"trident")}},{name:"Opera",versionRegexes:[xn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Dn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Dn("firefox")},{name:"Safari",versionRegexes:[xn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(rn(n,"safari")||rn(n,"mobile/"))&&rn(n,"applewebkit")}}],Nn=[{name:"Windows",search:Dn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return rn(n,"iphone")||rn(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Dn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Dn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Dn("linux"),versionRegexes:[]},{name:"Solaris",search:Dn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Dn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Dn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],kn={browsers:g(An),oses:g(Nn)},Rn=I(function(n,e){var t,o,r,i,u,c,a,s,f,d,m,l,v=kn.browsers(),h=kn.oses(),p=Cn(v,n).fold(hn.unknown,hn.nu),_=En(h,n).fold(On.unknown,On.nu);return{browser:p,os:_,deviceType:(o=p,r=n,i=e,u=(t=_).isiOS()&&!0===/ipad/i.test(r),c=t.isiOS()&&!u,a=t.isiOS()||t.isAndroid(),s=a||i("(pointer:coarse)"),f=u||!c&&a&&i("(min-device-width:768px)"),d=c||a&&!f,m=o.isSafari()&&t.isiOS()&&!1===/safari/i.test(r),l=!d&&!f&&!m,{isiPad:g(u),isiPhone:g(c),isTablet:g(f),isPhone:g(d),isTouch:g(s),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:g(m),isDesktop:g(l)})}}(h.navigator.userAgent,function(n){return h.window.matchMedia(n).matches})),Mn=function(){return Rn.get()},jn=K,In=$,Ln=function(n){return n.nodeType!==jn&&n.nodeType!==In||0===n.childElementCount},Un=(Mn().browser.isIE(),function(n){return en.fromDom(n.dom().ownerDocument)}),Pn=function(n){return k(n.dom().childNodes,en.fromDom)},Fn=(function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e]}("element","offset"),function(e,t){var n;(n=e,b.from(n.dom().parentNode).map(en.fromDom)).each(function(n){n.dom().insertBefore(t.dom(),e.dom())})}),Bn=function(n,e){n.dom().appendChild(e.dom())},Hn=function(n){n.dom().textContent="",R(Pn(n),function(n){Vn(n)})},Vn=function(n){var e=n.dom();null!==e.parentNode&&e.parentNode.removeChild(e)},Yn=function(n){var e,t=Pn(n);0<t.length&&(e=n,R(t,function(n){Fn(e,n)})),Vn(n)},qn=function(n,e){var t,o,r,i=Un(n).dom(),u=en.fromDom(i.createDocumentFragment()),c=(t=e,(o=(i||h.document).createElement("div")).innerHTML=t,Pn(en.fromDom(o)));r=u,R(c,function(n){Bn(r,n)}),Hn(n),Bn(n,u)},Wn=function(n,e){return t=e,r=void 0===(o=n)?h.document:o.dom(),Ln(r)?b.none():b.from(r.querySelector(t)).map(en.fromDom);var t,o,r},zn=Mn().os.isOSX()?"⌘":"Ctrl",Gn=G({tc_menu_name:"TinyComments",tc_announce_sidebar_available:"Comment. Sidebar available. Press "+zn+" + Alt + M to switch to sidebar",tc_items_addcomment:"Add comment",tc_items_showcomments:"Show comments",tc_items_deleteall:"Delete all conversations",tc_edit_buttons_save:"Save",tc_edit_buttons_cancel:"Cancel",tc_reply_buttons_save:"Save",tc_reply_buttons_clear:"Clear",tc_reply_placeholders:"Say something ...",tc_kebab_deleteconversation:"Delete conversation",tc_kebab_delete:"Delete",tc_kebab_edit:"Edit",tc_edit_problem_comment:"An error occurred editing this comment. See the Console for details.",tc_edit_unauthorised_comment:"You are not allowed to edit this comment",tc_delete_buttons_cancel:"Cancel",tc_delete_buttons_proceed:"Delete",tc_create_problem:"An error occurred while creating a comment. See the Console for details",tc_reply_problem:"An error occurred while replying to a comment. See the Console for details",tc_delete_prompts_conversation:"Delete this conversation?",tc_delete_prompts_conversation_detail_sing:"1 comment will be deleted. You can't undo this action.",tc_delete_prompts_conversation_detail_pl:"{0} comments will be deleted. You can't undo this action.",tc_delete_prompts_all:"Delete all conversations in the content? This cannot be undone",tc_delete_prompts_comment:"Are you sure you want to delete this comment?",tc_delete_problem_all:"An error occurred deleting all the conversations. See the Console for details.",tc_delete_problem_conversation:"An error occurred deleting the conversation. See the Console for details.",tc_delete_problem_comment:"An error occurred deleting the comment. See the Console for details.",tc_delete_unauthorised_all:"You are not allowed to delete all the conversations",tc_delete_unauthorised_conversation:"You are not allowed to delete this conversation",tc_delete_unauthorised_comment:"You are not allowed to delete this comment",tc_date_less_than_a_minute_ago:"a moment ago",tc_date_1_minute_ago:"1 minute ago",tc_date_x_minutes_ago:"{0} minutes ago",tc_date_1_hour_ago:"1 hour ago",tc_date_x_hours_ago:"{0} hours ago",tc_date_1_day_ago:"1 day ago",tc_date_x_days_ago:"{0} days ago",tc_date_1_week_ago:"1 week ago",tc_date_x_weeks_ago:"{0} weeks ago",tc_date_1_month_ago:"1 month ago",tc_date_x_months_ago:"{0} months ago",tc_date_1_year_ago:"1 year ago",tc_date_x_years_ago:"{0} years ago",tc_date_comment_edited:" (edited)",tc_comment_buttons_showmore:"SHOW MORE",tc_comment_buttons_showless:"SHOW LESS"},d),Xn=q("aria-comment-description"),Jn=0,$n=function(n){var e,t,o=Wn(tn(),"#"+Xn).getOrThunk(function(){var n,t,e=en.fromTag("span");return Q(e,"id",Xn),Q(e,"aria-live","polite"),Q(e,"aria-atomic","true"),Q(e,"role","alert"),n={position:"absolute",left:"-10000px",top:"-1000px"},t=e.dom(),z(n,function(n,e){un(t,e,n)}),Bn(tn(),e),e});return Jn++,e=n,t=o,{onComment:function(){qn(t,e.translate(Gn.tc_announce_sidebar_available))},notOnComment:function(){qn(t,"")},getMarker:function(){return t},release:function(){0==--Jn&&Vn(t)}}},Kn=function(o,r){return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=o.console;t&&r in t&&t[r].apply(t,arguments)}},Qn={log:Kn(h.window,"log"),error:Kn(h.window,"error"),warn:Kn(h.window,"warm")},Zn={},ne={exports:Zn};a=Zn,s=ne,c=void 0,function(n){"object"==typeof a&&void 0!==s?s.exports=n():"function"==typeof c&&c.amd?c([],n):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).EphoxContactWrapper=n()}(function(){return function i(u,c,a){function s(e,n){if(!c[e]){if(!u[e]){var t=!1;if(!n&&t)return t(e,!0);if(f)return f(e,!0);var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}var r=c[e]={exports:{}};u[e][0].call(r.exports,function(n){return s(u[e][1][n]||n)},r,r.exports,i,u,c,a)}return c[e].exports}for(var f=!1,n=0;n<a.length;n++)s(a[n]);return s}({1:[function(n,e,t){var o,r,i=e.exports={};function u(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}function a(e){if(o===setTimeout)return setTimeout(e,0);if((o===u||!o)&&setTimeout)return o=setTimeout,setTimeout(e,0);try{return o(e,0)}catch(n){try{return o.call(null,e,0)}catch(n){return o.call(this,e,0)}}}!function(){try{o="function"==typeof setTimeout?setTimeout:u}catch(n){o=u}try{r="function"==typeof clearTimeout?clearTimeout:c}catch(n){r=c}}();var s,f=[],d=!1,m=-1;function l(){d&&s&&(d=!1,s.length?f=s.concat(f):m=-1,f.length&&v())}function v(){if(!d){var n=a(l);d=!0;for(var e=f.length;e;){for(s=f,f=[];++m<e;)s&&s[m].run();m=-1,e=f.length}s=null,d=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===c||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(n){try{return r.call(null,e)}catch(n){return r.call(this,e)}}}(n)}}function h(n,e){this.fun=n,this.array=e}function p(){}i.nextTick=function(n){var e=new Array(arguments.length-1);if(1<arguments.length)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];f.push(new h(n,e)),1!==f.length||d||a(v)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(n){return[]},i.binding=function(n){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(n){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],2:[function(n,d,e){(function(t){!function(n){var e=setTimeout;function o(){}function i(n){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof n)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],f(n,this)}function r(t,o){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,i._immediateFn(function(){var n=1===t._state?o.onFulfilled:o.onRejected;if(null!==n){var e;try{e=n(t._value)}catch(n){return void c(o.promise,n)}u(o.promise,e)}else(1===t._state?u:c)(o.promise,t._value)})):t._deferreds.push(o)}function u(e,n){try{if(n===e)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"==typeof n||"function"==typeof n)){var t=n.then;if(n instanceof i)return e._state=3,e._value=n,void a(e);if("function"==typeof t)return void f((o=t,r=n,function(){o.apply(r,arguments)}),e)}e._state=1,e._value=n,a(e)}catch(n){c(e,n)}var o,r}function c(n,e){n._state=2,n._value=e,a(n)}function a(n){2===n._state&&0===n._deferreds.length&&i._immediateFn(function(){n._handled||i._unhandledRejectionFn(n._value)});for(var e=0,t=n._deferreds.length;e<t;e++)r(n,n._deferreds[e]);n._deferreds=null}function s(n,e,t){this.onFulfilled="function"==typeof n?n:null,this.onRejected="function"==typeof e?e:null,this.promise=t}function f(n,e){var t=!1;try{n(function(n){t||(t=!0,u(e,n))},function(n){t||(t=!0,c(e,n))})}catch(n){if(t)return;t=!0,c(e,n)}}i.prototype.catch=function(n){return this.then(null,n)},i.prototype.then=function(n,e){var t=new this.constructor(o);return r(this,new s(n,e,t)),t},i.all=function(n){var c=Array.prototype.slice.call(n);return new i(function(o,r){if(0===c.length)return o([]);var i=c.length;function u(e,n){try{if(n&&("object"==typeof n||"function"==typeof n)){var t=n.then;if("function"==typeof t)return void t.call(n,function(n){u(e,n)},r)}c[e]=n,0==--i&&o(c)}catch(n){r(n)}}for(var n=0;n<c.length;n++)u(n,c[n])})},i.resolve=function(e){return e&&"object"==typeof e&&e.constructor===i?e:new i(function(n){n(e)})},i.reject=function(t){return new i(function(n,e){e(t)})},i.race=function(r){return new i(function(n,e){for(var t=0,o=r.length;t<o;t++)r[t].then(n,e)})},i._immediateFn="function"==typeof t?function(n){t(n)}:function(n){e(n,0)},i._unhandledRejectionFn=function(n){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",n)},i._setImmediateFn=function(n){i._immediateFn=n},i._setUnhandledRejectionFn=function(n){i._unhandledRejectionFn=n},void 0!==d&&d.exports?d.exports=i:n.Promise||(n.Promise=i)}(this)}).call(this,n("timers").setImmediate)},{timers:3}],3:[function(a,n,s){(function(n,e){var o=a("process/browser.js").nextTick,t=Function.prototype.apply,r=Array.prototype.slice,i={},u=0;function c(n,e){this._id=n,this._clearFn=e}s.setTimeout=function(){return new c(t.call(setTimeout,window,arguments),clearTimeout)},s.setInterval=function(){return new c(t.call(setInterval,window,arguments),clearInterval)},s.clearTimeout=s.clearInterval=function(n){n.close()},c.prototype.unref=c.prototype.ref=function(){},c.prototype.close=function(){this._clearFn.call(window,this._id)},s.enroll=function(n,e){clearTimeout(n._idleTimeoutId),n._idleTimeout=e},s.unenroll=function(n){clearTimeout(n._idleTimeoutId),n._idleTimeout=-1},s._unrefActive=s.active=function(n){clearTimeout(n._idleTimeoutId);var e=n._idleTimeout;0<=e&&(n._idleTimeoutId=setTimeout(function(){n._onTimeout&&n._onTimeout()},e))},s.setImmediate="function"==typeof n?n:function(n){var e=u++,t=!(arguments.length<2)&&r.call(arguments,1);return i[e]=!0,o(function(){i[e]&&(t?n.apply(null,t):n.call(null),s.clearImmediate(e))}),e},s.clearImmediate="function"==typeof e?e:function(n){delete i[n]}}).call(this,a("timers").setImmediate,a("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(n,e,t){var o=n("promise-polyfill"),r="undefined"!=typeof window?window:Function("return this;")();e.exports={boltExport:r.Promise||o}},{"promise-polyfill":2}]},{},[4])(4)});var ee,te,oe=ne.exports.boltExport,re=function(){var t={},c={};tinymce.Resource={add:function(n,e){c[n]&&(c[n](e),delete c[n]),t[n]=oe.resolve(e)},load:function(o,r){var i='Script at URL "'+r+'" failed to load',u='Script at URL "'+r+"\" did not call `tinymce.Resource.add('"+o+"', data)` within 1 second";if(void 0!==t[o])return t[o];var n=new oe(function(n,e){var t=function(n,e,t){void 0===t&&(t=1e3);var o=!1,r=null,i=function(t){return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];o||(o=!0,null!==r&&(h.clearTimeout(r),r=null),t.apply(null,n))}},u=i(n),c=i(e);return{reject:c,resolve:u,start:function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];o||(r=h.setTimeout(function(){return c.apply(null,n)},t))}}}(n,e);c[o]=t.resolve,tinymce.ScriptLoader.loadScripts([r],function(){return t.start(u)},function(){return t.reject(i)})});return t[o]=n}}},ie=function(n,e){return tinymce.Resource||re(),tinymce.Resource.load(n,e)},ue=function(t,o){return new oe(function(n,e){(o||tinymce.DOM.styleSheetLoader).load(t,n,e)})};(te=ee||(ee={}))[te.Modern=0]="Modern",te[te.Silver=1]="Silver";var ce,ae=function(n,e){return t=e,r=void 0===(o=n)?h.document:o.dom(),Ln(r)?[]:k(r.querySelectorAll(t),en.fromDom);var t,o,r},se=g("tox-comment"),fe=g("data-mce-annotation-uid"),de=g("data-mce-annotation"),me=g("tinycomments"),le=g("tox-comments-visible"),ve=function(n,e,t,o){return qn(n,e),R(ae(n,t),o),n.dom().innerHTML},he=function(o,r,i){for(var u=en.fromTag("div"),n=function(t){o[t].content=ve(u,o[t].content,r,i),R(o[t].fragments||[],function(n,e){o[t].fragments[e]=ve(u,o[t].fragments[e],r,i)})},e=0;e<o.length;e++)n(e)},pe=function(n,e){var t;he(n,(t=e,"["+fe()+'="'+t+'"]'),Yn)},_e=function(n){he(n,"["+de()+'="'+me()+'"]',Yn)},ge="tc-open-comment",ye="tc-try-delete-all-conversations",we="tc-delete-conversation-at-cursor",be=function(o,r,t){var i=me();o.addCommand(ye,function(n,e){o.windowManager.confirm(Gn.tc_delete_prompts_all,function(n){if(n)return t.deleteAllConversations({}).get(function(n){n.fold(function(n){return r.showError(Gn.tc_delete_problem_all,n)},function(n){if(n.canDelete){var e=o.selection.getBookmark();o.focus();var t=o.annotator.getAll(i);z(t,function(n,e){var t;(t=n,0===t.length?b.none():b.some(t[0])).each(function(n){o.selection.select(n),o.annotator.remove(i)})}),o.selection.moveToBookmark(e),_e(o.undoManager.data),r.refreshSidebar(b.none(),2),o.focus()}else r.showError(Gn.tc_delete_unauthorised_all)})})})})},Te=function(n,e,u,c){n.on("init",function(){var o,r,t,i;o=e,r=c,n.addCommand(ge,function(n,e){var t=r.get();o.refreshSidebar(t,e.grabFocus?1:0)}),i=e,(t=n).addCommand(we,function(n,e){t.undoManager.transact(function(){return t.annotator.remove(me())}),pe(t.undoManager.data,e.conversationUid),i.refreshSidebar(b.none(),2),t.focus()}),be(n,e,u)})},Oe=function(n,e){return n.execCommand(ge,null,{grabFocus:e})},Se=function(n){n.execCommand(ye,null,{})},Ce=function(n,e){n.execCommand("ToggleSidebar",null,e)},Ee=function(n){var t=b.none(),e=[],o=function(n){r()?u(n):e.push(n)},r=function(){return t.isSome()},i=function(n){R(n,u)},u=function(e){t.each(function(n){h.setTimeout(function(){e(n)},0)})};return n(function(n){t=b.some(n),i(e),e=[]}),{get:o,map:function(t){return Ee(function(e){o(function(n){e(t(n))})})},isReady:r}},xe={nu:Ee,pure:function(e){return Ee(function(n){n(e)})}},De=function(n){h.setTimeout(function(){throw n},0)},Ae=function(t){var n=function(n){t().then(n,De)};return{map:function(n){return Ae(function(){return t().then(n)})},bind:function(e){return Ae(function(){return t().then(function(n){return e(n).toPromise()})})},anonBind:function(n){return Ae(function(){return t().then(function(){return n.toPromise()})})},toLazy:function(){return xe.nu(n)},toCached:function(){var n=null;return Ae(function(){return null===n&&(n=t()),n})},toPromise:t,get:n}},Ne=function(n){return Ae(function(){return new oe(n)})},ke=function(n){return Ae(function(){return oe.resolve(n)})},Re=function(t){return{is:function(n){return t===n},isValue:v,isError:m,getOr:g(t),getOrThunk:g(t),getOrDie:g(t),or:function(n){return Re(t)},orThunk:function(n){return Re(t)},fold:function(n,e){return e(t)},map:function(n){return Re(n(t))},mapError:function(n){return Re(t)},each:function(n){n(t)},bind:function(n){return n(t)},exists:function(n){return n(t)},forall:function(n){return n(t)},toOption:function(){return b.some(t)}}},Me=function(t){return{is:m,isValue:m,isError:v,getOr:d,getOrThunk:function(n){return n()},getOrDie:function(){return n=String(t),function(){throw new Error(n)}();var n},or:function(n){return n},orThunk:function(n){return n()},fold:function(n,e){return n(t)},map:function(n){return Me(t)},mapError:function(n){return Me(n(t))},each:f,bind:function(n){return Me(t)},exists:m,forall:v,toOption:b.none}},je={value:Re,error:Me,fromOption:function(n,e){return n.fold(function(){return Me(e)},Re)}},Ie=function(i){return l(l({},i),{toCached:function(){return Ie(i.toCached())},bindFuture:function(e){return Ie(i.bind(function(n){return n.fold(function(n){return ke(je.error(n))},function(n){return e(n)})}))},bindResult:function(e){return Ie(i.map(function(n){return n.bind(e)}))},mapResult:function(e){return Ie(i.map(function(n){return n.map(e)}))},mapError:function(e){return Ie(i.map(function(n){return n.mapError(e)}))},foldResult:function(e,t){return i.map(function(n){return n.fold(e,t)})},withTimeout:function(n,r){return Ie(Ne(function(e){var t=!1,o=h.setTimeout(function(){t=!0,e(je.error(r()))},n);i.get(function(n){t||(h.clearTimeout(o),e(n))})}))}})},Le=function(n){return Ie(Ne(n))},Ue=function(n){return Ie(ke(je.value(n)))},Pe=Le,Fe=Ue,Be=function(n){return Ie(ke(je.error(n)))},He=function(t){return function(n){return Pe(function(e){return t(n,function(n){e(je.value(n))},function(n){e(je.error(n))})})}},Ve=function(t){return function(n){var e=n.getParam(t);if(E(e))return e;throw new Error(t+" has not been implemented.")}},Ye=function(e,t){return function(n){return b.from(n.getParam(e)).getOrThunk(function(){return t(n)})}},qe=function(t,o){return function(n){var e=Ye(t,function(){return o(Qe(n))})(n);return He(e)}},We=Ve("tinycomments_create"),ze=Ve("tinycomments_reply"),Ge=Ve("tinycomments_delete"),Xe=Ve("tinycomments_delete_all"),Je=Ve("tinycomments_delete_comment"),$e=Ve("tinycomments_edit_comment"),Ke=Ve("tinycomments_lookup"),Qe=Ye("tinycomments_author",function(){return"Anon"}),Ze=Ye("tinycomments_author_name",Qe),nt=qe("tinycomments_can_delete",function(o){return function(n,e,t){e({canDelete:0<n.comments.length&&n.comments[0].author===o&&!0})}}),et=qe("tinycomments_can_delete_comment",function(o){return function(n,e,t){e({canDelete:n.comment.author===o&&!0})}}),tt=qe("tinycomments_can_edit_comment",function(o){return function(n,e,t){e({canEdit:n.comment.author===o&&!0})}}),ot=Ye("tinycomments_mode",function(){return"callback"}),rt=Object.prototype.hasOwnProperty,it=(ce=function(n,e){return S(n)&&S(e)?it(n,e):e},function(){for(var n=new Array(arguments.length),e=0;e<n.length;e++)n[e]=arguments[e];if(0===n.length)throw new Error("Can't merge zero objects");for(var t={},o=0;o<n.length;o++){var r=n[o];for(var i in r)rt.call(r,i)&&(t[i]=ce(t[i],r[i]))}return t}),ut=function(n){var o,e=We(n),t=ze(n),r=Ke(n),i=Ge(n),u=Xe(n),c=Je(n),a=$e(n);return{create:He(e),reply:He(t),lookup:He((o=r,function(n,t,e){o(n,function(n){var e=k(n.conversation.comments,function(n){return l({authorName:n.author},n)});t(it(n,{conversation:{comments:e}}))},e)})),deleteConversation:He(i),deleteAllConversations:He(u),editComment:He(a),deleteComment:He(c),lifecycleHooks:{onSetContent:f,onGetContent:b.none}}},ct=function(u,n){return n(function(o){var r=[],i=0;0===u.length?o([]):R(u,function(n,e){var t;n.get((t=e,function(n){r[t]=n,++i>=u.length&&o(r)}))})})},at=function(e){return function(n){return{uid:n.uid,comments:M(n.comments,function(n){return n.uid!==e})}}},st=function(e,t,o){return function(n){return{uid:n.uid,comments:k(n.comments,function(n){return n.uid===e?l(l({},n),{content:t,modifiedAt:o}):n})}}};var ft,dt,mt,lt=(ft=function(n){return n.dom().nodeType===J||"#comment"===n.dom().nodeName.toLowerCase()},dt="comment",{get:function(n){if(!ft(n))throw new Error("Can only get "+dt+" value of a "+dt+" node");return mt(n).getOr("")},getOption:mt=function(n){return ft(n)?b.from(n.dom().nodeValue):b.none()},set:function(n,e){if(!ft(n))throw new Error("Can only set raw "+dt+" value of a "+dt+" node");n.dom().nodeValue=e}});var vt=function(n){return function(n){var e=n.split(","),t=/data:([^;]+)/.exec(e[0]);if(!t)return b.none();for(var o=t[1],r=e[1],i=h.atob(r),u=i.length,c=Math.ceil(u/1024),a=new Array(c),s=0;s<c;++s){for(var f=1024*s,d=Math.min(f+1024,u),m=new Array(d-f),l=f,v=0;l<d;++v,++l)m[v]=i[l].charCodeAt(0);a[s]=new Uint8Array(m)}return b.some(new h.Blob(a,{type:o}))}(n)};var ht={base64:{versions:["2.0","2.1"],encryptor:{encryptText:function(n){var e=new h.Blob([n],{type:"application/json"}),t=new h.FileReader;return Pe(function(n){t.addEventListener("loadend",function(){return n(je.value({encrypted:[t.result]}))}),t.addEventListener("error",function(){return n(je.error(t.error))}),t.readAsDataURL(e)})},decryptText:function(n){return vt(n[0]).fold(function(){return Be("Could not decode URI")},function(e){var t=new h.FileReader;return Pe(function(n){t.addEventListener("loadend",function(){return n(je.value({decrypted:t.result}))}),t.addEventListener("error",function(){return n(je.error(t.error.message))}),t.readAsText(e)})})}}}};ht.current=ht.base64;var pt=function(e){return function(n,e){for(var t=W(n),o=0,r=t.length;o<r;o++){var i=t[o],u=n[i];if(e(u,i,n))return b.some(u)}return b.none()}(ht,function(n){return N(n.versions,e)}).map(function(n){return n.encryptor})},_t=function(){return ht.current.encryptor},gt=function(n,e,t){if(e===n)return t;switch(n){case"2.0":return gt("2.1",e,l(l({},o=t),{authorName:o.author}));default:return t}var o},yt="tinycomments",wt=function(n){return(e=n,lt.getOption(e)).map(function(n){return e=n.replace(/^\s+/g,""),t=e,r=0,""===(o=yt)||!(t.length<o.length)&&t.substr(r,r+o.length)===o;var e,t,o,r}).isSome();var e},bt=function(n){var e,t,o=(t=n,e=lt.get(t),e.replace(/^\s+|\s+$/g,"")).split("|");return 2<o.length?je.value({version:o[1],rest:o.slice(2)}):je.error("Embedded comments not in expected format.")},Tt=function(n){try{var e=JSON.parse(n);return je.value(e)}catch(n){return je.error("Could not JSON parse conversations.")}},Ot=function(n){return(e=n,t=wt,j(e.dom().childNodes,function(n){return t(en.fromDom(n))}).map(en.fromDom)).fold(function(){return Fe({conversations:{},commentTag:b.none(),encrypted:{encrypted:[]}})},function(c){return bt(c).fold(Be,function(n){var e,t,i=n.version,u=n.rest;return(e=i,t=u,pt(e).fold(function(){return Be("No Encryptor for version: "+e)},function(n){return n.decryptText(t)})).bindResult(function(n){var e,t,o,r=n.decrypted;return(e=i,t=r,o=Tt(t),"2.1"!==e?o.map(function(n){return G(n,function(n){return l(l({},n),{comments:k(n.comments,function(n){return gt(e,"2.1",n)})})})}):o).map(function(n){return{commentTag:b.some(c),conversations:n,encrypted:{encrypted:u}}})})})});var e,t},St=function(n){var e,t,o,r=en.fromDom(h.document.createComment(p([yt,"2.1"],n.encrypted).join("|")));return e=r,t=en.fromTag("div"),o=en.fromDom(e.dom().cloneNode(!0)),Bn(t,o),t.dom().innerHTML},Ct=function(n){var r,t,e,o=Qe(n),i=Ze(n),u=(r={},t=b.none(),{get:function(){return it(r,{})},clear:function(){r={},t=b.none()},addData:function(n,e){r[n]=e},setData:function(n,e){r=n,t=b.some(e)},setEncryptedData:function(n){t=b.some(n)},getEncrypedData:function(){return t},lookupData:e=function(n){return Object.prototype.hasOwnProperty.call(r,n)?b.some(r[n]):b.none()},removeData:function(n){delete r[n]},updateData:function(t,o){return e(t).map(function(n){var e=o(n);return r[t]=e})}}),c=nt(n),a=et(n),s=tt(n),f=_t(),d=function(){return f.encryptText(JSON.stringify(u.get())).mapResult(function(n){return u.setEncryptedData(n)})},m=function(o,r,n,i){return(t=o,u.lookupData(t.conversationUid).fold(function(){return je.error("Could not find conversation with uid "+t.conversationUid)},function(e){return j(e.comments,function(n){return n.uid===t.commentUid}).fold(function(){return je.error("Could not find comment with uid "+t.commentUid+" in conversation "+t.conversationUid)},function(n){return je.value({conversationUid:e.uid,comment:n})})})).fold(function(n){return Be(n)},function(t){return n(t).bindFuture(function(n){var e;return!0!==n[r]?Fe(((e={})[r]=!1,e)):u.updateData(o.conversationUid,i(t)).fold(function(){return Be("Could not operate on comment ("+r+")")},function(n){return d().mapResult(function(){var n;return(n={})[r]=!0,n})})})});var t};return{create:function(n){var e=q("mce-conversation");return u.addData(e,{uid:e,comments:[{uid:e,author:o,authorName:i,content:n.content,createdAt:n.createdAt,modifiedAt:n.createdAt}]}),d().mapResult(function(){return{conversationUid:e}})},reply:function(n){var e=q("mce-reply"),t={uid:e,author:o,authorName:i,content:n.content,createdAt:n.createdAt,modifiedAt:n.createdAt};return u.updateData(n.conversationUid,function(n){return l(l({},n),{comments:n.comments.concat([t])})}).fold(function(){return Be("Could not reply to uid: "+n.conversationUid)},function(){return d().mapResult(function(){return{commentUid:e}})})},lookup:function(n){return u.lookupData(n.conversationUid).fold(function(){return Be("Could not find uid: "+n.conversationUid)},function(n){return Fe({conversation:n})})},deleteConversation:function(e){return u.lookupData(e.conversationUid).fold(function(){return Be("Could not find conversation to delete")},function(n){return c({conversationUid:n.uid,comments:n.comments}).bindFuture(function(n){return n.canDelete?(u.removeData(e.conversationUid),d().mapResult(function(){return{canDelete:!0}})):Fe({canDelete:!1})})})},deleteAllConversations:function(n){var e=W(u.get()),o=k(e,function(n){return u.lookupData(n).fold(function(){return Be("Could not find conversation")},function(n){return c({conversationUid:n.uid,comments:n.comments})})});return Pe(function(t){var n;(n=o,ct(n,Ne)).get(function(n){var e=function(n,e){for(var t=0,o=n.length;t<o;++t)if(!0!==e(n[t],t))return!1;return!0}(n,function(n){return n.exists(function(n){return n.canDelete})});e&&u.clear(),t(je.value({canDelete:e}))})})},deleteComment:function(n){return m(n,"canDelete",a,function(n){return at(n.comment.uid)})},editComment:function(e){return m(e,"canEdit",function(n){return s(l(l({},n),{edit:{modifiedAt:e.modifiedAt,content:e.content}}))},function(n){return st(e.commentUid,e.content,e.modifiedAt)})},lifecycleHooks:{onSetContent:function(n){Ot(en.fromDom(n.getBody())).get(function(n){return n.fold(function(n){return h.console.error("Error extracting embedded conversations: "+n)},function(e){e.commentTag.each(function(n){u.setData(e.conversations,e.encrypted),Vn(n)})})})},onGetContent:function(n,e){return u.getEncrypedData().map(function(n){return e+St(n)})}}}},Et=function(n,i,u){n.on("init",function(){n.annotator.register(me(),{decorate:function(){return{classes:[se()],attributes:{}}}}),n.annotator.annotationChanged(me(),function(n,e,t){if(n){u.onComment();var o=t.uid,r=t.nodes;i.refreshView(b.some({uid:o,nodes:k(r,en.fromDom)}))}else u.notOnComment(),i.refreshView(b.none())})})};var xt,Dt,At=function(n,e){var t,o,r=(t=e,null===(o=n.dom().getAttribute(t))?void 0:o);return void 0===r||""===r?[]:r.split(" ")},Nt=function(n){return void 0!==n.dom().classList},kt=function(n,e){return r=e,i=At(t=n,o="class").concat([r]),Q(t,o,i.join(" ")),!0;var t,o,r,i},Rt=function(n,e){return r=e,0<(i=M(At(t=n,o="class"),function(n){return n!==r})).length?Q(t,o,i.join(" ")):Z(t,o),!1;var t,o,r,i},Mt=function(n){0===(Nt(n)?n.dom().classList:At(n,"class")).length&&Z(n,"class")},jt=function(e){return(n=Un(e),t=void 0!==n?n.dom():h.document,b.from(t.activeElement).map(en.fromDom)).filter(function(n){return e.dom().contains(n.dom())});var n,t},It=function(o,r){return function(n){var e,t;r.set(xt.Open),e=en.fromDom(o.getBody()),t=le(),Nt(e)?e.dom().classList.add(t):kt(e,t),o.fire("mce-tinycomments-update",{}),Oe(o,!1)}},Lt=function(e,t){return function(n){jt(en.fromDom(n.element())).each(function(n){e.focus()}),t.set(xt.Closed),function(n,e){Nt(n)?n.dom().classList.remove(e):Rt(n,e);Mt(n)}(en.fromDom(e.getBody()),le()),e.fire("mce-tinycomments-update",{})}},Ut=function(n,e){n===ee.Modern?e.getContainer().querySelector(".mce-sidebar-toolbar .mce-i-conversation").click():Ce(e,"showcomments")},Pt=function(n,e,t){t.get()!==xt.Closed&&t.get()!==xt.Closing||Ut(n,e),Oe(e,!0)},Ft=function(t,e,o){var n,r,i=(n=tinymce,r="5.0.4",n&&1===B(H(n),F(r))?"comment-add":"comment");t.ui.registry.addButton("addcomment",{tooltip:Gn.tc_items_addcomment,shortcut:"meta+Alt+M",icon:i,onAction:function(){Pt(ee.Silver,t,o)}}),t.ui.registry.addMenuItem("addcomment",{text:Gn.tc_items_addcomment,shortcut:"meta+Alt+M",icon:i,onAction:function(){Pt(ee.Silver,t,o)}}),t.ui.registry.addMenuItem("deleteallconversations",{text:Gn.tc_items_deleteall,onAction:function(){Se(t)}}),t.ui.registry.addToggleMenuItem("showcomments",{text:Gn.tc_items_showcomments,icon:"comment",onAction:function(){Ut(ee.Silver,t)},onSetup:function(n){var e=function(){n.setActive(o.get()===xt.Open)};return t.on("mce-tinycomments-update",e),e(),function(){t.off("mce-tinycomments-update",e)}}}),t.ui.registry.addSidebar("showcomments",{tooltip:Gn.tc_items_showcomments,icon:"comment",onSetup:function(n){return e.rememberSidebar(en.fromDom(n.element())),function(){}},onShow:It(t,o),onHide:Lt(t,o)})},Bt=function(t,e,o){t.addButton("showcomments",{icon:"bubble",tooltip:Gn.tc_items_showcomments,onclick:function(){Ut(ee.Modern,t)},onPostRender:function(e){t.on("mce-tinycomments-update",function(n){e.control.active(o.get()===xt.Open)})}}),t.addButton("addcomment",{tooltip:Gn.tc_items_addcomment,icon:"bubble",onclick:function(n){Pt(ee.Modern,t,o)}}),t.addMenuItem("showcomments",{text:Gn.tc_items_showcomments,context:"view",selectable:!0,onclick:function(n){Ut(ee.Modern,t)},onPostRender:function(e){t.on("mce-tinycomments-update",function(n){e.control.active(o.get()===xt.Open)})}}),t.addMenuItem("addcomment",{text:Gn.tc_items_addcomment,context:"insert",onclick:function(n){Pt(ee.Modern,t,o)}}),t.addMenuItem("deleteallconversations",{text:Gn.tc_items_deleteall,context:"file",onclick:function(n){Se(t)}}),t.addSidebar("showcomments",{tooltip:Gn.tc_items_showcomments,icon:"conversation",onrender:function(n){e.rememberSidebar(en.fromDom(n.element()))},onshow:It(t,o),onhide:Lt(t,o)})};(Dt=xt||(xt={}))[Dt.Open=0]="Open",Dt[Dt.Closed=1]="Closed",Dt[Dt.Closing=2]="Closing";var Ht=function(n,e,t){var o=I(xt.Closed);e.shortcuts.add("meta+alt+m","TinyComments addComment",function(){Pt(n,e,o)}),(n===ee.Modern?Bt:Ft)(e,t,o)},Vt=function(r,n){var e,o,t,i,u,c,a=I(!1),s=I(b.none()),f=V(tinymce,"5.0.0")?ee.Modern:ee.Silver,d=("embedded"===ot(e=r)?Ct:ut)(e),m=(o=I(b.none()),t=I(b.none()),{rememberSidebar:function(e){t.set(b.some(e)),o.get().fold(function(){var n=en.fromHtml('<div aria-busy="true" class="tox-conversations" style="position: relative;">\n  <div class="tox-dialog__busy-spinner">\n  <div class="tox-loading-text">\n      <div>\n      <p>Comments are loading</p>\n      </div>\n  <div class="tox-spinner">\n      <div></div>\n      <div></div>\n      <div></div>\n  </div>\n</div></div>');Bn(e,n)},function(n){n.attachTo(e)})},setUi:function(e){o.set(b.some(e)),t.get().each(function(n){Hn(n),e.attachTo(n)})},refreshView:function(e){o.get().fold(function(){},function(n){n.controller.refreshView(e)})},refreshSidebar:function(e,t){o.get().fold(function(){},function(n){n.controller.refreshSidebar(e,t)})},setReadonly:function(e){o.get().each(function(n){return n.controller.setReadonly(e)})},showError:function(e,t){o.get().each(function(n){return n.controller.showError(e,t)})}}),l={translate:tinymce.translate};ie("tinymce.plugins.tinycomments.sidebar",(i=r,u=n,c=i.getParam("tinycomments_js_url"),(c?c+"/":u+"/js/")+"tinycomments-sidebar.min.js")).then(function(n){return n(f,r,d,s,function(n){m.setUi(n),m.refreshSidebar(s.get(),5),a.set(!0)},l)});var v=$n(l);return r.on("remove",v.release),Te(r,m,d,s),Et(r,m,v),Ht(f,r,m),r.on("init",function(){!function(n,e,t){var o,r=e.getParam("tinycomments_css_url"),i=r?r+"/":t+"/css/";n===ee.Modern&&e.dom.loadCSS(i+"tinymce4-content.css");var u=p([i+"tinycomments.css"],n===ee.Modern?[i+"tinycomments-tinymce4.css",i+"tinymce4-icons.css"]:[]),c=b.from(null===(o=e.ui)||void 0===o?void 0:o.styleSheetLoader).getOr(tinymce.DOM.styleSheetLoader);k(u,function(n){return ue(n,c)})}(f,r,n),m.refreshSidebar(b.none(),5)}),r.on("setContent",function(n){n.selection||(d.lifecycleHooks.onSetContent(r),m.refreshView(b.none()))}),r.on("SwitchMode",function(){m.setReadonly(r.readonly)}),r.on("getContent",function(n){var e=!0===n.source_view,t=!0===n.contextual,o=e||t?b.none():d.lifecycleHooks.onGetContent(r,n.content);n.content=o.getOr(n.content)}),{hasLoadedUi:function(){return a.get()}}},Yt=function(n,e){return V(tinymce,"4.8.0")?(Qn.error("The tinycomments plugin requires at least 4.8.0 version of TinyMCE."),{}):Vt(n,e)};tinymce.PluginManager.requireLangPack("tinycomments","ar,bg_BG,ca,cs,da,de,el,es,eu,fa,fi,fr_FR,he_IL,hr,hu_HU,id,it,ja,kk,ko_KR,nb_NO,nl,pl,pt_PT,pt_BR,ro,ru,sk,sl_SI,sv_SE,th_TH,tr,uk,zh_CN,zh_TW"),tinymce.PluginManager.add("tinycomments",Yt)}(window);