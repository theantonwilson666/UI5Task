/* Ephox Accessibility Checker Plugin
 *
 * Copyright 2010-2017 Ephox Corporation.  All rights reserved.
 *
 * Version: 2.3.0-125
 */

!function(l){"use strict";var e,t,n,r,o,i,m=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return m(n())}}},a=function(){},g=function(e){return function(){return e}},u=function(e){return e},c=g(!1),h=g(!0),s=function(){return f},f=(e=function(e){return e.isNone()},r={fold:function(e,t){return e()},is:c,isSome:c,isNone:h,getOr:n=function(e){return e},getOrThunk:t=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:g(null),getOrUndefined:g(void 0),or:n,orThunk:t,map:s,each:a,bind:s,exists:c,forall:h,filter:s,equals:e,equals_:e,toArray:function(){return[]},toString:g("none()")},Object.freeze&&Object.freeze(r),r),d=function(n){var e=g(n),t=function(){return o},r=function(e){return e(n)},o={fold:function(e,t){return t(n)},is:function(e){return n===e},isSome:h,isNone:c,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return d(e(n))},each:function(e){e(n)},bind:r,exists:r,forall:r,filter:function(e){return e(n)?o:f},toArray:function(){return[n]},toString:function(){return"some("+n+")"},equals:function(e){return e.is(n)},equals_:function(e,t){return e.fold(c,function(e){return t(n,e)})}};return o},w={some:d,none:s,from:function(e){return null==e?f:d(e)}},p=function(e){return parseInt(e,10)},v=function(e,t){var n=e-t;return 0===n?0:0<n?1:-1},y=function(e,t,n){return{major:e,minor:t,patch:n}},b=function(e){var t=/([0-9]+)\.([0-9]+)\.([0-9]+)(?:(\-.+)?)/.exec(e);return t?y(p(t[1]),p(t[2]),p(t[3])):y(0,0,0)},x=function(e,t){return!!e&&-1===function(e,t){var n=v(e.major,t.major);if(0!==n)return n;var r=v(e.minor,t.minor);if(0!==r)return r;var o=v(e.patch,t.patch);return 0!==o?o:0}(b([(n=e).majorVersion,n.minorVersion].join(".").split(".").slice(0,3).join(".")),b(t));var n},k=(o=l.window,i="error",function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=o.console;n&&i in n&&n[i].apply(n,e)}),D={requestAnimationFrame:function(e,t){for(var n=l.window.requestAnimationFrame,r=["ms","moz","webkit"],o=0;o<r.length&&!n;o++)n=l.window[r[o]+"RequestAnimationFrame"];n||(n=function(e){l.window.setTimeout(e,0)}),n(e,t)},setEditorTimeout:function(e,t,n){l.window.setTimeout(function(){e.removed||t()},n||0)}},T=function(t){return function(e){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t}(e)===t}},N=T("string"),A=T("array"),R=T("boolean"),S=T("function"),I=T("number"),C=Array.prototype.slice,O=Array.prototype.indexOf,E=Array.prototype.push,_=function(e,t){return n=e,r=t,-1<O.call(n,r);var n,r},M=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r},H=function(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n)}},U=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n},P=function(e,t,n){return H(e,function(e){n=t(n,e)}),n},G=function(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];if(t(o,n))return w.some(o)}return w.none()},L=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!A(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);E.apply(t,e[n])}return t},W=function(e,t){return L(M(e,t))},q=function(e,t){for(var n=0,r=e.length;n<r;++n){if(!0!==t(e[n],n))return!1}return!0},B=(S(Array.from)&&Array.from,function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)}),V=function(e,t){return B(e,t,l.Node.DOCUMENT_POSITION_PRECEDING)},j=function(e,t){return B(e,t,l.Node.DOCUMENT_POSITION_CONTAINED_BY)},F=function(t,e,n){return W(e,function(e){return"I1"===e.id?e.check(t,n)?[{rule:e,element:t}]:[]:e.check(t)?[{rule:e,element:t}]:[]})},z=function(e,t){for(var n=[],r=function(e,t){for(var n=[],r=[],o=0,i=e.length;o<i;o++){var a=e[o];(t(a,o)?n:r).push(a)}return{pass:n,fail:r}}(t.rules,function(e){return e.walkable}),o=r.pass,i=r.fail,a=l.document.createTreeWalker(e,l.NodeFilter.SHOW_ELEMENT,null,!1);a.nextNode();)n=n.concat(F(a.currentNode,o,t.allowDecorativeImages));var u,c=(u=e,W(i,function(t){return M(t.check(u),function(e){return{rule:t,element:e}})}));return(n=n.concat(c)).sort(function(e,t){return n=e.element,r=t.element,n===r?0:V(n,r)?1:-1;var n,r}),n};var Y,X={html4:g("html4"),html5:g("html5")},K={a:g("a"),aa:g("aa"),aaa:g("aaa")},$={error:g("error"),warning:g("warning"),info:g("info")},J=function(e,t){return e.matches?e.matches(t):e.webkitMatchesSelector?e.webkitMatchesSelector(t):e.mozMatchesSelector?e.mozMatchesSelector(t):!!e.msMatchesSelector&&e.msMatchesSelector(t)},Q={id:"D1",wcag:"1.3.1",severity:$.warning(),desckey:"a11y.d1.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!0,check:function(e){return!!J(e,"p")&&q(e.childNodes,function(e){return/^(b|strong)$/i.test(e.nodeName)})},levels:[K.a(),K.aa(),K.aaa()],htmlversions:[X.html4(),X.html5()]},Z={id:"D2",wcag:"1.3.1",severity:$.error(),desckey:"a11y.d2.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!1,check:function(e){var n,t=e.querySelectorAll("h1, h2, h3, h4, h5, h6"),r=[];return H(t,function(e){var t=parseInt(e.tagName.slice(1),10);n&&1<t-n&&r.push(e),n=t}),r},levels:[K.a(),K.aa(),K.aaa()],htmlversions:[X.html4(),X.html5()]},ee={id:"D3",wcag:"2.4.4",severity:$.error(),desckey:"a11y.d3.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/navigation-mechanisms-refs.html",walkable:!1,check:function(e){return U(e.querySelectorAll("a + a"),function(e){return e.href===e.previousSibling.href})},levels:[K.a(),K.aa(),K.aaa()],htmlversions:[X.html4(),X.html5()]},te=function(e){var t=e.nodeName,n=function(e){for(var t=e.nextSibling;null!==t&&("#text"===t.nodeName||"BR"===t.nodeName);)t=t.nextSibling;return t}(e);return null!==n&&n.nodeName===t&&n},ne=function(e,t){for(var n=te(e),r=t(e)?[e]:[];!1!==n&&t(n);)r.push(n),n=te(n);return r},re=function(e,t){for(var n=-1,r=0;r<e.length;r++)if(e[r]===t){n=r;break}return n},oe=function(e,t){for(var n=e.querySelectorAll("p,h1,h2,h3,h4,h5,h6"),r=[],o=0;o<n.length;){var i=n[o],a=ne(i,t);if(1<a.length){r.push(a[0]);var u=a[a.length-1],c=re(n,u);o=-1===c?o+1:c}else o++}return r},ie=function(e){return e.textContent.match(/^\s{0,}([a-z1-9]|i+)\s{0,}[.)-]/gim)},ae={id:"D4o",wcag:"1.3.1",severity:$.error(),desckey:"a11y.d4.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!1,check:function(e){return oe(e,ie)},levels:[K.a(),K.aa(),K.aaa()],htmlversions:[X.html4(),X.html5()]},ue=function(e){return e.textContent.match(/^\s{0,}(\*|-)\s{0,}/gim)},ce={id:"D4u",wcag:"1.3.1",severity:$.error(),desckey:"a11y.d4.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!1,check:function(e){return oe(e,ue)},levels:[K.a(),K.aa(),K.aaa()],htmlversions:[X.html4(),X.html5()]},se=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:g(e)}},le={fromHtml:function(e,t){var n=(t||l.document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||1<n.childNodes.length)throw l.console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return se(n.childNodes[0])},fromTag:function(e,t){var n=(t||l.document).createElement(e);return se(n)},fromText:function(e,t){var n=(t||l.document).createTextNode(e);return se(n)},fromDom:se,fromPoint:function(e,t,n){var r=e.dom();return w.from(r.elementFromPoint(t,n)).map(se)}},fe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(t.length!==n.length)throw new Error('Wrong number of arguments to struct. Expected "['+t.length+']", got '+n.length+" arguments");var r={};return H(t,function(e,t){r[e]=g(n[t])}),r}},de=Object.keys,pe=Object.hasOwnProperty,me=function(e,t){for(var n=de(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i)}},he=function(n){return function(e,t){n[t]=e}},ve=function(e,t){var n,r,o,i,a={},u={};return n=e,r=t,o=he(a),i=he(u),me(n,function(e,t){(r(e,t)?o:i)(e,t)}),{t:a,f:u}},ye=function(e){return n=function(e){return e},r=[],me(e,function(e,t){r.push(n(e,t))}),r;var n,r},ge=function(e,t){return pe.call(e,t)},we=function(e){return e.slice(0).sort()},be=function(t,e){if(!A(e))throw new Error("The "+t+" fields must be an array. Was: "+e+".");H(e,function(e){if(!N(e))throw new Error("The value "+e+" in the "+t+" fields was not a string.")})},xe=function(o,i){var n,a=o.concat(i);if(0===a.length)throw new Error("You must specify at least one required or optional field.");return be("required",o),be("optional",i),n=we(a),G(n,function(e,t){return t<n.length-1&&e===n[t+1]}).each(function(e){throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+n.join(", ")+"].")}),function(t){var n=de(t);q(o,function(e){return _(n,e)})||function(e,t){throw new Error("All required keys ("+we(e).join(", ")+") were not specified. Specified keys were: "+we(t).join(", ")+".")}(o,n);var e=U(n,function(e){return!_(a,e)});0<e.length&&function(e){throw new Error("Unsupported keys for object: "+we(e).join(", "))}(e);var r={};return H(o,function(e){r[e]=g(t[e])}),H(i,function(e){r[e]=g(Object.prototype.hasOwnProperty.call(t,e)?w.some(t[e]):w.none())}),r}},ke=fe("red","green","blue","alpha"),De={rgbaColour:ke,white:function(){return ke(255,255,255,1)}},Te=function(e,t){return(Math.max(e,t)+.05)/(Math.min(e,t)+.05)},Ne=function(e){var t=function(e){return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)},n=e.red()/255,r=e.green()/255,o=e.blue()/255;return.2126*t(n)+.7152*t(r)+.0722*t(o)},Ae=function(e,t){var n=e.alpha()+t.alpha()*(1-e.alpha()),r=(e.red()*e.alpha()+t.red()*t.alpha()*(1-e.alpha()))/n,o=(e.green()*e.alpha()+t.green()*t.alpha()*(1-e.alpha()))/n,i=(e.blue()*e.alpha()+t.blue()*t.alpha()*(1-e.alpha()))/n;return De.rgbaColour(Math.ceil(r),Math.ceil(o),Math.ceil(i),n)},Re=function(e){var t=function(e,t,n,r){var o=parseInt(e,10),i=parseInt(t,10),a=parseInt(n,10),u=parseFloat(r);return w.some(De.rgbaColour(o,i,a,u))};if("transparent"===e)return t(0,0,0,0);var n=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/);if(null!==n)return t(n[1],n[2],n[3],1);var r=e.match(/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/);return null!==r?t(r[1],r[2],r[3],r[4]):w.none()},Se=(l.Node.ATTRIBUTE_NODE,l.Node.CDATA_SECTION_NODE,l.Node.COMMENT_NODE,l.Node.DOCUMENT_NODE),Ie=(l.Node.DOCUMENT_TYPE_NODE,l.Node.DOCUMENT_FRAGMENT_NODE,l.Node.ELEMENT_NODE),Ce=l.Node.TEXT_NODE,Oe=(l.Node.PROCESSING_INSTRUCTION_NODE,l.Node.ENTITY_REFERENCE_NODE,l.Node.ENTITY_NODE,l.Node.NOTATION_NODE,void 0!==l.window?l.window:Function("return this;")()),Ee=function(e,t){return function(e,t){for(var n=null!=t?t:Oe,r=0;r<e.length&&null!=n;++r)n=n[e[r]];return n}(e.split("."),t)},_e=function(e,t){var n=Ee(e,t);if(null==n)throw new Error(e+" not available on this browser");return n},Me=function(e){var t,n=Ee("ownerDocument.defaultView",e);return(t=n,_e("HTMLElement",t)).prototype.isPrototypeOf(e)},He=function(e){return Me(e.dom())},Ue=(Y=Ce,function(e){return e.dom().nodeType===Y}),Pe=function(e){var t=e.dom().body;if(null==t)throw new Error("Body is not available yet");return le.fromDom(t)},Ge=function(){return(Ge=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};var Le,We=function(){return qe(0,0)},qe=function(e,t){return{major:e,minor:t}},Be={nu:qe,detect:function(e,t){var n=String(t).toLowerCase();return 0===e.length?We():function(e,t){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}}(e,t);if(!n)return{major:0,minor:0};var r=function(e){return Number(t.replace(n,"$"+e))};return qe(r(1),r(2))}(e,n)},unknown:We},Ve="Firefox",je=function(e,t){return function(){return t===e}},Fe=function(e){var t=e.current;return{current:t,version:e.version,isEdge:je("Edge",t),isChrome:je("Chrome",t),isIE:je("IE",t),isOpera:je("Opera",t),isFirefox:je(Ve,t),isSafari:je("Safari",t)}},ze={unknown:function(){return Fe({current:void 0,version:Be.unknown()})},nu:Fe,edge:g("Edge"),chrome:g("Chrome"),ie:g("IE"),opera:g("Opera"),firefox:g(Ve),safari:g("Safari")},Ye="Windows",Xe="Android",Ke="Solaris",$e="FreeBSD",Je="ChromeOS",Qe=function(e,t){return function(){return t===e}},Ze=function(e){var t=e.current;return{current:t,version:e.version,isWindows:Qe(Ye,t),isiOS:Qe("iOS",t),isAndroid:Qe(Xe,t),isOSX:Qe("OSX",t),isLinux:Qe("Linux",t),isSolaris:Qe(Ke,t),isFreeBSD:Qe($e,t),isChromeOS:Qe(Je,t)}},et={unknown:function(){return Ze({current:void 0,version:Be.unknown()})},nu:Ze,windows:g(Ye),ios:g("iOS"),android:g(Xe),linux:g("Linux"),osx:g("OSX"),solaris:g(Ke),freebsd:g($e),chromeos:g(Je)},tt=function(e,t){var n=String(t).toLowerCase();return G(e,function(e){return e.search(n)})},nt=function(e,n){return tt(e,n).map(function(e){var t=Be.detect(e.versionRegexes,n);return{current:e.name,version:t}})},rt=function(e,n){return tt(e,n).map(function(e){var t=Be.detect(e.versionRegexes,n);return{current:e.name,version:t}})},ot=function(e,t){return-1!==e.indexOf(t)},it=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,at=function(t){return function(e){return ot(e,t)}},ut=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return ot(e,"edge/")&&ot(e,"chrome")&&ot(e,"safari")&&ot(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,it],search:function(e){return ot(e,"chrome")&&!ot(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return ot(e,"msie")||ot(e,"trident")}},{name:"Opera",versionRegexes:[it,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:at("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:at("firefox")},{name:"Safari",versionRegexes:[it,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(ot(e,"safari")||ot(e,"mobile/"))&&ot(e,"applewebkit")}}],ct=[{name:"Windows",search:at("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return ot(e,"iphone")||ot(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:at("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:at("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:at("linux"),versionRegexes:[]},{name:"Solaris",search:at("sunos"),versionRegexes:[]},{name:"FreeBSD",search:at("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:at("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],st={browsers:g(ut),oses:g(ct)},lt=m(function(e,t){var n,r,o,i,a,u,c,s,l,f,d,p,m=st.browsers(),h=st.oses(),v=nt(m,e).fold(ze.unknown,ze.nu),y=rt(h,e).fold(et.unknown,et.nu);return{browser:v,os:y,deviceType:(r=v,o=e,i=t,a=(n=y).isiOS()&&!0===/ipad/i.test(o),u=n.isiOS()&&!a,c=n.isiOS()||n.isAndroid(),s=c||i("(pointer:coarse)"),l=a||!u&&c&&i("(min-device-width:768px)"),f=u||c&&!l,d=r.isSafari()&&n.isiOS()&&!1===/safari/i.test(o),p=!f&&!l&&!d,{isiPad:g(a),isiPhone:g(u),isTablet:g(l),isPhone:g(f),isTouch:g(s),isAndroid:n.isAndroid,isiOS:n.isiOS,isWebView:g(d),isDesktop:g(p)})}}(l.navigator.userAgent,function(e){return l.window.matchMedia(e).matches})),ft=Ie,dt=Se,pt=function(e,t){var n=e.dom();if(n.nodeType!==ft)return!1;var r=n;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},mt=function(e){return e.nodeType!==ft&&e.nodeType!==dt||0===e.childElementCount},ht=function(e,t){var n=void 0===t?l.document:t.dom();return mt(n)?w.none():w.from(n.querySelector(e)).map(le.fromDom)},vt=function(e,t){return e.dom()===t.dom()},yt=(lt.get().browser.isIE(),function(e,t,n){!function(e,t,n){if(!(N(n)||R(n)||I(n)))throw l.console.error("Invalid call to Attr.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")}(e.dom(),t,n)}),gt=function(e,t){var n=e.dom().getAttribute(t);return null===n?void 0:n},wt=function(e,t){var n=e.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},bt=function(e,t){e.dom().removeAttribute(t)},xt=function(e,t){var n,r,o=e.dom(),i=l.window.getComputedStyle(o).getPropertyValue(t),a=""!==i||null!=(r=Ue(n=e)?n.dom().parentNode:n.dom())&&r.ownerDocument.body.contains(r)?i:kt(o,t);return null===a?void 0:a},kt=function(e,t){return void 0!==(n=e).style&&S(n.style.getPropertyValue)?e.style.getPropertyValue(t):"";var n},Dt=function(e){return le.fromDom(e.dom().ownerDocument)},Tt=function(e){return w.from(e.dom().parentNode).map(le.fromDom)},Nt=function(e){return M(e.dom().childNodes,le.fromDom)},At=function(e){return t=0,n=e.dom().childNodes,w.from(n[t]).map(le.fromDom);var t,n},Rt=(fe("element","offset"),function(e,t){var n=parseFloat(xt(e,"opacity"));return n<1?De.rgbaColour(t.red(),t.green(),t.blue(),t.alpha()*n):t}),St=function(e){var t=Dt(e),n=Pe(t),r=[e].concat(function(e,t){for(var n=S(t)?t:c,r=e.dom(),o=[];null!==r.parentNode&&void 0!==r.parentNode;){var i=r.parentNode,a=le.fromDom(i);if(o.push(a),!0===n(a))break;r=i}return o}(e,function(e){return vt(e,n)})),o=P(r,function(n,r){if(1===n.alpha())return n;var e=xt(r,"background-color");return Re(e).bind(function(e){var t=Rt(r,e);return 0<t.alpha()?w.some(Ae(n,t)):w.none()}).getOr(n)},De.rgbaColour(0,0,0,0));return o.alpha()<1?Ae(o,De.white()):o},It=function(r,o){var e=xt(r,"color");return Re(e).bind(function(e){var t=Rt(r,e),n=t.alpha()<1?Ae(t,o):t;return w.some(n)})},Ct=function(e){var r=St(e);return It(e,r).map(function(e){var t=Ne(r),n=Ne(e);return Te(n,t)})},Ot=function(e,t){return Ct(e).filter(function(e){return e<t}).isSome()},Et=function(e){var t=Nt(e);return 0<U(t,function(e){return Ue(e)&&0<(t=e,t.dom().nodeValue).trim().length;var t}).length},_t={id:"D5c",wcag:"1.4.3",severity:$.error(),desckey:"a11y.d5c.description",url:"https://www.w3.org/TR/UNDERSTANDING-WCAG20/visual-audio-contrast-contrast.html",walkable:!0,check:function(e){var t=le.fromDom(e);return Et(t)&&Ot(t,7)},levels:[K.aaa()],htmlversions:[X.html4(),X.html5()]},Mt=function(e){var t=xt(e,"font-size"),n=new RegExp(".*px").test(t),r=t.match(/(\d*\.?\d*)(.*)/);return n&&null!==r?w.some(Number(r[1])):w.none()},Ht=function(e){var t,n,r=!("bold"!==(n=xt(e,"font-weight"))&&"bolder"!==n)||!!/^[0-9]*$/.test(t=n)&&700<=parseInt(t,10),o=Dt(e),i=Pe(o),a=Mt(i);return Mt(e).fold(c,function(t){return a.fold(function(){return 24<=t||r&&19<=t},function(e){return 1.5*e<=t||r&&1.2*e<=t})})},Ut={id:"D5a",wcag:"1.4.3",severity:$.error(),desckey:"a11y.d5a.description",url:"https://www.w3.org/TR/UNDERSTANDING-WCAG20/visual-audio-contrast-contrast.html",walkable:!0,check:function(e){var t=le.fromDom(e);return Et(t)&&Ht(t)&&Ot(t,3)},levels:[K.aa()],htmlversions:[X.html4(),X.html5()]},Pt={id:"D5b",wcag:"1.4.3",severity:$.error(),desckey:"a11y.d5b.description",url:"https://www.w3.org/TR/UNDERSTANDING-WCAG20/visual-audio-contrast-contrast.html",walkable:!0,check:function(e){var t=le.fromDom(e);return Et(t)&&!Ht(t)&&Ot(t,4.5)},levels:[K.aa()],htmlversions:[X.html4(),X.html5()]},Gt=function(e,t){return n=function(e){return pt(e,t)},U(Nt(e),n);var n},Lt=function(e,t){return n=t,o=void 0===(r=e)?l.document:r.dom(),mt(o)?[]:M(o.querySelectorAll(n),le.fromDom);var n,r,o},Wt={id:"H93",wcag:"4.1.1",severity:$.error(),desckey:"a11y.h93.description",url:"https://www.w3.org/TR/UNDERSTANDING-WCAG20/ensure-compat-parses.html",walkable:!1,check:function(e){var t=le.fromDom(e),n=Lt(t,"*[id]"),r=P(n,function(e,t){var n,r,o=gt(t,"id");if(void 0===o)return e;if(ge(e.problems,o))return e;if(ge(e.ids,o)){var i=e.ids[o];return Ge(Ge({},e),{problems:Ge(Ge({},e.problems),(n={},n[o]=i,n))})}return Ge(Ge({},e),{ids:Ge(Ge({},e.ids),(r={},r[o]=t.dom(),r))})},{ids:{},problems:{}});return ye(r.problems)},levels:[K.a(),K.aa(),K.aaa()],htmlversions:[X.html4(),X.html5()]},qt={id:"I1",wcag:"1.1.1",severity:$.error(),desckey:"a11y.i1.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/text-equiv-all.html",walkable:!0,check:function(e,t){var n=e.hasAttribute("alt"),r=n&&""===e.getAttribute("alt").trim(),o=e.hasAttribute("role")&&"presentation"===e.getAttribute("role");return J(e,"img")&&(!n||(t?n&&r&&!o||n&&!r&&o:r||o))},levels:[K.a(),K.aa(),K.aaa()],htmlversions:[X.html4(),X.html5()]},Bt={id:"I2",wcag:"1.1.1",severity:$.error(),desckey:"a11y.i2.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/text-equiv-all.html",walkable:!0,check:function(e){return J(e,"img[alt][src]")&&e.src.split("/").pop()===e.alt.split("/").pop()},levels:[K.a(),K.aa(),K.aaa()],htmlversions:[X.html4(),X.html5()]},Vt={id:"T1",wcag:"1.3.1",severity:$.error(),desckey:"a11y.t1.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!0,check:function(e){if(J(e,"table")){var t=e.querySelector("caption");return!t||J(t,":empty")}return!1},levels:[K.a(),K.aa(),K.aaa()],htmlversions:[X.html4(),X.html5()]},jt={id:"T2",wcag:"1.3.1",severity:$.warning(),desckey:"a11y.t2.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!0,check:function(e){return J(e,"table")&&(e.querySelector("[rowspan]")||e.querySelector("[colspan]"))&&!e.hasAttribute("summary")},levels:[K.a(),K.aa(),K.aaa()],htmlversions:[X.html4()]},Ft={id:"T3",wcag:"1.3.1",severity:$.error(),desckey:"a11y.t3.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!0,check:function(e){return J(e,"table")&&e.hasAttribute("summary")&&0<e.querySelectorAll("caption").length&&e.getAttribute("summary")===e.querySelector("caption").innerHTML},levels:[K.a(),K.aa(),K.aaa()],htmlversions:[X.html4(),X.html5()]},zt={id:"T4b",wcag:"1.3.1",severity:$.error(),desckey:"a11y.t4b.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!0,check:function(e){return"table"===e.nodeName.toLowerCase()&&0===e.querySelectorAll("th").length},levels:[K.a(),K.aa(),K.aaa()],htmlversions:[X.html4(),X.html5()]},Yt={id:"T4c",wcag:"1.3.1",severity:$.error(),desckey:"a11y.t4c.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!0,check:function(e){return"th"===e.nodeName.toLowerCase()&&(n=!1===(t=e).hasAttribute("scope"),r=!1===/row|col|rowgroup|colgroup/i.test(t.getAttribute("scope")),n||r);var t,n,r},levels:[K.a(),K.aa(),K.aaa()],htmlversions:[X.html4(),X.html5()]},Xt=function(e,t){return 0===e.querySelectorAll(t).length},Kt={id:"T4a",wcag:"1.3.1",severity:$.error(),desckey:"a11y.t4a.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!0,check:function(e){return"table"===e.nodeName.toLowerCase()&&(Xt(t=e,"tr")||Xt(t,"td"));var t},levels:[K.a(),K.aa(),K.aaa()],htmlversions:[X.html4(),X.html5()]},$t={all:g([Q,Z,ee,ae,ce,Ut,Pt,_t,Wt,qt,Bt,Vt,jt,Ft,Yt,Kt,zt])},Jt=function(){return $t.all().slice()},Qt=function(e){var t=e.getParam("a11y_advanced_options",!1,"boolean");return e.getParam("a11ychecker_allow_decorative_images",t,"boolean")},Zt=[K.a(),K.aa(),K.aaa()],en=[X.html4(),X.html5()],tn=function(e,t){var n=5===t?"":"-"+t+"x";return e.getParam("a11ychecker_issue_url_callback",function(e){return"https://www.tiny.cloud/docs"+n+"/plugins/a11ychecker/#"+e},"function")},nn={"a11y.d1.description":"This paragraph looks like a heading. If it is a heading, please select a heading level.","a11y.d1.repair.block.h1":"Heading 1","a11y.d1.repair.block.h2":"Heading 2","a11y.d1.repair.block.h3":"Heading 3","a11y.d1.repair.block.h4":"Heading 4","a11y.d1.repair.block.h5":"Heading 5","a11y.d1.repair.block.h6":"Heading 6","a11y.d1.repair.info":"Select a heading level:","a11y.d2.description":"Headings must be applied in sequential order. For example: Heading 1 should be followed by Heading 2, not Heading 3.","a11y.d3.description":"Adjacent links with the same URL should be merged into one link","a11y.d4.description":"The selected text appears to be a list. Lists should be formatted using a list tag.","a11y.d5a.description":"Large text must have a contrast ratio of at least 3:1","a11y.d5b.description":"Text must have a contrast ratio of at least 4.5:1","a11y.d5c.description":"Text must have a contrast ratio of at least 7:1","a11y.h93.description":"ID attribute must be unique","a11y.h93.repair.info":"Make ID unique","a11y.h93.repair.deduplicate.others":"Keep this ID and remove all others","a11y.h93.repair.deduplicate.this":"Remove this ID","a11y.h93.repair.deduplicate.all":"Remove all IDs","a11y.i1.description.decorativeAllowed":"Images must be marked as decorative or have an alternative text description","a11y.i1.description.decorativeNotAllowed":"Images must have an alternative text description. Decorative images are not allowed.","a11y.i1.repair.errors.duplicate":"Alternative text cannot be the same as the filename","a11y.i1.repair.errors.empty":"Alternative text cannot be empty","a11y.i1.repair.info.decorativeAllowed":"Or provide alternative text:","a11y.i1.repair.info.decorativeNotAllowed":"Provide alternative text:","a11y.i1.repair.checkboxlabel":"Make image decorative:","a11y.i1.repair.checkboxtext":"Image is decorative","a11y.i2.description":"Alternative text must not be the same as the image filename","a11y.i2.repair.info":"Provide alternative text:","a11y.t1.description":"Tables must have captions","a11y.t1.repair.errors.duplicate":"Table caption cannot be the same as the table summary","a11y.t1.repair.errors.empty":"Caption cannot be empty","a11y.t1.repair.info":"Provide caption:","a11y.t2.description":"Complex tables should have summaries","a11y.t2.repair.errors.duplicate":"Table summary cannot be the same as the table caption","a11y.t2.repair.errors.empty":"Summary cannot be empty","a11y.t2.repair.info":"Provide table summary:","a11y.t3.description":"Table caption and summary cannot have the same value","a11y.t4a.description":"Table elements must contain TR and TD tags","a11y.t4b.description":"Tables must have at least one header cell","a11y.t4b.repair.info":"Choose table header:","a11y.t4c.description":"Table headers must be applied to a row or a column","a11y.t4c.repair.header.col":"Header Column","a11y.t4c.repair.header.row":"Header Row","a11y.t4c.repair.info":"Select header scope:","a11y.t4c.repair.scope.col":"Column","a11y.t4c.repair.scope.colgroup":"Column Group","a11y.t4c.repair.scope.row":"Row","a11y.t4c.repair.scope.rowgroup":"Row Group","a11y.widget.counter":"Issue {0} of {1}","a11y.widget.ignore":"Ignore","a11y.widget.issue.none":"No accessibility issues detected","a11y.widget.next":"Next Issue","a11y.widget.previous":"Previous Issue","a11y.widget.legacyrepair":"Repair Issue","a11y.widget.repair":"Repair","a11y.widget.title":"Accessibility Checker","a11y.widget.help.title":"Click for more info",error:"Error",warning:"Warning",info:"Info",success:"Success"},rn=function(e){return nn[e]},on=function(e){return Array.isArray(e)?tinymce.translate([rn(e[0])].concat(e.slice(1))):tinymce.translate(rn(e))},an=function(e,t,n){var r=gt(e,t).concat(" ",n);un(e,t,r)},un=function(e,t,n){yt(e,t,n)},cn=function(e,t){return wt(e,t)?gt(e,t).split(" "):[]},sn=function(e,t,n){(wt(e,t)?an:un)(e,t,n)},ln=function(t,n){Tt(t).each(function(e){e.dom().insertBefore(n.dom(),t.dom())})},fn=function(e,t){var n;(n=e,w.from(n.dom().nextSibling).map(le.fromDom)).fold(function(){Tt(e).each(function(e){dn(e,t)})},function(e){ln(e,t)})},dn=function(e,t){e.dom().appendChild(t.dom())},pn=function(t,e){H(e,function(e){dn(t,e)})},mn=function(e){var t=e.dom();null!==t.parentNode&&t.parentNode.removeChild(t)},hn=function(e){var t,n=Nt(e);0<n.length&&(t=e,H(n,function(e){ln(t,e)})),mn(e)},vn=function(e){return ht(e)},yn=function(e,t){return n=function(e){return pt(e,t)},G(e.dom().childNodes,function(e){return n(le.fromDom(e))}).map(le.fromDom);var n},gn=function(e,t){return ht(t,e)},wn=function(e){return vn(e).isSome()},bn=(Le="ephox-foam".replace(/\./g,"-"),{resolve:function(e){return Le+"-"+e}}),xn=bn.resolve("styles"),kn="#"+xn,Dn={resolve:bn.resolve,injectStyles:function(e){if(!wn(kn)){var t=le.fromTag("link");yt(t,"id",xn),yt(t,"rel","stylesheet"),yt(t,"href",e);var n=vn("head").getOrDie("Head element could not be found.");dn(n,t)}},removeStyles:function(){if(wn(kn)){var e=vn("head").getOrDie("Head element could not be found."),t=gn(e,kn).getOrDie("The style element could not be removed");mn(t)}}},Tn=function(e,t,n){yt(e,t,n)},Nn=function(e,n,t,r,o,i){H(e,function(t){var e=An(t.severity,r,o,i).toArray().concat([n]);H(e,function(e){yt(t.element,e,1)})}),w.from(e[0]).each(function(e){Tn(e.element,t,e.severity)})},An=function(e,t,n,r){switch(e){case"info":return w.some(t);case"warning":return w.some(n);case"error":return w.some(r);default:return w.none()}},Rn=function(e,t,n,r){var o=Lt(e,"["+t+"]");H(o,function(e){bt(e,t)}),Tn(n,t,r)},Sn=function(e,n,r,o,i,a){var t=Lt(e,"["+n+"]");H(t,function(t){H([n,r,o,i,a],function(e){bt(t,e)}),In(t,n,r)})},In=function(e,t,n){bt(e,t),bt(e,n)},Cn=function(r){var o=r.editor();return{start:function(e){Nn(e,r.violation(),r.current(),r.info(),r.warn(),r.error())},moveTo:function(e,t){var n=le.fromDom(o.getBody());Rn(n,r.current(),e,t)},stop:function(){var e=le.fromDom(o.getBody());Sn(e,r.violation(),r.current(),r.info(),r.warn(),r.error())},exclude:function(e){In(e,r.violation(),r.current())}}},On="data-"+Dn.resolve("a11y-current-violation"),En="data-"+Dn.resolve("a11y-violation"),_n="data-"+Dn.resolve("a11y-severity-info"),Mn="data-"+Dn.resolve("a11y-severity-warn"),Hn="data-"+Dn.resolve("a11y-severity-error"),Un="data-"+Dn.resolve("accessibility-ignore"),Pn=xe(["editor","violation","current","info","warn","error"],[]),Gn={configure:function(t){t.on("init",function(e){H([Un,En,_n,Mn,Hn,On],function(e){t.serializer.addTempAttr(e)})})},ignoreAttr:g(Un),manager:function(e){return Cn(Pn({editor:e,violation:En,current:On,info:_n,warn:Mn,error:Hn}))}},Ln=function(e){var t,n,r,o=(t=e.getParam("a11ychecker_ignored_rules","","string"),W(tinymce.explode(t),function(e){return 0<e.length?[e.toUpperCase()]:[]})),i=(n=e.getParam("a11ychecker_level","","string"),_(Zt,n)?n:K.aa()),a=(r=e.getParam("a11ychecker_html_version","","string"),_(en,r)?r:X.html4()),u=Jt();return{rules:U(u,function(e){return!_(o,e.id.toUpperCase())&&_(e.levels,i)&&_(e.htmlversions,a)}),allowDecorativeImages:Qt(e)}},Wn=function(e){return{id:e.id.toUpperCase(),severity:e.severity,url:e.url,description:on(e.description),element:e.element.dom()}},qn=function(o){var e=Ln(o);Gn.configure(o);var t,n=m(!1),r=(t=e,{audit:function(e){return z(e,t)}}),i=Gn.manager(o),a=Gn.ignoreAttr(),u=[],c=0,s=function(){var n,e=r.audit(o.getBody()),t=(n=o,M(e,function(e){var t=e.rule;return{id:t.id.toUpperCase(),description:"I1"!==t.id?t.desckey:Qt(n)?t.desckey+".decorativeAllowed":t.desckey+".decorativeNotAllowed",element:le.fromDom(e.element),url:t.url,severity:t.severity}}));return U(t,function(e){var t=e.element,n=cn(t,a),r=o.getParam("a11ychecker_filter_issue",h,"function");return!_(n,e.id)&&r(Wn(e))})},l=function(e){return c=(c+=e)<0?c+u.length:c%u.length,i.moveTo(u[c].element,u[c].severity),o.selection.scrollIntoView(u[c].element.dom()),{summaryLabel:on(["a11y.widget.counter",c+1,u.length]),issue:u[c],index:c+1}},f=function(){return 0<u.length?w.some(l(0)):w.none()},d=function(){n.set(!0),u=s(),c=0},p=function(){i.stop(),n.set(!1),c=0,u=[]};return{scan:function(){return d(),i.start(u),f()},stepIssue:l,getIssues:function(){return u.slice(0)},getCurrent:f,getReport:function(){var e=n.get();try{return e||d(),M(u,Wn)}finally{e||p()}},resolveCurrent:function(e){return e&&sn(u[c].element,a,u[c].id),u=s(),f()},clear:p,isAuditing:function(){return n.get()}}},Bn={getInitialHtml:function(){return'<div role="presentation"></div><div style="clip: rect(1px, 1px, 1px, 1px);height: 1px;overflow: hidden;position: absolute;width: 1px;" aria-live="assertive" aria-relevant="additions" aria-atomic="true"></div>'},buildHtml:function(e,t){return'<div style="white-space:normal;">'+e+(t?'<button aria-label="Show specification details" role="button" style="display:inline;" tabindex="-1"><i class="mce-ico mce-i-help"></i><button>':"")+"</div>"},setSeverity:function(e,t){e.classes.remove("error"),e.classes.remove("warning"),e.classes.remove("success"),e.classes.add(t)}};function Vn(u){var c,t={},o=m(null),s=function(e,t,n){return Math.min(Math.max(e,t),n)},e=function(){var e,t,n,r,o=u.getBody();if(o&&c&&!0===c.state.get("visible")){var i=u.inline?u.getElement():u.getContentAreaContainer(),a=("BODY"===(r=o).nodeName&&(r=r.parentNode),r.scrollHeight>r.clientHeight?-25:-10);c.moveRel(i,"tr-tr"),c.moveBy(a,10),t=10,n=(e=c).layoutRect(),e.moveTo(s(n.x,0,l.window.innerWidth-n.w),s(n.y,t,l.window.innerHeight-n.h-t))}};return{actions:t,open:function(){(c=tinymce.ui.Factory.create("window",{title:on("a11y.widget.title"),spacing:5,padding:10,minWidth:300,layout:"flex",direction:"column",align:"stretch",items:[{type:"label",name:"index",text:"Index",padding:"0 0 5 0"},{type:"widget",classes:"widget infobox has-help",name:"description",onpostrender:function(e){e.control.getEl().innerHTML=Bn.getInitialHtml()},onclick:function(e){if(o.get()){e.stopPropagation(),e.preventDefault();var t=o.get();t&&l.window.open(t, "_blank", "noopener,noreferrer")}}},{type:"container",layout:"flex",direction:"column",align:"stretch",name:"repairer",padding:"5 0 5 0",items:[]},{type:"label",name:"validation",hidden:!0,classes:"error"},{type:"container",name:"footer",layout:"flex",direction:"row",spacing:3,items:[{type:"button",name:"repair",text:on("a11y.widget.legacyrepair"),onclick:"repair"},{type:"button",text:on("a11y.widget.ignore"),onclick:"ignore"},{type:"spacer",flex:1},{type:"button",text:on("a11y.widget.previous"),onclick:"prev"},{type:"button",text:on("a11y.widget.next"),autofocus:!0,subtype:"primary",onclick:"next"}]},{type:"container",name:"closer",layout:"flex",direction:"row",hidden:!0,items:[{type:"spacer",flex:1},{type:"button",subtype:"primary",name:"close",text:"Close",onclick:function(){c.close()}}]}]})).on("submit",function(e){e.preventDefault(),t.repair()}),c.modal=!1,c.on("open",function(){e()}),c.on("close",function(){t.close()}),c.on("execute",function(e){t[e.action]()}),u.on("remove",function(){c&&c.close()}),c.renderTo().reflow(),c.moveTo(0,0)},close:function(){c&&(c.close(),c=null)},reposition:e,find:function(e){return c.find(e)},setIndexText:function(e){c.find("#index").show().text(e)},hideIndex:function(){c.find("#index").hide()},setDescriptionText:function(e,t,n){var r=c.find("#description")[0].show();Bn.setSeverity(r,t),o.set(n),r.getEl().firstChild.innerHTML=Bn.buildHtml(e,n),r.updateLayoutRect(),r.reflow(),D.setEditorTimeout(u,function(){r.getEl().lastChild.textContent=e})},setRepairerChildren:function(e){var t;(t=c.find("#repairer")[0]).items().remove(),t.append(e),t.renderNew()},hideFooter:function(){c.find("#footer").hide()},showCloser:function(){var e=c.find("#closer")[0];e.show(),e.focus()},hideRepairer:function(){c.find("#repairer").hide()},showRepairer:function(){c.find("#repairer").show()},hideRepairButton:function(){c.find("#repair").hide()},showRepairButton:function(){c.find("#repair").show()},disableUi:function(e){c.find(e).disabled(!0)},enableUi:function(e){c.find(e).disabled(!1)},setValidationInformation:function(e){c.find("#validation").show().text(e)},hideValidation:function(){c.find("#validation").hide()},retrieveInputValue:function(e){return c.find("#"+e).value()}}}var jn=function(n){return{is:function(e){return n===e},isValue:h,isError:c,getOr:g(n),getOrThunk:g(n),getOrDie:g(n),or:function(e){return jn(n)},orThunk:function(e){return jn(n)},fold:function(e,t){return t(n)},map:function(e){return jn(e(n))},mapError:function(e){return jn(n)},each:function(e){e(n)},bind:function(e){return e(n)},exists:function(e){return e(n)},forall:function(e){return e(n)},toOption:function(){return w.some(n)}}},Fn=function(n){return{is:c,isValue:c,isError:h,getOr:u,getOrThunk:function(e){return e()},getOrDie:function(){return e=String(n),function(){throw new Error(e)}();var e},or:function(e){return e},orThunk:function(e){return e()},fold:function(e,t){return e(n)},map:function(e){return Fn(n)},mapError:function(e){return Fn(e(n))},each:a,bind:function(e){return Fn(n)},exists:c,forall:h,toOption:w.none}},zn={value:jn,error:Fn,fromOption:function(e,t){return e.fold(function(){return Fn(t)},jn)}},Yn=function(e){return t=e,n=!0,le.fromDom(t.dom().cloneNode(n));var t,n},Xn=function(e,t,n){var r=Dt(e),o=le.fromTag(n[t],r.dom()),i=Nt(e),a=M(i,Yn);pn(o,a);var u=Lt(o,"b,strong");return H(u,hn),ln(e,o),mn(e),zn.value(o)},Kn=function(e){var t=le.fromDom(e.dom().previousSibling);if(t){var n=Nt(e);pn(t,n),mn(e)}return zn.value(t)},$n=function(t,e,n,r){var o=n[e],i="all"===o||"this"===o;if("all"===o||"others"===o){var a=gt(t,"id"),u=r.getBody(),c=le.fromDom(u),s=Lt(c,'*[id="'+a+'"]'),l=U(s,function(e){return!vt(e,t)});H(l,function(e){bt(e,"id")})}return i&&bt(t,"id"),zn.value(t)},Jn=function(e,t){return zn.error(t(e))},Qn=function(e,t,n,r,o){return t===n?Jn(r,o):zn.value(e)},Zn=function(e,t,n,r,o,i){return 0===t.length?Jn(r,i):Qn(e,t,n,o,i)},er=function(e){var t=e.split("/");return 0<t.length?t.pop():""},tr=function(e,t,n,r,o,i){var a,u,c,s=(a=e,u="src",w.from(gt(a,u))).map(er).getOr(""),l=n[t+"_textinput"];return n[t+"_checkbox"]?(yt(c=e,"alt",""),yt(c,"role","presentation"),zn.value(c)):Zn(e,l,s,r,o,i).map(function(e){return yt(e,"alt",l),"presentation"===gt(e,"role")&&bt(e,"role"),e})},nr=function(e){return e.dom().textContent},rr=function(a,u,c,e,t,n){var r=gt(a,"summary");return Zn(a,c[u],r,e,t,n).map(function(e){var t,n,r,o,i=yn(a,"caption").fold(function(){return le.fromTag("caption")},function(e){var t;return(t=e).dom().textContent="",H(Nt(t),function(e){mn(e)}),e});return t=i,n=c[u],t.dom().textContent=n,o=i,At(r=e).fold(function(){dn(r,o)},function(e){r.dom().insertBefore(o.dom(),e.dom())}),e})},or=function(t,n,r,e,o,i){var a=gn(t,"caption").filter(He).map(nr).getOr("");return Zn(t,r[n],a,e,o,i).map(function(e){return yt(t,"summary",r[n]),e})},ir=function(e,t,n){var r=[];if("row"===n[t]){var o=le.fromDom(e.dom().rows[0]);r=Gt(o,"td")}else"col"===n[t]&&H(e.dom().rows,function(e){yn(le.fromDom(e),"td").each(function(e){r.push(e)})});return H(r,function(t){var n=le.fromTag("th");H(t.dom().attributes,function(e){yt(n,e.name,gt(t,e.name))}),n.dom().innerHTML=t.dom().innerHTML,fn(t,n),mn(t)}),zn.value(e)},ar=function(e,t,n){return yt(e,"scope",n[t]),zn.value(e)},ur=function(e,t){return{type:"label",forName:e,text:t}},cr=function(e,t,n){return{type:"listbox",name:e,values:M(t,function(e){return{text:n(e.text),value:e.value}})}},sr=function(e,t){return{type:"textbox",name:e,value:t}},lr=function(e,t){return{type:"checkbox",name:e,text:t}},fr=xe(["ui","repair","handler"],[]),dr=function(e,t){var n=e.id,r="#"+n+"_textinput",o=t.find(r)[0],i="#"+n+"_checkbox",a=t.find(i)[0],u=function(){!0===a.value()?(t.disableUi(r),t.enableUi("#repair")):(t.enableUi(r),0<o.value().length?(t.enableUi("#repair"),t.enableUi(i)):(t.enableUi(i),t.disableUi("#repair")))};o.on("input",u),a.on("change",u),u()},pr=function(e,t,n,r){var o,i=gt(r,"alt"),a=[ur(t+"_textinput_label",n((o="a11y.i1.repair.info",e?o+".decorativeAllowed":o+".decorativeNotAllowed"))),sr(t+"_textinput",i)];return e?L([[ur(t+"_checkbox_label",n("a11y.i1.repair.checkboxlabel")),lr(t+"_checkbox",n("a11y.i1.repair.checkboxtext"))],a]):a},mr=function(e,t,n,r,o){var i,a,u=((i={})[r+"_textinput"]=t.retrieveInputValue(r+"_textinput"),i),c=e?((a={})[r+"_checkbox"]=t.retrieveInputValue(r+"_checkbox"),a):{},s=Ge(Ge({},u),c);return tr(n,r,s,"a11y.i1.repair.errors.empty","a11y.i1.repair.errors.duplicate",o)};function hr(o,i){var a,u,c,s=tn(o,4),l=(c=Qt(u=o),{H93:w.some(fr({ui:w.some(function(e,t){return[ur("H93_selectbox_label",e("a11y.h93.repair.info")),cr("H93_selectbox",[{text:"a11y.h93.repair.deduplicate.others",value:"others"},{text:"a11y.h93.repair.deduplicate.this",value:"this"},{text:"a11y.h93.repair.deduplicate.all",value:"all"}],e)]}),repair:function(e,t,n,r){var o=n.retrieveInputValue("H93_selectbox");return $n(e,t,{H93:o},u)},handler:w.none()})),I1:w.some(fr({ui:w.some(function(e,t){return pr(c,"I1",e,t)}),repair:function(e,t,n,r){return mr(c,n,e,t,r)},handler:c?w.some(dr):w.none()})),I2:w.some(fr({ui:w.some(function(e,t){return pr(c,"I2",e,t)}),repair:function(e,t,n,r){return mr(c,n,e,t,r)},handler:c?w.some(dr):w.none()})),T1:w.some(fr({ui:w.some(function(e,t){return[ur("table-caption",e("a11y.t1.repair.info")),sr("table-caption","")]}),repair:function(e,t,n,r){var o=n.retrieveInputValue("table-caption");return rr(e,t,{T1:o},"a11y.t1.repair.errors.empty","a11y.t1.repair.errors.duplicate",r)},handler:w.none()})),T2:w.some(fr({ui:w.some(function(e,t){return[ur("table-summary",e("a11y.t2.repair.info")),sr("table-summary","")]}),repair:function(e,t,n,r){var o=n.retrieveInputValue("table-summary");return or(e,t,{T2:o},"a11y.t2.repair.errors.empty","a11y.t2.repair.errors.duplicate",r)},handler:w.none()})),T3:w.some(fr({ui:w.some(function(e,t){var n=yn(t,"caption").fold(function(){return""},function(e){return e.dom().innerHTML});return[ur("table-caption",e("a11y.t1.repair.info")),sr("table-caption",n)]}),repair:function(e,t,n,r){var o=n.retrieveInputValue("table-caption");return rr(e,t,{T3:o},"a11y.t1.repair.errors.empty","a11y.t1.repair.errors.duplicate",r)},handler:w.none()})),T4A:w.none(),T4B:w.some(fr({ui:w.some(function(e,t){return[ur("table-headers",e("a11y.t4b.repair.info")),cr("table-headers",[{text:"a11y.t4c.repair.header.row",value:"row"},{text:"a11y.t4c.repair.header.col",value:"col"}],e)]}),repair:function(e,t,n,r){var o=n.retrieveInputValue("table-headers");return ir(e,t,{T4B:o})},handler:w.none()})),T4C:w.some(fr({ui:w.some(function(e,t){return[ur("scope-type",e("a11y.t4c.repair.info")),cr("scope-type",[{text:"a11y.t4c.repair.scope.row",value:"row"},{text:"a11y.t4c.repair.scope.col",value:"col"},{text:"a11y.t4c.repair.scope.rowgroup",value:"rowgroup"},{text:"a11y.t4c.repair.scope.colgroup",value:"colgroup"}],e)]}),repair:function(e,t,n,r){var o=n.retrieveInputValue("scope-type");return ar(e,t,{T4C:o})},handler:w.none()})),D1:w.some(fr({ui:w.some(function(e,t){return[ur("heading-type",e("a11y.d1.repair.info")),cr("heading-type",[{text:"a11y.d1.repair.block.h1",value:"h1"},{text:"a11y.d1.repair.block.h2",value:"h2"},{text:"a11y.d1.repair.block.h3",value:"h3"},{text:"a11y.d1.repair.block.h4",value:"h4"},{text:"a11y.d1.repair.block.h5",value:"h5"},{text:"a11y.d1.repair.block.h6",value:"h6"}],e)]}),repair:function(e,t,n,r){var o=n.retrieveInputValue("heading-type");return Xn(e,t,{D1:o})},handler:w.none()})),D2:w.none(),D3:w.some(fr({ui:w.none(),repair:function(e,t,n,r){return Kn(e)},handler:w.none()}))}),e=function(){n(),i.scan().fold(function(){return p()},function(e){return r(e.issue,e.index)})},t=function(){a&&a.close()},n=function(){(a=Vn(o)).actions.close=function(){i.clear()},a.actions.ignore=function(){d(!0)},a.actions.prev=v,a.actions.next=y,a.open()},f=function(){a&&a.reposition()},r=function(t,e){a.hideValidation();var n,r=s(t.id);a.setIndexText(on(["a11y.widget.counter",e,i.getIssues().length])),a.setDescriptionText(on(t.description),t.severity,r),(n=t.id,void 0!==l[n]?l[n]:w.none()).fold(m,function(e){return h(e,t)}),f(),o.selection.scrollIntoView(t.element.dom())},d=function(e){i.resolveCurrent(e).fold(function(){return p()},function(e){r(e.issue,e.index)}),f()},p=function(){a.hideIndex(),a.hideRepairer(),a.hideValidation(),a.hideFooter(),a.showCloser(),a.setDescriptionText(on("a11y.widget.issue.none"),"success")},m=function(){a.hideRepairer(),a.hideRepairButton()},h=function(e,r){e.ui().fold(m,function(e,t,n){a.setRepairerChildren(e(on,r.element)),a.showRepairer()}),a.showRepairButton(),e.handler().each(function(e){return e(r,a)}),a.actions.repair=function(){o.undoManager.transact(function(){e.repair()(r.element,r.id,a,on).fold(function(e){a.setValidationInformation(e),f()},function(){return d(!1)})})}},v=function(){var e=i.stepIssue(-1);r(e.issue,e.index)},y=function(){var e=i.stepIssue(1);r(e.issue,e.index)};return{toggleAuditing:function(){i.isAuditing()?t():e()},startAuditing:e,stopAuditing:t,positionDialog:f}}var vr,yr,gr=function(e,t){var n=t.ui.registry.getAll().icons;return w.from(n[e]).orThunk(function(){return w.from(n["temporary-placeholder"])}).getOr("!not found!")},wr=function(e,t,n,r,o){var i,a,u,c=on(n),s=on(t);return'<div class="accessibility-issue__description"><div><div><div class="tox-icon">'+gr("info"===n?"info":"warning",e)+"</div><h2>"+c+"</h2></div><p>"+s+"</p></div><div>"+(i=r,a=e,u='<a href="'+o+'" title="'+on("a11y.widget.help.title")+'" class="tox-button tox-button--naked tox-button--icon" target="_blank" rel="noopener noreferrer" data-alloy-tabstop="true" tabindex="-1"><div class="tox-icon">'+gr(i,a)+"</div></a>","help"===i?u:'<div class="tox-icon">'+gr(i,a)+"</div>")+"</div></div>"},br=function(e,t,n,r){return{type:"selectbox",label:t,name:e,items:M(n,function(e){return{text:r(e.text),value:e.value}})}},xr=function(e,t){return{type:"input",name:e,label:t}},kr=function(e,t,n){return{type:"label",label:t,items:[{type:"checkbox",name:e,label:n}]}},Dr=function(e){return{type:"htmlpanel",html:'<div class="tox-form__group--error">'+e+"</div>"}},Tr=function(e,t){return{title:on("a11y.widget.title"),body:{type:"panel",items:[{type:"panel",classes:["tox-accessibility-issue","accessibility-issue--success"],items:[{type:"htmlpanel",html:wr(e,"a11y.widget.issue.none","success","checkmark"),presets:"presentation"}]}]},buttons:[{type:"submit",name:"ok",text:"OK",primary:!0}],onSubmit:function(e){return e.close()},onClose:t}},Nr=function(e,t,n){e.redial(t),e.focus(n)};(yr=vr||(vr={})).Next="next",yr.Prev="prev",yr.Ignore="ignore",yr.Ok="ok",yr.Repair="repair";var Ar=function(e,c,s,i,l,f){var d=e.issue,p=e.summaryLabel,u=tn(l,5),m=function(e){return Ar(e,c,s,w.none(),l,f)},h=function(u){return function(t,e){var n,r,o,i=e.name;e.value;if(i===vr.Next||i===vr.Prev){var a=c.stepIssue(i===vr.Next?1:-1);Nr(t,m(a),i)}else i===vr.Ignore?c.resolveCurrent(!0).fold(function(){return Nr(t,Tr(l,f),vr.Ok)},function(e){return Nr(t,m(e),vr.Ignore)}):i===vr.Repair&&(n=t,r=function(e){Nr(n,Ar({issue:d,summaryLabel:p},c,s,w.some(e),l,f),vr.Repair)},o=function(){return c.resolveCurrent(!1).fold(function(){return c.scan().fold(function(){return Nr(n,Tr(l,f),vr.Ok)},function(e){return Nr(n,m(e),vr.Ignore)})},function(e){return Nr(n,m(e),vr.Ignore)})},u.each(function(e){e.repair(d.element,d.id,ve(n.getData(),function(e,t){return n=t,r=d.id,o=n,a=0,""===(i=r)||!(o.length<i.length)&&o.substr(a,a+i.length)===i;var n,r,o,i,a}).t,function(e){return e.fold(r,o)})}))}},a=function(e,t,n){var r,o,i="warning"===(r=d.severity)?"warn":r,a=t.map(function(){return{type:"panel",classes:["accessibility-issue__repair"],items:t.map(function(e){return e.items}).getOr([])}}).toArray();return{title:on("a11y.widget.title"),body:{type:"panel",classes:["tox-accessibility-issue","accessibility-issue--"+i],items:function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r}([{type:"panel",classes:["accessibility-issue__header"],items:[{type:"htmlpanel",html:"<h1>"+p+"</h1>",presets:"presentation"},{type:"button",name:vr.Prev,text:on("a11y.widget.previous"),icon:"action-prev",borderless:!0},{type:"button",name:vr.Next,text:on("a11y.widget.next"),icon:"action-next",borderless:!0}]},{type:"htmlpanel",html:wr(l,d.description,d.severity,"help",u(d.id)),presets:"presentation"}],a)},buttons:[{type:"custom",name:vr.Ignore,text:on("a11y.widget.ignore")},{type:"custom",name:vr.Repair,text:on("a11y.widget.repair"),disabled:n,primary:!0}],initialData:Ge({},t.map(function(e){return e.initialData}).getOr({})),onAction:h(e),onChange:(o=e,function(t){return o.each(function(e){e.onChange.each(function(e){return e(t,t.getData(),d)}),e.shouldDisableRepair.each(function(e){e(t.getData(),d)?t.disable(vr.Repair):t.enable(vr.Repair)})})}),onClose:f}};return s(d.id).fold(function(){return a(w.none(),w.none(),!0)},function(e){var t,r,n=(t=e,r=d,i.fold(function(){return t.ui.map(function(e){return e(r.id,r.element)})},function(n){return t.ui.map(function(e){var t=e(r.id,r.element);return{items:t.items.concat([Dr(n)]),initialData:t.initialData}})})),o=e.shouldDisableRepair.bind(function(t){return n.map(function(e){return t(e.initialData,d)})}).getOr(!1);return a(w.some(e),n,o)})},Rr=function(e){return e+"_checkbox"},Sr=function(e){return e+"_textinput"},Ir=function(e,t){var n=t.id,r=!0===e[Rr(n)],o=0<e[Sr(n)].length;return!r&&!o},Cr=function(e,t,n){var r=n.id,o=Rr(r),i=Sr(r);!0===t[o]?(e.disable(i),e.enable(vr.Repair)):(e.enable(i),0<t[i].length?(e.enable(vr.Repair),e.enable(o)):(e.enable(o),e.disable(vr.Repair)))},Or=function(e,t){var n,r=xr(Sr(t),on((n="a11y.i1.repair.info",e?n+".decorativeAllowed":n+".decorativeNotAllowed")));return e?[kr(Rr(t),on("a11y.i1.repair.checkboxlabel"),on("a11y.i1.repair.checkboxtext")),r]:[r]},Er=function(e,t,n){var r,o,i=gt(e,"alt"),a=t?((r={})[Rr(n)]=!1,r):{},u=((o={})[Sr(n)]=i||"",o);return Ge(Ge({},u),a)},_r=function(s,l){var f=m(w.none()),d=function(){f.set(w.none()),l.clear()},e=function(){var t,n,r,o,i,a,u,c,e=(t=function(e){return s.windowManager.open(e,{inline:"toolbar",ariaAttrs:!0})},n=l,u=Qt(a=s),c={H93:w.some({ui:w.some(function(e,t){var n;return{items:[br(e,on("a11y.h93.repair.info"),[{text:"a11y.h93.repair.deduplicate.others",value:"others"},{text:"a11y.h93.repair.deduplicate.this",value:"this"},{text:"a11y.h93.repair.deduplicate.all",value:"all"}],on)],initialData:(n={},n[e]="",n)}}),repair:function(e,t,n,r){a.undoManager.transact(function(){r($n(e,t,n,a))})},shouldDisableRepair:w.none(),onChange:w.none()}),I1:w.some({ui:w.some(function(e,t){return{items:Or(u,e),initialData:Er(t,u,e)}}),repair:function(e,t,n,r){a.undoManager.transact(function(){r(tr(e,t,n,"a11y.i1.repair.errors.empty","a11y.i1.repair.errors.duplicate",on))})},shouldDisableRepair:u?w.some(Ir):w.none(),onChange:u?w.some(Cr):w.none()}),I2:w.some({ui:w.some(function(e,t){return{items:Or(u,e),initialData:Er(t,u,e)}}),repair:function(e,t,n,r){a.undoManager.transact(function(){r(tr(e,t,n,"a11y.i1.repair.errors.empty","a11y.i1.repair.errors.duplicate",on))})},shouldDisableRepair:u?w.some(Ir):w.none(),onChange:u?w.some(Cr):w.none()}),T1:w.some({ui:w.some(function(e,t){var n;return{items:[xr(e,on("a11y.t1.repair.info"))],initialData:(n={},n[e]="",n)}}),repair:function(e,t,n,r){a.undoManager.transact(function(){r(rr(e,t,n,"a11y.t1.repair.errors.empty","a11y.t1.repair.errors.duplicate",on))})},shouldDisableRepair:w.none(),onChange:w.none()}),T2:w.some({ui:w.some(function(e,t){var n;return{items:[xr(e,on("a11y.t2.repair.info"))],initialData:(n={},n[e]="",n)}}),repair:function(e,t,n,r){a.undoManager.transact(function(){r(or(e,t,n,"a11y.t2.repair.errors.empty","a11y.t2.repair.errors.duplicate",on))})},shouldDisableRepair:w.none(),onChange:w.none()}),T3:w.some({ui:w.some(function(e,t){var n,r=yn(t,"caption").fold(function(){return""},function(e){return e.dom().innerHTML});return{items:[xr(e,on("a11y.t1.repair.info"))],initialData:(n={},n[e]=r,n)}}),repair:function(e,t,n,r){a.undoManager.transact(function(){r(rr(e,t,n,"a11y.t1.repair.errors.empty","a11y.t1.repair.errors.duplicate",on))})},shouldDisableRepair:w.none(),onChange:w.none()}),T4A:w.none(),T4B:w.some({ui:w.some(function(e,t){var n;return{items:[br(e,on("a11y.t4b.repair.info"),[{text:"a11y.t4c.repair.header.row",value:"row"},{text:"a11y.t4c.repair.header.col",value:"col"}],on)],initialData:(n={},n[e]="",n)}}),repair:function(e,t,n,r){a.undoManager.transact(function(){r(ir(e,t,n))})},shouldDisableRepair:w.none(),onChange:w.none()}),T4C:w.some({ui:w.some(function(e,t){var n;return{items:[br(e,on("a11y.t4c.repair.info"),[{text:"a11y.t4c.repair.scope.row",value:"row"},{text:"a11y.t4c.repair.scope.col",value:"col"},{text:"a11y.t4c.repair.scope.rowgroup",value:"rowgroup"},{text:"a11y.t4c.repair.scope.colgroup",value:"colgroup"}],on)],initialData:(n={},n[e]="",n)}}),repair:function(e,t,n,r){a.undoManager.transact(function(){r(ar(e,t,n))})},shouldDisableRepair:w.none(),onChange:w.none()}),D1:w.some({ui:w.some(function(e,t){var n;return{items:[br(e,on("a11y.d1.repair.info"),[{text:"a11y.d1.repair.block.h1",value:"h1"},{text:"a11y.d1.repair.block.h2",value:"h2"},{text:"a11y.d1.repair.block.h3",value:"h3"},{text:"a11y.d1.repair.block.h4",value:"h4"},{text:"a11y.d1.repair.block.h5",value:"h5"},{text:"a11y.d1.repair.block.h6",value:"h6"}],on)],initialData:(n={},n[e]="",n)}}),repair:function(e,t,n,r){a.undoManager.transact(function(){r(Xn(e,t,n))})},shouldDisableRepair:w.none(),onChange:w.none()}),D2:w.none(),D3:w.some({ui:w.none(),repair:function(e,t,n,r){a.undoManager.transact(function(){r(Kn(e))})},shouldDisableRepair:w.none(),onChange:w.none()})},r=function(e){return c.hasOwnProperty(e)?c[e]:w.none()},o=s,i=d,n.scan().fold(function(){return t(Tr(o,i))},function(e){return t(Ar(e,n,r,w.none(),o,i))}));f.set(w.some(e))},t=function(e){return e.close()};return s.ui.registry.addButton("a11ycheck",{tooltip:on("a11y.widget.title"),icon:"accessibility-check",onAction:e}),s.ui.registry.addMenuItem("a11ycheck",{icon:"accessibility-check",text:on("a11y.widget.title"),onAction:e}),function(){return f.get().fold(e,t)}},Mr=function(t,e){if(x(tinymce,"4.3.13"))return k('The "a11ychecker" plugin requires at least 4.3.13 version of TinyMCE.'),function(){};var n,r,o,i=qn(t),a=t.a11ychecker_css_url,u=a||e+"/css/annotations.css";return x(tinymce,"5.0.0")?(o=hr(r=t,i),r.addButton("a11ycheck",{tooltip:on("a11y.widget.title"),icon:"a11y",onclick:o.toggleAuditing}),r.addMenuItem("a11ycheck",{context:"tools",icon:"a11y",text:on("a11y.widget.title"),onclick:o.toggleAuditing}),r.on("ResizeWindow",function(){D.requestAnimationFrame(function(){o.positionDialog()})}),r.on("ScrollWindow",function(){o.positionDialog()}),r.on("ResizeEditor",function(){o.positionDialog()}),r.on("click",function(){o.stopAuditing()}),r.on("keydown",function(){o.stopAuditing()}),n=o.toggleAuditing):n=_r(t,i),t.on("init",function(e){t.dom.loadCSS(u)}),t.on("remove",function(e){1===tinymce.editors.length&&Dn.removeStyles()}),{getReport:i.getReport,toggleaudit:n}};tinymce.PluginManager.requireLangPack("a11ychecker","ar,bg_BG,ca,cs,da,de,el,es,eu,fa,fi,fr_FR,he_IL,hr,hu_HU,id,it,ja,kk,ko_KR,nb_NO,nl,pl,pt_PT,pt_BR,ro,ru,sk,sl_SI,sv_SE,th_TH,tr,uk,zh_TW,zh_CN"),tinymce.PluginManager.add("a11ychecker",Mr)}(window);
