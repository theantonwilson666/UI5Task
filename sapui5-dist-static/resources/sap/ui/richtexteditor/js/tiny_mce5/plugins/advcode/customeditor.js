/* Ephox advanced code plugin
 *
 * Copyright 2010-2016 Ephox Corporation.  All rights reserved.
 *
 * Version: 2.2.0-140
 */

!function(d){"use strict";var n,t,r,e={},o={exports:e};t=e,r=o,n=void 0,function(e){"object"==typeof t&&void 0!==r?r.exports=e():"function"==typeof n&&n.amd?n([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).EphoxContactWrapper=e()}(function(){return function i(u,c,s){function f(n,e){if(!c[n]){if(!u[n]){var t=!1;if(!e&&t)return t(n,!0);if(a)return a(n,!0);var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}var o=c[n]={exports:{}};u[n][0].call(o.exports,function(e){return f(u[n][1][e]||e)},o,o.exports,i,u,c,s)}return c[n].exports}for(var a=!1,e=0;e<s.length;e++)f(s[e]);return f}({1:[function(e,n,t){var r,o,i=n.exports={};function u(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}function s(n){if(r===setTimeout)return setTimeout(n,0);if((r===u||!r)&&setTimeout)return r=setTimeout,setTimeout(n,0);try{return r(n,0)}catch(e){try{return r.call(null,n,0)}catch(e){return r.call(this,n,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:u}catch(e){r=u}try{o="function"==typeof clearTimeout?clearTimeout:c}catch(e){o=c}}();var f,a=[],l=!1,d=-1;function m(){l&&f&&(l=!1,f.length?a=f.concat(a):d=-1,a.length&&p())}function p(){if(!l){var e=s(m);l=!0;for(var n=a.length;n;){for(f=a,a=[];++d<n;)f&&f[d].run();d=-1,n=a.length}f=null,l=!1,function(n){if(o===clearTimeout)return clearTimeout(n);if((o===c||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(n);try{o(n)}catch(e){try{return o.call(null,n)}catch(e){return o.call(this,n)}}}(e)}}function h(e,n){this.fun=e,this.array=n}function v(){}i.nextTick=function(e){var n=new Array(arguments.length-1);if(1<arguments.length)for(var t=1;t<arguments.length;t++)n[t-1]=arguments[t];a.push(new h(e,n)),1!==a.length||l||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],2:[function(e,l,n){(function(t){!function(e){var n=setTimeout;function r(){}function i(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],a(e,this)}function o(t,r){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,i._immediateFn(function(){var e=1===t._state?r.onFulfilled:r.onRejected;if(null!==e){var n;try{n=e(t._value)}catch(e){return void c(r.promise,e)}u(r.promise,n)}else(1===t._state?u:c)(r.promise,t._value)})):t._deferreds.push(r)}function u(n,e){try{if(e===n)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if(e instanceof i)return n._state=3,n._value=e,void s(n);if("function"==typeof t)return void a((r=t,o=e,function(){r.apply(o,arguments)}),n)}n._state=1,n._value=e,s(n)}catch(e){c(n,e)}var r,o}function c(e,n){e._state=2,e._value=n,s(e)}function s(e){2===e._state&&0===e._deferreds.length&&i._immediateFn(function(){e._handled||i._unhandledRejectionFn(e._value)});for(var n=0,t=e._deferreds.length;n<t;n++)o(e,e._deferreds[n]);e._deferreds=null}function f(e,n,t){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof n?n:null,this.promise=t}function a(e,n){var t=!1;try{e(function(e){t||(t=!0,u(n,e))},function(e){t||(t=!0,c(n,e))})}catch(e){if(t)return;t=!0,c(n,e)}}i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,n){var t=new this.constructor(r);return o(this,new f(e,n,t)),t},i.all=function(e){var c=Array.prototype.slice.call(e);return new i(function(r,o){if(0===c.length)return r([]);var i=c.length;function u(n,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void t.call(e,function(e){u(n,e)},o)}c[n]=e,0==--i&&r(c)}catch(e){o(e)}}for(var e=0;e<c.length;e++)u(e,c[e])})},i.resolve=function(n){return n&&"object"==typeof n&&n.constructor===i?n:new i(function(e){e(n)})},i.reject=function(t){return new i(function(e,n){n(t)})},i.race=function(o){return new i(function(e,n){for(var t=0,r=o.length;t<r;t++)o[t].then(e,n)})},i._immediateFn="function"==typeof t?function(e){t(e)}:function(e){n(e,0)},i._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},i._setImmediateFn=function(e){i._immediateFn=e},i._setUnhandledRejectionFn=function(e){i._unhandledRejectionFn=e},void 0!==l&&l.exports?l.exports=i:e.Promise||(e.Promise=i)}(this)}).call(this,e("timers").setImmediate)},{timers:3}],3:[function(s,e,f){(function(e,n){var r=s("process/browser.js").nextTick,t=Function.prototype.apply,o=Array.prototype.slice,i={},u=0;function c(e,n){this._id=e,this._clearFn=n}f.setTimeout=function(){return new c(t.call(setTimeout,window,arguments),clearTimeout)},f.setInterval=function(){return new c(t.call(setInterval,window,arguments),clearInterval)},f.clearTimeout=f.clearInterval=function(e){e.close()},c.prototype.unref=c.prototype.ref=function(){},c.prototype.close=function(){this._clearFn.call(window,this._id)},f.enroll=function(e,n){clearTimeout(e._idleTimeoutId),e._idleTimeout=n},f.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},f._unrefActive=f.active=function(e){clearTimeout(e._idleTimeoutId);var n=e._idleTimeout;0<=n&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},n))},f.setImmediate="function"==typeof e?e:function(e){var n=u++,t=!(arguments.length<2)&&o.call(arguments,1);return i[n]=!0,r(function(){i[n]&&(t?e.apply(null,t):e.call(null),f.clearImmediate(n))}),n},f.clearImmediate="function"==typeof n?n:function(e){delete i[e]}}).call(this,s("timers").setImmediate,s("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(e,n,t){var r=e("promise-polyfill"),o="undefined"!=typeof window?window:Function("return this;")();n.exports={boltExport:o.Promise||r}},{"promise-polyfill":2}]},{},[4])(4)});var i,u,c,s,f,a=o.exports.boltExport,l=function(){},y=function(e){return function(){return e}},m=y(!1),p=y(!0),h=function(){return v},v=(i=function(e){return e.isNone()},s={fold:function(e,n){return e()},is:m,isSome:m,isNone:p,getOr:c=function(e){return e},getOrThunk:u=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:y(null),getOrUndefined:y(void 0),or:c,orThunk:u,map:h,each:l,bind:h,exists:m,forall:p,filter:h,equals:i,equals_:i,toArray:function(){return[]},toString:y("none()")},Object.freeze&&Object.freeze(s),s),g=function(t){var e=y(t),n=function(){return o},r=function(e){return e(t)},o={fold:function(e,n){return n(t)},is:function(e){return t===e},isSome:p,isNone:m,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:n,orThunk:n,map:function(e){return g(e(t))},each:function(e){e(t)},bind:r,exists:r,forall:r,filter:function(e){return e(t)?o:v},toArray:function(){return[t]},toString:function(){return"some("+t+")"},equals:function(e){return e.is(t)},equals_:function(e,n){return e.fold(m,function(e){return n(t,e)})}};return o},w={some:g,none:h,from:function(e){return null==e?v:g(e)}},T=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:y(e)}},_={fromHtml:function(e,n){var t=(n||d.document).createElement("div");if(t.innerHTML=e,!t.hasChildNodes()||1<t.childNodes.length)throw d.console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return T(t.childNodes[0])},fromTag:function(e,n){var t=(n||d.document).createElement(e);return T(t)},fromText:function(e,n){var t=(n||d.document).createTextNode(e);return T(t)},fromDom:T,fromPoint:function(e,n,t){var r=e.dom();return w.from(r.elementFromPoint(n,t)).map(T)}},O=function(){var t={},c={};tinymce.Resource={add:function(e,n){c[e]&&(c[e](n),delete c[e]),t[e]=a.resolve(n)},load:function(r,o){var i='Script at URL "'+o+'" failed to load',u='Script at URL "'+o+"\" did not call `tinymce.Resource.add('"+r+"', data)` within 1 second";if(void 0!==t[r])return t[r];var e=new a(function(e,n){var t=function(e,n,t){void 0===t&&(t=1e3);var r=!1,o=null,i=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];r||(r=!0,null!==o&&(d.clearTimeout(o),o=null),t.apply(null,e))}},u=i(e),c=i(n);return{reject:c,resolve:u,start:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];r||(o=d.setTimeout(function(){return c.apply(null,e)},t))}}}(e,n);c[r]=t.resolve,tinymce.ScriptLoader.loadScripts([o],function(){return t.start(u)},function(){return t.reject(i)})});return t[r]=e}}},E=function(e,n){return tinymce.Resource||O(),tinymce.Resource.load(e,n)},N=function(t,r){return new a(function(e,n){(r||tinymce.DOM.styleSheetLoader).load(t,e,n)})},x=(f="function",function(e){return function(e){if(null===e)return"null";var n=typeof e;return"object"===n&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===n&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":n}(e)===f}),S=Array.prototype.slice,b=(x(Array.from)&&Array.from,function(e,n,t){return 0!=(e.compareDocumentPosition(n)&t)}),I=function(e,n){return b(e,n,d.Node.DOCUMENT_POSITION_CONTAINED_BY)},R=function(e){var n=e,t=function(){return n};return{get:t,set:function(e){n=e},clone:function(){return R(t())}}},D=function(){return A(0,0)},A=function(e,n){return{major:e,minor:n}},C={nu:A,detect:function(e,n){var t=String(n).toLowerCase();return 0===e.length?D():function(e,n){var t=function(e,n){for(var t=0;t<e.length;t++){var r=e[t];if(r.test(n))return r}}(e,n);if(!t)return{major:0,minor:0};var r=function(e){return Number(n.replace(t,"$"+e))};return A(r(1),r(2))}(e,t)},unknown:D},L="Edge",k="Chrome",F="Opera",M="Firefox",j="Safari",P=function(e,n){return function(){return n===e}},U=function(e){var n=e.current;return{current:n,version:e.version,isEdge:P(L,n),isChrome:P(k,n),isIE:P("IE",n),isOpera:P(F,n),isFirefox:P(M,n),isSafari:P(j,n)}},W={unknown:function(){return U({current:void 0,version:C.unknown()})},nu:U,edge:y(L),chrome:y(k),ie:y("IE"),opera:y(F),firefox:y(M),safari:y(j)},B="Windows",H="Android",V="Solaris",X="FreeBSD",q="ChromeOS",G=function(e,n){return function(){return n===e}},Y=function(e){var n=e.current;return{current:n,version:e.version,isWindows:G(B,n),isiOS:G("iOS",n),isAndroid:G(H,n),isOSX:G("OSX",n),isLinux:G("Linux",n),isSolaris:G(V,n),isFreeBSD:G(X,n),isChromeOS:G(q,n)}},z={unknown:function(){return Y({current:void 0,version:C.unknown()})},nu:Y,windows:y(B),ios:y("iOS"),android:y(H),linux:y("Linux"),osx:y("OSX"),solaris:y(V),freebsd:y(X),chromeos:y(q)},$=function(e,n){var t=String(n).toLowerCase();return function(e,n){for(var t=0,r=e.length;t<r;t++){var o=e[t];if(n(o,t))return w.some(o)}return w.none()}(e,function(e){return e.search(t)})},J=function(e,t){return $(e,t).map(function(e){var n=C.detect(e.versionRegexes,t);return{current:e.name,version:n}})},K=function(e,t){return $(e,t).map(function(e){var n=C.detect(e.versionRegexes,t);return{current:e.name,version:n}})},Q=function(e,n){return-1!==e.indexOf(n)},Z=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ee=function(n){return function(e){return Q(e,n)}},ne=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return Q(e,"edge/")&&Q(e,"chrome")&&Q(e,"safari")&&Q(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Z],search:function(e){return Q(e,"chrome")&&!Q(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return Q(e,"msie")||Q(e,"trident")}},{name:"Opera",versionRegexes:[Z,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ee("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ee("firefox")},{name:"Safari",versionRegexes:[Z,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(Q(e,"safari")||Q(e,"mobile/"))&&Q(e,"applewebkit")}}],te=[{name:"Windows",search:ee("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return Q(e,"iphone")||Q(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ee("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:ee("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ee("linux"),versionRegexes:[]},{name:"Solaris",search:ee("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ee("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ee("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],re={browsers:y(ne),oses:y(te)},oe=R(function(e,n){var t,r,o,i,u,c,s,f,a,l,d,m,p=re.browsers(),h=re.oses(),v=J(p,e).fold(W.unknown,W.nu),g=K(h,e).fold(z.unknown,z.nu);return{browser:v,os:g,deviceType:(r=v,o=e,i=n,u=(t=g).isiOS()&&!0===/ipad/i.test(o),c=t.isiOS()&&!u,s=t.isiOS()||t.isAndroid(),f=s||i("(pointer:coarse)"),a=u||!c&&s&&i("(min-device-width:768px)"),l=c||s&&!a,d=r.isSafari()&&t.isiOS()&&!1===/safari/i.test(o),m=!l&&!a&&!d,{isiPad:y(u),isiPhone:y(c),isTablet:y(a),isPhone:y(l),isTouch:y(f),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:y(d),isDesktop:y(m)})}}(d.navigator.userAgent,function(e){return d.window.matchMedia(e).matches})),ie=(d.Node.ATTRIBUTE_NODE,d.Node.CDATA_SECTION_NODE,d.Node.COMMENT_NODE,d.Node.DOCUMENT_NODE,d.Node.DOCUMENT_TYPE_NODE,d.Node.DOCUMENT_FRAGMENT_NODE,d.Node.ELEMENT_NODE,d.Node.TEXT_NODE,d.Node.PROCESSING_INSTRUCTION_NODE,d.Node.ENTITY_REFERENCE_NODE,d.Node.ENTITY_NODE,d.Node.NOTATION_NODE,oe.get().browser.isIE(),function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n]}("element","offset"),x(d.Element.prototype.attachShadow)&&x(d.Node.prototype.getRootNode)),ue=ie?function(e){return _.fromDom(e.dom().getRootNode())}:function(e){return n=e,_.fromDom(n.dom().ownerDocument);var n};var ce={},se=function(n){return w.from(tinymce.get).bind(function(e){return w.from(e(n))})},fe=function(e,n,t,r){void 0===r&&(r="");var o,i,u,c=se(t.editorId).map(function(e){var n,t=ue(_.fromDom(e.getElement()));return(n=t,11===n.dom().nodeType?n:_.fromDom(n.dom().body)).dom()}).getOrUndefined(),s=(o=e,i=c,{completeAfter:u=function(e,n){return n&&!n()||d.setTimeout(function(){e.state.completionActive||e.showHint({completeSingle:!1,container:i})},100),o.Pass},completeIfAfterLt:function(n){return u(n,function(){var e=n.getCursor();return"<"===n.getRange(o.Pos(e.line,e.ch-1),e)})},completeIfInTag:function(n){return u(n,function(){var e=n.getTokenAt(n.getCursor());return!!("string"!==e.type||/['"]/.test(e.string.charAt(e.string.length-1))&&1!==e.string.length)&&o.innerMode(n.getMode(),e.state).state.tagName})}}),f={lineWrapping:t.lineWrapping,lineNumbers:t.lineNumbers,foldGutter:t.foldGutter,theme:t.theme,direction:t.direction,matchTags:{bothTags:!0},keyMap:"sublime",gutters:t.gutter?["CodeMirror-linenumbers","CodeMirror-foldgutter"]:[],extraKeys:{"Alt-F":"findPersistent","Ctrl-J":"toMatchingTag","Ctrl-B":"selectNextOccurrence","'<'":s.completeAfter,"'/'":s.completeIfAfterLt,"' '":s.completeIfInTag,"'='":s.completeIfInTag,"Ctrl-Q":function(e){e.foldCode(e.getCursor())}},mode:"text/html",value:r},a=e(n,f),l=function(e){27!==e.keyCode&&e.stopPropagation()};n.addEventListener("keyup",l),n.addEventListener("keydown",l),n.addEventListener("keypress",l);return d.setTimeout(function(){a&&(a.refresh(),a.focus())},200),{cmi:a,unbind:function(){n.removeEventListener("keyup",l),n.removeEventListener("keydown",l),n.removeEventListener("keypress",l)}}},ae=function(e,n,t){return a.all([function(n,t){if(!0===ce[t])return a.resolve();var e=se(t),r=e.bind(function(e){var n;return w.from(null===(n=e.ui)||void 0===n?void 0:n.styleSheetLoader)}).getOr(tinymce.DOM.styleSheetLoader);return e.each(function(e){e.on("remove",function(){r.unload&&r.unload(n),delete ce[t]})}),ce[t]=!0,N(n,r)}(n,t),E("tinymce.plugins.advcode.CodeMirror",e)]).then(function(e){e[0];return(0,e[1])()})},le=function(o,i){return new a(function(e){o.style.width="100%",o.parentElement.classList.add("mce-codemirror"),e(ae(i.codeMirrorScriptUrl,i.codeMirrorCssUrl,i.editorId).then(function(e){var n=fe(e,o,i),t=n.cmi,r=n.unbind;return{getValue:function(){return t.doc.getValue()},setValue:function(e){return t.doc.setValue(e)},destroy:function(){return r()}}}))})};tinymce.Resource.add("tinymce.plugins.advcode.customeditor",le)}(window);