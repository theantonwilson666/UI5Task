//@ui5-bundle sap/ui/richtexteditor/library-preload.js
/*!
 * SAPUI5

(c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.predefine('sap/ui/richtexteditor/RTESplitButton',["sap/m/SplitButton","./RTESplitButtonRenderer"],function(S){"use strict";
var R=S.extend("sap.ui.richtexteditor.RTESplitButton",{metadata:{properties:{currentColor:{type:"sap.ui.core.CSSColor",group:"Appearance",defaultValue:'rgb(0, 0, 0)'}},interfaces:["sap.m.IOverflowToolbarContent"],library:"sap.ui.richtexteditor"}});
R.prototype.init=function(){S.prototype.init.apply(this,arguments);this._cachedElem=this._createIcon();};
R.prototype._createIcon=function(){var i,p,r,o,a,b={x:"1",y:"12",width:"14",height:"3",rx:"0.2",ry:"0.2"},s="http://www.w3.org/2000/svg";i=document.createElementNS(s,"svg");i.setAttribute("class","rteFontColorIcon");i.setAttribute("viewBox","0 0 16 16");i.style.fill=this.getCurrentColor();p=document.createElementNS(s,"path");p.setAttribute("d","M662.477,379.355h3.038l.806,2.7h1.163l-2.729-9h-1.518l-2.753,9h1.21Zm1.519-5.4,1.281,4.5h-2.586Z");p.setAttribute("transform","translate(-656.047 -373.055)");i.appendChild(p);r=document.createElementNS(s,"rect");r.setAttribute("class","outline");o=document.createElementNS(s,"rect");o.setAttribute("class","fill");for(a in b){r.setAttribute(a,b[a]);o.setAttribute(a,b[a]);}i.appendChild(r);i.appendChild(o);return i;};
R.prototype.onAfterRendering=function(){S.prototype.onAfterRendering.apply(this,arguments);this.$().find(".sapMSBText .sapMBtnInner").html(this._cachedElem);};
R.prototype.onBeforeRendering=function(){this.addStyleClass('sapRTESB');};
R.prototype.exit=function(){S.prototype.exit.apply(this,arguments);this._cachedElem=null;};
R.prototype._getIconSvgFill=function(){return this._cachedElem&&this._cachedElem.querySelector(".fill");};
R.prototype.getIconColor=function(){return this.getCurrentColor();};
R.prototype.setIconColor=function(c){var C=this._getIconSvgFill();if(C){C.style.fill=c;}this.setProperty("currentColor",c,false);return this;};
return R;});
sap.ui.predefine('sap/ui/richtexteditor/RTESplitButtonRenderer',['sap/m/SplitButtonRenderer','sap/ui/core/Renderer'],function(S,R){'use strict';var a=R.extend(S);a.apiVersion=2;
a.render=function(r,o){S.render.apply(this,[r,o]);};
return a;},true);
sap.ui.predefine('sap/ui/richtexteditor/RichTextEditorRenderer',['sap/ui/core/Renderer','sap/ui/core/Core'],function(R,C){"use strict";var a={apiVersion:2};
a.render=function(r,o){var t=o.getAggregation("_toolbarWrapper");var c=t&&o._bCustomToolbarRequirementsFullfiled;var b=C.getLibraryResourceBundle("sap.ui.richtexteditor");r.openStart("div",o);r.class("sapUiRTE");if(o.getRequired()){r.class("sapUiRTEReq");}if(o.getUseLegacyTheme()){r.class("sapUiRTELegacyTheme");}if(c){r.class("sapUiRTEWithCustomToolbar");}r.style("width",o.getWidth());r.style("height",o.getHeight());if(o.getTooltip_AsString()){r.attr("title",o.getTooltip_AsString());}r.accessibilityState(o,{role:"region",label:b.getText("RTE_ARIA_LABEL"),labelledby:null});r.openEnd();if(c){r.renderControl(t);}var s="render"+o.getEditorType()+"Editor";if(this[s]&&typeof this[s]==="function"){this[s].call(this,r,o);}r.close("div");};
return a;},true);
sap.ui.predefine('sap/ui/richtexteditor/ToolbarWrapper',["sap/ui/thirdparty/jquery",'sap/ui/core/Control','./library','sap/ui/core/IconPool','sap/ui/core/Item','sap/ui/core/Core','sap/ui/richtexteditor/RTESplitButton',"sap/base/security/URLListValidator","sap/base/Log","./ToolbarWrapperRenderer"],function(q,C,l,I,a,b,R,U,L){"use strict";
var T=C.extend("sap.ui.richtexteditor.ToolbarWrapper",{metadata:{interfaces:["sap.ui.richtexteditor.IToolbar"],library:"sap.ui.richtexteditor",aggregations:{_toolbar:{type:"sap.m.OverflowToolbar",multiple:false,visibility:"hidden"},_customInsertImageDialog:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},_customInsertLinkDialog:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},_customTextColorDialog:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},_customBackgroundColorDialog:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},_customInsertTableDialog:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"}},associations:{editor:{type:"sap.ui.richtexteditor.RichTextEditor",multiple:false}}}});
T.prototype.init=function(){this._helper=l.RichTextEditorHelper;this._oResourceBundle=b.getLibraryResourceBundle("sap.ui.richtexteditor");this._oAccessibilityTexts={};this._sTextColor=l.EditorCommands.TextColor.defaultValue;this._sBackgroundColor=l.EditorCommands.BackgroundColor.defaultValue;};
T.prototype.onBeforeRendering=function(){if(!this.getAggregation("_toolbar")){var t=this._createCustomToolbar(),e=this.getEditor();if(e){t.setEnabled(e.getEditable());}t.addStyleClass("sapUiRTECustomToolbar");this.setAggregation("_toolbar",t);this.setAggregation("_customInsertImageDialog",this._helper.createDialog(this._createInsertImageConfig("InsertImage")));this.setAggregation("_customInsertLinkDialog",this._helper.createDialog(this._createInsertLinkConfig("InsertLink")));this.setAggregation("_customTextColorDialog",this._helper.createColorPalettePopover(this._createColorPalettePopoverConfig("TextColor")));this.setAggregation("_customBackgroundColorDialog",this._helper.createColorPalettePopover(this._createColorPalettePopoverConfig("BackgroundColor")));this.setAggregation("_customInsertTableDialog",this._helper.createDialog(this._createInsertTableConfig("InsertTable")));}};
T.prototype.onAfterRendering=function(){var e=this.getEditor();this._initialButtonGroupsState=e&&e.getButtonGroups().map(function(o){return q.extend(true,{},o);});this._syncPopoverOpeningArrows();this._syncColors("TextColor",this._sTextColor);this._syncColors("BackgroundColor",this._sBackgroundColor);};
T.prototype.exit=function(){for(var g in this._oAccessibilityTexts){this._destroyAssociatedInvisibleTexts(g);}this._customButtons=null;this._oAccessibilityTexts=null;};
T.prototype._syncPopoverOpeningArrows=function(){var f=this._findGroupedControls("font"),t=f[2]&&f[2]._getArrowButton(),B=f[3]&&f[3]._getArrowButton();this.getAggregation("_customTextColorDialog")._ensurePopover().attachAfterOpen(function(){t._activeButton();}).attachAfterClose(function(){t._inactiveButton();});this.getAggregation("_customBackgroundColorDialog")._ensurePopover().attachAfterOpen(function(){B._activeButton();}).attachAfterClose(function(){B._inactiveButton();});};
T.prototype._getId=function(e){this._getId.counter=this._getId.counter?this._getId.counter+1:1;var r=this.getEditor()?this.getEditor().getId():"_rte"+this._getId.counter,t=this.getId(),B=[r+t];if(e||e===0){B.push(e);}return B.join("-");};
T.prototype.getEditor=function(){var i=this.getAssociation("editor"),e=b.byId(i);return e||null;};
T.prototype.modifyRTEToolbarConfig=function(c){var t=this;var s=c.directionality==="rtl"?"JustifyRight":"JustifyLeft";c.toolbar=false;c.setup=function(e){e.on('init',function(){var E=l.EditorCommands;e.execCommand("FormatBlock",false,E["FormatBlock"]["Paragraph"].commandValue,{skip_focus:true});e.execCommand(s,false,null,{skip_focus:true});e.execCommand("FontName",false,E["FontFamily"]["Verdana"].commandValue,{skip_focus:true});e.execCommand("FontSize",false,"10pt",{skip_focus:true});});e.on('NodeChange',function(){t._syncToolbarStates(this);});};return c;};
T.prototype._applyColor=function(c,s,d,D){if(D||this._getColor(c).replace(/,\s/g,',')!==d){this.getEditor().getNativeApi().execCommand(s,false,d);}};
T.prototype._syncColors=function(c,s){var d=this._findGroupedControls("font"),t;if(!s){return;}switch(c){case"TextColor":d[2]&&d[2].setIconColor(s);break;case"BackgroundColor":t=d[3]&&d[3]._getTextButton().getDomRef("img");t&&b.byId(t.id).setColor(s);break;}};
T.prototype._syncToolbarStates=function(n){var e,c,E,o=l.EditorCommands,f=n.formatter,_=function(t,k,c){var A,m;for(A in t){m=I.getIconURI(e[A].icon);if(t.hasOwnProperty(A)&&k.match(t[A].style)&&c.getIcon()!==m){c.setIcon(m);break;}}},d=function(k,F,c){var m,j,p,r=k.getDoc().queryCommandValue("FormatBlock");for(m in F){if(!F.hasOwnProperty(m)){continue;}j=c.getId()+m;p=F[m];if((c.getSelectedItemId()!==j)&&((r===p.commandValue)||(r===p.text))){c.setSelectedItemId(j);break;}}},g=function(k,F,c){var m,s,t,j,p=k.getDoc().queryCommandValue("FontName");for(m in F){if(!F.hasOwnProperty(m)){continue;}j=c.getId()+m;s=F[m].commandValue.match(/\w+/g).join("").toLowerCase();p=p&&p.match(/\w+/g).join("").toLowerCase();t=F[m].text.match(/\w+/g).join("").toLowerCase();if((c.getSelectedItemId()!==j)&&(s===p||p===t)){c.setSelectedItemId(j);break;}}},h=function(k,c){var S=k.selection.getNode(),m=S&&S.tagName.toLowerCase()==="img"||(S.parentElement&&S.parentElement.tagName.toLowerCase()==="img");c.setPressed(!!m);},i=function(k,c,t){var S=k.selection.getNode(),m=S&&S.tagName.toLowerCase()==="a"||(S.parentElement&&S.parentElement.tagName.toLowerCase()==="a");if(t){c.setPressed(!!m);}else{c.setEnabled(!!m);}};for(E in o){if(!o.hasOwnProperty(E)){continue;}e=o[E];c=b.byId(this._getId(E));if(!c){continue;}switch(E){case"TextAlign":_(e,f,c);break;case"FontFamily":g(n,e,c);break;case"FormatBlock":d(n,e,c);break;case"InsertImage":h(n,c);break;case"InsertLink":i(n,c,true);break;case"Unlink":i(n,c,false);break;case"FontSize":var s=n.getDoc().queryCommandValue(E),j=c.getId()+s;if(c.getSelectedItemId()!==j&&s){c.setSelectedItemId(j);}break;default:c.getMetadata().getName()==="sap.m.OverflowToolbarToggleButton"&&c.setPressed(f.match(e.style));}}};
T.prototype._createButtonConfig=function(c){var e=l.EditorCommands,o=e[c],r=this.getEditor();return{id:this._getId(c),icon:I.getIconURI(o.icon),tooltip:this._oResourceBundle.getText(o.bundleKey),text:this._oResourceBundle.getText(o.bundleKey),press:function(){if(r){r.getNativeApi().execCommand(o.command);}else{L.warning("Cannot execute native command: "+o.command);}}};};
T.prototype._createMenuButtonItems=function(c){var e=this._helper,E=l.EditorCommands,i=[],s,o;for(var d in E[c]){if(d==='bundleKey'){continue;}o=E[c][d];s=this._oResourceBundle.getText(o.bundleKey)||o.text;i.push(e.createMenuItem(this._getId(c+d),s,I.getIconURI(o.icon)));}return i;};
T.prototype._findTextAlignCommandByIcon=function(i){var e=l.EditorCommands['TextAlign'],c,s;Object.keys(e).forEach(function(k){c=I.getIconURI(e[k].icon);if(k!=='bundleKey'&&c===i){s=k;}});return s;};
T.prototype._createFontStyleSelectItems=function(){var e=l.EditorCommands,f=e["FontFamily"],i=[],o;for(var F in f){o={id:this._getId("FontFamily"+F),text:f[F].text};i.push(new a(o));}return i;};
T.prototype._getFontStyleCommand=function(i){var e=l.EditorCommands,f=e["FontFamily"];for(var F in f){if(f.hasOwnProperty(F)&&f[F].text===i){return f[F].commandValue;}}};
T.prototype._getFormatBlockCommand=function(i){var e=l.EditorCommands,f=e["FormatBlock"];for(var F in f){if(f.hasOwnProperty(F)&&this._oResourceBundle.getText(f[F].bundleKey)===i){return f[F].commandValue;}}};
T.prototype._createFontSizeSelectItems=function(){var i=[],n=1,o,e=l.EditorCommands;e["FontSize"].forEach(function(c){o={id:this._getId("FontSize"+n),text:c+" pt"};i.push(new a(o));n++;},this);return i;};
T.prototype._createFormatBlockItems=function(){var e=l.EditorCommands,f=e["FormatBlock"],i=[],o;for(var F in f){o={id:this._getId("FormatBlock"+F),text:this._oResourceBundle.getText(f[F].bundleKey)};i.push(new a(o));}return i;};
T.prototype._getColor=function(c){var r=this.getEditor(),o=l.EditorCommands[c].style,n=r.getNativeApi().selection.getNode(),N=r.getNativeApi().dom.getParents(n),i,d,s;for(i=0;i<N.length;i++){d=N[i];s=d.style[o];if(s&&s!=""){return s;}}return l.EditorCommands[c].defaultValue;};
T.prototype._createSplitButtonForDialog=function(c){var o=l.EditorCommands[c],t=this,d,r;if(!o){return;}r={id:this._getId(c),tooltip:this._oResourceBundle.getText(o.bundleKey),press:function(){switch(c){case"TextColor":t._applyColor(c,o.command,t._sTextColor);break;case"BackgroundColor":t._applyColor(c,o.command,t._sBackgroundColor);break;}},arrowPress:function(){d=t.getAggregation("_custom"+c+"Dialog");this._getArrowButton()._activeButton();if(!d){return;}d.openBy(this);}};if(c==="BackgroundColor"){r.icon=I.getIconURI(o.icon);}return r;};
T.prototype._createButtonForDialog=function(c){var o=l.EditorCommands[c],t=this,d;if(!o){return;}return{id:this._getId(c),icon:I.getIconURI(o.icon),tooltip:this._oResourceBundle.getText(o.bundleKey),text:this._oResourceBundle.getText(o.bundleKey),press:function(){d=t.getAggregation("_custom"+c+"Dialog");if(!d){return;}switch(c){case"InsertImage":this.setPressed(true);t._syncImageDialogData(d);break;case"InsertLink":t._syncLinkDialogData(d);break;case"InsertTable":t._resetDialogContent(d);}d.open();}};};
T.prototype._syncImageDialogData=function(d){var s=this.getEditor().getNativeApi().selection,S=s&&s.getNode(),D=d&&d.getContent(),o,h,w,c,u,e,W,H,f;if(!D.length){return;}o=D[6];f=D[5];if(f.getMetadata().getName()==="sap.m.HBox"&&f.getAggregation("items").length){h=f.getAggregation("items")[2];w=f.getAggregation("items")[0];}if(S.tagName.toLowerCase()==='img'){c=S;}else{c=S.parentElement;}if(c.tagName.toLowerCase()!=="img"){this._resetDialogContent(d);return;}if(!o.getEnabled()){o.setEnabled(true);}o.setSelected(c.getAttribute('data-sap-ui-rte-image-ratio')==='true'?true:false);u=c.getAttribute('src');e=c.getAttribute('alt');W=parseFloat(c.width);H=parseFloat(c.height);D[1].setValue(u);D[3].setValue(e);h.setValue(H);w.setValue(W);};
T.prototype._syncLinkDialogData=function(d){var D=d&&d.getContent(),s,S,u,c,t,e,o,f,g;if(!(D instanceof Array)||!D.length){return;}s=this.getEditor().getNativeApi().selection;o=s.getNode();S=this._getSelectionAnchor(s);if(!S){S=o.parentElement;}f=s.getContent().length!==0&&S.textContent&&s.getContent().length<S.textContent.length&&S.tagName==="A";g=s.getContent().length!==0;if(!g||f){c=S.text;}else{c=(s.getNode()&&s.getNode().tagName.toLowerCase()==='a')?s.getNode().textContent:s.getContent({format:'text'});}u=S.getAttribute('href');t=S.getAttribute('title');e=S.getAttribute('target')==="true";D[1].setValue(u);D[3].setValue(c&&c.replace(/\uFEFF/g,""));D[5].setValue(t);D[6].getAggregation('items')[1].setSelectedIndex(e);};
T.prototype._resetDialogContent=function(d){var c=d.findAggregatedObjects(true),s;c.forEach(function(o){s=o.getMetadata().getName();if(s==="sap.m.Input"){o.resetProperty('value');}else if(s==="sap.m.CheckBox"){o.resetProperty('selected').setEnabled(false);}});};
T.prototype._createColorPalettePopoverConfig=function(t){var c=l.EditorCommands[t],s=c.defaultValue,o=this;return{defaultColor:s,colorSelect:function(e){var s=e.getParameters().value;o._applyColor(t,c.command,s,e.getParameter("defaultAction"));switch(t){case"TextColor":o._sTextColor=s;o._syncColors("TextColor",s);break;case"BackgroundColor":o._sBackgroundColor=s;o._syncColors("BackgroundColor",s);break;}}};};
T.prototype._generateImageHTML=function(u,t,h,w,r){var s=u?' src="'+u+'"':'',A=t?' alt="'+t+'"':'',H=h?' height="'+h+'px"':'',W=w?' width="'+w+'px"':'',d=H+W,c=(r!==undefined)?' data-sap-ui-rte-image-ratio="'+r+'"':'';return'<img'+s+A+d+c+'>';};
T.prototype._createInsertImageConfig=function(){var r,t=this._oResourceBundle.getText(sap.ui.richtexteditor.EditorCommands["InsertImage"].bundleKey),u=this._helper.createInput(),o=this._helper.createLabel({text:this._oResourceBundle.getText("INSERT_IMAGE_URL"),labelFor:u}),c=this._helper.createInput(),d=this._helper.createLabel({text:this._oResourceBundle.getText("INSERT_IMAGE_DESCRIPTION"),labelFor:c}),D=this._helper.createLabel({text:this._oResourceBundle.getText("INSERT_CONTENT_DIMENSIONS")}),e=this._helper.createInput({width:'8rem',fieldWidth:"6rem",description:'px',ariaLabelledBy:D,change:function(){m(false,true);}}),f=this._helper.createText({textAlign:"Center",width:'2rem',text:'x'}),g=this._helper.createInput({fieldWidth:"6rem",width:'8rem',description:'px',ariaLabelledBy:D,change:function(){m(true,false);}}),h=this._helper.createHBox({wrap:"Wrap",alignItems:"Center",justifyContent:"SpaceBetween",items:[e,f,g]}),i=this._helper.createCheckBox({select:function(){m(true,true);}}),j=this._helper.createLabel({text:this._oResourceBundle.getText("INSERT_IMAGE_RATIO"),labelFor:i}),k=this.getEditor(),m=function(p,s){var S=k.getNativeApi().selection,v=S&&S.getNode(),w=parseFloat(e.getValue()),H=parseFloat(g.getValue()),x,y;if(!i.getSelected()){return;}if(v.tagName.toLowerCase()!=='img'&&!(v.parentElement&&v.parentElement.tagName.toLowerCase()==="img")){return;}v=v.tagName.toLowerCase()==="img"?v:v.parentElement;x=parseFloat(v.width);y=parseFloat(v.height);r=x/y;if(p&&(H!==y||H!=g._lastValue)){e.setValue(H*r);}else if(s&&(w!==x||w!=e._lastValue)){g.setValue(w/r);}},n=this,B=[];D.setLabelFor(e);B.push(this._helper.createButton({id:this._getId("InsertImageButton"),text:this._oResourceBundle.getText("DIALOG_OK_BUTTON"),press:function(){k.getNativeApi().insertContent(n._generateImageHTML(u.getValue(),c.getValue(),g.getValue(),e.getValue(),i.getSelected()));n.getAggregation("_customInsertImageDialog").close();n._syncToolbarStates(k.getNativeApi());}}));B.push(this._helper.createButton({id:this._getId("CancelInsertImageButton"),text:this._oResourceBundle.getText("DIALOG_CANCEL_BUTTON"),press:function(){n.getAggregation("_customInsertImageDialog").close();n._syncToolbarStates(k.getNativeApi());}}));return{contentWidth:'320px',title:t,buttons:B,content:[o,u,d,c,D,h,i,j]};};
T.prototype._getSelectionAnchor=function(s){var S,A;if(!s){return;}S=s.getNode();if(s.getStart().tagName=='A'){A=s.getStart();}else if(S.tagName=='A'){A=S;}return A;};
T.prototype._generateLinkHTML=function(u,t,c,s){var d={href:u&&U.validate(u)?u:'',target:c?c:null,title:t&&U.validate(t)?t:''},n=this.getEditor().getNativeApi(),S=n.selection,e=false,A,f,g;A=this._getSelectionAnchor(S);if(u===""&&!A){return;}if(u===""&&A){n.execCommand("Unlink");return;}if(!A){f=n.dom.select('a[href="'+d.href+'"]');if(s!==""){n.insertContent(n.dom.createHTML('a',d,n.dom.encode(s)));e=true;}else{n.execCommand('mceInsertLink',false,d);e=true;}g=n.dom.select('a[href="'+d.href+'"]');A=g.filter(function(o){return f.indexOf(o)===-1;})[0];}if("innerText"in A){A.innerText=s!==""?s:u;}else{A.textContent=s!==""?s:u;}n.dom.setAttribs(A,d);n.selection.select(A);if(!e){n.fire("change");}};
T.prototype._createInsertLinkConfig=function(){var t=this._oResourceBundle.getText(sap.ui.richtexteditor.EditorCommands["InsertLink"].bundleKey),u=this._helper.createInput(),o=this._helper.createLabel({text:this._oResourceBundle.getText("INSERT_LINK_URL"),labelFor:u}),c=this._helper.createInput(),d=this._helper.createLabel({text:this._oResourceBundle.getText("INSERT_LINK_DISPLAY_TEXT"),labelFor:c}),e=this._helper.createInput(),f=this._helper.createLabel({text:this._oResourceBundle.getText("INSERT_LINK_TITLE"),labelFor:e}),g=this._helper.createSelect({id:this._getId("InsertLinkSelect"),items:[new a({id:this._getId("InsertLinkSelectNone"),text:this._oResourceBundle.getText("INSERT_LINK_TARGET_NONE")}),new a({id:this._getId("InsertLinkSelectNewWindow"),text:this._oResourceBundle.getText("INSERT_LINK_TARGET_NEW_WINDOW")})]}),h=this._helper.createLabel({text:this._oResourceBundle.getText("INSERT_LINK_TARGET"),labelFor:g}),i=this._helper.createVBox({direction:"Column",alignItems:"Start",items:[h,g]}),r=this.getEditor(),j=this,B=[];B.push(this._helper.createButton({id:this._getId("InsertLinkButton"),text:this._oResourceBundle.getText("DIALOG_OK_BUTTON"),press:function(){var k=(g.getSelectedItem()===g.getItems()[1]);j._generateLinkHTML(u.getValue(),e.getValue(),k,c.getValue());j.getAggregation("_customInsertLinkDialog").close();j._syncToolbarStates(r.getNativeApi());}}));B.push(this._helper.createButton({id:this._getId("CancelInsertLinkButton"),text:this._oResourceBundle.getText("DIALOG_CANCEL_BUTTON"),press:function(){j.getAggregation("_customInsertLinkDialog").close();j._syncToolbarStates(r.getNativeApi());}}));return{contentWidth:'320px',title:t,buttons:B,content:[o,u,d,c,f,e,i]};};
T.prototype._createInsertTableConfig=function(){var t=this._oResourceBundle.getText(sap.ui.richtexteditor.EditorCommands["InsertTable"].bundleKey),r=this._helper.createStepInput({value:2,min:0,width:"50%"}),o=this._helper.createLabel({text:this._oResourceBundle.getText("INSERT_TABLE_ROWS"),labelFor:r}),c=this._helper.createStepInput({value:2,min:0,width:"50%"}),d=this._helper.createLabel({text:this._oResourceBundle.getText("INSERT_TABLE_COLS"),labelFor:c}),D=this._helper.createLabel({text:this._oResourceBundle.getText("INSERT_CONTENT_DIMENSIONS")}),e=this._helper.createInput({width:'8rem',fieldWidth:"6rem",description:'px',ariaLabelledBy:D}),f=this._helper.createText({textAlign:"Center",width:'2rem',text:'x'}),g=this._helper.createInput({fieldWidth:"6rem",width:'8rem',description:'px',ariaLabelledBy:D}),h=this._helper.createHBox({wrap:"Wrap",alignItems:"Center",justifyContent:"SpaceBetween",items:[e,f,g]}),i=this.getEditor(),j=this,B=[];B.push(this._helper.createButton({id:this._getId("InsertTableButton"),text:this._oResourceBundle.getText("DIALOG_OK_BUTTON"),press:function(){var k=i.getNativeApi().plugins.table.insertTable(c.getValue(),r.getValue()),m=i.getNativeApi().dom;m.setStyle(k,'width',g.getValue()+"px");m.setStyle(k,'height',e.getValue()+"px");j.getAggregation("_customInsertTableDialog").close();}}));B.push(this._helper.createButton({id:this._getId("CancelInsertTableButton"),text:this._oResourceBundle.getText("DIALOG_CANCEL_BUTTON"),press:function(){j.getAggregation("_customInsertTableDialog").close();}}));return{title:t,buttons:B,content:this._helper.createVBox({direction:"Column",alignItems:"Start",items:[o,r,d,c,D,h]})};};
T.prototype._createCustomToolbar=function(){var e=this._helper,c=[],B=l.ButtonGroups,g=Object.keys(B),G=[],d=this.getEditor()?this.getEditor().getButtonGroups():[];g.forEach(function(n){d.forEach(function(o){if(o.name===n){G.push(o);}});});G=this._sortToolbarContent(G);G.forEach(function(o){c=c.concat(this.addButtonGroup(o.name));}.bind(this));return e.createOverflowToolbar(this._getId(),c);};
T.prototype.setToolbarEnabled=function(e,s){var t=this.getAggregation("_toolbar");if(t&&t.getEnabled()!==e){t.setEnabled(e,s);}};
T.prototype.setShowGroup=function(g,s){var o=this._findGroupedControls(g),t=this.getAggregation("_toolbar");o.forEach(function(O){O.setVisible(s);});t&&t.rerender();};
T.prototype.addButtonGroup=function(g){var r=this.getEditor(),e=this._helper,c=[],B=l.ButtonGroups,o=l.EditorCommands,A=l.Accessibility,v,V,d,f,h,i,j,k,m,t=this;switch(g){case"font-style":f=r?r.getShowGroupFontStyle():false;B["font-style"].forEach(function(z){c.push(e.createOverflowToolbarToggleButton(this._createButtonConfig(z)).setVisible(f));},this);break;case"font":d=r?r.getShowGroupFont():false;var n=e.createInvisibleText({text:this._oResourceBundle.getText(A["FontFamily"])}).toStatic(),p=e.createInvisibleText({text:this._oResourceBundle.getText(A["FontSize"])}).toStatic(),s=e.createInvisibleText({text:this._oResourceBundle.getText(A["FontColor"])}).toStatic(),u=e.createInvisibleText({text:this._oResourceBundle.getText(A["BackgroundColor"])}).toStatic();this._registerAssociatedInvisibleTexts("font",n.getId());this._registerAssociatedInvisibleTexts("font",p.getId());c.push(e.createSelect({id:this._getId("FontFamily"),ariaLabelledBy:n,items:this._createFontStyleSelectItems(),change:function(E){var z;if(r){z=E.getSource().getSelectedItem();r.getNativeApi().execCommand('FontName',false,this._getFontStyleCommand(z.getText()));}else{L.warning("Cannot execute native command: "+'FontName');}}.bind(this)}).setVisible(d));c.push(e.createSelect({id:this._getId("FontSize"),ariaLabelledBy:p,items:this._createFontSizeSelectItems(),change:function(E){var z;if(r){z=E.getSource().getSelectedItem();r.getNativeApi().execCommand('FontSize',false,z.getText().replace(/\s/g,""));}else{L.warning("Cannot execute native command: "+'FontSize');}}}).setVisible(d));var w=new R(this._createSplitButtonForDialog("TextColor")).setVisible(d),x=e.createSplitButton(this._createSplitButtonForDialog("BackgroundColor")).setVisible(d);w._getTextButton().addAriaLabelledBy(s);c.push(w);x._getTextButton().addAriaLabelledBy(u);c.push(x);break;case"text-align":i=r?r.getShowGroupTextAlign():false;var M=this._createMenuButtonItems("TextAlign");c.push(e.createMenuButton(this._getId("TextAlign"),M,function(E){var S,z,D;if(r){S=E.getParameter("item");z=r.getNativeApi();D=S.getIcon();if(D===this.getParent().getIcon()){z.execCommand('JustifyLeft');}else{z.execCommand('Justify'+t._findTextAlignCommandByIcon(D));}}else{L.warning("Cannot execute native command: "+'Justify');}},M[0].getIcon(),this._oResourceBundle.getText(o["TextAlign"].bundleKey)).setVisible(i));break;case"formatselect":j=r?(this._isButtonGroupAdded("styleselect")||this._isButtonGroupAdded("formatselect")):false;if(j){var y=e.createInvisibleText({text:this._oResourceBundle.getText(A["FormatBlock"])}).toStatic();this._registerAssociatedInvisibleTexts("formatselect",y.getId());c.push(e.createSelect({id:this._getId("FormatBlock"),ariaLabelledBy:y,items:this._createFormatBlockItems(),change:function(E){var S;if(r){S=E.getSource().getSelectedItem();if(S){var z=r.getAggregation("_toolbarWrapper")._getFormatBlockCommand(S.getText());r.getNativeApi().execCommand('FormatBlock',false,z);}}else{L.warning("Cannot execute native command: "+'FormatBlock');}}}).setVisible(j));}break;case"structure":V=r?r.getShowGroupStructure():false;B["structure"].forEach(function(z){c.push(e.createOverflowToolbarButton(this._createButtonConfig(z)).setVisible(V));},this);break;case"clipboard":v=r?r.getShowGroupClipboard():false;B["clipboard"].forEach(function(z){c.push(e.createOverflowToolbarButton(this._createButtonConfig(z)).setVisible(v));},this);break;case"undo":h=r?r.getShowGroupUndo():false;B["undo"].forEach(function(z){c.push(e.createOverflowToolbarButton(this._createButtonConfig(z)).setVisible(h));},this);break;case"insert":m=r?r.getShowGroupInsert():false;c.push(e.createOverflowToolbarToggleButton(this._createButtonForDialog("InsertImage")).setVisible(m));break;case"link":k=r?r.getShowGroupLink():false;c.push(e.createOverflowToolbarToggleButton(this._createButtonForDialog("InsertLink")).setVisible(k));c.push(e.createOverflowToolbarButton(this._createButtonConfig("Unlink")).setVisible(k));break;case"table":c.push(e.createOverflowToolbarButton(this._createButtonForDialog("InsertTable")));break;}return c;};
T.prototype.addButtonGroupToContent=function(g,f){var G;if(!f&&g.buttons[0]==="table"){G=g.buttons[0];sap.ui.richtexteditor.ButtonGroups.custom[g.name]={name:g.buttons[0],controls:["InsertTable"]};}if(f&&g.name==="table"){G=g.name;sap.ui.richtexteditor.ButtonGroups[g.name]=["InsertTable"];}if(f&&(g.name==="formatselect"||g.name==="styleselect")){G="formatselect";sap.ui.richtexteditor.ButtonGroups[g.name]=["FormatBlock"];}if(!sap.ui.richtexteditor.ButtonGroups[g.name]&&!sap.ui.richtexteditor.ButtonGroups.custom[g.name]){return this;}if(!G){G=g.name;}var t=this.getAggregation("_toolbar"),c=this.addButtonGroup(G),d=c.length,i,s;s=this._findGroupPriorityPosition(g);c.reverse();for(i=0;i<d;i++){t.insertContent(c[i],s);}return this;};
T.prototype._sortToolbarContent=function(g){g.sort(function(G,o){return G.customToolbarPriority-o.customToolbarPriority;});return g;};
T.prototype._findGroupPriorityPosition=function(g){var G=this.getEditor().getButtonGroups(),c=l.ButtonGroups,s=0;if(!q.isNumeric(g.customToolbarPriority)){g.customToolbarPriority=this._getLastGroupPriority(G)+10;}G=this._sortToolbarContent(G);G.forEach(function(o){if(o.customToolbarPriority<g.customToolbarPriority&&o.name!==g.name){s+=c[o.name]?c[o.name].length:0;}});return s;};
T.prototype._getLastGroupPriority=function(g){var p=g.map(function(G){return G.customToolbarPriority||0;});return Math.max.apply(null,p);};
T.prototype.removeButtonGroup=function(g){var o=this._findGroupedControls(g);this._destroyAssociatedInvisibleTexts(g);o.forEach(function(O){O.destroy();});};
T.prototype._destroyAssociatedInvisibleTexts=function(g){var i=this._oAccessibilityTexts[g]||[];i.forEach(function(s){b.byId(s).destroy();});this._oAccessibilityTexts[g]=[];};
T.prototype._registerAssociatedInvisibleTexts=function(g,i){if(!this._oAccessibilityTexts[g]){this._oAccessibilityTexts[g]=[];}this._oAccessibilityTexts[g].push(i);};
T.prototype.setButtonGroups=function(n){var t=this.getAggregation("_toolbar"),g=this._getGroupsForUpdate(n);if(!t){return this;}g.aRemovedGroups.forEach(function(G){this.removeButtonGroup(G.name);}.bind(this));g.aAddedGroups=this._sortToolbarContent(g.aAddedGroups);g.aAddedGroups.forEach(function(G){this.addButtonGroupToContent(G,true);}.bind(this));return this;};
T.prototype._getJSONStringForGroups=function(g){var s=[];g.forEach(function(o){s.push(JSON.stringify(o,["name","visible","customToolbarPriority","buttons"]));});return s;};
T.prototype._getGroupsForUpdate=function(n){var N=this._getJSONStringForGroups(n),o=this._getJSONStringForGroups(this._initialButtonGroupsState),g={aRemovedGroups:[],aAddedGroups:[]};N.forEach(function(G,i){if(o.indexOf(G)===-1){g.aAddedGroups.push(n[i]);}});o.forEach(function(G,i){if(N.indexOf(G)===-1){g.aRemovedGroups.push(this._initialButtonGroupsState[i]);}}.bind(this));return g;};
T.prototype._findGroupedControls=function(g){var B=l.ButtonGroups,t=this.getAggregation("_toolbar"),c=[];if(!t){return[];}if(B[g]){c=B[g];}else if(B.custom[g]){c=B.custom[g].controls;}var i=c.map(function(n){return this._getId(n);},this);return t.findAggregatedObjects(false,function(A){return i.indexOf(A.getId())>-1;})||[];};
T.prototype.modifyToolbarContent=function(m){var r,c=Array.prototype.slice.call(arguments);c.shift();switch(m){case"add":r=this._proxyToolbarAdd.apply(this,c);break;case"destroy":r=this._proxyToolbarDestroy.apply(this,c);break;case"get":r=this._proxyToolbarGet.apply(this,c);break;case"indexOf":r=this._proxyToolbarIndexOf.apply(this,c);break;case"insert":r=this._proxyToolbarInsert.apply(this,c);break;case"removeAll":r=this._proxyToolbarRemoveAll.apply(this,c);break;case"remove":r=this._proxyToolbarRemove.apply(this,c);break;}return r;};
T.prototype._isButtonGroupAdded=function(g){var G=this.getEditor().getButtonGroups(),r=false,i;for(i=0;i<G.length;i++){if(G[i].name===g){r=true;break;}}return r;};
T.prototype._updateCustomToolbarRefIds=function(i,c){var d,e;d=this._customButtons||[];e=d.indexOf(i);if(e>-1){d.splice(e,1);}if(c!==-1){c=c>=0&&c<=d.length?c:d.length;d.splice(c,0,i);}this._customButtons=d;};
T.prototype._proxyToolbarAdd=function(i){var t=this.getAggregation("_toolbar"),r=t.addContent(i);t.rerender();if(r){this._updateCustomToolbarRefIds(i.getId());}return r;};
T.prototype._proxyToolbarGet=function(){var t=this.getAggregation("_toolbar"),c=this._customButtons||[];return t.findAggregatedObjects(false,function(A){return c.indexOf(A.getId())>-1;})||[];};
T.prototype._proxyToolbarDestroy=function(){var i=this._proxyToolbarGet();i.forEach(function(o){o.destroy();});this._customButtons=[];};
T.prototype._proxyToolbarIndexOf=function(i){var c=this._customButtons||[],s=typeof i==="object"?i.getId():i;return c.indexOf(s);};
T.prototype._proxyToolbarInsert=function(i,c){var r,t=this.getAggregation("_toolbar"),d=t.getContent()||[],e=this._customButtons||[],f=d.length-e.length;if(c<0){c=0;}else if(c>e.length){c=e.length;}else if(!c&&c!==0){c=e.length;}f+=c;r=t.insertContent(i,f);t.rerender();if(r){this._updateCustomToolbarRefIds(i.getId(),c);}return r;};
T.prototype._proxyToolbarRemoveAll=function(){var i=this._proxyToolbarGet();i.forEach(this._proxyToolbarRemove,this);return i;};
T.prototype._proxyToolbarRemove=function(i){var s,r,t=this.getAggregation("_toolbar");switch(typeof i){case"string":s=i;break;case"object":s=i.getId();break;case"number":s=this._customButtons[i];break;}r=t.removeContent(s);if(r&&s){this._updateCustomToolbarRefIds(s,-1);}return r;};
return T;});
sap.ui.predefine('sap/ui/richtexteditor/ToolbarWrapperRenderer',['sap/ui/core/Renderer'],function(R){"use strict";var T={apiVersion:2};
T.render=function(r,t){r.renderControl(t.getAggregation("_toolbar"));};
return T;},true);
sap.ui.predefine('sap/ui/richtexteditor/library',["sap/ui/thirdparty/jquery",'sap/ui/core/Core','sap/ui/core/library','sap/base/util/ObjectPath'],function(q,C,l,O){"use strict";sap.ui.getCore().initLibrary({name:"sap.ui.richtexteditor",dependencies:["sap.ui.core"],types:["sap.ui.richtexteditor.EditorType"],interfaces:["sap.ui.richtexteditor.IToolbar"],controls:["sap.ui.richtexteditor.RichTextEditor","sap.ui.richtexteditor.ToolbarWrapper","sap.ui.richtexteditor.RTESplitButton"],elements:[],version:"1.88.0"});sap.ui.richtexteditor.EditorType={TinyMCE:"TinyMCE",TinyMCE4:"TinyMCE4",TinyMCE5:"TinyMCE5"};sap.ui.richtexteditor.EditorCommands={Bold:{icon:"bold-text",command:"Bold",style:"bold",bundleKey:"BOLD_BUTTON_TOOLTIP"},Italic:{icon:"italic-text",command:"Italic",style:"italic",bundleKey:"ITALIC_BUTTON_TOOLTIP"},Underline:{icon:"underline-text",command:"Underline",style:"underline",bundleKey:"UNDERLINE_BUTTON_TOOLTIP"},Strikethrough:{icon:"strikethrough",command:"Strikethrough",style:"strikethrough",bundleKey:"STRIKETHROUGH_BUTTON_TOOLTIP"},Copy:{icon:"copy",command:"Copy",bundleKey:"COPY_BUTTON_TOOLTIP"},Cut:{icon:"scissors",command:"Cut",bundleKey:"CUT_BUTTON_TOOLTIP"},Paste:{icon:"paste",command:"Paste",bundleKey:"PASTE_BUTTON_TOOLTIP"},UnorderedList:{icon:"list",command:"InsertUnorderedList",bundleKey:"UNORDERED_LIST_BUTTON_TOOLTIP"},OrderedList:{icon:"numbered-text",command:"InsertOrderedList",bundleKey:"ORDERED_LIST_BUTTON_TOOLTIP"},Outdent:{icon:"outdent",command:"Outdent",bundleKey:"OUTDENT_BUTTON_TOOLTIP"},Indent:{icon:"indent",command:"Indent",bundleKey:"INDENT_BUTTON_TOOLTIP"},Undo:{icon:"undo",command:"Undo",bundleKey:"UNDO_BUTTON_TOOLTIP"},Redo:{icon:"redo",command:"Redo",bundleKey:"REDO_BUTTON_TOOLTIP"},TextAlign:{Left:{icon:"text-align-left",style:"alignleft",bundleKey:"TEXTALIGH_LEFT"},Center:{icon:"text-align-center",style:"aligncenter",bundleKey:"TEXTALIGH_CENTER"},Right:{icon:"text-align-right",style:"alignright",bundleKey:"TEXTALIGH_RIGHT"},Full:{icon:"text-align-justified",style:"alignjustify",bundleKey:"TEXTALIGH_FULL"},bundleKey:"TEXTALIGN_BUTTON_TOOLTIP"},FontFamily:{AndaleMono:{text:"Andale Mono",commandValue:'"andale mono",monospace'},Arial:{text:"Arial",commandValue:"arial, helvetica, sans-serif"},ArialBlack:{text:"Arial Black",commandValue:'"arial black", sans-serif'},BookAntiqua:{text:"Book Antiqua",commandValue:'"book antiqua", palatino, serif'},ComicSansMS:{text:"Comic Sans MS",commandValue:'"comic sans ms", sans-serif'},CourierNew:{text:"Courier New",commandValue:'"courier new", couriret, monospace'},Georgia:{text:"Georgia",commandValue:"georgia, palatino, serif"},Helvetica:{text:"Helvetica",commandValue:'helvetica, arial, sans-serif'},Impact:{text:"Impact",commandValue:"impact, sans-serif"},Symbol:{text:"Symbol",commandValue:'"symbol"'},Tahoma:{text:"Tahoma",commandValue:"tahoma, arial, helvetica, sans-serif"},Terminal:{text:"Terminal",commandValue:"terminal, monaco, monospace"},TimesNewRoman:{text:"Times New Roman",commandValue:'"times new roman", times, sans-serif'},TrebuchetMS:{text:"Trebuchet MS",commandValue:'"trebuchet ms", geneva, sans-serif'},Verdana:{text:"Verdana",commandValue:"verdana, geneva, sans-serif"},Webdings:{text:"Webdings",commandValue:'"webdings"'},Wingdings:{text:"Wingdings",commandValue:'wingdings, "zapf dingbats"'}},FontSize:[8,10,12,14,18,24,36],TextColor:{icon:"text-color",command:"ForeColor",style:"color",defaultValue:"#000000",bundleKey:"TEXT_COLOR_BUTTON_TOOLTIP"},BackgroundColor:{icon:"color-fill",command:"HiliteColor",style:"background-color",defaultValue:"#ffffff",bundleKey:"BACKGROUND_COLOR_BUTTON_TOOLTIP"},InsertImage:{icon:"picture",bundleKey:"IMAGE_BUTTON_TOOLTIP"},InsertLink:{icon:"chain-link",bundleKey:"LINK_BUTTON_TOOLTIP"},Unlink:{icon:"broken-link",command:"unlink",bundleKey:"UNLINK_BUTTON_TOOLTIP"},InsertTable:{icon:"table-view",bundleKey:"TABLE_BUTTON_TOOLTIP"},FormatBlock:{Paragraph:{text:"Paragraph",commandValue:"p",bundleKey:"PARAGRAPH_BUTTON_TEXT"},Heading1:{text:"Heading 1",commandValue:"h1",bundleKey:"HEADING1_BUTTON_TEXT"},Heading2:{text:"Heading 2",commandValue:"h2",bundleKey:"HEADING2_BUTTON_TEXT"},Heading3:{text:"Heading 3",commandValue:"h3",bundleKey:"HEADING3_BUTTON_TEXT"},Heading4:{text:"Heading 4",commandValue:"h4",bundleKey:"HEADING4_BUTTON_TEXT"},Heading5:{text:"Heading 5",commandValue:"h5",bundleKey:"HEADING5_BUTTON_TEXT"},Heading6:{text:"Heading 6",commandValue:"h6",bundleKey:"HEADING6_BUTTON_TEXT"}}};sap.ui.richtexteditor.Accessibility={FontFamily:"FONT_FAMILY_TEXT",FontSize:"FONT_SIZE_TEXT",FontColor:"FONT_COLOR_TEXT",BackgroundColor:"BACKGROUND_COLOR_TEXT",FormatBlock:"FORMAT_BUTTON_TOOLTIP"};sap.ui.richtexteditor.ButtonGroups={"font-style":["Bold","Italic","Underline","Strikethrough"],"text-align":["TextAlign"],"formatselect":["FormatBlock"],"font":["FontFamily","FontSize","TextColor","BackgroundColor"],"structure":["UnorderedList","OrderedList","Outdent","Indent"],"link":["InsertLink","Unlink"],"insert":["InsertImage"],"undo":["Undo","Redo"],"clipboard":["Cut","Copy","Paste"],"custom":[]};var s=function(){sap.ui.require(["sap/m/MenuItem","sap/m/Button","sap/m/OverflowToolbarButton","sap/m/OverflowToolbarToggleButton","sap/m/SplitButton","sap/m/MenuButton","sap/m/Menu","sap/m/Select","sap/m/ToolbarSeparator","sap/m/OverflowToolbar","sap/m/OverflowToolbarLayoutData","sap/m/Dialog","sap/m/Label","sap/m/CheckBox","sap/m/Input","sap/m/HBox","sap/m/VBox","sap/m/Text","sap/m/StepInput","sap/ui/core/InvisibleText","sap/m/ColorPalettePopover"],function(m,B,o,c,S,M,d,e,t,f,g,D,L,h,i,H,v,T,j,I,k){sap.ui.richtexteditor.RichTextEditorHelper.bSapMLoaded=true;_.Button=B;_.OverflowToolbarButton=o;_.OverflowToolbarToggleButton=c;_.SplitButton=S;_.MenuButton=M;_.Menu=d;_.Select=e;_.ToolbarSeparator=t;_.OverflowToolbar=f;_.OverflowToolbarLayoutData=g;_.MenuItem=m;_.Dialog=D;_.Label=L;_.CheckBox=h;_.Input=i;_.HBox=H;_.VBox=H;_.Text=T;_.StepInput=j;_.InvisibleText=I;_.ColorPalettePopover=k;});};var _={};var a=function(c,S){if(_[c]){return new _[c](S);}};O.set("sap.ui.richtexteditor.RichTextEditorHelper",{bSapMLoaded:false,createOverflowToolbar:function(i,c){return a("OverflowToolbar",{id:i,content:c});},createInvisibleText:function(c){return a("InvisibleText",c);},createButton:function(c){c.type=sap.m.ButtonType.Transparent;return a("Button",c);},createOverflowToolbarButton:function(c){c.type=sap.m.ButtonType.Transparent;return a("OverflowToolbarButton",c);},createSplitButton:function(c){c.type=sap.m.ButtonType.Default;return a("SplitButton",c);},createOverflowToolbarToggleButton:function(c){c.type=sap.m.ButtonType.Transparent;return a("OverflowToolbarToggleButton",c);},createMenuButton:function(i,I,f,c,t){return a("MenuButton",{layoutData:a("OverflowToolbarLayoutData",{priority:sap.m.OverflowToolbarPriority.NeverOverflow}),type:sap.m.ButtonType.Transparent,id:i,menu:a("Menu",{itemSelected:f,items:I}),icon:c,tooltip:t});},createMenuItem:function(i,t,I){return a("MenuItem",{id:i,icon:I,text:t});},createToggleButton:function(c){c.layoutData=a("OverflowToolbarLayoutData",{priority:sap.m.OverflowToolbarPriority.NeverOverflow});c.type=sap.m.ButtonType.Transparent;return a("ToggleButton",c);},createToolbarSeparator:function(){return a("ToolbarSeparator");},createSelect:function(c){return a("Select",c);},createInput:function(c){return a("Input",c);},createLabel:function(c){return a("Label",c);},createCheckBox:function(c){return a("CheckBox",c);},createDialog:function(c){return a("Dialog",c).addStyleClass("sapUiContentPadding");},createText:function(c){return a("Text",c);},createHBox:function(c){return a("HBox",c);},createVBox:function(c){return a("VBox",c);},createStepInput:function(c){return a("StepInput",c);},createColorPalettePopover:function(c){return a("ColorPalettePopover",c);}});if(sap.ui.getCore().getLoadedLibraries()["sap.m"]){s();}else{var b=function(e){var E=e.getParameters();if(E.stereotype==="library"&&E.name==="sap.m"){setTimeout(s.bind(null),0);setTimeout(sap.ui.getCore()['detachLibraryChanged'].bind(sap.ui.getCore(),b),0);}};sap.ui.getCore().attachLibraryChanged(b);}return sap.ui.richtexteditor;});
sap.ui.predefine('sap/ui/richtexteditor/RichTextEditor',["sap/ui/thirdparty/jquery",'sap/ui/core/Control','sap/ui/core/ResizeHandler','./library','./ToolbarWrapper',"sap/ui/core/RenderManager","sap/ui/dom/includeScript","sap/base/Log","sap/base/security/sanitizeHTML","sap/ui/events/KeyCodes","sap/base/security/encodeXML","sap/ui/Device","sap/ui/core/Core","./RichTextEditorRenderer","sap/ui/dom/jquery/Selectors","sap/ui/dom/jquery/control"],function(q,C,R,l,T,a,b,L,s,K,e,D,c){"use strict";var E={Initial:"Initial",Loading:"Loading",Initializing:"Initializing",Loaded:"Loaded",Ready:"Ready",Destroyed:"Destroyed"};
/**
	 * Constructor for a new RichTextEditor.
	 *
	 *
	 * @param {string} [sId] ID for the new control, generated automatically if no ID is given
	 * @param {object} [mSettings] Initial settings for the new control
	 *
	 * @class
	 *
	 * The RichTextEditor-Control is used to enter formatted text. It uses the third-party component called TinyMCE.
	 * In addition to the native toolbar, you can also use a toolbar built with SAPUI5 controls.
	 * <h3>Overview</h3>
	 *
	 * With version 1.48 onward, aside from the native toolbar of the TinyMCE, the <code>RichTextEditor</code> can also use a
	 * toolbar built with SAPUI5 controls. Which toolbar is used is taken into consideration only while the
	 * control is being initialized and it will not be possible to change it during runtime, because of
	 * lifecycle incompatibilities between the SAPUI5 and the third-party library.
	 * The custom toolbar acts like a wrapper to the native toolbar and takes care of
	 * synchronizing the state of its internal controls with the current state of the selection in the editor
	 * (bold, italics, font styles etc.).
	 *
	 * <h4>Limitations</h4>
	 *
	 * <b>Note: The <code>RichTextEditor</code> uses a third-party component and therefore
	 * some additional limitations apply for its proper usage and support.
	 * For more information see the Preamble section in {@link topic:d4f3f1598373452bb73f2120930c133c sap.ui.richtexteditor}.
	 * </b>
	 *
	 * <h3>Guidelines</h3>
	 * <ul>
	 * <li> The <code>RichTextEditor</code> should be used for desktop apps only. However, if it is essential for your use case, you can enable the mobile version of TinyMCE, whilst having in mind the limitations. For more information see the {@link topic:d4f3f1598373452bb73f2120930c133c sap.ui.richtexteditor documentation}.</li>
	 * <li> In order to be usable, the control needs a minimum width 17.5 rem and height of 12.5 rem.</li>
	 * <li> Do not instantiate the <code>RichTextEditor</code> from a hidden container.</li>
	 * <li> Make sure you destroy the <code>RichTextEditor</code> instance instead of hiding it and create a new one when you show it again.</li>
	 * </ul>
	 *
	 * <h3>Usage</h3>
	 *
	 * <h4>When to use</h4>
	 * <ul>
	 * <li>You want to enable users to enter text and other elements (tables, images) with different styles and colors.</li>
	 * <li>You need to provide a tool for texts that require additional formatting.</li>
	 * </ul>
	 *
	 * <h4> When not to use</h4>
	 * <ul>
	 * <li>You want to let users add simple text that doesn’t require formatting. Use {@link sap.m.TextArea text area} instead.</li>
	 * <li>Use callbacks to the native third-party API with care, as there may be compatibility issues with later versions.</li>
	 * </ul>
	 *
	 * @extends sap.ui.core.Control
	 *
	 * @author SAP SE
	 *
	 * @constructor
	 * @public
	 * @disclaimer Since version 1.6.0.
	 * The RichTextEditor of SAPUI5 contains a third party component TinyMCE provided by Moxiecode Systems AB. The SAP license agreement covers the development of applications with RichTextEditor of SAPUI5 (as of May 2014).
	 * @alias sap.ui.richtexteditor.RichTextEditor
	 * @see {@link fiori:https://experience.sap.com/fiori-design-web/rich-text-editor/ Rich Text Editor}
	 * @see {@link topic:d4f3f1598373452bb73f2120930c133c}
	 * @ui5-metamodel This control/element also will be described in the UI5 (legacy) designtime metamodel
	 */

var d=C.extend("sap.ui.richtexteditor.RichTextEditor",{metadata:{library:"sap.ui.richtexteditor",properties:{value:{type:"string",group:"Data",defaultValue:''},textDirection:{type:"sap.ui.core.TextDirection",group:"Appearance",defaultValue:sap.ui.core.TextDirection.Inherit},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},height:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},editorType:{type:"string",group:"Misc",defaultValue:'TinyMCE4'},editorLocation:{type:"string",group:"Misc",defaultValue:'js/tiny_mce4/tinymce.js',deprecated:true},editable:{type:"boolean",group:"Misc",defaultValue:true},showGroupFontStyle:{type:"boolean",group:"Misc",defaultValue:true},showGroupTextAlign:{type:"boolean",group:"Misc",defaultValue:true},showGroupStructure:{type:"boolean",group:"Misc",defaultValue:true},showGroupFont:{type:"boolean",group:"Misc",defaultValue:false},showGroupClipboard:{type:"boolean",group:"Misc",defaultValue:true},showGroupInsert:{type:"boolean",group:"Misc",defaultValue:false},showGroupLink:{type:"boolean",group:"Misc",defaultValue:false},showGroupUndo:{type:"boolean",group:"Misc",defaultValue:false},wrapping:{type:"boolean",group:"Appearance",defaultValue:true},required:{type:"boolean",group:"Misc",defaultValue:false},sanitizeValue:{type:"boolean",group:"Misc",defaultValue:true},plugins:{type:"object[]",group:"Behavior",defaultValue:[]},useLegacyTheme:{type:"boolean",group:"Appearance",defaultValue:true},buttonGroups:{type:"object[]",group:"Behavior",defaultValue:[]},customToolbar:{type:"boolean",group:"Misc",defaultValue:false}},events:{change:{parameters:{newValue:{type:"string"}}},ready:{},readyRecurring:{},beforeEditorInit:{}},aggregations:{_toolbarWrapper:{type:"sap.ui.richtexteditor.IToolbar",multiple:false,visibility:"hidden",defaultValue:null},customButtons:{type:"sap.ui.core.Control",multiple:true,singularName:"customButton",defaultValue:null}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}}}});
d._lastId=0;d._iCountInstances=0;d.BUTTON_GROUPS=l.ButtonGroups;d.EDITORTYPE_TINYMCE4=l.EditorType.TinyMCE4;d.EDITORTYPE_TINYMCE5=l.EditorType.TinyMCE5;d.EDITORLOCATION_TINYMCE4="js/tiny_mce4/tinymce.min.js";d.EDITORLOCATION_TINYMCE5="js/tiny_mce5/tinymce.min.js";d.MAPPED_LANGUAGES_TINYMCE={"sh":"sr","ji":"yi","in":"id","iw":"he","no":"nb"};d.SUPPORTED_LANGUAGES_TINYMCE={"en":true,"af_ZA":true,"ar_SA":true,"ar":true,"az":true,"be":true,"bg_BG":true,"bn_BD":true,"bs":true,"ca":true,"cs_CZ":true,"cs":true,"cy":true,"da":true,"de_AT":true,"de":true,"dv":true,"el":true,"en_CA":true,"en_GB":true,"es_MX":true,"es":true,"et":true,"eu":true,"fa_IR":true,"fa":true,"fi":true,"fo":true,"fr_FR":true,"ga":true,"gd":true,"gl":true,"he_IL":true,"hi_IN":true,"hr":true,"hu_HU":true,"hy":true,"id":true,"is_IS":true,"it":true,"ja":true,"ka_GE":true,"kab":true,"kk":true,"km_KH":true,"ko_KR":true,"ku_IQ":true,"ku":true,"lb":true,"lt":true,"lv":true,"ml_IN":true,"ml":true,"mn_MN":true,"nb_NO":true,"nl":true,"pl":true,"pt_BR":true,"pt_PT":true,"ro":true,"ru":true,"si_LK":true,"sk":true,"sl_SI":true,"sl":true,"sr":true,"sv_SE":true,"ta_IN":true,"ta":true,"tg":true,"th_TH":true,"tr_TR":true,"tr":true,"tt":true,"ug":true,"uk_UA":true,"uk":true,"uz":true,"vi_VN":true,"vi":true,"zh_CN":true,"zh_TW":true};d.SUPPORTED_LANGUAGES_TINYMCE5={"eo":true,"es_ES":true,"it_IT":true,"ro_RO":true};d.SUPPORTED_LANGUAGES_DEFAULT_REGIONS={"zh":"CN","fr":"FR","bn":"BD","bg":"BG","ka":"GE","he":"IL","hi":"IN","hu":"HU","is":"IS","km":"KH","ko":"KR","ku":"IQ","ml":"IN","mn":"MN","nb":"NO","pt":"PT","si":"SI","sl":"SI","sv":"SE","th":"TH","tr":"TR","vi":"VN"};d.pLoadTinyMCE=null;
d.loadTinyMCE=function(f){if(f){var r=sap.ui.resource('sap.ui.richtexteditor',f),S=document.querySelector("#sapui5-tinyMCE"),g=S?S.getAttribute("src"):"";if(r!==g&&d._iCountInstances===1){delete window.tinymce;delete window.TinyMCE;d.pLoadTinyMCE=null;}if(!d.pLoadTinyMCE){d.pLoadTinyMCE=new Promise(function(h,i){b(r,"sapui5-tinyMCE",h,i);});}}return d.pLoadTinyMCE;};
d.prototype.init=function(){var f=this.getEditorType()===d.EDITORTYPE_TINYMCE5?d.EDITORTYPE_TINYMCE5:d.EDITORTYPE_TINYMCE4;this._bEditorCreated=false;this._sTimerId=null;d._iCountInstances++;this._textAreaId=this.getId()+"-textarea";this._iframeId=this._textAreaId+"_ifr";this._textAreaDom=document.createElement("textarea");this._textAreaDom.id=this._textAreaId;this._textAreaDom.style.height="100%";this._textAreaDom.style.width="100%";this.setEditorType(f);this._setupToolbar();};
d.prototype.onBeforeRendering=function(){this._customToolbarEnablement();var o=this.getAggregation("_toolbarWrapper");if(o){o.setToolbarEnabled(this.getEditable(),true);}if(!this._bCustomToolbarRequirementsFullfiled&&this.getCustomToolbar()){L.warning("Cannot set custom toolbar - not all requirements are fulfilled.");}if(this.isPropertyInitial("editorType")){L.warning("If the editor is different than TinyMCE 4 or TinyMCE 5 the editorType property is automatically set to TinyMCE 4, because of the removal of TinyMCE 3");}this.onBeforeRenderingTinyMCE();};
d.prototype.onAfterRendering=function(){this.onAfterRenderingTinyMCE();this.getDomRef()&&q(this).toggleClass("sapUiRTELegacyTheme",this.getUseLegacyTheme());};
d.prototype.reinitialize=function(){clearTimeout(this._iReinitTimeout);this._iReinitTimeout=window.setTimeout(this.reinitializeTinyMCE.bind(this),0);};
d.prototype.getNativeApi=function(){return this.getNativeApiTinyMCE();};
d.prototype.exit=function(){clearTimeout(this._reinitDelay);this.exitTinyMCE();d._iCountInstances--;};
d.prototype.setValue=function(v){v=(v===null||v===undefined)?"":v;if(this.getSanitizeValue()){L.trace("sanitizing HTML content for "+this);v=s(v);}if(v===this.getValue()){return this;}this.setProperty("value",v,true);v=this.getProperty("value");if(this.getEditorType()===d.EDITORTYPE_TINYMCE5||this.getEditorType()===d.EDITORTYPE_TINYMCE4){this.setValueTinyMCE(v);}else{this.reinitialize();}return this;};
d.prototype.setEditable=function(f){var o=this.getAggregation("_toolbarWrapper");this.setProperty("editable",f,true);if(o){o.setToolbarEnabled(f,true);}this.reinitialize();return this;};
d.prototype.setWrapping=function(w){this.setProperty("wrapping",w,true);this.reinitialize();return this;};
d.prototype.setRequired=function(r){this.setProperty("required",r,true);this.reinitialize();return this;};
d.prototype._setShowGroup=function(S,m){var o=this.getAggregation("_toolbarWrapper");this.setProperty(m.property,S,true);this.setButtonGroupVisibility(m.buttonGroup,S);if(!o){this.reinitialize();return this;}o.setShowGroup(m.buttonGroup,S);return this;};
d.prototype.setShowGroupFontStyle=function(S){return this._setShowGroup(S,{property:'showGroupFontStyle',buttonGroup:'font-style'});};
d.prototype.setShowGroupTextAlign=function(S){return this._setShowGroup(S,{property:'showGroupTextAlign',buttonGroup:'text-align'});};
d.prototype.setShowGroupStructure=function(S){return this._setShowGroup(S,{property:'showGroupStructure',buttonGroup:'structure'});};
d.prototype.setShowGroupFont=function(S){return this._setShowGroup(S,{property:'showGroupFont',buttonGroup:'font'});};
d.prototype.setShowGroupClipboard=function(S){return this._setShowGroup(S,{property:'showGroupClipboard',buttonGroup:'clipboard'});};
d.prototype.setShowGroupInsert=function(S){return this._setShowGroup(S,{property:'showGroupInsert',buttonGroup:'insert'});};
d.prototype.setShowGroupLink=function(S){return this._setShowGroup(S,{property:'showGroupLink',buttonGroup:'link'});};
d.prototype.setShowGroupUndo=function(S){return this._setShowGroup(S,{property:'showGroupUndo',buttonGroup:'undo'});};
d.prototype.setCustomToolbar=function(f){if(!this._tinyMCEStatus||this._tinyMCEStatus===E.Initial){this.setProperty("customToolbar",f);}else{L.error("Cannot set customToolbar property to "+f+" after initialization.",this);}return this;};
d.prototype.addPlugin=function(p){if(typeof p==="string"){p={name:p};}var P=this.getProperty("plugins")||[],i=P.some(function(o){return o.name===p.name;});!i&&P.push(p);this.setProperty("plugins",P);this.reinitialize();return this;};
d.prototype.removePlugin=function(p){var P=this.getProperty("plugins").slice(0);for(var i=0;i<P.length;++i){if(P[i].name===p){P.splice(i,1);--i;}}this.setProperty("plugins",P);this.reinitialize();return this;};
d.prototype.addButtonGroup=function(g){var G=this.getProperty("buttonGroups").slice(),o=this.getAggregation("_toolbarWrapper"),f=true;for(var i=0;i<G.length;++i){if(g==="string"&&G[i].name===g||G[i].name===g.name){return this;}}if(typeof g==="string"){f=false;switch(g){case"formatselect":f=true;g={name:"formatselect",buttons:["formatselect"]};break;case"styleselect":f=true;g={name:"styleselect",buttons:["styleselect"],customToolbarPriority:40};break;case"table":f=true;g={name:"table",buttons:["table"],customToolbarPriority:90};break;default:g={name:this._createId("buttonGroup"),buttons:[g]};}}if(g.visible===undefined){g.visible=true;}if(g.priority===undefined){g.priority=10;}if(g.row===undefined){g.row=0;}var B=this.getButtonGroups();B.push(g);this.setProperty("buttonGroups",B);if(o){o.addButtonGroupToContent(g,f);}return this;};
d.prototype.removeButtonGroup=function(g){var G=this.getProperty("buttonGroups").slice(0),o=this.getAggregation("_toolbarWrapper");for(var i=0;i<G.length;++i){if(G[i].name===g){G.splice(i,1);--i;o&&o.removeButtonGroup(g);}}this.setProperty("buttonGroups",G);this.reinitialize();return this;};
d.prototype.setButtonGroups=function(g){var o;if(!Array.isArray(g)){L.error("Button groups cannot be set: "+g+" is not an array.");return this;}this.setProperty("buttonGroups",g);o=this.getAggregation("_toolbarWrapper");if(o){o.setButtonGroups(g);}this.reinitialize();return this;};
d.prototype.setPlugins=function(p){var h=[];if(!Array.isArray(p)){L.error("Plugins cannot be set: "+p+" is not an array.");return this;}h=p.filter(function(P){return P.name==="lists";});if(this.getShowGroupStructure()&&!h.length){p.push({name:"lists"});}this.setProperty("plugins",p);return this;};
d.prototype.setButtonGroupVisibility=function(g,v){var B=this.getButtonGroups();for(var i=0,f=B.length;i<f;++i){if(B[i].name===g){B[i].visible=v;}}return this;};
d.prototype._createId=function(p){if(p===undefined){p="_rte";}return p+(d._lastId++);};
d.prototype._setupToolbar=function(){this.setPlugins([{name:"emoticons"},{name:"directionality"},{name:"tabfocus"},{name:"table"},{name:"image"},{name:"link"},{name:"textcolor"},{name:"colorpicker"},{name:"textpattern"},{name:"powerpaste"}]);this.setButtonGroups([{name:"font-style",visible:true,row:0,priority:10,customToolbarPriority:20,buttons:["bold","italic","underline","strikethrough"]},{name:"font",visible:false,row:0,priority:30,customToolbarPriority:50,buttons:["fontselect","fontsizeselect","forecolor","backcolor"]},{name:"clipboard",visible:true,row:1,priority:10,customToolbarPriority:110,buttons:["cut","copy","paste"]},{name:"structure",visible:true,row:1,priority:20,customToolbarPriority:60,buttons:["bullist","numlist","outdent","indent"]},{name:"e-mail",visible:false,row:1,priority:30,customToolbarPriority:10,buttons:[]},{name:"undo",visible:false,row:1,priority:40,customToolbarPriority:100,buttons:["undo","redo"]},{name:"insert",visible:false,row:1,priority:50,customToolbarPriority:80,buttons:["image","emoticons"]},{name:"link",visible:false,row:1,priority:60,customToolbarPriority:70,buttons:["link","unlink"]}]);this.addButtonGroup({name:"text-align",visible:true,row:0,priority:20,customToolbarPriority:30,buttons:["alignleft","aligncenter","alignright","alignjustify"]});};
d.prototype.setEditorType=function(f){var g;if(!this._bEditorCreated){this.setProperty("editorType",f);g=f===d.EDITORTYPE_TINYMCE5?d.EDITORLOCATION_TINYMCE5:d.EDITORLOCATION_TINYMCE4;this.setEditorLocation(g);if(f!==d.EDITORTYPE_TINYMCE4&&f!==d.EDITORTYPE_TINYMCE5){L.error('TinyMCE3 is removed now due to security concerns, please do NOT use it anymore. The framework automatically will load TinyMCE4 since v1.60');}this.initTinyMCE();}else{L.error("editorType property cannot be set after the RichtextEditor has been rendered");}return this;};
d.prototype.setEditorLocation=function(f){if(!this._bEditorCreated){this.setProperty("editorLocation",f);}else{L.error("editorLocation property cannot be set after the RichtextEditor has been rendered");}return this;};
d.prototype._createButtonRowsTinyMCE=function(B,g){B=B===undefined?",":B;g=g===undefined?"|":g;var f=this.getButtonGroups(),G=B+g+B,i,h,m,o={},I=this.getEditorType()===d.EDITORTYPE_TINYMCE5,j="",k=[];for(i=0,h=f.length;i<h;++i){m=f[i];if(!o[m.priority]){o[m.priority]=[];}if(m.priority===undefined){m.priority=Number.MAX_VALUE;}o[m.priority].push(m);}for(var n in o){for(i=0,h=o[n].length;i<h;++i){m=o[n][i];var r=m.row||0;if(!m.visible||!m.buttons||m.buttons.length===0){continue;}if(I){if(!j){j="";}j+=m.buttons.join(B)+G;}else{if(!k[r]){k[r]="";}k[r]+=m.buttons.join(B)+G;}}}if(I){return j;}for(i=0;i<k.length;++i){if(k[i]===null){continue;}else if(!k[i]){k.splice(i,1);k.push(null);continue;}if(k[i].substr(-3)===G){k[i]=k[i].substr(0,k[i].length-G.length);}if(k[i].substr(-1)===B){k[i]=k[i].substr(0,k[i].length-B.length);}if(k[i].length===0){k.splice(i,1);k.push(null);}}return k;};
d.prototype._createPluginsListTinyMCE=function(){var p=this.getPlugins(),P=[];for(var i=0,f=p.length;i<f;++i){P.push(p[i].name);}return P.join(",");};
d.prototype.tinyMCEReady=function(){var i=(this._iframeId?window.document.getElementById(this._iframeId):null);return!!i;};
d.prototype.setValueTinyMCE=function(v){if(this._bEditorCreated){q(document.getElementById(this._textAreaId)).text(v);this.setContentTinyMCE();}else{this.setProperty("value",v,true);if(this.getDomRef()){q(document.getElementById(this._textAreaId)).val(v);}}};
d.prototype.onTinyMCEChange=function(o){var p=this.getValue(),f=o.getContent(),n=this.getSanitizeValue()?s(f):f;if((p!==n)&&!this.bExiting){this.setProperty("value",n,true);this.fireChange({oldValue:p,newValue:n});}};
d.prototype._tinyMCEKeyboardHandler=function(o){var n,k=o['keyCode'];switch(k){case K.TAB:if(!this.$focusables.index(q(o.target))===0){var i=this.$focusables.length-1;this.$focusables.get(i).focus();}break;case K.ARROW_LEFT:case K.ARROW_UP:n=this.$focusables.index(q(o.target))-1;if(n===0){n=this.$focusables.length-2;}this.$focusables.get(n).focus();break;case K.ARROW_RIGHT:case K.ARROW_DOWN:n=this.$focusables.index(q(o.target))+1;if(n===this.$focusables.length-1){n=1;}this.$focusables.get(n).focus();break;default:break;}};
d.prototype.initTinyMCE=function(){this._oEditor=null;this._tinyMCEStatus=E.Initial;this._boundResizeEditorTinyMCE=this._resizeEditorTinyMCE.bind(this);this._bInitializationPending=false;this._lastRestHeight=0;};
d.prototype.exitTinyMCE=function(){this._bUnloading=true;R.deregister(this._resizeHandlerId);this._resizeHandlerId=null;this._removeEditorTinyMCE();};
d.prototype._removeEditorTinyMCE=function(){switch(this._tinyMCEStatus){case E.Initial:case E.Loading:case E.Loaded:break;case E.Initializing:this._pTinyMCEInitialized.then(this._removeEditorTinyMCE.bind(this,this._oEditor));break;case E.Ready:this._oEditor.remove();this._tinyMCEStatus=E.Destroyed;this._boundResizeEditorTinyMCE=null;this._oEditor=null;break;case E.Destroyed:break;default:L.error("Unknown TinyMCE status: "+this._tinyMCEStatus);break;}};
d.prototype._shouldLoadTinyMCE=function(){var f=this.getEditorType();if(!window.tinymce){return true;}switch(f){case d.EDITORTYPE_TINYMCE4:return window.tinymce.majorVersion!="4";case d.EDITORTYPE_TINYMCE5:return window.tinymce.majorVersion!="5";default:return false;}};
d.prototype.onBeforeRenderingTinyMCE=function(){if(this._shouldLoadTinyMCE()){this._tinyMCEStatus=E.Loading;this._pTinyMCELoaded=d.loadTinyMCE(this.getEditorLocation()).then(function(){this._tinyMCEStatus=E.Loaded;}.bind(this));}else{this._pTinyMCELoaded=Promise.resolve();this._tinyMCEStatus=E.Loaded;}};
d.prototype.onAfterRenderingTinyMCE=function(){var o=this.getDomRef();if(this._shouldLoadTinyMCE()){this._pTinyMCELoaded.then(this.onAfterRenderingTinyMCE.bind(this));}else if(o){switch(this._tinyMCEStatus){case E.Initializing:o.appendChild(this._textAreaDom);break;case E.Loaded:case E.Loading:this.getDomRef().appendChild(this._textAreaDom);this.reinitializeTinyMCE();break;case E.Ready:o.appendChild(this._textAreaDom);this.reinitializeTinyMCE();break;default:L.error("Unknown TinyMCE status: "+this._tinyMCEStatus);break;}}};
d.prototype.reinitializeTinyMCE=function(){if(this._bInitializationPending||this._bUnloading){return;}var r=function(){if(this._oEditor){this._oEditor.remove();}this._initializeTinyMCE();}.bind(this);switch(this._tinyMCEStatus){case E.Initial:break;case E.Loading:this._bInitializationPending=true;this._pTinyMCELoaded.then(r);break;case E.Initializing:this._bInitializationPending=true;this._pTinyMCEInitialized.then(r);break;case E.Loaded:case E.Ready:this._bInitializationPending=true;setTimeout(function(){r();},0);break;default:L.error("Unknown TinyMCE status: "+this._tinyMCEStatus);break;}};
d.prototype.getNativeApiTinyMCE=function(){return this._oEditor;};
d.prototype.setValueTinyMCE=function(v){switch(this._tinyMCEStatus){case E.Initial:case E.Initializing:case E.Loading:break;case E.Ready:this._oEditor.setContent(v);this._oEditor.undoManager.clear();this._oEditor.undoManager.add();if(!this.getEditable()){q.each(this._oEditor.getDoc().getElementsByTagName("a"),function(i,A){A.target="_blank";});}break;default:L.error("Unknown TinyMCE status: "+this._tinyMCEStatus);break;}};
d.prototype._initializeTinyMCE=function(){this._pTinyMCEInitialized=new Promise(function(r,f){this._bInitializationPending=false;this._tinyMCEStatus=E.Initializing;this._textAreaDom.value=this._patchTinyMCEValue(this.getValue());window.tinymce.init(this._createConfigTinyMCE(function(){this._tinyMCEStatus=E.Ready;setTimeout(function(){if(!this._bInitializationPending){this._onAfterReadyTinyMCE();}r();}.bind(this),0);}.bind(this)));}.bind(this));};
d.prototype._patchTinyMCEValue=function(v){if(v.indexOf("<!--")===0){v="&#8203;"+v;}return v;};
d.prototype._onAfterReadyTinyMCE=function(){var o=document.getElementById(this._iframeId),f=this.getAggregation("_toolbarWrapper"),t=f&&f.getAggregation("_toolbar").getDomRef(),r=c.getLibraryResourceBundle("sap.ui.richtexteditor");if(o){o.setAttribute("aria-labelledby",this.getAriaLabelledBy().join(" "));}if(this._bUnloading){return;}if(this._tinyMCEDesktopDetected()||!this._bHasNativeMobileSupport){f&&f.getAggregation("_toolbar").removeStyleClass("sapUiHidden");}this._oEditor.on("change",function(j){this.onTinyMCEChange(this._oEditor);}.bind(this));if(this.getCustomToolbar()){this._oEditor.save();}var $=q(this._oEditor.getContainer());$.on('keydown',q.proxy(this,this._tinyMCEKeyboardHandler));var g=q(o),B=q(this._oEditor.getBody()),h=false;B.on('focus',function(){if(!h){h=true;if(D.browser.msie||D.browser.edge){g.trigger('activate');}else{g.trigger('focus');}B.trigger('focus');h=false;}});if(this.getTooltip()&&this.getTooltip().length>0){var i=this.getTooltip_Text();this._oEditor.getBody().setAttribute("title",i);g.attr("title",i);}this._registerWithPopupTinyMCE();if(!this._resizeHandlerId){this._resizeHandlerId=R.register(this,this._boundResizeEditorTinyMCE);}this._resizeEditorOnDocumentReady();if(t){t.setAttribute("aria-roledescription",r.getText("CUSTOM_TOOLBAR_ARIA_ROLEDESCRIPTION"));}this.fireReadyTinyMCE();};
d.prototype._resizeEditorOnDocumentReady=function(){var r=this._resizeEditorTinyMCE.bind(this);var o=this._oEditor.getDoc();if(!o){return;}if(o.readyState=="complete"){r();}else{o.addEventListener("readystatechange",function(){if(o.readyState=="complete"){r();}});}};
d.prototype._tinyMCEDesktopDetected=function(){return window.tinymce&&window.tinymce.Env.desktop;};
d.prototype.fireReadyTinyMCE=function(){switch(this._tinyMCEStatus){case E.Initial:case E.Loading:case E.Loaded:case E.Initializing:break;case E.Ready:if(!this._bInitializationPending){if(!this._readyFired){this._readyFired=true;this.fireReady.apply(this,arguments);}this.fireReadyRecurring.apply(this,arguments);}break;default:L.error("Unknown TinyMCE status: "+this._tinyMCEStatus);break;}};
d.prototype._getTextDirection=function(){if(this.getTextDirection()===this.getMetadata().getProperty("textDirection").getDefaultValue()){return c.getConfiguration().getRTL()?"rtl":"ltr";}else{return this.getTextDirection().toLowerCase();}};
d.prototype._createConfigTinyMCE=function(o){var f=this.getAggregation("_toolbarWrapper");var B=this._createButtonRowsTinyMCE(" ","|");if(B.length===0){B=false;}var p=this._createPluginsListTinyMCE();if(!this.getEditable()){p=p.replace(/(,powerpaste|powerpaste,)/gi,"");}var g={directionality:this._getTextDirection(),selector:"[id='"+this._textAreaId+"']",theme:this.getEditorType()===d.EDITORTYPE_TINYMCE5?"silver":"modern",menubar:false,language:this._getLanguageTinyMCE(),browser_spellcheck:true,convert_urls:false,plugins:p,contextmenu:false,toolbar_items_size:'small',toolbar:B,toolbar_mode:"sliding",statusbar:false,image_advtab:true,readonly:!this.getEditable(),nowrap:!this.getWrapping(),init_instance_callback:function(h){this._oEditor=h;o();}.bind(this)};if(this._bCustomToolbarRequirementsFullfiled&&f){g=f.modifyRTEToolbarConfig(g);}this.fireBeforeEditorInit({configuration:g});this._bHasNativeMobileSupport=g.mobile;return g;};
d.prototype._getLanguageTinyMCE=function(){var o=new sap.ui.core.Locale(c.getConfiguration().getLanguage()),f=o.getLanguage(),r=o.getRegion(),i=this.getEditorType()===d.EDITORTYPE_TINYMCE5,g;f=d.MAPPED_LANGUAGES_TINYMCE[f]||f;if(!r){r=d.SUPPORTED_LANGUAGES_DEFAULT_REGIONS[f];}g=r?f+"_"+r.toUpperCase():f;if(d.SUPPORTED_LANGUAGES_TINYMCE[g]){return g;}if(i&&d.SUPPORTED_LANGUAGES_TINYMCE5[g]){return g;}if(i&&d.SUPPORTED_LANGUAGES_TINYMCE5[f]){return f;}if(d.SUPPORTED_LANGUAGES_TINYMCE[f]){return f;}return"en";};
d.prototype._resizeEditorTinyMCE=function(){if(this._tinyMCEStatus!==E.Ready){return;}var o=this._oEditor.getContentAreaContainer(),f=this.getDomRef().offsetHeight,i=this._oEditor.getContainer().offsetHeight,g=o.offsetHeight,h=this.getAggregation("_toolbarWrapper"),j,r,k;j=h?h.getAggregation("_toolbar").getDomRef().offsetHeight:"0";r=f-(i-g)-j;k=Math.abs(this._lastRestHeight-r);if(k==0||k>5){try{this._oEditor.theme.resizeTo(undefined,r-2);}catch(m){}}this._lastRestHeight=r;};
d.prototype._registerWithPopupTinyMCE=function(){var B=c.getEventBus(),i=this.getEditorType()===d.EDITORTYPE_TINYMCE5,p=this.$().closest("[data-sap-ui-popup]");setTimeout(function(){if(p.length===1){var P=p.attr("data-sap-ui-popup"),f="tox-dialog-"+this.getId(),o={id:this._iframeId};B.publish("sap.ui","sap.ui.core.Popup.addFocusableContent-"+P,o);if(this._oEditor){this._oEditor.on('OpenWindow',function(g){if(i){q(".tox-dialog[role='dialog']").attr("id",f);}var o={id:i?f:g.win._id};B.publish("sap.ui","sap.ui.core.Popup.addFocusableContent-"+P,o);});this._oEditor.on('CloseWindow',function(g){var o={id:i?f:g.win._id};B.publish("sap.ui","sap.ui.core.Popup.removeFocusableContent-"+P,o);if(i){q(".tox-dialog[role='dialog']").attr("id");}});}}}.bind(this),0);};
d.prototype._checkCustomToolbarRequirements=function(){var r=this.getCustomToolbar()&&(this.getEditorType()===d.EDITORTYPE_TINYMCE4||this.getEditorType()===d.EDITORTYPE_TINYMCE5)&&l.RichTextEditorHelper.bSapMLoaded;this.$().toggleClass("sapUiRTEWithCustomToolbar",r);return r;};
d.prototype._customToolbarEnablement=function(){var f,t=this.getAggregation("_toolbarWrapper");this._bCustomToolbarRequirementsFullfiled=this._checkCustomToolbarRequirements();if(this._bCustomToolbarRequirementsFullfiled&&!t){f=this.getAggregation("customButtons");this.removeAllAggregation("customButtons");t=new T({editor:this});this.setAggregation("_toolbarWrapper",t);setTimeout(function(){var o=t.getAggregation("_toolbar");o&&o.addStyleClass("sapUiHidden");},0);if(f&&f.length){setTimeout(function(){f.forEach(function(B){t.modifyToolbarContent("add",B);});},0);}}};
["add","destroy","get","indexOf","insert","removeAll","remove"].forEach(function(m){var M=m+"CustomButton"+(["destroy","get","removeAll"].indexOf(m)>-1?"s":"");var f=/^(add|insert|destroy)/.test(m);d.prototype[M]=function(){var r=null,i=arguments[0],t=this.getAggregation("_toolbarWrapper");if(typeof i==="object"&&i.getMetadata().getName()!=="sap.m.Button"){L.error("Only sap.m.Button is allowed as aggregation.");return f?this:undefined;}if(t&&t.modifyToolbarContent){r=t.modifyToolbarContent.bind(t,m).apply(t,arguments);}else{r=this[m+"Aggregation"].bind(this,"customButtons").apply(this,arguments);}return f?this:r;};});return d;});
sap.ui.require.preload({
	"sap/ui/richtexteditor/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.ui.richtexteditor","type":"library","embeds":[],"applicationVersion":{"version":"1.88.0"},"title":"A rich text editor (RTE) control.","description":"A rich text editor (RTE) control. Requires installation of an additional rich text editor library.","ach":"CA-UI5-CTR-RIL","resources":"resources.json","offline":true},"sap.ui":{"technology":"UI5","supportedThemes":["base","sap_belize","sap_belize_hcb","sap_belize_hcw","sap_belize_plus","sap_bluecrystal","sap_fiori_3","sap_fiori_3_dark","sap_fiori_3_hcb","sap_fiori_3_hcw","sap_hcb"]},"sap.ui5":{"dependencies":{"minUI5Version":"1.88","libs":{"sap.ui.core":{"minVersion":"1.88.0"}}},"library":{"i18n":{"bundleUrl":"messagebundle.properties","supportedLocales":["","ar","bg","ca","cs","cy","da","de","el","en","en-GB","en-US-sappsd","en-US-saprigi","en-US-saptrc","es","es-MX","et","fi","fr","fr-CA","hi","hr","hu","id","it","iw","ja","kk","ko","lt","lv","ms","nl","no","pl","pt","pt-PT","ro","ru","sh","sk","sl","sv","th","tr","uk","vi","zh-CN","zh-TW"]},"content":{"controls":["sap.ui.richtexteditor.RichTextEditor","sap.ui.richtexteditor.ToolbarWrapper","sap.ui.richtexteditor.RTESplitButton"],"elements":[],"types":["sap.ui.richtexteditor.EditorType"],"interfaces":["sap.ui.richtexteditor.IToolbar"]}}}}'
},"sap/ui/richtexteditor/library-preload"
);
//# sourceMappingURL=library-preload.js.map