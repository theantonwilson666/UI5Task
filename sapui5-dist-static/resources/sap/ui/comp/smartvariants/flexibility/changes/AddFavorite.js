/*
 * ! SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	
 */
sap.ui.define(['sap/base/util/merge',"sap/base/Log"],function(m,L){"use strict";var A={};A.applyChange=function(c,v,p){var C=c.getContent();if(!C){L.error("Change does not contain sufficient information to be applied");return;}var M=p.modifier;var P=m({},M.getProperty(v,"adaptationInfo"));if(!P.addFavorites){P.addFavorites={};}if(v.setStandardFavorite){if(C.key===v.STANDARDVARIANTKEY){c.setRevertData({key:C.key,visible:v.getStandardFavorite()});v.setStandardFavorite(C.visible);}else{var i=v.getItemByKey(C.key);if(i){c.setRevertData({key:C.key,visible:i.getFavorite()});i.setFavorite(C.visible);}}}else{if(P.addFavorites.hasOwnProperty(C.key)){c.setRevertData({key:C.key,visible:P.addFavorites[C.key]});}}P.addFavorites[C.key]=C.visible;M.setProperty(v,"adaptationInfo",P);};A.completeChangeContent=function(c,s,p){if(!s.hasOwnProperty("content")){throw new Error("oSpecificChangeInfo.content should be filled");}if(!s.content.hasOwnProperty("key")){throw new Error("In oSpecificChangeInfo.content.key attribute is required");}if(!s.content.hasOwnProperty("visible")){throw new Error("In oSpecificChangeInfo.content.visible attribute  attribute is required");}};A.revertChange=function(c,v,p){var M=p.modifier;var P=m({},M.getProperty(v,"adaptationInfo"));var C=c.getRevertData();if(C){if(v.setStandardFavorite){if(C.key===v.STANDARDVARIANTKEY){v.setStandardFavorite(C.visible);}else{var i=v.getItemByKey(C.key);if(i){i.setFavorite(C.visible);}}}c.resetRevertData();P.addFavorites[C.key]=C.visible;}else{C=c.getContent();if(P.addFavorites&&P.addFavorites.hasOwnProperty(C.key)){delete P.addFavorites[C.key];}}M.setProperty(v,"adaptationInfo",P);};return A;},true);
