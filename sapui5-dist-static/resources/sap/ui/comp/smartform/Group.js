/*
 * ! SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	
 */
sap.ui.define(['sap/ui/comp/library','sap/ui/core/Element','sap/ui/layout/form/FormContainer',"sap/base/Log"],function(l,E,F,L){"use strict";var R;var G=F.extend("sap.ui.comp.smartform.Group",{metadata:{library:"sap.ui.comp",designtime:"sap/ui/comp/designtime/smartform/Group.designtime",properties:{useHorizontalLayout:{type:"boolean",group:"Misc",defaultValue:null},horizontalLayoutGroupElementMinWidth:{type:"int",group:"Misc",defaultValue:null},label:{type:"string",group:"Misc",defaultValue:null}},defaultAggregation:"groupElements",aggregations:{groupElements:{type:"sap.ui.comp.IFormGroupElement",multiple:true,singularName:"groupElement"},layout:{type:"sap.ui.layout.GridData",multiple:false}},_bVisibleElements:false}});G.prototype.init=function(){F.prototype.init.apply(this,arguments);this._oObserver.observe(this,{properties:["useHorizontalLayout","horizontalLayoutGroupElementMinWidth","label"]});};function _(v){var j=this.getGroupElements();for(var i=0;i<j.length;i++){if(j[i].isA("sap.ui.comp.smartform.SemanticGroupElement")){L.error("useHorizontalLayout can't be used for SemanticGroupElement",this);}else if(j[i].getUseHorizontalLayout()!=v){j[i].setUseHorizontalLayout(v);}}this._updateLayoutData();}G.prototype._updateLayoutData=function(){if(this.getUseHorizontalLayout()){var s=this.getParent();while(s&&!s.addGroup&&s.getParent){s=s.getParent();}if(s){var o=s.getLayout();if(!o||!o.getGridDataSpan()){if(!this.getLayoutData()){if(!R&&!this._bResponsiveFlowLayoutDataRequested){R=sap.ui.require("sap/ui/layout/ResponsiveFlowLayoutData");if(!R){sap.ui.require(["sap/ui/layout/ResponsiveFlowLayoutData"],a.bind(this));this._bResponsiveFlowLayoutDataRequested=true;}}if(R&&!this._bResponsiveFlowLayoutDataRequested){var r=new R({"linebreak":true,"linebreakable":true});r._bCreatedByGroup=true;this.setLayoutData(r);}}}else{this._updateLineBreaks();}}}else{var i=this.getLayoutData();if(i&&i._bCreatedByGroup){this.destroyLayoutData();}}};function a(r){R=r;this._bResponsiveFlowLayoutDataRequested=false;if(!this._bIsBeingDestroyed){this._updateLayoutData();}}function b(n){L.error("HorizontalLayoutGroupElementMinWidth is deprecated",this);var j=this.getGroupElements();for(var i=0;i<j.length;i++){j[i].setHorizontalLayoutGroupElementMinWidth(n);}}G.prototype.setEditMode=function(i){this._setEditable(i);return this;};G.prototype._updateLineBreaks=function(){if(!this.getUseHorizontalLayout()){return;}var s=this.getParent();if(!s){return;}while(s&&!s._getGridDataSpanNumbers&&s.getParent){s=s.getParent();}if(!s._getGridDataSpanNumbers){return;}var S=s._getGridDataSpanNumbers();if(!S){return;}var j=this.getGroupElements();j=j.filter(function(t){return t.isVisible();});var C=0;var k=0;var m=0;var n=0;var o=false;var p=false;var q=false;var r=false;for(var i=0;i<j.length;i++){var t=j[i];C++;k++;m++;n++;if(S.XL*C>12){o=true;C=1;}else{o=false;}if(S.L*k>12){p=true;k=1;}else{p=false;}if(S.M*m>12){q=true;m=1;}else{q=false;}if(S.S*n>12){r=true;n=1;}else{r=false;}t._setLinebreak(o,p,q,r);}};G.prototype._updateGridDataSpan=function(){if(!this.getUseHorizontalLayout()){return;}var j=this.getGroupElements();for(var i=0;i<j.length;i++){j[i]._updateGridDataSpan();}};G.prototype._updateFormContainerVisibility=function(){var i=this.getGroupElements();var v=false;v=i.some(function(o){return o.isVisible();});if(this._bVisibleElements!==v){this._bVisibleElements=v;if(this.isPropertyInitial("visible")){this.fireEvent("_visibleChanged");}}};function c(s){var t=this.getTitle();if(t&&(typeof t!=="string")){L.error("Title already set, Label can not be set",this);}else{this.setTitle(s);}}G.prototype.setVisible=function(v){var o=this.getVisible();F.prototype.setVisible.apply(this,arguments);if(v!=o||v!=this._bVisibleElements){this.fireEvent("_visibleChanged");}return this;};G.prototype.isVisible=function(){if(this.isPropertyInitial("visible")){return this._bVisibleElements;}else{return this.getVisible();}};G.prototype.addGroupElement=function(o){return this.addFormElement(o);};G.prototype.insertGroupElement=function(o,i){return this.insertFormElement(o,i);};G.prototype.getGroupElements=function(){return this.getFormElements();};G.prototype.indexOfGroupElement=function(o){return this.indexOfFormElement(o);};G.prototype.removeGroupElement=function(v){return this.removeFormElement(v);};G.prototype.removeAllGroupElements=function(){return this.removeAllFormElements();};G.prototype.destroyGroupElements=function(){return this.destroyFormElements();};G.prototype.addFormElement=function(o){if(!o){return this;}o=this.validateAggregation("groupElements",o,true);d.call(this,o);F.prototype.addFormElement.apply(this,arguments);e.call(this,o);return this;};G.prototype.insertFormElement=function(o,i){if(!o){return this;}o=this.validateAggregation("groupElements",o,true);d.call(this,o);F.prototype.insertFormElement.apply(this,arguments);e.call(this,o);return this;};G.prototype.removeFormElement=function(v){var o=F.prototype.removeFormElement.apply(this,arguments);if(o){o.detachVisibleChanged(this._updateFormContainerVisibility,this);h.call(this,o);this._updateFormContainerVisibility();this._updateLineBreaks();}return o;};G.prototype.removeAllFormElements=function(){var j=F.prototype.removeAllFormElements.apply(this,arguments);for(var i=0;i<j.length;i++){var o=j[i];o.detachVisibleChanged(this._updateFormContainerVisibility,this);h.call(this,o);}this._updateFormContainerVisibility();this._updateLineBreaks();return j;};G.prototype.destroyFormElements=function(){F.prototype.destroyFormElements.apply(this,arguments);this._updateFormContainerVisibility();this._updateLineBreaks();return this;};function d(o){var u=this.getUseHorizontalLayout();var H=this.getHorizontalLayoutGroupElementMinWidth();if(H!=o.getHorizontalLayoutGroupElementMinWidth){o.setHorizontalLayoutGroupElementMinWidth(H);}if(u!=o.getUseHorizontalLayout()){o.setUseHorizontalLayout(u);}o.attachVisibleChanged(this._updateFormContainerVisibility,this);f.call(this,o);}function e(o){this._updateFormContainerVisibility();if(this.getUseHorizontalLayout()){o._updateGridDataSpan();this._updateLineBreaks();}}G.prototype.setLayout=function(o){o=this.validateAggregation("layout",o,false);return this.setLayoutData(o);};G.prototype.getLayout=function(){return this.getLayoutData();};G.prototype.destroyLayout=function(o){return this.destroyLayoutData();};G.prototype.addCustomData=function(C){if(!C){return this;}F.prototype.addCustomData.apply(this,arguments);var j=this.getGroupElements();for(var i=0;i<j.length;i++){g.call(this,j[i],C);}return this;};G.prototype.insertCustomData=function(C,I){if(!C){return this;}F.prototype.insertCustomData.apply(this,arguments);var j=this.getGroupElements();for(var i=0;i<j.length;i++){g.call(this,j[i],C);}return this;};G.prototype.removeCustomData=function(C){var o=F.prototype.removeCustomData.apply(this,arguments);if(o){var j=this.getGroupElements();for(var i=0;i<j.length;i++){h.call(this,j[i],o.getId());}}return o;};G.prototype.removeAllCustomData=function(){var C=F.prototype.removeAllCustomData.apply(this,arguments);if(C.length>0){var j=this.getGroupElements();for(var i=0;i<j.length;i++){h.call(this,j[i]);}}return C;};G.prototype.destroyCustomData=function(){F.prototype.destroyCustomData.apply(this,arguments);var j=this.getGroupElements();for(var i=0;i<j.length;i++){h.call(this,j[i]);}return this;};function f(o){var C=this.getCustomData();for(var i=0;i<C.length;i++){g.call(this,o,C[i]);}}function g(o,C){if(l.smartform.inheritCostomDataToFields(C)){var n=C.clone();n._bFromGroup=true;n._sOriginalId=C.getId();o.addCustomData(n);}}function h(o,O){var C=o.getCustomData();for(var i=0;i<C.length;i++){var j=C[i];if(j._bFromGroup&&(!O||O==j._sOriginalId)){o.removeCustomData(j);}}}G.prototype.clone=function(I,j){var k=this.removeAllGroupElements();var C=F.prototype.clone.apply(this,arguments);for(var i=0;i<k.length;i++){var o=k[i];var m=o.clone(I,j);this.addGroupElement(o);C.addGroupElement(m);}return C;};G.prototype._observeChanges=function(C){F.prototype._observeChanges.apply(this,arguments);if(C.name=="label"){c.call(this,C.current);}else if(C.name=="useHorizontalLayout"){_.call(this,C.current);}else if(C.name=="horizontalLayoutGroupElementMinWidth"){b.call(this,C.current);}};return G;});
