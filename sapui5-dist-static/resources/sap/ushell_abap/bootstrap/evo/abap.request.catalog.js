// Copyright (c) 2009-2020 SAP SE, All Rights Reserved
sap.ui.define(["./abap.bootstrap.utils","sap/ui2/srvc/allcatalogs"],function(a){"use strict";var c={},s=a.isSapStatisticsSet();function _(u,S,C){var x;x=a.createAndOpenXHR(u,S);x.setRequestHeader("X-CSRF-Token","fetch");if(s){x.setRequestHeader("sap-statistics","true");}x.onreadystatechange=function(){if(this.readyState!==4){return;}C(x.status,x.getResponseHeader("x-csrf-token"),x.responseText);};x.send();}function b(D,S,C,R){if(S===200){D.resolve(JSON.parse(R).d,C);}else{D.reject(R);}}function d(S,f,p){var g="title",h="type eq 'CATALOG_PAGE' or type eq 'H' or type eq 'SM_CATALOG' or type eq 'REMOTE'",i="/UI2/FLPNoActionChip",j,o=S.services[f],t=S.services.targetMappings.cacheId,u=a.getUrlParameterValue("sap-ui2-cache-disable");j=o.baseUrl+"/Pages('"+encodeURIComponent(p||i)+"')/allCatalogs?$expand=Chips/ChipBags/ChipProperties&"+"$orderby="+g;j=j+"&$filter="+encodeURIComponent(h);if(u){j+=(j.indexOf("?")<0?"?":"&")+"sap-ui2-cache-disable="+o["sap-ui2-cache-disable"];}if(t){j+=(j.indexOf("?")<0?"?":"&")+"sap-cache-id="+t;}return j;}function e(u){var D=new jQuery.Deferred();sap.ui.require(["sap/ui/thirdparty/datajs"],function(f){OData.read.$cache=OData.read.$cache||new sap.ui2.srvc.Map();OData.read.$cache.put(u,D.promise());});return D;}function r(S,n,p){if(n){return;}var A=d(S,"pbFioriHome",p),D=e(A);_(A,S,function(i,C,R){b(D,i,C,R);});}c.requestAllCatalogs=r;c._getAllCatalogsUrl=d;c._createODataDeferred=e;c._requestOData=_;c._processOData=b;c._setSapStatistics=function(v){s=v;};return c;});
