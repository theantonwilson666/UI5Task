// Copyright (c) 2009-2020 SAP SE, All Rights Reserved
sap.ui.define(["./abap.constants","sap/ushell/bootstrap/common/common.configure.ushell","sap/base/util/ObjectPath","sap/base/Log"],function(a,c,O,L){"use strict";function l(h){var C="sap/ushell_abap/bootstrap/evo/abap.configure.ushell";var m=h.messages;if(m&&m.length>0){for(var i=0;i<m.length;i+=1){if(m[i].severity==="error"){L.error(m[i].text,null,C);}else if(m[i].severity==="warning"){L.warning(m[i].text,null,C);}}}}function b(h){if(h.startupConfig){var S=O.get("services.Container.adapter.config.systemProperties",h);var C=O.create("services.Container.adapter",h);C.config=h.startupConfig;if(S){C.config.systemProperties=S;}}}function s(h){var S=O.get("ushell.spaces.configurable",h);if(S){var u=O.get("startupConfig.userProfile",h)||[];var o=u.filter(function(p){return p.id==="SPACES_ENABLEMENT";})[0];var i=o&&o.value;if(i==="true"){O.set("ushell.spaces.enabled",true,h);}else if(i==="false"){O.set("ushell.spaces.enabled",false,h);}}}function d(h){var C=O.create("services.CommonDataModel.adapter",h);C.module="sap.ushell.adapters.cdm.PagesCommonDataModelAdapter";}function e(C){var p=O.get("bootstrapPlugins",C)||{};Object.keys(p).forEach(function(P){var o=p[P];if(o.hasOwnProperty("formFactors")){var F=o.formFactors,D={};D.desktop=F.desktop||false;D.tablet=F.tablet||false;D.phone=F.phone||false;o.deviceTypes=D;delete o.formFactors;}});}function f(C){var u=O.get("startupConfig.userProfile",C)||[];var p=u.filter(function(P){return P.id==="PREFERRED_LOGON_LANGUAGE";})[0];if(p&&p.value!==undefined){var i=p.value!=="";C.startupConfig.isLanguagePersonalized=i;}}function g(){var C=c(a);l(C);f(C);b(C);s(C);if(O.get("ushell.spaces.enabled",C)){d(C);}e(C);return C;}return g;});
