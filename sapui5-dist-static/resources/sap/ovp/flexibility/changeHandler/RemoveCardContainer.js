/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.define(["sap/m/MessageToast","sap/ovp/app/resources"],function(M,O){"use strict";var R={"changeHandler":{},"layers":{"VENDOR":true,"CUSTOMER_BASE":true,"CUSTOMER":true,"USER":true}};R.changeHandler.applyChange=function(c,C,p){var m=p.modifier,o=p.appComponent.getRootControl(),a=o.getController(),u=a.getUIModel(),b=u.getProperty("/cards"),l=a.getLayout(),s=c.getContent().id,e=a._getCardId(s),A=p.appComponent,S={id:s,isLocalId:false},d=m.bySelector(S,A,o),i;for(i=0;i<b.length;i++){if(b[i].id===e){break;}}var f=b.splice(i,1);u.setProperty("/cards",b);c.setRevertData({id:s,oCard:f[0],index:i});m.setVisible(d,false);if(u.getProperty('/containerLayout')==='resizable'){var L=l.getDashboardLayoutUtil();if(L.aCards){L.updateCardVisibility([{id:L.getCardIdFromComponent(s),visibility:false}]);}}var g=O.getText("OVP_KEYUSER_TOAST_MESSAGE_FOR_REMOVE",[d.getComponentInstance().getComponentData().settings.title]);M.show(g,{duration:10000});l.rerender();return true;};R.changeHandler.getCondenserInfo=function(c){return{affectedControl:c.getSelector(),classification:sap.ui.fl.condenser.Classification.LastOneWins,uniqueKey:c.getSelector().id+'-'+c.getDefinition().changeType};};R.changeHandler.revertChange=function(c,C,p){var m=p.modifier,o=p.appComponent.getRootControl(),a=o.getController(),u=a.getUIModel(),b=u.getProperty("/cards"),l=a.getLayout(),r=c.getRevertData(),d=m.bySelector(r.id);b.splice(r.index,0,r.oCard);u.setProperty("/cards",b);m.setVisible(d,true);c.resetRevertData();if(u.getProperty('/containerLayout')==='resizable'){var L=l.getDashboardLayoutUtil();L.updateCardVisibility([{id:L.getCardIdFromComponent(r.id),visibility:true}]);}l.rerender();return true;};R.changeHandler.completeChangeContent=function(c,s,p){return;};return R;},true);
