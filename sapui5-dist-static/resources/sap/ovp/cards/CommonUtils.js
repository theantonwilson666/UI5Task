sap.ui.define(["sap/ovp/cards/OVPCardAsAPIUtils","sap/ui/Device","sap/base/util/UriParameters","sap/base/util/each","sap/ui/model/json/JSONModel","sap/ovp/cards/ovpLogger"],function(O,D,U,e,J,o){"use strict";var l=new o("OVP.cards.CommonUtils");return{app:undefined,navigationHandler:undefined,supportedCardTypes:["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.stack","sap.ovp.cards.linklist","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table","sap.ovp.cards.charts.analytical","sap.ovp.cards.charts.smart.chart","sap.ovp.cards.charts.bubble","sap.ovp.cards.charts.donut","sap.ovp.cards.charts.line"],ovpConstantModel:new J({dontIncludeUOM:true,firstDataPointIndex:0,secondDataPointIndex:1,thirdDataPointIndex:2,fourthDataPointIndex:3,fifthDataPointIndex:4,sixthDataPointIndex:5,firstDataFieldIndex:0,secondDataFieldIndex:1,thirdDataFieldIndex:2,fourthDataFieldIndex:3,fifthDataFieldIndex:4,sixthDataFieldIndex:5}),deviceModel:new J(D).setDefaultBindingMode("OneWay"),checkIfCardTypeSupported:function(t){return(this.supportedCardTypes.indexOf(t)!==-1);},enable:function(a,n){this.app=a;this.navigationHandler=n;},getApp:function(){return this.app;},getNavigationHandler:function(){return this.navigationHandler;},createKeyForCB:function(t,T){return t.indexOf(T)+1;},createCardComponent:function(v,m,c,s,C){return O.createCardComponent(v,m,c,s,C);},_getLayer:function(){var u=new U(window.location.href);var a=u.mParams["sap-ui-layer"];return a&&a[0];},_getLayerNamespace:function(){var L=this._getLayer();if(!L){return"customer";}return L.toLowerCase();},getUnitColumn:function(m,E,f){var t,p=E.property;var P,s;for(var i=0,a=p.length;i<a;i++){if(p[i].name!==m){continue;}if(p[i].hasOwnProperty("Org.OData.Measures.V1.ISOCurrency")){P=p[i]["Org.OData.Measures.V1.ISOCurrency"].Path;s=p[i]["Org.OData.Measures.V1.ISOCurrency"].String;if(P){return P;}else{return(f?s:"");}}if(p[i].hasOwnProperty("Org.OData.Measures.V1.Unit")){P=p[i].hasOwnProperty("Org.OData.Measures.V1.Unit").Path;s=p[i]["Org.OData.Measures.V1.Unit"].String;if(P){t=P;}else{t=f?s:"";}if(t&&t!="%"){return t;}else{return null;}}if(p[i].hasOwnProperty("sap:unit")){return p[i]["sap:unit"];}break;}return null;},onHeaderClicked:function(){},onContentClicked:function(E){},getContentDensityClass:function(){if(this._sContentDensityClass===undefined){if(document.body.classList.contains("sapUiSizeCozy")||document.body.classList.contains("sapUiSizeCompact")){if(document.body.classList.contains("sapUiSizeCozy")===true){this._sContentDensityClass="sapUiSizeCozy";}else if(document.body.classList.contains("sapUiSizeCompact")===true){this._sContentDensityClass="sapUiSizeCompact";}else{this._sContentDensityClass="";}}else if(!D.support.touch){this._sContentDensityClass="sapUiSizeCompact";}else{this._sContentDensityClass="sapUiSizeCozy";}}return this._sContentDensityClass;},_setCardpropertyDensityAttribute:function(){var c=this.getContentDensityClass();if(c==="sapUiSizeCompact"){return"compact";}else if(c==="sapUiSizeCozy"){return"cozy";}else if(!D.support.touch){return"compact";}else{return"cozy";}},getPixelPerRem:function(){var f=parseFloat(getComputedStyle(document.documentElement).fontSize);return f;},showODataErrorMessages:function(E){var m=[],a,r,b="";if(E&&E.responseText){var R=E.responseText;if(R){try{r=JSON.parse(R);}catch(c){l.error("Failed parsing response as JSON: "+R);}if(r&&r.error){a=r.error;}}}if(a&&a.innererror&&a.innererror.errordetails){m=a.innererror.errordetails;}if(a&&a.message&&Array.isArray(m)){m.unshift({message:a.message.value,severity:"error"});}if(m&&m.length>0){var A={};e(m,function(i,M){var s=M.message;if(s.endsWith(".")){s=s.substr(0,s.length-1);}if(!A[s]){A[s]=true;b=b+s+" ";}});}return b;},isODataV4:function(m){return(m&&m.getODataVersion&&m.getODataVersion()=="4.0")||false;}};},true);
