/*!
 * SAPUI5

(c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["sap/ui/thirdparty/jquery","sap/m/library","sap/base/security/encodeXML"],function(q,M,e){"use strict";var I={};I.render=function(r,c){if(!c._bThemeApplied){return;}var n=c._iVisiblePointsCount,a=100/n;r.write("<div");r.writeControlData(c);r.addClass("sapSuiteILC");r.writeClasses();var A={};A.role="listbox";A.roledescription=c._oRb.getText("INTERACTIVELINECHART");A.multiselectable=true;A.disabled=!c._isChartEnabled();A.labelledby=c.getAriaLabelledBy();A.owns=this._getAriaOwns(c,n);r.writeAccessibilityState(c,A);if(!c._isChartEnabled()){var s=c.getTooltip_AsString();if(typeof s==="string"||s instanceof String){r.writeAttributeEscaped("title",s);}}r.write(">");r.write("<div class=\"sapSuiteILCWrapperChild\" aria-hidden=\"true\">");r.write("<div class=\"sapSuiteILCInner\">");if(!c.getSelectionEnabled()){this._renderDisabledOverlay(r,c);}this._renderChartCanvas(r,c,n,a);r.write("<div");r.addClass("sapSuiteILCBottomLabelArea");if(c._fNormalizedZero){r.addClass("sapSuiteILCBottomLabelAreaNoDivider");}r.writeClasses();r.write(">");r.write("</div>");r.write("<div");r.addClass("sapSuiteILCInteraction");r.writeClasses();r.write(">");for(var b=0;b<n;b++){this._renderPoint(r,c,b,n,a);}r.write("</div>");r.write("</div>");var l="",R=false,p=c.getPoints();for(var i=0;i<n;i++){var C=p[i],S=C.getSecondaryLabel();if(S&&l!==S){l=S;if(!R){R=true;r.write("<div class=\"sapSuiteILCInnerBottom\">");}this._renderSecondaryLabel(r,C,i,a,l);}}if(R){r.write("</div>");}r.write("</div>");r.write("</div>");};I._renderSecondaryLabel=function(r,c,i,p,l){r.write("<div class=\"sapSuiteILCSecondaryLabel\"");r.addStyle("width",e(p+"%"));r.addStyle("left",e(i*p+"%"));r.writeStyles();r.write(">");r.write(e(l));r.write("</div>");};I._renderPoint=function(r,c,i,p,a){var P=c.getPoints()[i];r.write("<div");r.writeAttributeEscaped("id",c.getId()+"-point-area-"+i);r.addClass("sapSuiteILCSection");r.addClass("sapSuiteILCCanvasLayout");if(P.getSelected()){r.addClass("sapSuiteILCSelected");}r.writeClasses();r.addStyle("width",e(a+"%"));r.addStyle("left",e(i*a+"%"));r.writeStyles();r.write(">");var C=P.getColor();r.write("<div");if(!P._bNullValue){if(P.getSelected()){r.addClass("sapSuiteILCSelected");}if(C!==M.ValueColor.Neutral){r.addClass("sapSuiteICSemanticColor"+C);}r.writeAttributeEscaped("id",c.getId()+"-point-"+i);r.addClass("sapSuiteILCPoint");r.addStyle("bottom",e(c._aNormalizedValues[i]+"%"));}r.writeClasses();r.writeStyles();r.write("></div>");r.write("<div");r.addClass("sapSuiteILCBackgroundArea");r.writeClasses();r.write("></div>");var A=this._renderPointLabel(r,c,i,p);var s=P._getSemanticColor();if(s){A+=" "+s;}var t=P.getTooltip_Text();if(t&&t.trim()){A=t;}r.write("<div");r.addClass("sapSuiteILCInteractionArea");r.addClass("sapMPointer");r.writeClasses();if(i===0&&c._isChartEnabled()){r.writeAttribute("tabindex","0");}r.writeAttributeEscaped("id",c.getId()+"-interaction-area-"+i);var o={};o.role="option";o.label=A;o.selected=P.getSelected();o.posinset=i+1;o.setsize=p;r.writeAccessibilityState(P,o);if(c._isChartEnabled()){var b=P.getTooltip_AsString();if(typeof b==="string"||b instanceof String){r.writeAttributeEscaped("title",b);}}r.write("></div>");r.write("</div>");};I._renderChartCanvas=function(r,c,d,p){var i,P=c.getPoints();if(P.length!=0){r.write("<div");r.addClass("sapSuiteILCChartCanvas");r.addClass("sapSuiteILCCanvasLayout");r.writeClasses();r.write(">");r.write("<svg");r.addClass("sapSuiteILCSvgElement");r.writeClasses();r.writeAttribute("focusable","false");r.write(">");if(c._fNormalizedZero){r.write("<line");r.writeAttribute("x1","1%");r.writeAttributeEscaped("y1",100-c._fNormalizedZero+"%");r.writeAttribute("x2","99%");r.writeAttributeEscaped("y2",100-c._fNormalizedZero+"%");r.writeAttribute("stroke-width","1");r.addClass("sapSuiteILCDivider");r.writeClasses();r.write("/>");}var C=function(i,y,a){r.write("<line");r.writeAttributeEscaped("x1",p/2+(i-1)*p+"%");r.writeAttributeEscaped("y1",100-y+"%");r.writeAttributeEscaped("x2",p/2+(i*p)+"%");r.writeAttributeEscaped("y2",100-a+"%");r.writeAttribute("stroke-width","2");r.write("/>");};for(i=1;i<d;i++){if(!P[i-1]._bNullValue&&!P[i]._bNullValue){C(i,c._aNormalizedValues[i-1],c._aNormalizedValues[i]);}}if(c._fNormalizedPrecedingPoint!==null){C(0,c._fNormalizedPrecedingPoint,c._aNormalizedValues[0]);}if(c._fNormalizedSucceedingPoint!==null){C(i,c._aNormalizedValues[i-1],c._fNormalizedSucceedingPoint);}r.write("</svg>");r.write("</div>");}};I._renderPointLabel=function(r,c,i,p){var P=c.getPoints()[i];var B=P.getLabel()||"",t=P.getDisplayedValue(),s=P.getSecondaryLabel()||"";var h;r.write("<div");r.addClass("sapSuiteILCTextElement");r.addClass("sapSuiteILCBottomText");r.addClass("sapMPointer");r.writeClasses();r.write(">");r.writeEscaped(B);r.write("</div>");r.write("<div");r.addClass("sapSuiteILCTextElement");r.addClass("sapSuiteILCToplabel");r.addClass("sapMPointer");if(!P._bNullValue){if(!t){t=P.getValue().toString();}h=[c._aNormalizedValues[i]];if(i>0&&!c.getPoints()[i-1]._bNullValue){h.push((c._aNormalizedValues[i]+c._aNormalizedValues[i-1])/2);}if(i<p-1&&!c.getPoints()[i+1]._bNullValue){h.push((c._aNormalizedValues[i]+c._aNormalizedValues[i+1])/2);}h.sort(function(a,b){return a-b;});if(P.getValue()===c.nMax&&c.nMax!==c.nMin){r.addStyle("bottom",e(h[h.length-1]+"%"));r.addClass("sapSuiteILCShiftAbove");}else if(P.getValue()===c.nMin&&c.nMax!==c.nMin){r.addStyle("bottom",e(h[0]+"%"));r.addClass("sapSuiteILCShiftBelow");}else if(Math.abs(c._aNormalizedValues[i]-h[0])<Math.abs(c._aNormalizedValues[i]-h[h.length-1])){r.addStyle("bottom",e(h[0]+"%"));r.addClass("sapSuiteILCShiftBelow");}else{r.addStyle("bottom",e(h[h.length-1]+"%"));r.addClass("sapSuiteILCShiftAbove");}}else{t=c._oRb.getText("INTERACTIVECHART_NA");r.addClass("sapSuiteILCShiftBelow");r.addClass("sapSuiteILCNaLabel");}r.writeClasses();r.writeStyles();r.write(">");r.writeEscaped(t);r.write("</div>");return B+" "+(s===""?"":s+" ")+t;};I._renderDisabledOverlay=function(r,c){r.write("<div");r.addClass("sapSuiteILCDisabledOverlay");r.writeClasses();r.write(">");r.write("</div>");};I._getIdReferenceList=function(c,p,s){var P=[];for(var i=0;i<p;i++){P.push(c.getId()+s+i);}return P.join(" ");};I._getAriaDescribedBy=function(c,p){return this._getIdReferenceList(c,p,"-point-area-");};I._getAriaOwns=function(c,p){return this._getIdReferenceList(c,p,"-interaction-area-");};return I;},true);
