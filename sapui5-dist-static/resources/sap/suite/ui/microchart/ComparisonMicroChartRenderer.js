/*!
 * SAPUI5

(c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(['./library','sap/suite/ui/microchart/MicroChartRenderUtils','sap/ui/core/theming/Parameters','sap/m/library'],function(l,M,P,m){"use strict";var V=m.ValueColor;var C={apiVersion:2};C.render=function(r,c){if(!c._bThemeApplied){return;}if(c._hasData()){var a=c.getTooltip_AsString(c.hasListeners("press"));r.openStart("div",c);this._writeMainProperties(r,c);if(c.getShrinkable()){r.class("sapSuiteCpMCShrinkable");r.style("height","auto");}r.openEnd();this._renderInnerContent(r,c,a);r.openStart("div");r.attr("id",c.getId()+"-info");r.attr("aria-hidden","true");r.style("display","none");r.openEnd();r.text(a);r.close("div");r.openStart("div");r.attr("id",c.getId()+"-hidden");r.attr("aria-hidden","true");r.attr("focusable","false");r.openEnd();r.close("div");r.close("div");}else{this._renderNoData(r,c);}};C._writeMainProperties=function(r,c){var i=c.hasListeners("press");this._renderActiveProperties(r,c);var a=c.getTooltip_AsString(i);r.attr("role","figure");if(c.getAriaLabelledBy().length){r.accessibilityState(c);}else{r.attr("aria-label",a);}r.class("sapSuiteCpMC");r.class("sapSuiteCpMCChartContent");r.class(c._isResponsive()?"sapSuiteCpMCResponsive":"sapSuiteCpMCSize"+c.getSize());r.class("sapSuiteCpMCViewType"+c.getView());r.style("width",c.getWidth());r.style("height",c.getHeight());};C._renderInnerContent=function(r,c){var a=c.getColorPalette().length,b=0,d=c.getData(),e=c._calculateChartData();var n=function(s){if(a){if(b===a){b=0;}s=c.getColorPalette()[b++].trim();}return P.get(s)||s;};r.openStart("div");r.class("sapSuiteCpMCVerticalAlignmentContainer");r.openEnd();for(var i=0;i<e.length;i++){this._renderChartItem(r,c,e[i],i,n(d[i].getColor()));}r.close("div");};C._renderChartItem=function(r,c,o,i,s){var d=c.getData();r.openStart("div",d[i]);r.class("sapSuiteCpMCChartItem");r.openEnd();this._renderChartTitle(r,c,i);this._renderChartBar(r,c,o,i,s);this._renderChartValue(r,c,i,s);r.close("div");};C._renderChartBar=function(r,c,o,i,s){var d=c.getData()[i];r.openStart("div");r.attr("id",c.getId()+"-chart-item-bar-"+i);r.class("sapSuiteCpMCChartBar");if(c.getData()[i].hasListeners("press")){if(i===0){r.attr("tabindex","0");}r.attr("role","presentation");r.attr("aria-label",c._getBarAltText(i));if(!l._isTooltipSuppressed(c._getBarAltText(i))){r.attr("title",c._getBarAltText(i));}else{r.attr("title","");}r.attr("data-bar-index",i);r.class("sapSuiteUiMicroChartPointer");}r.openEnd();if(o.negativeNoValue>0){r.openStart("div");r.attr("data-bar-index",i);r.class("sapSuiteCpMCChartBarNegNoValue");if(o.value>0||o.positiveNoValue>0){r.class("sapSuiteCpMCNotLastBarPart");}r.style("width",o.negativeNoValue+"%");r.openEnd();r.close("div");}if(o.value>0){r.openStart("div");r.attr("data-bar-index",i);r.class("sapSuiteCpMCChartBarValue");r.class("sapSuiteCpMCSemanticColor"+d.getColor());r.style("background-color",s?s:"");r.style("width",o.value+"%");r.openEnd();r.close("div");}if(o.positiveNoValue>0){r.openStart("div");r.attr("data-bar-index",i);r.class("sapSuiteCpMCChartBarNoValue");if(!!o.negativeNoValue&&!o.value){r.class("sapSuiteCpMCNegPosNoValue");}else if(!!o.negativeNoValue||!!o.value){r.class("sapSuiteCpMCNotFirstBarPart");}r.style("width",o.positiveNoValue+"%");r.openEnd();r.close("div");}r.close("div");};C._renderChartTitle=function(r,c,i){var d=c.getData()[i];r.openStart("div");r.attr("id",c.getId()+"-chart-item-"+i+"-title");r.class("sapSuiteCpMCChartItemTitle");r.openEnd();r.text(d.getTitle());r.close("div");};C._renderChartValue=function(r,c,i,s){var d=c.getData()[i];var S=c.getScale();var D=d.getDisplayValue();var a=D?D:""+d.getValue();var v=a+S;r.openStart("div");r.attr("id",c.getId()+"-chart-item-"+i+"-value");r.class("sapSuiteCpMCChartItemValue");if(V[s]){r.class("sapSuiteCpMCSemanticColor"+d.getColor());}if(d.getTitle()){r.class("sapSuiteCpMCTitle");}r.openEnd();if(!isNaN(d.getValue())){r.text(v);}r.close("div");};M.extendMicroChartRenderer(C);return C;},true);
