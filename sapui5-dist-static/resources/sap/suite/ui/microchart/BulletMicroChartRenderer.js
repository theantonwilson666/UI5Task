/*!
 * SAPUI5

(c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(['./library','sap/m/library','sap/suite/ui/microchart/MicroChartRenderUtils'],function(l,M,a){"use strict";var B={apiVersion:2};B.render=function(r,c){if(!c._bThemeApplied){return;}if(c._hasData()&&!isNaN(c.getAggregation("actual").getValue())){var C=c._calculateChartData();var f=+C.forecastValuePct;var s;if(c._isResponsive()){s="sapSuiteBMCResponsive";}else{s="sapSuiteBMCSize"+c.getSize();}var S=c.getScale();var d=sap.ui.getCore().getConfiguration().getRTL()?"right":"left";var m="sapSuiteBMCModeType"+c.getMode();var D=c.getMode()===l.BulletMicroChartModeType.Delta?c._calculateDeltaValue():0;var I=c.getActual()&&c.getActual()._isValueSet;var b=c.getShowActualValue()&&c.getSize()!==M.Size.XS&&c.getMode()===l.BulletMicroChartModeType.Actual;var e=c.getShowActualValueInDeltaMode()&&c.getSize()!==M.Size.XS&&c.getMode()===l.BulletMicroChartModeType.Delta;var g=c.getShowDeltaValue()&&c.getSize()!==M.Size.XS&&c.getMode()===l.BulletMicroChartModeType.Delta;var h=c.getShowTargetValue()&&c.getSize()!==M.Size.XS;var j=c.getShowThresholds();var A=c.getActualValueLabel();var k=c.getDeltaValueLabel();var t=c.getTargetValueLabel();var n=c.getThresholds();var o;if(I){o="sapSuiteBMCSemanticColor"+c.getActual().getColor();}r.openStart("div",c);this._writeMainProperties(r,c);r.openEnd();r.openStart("div");r.class("sapSuiteBMCVerticalAlignmentContainer");r.openEnd();r.openStart("div",c.getId()+"-bc-chart");r.class("sapSuiteBMCChart");r.class(s);r.openEnd();if((I&&(b||e))||(I&&c._isTargetValueSet&&g)){var v="";r.openStart("div");r.class("sapSuiteBMCTopLabel");r.openEnd();if(I&&(b||e)){var p=A?A:""+c.getActual().getValue();v=p+S;r.openStart("div",c.getId()+"-bc-item-value");r.class("sapSuiteBMCItemValue");r.class(o);r.class(s);r.openEnd();r.text(v);r.close("div");}else if(I&&c._isTargetValueSet&&g){var q=k?k:""+D;v=q+S;r.openStart("div",c.getId()+"-bc-item-value");r.class("sapSuiteBMCItemValue");r.class(o);r.class(s);r.openEnd();r.text("\u0394");r.text(v);r.close("div");}r.close("div");}r.openStart("div");r.class("sapSuiteBMCChartCanvas");r.openEnd();if(j){for(var i=0;i<C.thresholdsPct.length;i++){if(n[i]._isValueSet){this.renderThreshold(r,c,C.thresholdsPct[i],s);}}}r.openStart("div",c.getId()+"-chart-bar");r.class("sapSuiteBMCBar");r.class(s);r.class("sapSuiteBMCScaleColor"+c.getScaleColor());r.openEnd();r.close("div");if(I){if(c._isForecastValueSet&&c.getMode()===l.BulletMicroChartModeType.Actual){r.openStart("div",c.getId()+"-forecast-bar-value");r.class("sapSuiteBMCForecastBarValue");r.class(o);r.class(s);r.style("width",f+"%");r.openEnd();r.close("div");}r.openStart("div",c.getId()+"-bc-bar-value-marker");r.class("sapSuiteBMCBarValueMarker");r.class(m);if(!c.getShowValueMarker()){r.class("sapSuiteBMCBarValueMarkerHidden");}r.class(o);r.class(s);r.style(d,parseFloat(C.actualValuePct+parseFloat(1)+"%"));if(c.getMode()===l.BulletMicroChartModeType.Delta&&C.actualValuePct<=C.targetValuePct){r.style("margin","0");}r.openEnd();r.close("div");if(c.getMode()===l.BulletMicroChartModeType.Actual&&C.actualValuePct!==0){r.openStart("div",c.getId()+"-bc-bar-value");r.class("sapSuiteBMCBarValue");r.class(o);r.class(s);if(c._isForecastValueSet){r.class("sapSuiteBMCForecast");}r.style("width",C.actualValuePct+"%");r.openEnd();r.close("div");}else if(c._isTargetValueSet&&c.getMode()===l.BulletMicroChartModeType.Delta){r.openStart("div",c.getId()+"-bc-bar-value");r.class("sapSuiteBMCBarValue");r.class(o);r.class(s);r.style("width",Math.abs(C.actualValuePct-C.targetValuePct)+"%");r.style(d,(1+Math.min(C.actualValuePct,C.targetValuePct))+"%");r.openEnd();r.close("div");}}if(c._isTargetValueSet){r.openStart("div",c.getId()+"-bc-target-bar-value");r.class("sapSuiteBMCTargetBarValue");r.class(s);r.style(d,parseFloat(C.targetValuePct).toFixed(2)+"%");r.openEnd();r.close("div");r.close("div");if(h){r.openStart("div");r.class("sapSuiteBMCBottomLabel");r.openEnd();var T=t?t:""+c.getTargetValue();var u=T+S;r.openStart("div",c.getId()+"-bc-target-value");r.class("sapSuiteBMCTargetValue");r.class(s);r.openEnd();r.text(u);r.close("div");r.close("div");}}else{r.close("div");}r.close("div");r.openStart("div",c.getId()+"-info");r.attr("aria-hidden","true");r.style("display","none");r.openEnd();r.close("div");r.close("div");r.close("div");}else{this._renderNoData(r,c);}};B._writeMainProperties=function(r,c){var i=c.hasListeners("press");this._renderActiveProperties(r,c);var A=c.getTooltip_AsString(i);r.attr("role","figure");if(c.getAriaLabelledBy().length){r.accessibilityState(c);}else{r.attr("aria-label",A);}r.class("sapSuiteBMC");r.class("sapSuiteBMCContent");r.class(c._isResponsive()?"sapSuiteBMCResponsive":"sapSuiteBMCSize"+c.getSize());r.style("width",c.getWidth());r.style("height",c.getHeight());};B.renderThreshold=function(r,c,t,s){var d=sap.ui.getCore().getConfiguration().getRTL()?"right":"left",v=0.98*t.valuePct+1,C="sapSuiteBMCSemanticColor"+t.color;if(C==="sapSuiteBMCSemanticColor"+M.ValueColor.Error){r.openStart("div");r.class("sapSuiteBMCDiamond");r.class(s);r.class(C);r.style(d,v+"%");r.openEnd();r.close("div");}r.openStart("div");r.class("sapSuiteBMCThreshold");r.class(s);r.class(C);r.style(d,v+"%");r.openEnd();r.close("div");};a.extendMicroChartRenderer(B);return B;},true);
