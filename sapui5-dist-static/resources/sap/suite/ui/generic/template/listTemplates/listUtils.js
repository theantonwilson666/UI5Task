sap.ui.define(["sap/ui/core/library","sap/ui/generic/app/navigation/service/SelectionVariant","sap/ui/model/odata/AnnotationHelper","sap/base/util/extend","sap/ui/model/Context"],function(c,S,O,e,C){"use strict";var M=c.MessageType;var l="msg";function h(t,E){var b=E.getParameter("bindingParams");b.events=b.events||{};b.events.aggregatedDataStateChange=function(o){var B=t.oServices.oApplication.getBusyHelper();if(B.isBusy()||o.getSource().getLength()){return;}var d=o.getParameter("dataState");var a=d.getMessages().filter(function(k){return k.target===o.getSource().getPath()&&k.getType()===M.Error;});if(a.length){var i=sap.ui.getCore().getMessageManager();i.removeMessages(a);var p,L,j;t.oCommonUtils.getDialogFragmentAsync("sap.suite.ui.generic.template.listTemplates.fragments.MessagesOnRetrieval",{itemSelected:function(){L.setProperty("/backbtnvisibility",true);},onBackButtonPress:function(){j.navigateBack();L.setProperty("/backbtnvisibility",false);},onReject:function(){j.navigateBack();p.close();}},l,function(F){j=F.getContent()[0];}).then(function(D){p=D;L=p.getModel(l);L.setProperty("/messages",a);L.setProperty("/backbtnvisibility",false);p.open();});}};}function m(v){var o=new S();var V,a;v.forEach(function(b){V=b.getSelectOptionsPropertyNames();V.forEach(function(p){o.removeSelectOption(p);o.massAddSelectOption(p,b.getSelectOption(p));});a=b.getParameterNames();a.forEach(function(p){o.removeParameter(p);o.addParameter(p,b.getParameter(p));});});return o;}function f(s,o){var a=s.SelectOptions;var p=s.Parameters?g(s.Parameters):[];var d=new C(null,"/");var D={};if(a){a.forEach(function(b){b.PropertyName=b.PropertyName.PropertyPath;b.Ranges.forEach(function(r){r.Sign=r.Sign.EnumMember.split("/")[1];r.Option=r.Option.EnumMember.split("/")[1];r.Low=r.Low&&O.format(d,r.Low);r.High=r.High&&O.format(d,r.High);});});D.SelectOptions=a;}if(o.getConsiderAnalyticalParameters()){p.forEach(function(b){b.PropertyName=b.PropertyName.PropertyPath;b.PropertyValue=O.format(d,b.PropertyValue)||null;});D.Parameters=p;}return new S(D);}function g(s){var p=s&&s.map(function(P){return e({},P,{PropertyName:{PropertyPath:P.PropertyName.PropertyPath.split("/").pop()}});});return p;}return{handleErrorsOnTableOrChart:h,getMergedVariants:m,createSVObject:f,getSelectionVariantParameterNamesWithoutNavigation:g};});
