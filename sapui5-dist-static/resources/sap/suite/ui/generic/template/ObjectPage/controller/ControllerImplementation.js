sap.ui.define(["sap/ui/core/mvc/ControllerExtension","sap/m/MessageBox","sap/m/plugins/DataStateIndicator","sap/ui/model/Filter","sap/ui/model/Sorter","sap/ui/generic/app/navigation/service/SelectionVariant","sap/suite/ui/generic/template/genericUtilities/controlHelper","sap/suite/ui/generic/template/genericUtilities/testableHelper","sap/suite/ui/generic/template/detailTemplates/detailUtils","sap/suite/ui/generic/template/ObjectPage/controller/SideContentHandler","sap/suite/ui/generic/template/ObjectPage/extensionAPI/ExtensionAPI","sap/suite/ui/generic/template/js/AnnotationHelper","sap/m/Table","sap/ui/layout/DynamicSideContent","sap/suite/ui/generic/template/lib/ShareUtils","sap/ui/dom/jquery/Selectors","sap/suite/ui/generic/template/genericUtilities/FeLogger","sap/suite/ui/generic/template/ObjectPage/controller/MultipleViewsHandler","sap/suite/ui/generic/template/lib/MessageUtils","sap/ui/events/KeyCodes","sap/base/util/merge","sap/ui/model/FilterProcessor","sap/suite/ui/generic/template/js/StableIdHelper","sap/ui/core/Element","sap/uxap/ObjectPageSubSection","sap/ui/core/MessageType","sap/base/util/extend","sap/base/util/UriParameters","sap/base/util/isEmptyObject","sap/ui/dom/getFirstEditableInput","sap/ui/dom/jquery/Focusable","sap/suite/ui/generic/template/genericUtilities/FeError","sap/suite/ui/generic/template/lib/CreateWithDialogHandler","sap/ui/fl/apply/api/FlexRuntimeInfoAPI","sap/ui/Device","sap/suite/ui/generic/template/js/placeholderHelper"],function(C,M,D,F,S,a,c,t,d,b,E,A,R,f,g,h,l,m,n,K,o,p,q,r,O,s,u,U,v,w,y,z,B,G,H,I){"use strict";var J="ObjectPage.controller.ControllerImplementation";var L=new l(J).getLogger();var N=20;var P=10;function Q(e){e.setSelectedSection(null);}function T(e){return e.data("inlineCreate")==="true";}function V(e){var i=e.getBlocks().concat(e.getMoreBlocks()).concat(e.getActions());return i;}function W(e,j){if(e.getBindings){var k=e.getBindings();for(var i=0;i<k.length;i++){W(k[i],j);}}else{var x=e.getType();e.setType(x,j);}}var X=/[A-Za-z].*[A-Za-z]/;var Y={getMethods:function(Z,$,_){var a1={};var b1=d.getControllerBase(Z,$,_);Z.oController=_;var c1;var d1=new b(_,$,$.oComponentUtils.stateChanged);var e1;var f1;var g1;var h1;var i1;var j1=Object.create(null);var k1=null;var l1=[];var m1=null;var n1=null;var o1=null;var p1;var q1;var r1={};function s1(e){var i=e.getParameter("bindingParams");i.parameters=i.parameters||{};i.parameters.usePreliminaryContext=true;i.parameters.bCanonicalRequest=$.oServices.oApplication.mustRequireRequestsCanonical();i.parameters.batchGroupId="facets";return i;}function t1(){L.info("Activate object");var e=$.oServices.oCRUDManager.activateDraftEntity();var i=c1.getModel("ui");var j=i.getProperty("/createMode");e.then(function(x){H1();if(j){n.showSuccessMessageIfRequired($.oCommonUtils.getText("OBJECT_CREATED"),$.oServices);}else{n.showSuccessMessageIfRequired($.oCommonUtils.getText("OBJECT_SAVED"),$.oServices);}var c3=_.getOwnerComponent();$.oServices.oViewDependencyHelper.setAllPagesDirty([c3.getId()]);$.oServices.oViewDependencyHelper.unbindChildren(c3);$.oServices.oApplication.invalidatePaginatorInfo();var d3=c3.getNavToListOnSave();$.oServices.oApplication.navigateAfterActivation(!d3&&x.context);},Function.prototype);var k={activationPromise:e};$.oComponentUtils.fire(_,"AfterActivate",k);}function u1(e){var i=_.getView();var j=i.getModel();var k=$.oComponentUtils.isComponentDirty();var x=j.getPendingChanges();var c3=Object.create(null);if(x){for(var d3 in x){if(x.hasOwnProperty(d3)){var e3=j.getContext("/"+d3);c3[d3]={context:e3,change:x[d3]};}}}$.oCommonEventHandlers.submitChangesForSmartMultiInput();var f3=$.oServices.oCRUDManager.saveEntity();f3.then(function(h3){if(!e){var i3=$.oComponentUtils.getTemplatePrivateModel();i3.setProperty("/objectPage/displayMode",1);Z.setEditable(false);}v1(h3,i,k,c3,e);});var g3={saveEntityPromise:f3};$.oComponentUtils.fire(_,"AfterSave",g3);}function v1(e,i,j,k,x){var c3=c1.getModel("ui");var d3=c3.getProperty("/createMode");var e3=_.getOwnerComponent();$.oServices.oViewDependencyHelper.setParentToDirty(e3,e3.getEntitySet(),1);$.oServices.oViewDependencyHelper.unbindChildren(e3);var f3=e3.getNavToListOnSave();var g3=!f3||x;if(g3){if(d3){$.oComponentUtils.adaptUrlAfterNonDraftCreateSaved(i.getBindingContext(),x);}x2(c1);}else{Z.navigateUp();}var h3;if(d3){h3="OBJECT_CREATED";}else{h3=j?"OBJECT_SAVED":"OBJECT_NOT_MODIFIED";}n.showSuccessMessageIfRequired($.oCommonUtils.getText(h3),$.oServices);for(var i3 in k){var j3=k[i3];var k3=j3.context;var l3=j3.change;var m3=Object.keys(l3)||[];var n3=m3.indexOf("__metadata");if(n3>-1){m3.splice(n3,1);}$.oServices.oApplicationController.executeSideEffects(k3,m3);}}function w1(e){var i=e.getSource().getId();x1("SaveAndContEdit",i);}function x1(e,i){var j=function(e,i){var x;var c3;var d3;if($.oComponentUtils.isDraftEnabled()){x=1;c3=t1;d3="activate";}else{x=3;if(e==="SaveAndContEdit"){c3=u1.bind(null,true);d3=i;}else{c3=u1.bind(null,false);d3="save";}}var e3=$.oComponentUtils.getCRUDActionHandler();$.oCommonUtils.executeIfControlReady(e3.handleCRUDScenario.bind(null,x,c3),d3);};var k=Promise.resolve(_.beforeSaveExtension());k.then(j.bind(null,e,i),jQuery.noop());}function y1(e){if(T(e.getSource())){var i=e.getParameter("bindingParams");if(i.filters&&i.filters.length){var j=p.groupFilters(i.filters);if(!e.getParameter("messageFilterActive")){i.filters=new F({filters:[new F({filters:[new F({path:"IsActiveEntity",operator:"EQ",value1:true}),j],and:true}),new F({filters:[new F({path:"IsActiveEntity",operator:"EQ",value1:false}),new F({filters:[j,new F({path:"HasActiveEntity",operator:"EQ",value1:false})],and:false})],and:true})],and:false});}else{i.filters=j;}}var k=i.sorter[0]&&i.sorter[0].getGroupFunction();var x=k&&function(c3){var d3=c3.getObject();if(d3.IsActiveEntity||d3.HasActiveEntity){var e3=u({},k(c3));e3.key=e3.key.charAt(0)==="ยง"?"ยง"+e3.key:e3.key;return e3;}return{key:"ยง",text:$.oCommonUtils.getText("NEW_ENTRY_GROUP")};};if(e.getSource().data("disableInlineCreateSort")==="false"){i.sorter.unshift(new S("HasActiveEntity",false,x));}}}function z1(){return c1.getHeaderTitle();}function A1(e){var i=$.oComponentUtils.getTemplatePrivateModel();var j={shareEmailPressed:function(){var k=i.getProperty("/objectPage/headerInfo/objectTitle");var x=i.getProperty("/objectPage/headerInfo/objectSubtitle");if(x){k=k+" - "+x;}var c3=document.URL.replace(/\(/g,'%28').replace(/\)/g,'%29');sap.m.URLHelper.triggerEmail(null,k,c3);},shareJamPressed:function(){g.openJamShareDialog(i.getProperty("/objectPage/headerInfo/objectTitle")+" "+i.getProperty("/objectPage/headerInfo/objectSubtitle"));},getModelData:function(){return{serviceUrl:"",title:i.getProperty("/objectPage/headerInfo/objectTitle"),subtitle:i.getProperty("/objectPage/headerInfo/objectSubtitle"),customUrl:g.getCustomUrl()};}};g.openSharePopup($.oCommonUtils,e,j);}function B1(){return $.oCommonUtils.getDialogFragmentAsync("sap.suite.ui.generic.template.ObjectPage.view.fragments.RelatedAppsSheet",{buttonPressed:function(e){var i=e.getSource();var j=i.getBindingContext("buttons");var k=j.getProperty("link");var x=j.getProperty("param");var c3=k.intent;var d3=c3.split("#")[1].split("-")[0];var e3=c3.split("-")[1].split("?")[0].split("~")[0];var f3={semanticObject:d3,action:e3,parameters:x};$.oServices.oDataLossHandler.performIfNoDataLoss(function(){var g3=_.getView().getBindingContext();$.oCommonEventHandlers.onRelatedAppNavigation(f3,g3);},Function.prototype);}},"buttons");}var C1;function D1(){C1=function(e){var i=e.getSource().getParent();var j=$.oServices.oApplication.getBusyHelper();if(j.isBusy()){return;}var k=_.getOwnerComponent();var x=k.getModel("_templPrivGlobal");var c3={objectPage:{currentEntitySet:k.getProperty("entitySet")}};x.setProperty("/generic/multipleViews",c3);var d3=$.oServices.oCRUDManager.deleteEntity();var e3=k.getBindingContext().getPath();var f3=Object.create(null);f3[e3]=d3;var g3={deleteEntityPromise:d3};$.oComponentUtils.fire(_,"AfterDelete",g3);i.close();};return $.oCommonUtils.getDialogFragmentAsync("sap.suite.ui.generic.template.ObjectPage.view.fragments.TableDeleteConfirmation",{onCancel:function(e){var i=e.getSource().getParent();i.close();},onDelete:function(e){C1(e);}},"delete",Function.prototype,true);}function E1(){var i;var e=$.oServices.oApplication.getBusyHelper();if(e.isBusy()){return;}var j=$.oComponentUtils.getTemplatePrivateModel();var k=(j.getProperty("/objectPage/headerInfo/objectTitle")||"").trim();var x=j.getProperty("/objectPage/headerInfo/objectSubtitle");var c3=$.oComponentUtils.getViewLevel();var i=c3>1;var d3={};d3.title=$.oCommonUtils.getText("ST_GENERIC_DELETE_TITLE");d3.text=$.oCommonEventHandlers.getDeleteText(k,x,!i,i);var e3=Promise.resolve(_.beforeDeleteExtension());e3.then(function(f3){u(d3,f3);D1().then(function(g3){var h3=g3.getModel("delete");h3.setData(d3);g3.open();});},Function.prototype);}function F1(e){var i=e.getParameter("columnInfos");var j=i&&i.length-1;while(j>=0){if(i[j].ignore){i.splice(j,1);}j-=1;}var k=i.reduce(function(c3,d3){if(!d3.type&&!d3.customParseFunction){c3.push(d3);}return c3;},[]);if(k.length>0){var x=$.oCommonUtils.getText("DATA_PASTE_UNSUPPORTED_FORMAT_MESSAGE");M.show(x,{icon:M.Icon.ERROR,title:$.oCommonUtils.getText("ST_ERROR"),actions:[sap.m.MessageBox.Action.CLOSE]});}}function G1(e){var j;var k=e.getSource();var x=k.getId();var c3=x.split("::Table")[0]+"::addEntry";var d3=_.byId(c3);if(!d3){return;}var e3=e.getParameter("result");if(e3){if(e3.errors){var f3=e3.errors.map(function(o3){return o3.message;});var g3=$.oCommonUtils.getText("DATA_PASTE_ERROR_MESSAGE",[f3.length]);var h3=$.oCommonUtils.getText("DATA_PASTE_ERROR_CORRECTION_MESSAGE");var i3=$.oCommonUtils.getText("DATA_PASTE_ERROR_CORRECTION_NOTE");f3.unshift("");f3.unshift(i3);f3.unshift(h3);M.show(g3,{icon:M.Icon.ERROR,title:$.oCommonUtils.getText("ST_ERROR"),actions:[sap.m.MessageBox.Action.CLOSE],details:f3.join("<br>")});}else if(e3.parsedData){j=e3.parsedData;if(j&&j.length){var j3=j.length;var k3;var l3,m3=[];var n3=sap.m.DraftIndicatorState.Saved;for(var i=0;i<j3;i++){k3=i<j3-1;l3=$.oCommonEventHandlers.addEntry(d3,true,undefined,j[i],k3);m3.push(l3);}Promise.all(m3).then(function(){var o3=$.oComponentUtils.getTemplatePrivateGlobalModel();o3.setProperty("/generic/draftIndicatorState",n3);});}}}}function H1(){var e=$.oComponentUtils.getTemplatePrivateModel();var i=e.getProperty("/objectPage/aPasteAttachedTables");var j=i.length;var k;var x;while(j>=0){k=i[j];x=_.byId(k+"::Table");if(x&&x.isA("sap.ui.comp.smarttable.SmartTable")&&x.hasListeners("paste")){x.detachBeforePaste(F1);x.detachPaste(G1);i.splice(j,1);}j-=1;}}function I1(e){$.oCommonUtils.executeIfControlReady(E1,"delete");}function J1(e,i){var j,k;if(e){k=e.context||(e.targetSiblingKey?e.draftAdministrativeData:e);if($.oServices.oDraftController.getDraftContext().hasDraft(k)){$.oServices.oViewDependencyHelper.setRootPageToDirty();j=k.context||k;}}if(j){$.oServices.oApplication.invalidatePaginatorInfo();$.oServices.oApplication.switchToDraft(j,e.targetSiblingKey);}else{var x=$.oComponentUtils.getTemplatePrivateModel();x.setProperty("/objectPage/displayMode",2);x2(c1);}Z.setEditable(true);}var K1;function L1(e){e=!!e&&typeof e==="boolean";var i=$.oServices.oCRUDManager.editEntity(e);i.then(function(j){if(j.draftAdministrativeData){K1(j.draftAdministrativeData.CreatedByUserDescription||j.draftAdministrativeData.CreatedByUser);}else{J1(j,false);}});}K1=function(e){var i;$.oCommonUtils.getDialogFragmentAsync("sap.suite.ui.generic.template.ObjectPage.view.fragments.UnsavedChangesDialog",{onEdit:function(){i.close();L1(true);},onCancel:function(){i.close();}},"Dialog").then(function(j){i=j;var k=$.oComponentUtils.getMainComponentUtils();var x=$.oServices.oApplication.getBusyHelper();x.setBusy(k);k.then(function(c3){var d3=c3.getText("DRAFT_LOCK_EXPIRED",[e]);var e3=i.getModel("Dialog");e3.setProperty("/unsavedChangesQuestion",d3);i.open();});});};function M1(){var j="{\"SelectionVariantID\":\"\"}";var k=_.getOwnerComponent();var c3=k.getEntitySet();var d3=k.getModel();var e3=d3.getMetaModel();var f3=e3.getODataEntitySet(c3);var g3=e3.getODataEntityType(f3.entityType);var h3=g3.property;var i3=[];for(var x in h3){var j3=h3[x];var k3=j3["com.sap.vocabularies.Common.v1.FieldControl"]&&j3["com.sap.vocabularies.Common.v1.FieldControl"].Path;if(k3&&i3.indexOf(k3)<0){i3.push(k3);}}var l3=_.getView().getBindingContext();var m3=l3.getObject();var n3=new a();for(var i in h3){var o3=h3[i].type;var p3=h3[i].name;var q3=m3[h3[i].name];if(i3.indexOf(p3)>-1){continue;}if(p3&&(q3||o3==="Edm.Boolean")){if(o3==="Edm.Time"&&q3.ms!==undefined){q3=q3.ms;}if(typeof q3!=="string"){try{q3=q3.toString();}catch(e){q3=q3+"";}}n3.addParameter(p3,q3);}}j=n3.toJSONString();return j;}function N1(e,i){var j=true;var k=i.getModel();i=i instanceof R?i.getParent():i;var x=$.oCommonUtils.getDeleteRestrictions(i);var c3=x&&x.Deletable&&x.Deletable.Path;if(c3){j=k.getProperty(c3,e);}return j;}var O1;function P1(e,j,k){var x=[];O1=function(c3){var d3=$.oServices.oApplication.getBusyHelper();var e3=c3.getSource().getParent();x=[];var f3;var g3;var h3=_.getView().getModel().getObject(j[0].getPath());for(var i=0;i<j.length;i++){if(N1(j[i],e)){x.push(j[i].getPath());}}var i3=$.oServices.oCRUDManager.deleteEntities({pathes:x});d3.setBusy(i3);$.oServices.oApplicationController.executeSideEffects(e.getBindingContext(),[],[e.getTableBindingPath()]);i3.then(function(k3){$.oCommonUtils.refreshSmartTable(e);if(h3.IsActiveEntity===false){g3=0;}else{g3=k3.length;}f3=x.length-g3;var l3="";if(f3>0){if(c.isUiTable(e.getTable())){var m3=e.getTable().getPlugin("sap.ui.table.plugins.SelectionPlugin");if(m3){m3.clearSelection();}}if(f3>1){l3=$.oCommonUtils.getContextText("DELETE_SUCCESS_PLURAL_WITH_COUNT",e.getId(),null,[f3]);}else{if(g3>0){l3=$.oCommonUtils.getContextText("DELETE_SUCCESS_WITH_COUNT",e.getId(),null,[f3]);}else{l3=$.oCommonUtils.getContextText("ITEM_DELETED",e.getId());}}}if(g3>0){if(g3>1){l3+=l3&&l3+"\n";l3+=$.oCommonUtils.getContextText("DELETE_ERROR_PLURAL_WITH_COUNT",e.getId(),null,[g3]);}else{if(f3>0){l3+="\n";l3+=$.oCommonUtils.getContextText("DELETE_ERROR_WITH_COUNT",e.getId(),null,[g3]);}else{l3+=$.oCommonUtils.getContextText("DELETE_ERROR",e.getId());}}}if(l3){if(g3>0){M.error(l3);}else{n.showSuccessMessageIfRequired(l3,$.oServices);}}});var j3={deleteEntitiesPromise:i3,sUiElementId:k,aContexts:j};$.oComponentUtils.fire(_,"AfterLineItemDelete",j3);e3.close();};return $.oCommonUtils.getDialogFragmentAsync("sap.suite.ui.generic.template.ObjectPage.view.fragments.TableDeleteConfirmation",{onCancel:function(i){var c3=i.getSource().getParent();c3.close();},onDelete:function(i){O1(i);}},"delete",Function.prototype,true);}function Q1(e){var i=$.oCommonUtils.getOwnerControl(e);if(!c.isSmartTable(i)){i=i.getParent();}var j=$.oCommonUtils.getSelectedContexts(i);var k=e.getParent().getParent().getId();R1(i,j,k);}function R1(e,j,k){if(j.length===0){M.error($.oCommonUtils.getText("ST_GENERIC_NO_ITEM_SELECTED"),{styleClass:$.oCommonUtils.getContentDensityClass()});return;}var x=[];var c3;var d3=[];if("getMode"in e.getTable()){c3=e.getTable().getMode();}for(var i=0;i<j.length;i++){if(N1(j[i],e)){x.push(j[i].getPath());}else{d3.push(j[i]);}}var e3={};e3.undeletableCount=0;e3.tableMode=c3;if(j.length>1){e3.title=$.oCommonUtils.getText("ST_GENERIC_DELETE_TITLE_WITH_COUNT",[j.length]);e3.text=$.oCommonUtils.getContextText("DELETE_SELECTED_ITEMS",e.getId());}else{e3.title=$.oCommonUtils.getText("ST_GENERIC_DELETE_TITLE");e3.text=$.oCommonEventHandlers.getSelectedItemContextForDeleteMessage(e,j[0],true);}if(d3.length>0){e3.undeletableText=$.oCommonUtils.getContextText("DELETE_UNDELETABLE_ITEMS",e.getId(),null,[d3.length,j.length]);if(c3==='Delete'){e3.undeletableCount=d3.length;e3.undeletableText=undefined;e3.text=$.oCommonUtils.getText("DELETE_UNDELETABLE_ITEM");}}var f3={sUiElementId:k,aContexts:j};var g3=Promise.resolve(_.beforeLineItemDeleteExtension(f3));g3.then(function(h3){u(e3,h3);P1(e,j,k).then(function(i3){if(!d3.length){e3.undeletableText=undefined;}var j3=i3.getModel("delete");j3.setData(e3);i3.open();});},Function.prototype);}function S1(){var i=_.byId("imageDialog");var e=i?Promise.resolve(i):$.oCommonUtils.getDialogFragmentAsync("sap.suite.ui.generic.template.ObjectPage.view.fragments.ImageDialog",{onImageDialogClose:function(){i.close();}},"headerImage");e.then(function(j){i=j;});return e;}function T1(){var e=$.oComponentUtils.getTemplatePrivateModel();e.setProperty("/objectPage/isHeaderExpanded",true);var i=_.getView().byId("template::ObjectPage::ObjectPageHeader");i.attachStateChange(function(j){var k=j.getParameter("isExpanded");e.setProperty("/objectPage/isHeaderExpanded",k);});}function U1(){var e;var j=$.oComponentUtils.getTemplatePrivateModel();var k=function(i){return function(x){var c3=x.getSource();var d3=c3.getExternalValue();j.setProperty("/objectPage/headerInfo/"+i,d3);if(i==="objectTitle"){$.oComponentUtils.setText(d3);if(!d3){var e3=$.oComponentUtils.getHeaderDataAvailablePromise();e3.then(function(f3){d3=c3.getExternalValue();if(d3){return;}var g3=_.getView();var h3=f3.getObject();var i3=g3.getModel("ui");var j3=i3.getProperty("/createMode");if(j3&&h3&&(h3.IsActiveEntity===undefined||h3.IsActiveEntity===false||h3.HasActiveEntity===false)){e=e||$.oCommonUtils.getText("NEW_OBJECT");j.setProperty("/objectPage/headerInfo/objectTitle",e);$.oComponentUtils.setText(e);}});}}};};c1.getCustomData().forEach(function(x){var c3=x.getKey();if(c3==="objectTitle"||c3==="objectSubtitle"){var d3=x.getBinding("value");var e3=!d3&&x.getBindingInfo("value");if(!d3&&!e3){j.setProperty("/objectPage/headerInfo/"+c3,x.getValue());return;}var f3=k(c3);if(d3){d3.attachChange(f3);W(d3,"string");}else{e3.events={change:f3};for(var i=0;i<e3.parts.length;i++){e3.parts[i].targetType="string";}}}});}function V1(e){e.preventDefault();var i=$.oCommonUtils.getControlInformation(e,null,true);if(i){$.oServices.oDataLossHandler.performIfNoDataLoss(i.navigate,Function.prototype);}}function W1(e){return!!(e&&$.oCommonUtils.getPositionableControlId(e));}function X1(e){var j="";for(var i=0;i<e.length;i++){if(W1([e[i]])){var k=r.registry.get(e[i]);return Y1(k);}}if(_&&_.getOwnerComponent()&&_.getOwnerComponent().getModel("i18n")){j=_.getOwnerComponent().getModel("i18n").getResourceBundle().getText("GENERIC_MESSAGE_GROUP_NAME");}return j;}function Y1(e){if(!e){return"";}if(e instanceof sap.uxap.ObjectPageSection){return e.getTitle();}else{return Y1(e.getParent());}}function Z1(e){var j=c1.getSections();for(var i=0;i<j.length;i++){if(j[i].getTitle()===e){return i+1;}}return 9999999;}var $1=new sap.ui.model.Sorter("msg>");function _1(e){switch(e){case s.Error:return 1;case s.Warning:return 2;case s.Success:return 3;case s.Information:return 4;case s.None:return 5;default:return 6;}}$1.fnCompare=function(e,i){var j=Z1(X1(e.controlIds))*P+_1(e.type);var k=Z1(X1(i.controlIds))*P+_1(i.type);if(j<k){return-1;}if(j>k){return 1;}return 0;};function a2(e,i){L.info("Set binding context to "+e,"Subsection: "+i.getId());var j=V(i);j.forEach(function(k){k.setBindingContext(e);});}function b2(e,i,j,k,x,c3){var d3={bWaitForViewportEnter:i,waitFor:{bLayoutFinished:e,bStateApplied:j,bRebindCompleted:k},activeHandler:x||function(e3,f3){if(V(e3).length&&V(e3)[0].getBindingContext()===null){a2(undefined,e3);f3.refresh(null,true,true);}},inActiveHandler:c3||function(e3,f3){a2(null,e3);}};return d3;}function c2(e){var i=e.getBlocks()[0];$.oComponentUtils.onVisibilityChangeOfReuseComponent(true,i);}function d2(e){var i=e.getBlocks()[0];$.oComponentUtils.onVisibilityChangeOfReuseComponent(false,i);}var e2={lazyLoading:b2(false,true,false,true),lazyLoadingAfterHeader:b2(true,true,false,true),activateAfterHeaderDataReceived:b2(true,false,false,true),activateWithBindingChange:b2(false,false,false,true),reuseComponent:b2(true,true,false,true,c2,d2)};function f2(e,i,j,k){if(k instanceof f){k=k.getMainContent()[0];}else if(!k.getContent){return;}k.getContent().forEach(function(x){if(c.isSmartTable(x)){if(i||e[x.getEntitySet()]){if(x.isInitialised()){$.oCommonUtils.refreshSmartTable(x,null,j);}else{x.attachInitialise($.oCommonUtils.refreshSmartTable.bind(null,x,null,j));}if(!i&&_.getOwnerComponent().getBindingContext()){$.oServices.oApplicationController.executeSideEffects(_.getOwnerComponent().getBindingContext(),[],[x.getTableBindingPath()]);}}}});}function g2(e){return $.oCommonUtils.getControlInformation(e);}function h2(e){l1.push(e);var i=$.oComponentUtils.getTemplatePrivateGlobalModel();$.oCommonUtils.getControlInformation(e,function(j,k){var x=V(e);d1.initSideContentInfoObject(x[0]);j.refresh=function(e3,f3,g3){var h3=f2.bind(null,e3,f3,g3);x.forEach(h3);};var c3=$.oCommonUtils.getElementCustomData(e).loadingStrategy;var d3=e2[c3];j.loadingStrategy=d3||b2(false,false,false,false,Function.prototype,Function.prototype);k.push("subSection");if(!j.loadingStrategy.bWaitForViewportEnter){k.push("subSectionNotWaitingForViewPort");}i2(e,i);});}function i2(e,i){if(i.getProperty("/generic/placeholderValue")!==false&&c1.indexOfSection(e.getParent())<2){j2(e);}}function j2(e){var j=e.getBlocks();for(var i=0;i<j.length;i++){var k=j[i].getAggregation('content');if(k){if(k[0]instanceof sap.ui.comp.smarttable.SmartTable||k[0]instanceof sap.ui.comp.smartchart.SmartChart){r1['control'+i]=k[0];}}}}function k2(e){var j=[];for(var i=0;i<e.length;i++){if(e[i].getVisible()){j.push(e[i]);}}return j;}function l2(e){var i=e?e.getSubSections():c1.getSections();var j=k2(i);return j.length===1&&!!(e||l2(j[0]));}function m2(e,i){var j=e.getParent();var k="sapSmartTemplatesObjectPageSubSectionGridExpand",x="sapUxAPObjectPageSubSectionFitContainer";while(j){if(j.isA("sap.ui.layout.Grid")){i?j.addStyleClass(k):j.removeStyleClass(k);}else if(j.isA("sap.uxap.ObjectPageSubSection")){i?j.addStyleClass(x):j.removeStyleClass(x);e.setFitContainer(i);return null;}else{L.warning("Unexpected parent "+j.toString()+" in fnHandleUiTableExpand method");}j=j.getParent();}}function n2(e,i){var j="sapUiSizeCompact",k="sapUiSizeCondensed",x;x=document.body;if(!e.bCondensedTableLayout||!(e.bSetFitContainer||i.hasStyleClass("sapUiSizeCondensed"))){return null;}else if(e.bSetFitContainer&&x.classList.contains(j)){i.addStyleClass(k);}else{i.removeStyleClass(k);}}function o2(e,i,j){if(i.isA("sap.m.Table")){i.setGrowingThreshold(j.growingThreshold);i.setGrowingScrollToLoad(j.bGrowingScrollOnLoad);}else if(i.isA("sap.ui.table.Table")){m2(e,j.bSetFitContainer);n2(j,i);}}function p2(e,i,j){var k={growingThreshold:10,bSetFitContainer:false,bGrowingScrollOnLoad:false};var x=_.getOwnerComponent().mProperties;k.bCondensedTableLayout=x.condensedTableLayout;if(x&&x.sections){var c3=x.sections[j];if(c3&&c3.hasOwnProperty("condensedTableLayout")){k.bCondensedTableLayout=c3.condensedTableLayout;}}var d3;if(c1.getUseIconTabBar()){d3=i.getParent();while(d3&&d3.sParentAggregationName!=="sections"){d3=d3.getParent();}}if(l2(d3)){k.growingThreshold=N;k.bGrowingScrollOnLoad=true;k.bSetFitContainer=true;}o2(e,i,k);}function q2(e){var j=c1.getSections().filter(function(e3){return(e3.getTitle()==="Header"||!e3._bInternalVisible)?false:true;});var k;for(var i=0;i<j.length;i++){var x=j[i];var c3=x.getId();var d3=c1.getSelectedSection();if(c3===d3){k=(e)?j[(i+1===j.length)?0:i+1]:j[(i===0)?j.length-1:i-1];var k1=k.getId();c1.setSelectedSection(k1);s2(k1);break;}}}function r2(e){var i,j;i=e&&e.getParameter("section");j=i?i.getId():c1.getSelectedSection();if(j!==k1){L.info("Selected Section: "+j);}return j;}function s2(e){k1=e;$.oComponentUtils.stateChanged();}function t2(e){var i=r2(e);s2(i);}function u2(e,i,j,k,x){var c3=A.createP13NColumnKey(x);var d3=A.getBindingForHiddenPath(x);if(d3==="{= !${} }"){e.push(c3);}if(typeof(d3)==="string"){var e3=d3.match(X)&&d3.match(X)[0];if(e3&&e3.indexOf("/")>0&&k.navigationProperty){var f3=_.getOwnerComponent().getEntitySet();var g3=e3.split("/",1)[0];if(j.getODataAssociationSetEnd(k,g3).entitySet===f3){i[c3]=e3.split("/").slice(1).join("/");}}}else if(!d3){e.push(c3);}}function v2(c1){var e=c1.getModel("ui");var i=$.oComponentUtils.getTemplatePrivateModel();var j=i.getProperty("/objectPage/displayMode");var k=e.getProperty("/createMode")||j===4;var x=e.getProperty("/editable")||j===2;var c3;if(k){c3="Create";}else if(x){c3="Edit";}else{c3="Display";}return c3;}function w2(c1,e){if(e==="Display"){var j=c1.getHeaderTitle();var k=j.getActions();if(k&&k.length){for(var i=0;i<k.length;i++){if(k[i].getVisible&&k[i].getVisible()&&k[i].getEnabled&&k[i].getEnabled()){return k[i];}}}}else{var x=c1.getSelectedSection();var c3=c1.getUseIconTabBar();if(g1===true&&c3!==true){c1.setSelectedSection(null);return w(c1.getDomRef());}var d3;var e3=function(h3){var i3=h3.getDomRef();c1.setSelectedSection(h3);d3=w(i3);if(d3&&d3.type!=="checkbox"){return d3;}return y(i3).firstFocusableDomRef();};var f3=c1.getSections();var g3;for(var i=0;i<f3.length;i++){if(f3[i].getVisible()&&((f3[i].getId()===x)||g3)){g3=f3[i+1]?f3[i+1].getId():undefined;d3=e3(f3[i]);if(d3){break;}}}return d3;}}function x2(c1){var e=_.getOwnerComponent().getModel("_templPrivGlobal");var i1=e.getProperty("/generic/FCL/FCLActionButton");if(!i1){var i=v2(c1);if(document.readyState=='complete'){setTimeout(function(){var j=w2(c1,i);if(j){j.focus();}},0);}}}function y2(e,j,k,x,c3,d3){var e3=[];var f3=Object.create(null);for(var i=0;i<d3.length;i++){var g3=d3[i];u2(e3,f3,x,c3,g3);}if(!v(f3)||e3.length){j.columnHideInfos={staticHiddenColumns:e3,columnKeyToHiddenPath:f3};k.push("smartTableWithColumnHide");}}function z2(e){return e instanceof O?e:e.getParent&&z2(e.getParent());}function A2(e,j,k){j.push("smartTable");e.subSection=z2(k);if(k.getUseVariantManagement()){j.push("smartControlWithVariantManagement");g2(e.subSection).loadingStrategy.waitFor.bStateApplied=true;e.afterVariantInitialisePromise=new Promise(function(g3){e.afterVariantInitialiseResolve=g3;});}k=c.isMTable(k)?k.getParent():k;var x=_.getOwnerComponent().getModel().getMetaModel();var c3=x.getODataEntitySet(k.getEntitySet());var d3=x.getODataEntityType(c3.entityType);var e3=d3["com.sap.vocabularies.UI.v1.LineItem"];var f3=k.getCustomData();for(var i=0;i<f3.length;i++){if(f3[i].getKey()==="lineItemQualifier"){e3=d3["com.sap.vocabularies.UI.v1.LineItem#"+f3[i].getValue()];break;}}y2(k,e,j,x,d3,e3||[]);}function B2(e){return $.oCommonUtils.getControlInformation(e,A2);}function C2(e){var i;var j=e.getSource();if(c.isSmartTable(j)){i=B2(j);}else if(c.isSmartChart(j)){i=E2(j);}if(!o1&&!i.afterVariantInitalisedResolve&&!i.bApplyingVariantFromState){$.oComponentUtils.stateChanged();}}function D2(e,i,j){i.push("smartChart");if(j&&j.getUseVariantManagement()){i.push("smartControlWithVariantManagement");e.afterVariantInitialisePromise=new Promise(function(k){e.afterVariantInitialiseResolve=k;});}}function E2(e){return $.oCommonUtils.getControlInformation(e,D2);}function F2(e,i,j){i.push("searchField");var k=c.isMTable(j.getParent().getParent())?j.getParent().getParent().getParent():j.getParent().getParent();e.table=k;var x=B2(k);x.searchField=j;}function G2(e){return $.oCommonUtils.getControlInformation(e,F2);}function H2(e){G2(e);}function I2(e){var i=G2(e);i.searchString=e.getSource().getValue();i.table.rebindTable();}function J2(e,i){i.setValue("");if(e.searchString){e.searchString="";e.table.rebindTable();}}function K2(){$.oCommonUtils.executeForAllInformationObjects("searchField",J2);}function L2(e,i){var j=e.getPath();var k=true;for(var x=0;k;x++){var c3=i.getContextByIndex(x);var d3=c3&&c3.getPath();if(d3===j){return x;}else if(!c3){return-1;}}}function M2(e,j){var k=j.getFirstVisibleRow();var x=j.getVisibleRowCount();var c3=e.getPath();for(var i=0;i<x;i++){if(j.getContextByIndex(k+i).getPath()===c3){return j.getRows()[i];}}}function N2(e,i){var j=e.getTable();if(c.isMTable(j)){return;}function k(){var x=L2(i,j);if(x!==-1){j.setFirstVisibleRow(x);setTimeout(function(){var c3=M2(i,j);var d3=c3&&w(c3.getDomRef());if(d3){d3.focus();}},0);}}e.attachEventOnce("dataReceived",k);}function O2(e,i){$.oCommonEventHandlers.addEntry(e,true).then(N2.bind(null,i));}t.testable(N2,"setFocusOnTableRow");t.testable(M2,"getGridTableRow");t.testable(L2,"getGridTableRowIndexFromContext");function P2(e,i){var j=$.oCommonUtils.getOwnerControl(i);j=c.isMTable(j)?j.getParent():j;var k=T(j);if(!k){g1=false;h1=true;}if(!i.data("CrossNavigation")&&k){O2(i,j);return;}$.oCommonUtils.processDataLossConfirmationIfNonDraft(function(){$.oCommonEventHandlers.addEntry(i,false);},Function.prototype,b1.state);}function Q2(e){var i=q.getStableId({type:"ObjectPageAction",subType:"Create",sFacet:e});var j=q.getStableId({type:"ObjectPageAction",subType:"CreateWithDialog",sFacet:e});if(j&&_.byId(j)){var k=_.getOwnerComponent().mProperties&&_.getOwnerComponent().mProperties.sections[e];var x=k&&k.tableSettings&&k.tableSettings.createWithParameterDialog&&k.tableSettings.createWithParameterDialog.fields;}if(!!x&&!v(x)){_.byId(j).setVisible(true);$.oCommonUtils.executeIfControlReady(f1.createWithDialog.bind(null,_.byId(j)),i);}else{$.oCommonUtils.executeIfControlReady(P2.bind(null,undefined),i);}}function R2(e,i){var j=i.getId();if(!j1[j]){var k=i.getDependents();k.some(function(c3){if(c3 instanceof D){j1[j]=c3;return true;}});}var x=c1.getModel("ui");return x.getProperty("/editable");}function S2(){var e=_.getOwnerComponent().getModel("ui");e.bindProperty("/editable").attachChange(function(){var i=j1;j1=Object.create(null);for(var k in i){var j=i[k];j.refresh();}});}function T2(e){if(e instanceof sap.ui.comp.smarttable.SmartTable){U2(e);}I.resetPlaceHolders($,["FE-DATA-LOADED","FE-DATA-LOADED-FIRSTTIMEONLY"]);var i=_.getOwnerComponent().getModel("_templPrivGlobal");i.setProperty("/generic/bDataShownInTableOrChart",true);}function U2(e){var i=e.getId();var j="";var k={search:false,filter:false};var x=e.fetchVariant();if(x&&x.filter&&x.filter.filterItems.length>0){k.filter=true;}var c3=e.getToolbar().getContent().filter(function(d3){return d3.sId===e.getToolbar().getId()+'::SearchField';});if(c3.length>0&&c3[0].getValue().trim()!==""){k.search=true;}if(k.search||k.filter){j=$.oCommonUtils.getContextText("NOITEMS_SMARTTABLE_WITH_FILTER",i);}else{j=$.oCommonUtils.getContextText("NOITEMS_SMARTTABLE",i);}e.setNoData(j);}function V2(e){var i=[];if(e.fetchVariant()&&e.fetchVariant().filter&&e.fetchVariant().filter.filterItems){i=e.fetchVariant().filter.filterItems;}var j=e.getId();var k="";var x={search:false,filter:false};if(i&&i.length){x.filter=true;}var c3=e.getToolbar().getContent().filter(function(d3){return d3.sId===e.getToolbar().getId()+'::SearchField';});if(c3.length>0&&c3[0].getValue().trim()!==""){x.search=true;}if(x.search||x.filter){k=$.oCommonUtils.getContextText("NOITEMS_SMARTCHART_WITH_FILTER",j);}else{k=$.oCommonUtils.getContextText("NOITEMS_SMARTCHART",j);}e.getChartAsync().then(function(d3){d3.setCustomMessages({NO_DATA:k});});}Z.refreshFacets=function(e){var i=function(j){var k=g2(j);k.refresh(e,false);};c1.getSections().forEach(function(j){j.getSubSections().forEach(i);});};Z.onComponentActivate=b1.onComponentActivate;Z.getCurrentState=function(){var e=Object.create(null);if(_.getOwnerComponent().getAppComponent().getStatePreservationMode()==="persistence"){if(k1){e.section={data:k1,lifecycle:{permanent:true,pagination:true}};}if(m1){e.subSection={data:m1,lifecycle:{permanent:true,pagination:true}};}}var i={};$.oCommonUtils.executeForAllInformationObjects("smartControlWithVariantManagement",function(d3,e3){i[e3.getId()]=e3.getCurrentVariantId();});if(!v(i)){e.smartControlVariants={data:i,lifecycle:{session:true,permanent:true,page:false,pagination:false}};}e.sideContent=d1.getCurrentState();e.multipleViews=e1.getCurrentState();var j=Object.create(null);_.provideCustomStateExtension(j);for(var k in j){e["$custom$"+k]=j[k];}var x=true;var c3=function(d3,e3){if(!(d3 instanceof C)){throw new z(J,"State must always be set with respect to a ControllerExtension");}if(!x){throw new z(J,"State must always be provided synchronously");}var f3=d3.getMetadata().getNamespace();if(e3){for(var g3 in e3){e["$extension$"+f3+"$"+g3]=e3[g3];}}};_.templateBaseExtension.provideExtensionStateData(c3);x=false;return e;};function W2(){p1={bLayoutFinished:false,bStateApplied:false,bRebindCompleted:false};q1=true;}function X2(e){p1[e]=true;Z2();}function Y2(e){var i=true;for(var j in e.waitFor){if(e.waitFor[j]&&!p1[j]){i=false;break;}}return i;}function Z2(){var e=q1?"subSectionNotWaitingForViewPort":"subSection";$.oCommonUtils.executeForAllInformationObjects(e,function(i,j){var k=Y2(i.loadingStrategy);if(k){i.loadingStrategy.activeHandler(j,i);}});if(q1){c1._triggerVisibleSubSectionsEvents();}}function $2(){if(o1){o1();o1=null;X2("bStateApplied");}}function _2(){X2("bLayoutFinished");}function a3(){Q(c1);_2();}Z.applyState=function(a1,e){var k=$.oComponentUtils.getHeaderDataAvailablePromise()||Promise.resolve();k.then(function(){var c3=null;var d3=Object.create(null);var e3=Object.create(null);for(var f3 in a1){if(f3.indexOf("$custom$")===0){d3[f3.substring(8)]=a1[f3];}else if(f3.indexOf("$extension$")===0){var g3=f3.substring(11,f3.indexOf("$",11));var h3=e3[g3];if(!h3){h3=Object.create(null);e3[g3]=h3;}var i3=f3.substring(f3.indexOf("$",11)+1,f3.length);h3[i3]=a1[f3];}}_.applyCustomStateExtension(d3,e);var j3=true;var k3=function(r3){if(!(r3 instanceof C)){throw new z(J,"State must always be retrieved with respect to a ControllerExtension");}if(!j3){throw new z(J,"State must always be restored synchronously");}var g3=r3.getMetadata().getNamespace();return e3[g3];};_.templateBaseExtension.restoreExtensionStateData(k3,e);j3=false;var l3=_.getOwnerComponent();var m3=l3.getAppComponent().getObjectPageHeaderType();var n3=l3.getModel("_templPrivGlobal");i1=n3.getProperty("/generic/FCL/FCLActionButton");if(i1===1){var o3=c1.getHeaderTitle();var p3=(m3==="Dynamic"?o3.getNavigationActions():o3.getActions());if(p3&&p3.length){for(var i=0;i<p3.length;i++){if(p3[i].getId&&p3[i].getId().indexOf("template::FCLActionButtons")>0){var q3=p3[i].getItems();for(var j=0;j<q3.length;j++){if((q3[j].getId().toUpperCase().indexOf("FULLSCREEN")>0)&&q3[j].getVisible&&q3[j].getVisible()){c3=q3[j];}}}}}setTimeout(function(){n3.setProperty("/generic/FCL/FCLActionButton",0);i1=n3.getProperty("/generic/FCL/FCLActionButton");if(c3){c3.focus();}},0);}});d1.applyState(a1.sideContent,e);e1.applyState(a1.multipleViews,e);$.oCommonUtils.executeForAllInformationObjects("smartControlWithVariantManagement",function(i,j){var c3;i.afterVariantInitialisePromise.then(function(){if(a1.smartControlVariants&&a1.smartControlVariants[j.getId()]!==undefined){c3=a1.smartControlVariants[j.getId()];}else{if(c.isSmartTable(j)){c3=$.oCommonUtils.getSmartTableDefaultVariant(j);}else if(c.isSmartChart(j)){c3=$.oCommonUtils.getSmartChartDefaultVariant(j);}}if(j.getCurrentVariantId()!==c3||!e){i.bApplyingVariantFromState=true;j.setCurrentVariantId(c3);i.bApplyingVariantFromState=false;}});});if(e){if(k1!==(a1.section||"")){$.oComponentUtils.stateChanged();}$2();_2();return;}K2();if(a1.section){k1=a1.section;L.info("Restoring Selected Section: "+k1);c1.setSelectedSection(k1);if(a1.subSection){var x;l1.some(function(i){if(i.getId()===a1.subSection){x=i;return true;}return false;});if(x){x.getParent().setSelectedSubSection(x);}m1=a1.subSection;L.info("Restoring Selected Subsection: "+m1);}_2();}else{Promise.all([k,$.oComponentUtils.getNavigationFinishedPromise()]).then(a3);k1="";}$2();};Z.beforeRebind=function(e){W2();e.then(function(){X2("bRebindCompleted");});if(!o1){n1=new Promise(function(i){o1=i;});}$.oCommonUtils.executeForAllInformationObjects("subSection",function(i,j){i.loadingStrategy.inActiveHandler(j);});};Z.afterRebind=function(){L.info("Call of _triggerVisibleSubSectionsEvents (afterRebind)");c1._triggerVisibleSubSectionsEvents();};Z.applyHeaderContextToSmartTablesDynamicColumnHide=function(e){var i=e.getModel();var j=function(k,x,c3){if(v(x.columnHideInfos.columnKeyToHiddenPath)){return;}var d3=x.columnHideInfos.staticHiddenColumns.slice();var e3=k&&j.bind(null,false,x,c3);for(var f3 in x.columnHideInfos.columnKeyToHiddenPath){var g3=x.columnHideInfos.columnKeyToHiddenPath[f3];if(e.getProperty(g3)){d3.push(f3);}if(e3){var h3=i.bindProperty(g3,e);h3.attachChange(e3);}}c3.deactivateColumns(d3);};$.oCommonUtils.executeForAllInformationObjects("smartTableWithColumnHide",j.bind(null,true));};var L1=t.testable(L1,"editEntity");var N1=t.testable(N1,"isEntryDeletable");var t1=t.testable(t1,"onActivateImpl");var u1=t.testable(u1,"onSaveImpl");t.testable(function(){return n1;},"getStateAppliedPromise");var b3={onInit:function(){c1=_.byId("objectPage");S2();var e=_.getOwnerComponent();n1=new Promise(function(i){o1=i;});W2();var j=c1.getSections();for(var k=0;k<j.length;k++){var x=j[k];var l1=x.getSubSections();l1.forEach(h2);}var c3=z1();var d3=e.getAppComponent();var e3=d3.getObjectPageHeaderType()==="Dynamic";Z.aBreadCrumbs=c3&&(e3?c3.getBreadcrumbs().getLinks():c3.getBreadCrumbsLinks());(Z.aBreadCrumbs||[]).forEach(function(k3,i){$.oComponentUtils.registerAncestorTitleUpdater(k3,"text",i+1);});if(e3){T1();}var f3=function(){q1=false;Z2();};b1.onInit(null,f3,$1,X1);U1();$.oCommonUtils.executeGlobalSideEffect();c1.attachEvent("subSectionEnteredViewPort",function(i){var k3=i.getParameter("subSection");L.info("Viewport entered ","Subsection: "+k3.getId());var l3=g2(k3);var m3=l3.loadingStrategy;var n3=Y2(l3.loadingStrategy);if(n3){m3.activeHandler(k3,l3);}});f1=new B(a1,_,$);a1.oCreateWithDialogHandler=f1;e1=new m(_,$,$.oComponentUtils.stateChanged);a1.oMultipleViewsHandler=e1;var g3=$.oComponentUtils.getTemplatePrivateModel();g3.setProperty("/objectPage/aPasteAttachedTables",[]);g3.setProperty("/objectPage/mHandleEnabledTableToolbar",[]);$.oComponentUtils.attach(_,"PageDataLoaded",function(i){if(c1&&!i1){var k3=v2(c1);if(k3==="Create"&&h1!==true){g1=true;}else if(($.oComponentUtils.isDraftEnabled()&&k3==="Create"&&h1===true)||(!$.oComponentUtils.isDraftEnabled()&&k3==="Display"&&h1===true)){h1=false;}x2(c1);}var l3=_.getOwnerComponent().getModel("_templPrivGlobal");I.resetPlaceHolders($,["FE-HEADER-LOADED","FE-HEADER-LOADED-FIRSTTIMEONLY"]);if(Object.keys(r1).length===0||l3.getProperty("/generic/bDataShownInTableOrChart")===true){I.resetPlaceHolders($,["FE-DATA-LOADED","FE-DATA-LOADED-FIRSTTIMEONLY"]);}});function h3(i){if(i.tableSettings){var k3=_.byId(q.getStableId({type:"ObjectPageTable",subType:"SmartTable",sFacet:i.facetId}));if(k3){B2(k3);}}else if(i.chartSettings){var l3=_.byId(i.facetId+"::Chart");if(l3){E2(l3);}}}function i3(i){var k3=_.byId(i);if(k3){G.waitForChanges({element:k3}).then(function(){$.oCommonUtils.setPrivateModelControlProperty(i,'visible',k3.getGroups().length>0);});}}var j3=$.oComponentUtils.getParameterModelForTemplating().getObject("/templateSpecific/sections");j3.forEach(function(i){i.subSections.forEach(function(k3){k3.blocks.forEach(h3);k3.moreBlocks.forEach(h3);i3(k3.dummyFormId);i3(k3.dummyFormIdMoreBlocks);});});},handlers:{onEditAndActiveToggle:function(e,i){$.oServices.oApplication.performAfterSideEffectExecution(function(){var j=$.oServices.oApplication.getBusyHelper();if(j.isBusy()){return;}var k=e.getBindingContext();var x=$.oServices.oApplication.getDraftSiblingPromise(k);j.setBusy(x.then(function(c3){if(i){L.info("Navigating to draft entity");J1(c3,true);}else{L.info("Navigating to active entity");$.oServices.oApplication.navigateToSubContext(c3,true,1);}h(':focus').blur();}));});},onAfterVariantInitialise:function(e){var i=e.getSource();var j;if(c.isSmartTable(i)){j=B2(i);}else if(c.isSmartChart(i)){j=E2(i);}if(j.afterVariantInitialiseResolve){j.afterVariantInitialiseResolve();delete j.afterVariantInitialiseResolve;}},onAfterVariantSave:function(e){C2(e);},onAfterVariantApply:function(e){C2(e);},addEntry:Q2,onCancelCreateWithPopUpDialog:function(){f1.onCancelPopUpDialog();},onSaveCreateWithPopUpDialog:function(e){f1.onSavePopUpDialog(e);},submitChangesForSmartMultiInput:function(){if($.oComponentUtils.isDraftEnabled()){$.oCommonEventHandlers.submitChangesForSmartMultiInput();}},contextEditableChanged:function(e){var i=e.getSource();var j=i.getBindingInfo('editable');if(j&&j.binding&&j.binding.getValue&&!j.binding.getValue()){i.setEditable(false);}},deleteEntry:function(e){var i=e.getParameter('listItem');var j=i.getBindingContext();var k=$.oCommonUtils.getOwnerControl(e.getSource());if(!c.isSmartTable(k)){k=k.getParent();}var x=[j];var c3=e.getSource().getId();R1(k,x,c3);},deleteEntries:function(e){var i=q.getStableId({type:"ObjectPageAction",subType:"Delete",sFacet:e});$.oCommonUtils.executeIfControlReady(Q1,i);},onSelectionChange:function(e){var i=$.oComponentUtils.getTemplatePrivateModel();var j=i.getProperty("/objectPage/mHandleEnabledTableToolbar");if(!j[e.getSource().getId()]){j[e.getSource().getId()]=true;}$.oCommonUtils.setEnabledToolbarButtons(e.getSource());},onMultiSelectionChange:function(e){$.oCommonEventHandlers.onMultiSelectionChange(e);},onCancel:function(e){var i=e.getSource();var j=b1.state.onCancel(i);j.then(function(){H1();if(!$.oComponentUtils.isDraftEnabled()){x2(c1);var k=$.oComponentUtils.getTemplatePrivateModel();var x=k.getProperty("/objectPage/mHandleEnabledTableToolbar");for(var c3 in x){if(x[c3]){$.oCommonUtils.setEnabledToolbarButtons(_.byId(c3));delete x[c3];}}}});},onContactDetails:function(e){$.oCommonEventHandlers.onContactDetails(e);},onSmartFieldInitialise:function(e){var i=this.getView().getId();$.oCommonEventHandlers.onSmartFieldInitialise(e,i);},onPressDraftInfo:function(e){var i=_.getView().getBindingContext();var j=sap.ui.getCore().byId(e.getSource().getId()+(e.getId()==="markChangesPress"?"-changes":"-lock"));$.oCommonUtils.showDraftPopover(i,j);},onPressDraftInfoObjectPageDynamicHeaderTitle:function(e){var i=_.getView().getBindingContext();var j=_.byId("template::ObjectPage::ObjectMarkerObjectPageDynamicHeaderTitle");$.oCommonUtils.showDraftPopover(i,j);},onShareObjectPageActionButtonPress:function(e){$.oCommonUtils.executeIfControlReady(A1,"template::Share");},onRelatedApps:function(e){var x,c3,d3,e3,f3,g3,h3;var i3,j3,k3,l3,m3;var n3=[];x=e.getSource();k3=sap.ushell&&sap.ushell.Container;c3=k3&&k3.getService("URLParsing");d3=c3.parseShellHash(document.location.hash);l3=d3.semanticObject;m3=d3.action;e3=_.getView&&_.getView().getBindingContext();var o3=$.oComponentUtils.getSettings();var p3=_.getOwnerComponent().getModel().getMetaModel();var q3=e3.getObject();var r3=q3.__metadata.type;var s3=p3.getODataEntityType(r3);var t3=s3["com.sap.vocabularies.Common.v1.SemanticKey"];var u3={};if(t3&&t3.length>0){for(var j=0;j<t3.length;j++){var v3=t3[j].PropertyPath;if(!u3[v3]){u3[v3]=q3[v3];}}}else{for(var k in s3.key.propertyRef){var w3=s3.key.propertyRef[k].name;if(!u3[w3]){u3[w3]=q3[w3];}}}f3=_.getOwnerComponent().getAppComponent();g3=k3&&k3.getService("CrossApplicationNavigation");if(o3.relatedAppsSettings&&Object.keys(o3.relatedAppsSettings).length>0){var x3=[{semanticObject:l3}];n3.push(x3);for(var i=0;i<Object.keys(o3.relatedAppsSettings).length;i++){if(o3.relatedAppsSettings[i].semanticObject!==l3){x3=[{semanticObject:o3.relatedAppsSettings[i].semanticObject}];n3.push(x3);}}h3=g3.getLinks(n3);}else{h3=g3.getLinks({semanticObject:l3,params:u3,ui5Component:f3});}B1().then(function(y3){i3=y3;j3=i3.getModel("buttons");j3.setProperty("/buttons",[]);i3.openBy(x);h3.done(function(z3){var A3=[],B3=[],C3;var D3=s3["com.sap.vocabularies.Common.v1.SemanticObjectUnavailableActions"];var E3=[];if(D3){for(var i=0;i<D3.length;i++){E3.push(D3[i].String);}}for(var i=0;i<s3.property.length;i++){if(s3.property[i]["com.sap.vocabularies.Common.v1.SemanticObjectUnavailableActions"]){var F3=s3.property[i]["com.sap.vocabularies.Common.v1.SemanticObjectUnavailableActions"].length;for(var j=0;j<F3;j++){E3.push(s3.property[i]["com.sap.vocabularies.Common.v1.SemanticObjectUnavailableActions"][j].String);}}}C3=$.oComponentUtils.getSettings().relatedAppsSettings;if(C3&&Object.keys(C3).length>0){for(var i=0;i<z3.length;i++){for(var j=0;j<z3[i].length;j++){for(var k=0;k<z3[i][j].length;k++){B3.push(z3[i][j][k]);}}}z3=B3;}z3.sort(function(K3,L3){if(K3.text<L3.text){return-1;}if(K3.text>L3.text){return 1;}return 0;});for(var i=0;i<z3.length;i++){var G3=z3[i];var H3=G3.intent;var I3=H3.split("-")[0].split("#")[1];var J3=H3.split("-")[1].split("?")[0];if((I3===l3?J3!==m3:true)&&E3.indexOf(J3)==-1){A3.push({enabled:true,text:G3.text,link:G3,param:u3});}}if(A3.length===0){A3.push({enabled:false,text:$.oCommonUtils.getText("NO_RELATED_APPS")});}j3.setProperty("/buttons",A3);});});},onEdit:function(e){var j=_.byId("edit");var c1=_.byId("objectPage");var k=c1.getSelectedSection();var x=c1.getSections()||[];for(var i=0;i<x.length;i++){if(x[i].getVisible()&&x[i]._bInternalVisible!==false){if(x[i].getId()===k){g1=true;}else{g1=false;}break;}}if(j.data("CrossNavigation")){$.oCommonEventHandlers.onEditNavigateIntent(j);return;}$.oCommonUtils.executeIfControlReady(L1,"edit");},onSave:x1,onSaveAndContinueEdit:w1,onSmartFieldUrlPressed:function(e){$.oCommonEventHandlers.onSmartFieldUrlPressed(e,b1.state);},onBreadCrumbUrlPressed:V1,onDelete:I1,onCallActionFromToolBar:function(e){$.oCommonEventHandlers.onCallActionFromToolBar(e,b1.state);},onCallAction:function(e,i,j){$.oServices.oApplication.performAfterSideEffectExecution(function(){var k=_.getView().getBindingContext();if(k){$.oCommonUtils.processDataLossConfirmationIfNonDraft(function(){var x=_.getOwnerComponent();var c3=x.getEntitySet();var d3={functionImportPath:e,contexts:[k],sourceControl:"",label:i,operationGrouping:j};$.oServices.oCRUDManager.callAction(d3).then(function(e3){var f3=e3&&e3[0];if(f3&&f3.context&&(!f3.actionContext||f3.actionContext&&f3.context.getPath()!==f3.actionContext.getPath())){$.oServices.oViewDependencyHelper.setParentToDirty(x,c3,1);}});},Function.prototype,b1.state,"Proceed");}},true);},onDataFieldForIntentBasedNavigation:function(e){e=o({},e);$.oServices.oApplication.performAfterSideEffectExecution(function(){$.oCommonUtils.processDataLossConfirmationIfNonDraft(function(){$.oCommonEventHandlers.onDataFieldForIntentBasedNavigation(e,b1.state);});},true);},onDataFieldWithIntentBasedNavigation:function(e){$.oCommonEventHandlers.onDataFieldWithIntentBasedNavigation(e,b1.state);},onDataFieldWithNavigationPath:function(e){$.oCommonEventHandlers.onDataFieldWithNavigationPath(e);},onChartInit:function(e){var i=e.getSource();E2(i);i.getChartAsync().then(function(j){if(H.browser.safari){i.setHeight("50vH");}var k=_._templateEventHandlers.onSelectionChange;j.attachSelectData(k).attachDeselectData(k);$.oCommonUtils.checkToolbarIntentsSupported(i);});},onDataRequested:function(i){L.info("Data requested (SmartTable: "+i+")");e1.onDataRequested(i);},onDataReceived:function(e){$.oCommonEventHandlers.onDataReceived(e);},onBeforeRebindDetailTable:function(e){var i=e.getSource();e.mParameters.bindingParams.events["dataReceived"]=T2.bind(null,i);i.setNoData($.oCommonUtils.getText("WAITING_SMARTTABLE"));var j=s1(e);var k=B2(i);var x=k.searchField;if(x){var c3=$.oCommonUtils.getControlInformation(x);if(c3.searchString){j.parameters.custom={search:c3.searchString};}}$.oCommonEventHandlers.onBeforeRebindTable(e,{ensureExtensionFields:_.templateBaseExtension.ensureFieldsForSelect,addExtensionFilters:_.templateBaseExtension.addFilters,isFieldControlRequired:true,isPopinWithoutHeader:true,isDataFieldForActionRequired:true,isFieldControlsPathRequired:true,isMandatoryFiltersRequired:true});_.onBeforeRebindTableExtension(e);e1.onRebindContentControl(i.getId(),j);y1(e);if(c.isAnalyticalTable(i.getTable())){j.parameters.entitySet=i.getEntitySet();}},onListNavigate:function(e){$.oCommonEventHandlers.onListNavigate(e,b1.state);},onBeforeSemanticObjectLinkPopoverOpens:function(e){var i=M1();$.oCommonUtils.semanticObjectLinkNavigation(e,i,_);},onBeforeSemanticObjectLinkNavigationCallback:function(){return new Promise(function(e){$.oServices.oDataLossHandler.performIfNoDataLoss(function(){e(true);},function(){e(false);});});},onSemanticObjectLinkNavigationPressed:function(e){var i=e.getParameters();var j=e.getSource();$.oCommonEventHandlers.onSemanticObjectLinkNavigationPressed(j,i);},onSemanticObjectLinkNavigationTargetObtained:function(e){var i=e.getParameters();var j=e.getSource();$.oCommonEventHandlers.onSemanticObjectLinkNavigationTargetObtained(j,i,b1.state);},onSemanticObjectLinkNavigationTargetObtainedSmartLink:function(e){var i,j;i=e.getParameters();j=e.getSource();while(j.getMetadata().getName()!=="sap.ui.comp.smarttable.SmartTable"&&j.getParent()){j=j.getParent();}$.oCommonEventHandlers.onSemanticObjectLinkNavigationTargetObtained(j,i,b1.state);},onHeaderImagePress:function(e){if(e.getSource().getSrc()===""){return;}var i=e.getSource().getId();var j=e.getSource().getSrc();S1().then(function(k){k.addAriaLabelledBy(i);var x=k.getModel("headerImage");x.setProperty("/src",j);if(sap.ui.Device.system.phone){k.setProperty("stretch",true);}k.open();});},sectionChange:t2,onSwitchTabs:q2,onInlineDataFieldForAction:function(e){$.oCommonEventHandlers.onInlineDataFieldForAction(e,b1.state);},onInlineDataFieldForIntentBasedNavigation:function(e){$.oCommonEventHandlers.onInlineDataFieldForIntentBasedNavigation(e.getSource(),b1.state);},onDeterminingDataFieldForAction:function(e){$.oCommonEventHandlers.onDeterminingDataFieldForAction(e);},onBeforeRebindChart:function(e){s1(e);var i=e.getSource();e.mParameters.bindingParams.events["dataReceived"]=T2.bind(null,i);V2(i);i.getChartAsync().then(function(k){i.oModels=k.oPropagatedProperties.oModels;});var j={ensureExtensionFields:Function.prototype,addExtensionFilters:_.templateBaseExtension.addFilters,isFieldControlRequired:true,isMandatoryFiltersRequired:true};$.oCommonUtils.onBeforeRebindTableOrChart(e,j);},onToggleDynamicSideContent:d1.onToggleDynamicSideContent,sideContentBreakpointChanged:d1.sideContentBreakpointChanged,onTableInit:function(e,i){var j=e.getSource();j.setEnableDataStateFiltering(true);var k=j.getTable();var x=B2(j);if(x.columnHideInfos){j.deactivateColumns(x.columnHideInfos.staticHiddenColumns);}$.oCommonUtils.checkToolbarIntentsSupported(j);c1.attachEvent("subSectionVisibilityChange",function(e){if(k.isA("sap.m.Table")||k.isA("sap.ui.table.Table")){p2(j,k,i);}});if(T(j)&&!j.data("CrossNavigation")){k.addEventDelegate({onkeyup:function(e){if(e.ctrlKey&&e.keyCode===K.ENTER&&j.getEditable()){O2(j,j);e.preventDefault();e.setMarked();}}});}var c3=$.oComponentUtils.getTemplatePrivateModel();if(T(j)){k.addEventDelegate({onAfterRendering:function(e){var d3;if(j.getEditable()&&!j.hasListeners("paste")){j.attachBeforePaste(F1);j.attachPaste(G1);d3=c3.getProperty("/objectPage/aPasteAttachedTables");if(d3){d3.push(i);}}}});}},onPasteButtonPress:function(e){var i=$.oCommonUtils.getText("DATA_PASTE_ACTION_MESSAGE");M.information(i);},onSearchObjectPage:I2,onSearchLiveChange:H2,onSmartTablePaste:G1,onUITableExpand:m2,onSingleSectionOrSubsectionVisible:l2,dataStateFilter:R2},formatters:{sideContentActionButtonText:d1.formatSideContentActionButtonText,setNoDataTextForSmartTable:function(e){if($.oCommonUtils&&e){var i=$.oCommonUtils.getContextText("WAITING_SMARTTABLE",e);if(i!=="WAITING_SMARTTABLE"){return i;}return"";}},setVMVisibilityForVendor:function(){var e=new U(window.location.href);if(e.mParams["sap-ui-layer"]){var j=e.mParams["sap-ui-layer"];for(var i=0;i<j.length;i++){if(j[i].toUpperCase()==="VENDOR"){return true;}}}return false;},formatItemTextForMultipleView:function(i){return i&&e1?e1.formatItemTextForMultipleView(i):"";}},extensionAPI:new E($,_,b1,a1)};b3.handlers=u(b1.handlers,b3.handlers);return b3;}};return Y;});
