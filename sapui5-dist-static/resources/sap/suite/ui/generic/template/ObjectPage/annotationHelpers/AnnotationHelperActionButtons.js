sap.ui.define(["sap/ui/model/odata/AnnotationHelper","sap/suite/ui/generic/template/js/AnnotationHelper","sap/ui/Device"],function(A,a,D){"use strict";function m(B){if(!B.startsWith("{")){return B;}if(B.startsWith("{=")){var r=B.slice(2,-1).trim();return r.indexOf(" ")<0?r:"("+r+")";}return"$"+B;}function c(o,E,n,z){var i=false;var r=E.filter(function(s){i=i||s===z;return s!==""&&s!==n;});if(i){return z;}if(r.length===0){return n;}if(r.length===1&&r[0].indexOf("${")<0){return r[0];}return"{= "+r.map(m).join(" "+o+" ")+" }";}function C(){return c("&&",Array.from(arguments),"true","false");}function g(i,E,r,s,t){var p=r&&r[s];var P=p&&p.Path;if(P){a._actionControlExpand(i,P,E.entityType);return"{= !!${"+t.specificModelName+">"+P+"}}";}return"";}function b(i,E,r,s){var p=r&&r[s];var P=p&&p.Path;if(P){a._actionControlExpand(i,P,E.entityType);return"!!${"+P+"}";}return"";}function d(o,t,s){var n=!t.isDraft&&t.children.length&&!D.system.phone&&o.getFlexibleColumnLayout();if(n&&t.fCLLevel<((n.maxColumnsCount||3)-1)){return"${_templPrivGlobal>/generic/FCL/highestViewLevel} === "+t.level;}if(s==="Edit"&&t.isDraft&&t.level>1&&o.getFlexibleColumnLayout()){return"${_templPrivGlobal>/generic/FCL/isVisuallyFullScreen}";}return"";}function e(I,r,E,p,n,o){var M=I.getInterface(0).getModel();var P,s,q,u,F=true;for(var i=0;i<n.length&&o;i++){if(n[i].level>0){s=n[i].entitySet;P=M.getODataEntitySet(s);q=P["Org.OData.Capabilities.V1.UpdateRestrictions"];u=a.areBooleanRestrictionsValidAndPossible(I,q,P,"Updatable",undefined,p);if(q&&!u){F=false;break;}}}return F&&a.areBooleanRestrictionsValidAndPossible(I,r,E,"Updatable",undefined,p);}e.requiresIContext=true;function f(i,r,E,o,t,n,I){var G="!${ui>/editable}";var T="";if(t.isDraft&&o.getShowDraftToggle()){T="!${DraftAdministrativeData/DraftIsCreatedByMe}";a.formatWithExpandSimple(i,{Path:"DraftAdministrativeData/DraftIsCreatedByMe"},E);}var F=d(o,t,"Edit");var p=b(i,E,r,"Updatable");var P,s,q;var u=[],v="";var M=i.getInterface(0).getModel();if(I){n.forEach(function(w){if(w.level>0){s=w.entitySet;P=M.getODataEntitySet(s);q=P["Org.OData.Capabilities.V1.UpdateRestrictions"];u.push(g(i,P,q,"Updatable",w));}});if(u.length>1){v=C.apply(null,u);}else if(n.length&&u.length===1){v=u[0];}}return C(G,T,F,p,v);}f.requiresIContext=true;function h(i,r,E,o,t){var G;if(t.isDraft){G=t.level===1?"!${ui>/editable}":"{ui>/editable}";}else{G="!${ui>/createMode}";}var F=d(o,t,"Delete");var p=b(i,E,r,"Deletable");return C(G,F,p);}h.requiresIContext=true;function j(s){return!s||"{path: '"+s+"'}";}function k(i,o){var s=A.format(i,o.Action);var I=(o.InvocationGrouping&&o.InvocationGrouping.EnumMember)||"";return"._templateEventHandlers.onCallAction('"+s+"', ${$source>/text}, '"+I+"')";}k.requiresIContext=true;function l(i,s,E,o,I){var n=I?"":"!${ui>/createMode}";var p="";if(o["com.sap.vocabularies.UI.v1.Hidden"]){var v=a.getBindingForHiddenPath(o);p=v.toString();}else if(s){a._actionControlExpand(i,s,E);p="{"+s+"}";}return C(n,p);}l.requiresIContext=true;return{isEditButtonRequired:e,getEditActionButtonVisibility:f,getDeleteActionButtonVisibility:h,getActionControlBreakoutVisibility:j,getCallAction:k,getDatafieldForActionVisibility:l};},true);
