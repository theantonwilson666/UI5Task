sap.ui.define(["sap/suite/ui/generic/template/changeHandler/util/AnnotationChangeUtilsV2","sap/suite/ui/generic/template/changeHandler/util/ChangeHandlerUtils","sap/suite/ui/generic/template/designtime/utils/DesigntimeUtils","sap/base/util/extend","sap/base/util/deepExtend","sap/base/util/isEmptyObject"],function(A,C,D,e,d,i){"use strict";var a={};var b="com.sap.vocabularies.UI.v1.DataFieldForAction";var c="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation";var f="DataFieldForAction";var g="DataFieldForIntentBasedNavigation";a.getActionTypeValues=function(){return{DataFieldForAction:{displayName:"DataField For Action"},DataFieldForIntentBasedNavigation:{displayName:"DataField For IBN"}};};a.get=function(E){var t=C.getTemplatingInfo(E);var r=t&&t.annotationContext;var s;if(r){switch(r.RecordType){case b:s=f;break;case c:s=g;break;default:break;}}return s;};a.createNewRecordForFooterAction=function(r,o){var p,h={Label:{},Action:{}},R={};if(r===b){R[b]=e({},h,{InvocationGrouping:{EnumMember:"com.sap.vocabularies.UI.v1.OperationGroupingType/Isolated"}});}else{R[c]=e({},h,{SemanticObject:{String:""}});}var n={"com.sap.vocabularies.UI.v1.Importance":{EnumMember:"com.sap.vocabularies.UI.v1.ImportanceType/High"},RecordType:r,Determining:{Bool:"true"}};d(n,R[r]);for(p in n){if(p!=="Determining"&&p!=="RecordType"&&o[p]){e(n[p],o[p]);}if(i(n[p])){delete n[p];}}return n;};a.set=function(o,n,h){if(h){h.noRefreshOnChange=true;h.delayRefresh=false;}var O=a.get(o);if(O===n){return;}var r="";var m={};var t={};var E={};var j=[];var k=[];var s="";var l=-1;var p={};var q=[];switch(n){case f:r=b;break;case g:r=c;break;default:break;}if(!r){if(h){h.refreshPropertiesPane=true;}return;}var M=o.getModel();m=M&&M.getMetaModel();t=C.getTemplatingInfo(o);E=m.getODataEntityType(t.target);s=t.annotation;j=E[s];k=JSON.parse(JSON.stringify(j));l=C.getIndexFromInstanceMetadataPath(o);if(l===-1){if(h){h.refreshPropertiesPane=false;}throw"invalid index for old determining action";}if(h){h.refreshPropertiesPane=true;}var u=t&&t.annotationContext;var N=a.createNewRecordForFooterAction(r,u);var v={"annotation":s,"annotationContext":N,"path":t.path,"target":E.namespace+"."+E.name,"value":t.value};o.data("sap-ui-custom-settings")["sap.ui.dt"].annotation=v;j.splice(l,1,N);p=A.createCustomAnnotationTermChange(t.target,j,k,s);q.push(p);return q;};return a;});
