sap.ui.define(["sap/ui/Device"],function(D){"use strict";var r=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var I={};var H={nw:{vertical:"sapSuiteUiCommonsImageEditorTop",horizontal:"sapSuiteUiCommonsImageEditorLeft",handlers:["Horizontal","Vertical"],types:["Rectangle","CustomShape"]},ne:{vertical:"sapSuiteUiCommonsImageEditorTop",horizontal:"sapSuiteUiCommonsImageEditorRight",handlers:["Horizontal","Vertical"],types:["Rectangle","CustomShape"]},sw:{vertical:"sapSuiteUiCommonsImageEditorBottom",horizontal:"sapSuiteUiCommonsImageEditorLeft",handlers:["Horizontal","Vertical"],types:["Rectangle","CustomShape"]},se:{vertical:"sapSuiteUiCommonsImageEditorBottom",horizontal:"sapSuiteUiCommonsImageEditorRight",handlers:["Horizontal","Vertical"],types:["Rectangle","CustomShape"]},n:{vertical:"sapSuiteUiCommonsImageEditorTop",horizontal:"sapSuiteUiCommonsImageEditorCenter",handlers:["Horizontal"],types:["Rectangle","CustomShape","Ellipse"]},s:{vertical:"sapSuiteUiCommonsImageEditorBottom",horizontal:"sapSuiteUiCommonsImageEditorCenter",handlers:["Horizontal"],types:["Rectangle","CustomShape","Ellipse"]},w:{vertical:"sapSuiteUiCommonsImageEditorMiddle",horizontal:"sapSuiteUiCommonsImageEditorLeft",handlers:["Vertical"],types:["Rectangle","CustomShape","Ellipse"]},e:{vertical:"sapSuiteUiCommonsImageEditorMiddle",horizontal:"sapSuiteUiCommonsImageEditorRight",handlers:["Vertical"],types:["Rectangle","CustomShape","Ellipse"]}};I.render=function(R,c){R.write("<div");R.addClass("sapSuiteUiCommonsImageEditor");R.addClass("sapSuiteUiCommonsImageEditorEmpty");R.addClass("sapSuiteUiCommonsImageEditorMode"+c.getMode());if(c.getCustomShapeLoaded()){R.addClass("sapSuiteUiCommonsImageEditorModeCropCustomShapeLoaded");}R.writeClasses();R.writeControlData(c);R.write(">");this.renderNoData(R,c);R.write("<div");R.writeAttribute("id",c.getId()+"-canvasInnerContainer");R.writeAttribute("tabindex","0");R.writeAttribute("role","img");R.addClass("sapSuiteUiCommonsImageEditorCanvasInnerContainer");R.writeClasses();R.write(">");this.renderTransformHandlers(R);this.renderSvgOverlay(R,c);this.renderCropArea(R,c);R.write("</div>");R.write("</div>");};I.renderNoData=function(R,c){R.write("<div");R.addClass("sapSuiteUiCommonsImageEditorNoData");R.writeClasses();R.writeAttribute("tabindex","0");R.writeAttribute("aria-label",r.getText("IMGEDITOR_NO_IMAGE"));R.write(">");R.write("<div");R.addClass("sapSuiteUiCommonsImageEditorNoDataText");R.writeClasses();R.write(">");R.write(r.getText("IMGEDITOR_NO_IMAGE"));R.write("</div>");R.write("</div>");};I.renderSvgOverlay=function(R,c){R.write("<svg class='sapSuiteUiCommonsImageEditorCropOverlayContainer'>");R.write("<defs>");R.write("<rect id='"+c.getId()+"-overlayMaskRect'/>");R.write("<ellipse id='"+c.getId()+"-overlayMaskEllipse'/>");R.write("<image xmlns:xlink='http://www.w3.org/1999/xlink' id='"+c.getId()+"-overlayMaskCustomBlack' preserveAspectRatio='none' x='0' y='0' width='100%' height='100%'");if(c._sBlackCustomShapeUrl){R.writeAttribute("xlink:href",c._sBlackCustomShapeUrl);}R.write("/>");R.write("<image xmlns:xlink='http://www.w3.org/1999/xlink' id='"+c.getId()+"-overlayMaskCustomWhite' preserveAspectRatio='none' x='0' y='0' width='100%' height='100%'");if(c._sWhiteCustomShapeUrl){R.writeAttribute("xlink:href",c._sWhiteCustomShapeUrl);}R.write("/>");R.write("<mask");R.writeAttribute("id",c.getId()+"-darkOverlayMask");R.write(">");R.write("<rect");R.writeAttribute("fill","white");R.writeAttribute("x","0");R.writeAttribute("y","0");R.writeAttribute("width","100%");R.writeAttribute("height","100%");R.write("/>");R.write("<use fill='black' href='#"+c.getId()+"-overlayMaskRect"+"' class='sapSuiteUiCommonsImageEditorCropItemRectangle'/>");R.write("<use fill='black' href='#"+c.getId()+"-overlayMaskEllipse"+"' class='sapSuiteUiCommonsImageEditorCropItemEllipse'/>");R.write("<use href='#"+c.getId()+"-overlayMaskCustomBlack"+"' class='sapSuiteUiCommonsImageEditorCropItemCustomShape'/>");R.write("</mask>");R.write("<mask");R.writeAttribute("id",c.getId()+"-lightOverlayClip");R.write(">");R.write("<use fill='white' href='#"+c.getId()+"-overlayMaskRect"+"' class='sapSuiteUiCommonsImageEditorCropItemRectangle'/>");R.write("<use fill='white' href='#"+c.getId()+"-overlayMaskEllipse"+"' class='sapSuiteUiCommonsImageEditorCropItemEllipse'/>");R.write("<use href='#"+c.getId()+"-overlayMaskCustomWhite"+"' class='sapSuiteUiCommonsImageEditorCropItemCustomShape'/>");R.write("</mask>");R.write("</defs>");R.write("<rect");R.writeAttribute("mask","url(#"+c.getId()+"-darkOverlayMask)");R.writeAttribute("x","0");R.writeAttribute("y","0");R.writeAttribute("width","100%");R.writeAttribute("height","100%");R.addClass("sapSuiteUiCommonsImageEditorCropOverlayBlack");R.writeClasses();R.write("/>");R.write("<rect");R.writeAttribute("mask","url(#"+c.getId()+"-lightOverlayClip)");R.writeAttribute("fill","white");R.writeAttribute("x","0");R.writeAttribute("y","0");R.writeAttribute("width","100%");R.writeAttribute("height","100%");R.addClass("sapSuiteUiCommonsImageEditorCropOverlayWhite");R.writeClasses();R.write("/>");R.write("</svg>");};I.renderCropArea=function(R,c){R.write("<div class='sapSuiteUiCommonsImageEditorCropInnerRectangle'>");R.write("<svg class='sapSuiteUiCommonsImageEditorCropSvg'>");R.write("<defs>");R.write("<mask id='"+c.getId()+"-thirdsMask"+"' maskContentUnits='objectBoundingBox'>");R.write("<rect class='sapSuiteUiCommonsImageEditorCropItemRectangle' fill='white' width='1' height='1' />");R.write("<ellipse class='sapSuiteUiCommonsImageEditorCropItemEllipse' fill='white' cx='0.5' cy='0.5' rx='0.5' ry='0.5' />");R.write("</mask>");this.renderShadowFilter(R,c.getId()+"-bottomShadow",0,2);this.renderShadowFilter(R,c.getId()+"-topShadow",0,-2);this.renderShadowFilter(R,c.getId()+"-rightShadow",2,0);this.renderShadowFilter(R,c.getId()+"-leftShadow",-2,0);R.write("</defs>");R.write("<ellipse class='sapSuiteUiCommonsImageEditorCropItemEllipse' fill='transparent' stroke-width='1' stroke='white' cx='50%' cy='50%' rx='50%' ry='50%' />");this.renderRectBorders(R,c);this.renderThirdLines(R,c);R.write("</svg>");this.renderCropAreaDragHandler(R,c);this.renderCropAreaResizeHandlers(R);R.write("</div>");};I.renderZones=function(R,c){R.write("<div class='sapSuiteUiCommonsImageEditorZones'>");c.getZones().forEach(function(z){this.renderZone(R,c,z);},this);R.write("</div>");};I.renderZone=function(R,c,z){R.write("<div");R.writeElementData(z);R.addClass("sapSuiteUiCommonsImageEditorZone");if(z.getEditable()){R.addClass("sapSuiteUiCommonsImageEditorZoneEditable");}if(z.getHighlighted()){R.addClass("sapSuiteUiCommonsImageEditorZoneHighlighted");}R.writeStyles();R.writeClasses();R.write(">");R.write("<div class='sapSuiteUiCommonsImageEditorZoneInner'>");if(!z.getEditable()&&!z.getHighlighted()){R.write("<div class='sapSuiteUiCommonsImageEditorZoneInnerColoring'></div>");}if(z.getHighlighted()){R.write("<div class='sapSuiteUiCommonsImageEditorZoneLabel'>");R.write("<span>");R.writeEscaped(z.getLabel());R.write("</span>");R.write("</div>");}if(z.getEditable()){this.renderBWBorder(R);}R.write("</div>");if(z.getEditable()){this.renderZoneResizeHandlers(R);}R.write("</div>");};I.renderBWBorder=function(R){R.write("<svg class='sapSuiteUiCommonsImageEditorZoneEditBorder' x='0' y='0' width='100%' height='100%'>");this.renderStrokeRect(R,"black",5,5,5,0.5);this.renderStrokeRect(R,"white",5,5,0,0.5);R.write("</svg>");};I.renderStrokeRect=function(R,c,d,i,o,f){R.write("<rect x='0' y='0' width='100%' height='100%' fill='none'");R.writeAttribute("stroke",c);R.writeAttribute("stroke-dasharray",d+","+i);R.write(">");R.write("<animate attributeName='stroke-dashoffset' repeatCount='indefinite'");R.writeAttribute("from",o);R.writeAttribute("to",o+d+i);R.writeAttribute("dur",f);R.write("></animate>");R.write("</rect>");};I.renderShadowFilter=function(R,i,d,a){R.write("<filter");R.writeAttribute("id",i);R.writeAttribute("x","0");R.writeAttribute("y","0");R.writeAttribute("width","100%");R.writeAttribute("height","100%");R.writeAttribute("filterUnits","userSpaceOnUse");R.write(">");R.write("<feGaussianBlur");R.writeAttribute("in","SourceAlpha");R.writeAttribute("stdDeviation","2");R.writeAttribute("result","blur");R.write("/>");R.write("<feOffset");R.writeAttribute("in","blur");R.writeAttribute("result","offOut");R.writeAttribute("x",d);R.writeAttribute("y",a);R.write("/>");R.write("<feBlend");R.writeAttribute("in","SourceGraphic");R.writeAttribute("in2","offOut");R.writeAttribute("mode","normal");R.write("/>");R.write("</filter>");};I.renderRectBorders=function(R,c){R.write("<g class='sapSuiteUiCommonsImageEditorCropItemRectangle sapSuiteUiCommonsImageEditorCropItemCustomShape'>");this.renderCropLine(R,c,"bottomShadow",0,0,100,0);this.renderCropLine(R,c,"leftShadow",100,0,100,100);this.renderCropLine(R,c,"topShadow",100,100,0,100);this.renderCropLine(R,c,"rightShadow",0,100,0,0);R.write("</g>");};I.renderThirdLines=function(R,c){R.write("<g mask='url(#"+c.getId()+"-thirdsMask)' class='sapSuiteUiCommonsImageEditorCropThirds'>");this.renderCropLine(R,c,"rightShadow",100/3,0,100/3,100);this.renderCropLine(R,c,"rightShadow",100*2/3,0,100*2/3,100);this.renderCropLine(R,c,"bottomShadow",0,100/3,100,100/3);this.renderCropLine(R,c,"bottomShadow",0,100*2/3,100,100*2/3);R.write("</g>");};I.renderCropLine=function(R,c,f,x,y,X,Y){R.write("<line class='sapSuiteUiCommonsImageEditorCropLine'");if(!D.browser.msie&&!D.browser.edge){R.writeAttribute("filter","url(#"+c.getId()+"-"+f+")");}R.writeAttribute("x1",x+"%");R.writeAttribute("y1",y+"%");R.writeAttribute("x2",X+"%");R.writeAttribute("y2",Y+"%");R.write("/>");};I.renderTransformHandlers=function(R){R.write("<div class='sapSuiteUiCommonsImageEditorTransformHandlers'>");Object.keys(H).forEach(function(k){this.renderTransformHandler(R,k);},this);R.write("</div>");};I.renderTransformHandler=function(R,d){var h=H[d],c;R.write("<div");c=this.getCommonHandlerClasses(d);c.push("sapSuiteUiCommonsImageEditorHandlerContainer");c.forEach(function(C){R.addClass(C);});R.writeClasses();R.write(">");h.handlers.forEach(function(s){this.renderDiv(R,["sapSuiteUiCommonsImageEditorHandler","sapSuiteUiCommonsImageEditorHandler"+s]);},this);R.write("</div>");};I.renderCropAreaDragHandler=function(R,c){var i=c._getCropAreaDragIcon();R.write("<div");R.addClass("sapSuiteUiCommonsImageEditorDragHandlerContainer");R.writeClasses();R.write(">");R.renderControl(i);R.write("</div>");};I.renderCropAreaResizeHandlers=function(R){Object.keys(H).forEach(function(k){this.renderCropAreaResizeHandler(R,k);},this);};I.renderCropAreaResizeHandler=function(R,d){var h=H[d],c;R.write("<div");c=this.getCommonHandlerClasses(d);c.push("sapSuiteUiCommonsImageEditorHandlerContainer");h.types.forEach(function(t){c.push("sapSuiteUiCommonsImageEditorCropItem"+t);});c.forEach(function(C){R.addClass(C);});R.writeClasses();R.write(">");h.handlers.forEach(function(s){this.renderDiv(R,["sapSuiteUiCommonsImageEditorHandler","sapSuiteUiCommonsImageEditorHandler"+s]);},this);R.write("</div>");};I.renderDiv=function(R,c){R.write("<div");c.forEach(function(C){R.addClass(C);});R.writeClasses();R.write(">");R.write("</div>");};I.renderZoneResizeHandlers=function(R){Object.keys(H).forEach(function(k){this.renderZoneResizeHandler(R,k);},this);};I.renderZoneResizeHandler=function(R,d){var c=this.getCommonHandlerClasses(d);c.push("sapSuiteUiCommonsImageEditorZoneResizeHandler");this.renderDiv(R,c);};I.getCommonHandlerClasses=function(d){var h=H[d];return["ui-resizable-handle","ui-resizable-"+d,h.vertical,h.horizontal];};return I;},true);
