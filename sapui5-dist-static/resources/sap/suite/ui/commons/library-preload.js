//@ui5-bundle sap/suite/ui/commons/library-preload.js
sap.ui.predefine('sap/suite/ui/commons/CalculationBuilder',["sap/ui/thirdparty/jquery","./library","sap/ui/core/Control","./CalculationBuilderItem","./CalculationBuilderExpression","./CalculationBuilderInput","./CalculationBuilderFunction","sap/m/OverflowToolbar","sap/m/OverflowToolbarToggleButton","sap/m/OverflowToolbarButton","sap/m/ToolbarSpacer","sap/m/Title","sap/ui/core/Popup","sap/m/MessageBox","sap/base/Log","sap/base/util/uid","sap/ui/core/library","sap/m/library","sap/ui/core/routing/HashChanger"],function(q,l,C,a,b,c,d,O,e,f,T,g,P,M,L,u,h,m,H){"use strict";var B=m.ButtonType;var j=h.TitleLevel;var I=Object.freeze({SHOW_EXPRESSION:"sap-icon://notification-2",EXPAND_VARIABLE:"sap-icon://disconnected",FULL_SCREEN:"sap-icon://full-screen",EXIT_FULL_SCREEN:"sap-icon://exit-full-screen"});var r=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var k=l.CalculationBuilderOperatorType,n=l.CalculationBuilderLogicalOperatorType,o=l.CalculationBuilderComparisonOperatorType,p=l.CalculationBuilderItemType,F=l.CalculationBuilderFunctionType,s=l.CalculationBuilderLayoutType,V=l.CalculationBuilderValidationMode;var N=new RegExp(String.fromCharCode(160),"g");var t={abs:{key:"ABS",title:"ABS - Absolute Value",allowed:true},round:{key:"Round",title:"Round",template:["",",",""],allowed:true},roundup:{key:"RoundUp",title:"Round Up",template:["",",",""],allowed:true},rounddown:{key:"RoundDown",title:"Round Down",template:["",",",""],allowed:true},sqrt:{key:"SQRT",title:"SQRT",allowed:true},"case":{key:"Case",title:"Case",description:"CASE ( \"When\" Expression \"Then\" Expression \"Else\" Expression )",template:["",",","",",",""]},ndiv0:{key:"NDIV0",title:"NDIV0"},nodim:{key:"NODIM",title:"NODIM",description:"NODIM ( Variable )"},sumct:{key:"SUMCT",title:"SUMCT",description:"SUMGT ( Variable )"},sumgt:{key:"SUMGT",title:"SUMGT",description:"SUMGT ( Variable )"},sumrt:{key:"SUMRT",title:"SUMRT",description:"SUMRT ( Variable )"}};
var v=C.extend("sap.suite.ui.commons.CalculationBuilder",{
metadata:{library:"sap.suite.ui.commons",properties:{expression:{type:"string",group:"Misc",defaultValue:null},title:{type:"string",group:"Misc",defaultValue:null},showToolbar:{type:"boolean",group:"Misc",defaultValue:true},wrapItemsInExpression:{type:"boolean",group:"Misc",defaultValue:true},layoutType:{type:"string",group:"Misc",defaultValue:"Default"},showInputToolbar:{type:"boolean",group:"Misc",defaultValue:false},readOnly:{type:"boolean",group:"Misc",defaultValue:false},allowComparisonOperators:{type:"boolean",group:"Misc",defaultValue:true},allowLogicalOperators:{type:"boolean",group:"Misc",defaultValue:true},allowSuggestions:{type:"boolean",group:"Misc",defaultValue:true},allowStringConstants:{type:"boolean",group:"Misc",defaultValue:false},allowStringLiterals:{type:"boolean",group:"Misc",defaultValue:false},validationMode:{type:"sap.suite.ui.commons.CalculationBuilderValidationMode",group:"Misc",defaultValue:V.LiveChange},disabledDefaultTokens:{type:"string",group:"Misc",defaultValue:""}},defaultAggregation:"items",aggregations:{items:{type:"sap.suite.ui.commons.CalculationBuilderItem",multiple:true,singularName:"item",bindable:"bindable",forwarding:{idSuffix:"-expression",aggregation:"items",forwardBinding:true}},variables:{type:"sap.suite.ui.commons.CalculationBuilderVariable",multiple:true,singularName:"Variable",forwarding:{idSuffix:"-expression",aggregation:"variables",forwardBinding:true}},functions:{type:"sap.suite.ui.commons.CalculationBuilderFunction",multiple:true,singularName:"Function",forwarding:{idSuffix:"-expression",aggregation:"functions",forwardBinding:true}},operators:{type:"sap.ui.core.Item",multiple:true,singularName:"Operator",forwarding:{idSuffix:"-expression",aggregation:"operators",forwardBinding:true}},groups:{type:"sap.suite.ui.commons.CalculationBuilderGroup",multiple:true,singularName:"Group",forwarding:{idSuffix:"-expression",aggregation:"groups",forwardBinding:true}}},events:{validateFunction:{parameters:{definition:"object",customFunction:"object",result:"sap.suite.ui.commons.CalculationBuilderValidationResult"}},change:{},afterValidation:{}}},
renderer:function(R,i){var w=i.getWrapItemsInExpression()?" sapCalculationBuilderWrapItems ":"",x=i.getLayoutType()===s.TextualOnly,D=i._bShowInput||x?"":"style=\"display:none\"",y=i._isExpressionVisible(),z=i._isInputVisible(),A=i.getReadOnly();R.write("<div");R.writeControlData(i);R.addClass("sapCalculationBuilder");if(i.getReadOnly()){R.addClass("sapCalculationBuilderReadOnly");}R.writeClasses(i);R.write(">");if(i.getShowToolbar()&&!x){R.renderControl(i.getToolbar());}if(y){i._oExpressionBuilder._bReadOnly=A;R.write("<div class=\"sapCalculationBuilderInsideWrapper"+w+"\">");R.renderControl(i._oExpressionBuilder);R.write("</div>");}if(y&&z){R.write("<div class=\"sapCalculationBuilderDelimiterLine\"></div>");}if(z){i._oInput._bReadOnly=A||(i.getLayoutType()===s.VisualTextualReadOnly);R.write("<div");R.addClass("sapCalculationBuilderInputOuterWrapper");if(i._oInput._bReadOnly){R.addClass("sapCalculationBuilderReadOnly");}if(i.getLayoutType()===s.Default||i.getLayoutType()===s.VisualTextualReadOnly){R.addClass("sapCalculationBuilderInputOuterWrapperMargin");}R.writeClasses();R.write(D+">");R.renderControl(i._oInput);R.write("</div>");}R.write("</div>");}
});
v.prototype.init=function(){this.oHashChanger=new H();this.oHashChanger.init();this._mDisabledTokens={};this._bShowInput=true;this._oFullScreenContainer=null;this._bIsFullScreen=false;this._oExpressionBuilder=new b(this.getId()+"-expression",{change:function(){this._expressionChanged();this.fireChange();}.bind(this)});this.addDependent(this._oExpressionBuilder);this._oInput=new c(this.getId()+"-input",{change:function(E){var i=E.getParameter("value"),w=this._oInput._stringToItems(i),x=E.getParameter("position");this._oExpressionBuilder._smartRender(w);this._setExpression(this._oInput._convertEmptyHashes(i));if(this.getValidationMode()!==V.FocusOut){this._validateInput(i,x);}else{this._oInput._recreateText({text:i,position:x,errors:this._oExpressionBuilder._aErrors});}this._enableOrDisableExpandAllButton();this.fireChange();}.bind(this)});this.addDependent(this._oInput);};
v.prototype._expressionChanged=function(){var i="";this._oExpressionBuilder._aErrors=this._oExpressionBuilder._validateSyntax();i=this._oInput._itemsToString({items:this._oExpressionBuilder.getItems(),errors:this._oExpressionBuilder._aErrors});this._setExpression(i);this.fireAfterValidation();this._oInput._displayError(this._oExpressionBuilder._aErrors.length!==0);this._oExpressionBuilder._printErrors();this._enableOrDisableExpandAllButton();};
v.prototype.onBeforeRendering=function(){this._resetItems();this._createToolbar();this._oExpressionBuilder._createVariablesMap();this._oInput._aVariables=this.getVariables();if(this._bExpressionSet){this._oExpressionBuilder._setItems(this._oInput._stringToItems(this._sExpressionDirectValue));}this._bExpressionSet=false;this._sExpressionDirectValue="";if(!this._isExpressionVisible()){this._oExpressionBuilder._aErrors=this._oExpressionBuilder._validateSyntax();}this._bRendered=false;};
v.prototype.onAfterRendering=function(){this._setExpression(this._oInput._itemsToString({items:this._oExpressionBuilder.getItems(),errors:this._oExpressionBuilder._aErrors}));this._bRendered=true;this._oInput._displayError(this._oExpressionBuilder._aErrors.length>0);this.oHashChanger.attachEvent("hashChanged",function(){if(this._bIsFullScreen){this._toggleFullScreen();}}.bind(this));};
v.prototype.exit=function(){if(this.oHashChanger){this.oHashChanger.destroy();}};
v.prototype.getToolbar=function(){return this._oToolbar;};
v.prototype.getInputToolbar=function(){return this._oInput&&this._oInput._oInputToolbar;};
v.prototype.validateParts=function(i){i=i||{};return this._oExpressionBuilder._validateSyntax({items:i.items,from:i.from,to:i.to});};
v.prototype.appendError=function(E){this._oExpressionBuilder._aErrors.push(E);};
v.prototype.getErrors=function(){return this._oExpressionBuilder._aErrors;};
v.prototype.validate=function(){this._resetItems();this._oExpressionBuilder._aErrors=this._oExpressionBuilder._validateSyntax();this.updateErrorsDisplay();};
v.prototype.updateErrorsDisplay=function(){var E=this._oExpressionBuilder._aErrors;if(this._isInputVisible()){this._oInput._recreateText({errors:E});this._oInput._displayError(E.length>0);}if(this._isExpressionVisible()){this._oExpressionBuilder._printErrors();}};
v.prototype.allowFunction=function(i,A){if(!i){return;}var w=t[i.toLowerCase()];if(w){w.allowed=A;}};
v.prototype.updateOrCreateItem=function(K){this._oExpressionBuilder._updateOrCreateItem({key:K});};
v.prototype.getErrors=function(){return this._oExpressionBuilder&&this._oExpressionBuilder._aErrors;};
v.prototype.getAllowStringConstants=function(){L.warning("This function is deprecated, please use getAllowStringLiterals instead");return this.getAllowStringLiterals();};
v.prototype.setAllowStringConstants=function(A){L.warning("This function is deprecated, please use setAllowStringLiterals instead");return this.setAllowStringLiterals(A);};
v.prototype._resetItems=function(){this.getItems().forEach(function(i){i._reset();});};
v.prototype._validateInput=function(i,w){this._oExpressionBuilder._aErrors=this._oExpressionBuilder._validateSyntax();this.fireAfterValidation();this._oInput._recreateText({text:i,position:w,errors:this._oExpressionBuilder._aErrors});this._oExpressionBuilder._printErrors();this._oInput._displayError(this._oExpressionBuilder._aErrors.length>0);};
v.prototype._findInArray=function(K,i,w){return i.some(function(x){var y=w?x["get"+w]():x;return y.toLowerCase()===K;});};
v.prototype._findInItems=function(K,i){K=(K||"").toLowerCase();return i.some(function(w){return w.getKey().toLowerCase()===K;});};
v.prototype._createErrorText=function(E,w){E=E||this.getErrors();var x="",y=0,z=5;for(var i=0;i<E.length&&y<z;i++){if((E[i].index<0||!q.isNumeric(E[i].index))||!w){y++;x+=E[i].title+"\n";}}return x;};
v.prototype._getFunctionMap=function(){return t;};
v.prototype._getFunctionDefinition=function(K){K=(K||"").toLowerCase();return t[K]||q.grep(this.getFunctions(),function(i){return i.getKey().toLowerCase()===K;})[0];};
v.prototype._getFunctionDescription=function(i){var E;if(i.description){return i.description;}E=r.getText("CALCULATION_BUILDER_EXPRESSION_TITLE");if(i.template){var D=(i.key||"")+" ( ";i.template.forEach(function(K){D+=(K?K:E)+" ";});return D+")";}return(i.key||"")+" ( "+E+" )";};
v.prototype._getFunctionTemplateItems=function(i){if(!i){return[];}var w=(i instanceof d)?p.CustomFunction:p.Function;return w===p.Function?(i.template||[]):this._convertToTemplate(i.getItems());};
v.prototype._getFunctionAllowParametersCount=function(K){var i=this._getFunctionTemplateItems(this._getFunctionDefinition(K)),w=i.join("");return(w.match(/,/g)||[]).length+1;};
v.prototype._convertToTemplate=function(i){return i.map(function(w){return w.getKey();});};
v.prototype._isOperator=function(K,A){A=A!==false;K=(K||"").toLowerCase();if(!this._isTokenAllowed(K)){return false;}return this._findInArray(K,Object.keys(k))||(A&&this.getAllowLogicalOperators()&&this._findInArray(K,Object.keys(n)))||(this.getAllowComparisonOperators()&&this._findInArray(K,Object.keys(o)));};
v.prototype._isFunction=function(K){return this._isTokenAllowed(K)&&this._findInArray(K,Object.keys(F));};
v.prototype._isCustomOperator=function(K){return this._findInItems(K,this.getOperators());};
v.prototype._isStringLiteral=function(K){return K&&K.length>=2&&K[0]==="\""&&K[K.length-1]==="\"";};
v.prototype._getType=function(K){K=(K||"").toLowerCase();if(!K){return p.Empty;}if(this._isOperator(K)){return p.Operator;}if(this._isCustomOperator(K)){return p.CustomOperator;}if(this._findInArray(K,this.getVariables(),"Key")){return p.Variable;}if(this._isFunction(K)){return p.Function;}if(this._findInArray(K,this.getFunctions(),"Key")){return p.CustomFunction;}if(this.getAllowStringLiterals()&&this._isStringLiteral(K)){return p.Literal;}if(!isNaN(K)){return p.Literal;}return p.Error;};
v.prototype._createToolbar=function(){if(this._oToolbar){this._oShowInputButton&&this._oShowInputButton.setVisible(this._isInputVisible());this._oToolbarTitle.setText(this.getTitle());this._oToolbarTitle.setVisible(!!this.getTitle());return;}this._oToolbarTitle=new g({titleStyle:j.H4,text:this.getTitle(),visible:!!this.getTitle()});this._oToolbar=new O(this.getId()+"-toolbar",{content:[this._oToolbarTitle,new T()]}).addStyleClass("sapCalculationBuilderToolbar");this._oShowInputButton=new e({type:B.Transparent,icon:I.SHOW_EXPRESSION,tooltip:r.getText("CALCULATION_BUILDER_TOGGLE_EXPRESSION_BUTTON"),pressed:true,press:function(){this.$().find(".sapCalculationBuilderInputOuterWrapper").toggle();this._bShowInput=!this._bShowInput;}.bind(this)});this._oToolbar.addContent(this._oShowInputButton);this._oToolbar.addContent(this._getExpandAllVariablesButton());this._oToolbar.addContent(new e({type:B.Transparent,icon:I.FULL_SCREEN,tooltip:r.getText("CALCULATION_BUILDER_ENTER_FULL_SCREEN_BUTTON"),press:function(E){var i=E.getSource();this._toggleFullScreen();i.setTooltip(this._bIsFullScreen?r.getText("CALCULATION_BUILDER_EXIT_FULL_SCREEN_BUTTON"):r.getText("CALCULATION_BUILDER_ENTER_FULL_SCREEN_BUTTON"));i.setIcon(this._bIsFullScreen?I.EXIT_FULL_SCREEN:I.FULL_SCREEN);this.invalidate();}.bind(this)}));this._oFullScreenPopup=new P({modal:true,shadow:false,autoClose:false});this.addDependent(this._oToolbar);};
v.prototype._getExpandAllVariablesButton=function(){if(!this._oExpandAllVariablesButton){this._oExpandAllVariablesButton=new f({type:B.Transparent,icon:I.EXPAND_VARIABLE,tooltip:r.getText("CALCULATION_BUILDER_EXPAND_ALL_BUTTON"),press:function(E){M.show(r.getText("CALCULATION_BUILDER_EXPAND_ALL_MESSAGE_TEXT"),{icon:M.Icon.WARNING,title:r.getText("CALCULATION_BUILDER_EXPAND_ALL_MESSAGE_TITLE"),actions:[M.Action.OK,M.Action.CANCEL],onClose:function(A){if(A===M.Action.OK){this._oExpressionBuilder._expandAllVariables();}}.bind(this)});}.bind(this)});}return this._oExpandAllVariablesButton;};
v.prototype._enableOrDisableExpandAllButton=function(){var i=this.getReadOnly()||this.getLayoutType()===s.VisualTextualReadOnly,$=this._getExpandAllVariablesButton().$();if($[0]){this._getExpandAllVariablesButton().setEnabled(!i&&this.getItems().some(function(w){return w._isVariable()&&w.isExpandable();}));}};
v.prototype.setExpression=function(i){this.setProperty("expression",i);this._sExpressionDirectValue=i;if(this._bRendered||this._sExpressionDirectValue){this._bExpressionSet=true;}this._oInput._setupAriaLabel();return this;};
v.prototype.getExpression=function(){if(this._bExpressionSet){return this._sExpressionDirectValue;}return this._oInput._itemsToString({createInputText:false,items:this.getItems()});};
v.prototype._setExpression=function(i){if(i){i=i.replace(N," ");}this.setProperty("expression",i,true);this._oInput._setupAriaLabel();};
v.prototype._toggleFullScreen=function(){var i=function(){this._oFullScreenContainer={};this._oFullScreenContainer.$content=this.$();if(this._oFullScreenContainer.$content){this._oFullScreenContainer.$tempNode=q("<div></div>");this._oFullScreenContainer.$content.before(this._oFullScreenContainer.$tempNode);this._oFullScreenContainer.$overlay=q("<div id='"+u()+"'></div>");this._oFullScreenContainer.$overlay.addClass("sapCalculationBuilderOverlay");this._oFullScreenContainer.$overlay.append(this._oFullScreenContainer.$content);this._oFullScreenPopup.setContent(this._oFullScreenContainer.$overlay);this._oFullScreenPopup.setModal(true);}this._oFullScreenPopup.open(0,P.Dock.BeginTop,P.Dock.BeginTop,q("body"));}.bind(this);var w=function(){this._oFullScreenContainer.$tempNode.replaceWith(this.$());this._oFullScreenPopup.close();this._oFullScreenContainer.$overlay.remove();}.bind(this);this._bIsFullScreen?w():i();this._bIsFullScreen=!this._bIsFullScreen;};
v.prototype._getGroupMap=function(){return this._oExpressionBuilder._mGroups;};
v.prototype._isExpressionVisible=function(){return this.getLayoutType()!==s.TextualOnly;};
v.prototype._isInputVisible=function(){return this.getLayoutType()!==s.VisualOnly;};
v.prototype._createFunctionObject=function(i){if(!i){return null;}return i instanceof d?{key:i.getKey(),title:i._getLabel(),description:this._getFunctionDescription({key:i.getKey(),description:i.getDescription(),template:this._convertToTemplate(i.getItems())}),type:p.CustomFunction,functionObject:i}:{key:i.key,title:i.title,description:this._getFunctionDescription(i),type:p.Function,functionObject:i};};
v.prototype._getAllFunctions=function(){var i=[];Object.keys(t).forEach(function(K){if(t[K].allowed&&this._isTokenAllowed(K)){i.push(this._createFunctionObject(t[K]));}}.bind(this));this.getFunctions().forEach(function(w){i.push(this._createFunctionObject(w));}.bind(this));return i.sort(function(w,x){return w.title>x.title;});};
v.prototype._isTokenAllowed=function(K){return!this._mDisabledTokens[(K||"").toLowerCase()];};
v.prototype.setDisabledDefaultTokens=function(i){this._mDisabledTokens={};this.setProperty("disabledDefaultTokens",i);if(i){var w=i.split(";");w.forEach(function(x){if(x){this._mDisabledTokens[x.toLowerCase()]=1;}}.bind(this));}return this;};
return v;});
sap.ui.predefine('sap/suite/ui/commons/CalculationBuilderExpression',["sap/ui/thirdparty/jquery","./library","./CalculationBuilderItem","sap/ui/core/Control","sap/ui/core/Popup","sap/ui/core/delegate/ItemNavigation","sap/m/MessageBox","sap/m/OverflowToolbar","sap/m/OverflowToolbarToggleButton","sap/m/OverflowToolbarButton","sap/m/ToolbarSpacer","sap/m/Title","sap/m/Button","sap/m/FlexBox","sap/m/HBox","sap/m/VBox","sap/m/library","sap/m/SegmentedButton","sap/m/SegmentedButtonItem","sap/m/StepInput","sap/m/Input","sap/m/Page","sap/m/List","sap/m/StandardListItem","sap/m/NavContainer","sap/m/SearchField","sap/m/Label","sap/m/Panel","sap/m/ResponsivePopover","sap/m/Toolbar","sap/m/MessageStrip","./CalculationBuilderValidationResult","sap/suite/ui/commons/ControlProxy","sap/ui/core/Icon","sap/ui/core/library","sap/ui/thirdparty/jqueryui/jquery-ui-core","sap/ui/thirdparty/jqueryui/jquery-ui-widget","sap/ui/thirdparty/jqueryui/jquery-ui-mouse","sap/ui/thirdparty/jqueryui/jquery-ui-draggable","sap/ui/thirdparty/jqueryui/jquery-ui-droppable","sap/ui/thirdparty/jqueryui/jquery-ui-selectable"],function(q,l,C,a,P,I,M,O,b,c,T,d,B,F,H,V,e,S,f,g,h,j,L,m,N,n,o,p,R,r,s,t,u,v,w){"use strict";var x=e.PlacementType;var y=e.ListType;var z=e.ListMode;var A=e.InputType;var D=e.FlexAlignItems;var E=e.FlexRendertype;var G=e.ButtonType;var J=w.TextAlign;var K=w.ValueState;var Q=l.CalculationBuilderItemType,U=l.CalculationBuilderOperatorType,W=l.CalculationBuilderComparisonOperatorType,X=l.CalculationBuilderLogicalOperatorType,Y=l.CalculationBuilderLayoutType,Z=e.FlexDirection;var $=Object.freeze({PAGE_MAIN:"-pagemain",PAGE_OPERATORS:"-pageoperators",PAGE_VARIABLE:"-pagevariable",PAGE_FUNCTIONS:"-pagefunctions",LABEL_LITERALS:"-literalInput-label",INPUT_LITERALS:"-literalInput-field"});var _=Object.freeze({OPERATORS_CATEGORY:"sap-icon://attachment-html",LITERALS_CATEGORY:"sap-icon://grid",VARIABLES_CATEGORY:"sap-icon://notes",FUNCTIONS_CATEGORY:"sap-icon://chalkboard",DELETE:"sap-icon://delete"});var a1=Object.freeze({KEY_PREVIOUS:"previous",KEY_NEXT:"next",MOUSE:"mouse"});var b1="##DEFAULT##";var c1=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");
var d1=a.extend("sap.suite.ui.commons.CalculationBuilderExpression",{
metadata:{library:"sap.suite.ui.commons",defaultAggregation:"items",aggregations:{items:{type:"sap.suite.ui.commons.CalculationBuilderItem",multiple:true,singularName:"item",bindable:"bindable"},variables:{type:"sap.suite.ui.commons.CalculationBuilderVariable",multiple:true,singularName:"Variable"},functions:{type:"sap.suite.ui.commons.CalculationBuilderFunction",multiple:true,singularName:"Function"},operators:{type:"sap.ui.core.Item",multiple:true,singularName:"operator"},groups:{type:"sap.suite.ui.commons.CalculationBuilderGroup",multiple:true,singularName:"Group"}},events:{change:{}}},
renderer:function(k,e1){k.write("<div");k.writeControlData(e1);k.addClass("sapCalculationBuilderInner");k.writeClasses(e1);k.write(">");k.write(e1._renderDelimiter(0));e1.getItems().forEach(function(f1,i){f1._iIndex=i;f1._bReadOnly=e1._bReadOnly;k.renderControl(f1);k.write(e1._renderDelimiter(i+1));},this);if(!e1._bReadOnly){k.renderControl(e1._getNewItem());}k.write("<div class=\"sapCalculationBuilderSelected\"></div>");k.write("</div>");k.write("<div id=\""+e1.getId()+"-erroricon\"  class=\"sapCalculationBuilderExpressionErrorIcon\">");k.renderControl(e1._getErrorIcon());k.write("</div>");}
});
d1.prototype.init=function(){this._aErrors=[];this._bAreSelectedItemsDeleting=false;this._bDragging=false;this._bIsCalculationBuilderRendering=false;};
d1.prototype._renderDelimiter=function(i){var k="";k+="<div class=\"sapCalculationBuilderDelimiter sapCalculationBuilderDroppable\" index=\""+i+"\">";k+="<div class=\"sapCalculationBuilderDroppableLine\"></div>";k+="<div class=\"sapCalculationBuilderDroppableCircle\"></div>";k+="<div class=\"sapCalculationBuilderDelimiterNewButton\">";k+="<span role=\"presentation\" aria-hidden=\"true\" data-sap-ui-icon-content=\"\""+"class=\"sapUiIcon sapUiIconMirrorInRTL sapCalculationBuilderDelimiterNewButtonIcon\" style=\"font-family:'SAP-icons'\"></span>";k+="</div>";k+="</div>";return k;};
d1.prototype.onBeforeRendering=function(){this._reset();this._createPopup();this.getParent()._enableOrDisableExpandAllButton();this._aErrors=this._validateSyntax();this._fireAfterValidation();this._bIsCalculationBuilderRendering=true;this._bRendered=false;};
d1.prototype.onAfterRendering=function(){this._bIsCalculationBuilderRendering=false;if(!this._bReadOnly){this._setupDroppable();this._setupSelectable();this._setupNewButtonEvents();}this._setupKeyboard();this._bRendered=true;var i=this.getParent();if(i._bRendered){i._setExpression(i._oInput._itemsToString({items:this.getItems(),errors:this._aErrors}));i._oInput._displayError(this._aErrors.length!==0);}};
d1.prototype.onsapfocusleave=function(){if(!this._bAreSelectedItemsDeleting){this._deselect();}};
d1.prototype.onsapenter=function(i){this._handleEnter(i);};
d1.prototype.onsapspace=function(i){if(q(i.target).hasClass("sapCalculationBuilderItem")){this._handleSpace(i);}};
d1.prototype.onsappreviousmodifiers=function(i){if(i.ctrlKey){this._handleCtrlPrevious(i);}};
d1.prototype.onsapnextmodifiers=function(i){if(i.ctrlKey){this._handleCtrlNext(i);}};
d1.prototype.onsapdelete=function(i){this._handleDelete(i);};
d1.prototype.exit=function(){if(this._oPopover){this._oPopover.destroy();}if(this._oItemNavigation){this.removeDelegate(this._oItemNavigation);this._oItemNavigation.destroy();}if(this._oErrorIcon){this._oErrorIcon.destroy();this._oErrorIcon=null;}};
d1.prototype._getErrorIcon=function(){if(!this._oErrorIcon){this._oErrorIcon=new v({src:"sap-icon://message-error",useIconTooltip:false,size:"20px"});}return this._oErrorIcon;};
d1.prototype._createPopup=function(){var i={footerButtons:[]};this._createPopoverLayout(i);this._createPopoverFunctionsItems(i);this._createPopoverOperatorsItems(i);this._createPopoverNavContainer(i);this._createPopover(i);};
d1.prototype._reset=function(){this.getItems().forEach(function(i){i._reset();});if(this._oPopover){this._oPopover.destroy();this._oPopover=null;}};
d1.prototype._createPopoverLayout=function(i){var k=function(h1){return new B({text:h1,press:this._updateOrCreateItem.bind(this,{type:Q.Operator,key:h1})}).addStyleClass("sapUiTinyMarginEnd");}.bind(this);var e1=new H({renderType:E.Div,width:"100%"});e1.addStyleClass("sapCalculationBuilderItemPopupOperators");e1.addStyleClass("sapCalculationBuilderItemPopupOptionItem");Object.keys(U).forEach(function(h1){if(this.getParent()._isTokenAllowed(h1)){var i1=k(U[h1]);if(h1===U[","]){this._attachAriaLabelToButton(i1,c1.getText("CALCULATION_BUILDER_COMMA_ARIA_LABEL"));}else if(h1===U["-"]){this._attachAriaLabelToButton(i1,c1.getText("CALCULATION_BUILDER_MINUS_ARIA_LABEL"));}e1.addItem(i1);}}.bind(this));var f1=this._createPopoverLiteralLabelAndInput(i);var g1=new V({items:[e1,f1],alignItems:"Start"});g1.addStyleClass("sapCalculationBuilderItemPopupOperatorsAndInputWrapper");i.layout=g1.getItems().length>0?g1:null;};
d1.prototype._createPopoverLiteralLabelAndInput=function(i){var k=new o({id:this.getId()+$.LABEL_LITERALS,text:c1.getText("CALCULATION_BUILDER_LITERAL_INPUT_LABEL")});var e1;if(this.getParent().getAllowStringLiterals()){e1=new h({id:this.getId()+$.INPUT_LITERALS,width:"100%",placeholder:c1.getText("CALCULATION_BUILDER_ADD_LITERAL_FIELD_PLACEHOLDER_ANY_STRING"),valueStateText:c1.getText("CALCULATION_BUILDER_ADD_LITERAL_FIELD_PLACEHOLDER_ERROR"),liveChange:function(h1){var i1=h1.getSource(),j1=h1.getParameter("value"),k1=j1.indexOf("\"")===-1;i1.setValueState(k1?K.None:K.Error);i.footerButtons.okButton.setEnabled(k1);},submit:function(h1){this._submitLiteralInput(e1);}.bind(this)});}else{e1=new g({width:"100%",placeholder:c1.getText("CALCULATION_BUILDER_ADD_LITERAL_FIELD_PLACEHOLDER"),textAlign:J.Right,valueStateText:c1.getText("CALCULATION_BUILDER_ADD_LITERAL_FIELD_ERROR_TEXT"),displayValuePrecision:3,change:function(){i.footerButtons.okButton.setEnabled(true);}});if(e1._getInput){var f1=e1._getInput();if(f1){f1.attachSubmit(function(h1){this._submitLiteralInput(e1);},this);}}}e1.addAriaLabelledBy(k);i.literalInput=e1;var g1=new V({renderType:E.Div,items:[k,e1],width:"100%"});g1.addStyleClass("sapCalculationBuilderItemPopupOptionItem");g1.addStyleClass("sapCalculationBuilderItemPopupLiteralLabelAndInput");return g1;};
d1.prototype._createPopoverVariablesItems=function(i){if(!i){return[];}var k=[];i.forEach(function(f1){var g1=new m({title:f1._getLabel()});g1._calculationBuilderKey=f1.getKey();k.push(g1);},this);k=k.sort(function(o1,o2){return o1.getTitle().localeCompare(o2.getTitle());});var e1=new L({mode:z.SingleSelectMaster,selectionChange:function(f1){this._updateOrCreateItem({type:Q.Variable,key:f1.getParameter("listItem")._calculationBuilderKey});}.bind(this),items:k});this._oSearchField=new n({placeholder:c1.getText("CALCULATION_BUILDER_SEARCH_VARIABLE"),liveChange:function(f1){var g1=f1.getSource().getValue();if(g1||g1===""){e1.removeAllItems();k.forEach(function(h1){if(h1.getTitle().toLowerCase().indexOf(g1.toLowerCase())!==-1){e1.addItem(h1);}});}}});this._aVariableLists.push(e1);return[this._oSearchField,e1];};
d1.prototype._createPopoverFunctionsItems=function(i){var k=this,e1=this.getParent();var f1=function(g1){return new m({title:g1.title,description:g1.description,type:y.Active,customData:[{key:"functionKey",value:g1.key}],press:g1.press});};i.functionList=new L({mode:z.SingleSelectMaster,itemPress:function(){this.getSelectedItem().firePress();}});e1._getAllFunctions().forEach(function(g1){i.functionList.addItem(f1({key:g1.key,title:g1.title,description:g1.description,press:k._updateOrCreateItem.bind(k,{key:g1.key,type:g1.type,functionObject:g1.functionObject})}));});};
d1.prototype._createPopoverOperatorsItems=function(i){var k=this.getParent();var e1=function(j1,k1){var l1=[];Object.keys(j1).forEach(function(m1){var n1,o1,p1=j1[m1];if(k._isTokenAllowed(m1)){if(typeof p1==="object"){o1=p1.getText();n1=p1.getKey();}else{n1=o1=p1;}var q1=new B({text:o1,press:this._updateOrCreateItem.bind(this,{type:k1,key:n1})}).addStyleClass("sapCalculationBuilderPopoverOperatorsButton").addStyleClass("sapUiTinyMarginEnd");if(m1===W["!="]){this._attachAriaLabelToButton(q1,c1.getText("CALCULATION_BUILDER_NOT_EQUAL_ARIA_LABEL"));}l1.push(q1);}}.bind(this));return l1;}.bind(this);var f1=function(j1,k1,l1){var m1=e1(k1,l1);if(m1.length>0){return new p({content:[new o({width:"100%",text:j1}).addStyleClass("sapUiTinyMarginBottom"),m1]});}return null;};i.operatorsItems=[];if(this.getParent().getAllowComparisonOperators()){var g1=f1(c1.getText("CALCULATION_BUILDER_COMPARISON_TITLE_SELECT"),W,Q.Operator);g1&&i.operatorsItems.push(g1);}if(this.getParent().getAllowLogicalOperators()){var h1=f1(c1.getText("CALCULATION_BUILDER_LOGICAL_TITLE_SELECT"),X,Q.Operator);h1&&i.operatorsItems.push(h1);}var i1=this.getParent().getOperators();if(i1.length>0){i.operatorsItems.push(f1(c1.getText("CALCULATION_BUILDER_OPERATORS_TITLE"),i1,Q.CustomOperator));}};
d1.prototype._createPopoverNavContainer=function(i){var k=function(k1){var l1=j1.getPage(k1);j1.to(l1);};var e1=function(){var k1=new s({type:"Error",showIcon:true}).addStyleClass("sapUiTinyMarginBegin sapUiTinyMarginEnd sapUiTinyMarginTop");this._aStrips.push(k1);return k1;}.bind(this);this._aStrips=[];var f1=[];var g1=this._createPopoverVariablesItems(this._mGroups[b1]);if(g1.length>0){f1.push(new m({title:c1.getText("CALCULATION_BUILDER_VARIABLES_TITLE"),description:c1.getText("CALCULATION_BUILDER_VARIABLES_CATEGORY_DESCRIPTION"),wrapping:true,icon:_.VARIABLES_CATEGORY,press:k.bind(this,this.getId()+$.PAGE_VARIABLE),type:y.Active}));}var h1=i.functionList.getItems();if(h1.length>0){f1.push(new m({title:c1.getText("CALCULATION_BUILDER_FUNCTIONS_TITLE"),type:y.Active,description:c1.getText("CALCULATION_BUILDER_FUNCTIONS_CATEGORY_DESCRIPTION"),wrapping:true,icon:_.FUNCTIONS_CATEGORY,press:k.bind(this,this.getId()+$.PAGE_FUNCTIONS)}));}if(i.operatorsItems.length>0){f1.unshift(new m({title:c1.getText("CALCULATION_BUILDER_OPERATORS_TITLE"),type:y.Active,description:c1.getText("CALCULATION_BUILDER_OPERATORS_CATEGORY_DESCRIPTION"),wrapping:true,icon:_.OPERATORS_CATEGORY,press:k.bind(this,this.getId()+$.PAGE_OPERATORS)}));}this.getGroups().forEach(function(k1){f1.push(new m({title:k1._getTitle(),type:y.Active,description:k1.getDescription(),icon:k1.getIcon(),press:k.bind(this,this.getId()+k1.getKey())}));}.bind(this));var i1=new j({id:this.getId()+$.PAGE_MAIN,title:c1.getText("CALCULATION_BUILDER_DIALOG_TITLE"),content:[e1(),i.layout,new F({direction:Z.Column,items:[new L({items:f1})]}).addStyleClass("sapUiSmallMarginBeginEnd").addStyleClass("sapUiTinyMarginTop").addStyleClass("sapCalculationBuilderNavMainPage")]});i1.setFooter(this._getPageFooter(i1.getId(),i));var j1=new N({defaultTransitionName:"show",navigate:function(k1){var l1=k1.getParameters().to;l1.setFooter(this._getPageFooter(l1.getId(),i));}.bind(this),pages:[i1]});if(i.operatorsItems.length>0){j1.addPage(new j({id:this.getId()+$.PAGE_OPERATORS,content:[e1(),new F({direction:Z.Column,items:[i.operatorsItems]}).addStyleClass("sapUiSmallMarginBeginEnd").addStyleClass("sapUiTinyMarginTop")],showNavButton:true,title:c1.getText("CALCULATION_BUILDER_OPERATORS_PAGE_TITLE"),navButtonPress:k.bind(this,this.getId()+$.PAGE_MAIN)}));}if(g1.length>0){j1.addPage(new j({id:this.getId()+$.PAGE_VARIABLE,content:[e1(),new F({direction:Z.Column,items:g1}).addStyleClass("sapUiSmallMarginBeginEnd").addStyleClass("sapUiTinyMarginTop")],showNavButton:true,title:c1.getText("CALCULATION_BUILDER_VARIABLES_PAGE_TITLE"),navButtonPress:k.bind(this,this.getId()+$.PAGE_MAIN)}));}if(h1.length>0){j1.addPage(new j({id:this.getId()+$.PAGE_FUNCTIONS,content:[e1(),new F({direction:Z.Column,items:[i.functionList]}).addStyleClass("sapUiSmallMarginBeginEnd").addStyleClass("sapUiTinyMarginTop")],showNavButton:true,title:c1.getText("CALCULATION_BUILDER_FUNCTIONS_PAGE_TITLE"),navButtonPress:k.bind(this,this.getId()+$.PAGE_MAIN)}));}this.getGroups().forEach(function(k1){var l1=new j({id:this.getId()+k1.getKey(),showNavButton:true,title:k1._getTitle(),navButtonPress:k.bind(this,this.getId()+$.PAGE_MAIN),content:e1()});var m1=k1.getCustomView();if(m1){var n1=new u();n1.setAssociation("control",m1);l1.addContent(n1);}else{l1.addContent(new F({direction:Z.Column,items:this._createPopoverVariablesItems(this._mGroups[k1.getKey()])}).addStyleClass("sapUiSmallMarginBeginEnd").addStyleClass("sapUiTinyMarginTop"));}j1.addPage(l1);}.bind(this));i.navContainer=j1;};
d1.prototype._callFunctionFireSelection=function(k){this.getGroups().forEach(function(i){if(i.getCustomView()){i.fireSetSelection({key:k});}});};
d1.prototype._clearVariableLists=function(){this._aVariableLists.forEach(function(i){var k=i.getSelectedItem();if(k){i.setSelectedItem(k,false);}});this._callFunctionFireSelection();};
d1.prototype._setVariableListSelection=function(e1){for(var i=0;i<this._aVariableLists.length;i++){var f1=this._aVariableLists[i],g1=this._aVariableLists[i].getItems();for(var k=0;k<g1.length;k++){if(g1[k]._calculationBuilderKey===e1){f1.setSelectedItem(g1[k],true);return;}}}this._callFunctionFireSelection(e1);};
d1.prototype._sanitizeStringLiteral=function(i){if(this.getParent()._isStringLiteral(i)){i=i.substring(1,i.length-1);}return i;};
d1.prototype._clearSearchField=function(){if(this._oSearchField){this._oSearchField.setValue("");this._oSearchField.fireLiveChange();}};
d1.prototype._createPopover=function(k){var e1=function(){var f1=this._oCurrentItem,g1=k.navContainer.getCurrentPage().getId(),h1=k.functionList.getSelectedItem(),i1,j1,k1;var l1=this.getParent().getAllowStringLiterals()?"":0;k.literalInput.setValue(l1);this._clearVariableLists();this._clearSearchField();if(h1){k.functionList.setSelectedItem(h1,false);}if(!f1){i1=this.getId()+$.PAGE_MAIN;}else{if(f1._isFunction()){k1=f1.getKey();i1=this.getId()+$.PAGE_FUNCTIONS;j1=k.functionList.getItems();for(var i=0;i<j1.length;i++){var m1=j1[i].data("functionKey");if((m1&&m1.toLowerCase())===k1.toLowerCase()){k.functionList.setSelectedItem(j1[i],true);break;}}}else if(f1._isLiteral()){var n1=this._sanitizeStringLiteral(f1.getKey());k.literalInput.setValue(n1);k.literalInput.setValueState(K.None);i1=this.getId()+$.PAGE_MAIN;}else if(f1._isVariable()){this._setVariableListSelection(f1.getKey());var o1=f1._oVariable||f1.getVariable(),p1=(o1&&o1.getGroup())||$.PAGE_VARIABLE;i1=this.getId()+p1;}else if(f1._isSecondaryOperator()){i1=this.getId()+$.PAGE_OPERATORS;}else{i1=this.getId()+$.PAGE_MAIN;}}if(i1!==g1){if(i1!==this.getId()+$.PAGE_MAIN){k.navContainer.backToPage(this.getId()+$.PAGE_MAIN);}k.navContainer.to(k.navContainer.getPage(i1),"show");}else{k.navContainer.getCurrentPage().setFooter(this._getPageFooter(g1,k));}var q1=this._oCurrentItem&&this._oCurrentItem._getItemError(),r1=q1&&(" "+q1.title);this._aStrips.forEach(function(s1){s1.setVisible(!!q1);s1.setText(r1?c1.getText("CALCULATION_BUILDER_INCORRECT_SYNTAX")+r1:"");});}.bind(this);this._oPopover=new R({showHeader:false,resizable:true,placement:x.PreferredBottomOrFlip,contentWidth:"400px",contentHeight:"450px",content:[k.navContainer],beforeOpen:e1,afterClose:function(){this._bDragging=false;this._clearNewButtonPositions();}.bind(this)});};
d1.prototype._submitLiteralInput=function(i){var k=i.getValue();if(this.getParent()&&this.getParent().getAllowStringLiterals()&&!q.isNumeric(k)){k="\""+k+"\"";}this._updateOrCreateItem({type:Q.Literal,key:k});i.setValueState(K.None);};
d1.prototype._getPageFooter=function(i,k){var e1=false,f1=false,g1=false;if(this._oCurrentItem&&!this._oCurrentItem._bIsNew){f1=true;g1=this._oCurrentItem._isLiteral();}e1=k.literalInput.getValueState()===K.None&&i===this.getId()+$.PAGE_MAIN&&g1;k.footerButtons.okButton=new B({enabled:e1,text:c1.getText("CALCULATION_BUILDER_CONFIRM_BUTTON"),press:function(h1){this._submitLiteralInput(k.literalInput);}.bind(this)});k.footerButtons.deleteButton=new B({enabled:f1,text:c1.getText("CALCULATION_BUILDER_DELETE_BUTTON"),press:this._deleteItem.bind(this)});k.footerButtons.closeButton=new B({text:c1.getText("CALCULATION_BUILDER_CLOSE_BUTTON"),press:this._instantClose.bind(this)});return new r({content:[new T(),k.footerButtons.okButton,k.footerButtons.deleteButton,k.footerButtons.closeButton]});};
d1.prototype._insertFunctionItems=function(i,k){var e1=function(f1){i.push(f1);};if(k&&k.length>0){k.forEach(function(f1){e1(f1);});}else{e1("");}e1(")");};
d1.prototype._updateOrCreateItem=function(k){var e1=!this._oCurrentItem||this._oCurrentItem._bIsNew,f1=this._oCurrentItem&&!this._oCurrentItem.getKey(),g1=this.getParent(),h1=k.functionObject,i1=this.getItems();var j1=function(){var i1=k.type===Q.Function?h1.template:g1._convertToTemplate(h1.getItems());this._insertFunctionItems(m1,i1);}.bind(this);var k1=function(){var i=isNaN(this._iCurrentIndex)?this.getItems().length:this._iCurrentIndex,n1=this._getKeys();this._smartRender(n1.slice(0,i).concat(m1,n1.slice(i)));}.bind(this);var l1=function(){for(var i=0;i<i1.length;i++){if(i1[i]===this._oCurrentItem){return i+1;}}return null;}.bind(this);if(e1){var m1=[k.key];if(h1){j1();}k1();}else{this._oCurrentItem.setKey(k.key);if(k.type){this._oCurrentItem._sType=k.type;}if(f1&&h1){var m1=[];this._iCurrentIndex=l1();j1();k1();}}this._instantClose();this._fireChange();};
d1.prototype._expandAllVariables=function(){this.getItems().forEach(function(i){if(i.isExpandable()){i._expandVariable(false);}});this._fireChange();};
d1.prototype._handleDelete=function(i){if(this._isEmptySelected()){return;}this._bAreSelectedItemsDeleting=true;M.show(c1.getText("CALCULATION_BUILDER_DELETE_MESSAGE_TEXT"),{icon:M.Icon.WARNING,title:c1.getText("CALCULATION_BUILDER_DELETE_MESSAGE_TITLE"),actions:[M.Action.YES,M.Action.CANCEL],onClose:function(k){if(k===M.Action.YES){var e1=this.$().find(".sapCalculationBuilderSelected .sapCalculationBuilderItem"),f1=e1.length,g1=e1.first(),h1=sap.ui.getCore().byId(g1.attr("id"));if(h1){var i1=this._getKeys();i1.splice(h1._iIndex,f1);this._smartRender(i1);this._fireChange();}}this._bAreSelectedItemsDeleting=false;}.bind(this)});};
d1.prototype._handleEnter=function(i){var k=q(i.target),e1;if(this._oItemNavigation&&!this._bReadOnly){if(k.hasClass("sapCalculationBuilderNewItem")){e1=this._getNewItem();if(e1){e1._buttonPress(i);}}else if(k.hasClass("sapCalculationBuilderItem")){e1=this._getItemById(k[0].id);if(e1){e1._buttonPress(i);}}else if(k.hasClass("sapCalculationBuilderItemExpandButton")){e1=this._getItemById(k.closest(".sapCalculationBuilderItem")[0].id);if(e1){e1._expandButtonPress(i);}}}};
d1.prototype._createVariablesMap=function(){this._mGroups={};this._aVariableLists=[];this.getVariables().forEach(function(i){var k=i.getGroup()||b1;if(!this._mGroups[k]){this._mGroups[k]=[];}this._mGroups[k].push(i);}.bind(this));};
d1.prototype._handleSpace=function(i){this._selectItem(i.target);};
d1.prototype._handleCtrlNext=function(i){this._moveItems(a1.KEY_NEXT);};
d1.prototype._handleCtrlPrevious=function(i){this._moveItems(a1.KEY_PREVIOUS);};
d1.prototype._getVariableByKey=function(k){var e1=this.getVariables();if(!k){return null;}k=k.toLowerCase();for(var i=0;i<e1.length;i++){if(e1[i].getKey().toLowerCase()===k){return e1[i];}}return null;};
d1.prototype.setTitle=function(i){var k=this._oToolbarTitle;if(k){k.setText(i);k.setVisible(!!i);}this.setProperty("title",i);};
d1.prototype._getKeys=function(){return this.getItems().map(function(i){return i.getKey();});};
d1.prototype._deleteItem=function(){var k=this._getKeys();k.splice(this._oCurrentItem._iIndex,1);this._smartRender(k);this._instantClose();this._fireChange();};
d1.prototype._openDialog=function(i){this._oCurrentItem=i.currentItem;this._iCurrentIndex=i.index;this._oPopover.openBy(i.opener);};
d1.prototype._setupDroppable=function(i){var k=this;i=i||this.$().find(".sapCalculationBuilderDroppable");i.droppable({scope:k.getId()+"-scope",tolerance:"pointer",activeClass:"sapCalculationBuilderDroppableActive",hoverClass:"sapCalculationBuilderDroppableActive",drop:function(e1,ui){if(!ui.draggable.hasClass("sapCalculationBuilderSelected")){k._selectItem(ui.draggable[0]);}k._moveItems(a1.MOUSE,parseInt(q(this).attr("index"),10));k._bDragging=false;},over:function(e1,ui){k._bDragging=true;}});};
d1.prototype._clearNewButtonPositions=function(){var i=this.$();i.find(".sapCalculationBuilderDelimiterNewButton").hide(200);i.find(".sapCalculationBuilderItem").animate({"left":0},300);};
d1.prototype._setupNewButtonEvents=function(){var i=13,k=300;var e1=this.$().find(".sapCalculationBuilderDelimiter[data-events!='bound']"),f1=this.$().find(".sapCalculationBuilderDelimiterNewButton[data-events!='bound']"),g1=this,h1,i1;var j1=function(k1,l1){k1.prev().animate({"left":-l1},k);k1.next().animate({"left":l1},k);};f1.click(function(ev){var k1=q(this),l1=parseInt(k1.parent().attr("index"),10);k1.css("opacity",1);g1._oCurrentItem=null;g1._iCurrentIndex=l1;g1._openDialog({opener:this,index:l1});});f1.attr("data-events","bound");e1.mouseover(function(ev){var k1=q(this);if(!g1._bDragging&&!g1._oPopover.isOpen()){h1=true;i1=setTimeout(function(){if(h1){h1=false;j1(k1,i);k1.find(".sapCalculationBuilderDelimiterNewButton").show(200);}},400);}});e1.mouseout(function(ev){var k1=q(this).find(".sapCalculationBuilderDelimiterNewButton"),l1=q(this);if(ev.target===k1[0]&&ev.relatedTarget===l1[0]){return;}h1=false;clearTimeout(i1);if(g1._bDragging||g1._oPopover.isOpen()){return;}if(!k1.is(':hover')){j1(l1,0);k1.hide(200);}});e1.attr("data-events","bound");};
d1.prototype._setupSelectable=function(){this.$().selectable({cancel:".sapCalculationBuilderCancelSelectable",distance:5,start:function(){this._deselect();this._instantClose();}.bind(this),stop:function(){this._selectItems(this.$().find(".sapCalculationBuilderItem.ui-selected"));}.bind(this)});};
d1.prototype._selectItemsTo=function(i){var k=q(i.next(".sapCalculationBuilderDelimiter")[0]),e1=k.attr("index")-1,f1=this.$(),g1,h1,i1,j1,k1;if(i.parent().hasClass("sapCalculationBuilderSelected")||this._isEmptySelected()){this._selectItem(i);return;}if(e1>this._iLastSelectedIndex){g1=this._iFirstSelectedIndex;h1=e1+1;}else{g1=e1;h1=this._iLastSelectedIndex+1;}this._deselect();j1=f1.find(".sapCalculationBuilderDelimiter[index=\""+g1+"\"]");k1=f1.find(".sapCalculationBuilderDelimiter[index=\""+h1+"\"]");i1=j1.nextUntil(k1,".sapCalculationBuilderItem");this._selectItems(i1);};
d1.prototype._selectItems=function(k){for(var i=0;i<k.length;i++){this._selectItem(k[i]);}};
d1.prototype._selectItem=function(i){var k=this.$().find(".sapCalculationBuilderSelected"),e1=q(i),f1=q(e1.next(".sapCalculationBuilderDelimiter")[0]),g1=k[0].children.length,h1=f1.attr("index")-1,i1=true;if(!this._oItemNavigation||!this._getItemById(e1[0].id)||this._bReadOnly){return;}if(g1===0){this._iFirstSelectedIndex=h1;this._iLastSelectedIndex=h1;}else{if(e1.parent().hasClass("sapCalculationBuilderSelected")){if(this._iFirstSelectedIndex===h1){this._iFirstSelectedIndex++;this._deselectItem(e1,false);}else if(this._iLastSelectedIndex===h1){this._iLastSelectedIndex--;this._deselectItem(e1,true);}else{this._deselect();}this._setCorrectFocus();return;}if((this._iFirstSelectedIndex-h1)===1){this._iFirstSelectedIndex=h1;i1=false;}else if((h1-this._iLastSelectedIndex)===1){this._iLastSelectedIndex=h1;i1=true;}else{this._iFirstSelectedIndex=h1;this._iLastSelectedIndex=h1;this._deselect();}}var j1=this.$();if(this._isEmptySelected()){k.detach().insertBefore(e1);k.draggable({revert:"invalid",cursor:"move",axis:"x",scope:this.getId()+"-scope",helper:function(k1){var l1=k.clone();l1.removeClass("sapCalculationBuilderSelected");l1.addClass("sapCalculationBuilderDraggingSelectedClone");return l1;},start:function(){k.addClass("sapCalculationBuilderDragging");j1.find(".sapCalculationBuilderItemContent").css("cursor","move");},stop:function(){k.removeClass("sapCalculationBuilderDragging");j1.find(".sapCalculationBuilderItemContent").css("cursor","pointer");}});}if(i1){e1.detach().appendTo(k);f1.detach().appendTo(k);}else{f1.detach().prependTo(k);e1.detach().prependTo(k);}if(e1.hasClass("sapCalculationBuilderItem")){e1.draggable("disable");e1.addClass("ui-selected");}this._setCorrectFocus();};
d1.prototype._isEmptySelected=function(){var i=this.$().find(".sapCalculationBuilderSelected");if(i){return i.is(":empty");}return true;};
d1.prototype._deselectItem=function(i,k){var e1=this.$().find(".sapCalculationBuilderSelected"),f1=q(i.next(".sapCalculationBuilderDelimiter")[0]);if(!i.hasClass("ui-selected")){return;}if(k){f1.detach().insertAfter(e1);i.detach().insertAfter(e1);}else{i.detach().insertBefore(e1);f1.detach().insertBefore(e1);}i.draggable("enable");i.removeClass("ui-selected");};
d1.prototype._deselect=function(){var i=this.$().find(".sapCalculationBuilderSelected");if(this._isEmptySelected()){return;}this.$().find(".sapCalculationBuilderSelected .ui-selected").removeClass("ui-selected");i.children().each(function(){var k=q(this);if(k.hasClass("sapCalculationBuilderItem")){k.draggable("enable");}k.detach().insertBefore(i);});};
d1.prototype._setupKeyboard=function(){var i=this.getDomRef(),k=[];this.getItems().forEach(function(e1){k.push(e1.getFocusDomRef());if(e1.isExpandable()){k.push(e1.$("expandbutton"));}});k.push(this._getNewItem().getFocusDomRef());if(!this._oItemNavigation){this._oItemNavigation=new I();this.addDelegate(this._oItemNavigation);}this._oItemNavigation.setRootDomRef(i);this._oItemNavigation.setItemDomRefs(k);this._oItemNavigation.setCycling(true);this._oItemNavigation.setPageSize(250);};
d1.prototype._setCorrectFocus=function(){q(this._oItemNavigation.getFocusedDomRef()).focus();};
d1.prototype._getItemById=function(i){return this.getItems().filter(function(k){return k.getId()===i;})[0];};
d1.prototype._getNewItem=function(){if(!this._oNewItem){this._oNewItem=new C();this._oNewItem._bIsNew=true;this._oNewItem.setParent(this,null,true);}return this._oNewItem;};
d1.prototype._instantClose=function(){var i=this._oPopover.getAggregation("_popup");if(i&&i.oPopup&&i.oPopup.close){i.oPopup.close(0);this._setCorrectFocus();}};
d1.prototype._attachAriaLabelToButton=function(i,k){i.addEventDelegate({onAfterRendering:function(e1){e1.srcControl.$("content").attr("aria-label",k);}});};
d1.prototype._printErrors=function(){this.getItems().forEach(function(i){var k=i._getItemError(),e1=i.$(),f1=!!k?"addClass":"removeClass";e1[f1]("sapCalculationBuilderItemErrorSyntax");});if(this.getParent().getLayoutType()===Y.VisualOnly){this._showErrorIcon();}};
d1.prototype._validateSyntax=function(k){var e1=function(){var D1=this.getItems()[t1],E1=D1.getKey();return!D1._isOperator()||E1==="("||E1==="+"||E1==="-"||E1.toLowerCase()==="not";}.bind(this);var f1=function(){var n1=this.getItems(),D1=n1[u1-1];return!D1._isOperator()||D1.getKey()===")";}.bind(this);var g1=function(q1){var D1=q1.getKey().toLowerCase();if(q1._isOperator()){return D1==="not"||D1==="("||D1===")"?D1:"#op#";}return q1._isFunction()?"#fun#":"#col#";};var h1=function(q1){return{index:i,item:q1,items:[],text:q1.getKey()+(q1._isFunction()?"(":"")};};var i1=function(z1){var D1=1,E1=i;i++;for(;i<n1.length;i++){var q1=n1[i],F1=q1.getKey(),G1=h1(q1);z1.items.push(G1);switch(F1){case")":D1--;break;case"(":D1++;break;case",":D1=1;break;}if(q1._isFunction()){i1(G1);z1.text+=G1.text;}else{z1.text+=F1;}if(D1===0){return z1;}}x1.push({index:E1,title:c1.getText("CALCULATION_BUILDER_CLOSING_BRACKET_ERROR_TEXT")});return z1;};var j1=function(z1){var D1=this.getParent()._getFunctionAllowParametersCount(z1.item.getKey()),E1=[],F1=[];z1.items.forEach(function(q1){if(q1.item._isComma()){E1.push(F1);F1=[];}else{F1.push(q1);}});if(F1.length>0&&F1[F1.length-1].text===")"){F1.pop();}E1.push(F1);if(E1.length!==D1){x1.push({index:z1.index,title:c1.getText(E1.length<D1?"CALCULATION_BUILDER_TOO_LITTLE_PARAMETERS":"CALCULATION_BUILDER_TOO_MANY_PARAMETERS")});}if(E1.length>0){E1.forEach(function(G1){if(G1.length>0){q.merge(x1,this._validateSyntax({from:G1[0].index,to:G1[G1.length-1].index+1}));}else{x1.push({index:z1.index,title:c1.getText("CALCULATION_BUILDER_EMPTY_PARAMETER")});}}.bind(this));}}.bind(this);var k1=0;var l1=function(){var D1=q1.getKey()==="+"||q1.getKey()==="-";if(D1){k1++;if(k1>2){x1.push({index:i,title:c1.getText("CALCULATION_BUILDER_SYNTAX_ERROR_TEXT")});}}else{k1=0;}};var m1={"#op#":["(","#col#","#fun#","not","+","-"],"(":["(","+","-","#col#","#fun#","not"],")":["#op#",")"],"#col#":["#op#",")"],"#fun#":["(","+","-","#col#","#fun#"],"not":["#col#","#fun#","not","("]};k=k||{};var n1=k.items||this.getItems(),o1,p1,q1,r1,s1,t1=k.from||0,u1=k.to||n1.length,v1=(t1===0&&u1===n1.length),w1=[],x1=[];if(n1.length>0){if(!e1()){x1.push({index:t1,title:c1.getText("CALCULATION_BUILDER_FIRST_CHAR_ERROR_TEXT")});}if(!f1()){x1.push({index:u1-1,title:c1.getText("CALCULATION_BUILDER_LAST_CHAR_ERROR_TEXT")});}}for(var i=t1;i<u1;i++){q1=n1[i];if(q1._getType()===Q.Error){x1.push({index:i,title:c1.getText("CALCULATION_BUILDER_SYNTAX_ERROR_TEXT")});continue;}l1();if(!k.skipCustomValidation&&q1._isFunction()){var y1=q1._getCustomFunction(),z1=i1(h1(q1));if(y1&&!y1.getUseDefaultValidation()){var A1=new t();this.getParent().fireValidateFunction({definition:z1,customFunction:y1,result:A1});q.merge(x1,A1.getErrors());}else{j1(z1);}}if(i<u1-1){r1=n1[i+1];o1=g1(n1[i]);p1=g1(r1);s1=r1?r1.getKey().toLowerCase():"";var B1=r1._isCustomOperator()||q1._isCustomOperator();if(m1[o1].indexOf(p1)===-1&&m1[o1].indexOf(s1)===-1&&!B1){var C1={index:i+1};if(q1._isOperator()&&r1._isOperator()){C1.title=c1.getText("CALCULATION_BUILDER_BEFORE_OPERATOR_ERROR_TEXT",r1.getKey());}else if(!q1._isOperator()&&!r1._isOperator()){C1.title=c1.getText("CALCULATION_BUILDER_BETWEEN_NOT_OPERATORS_ERROR_TEXT",[q1.getKey(),r1.getKey()]);}else if(q1.getKey()===")"&&!r1._isOperator()){C1.title=c1.getText("CALCULATION_BUILDER_AFTER_CLOSING_BRACKET_ERROR_TEXT");}else if(!q1._isOperator()&&(r1.getKey()==="(")){C1.title=c1.getText("CALCULATION_BUILDER_BEFORE_OPENING_BRACKET_ERROR_TEXT");}else{C1.title=c1.getText("CALCULATION_BUILDER_CHAR_ERROR_TEXT");}x1.push(C1);}}if(q1._isFunction()){continue;}if(v1&&q1.getKey()===","){x1.push({index:i,title:c1.getText("CALCULATION_BUILDER_WRONG_PARAMETER_MARK")});}if((q1._isOperator()&&q1.getKey()==="(")||q1._isFunction()){w1.push(i);}if(q1._isOperator()&&q1.getKey()===")"){if(w1.length===0){x1.push({index:i,title:c1.getText("CALCULATION_BUILDER_OPENING_BRACKET_ERROR_TEXT")});}else{w1.pop();}}}for(i=0;i<w1.length;i++){x1.push({index:w1[i],title:c1.getText("CALCULATION_BUILDER_CLOSING_BRACKET_ERROR_TEXT")});}return x1;};
d1.prototype._getType=function(k){return this.getParent()&&this.getParent()._getType(k);};
d1.prototype._moveItems=function(k,e1){var f1=[],g1=this.$(),h1=this.getItems(),i1=g1.find(".sapCalculationBuilderSelected"),j1,k1,l1,m1;if(this._isEmptySelected()){return;}m1=(i1.length>1)?q(i1[0]).children():i1.children();if(k===a1.KEY_PREVIOUS){k1=this._iFirstSelectedIndex-1;}else if(k===a1.KEY_NEXT){k1=this._iLastSelectedIndex+2;}else if(k===a1.MOUSE){k1=e1;}if(k1<0||k1===(h1.length+1)){return;}j1=this.$().find(".sapCalculationBuilderDelimiter[index=\""+k1+"\"]");for(var i=0;i<h1.length+1;i++){l1=h1[i];if(k1===i){m1.each(function(){var g1=q(this),l1;if(g1.hasClass("sapCalculationBuilderItem")){l1=sap.ui.getCore().byId(q(this)[0].id);f1.push(l1);l1._bMovingItem=true;g1.draggable("enable");}g1.css("left",0);g1.detach().insertAfter(j1).removeClass("");j1=g1;});}if(l1&&!l1.$().parent().hasClass("sapCalculationBuilderSelected")&&!l1._bMovingItem){f1.push(l1);}}i1.css("left","");g1.find(".sapCalculationBuilderDelimiter").each(function(i){q(this).attr("index",i);});this.removeAllAggregation("items",true);f1.forEach(function(l1,i){l1._bMovingItem=false;l1._iIndex=i;this.addAggregation("items",l1,true);}.bind(this));this._setupKeyboard();this._selectItems(m1.filter(function(i,el){return q(el).hasClass("sapCalculationBuilderItem");}));this._fireChange();};
d1.prototype._fireAfterValidation=function(){this.getParent().fireAfterValidation();};
d1.prototype._setItems=function(i){this.removeAllAggregation("items",true);(i||[]).forEach(function(k){this.addAggregation("items",this._convertFromNewItem(k),true);}.bind(this));};
d1.prototype._getKeyFromCreatedItem=function(i){return typeof i==="object"?i.getKey():i;};
d1.prototype._convertFromNewItem=function(i){return typeof i==="object"?i:new C({key:i});};
d1.prototype._showErrorIcon=function(){var i=this.$("erroricon"),k=this.getParent(),e1=k._createErrorText(null,true);if(e1){i.show();i.attr("title",k._createErrorText(null,true));}else{i.hide();}};
d1.prototype._smartRender=function(k){var e1="",f1=this.$(),g1=[],h1=this.getItems(),i1=h1.length;var j1=function(l1){l1=this._convertFromNewItem(l1);this.addAggregation("items",l1,true);l1._iIndex=i;if(f1[0]){e1+=l1._render();e1+=this._renderDelimiter(i+1);}l1.bOutput=true;g1.push(l1);}.bind(this);if(!this.getParent()._isExpressionVisible()){this._setItems(k);return;}this._bRendered=false;this._bIsCalculationBuilderRendering=true;this._deselect();for(var i=0;i<k.length;i++){var k1=h1[i],l1=k[i],m1=typeof l1==="object"&&l1.getKey?l1.getKey():l1,n1=l1._sType?l1._sType:"";if(!k1){j1(k[i]);}else if(k1.getKey()!==m1||k1._sType!==n1){k1.setKey(m1,true);k1._sType=n1;var o1=k1.$();o1[0].innerHTML=k1._innerRender();o1.attr("class",k1._getClass());o1.attr("title",k1._getTooltip());k1._setEvents();}}if(k.length<i1){for(var i=k.length;i<h1.length;i++){var o1=h1[i].$();o1.next().remove();o1.remove();this.removeAggregation("items",h1[i],true);}}if(f1[0]&&g1.length>0){f1.find(".sapCalculationBuilderDelimiter").last().after(e1);g1.forEach(function(k1){k1._afterRendering();});this._setupDroppable(f1.find(".sapCalculationBuilderDroppable").filter(function(){return parseInt(q(this).attr("index"),10)>i1;}));}this._bRendered=true;this._setupKeyboard();this._setupNewButtonEvents();this._bIsCalculationBuilderRendering=false;};
d1.prototype._fireChange=function(){this.fireEvent("change");};
return d1;});
sap.ui.predefine('sap/suite/ui/commons/CalculationBuilderFunction',["./library","sap/ui/core/Control"],function(l,C){"use strict";
var a=C.extend("sap.suite.ui.commons.CalculationBuilderFunction",{metadata:{library:"sap.suite.ui.commons",properties:{key:{type:"string",group:"Misc",defaultValue:null},label:{type:"string",group:"Misc",defaultValue:null},description:{type:"string",group:"Misc",defaultValue:null},useDefaultValidation:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{items:{type:"sap.suite.ui.commons.CalculationBuilderItem",multiple:true,singularName:"item"}}}});
a.prototype._getLabel=function(){return this.getLabel()||this.getKey();};
return a;});
sap.ui.predefine('sap/suite/ui/commons/CalculationBuilderGroup',["./library","sap/ui/core/Control"],function(l,C){"use strict";
var a=C.extend("sap.suite.ui.commons.CalculationBuilderGroup",{metadata:{library:"sap.suite.ui.commons",properties:{key:{type:"string",group:"Misc",defaultValue:null},title:{type:"string",group:"Misc",defaultValue:null},description:{type:"string",group:"Misc",defaultValue:null},icon:{type:"string",group:"Misc",defaultValue:null}},events:{setSelection:{parameters:{key:"string"}}},aggregations:{customView:{type:"sap.ui.core.Control",multiple:false}}}});
a.prototype._getTitle=function(){return this.getTitle()||this.getKey();};
return a;});
sap.ui.predefine('sap/suite/ui/commons/CalculationBuilderInput',["sap/ui/thirdparty/jquery","./library","sap/ui/core/Control","./CalculationBuilderItem","sap/m/List","sap/m/StandardListItem","sap/m/Popover","sap/m/Button","sap/m/Menu","sap/m/MenuButton","sap/m/MenuItem","sap/m/OverflowToolbar","sap/m/ToolbarSeparator","sap/m/ToolbarSpacer","sap/m/Title","sap/m/OverflowToolbarToggleButton","sap/ui/core/CustomData","sap/ui/model/Sorter","sap/ui/model/json/JSONModel","sap/ui/Device","sap/ui/dom/containsOrEquals","sap/m/library"],function(q,l,C,a,L,S,P,B,M,b,c,O,T,d,f,g,h,j,J,D,k,m){"use strict";var n=m.ButtonType;var o=m.PlacementType;var p=m.ListMode;var E="&nbsp;&nbsp;";var r="┘┘";var I=l.CalculationBuilderItemType,V=l.CalculationBuilderValidationMode;var R=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var s=function(e){if(typeof e.which==="undefined"){return true;}else if(typeof e.which==="number"&&e.which>0){return!e.ctrlKey&&!e.metaKey&&!e.altKey&&e.which!==8;}return false;};var G=function(e,u){var N,v="",i=0;if(e instanceof q){e=e[0];}var w=e.nodeType;if(!w){while((N=e[i++])){v+=G(N,u);}}else if(w===1||w===9||w===11){for(e=e.firstChild;e;e=e.nextSibling){v+=G(e,u);}}else if(w===3||w===4){v+=u&&q(e).parent().hasClass("sapCalculationBuilderItemTextEmpty")&&e.nodeValue==="  "?"┘┘":e.nodeValue;}return v;};
var t=C.extend("sap.suite.ui.commons.CalculationBuilderInput",{
metadata:{library:"sap.suite.ui.commons",events:{change:{parameters:{value:"String",position:"integer",validate:"boolean"}}}},
renderer:function(e,i){var u="contenteditable=\"true\"";if(i.getParent().getShowInputToolbar()&&!i._bReadOnly){e.write("<div class=\"sapCalculationBuilderInputToolbarWrapper\">");e.renderControl(i._oInputToolbar);e.write("</div>");}e.write("<div");e.writeControlData(i);e.addClass("sapCalculationBuilderInputWrapper");if(i._bReadOnly){u="";}e.writeClasses(i);e.write(" aria-label=\"\" >");e.write("<div aria-label=\"\" aria-describedby=\""+i.getId()+"-error\" spellcheck=\"false\""+u+" id=\""+i.getId()+"-input\" class=\"sapCalculationBuilderInput\"></div>");e.write("<div id=\""+i.getId()+"-error\" class=\"sapCalculationBuilderInputErrorArea\"></div>");e.write("</div>");}
});
t.prototype.init=function(){this._setupSuggestionList();this._iCarretPosition=0;this._sSuggestionText="";this._aVariables=[];this._oInputToolbar=new O(this.getId()+"-toolbar").addStyleClass("sapCalculationBuilderInputToolbar");this.addDependent(this._oInputToolbar);};
t.prototype.exit=function(){if(this._oPopup){this._oPopup.destroy();}if(this._oInputToolbar){this._oInputToolbar.destroy();}};
t.prototype.onAfterRendering=function(){this._setupKeyPress();this._setupEvents();this._setupAriaLabel();};
t.prototype.onBeforeRendering=function(){this._aFunctions=this.getParent()._getAllFunctions();this._fillInputToolbar();};
t.prototype.getFocusDomRef=function(){return this.getDomRef("input");};
t.prototype._setupEvents=function(){var $=this.$("input");$.blur(function(){this._lastRangeSelection=this._getSelectionRange();}.bind(this));$.mouseup(function(e){this._iCarretPosition=this._getCaretPosition();}.bind(this));};
t.prototype._validate=function(e){var i=this.getParent();if(i&&i.getValidationMode()===V.FocusOut){this.getParent()._validateInput(G(this.$("input")),e?this._iCarretPosition:0);}};
t.prototype._setupKeyPress=function(){var i=this,u=this.getParent(),A=u&&u.getAllowSuggestions()&&D.system.desktop,v="paste input";if(D.browser.msie){v+=" keyup";}this.$("input").on('focus',function(){var $=q(this);$.data('before',G($[0]));}).on(v,function(e){var $=q(this),w=$.data('before'),x=e.key,y=G($[0]);if(i._oPopup.isOpen()&&x==="Enter"){return;}if(w!==y){var z=i._iCarretPosition=i._getCaretPosition();i._storeCurrent();i.fireChange({position:Math.max(0,z),value:G($[0],true)});if(A){i._checkSuggestions(z,y,s(e));if(i._sSuggestionText.length>0){i._filterSuggestionList(i._sSuggestionText);if(i._oSuggestionList.getItems().length===0){i._oPopup.close();}else{i._findCurrentSpan();if(!i._oPopup.isOpen()){var F=sap.ui.getCore().getConfiguration().getRTL(),H=q(i._oCurrentSpan),K=F?-($.width()-H.position().left-H.width()):H.position().left;var N=parseInt(K,10),Q=i.$("input").outerHeight()-(parseInt(q(i._oCurrentSpan).position().top,10)+q(i._oCurrentSpan).height())-10;i._iSuggestionSelectedIndex=-1;i._oPopup.setOffsetX(N);i._oPopup.setOffsetY(-Q);i._oPopup.openBy(i.getDomRef("input"));}}}}}});};
t.prototype._createItemSpan=function(K,e){var i=function(){if(!K){return"sapCalculationBuilderItemTextEmpty";}if(e){return"sapCalculationBuilderItemTextError";}if(this._isOperator(K)){return"sapCalculationBuilderItemTextOperator";}return"sapCalculationBuilderItemTextDefault";}.bind(this);var F=K?"text":"html";var N=q('<span></span>',{title:e?e.title:"","class":i(),"aria-hidden":D.browser.msie})[F](K||E);return N;};
t.prototype._findCurrentSpan=function(){var e;if(window.getSelection&&window.getSelection().getRangeAt){e=window.getSelection();this._oCurrentSpan=e.anchorNode.parentNode;if(!q(this._oCurrentSpan).is("span")){this._oCurrentSpan=this.$("input").children().first()[0];}}return this._oCurrentSpan;};
t.prototype._setupSuggestionList=function(){var e=new j({path:"grouptitle",descending:false,group:function(i){return i.getProperty("grouptitle");}});var A=function(K){var N=this._createItemSpan(K);q(this._oCurrentSpan).after(N);return N;}.bind(this);var u=function($){var i=$.innerText,v=this._sSuggestionText.toLowerCase(),w=v.length,x=i.toLowerCase(),N="",y=(" "+x).indexOf(" "+v),z;if(y>-1){N+=i.substring(0,y);z=i.substring(y,y+w);N+="<span class=\"sapMInputHighlight\">"+z+"</span>";N+=i.substring(y+w);}else{N=i;}return N;}.bind(this);this._oSuggestionList=new L({mode:p.SingleSelectMaster,showNoData:false,enableBusyIndicator:false,rememberSelections:false,items:{path:"/data",factory:function(i,v){var w=v.getProperty(v.oModel.sPath),x=new S({title:w.title,customData:[new h({key:"key",value:w.key})]});x.addStyleClass("sapCalculationBuilderSuggestionItem");return x;},sorter:e},selectionChange:function(v){var w=v.getParameter("listItem"),x,y,F,K,z;if(w){K=w.getCustomData()[0].getValue();F=this._getFunction(K);q(this._oCurrentSpan).text(F?K+"(":K+"");q(this._oCurrentSpan).removeClass("sapCalculationBuilderItemTextError").addClass("sapCalculationBuilderItemTextDefault");this._iCarretPosition+=(K||"").length+1;if(F){z=this._getFunctionTemplateItems(F);x=z.length;if(x>0){z.forEach(function(K,i){this._oCurrentSpan=A(K)[0];if(!K&&!y){y=this._oCurrentSpan;}if(!y&&K){this._iCarretPosition+=K.length;}if(K&&i!==x-1){this._oCurrentSpan=A(" ");}}.bind(this));}else{y=this._oCurrentSpan=A("")[0];}var H=A(")");if(!y){this._oCurrentSpan=H[0];}}this._storeCurrent();var N=y||this._oCurrentSpan,Q=(N&&N.textContent&&N.textContent.length)||0;this.fireChange({position:this._getCaretPosition(N,F?1:Q),value:G(this.$("input")[0],true)});}this._oPopup.close();}.bind(this)});this._oSuggestionList.addEventDelegate({onAfterRendering:function(){this._oSuggestionList.$().find(".sapMDLILabel, .sapMSLITitleOnly, .sapMDLIValue").each(function(){this.innerHTML=u(this);});this._oSuggestionList.$().find(".sapMGHLI").addClass("sapCalculationBuilderSuggestionListHeader");}.bind(this)});this._oPopup=new P(this.getId()+"-popup",{contentWidth:"300px",showArrow:false,showHeader:false,placement:o.Vertical,horizontalScrolling:true,content:this._oSuggestionList,initialFocus:this}).attachAfterClose(function(i){this._clearSuggestion();}.bind(this));};
t.prototype._checkSuggestions=function(e,u,v){var w=u[Math.max(e-1,0)];var x=function(w){return this._isOperator(w)||this._isEmptySpace(w);}.bind(this);if(!w||x(w)){this._clearSuggestion();return;}var W=v?w:"",y=v?2:1;e=Math.max(e,0);for(var i=e-y;i>=0;i--){if(x(u[i])){break;}W=u[i]+W;}for(i=e;i<u.length;i++){if(x(u[i])){break;}W=W+u[i];}if(!W){this._clearSuggestion();}this._sSuggestionText=W||"";};
t.prototype._clearSuggestion=function(){this._sSuggestionText="";this._oCurrentSpan={};this._oPopup.close();};
t.prototype._filterSuggestionList=function(e){var i=[];var A=function(K,v,w,x){var y=(v||K).toLowerCase(),z=e.toLowerCase();if((" "+y).indexOf(" "+z)!==-1){i.push({title:v||K,key:K,type:w,grouptitle:x});}};var u=this.getParent();u.getOperators().forEach(function(v){A(v.getKey(),v.getText(),I.CustomOperator,R.getText("CALCULATION_BUILDER_OPERATORS_TITLE"));});this._aVariables.forEach(function(v){var w=v.getGroup(),x,y=R.getText("CALCULATION_BUILDER_VARIABLES_TITLE");if(w){x=u.getGroups().filter(function(z){return z.getKey()===w;})[0];y=x?x.getTitle():y;}A(v.getKey(),v.getLabel(),I.Variable,y);});this._aFunctions.forEach(function(v){A(v.key,v.title,I.Function,R.getText("CALCULATION_BUILDER_FUNCTIONS_TITLE"));});i.sort(function(v,w){return v.title.toUpperCase()<w.title.toUpperCase()?-1:1;});this._oSuggestionList.setModel(new J({"data":i}));};
t.prototype._getCaretPosition=function(u,v){var w,x,y,A=0;var z=function(N){return(u&&N===u)||(!u&&(N===x.anchorNode||N===x.anchorNode.parentNode));};var F=function(N){var H;if(z(N)){return false;}if(N.nodeType===3){A+=N.textContent.length;}else{for(var i=0;i<N.childNodes.length;i++){H=N.childNodes[i];if(z(H)){return false;}A+=H.textContent.length;}}return true;};try{if(window.getSelection&&window.getSelection().getRangeAt){w=window.getSelection().getRangeAt(0);x=window.getSelection();y=this.$("input")[0].childNodes;for(var i=0;i<y.length;i++){if(!F(y[i])){break;}}return(v||w.startOffset)+A;}}catch(e){return this._iCarretPosition;}return 0;};
t.prototype._getSelectionRange=function(){var i,u=0,v=this.$("input")[0];if(typeof window.getSelection!=="undefined"){try{var w=window.getSelection().getRangeAt(0),x=w.cloneRange();if(!k(v,w.startContainer)){return this._lastRangeSelection;}x.selectNodeContents(v);x.setEnd(w.startContainer,w.startOffset);i=x.toString().length;u=i+w.toString().length;}catch(e){u=i=this._iCarretPosition||0;}}return{start:i,length:u-i};};
t.prototype._setCaretPosition=function(e){var u=window.getSelection(),$=this.$("input"),v,w,x,F,y;var z=function(y){var A=$.children(),H,K,N=0;for(var i=0;i<A.length;i++){H=A[i];K=H.innerText||"";if(N+K.length>y){return{spanIndex:i,position:N+K.length-y};}N+=K.length;}return{spanIndex:Math.max(i-1,0),position:100};};if(typeof e==="number"){e=z(e);}x=e&&e.span;if(e){v=$[0];if(!x){x=v&&v.children&&v.children.length>e.spanIndex?v.childNodes[e.spanIndex]:null;}if(x){w=document.createRange();F=x.firstChild?x.firstChild:x;y=Math.min(F.length,e.position);w.setStart(F,y);w.collapse(true);u.removeAllRanges();u.addRange(w);}}};
t.prototype._recreateText=function(e){var u=function(Q){var U;if(Q){if(!this._isEmptySpace(Q)){U=q.grep(e.errors,function(X){return X.index===y;})[0];}if(Q==="┘"){Q="";}H+=this._createItemSpan(Q,U)[0].outerHTML;if(!this._isEmptySpace(Q)){y++;}F++;}}.bind(this);var v=function(){for(;i<x.length;i++){w();if(!this._isEmptySpace(x[i])&&x[i]!=="("){i--;break;}W+=x[i];if(x[i]==="("){break;}}u(W);W="";}.bind(this);var w=function(Q){if(!K&&e.position===i){K={spanIndex:F-(Q||0),position:Q||W.length};}};var H="",x,y=0,A=this.getParent().getAllowStringLiterals(),z=false,F=0,K=null,W="",N;x=e.text||G(this.$("input")[0],true);for(var i=0;i<x.length;i++){N=x[i];w();if(N==="\""&&A){z=!z;}if(z){W+=N;continue;}if(N==="┘"||this._isEmptySpace(N)||this._isOperator(N)){if(this._isFunction(W)){v();}else{u(W);u(N);W="";}if(N==="┘"){i++;w(1);}}else{W+=N;}}u(W);var $=this.$("input");$.html(H);if($.is(":focus")){this._showErrorText(true,e.errors);}if(e.position>0){this._setCaretPosition(K||{spanIndex:F-1,position:Number.MAX_SAFE_INTEGER});}};
t.prototype._setupAriaLabel=function(){var e,i,A;if(D.browser.msie){return;}e=this.getParent();i=e._oExpressionBuilder._aErrors;A=R.getText("CALCULATION_BUILDER_EXPRESSION_TITLE")+": "+e.getExpression();if(i.length>0){A+=". "+R.getText("CALCULATION_BUILDER_ERROR_TITLE")+": ";i.forEach(function(u){A+=u.title+" ";});}this.$().attr("aria-label",A);};
t.prototype._showErrorText=function(e,i){var $=this.$("error"),u=this.getParent();i=i||u.getErrors();if((i&&i.length>0)&&e){$.show();$.text(u._createErrorText());}else{$.hide();}};
t.prototype._stringToItems=function(e){var i=[],u="",v="",w=0,x=false;var y=function(){var F,H="";if(v){F=this._getFunction(v);if(F){if(e[w]!=="("){H=I.Error;for(;w<e.length;w++){if(e[w]==="("){H="";break;}if(!this._isEmptySpace(e[w])){w--;break;}}}}var K=new a({key:v});K._sType=H;i.push(K);}v="";return!!F||!!H;}.bind(this);if(typeof e==="undefined"){var z=this.$("input")[0];e=z?G(this.$("input")[0],true):"";}for(;w<e.length;w++){u=e[w];if(u==="\""&&this.getParent().getAllowStringLiterals()){v+="\"";if(x){i.push(new a({key:v}));v="";}x=!x;continue;}if(x){v+=u;continue;}if(u==="┘"){i.push(new a());w++;continue;}if(this._isEmptySpace(u)){if(v){y();}continue;}var N=e[w+1];if(N&&this._isOperator(u+N,false)){u+=N;w++;}var A=this._isOperator(u,false);if(A){if(y()){continue;}i.push(new a({key:u}));}else{v+=u;}}y();return i;};
t.prototype._itemsToString=function(e){var u=e.items,v="",w="",x=e.createInputText!==false,y,z;for(var i=0;i<u.length;i++){var A=u[i],K=A.getKey(),F=this._isFunction(K);if(x){y=q.grep(e.errors,function(A){return A.index===i;})[0];}var H=K!==","&&K!==")"&&z!=="("&&z;if(x){H?w+=this._createItemSpan(" ",y)[0].outerHTML:"";w+=this._createItemSpan(K+(F?"(":""),y)[0].outerHTML;}v+=(H?" ":"")+K+(F?"(":"");z=F?"(":K;}if(x){this.$("input").html(w);}return v;};
t.prototype.onfocusin=function(e){if(this._bSetCaretOnFocus){this._setCaretPosition(this._iCarretPosition);}this._bSetCaretOnFocus=false;this._showErrorText(true);};
t.prototype.onsapfocusleave=function(e){if(e.relatedControlId&&k(this._oPopup.getDomRef(),sap.ui.getCore().byId(e.relatedControlId).getFocusDomRef())){if(sap.ui.getCore().isMobile()||D.browser.safari){this._bSetCaretOnFocus=true;}this.focus();}else{this._showErrorText(false);this._validate(false);}};
t.prototype.onsappageup=function(e){this._suggestionListKeyHandling({event:e,add:true,toEnd:true});if(!this._oPopup.isOpen()){this._iCarretPosition=G(this.$("input")).length-1;}};
t.prototype.onsapnext=function(e){if(this._iCarretPosition<G(this.$("input")).length-1){this._iCarretPosition++;}};
t.prototype.onsapprev=function(e){if(this._iCarretPosition>0){this._iCarretPosition--;}};
t.prototype.onsappagedown=function(e){this._suggestionListKeyHandling({event:e,add:false,toEnd:true});if(!this._oPopup.isOpen()){this._iCarretPosition=0;}};
t.prototype.onsapdown=function(e){this._suggestionListKeyHandling({event:e,add:true});};
t.prototype.onsapescape=function(e){if(this._oPopup.isOpen()){this._oPopup.close();}};
t.prototype.onsapup=function(e){this._suggestionListKeyHandling({event:e,add:false});};
t.prototype.onsapenter=function(e){if(this._oPopup.isOpen()){this._oSuggestionList.fireSelectionChange({listItem:this._oSuggestionList.getSelectedItem()});}else{this._validate(true);}e.preventDefault();e.stopPropagation();};
t.prototype._suggestionListKeyHandling=function(e){var i=e.event,A=e.add,u=e.toEnd,v,w;if(!this._oPopup.isOpen()||!i){return;}A?this._iSuggestionSelectedIndex++:this._iSuggestionSelectedIndex--;v=this._oSuggestionList.$().find(".sapCalculationBuilderSuggestionItem");w=v.length;if((this._iSuggestionSelectedIndex<0)||(!A&&u)){this._iSuggestionSelectedIndex=w-1;}else if((this._iSuggestionSelectedIndex>=w)||(A&&u)){this._iSuggestionSelectedIndex=0;}this._oSuggestionList.removeSelections(true);sap.ui.getCore().byId(v[this._iSuggestionSelectedIndex].id).setSelected(true).focus();i.preventDefault();i.stopPropagation();};
t.prototype._displayError=function(e){this.$("input")[e?"addClass":"removeClass"]("sapCalculationBuilderInputError");};
t.prototype._insertItemFromToolbar=function(K){var $=this.$("input"),e,N,i;var u=" "+K+" ",F=this._getFunction(K),v=u.length,w;var x=function(){return{start:$.text().length,length:0};};i=this._getSelectionRange()||x();$.focus();this._lastRangeSelection={};e=G($[0],true);if(e[i.start]==="┘"&&e[i.start-1]==="┘"&&i.length===0){i.start--;i.length+=2;}if(F){u=" "+K+"(";w=this._getFunctionTemplateItems(F);if(w.length>0){w.forEach(function(K){u+=K?K:r;});}else{u+=r;}u+=") ";v=u.indexOf(r)+1;}N=[e.slice(0,i.start),u,e.slice(i.start+i.length)].join('');this.fireChange({value:N,position:i.start+v});this._storeCurrent();};
t.prototype._convertEmptyHashes=function(e){return e?e.replace(new RegExp(r,'g'),"  "):"";};
t.prototype._fillInputToolbar=function(){var e=function(Y,Z){return new B({type:n.Transparent,text:Y,press:this._insertItemFromToolbar.bind(this,Y)}).addStyleClass("sapCalculationBuilderInputToolbarButtons "+Z);}.bind(this);var i=function(Y){if(Y){return Y.map(function(Z){return new c({key:Z.getKey(),text:Z._getLabel()});}).sort(function(Z,$){return Z.getText().localeCompare($.getText());});}return[];};var u=function(Y){return Y.map(function(Z){return new c({key:Z.getKey(),text:Z.getText()?Z.getText():Z.getKey()});}).sort(function(Z,$){return Z.getText().localeCompare($.getText());});};var v=function(Y){return Y.map(function(Z){return new c({key:Z,text:Z});});};var w=function(){var H=this.getParent(),Y=H.getAllowComparisonOperators(),Z=H.getAllowLogicalOperators(),$=H.getOperators(),_=$.length>0,a1,b1,c1,d1=[];if(Y){a1=v(Object.keys(z));d1.push(new c({text:R.getText("CALCULATION_BUILDER_COMPARISON_TITLE"),items:a1}));}if(Z){b1=v(Object.keys(A));d1.push(new c({text:R.getText("CALCULATION_BUILDER_LOGICAL_TITLE"),items:v(Object.keys(A))}));}if(_){c1=u($);d1.push(new c({text:R.getText("CALCULATION_BUILDER_ADDITIONAL_OPERATOR"),items:c1}));}if(d1.length>1){return d1;}if(Y){return a1;}if(Z){return b1;}if(_){return c1;}return[];}.bind(this);var x=function(Y){return new b({text:Y,menu:new M({itemSelected:function(Z){this._insertItemFromToolbar(Z.getParameters().item.getKey());}.bind(this)})}).addStyleClass("sapCalculationBuilderInputToolbarFunctionMenu").addStyleClass("sapCalculationBuilderInputToolbarMenuButtons");}.bind(this);var y=l.CalculationBuilderOperatorType,z=l.CalculationBuilderComparisonOperatorType,A=l.CalculationBuilderLogicalOperatorType,F=w(),H=this.getParent(),K=!!H.getTitle()&&(H.getLayoutType()===l.CalculationBuilderLayoutType.TextualOnly),N;this._oInputToolbar.removeAllContent();this._oInputToolbar.addContent(new f({text:H.getTitle(),visible:K}));this._oInputToolbar.addContent(new d());Object.keys(y).forEach(function(Y){this._oInputToolbar.addContent(e(y[Y],""));}.bind(this));this._oInputToolbar.addContent(new T().addStyleClass("sapUiSmallMarginBeginEnd"));if(F.length>0){this._oInputToolbar.addContent(new b({text:R.getText("CALCULATION_BUILDER_OPERATORS_TITLE"),menu:new M({itemSelected:function(Y){this._insertItemFromToolbar(Y.getParameters().item.getKey());}.bind(this),items:F})}).addStyleClass("sapCalculationBuilderInputToolbarMenuButtons"));}N=this._aFunctions.map(function(Y){return new c({key:Y.key,text:Y.title});});var Q=x(R.getText("CALCULATION_BUILDER_FUNCTIONS_AND_VARIABLES_TITLE"));if(N.length>0){Q.getMenu().addItem(new c({text:R.getText("CALCULATION_BUILDER_FUNCTIONS_TITLE"),items:[N]}));}var U=H._getGroupMap(),W=H.getGroups(),X=U["##DEFAULT##"];if(X&&X.length>0){Q.getMenu().addItem(new c({text:R.getText("CALCULATION_BUILDER_VARIABLES_TITLE"),items:i(X)}));}W.forEach(function(Y){var Z=U[Y.getKey()];if(Z&&Z.length>0){Q.getMenu().addItem(new c({text:Y._getTitle(),items:i(Z)}));}});this._oInputToolbar.addContent(Q);};
t.prototype._isOperator=function(e,A){return this.getParent()&&this.getParent()._isOperator(e,A);};
t.prototype._getFunctionTemplateItems=function(F){return this.getParent()._getFunctionTemplateItems(F);};
t.prototype._isEmptySpace=function(e){return e===String.fromCharCode(160)||e===" ";};
t.prototype._isEmptyItem=function(e){return e===E;};
t.prototype._getText=function(){return this.$("input").text();};
t.prototype._isFunction=function(K){return!!this._getFunction(K);};
t.prototype._getFunction=function(K){var e=this.getParent();return e&&e._isTokenAllowed(K)&&e._getFunctionDefinition(K);};
t.prototype._storeCurrent=function(v){var $=this.$("input");$.data('before',$.text());};
return t;});
sap.ui.predefine('sap/suite/ui/commons/CalculationBuilderItem',["sap/ui/thirdparty/jquery","./library","sap/ui/core/Control","sap/m/MessageBox","sap/base/security/encodeXML","./Utils","sap/ui/thirdparty/jqueryui/jquery-ui-core","sap/ui/thirdparty/jqueryui/jquery-ui-widget","sap/ui/thirdparty/jqueryui/jquery-ui-mouse","sap/ui/thirdparty/jqueryui/jquery-ui-draggable"],function(q,l,C,M,e,U){"use strict";var I=l.CalculationBuilderItemType,O=l.CalculationBuilderOperatorType,L=l.CalculationBuilderLogicalOperatorType;var r=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");
var a=C.extend("sap.suite.ui.commons.CalculationBuilderItem",{
constructor:function(i,s){if(typeof i!=="string"&&i!==undefined){s=i;}if(s&&s.key){s.key=this._sanitizeKey(s.key);}C.apply(this,arguments);},
metadata:{library:"sap/suite/ui/commons",properties:{key:{type:"string",group:"Misc",defaultValue:null}}},
renderer:function(R,i){R.write(i._render());}
});
a.prototype._innerRender=function(){var h="",A="",s=this._getLabel(),i={"!=":"NOT_EQUAL","-":"MINUS",",":"COMMA"};var R=function(){h+="<div class=\"sapCalculationBuilderItemFocusWrapper\">";h+="<div class=\"sapCalculationBuilderItemFocus\"></div>";h+="</div>";};var f=function(){h+="<div class=\"sapCalculationBuilderItemExpandButtonWrapper\" title=\""+r.getText("CALCULATION_BUILDER_EXPAND_BUTTON_TITLE")+"\">";h+="<div id=\""+this.getId()+"-expandbutton\" class=\"sapCalculationBuilderItemExpandButton "+(this._bReadOnly?"sapMBtnDisabled":"")+"\" tabindex=\"-1\">";if(!this._bReadOnly){h+="<div class=\"sapCalculationBuilderItemExpandButtonFocus\"></div>";}b("");h+="</div></div>";}.bind(this);var b=function(c){h+="<span aria-hidden=\"true\" data-sap-ui-icon-content=\""+c+"\" class=\"sapCalculationBuilderEmptyItemIcon sapUiIcon sapUiIconMirrorInRTL\" style=\"font-family:'SAP-icons'\"></span>";};var g=function(t){return" aria-label=\""+r.getText(t)+"\" ";};if(this._bIsNew||this._isEmpty()){A=" title=\""+r.getText("CALCULATION_BUILDER_NEW_ITEM_TITLE")+"\" ";}else if(i[s]){A=g("CALCULATION_BUILDER_"+i[s]+"_ARIA_LABEL");}h+="<div class=\"sapCalculationBuilderItemContentWrapper\">";h+="<div id=\""+this.getId()+"-content\" class=\"sapCalculationBuilderItemContent\""+A+"\" aria-haspopup=\"dialog\">";R();if(this._isEmpty()){b("");h+="</div>";}else if(this._bIsNew){b("");h+="</div>";}else if(this._isFunction()){var F=this._getFunction();h+="<span class=\"sapCalculationBuilderItemLabel sapCalculationBuilderItemFunctionLabel\">";h+=e(F.title||this.getKey());h+="</span>";h+="<span class=\"sapCalculationBuilderItemLabel sapCalculationBuilderItemFunctionBracket\">";h+="&nbsp;(";h+="</span>";h+="</div>";}else{h+="<span class=\"sapCalculationBuilderItemLabel\">";h+=e(s);h+="</span>";h+="</div>";}h+="</div>";if(this._isVariable()&&this.isExpandable()){f();}return h;};
a.prototype._getClass=function(h){var c="",i=this._isEmpty();c+=this._bIsNew?"sapCalculationBuilderNewItem  sapCalculationBuilderCancelSelectable":"sapCalculationBuilderItem";if(i){c+=" sapCalculationBuilderNewItem ";}if(this._isBracket()){c+=" sapCalculationBuilderItemBracket ";}else if(this._isOperator()){c+=" sapCalculationBuilderItemOperator sapCalculationBuilderItemOperatorLength-"+this._getLabel().length+" ";if(this._isLogicalOperator()){c+=" sapCalculationBuilderItemLogicalOperator ";}}else if(this._isCustomOperator()){c+=" sapCalculationBuilderItemOperator sapCalculationBuilderItemCustomOperator ";}else if(this._isFunction()){c+=" sapCalculationBuilderItemFunction ";}else if(this._isLiteral()){c+=" sapCalculationBuilderItemLiteral ";}else if(this._isVariable()){c+=" sapCalculationBuilderItemVariable ";if(this.isExpandable()){c+=" sapCalculationBuilderItemVariableSeparator ";}}else{c+=" sapCalculationBuilderUnknownItem ";}if(h){c+=" sapCalculationBuilderItemErrorSyntax ";}return c;};
a.prototype._render=function(){if(!this.getParent()){return;}var i=this._hasCorrectParent(),E=this._getItemError(),t=this._getTooltip(),T=t?"title=\""+t+"\"":"",R=this._bIsNew?"role=\"button\"":"",h="";h+="<div class=\""+this._getClass(!!E)+"\" id=\""+this.getId()+"\" tabindex=\""+(i?"-1":"0")+"\""+T+R+">";h+=this._innerRender();h+="</div>";return h;};
a.prototype.init=function(){this._bIsNew=false;};
a.prototype.onBeforeRendering=function(){this._oVariable=this.getVariable();};
a.prototype.onAfterRendering=function(){this._afterRendering();};
a.prototype._afterRendering=function(){var p=this.getParent();if(!p){return;}this._setEvents();if(!this._bIsNew&&!this._bReadOnly){this._setupDraggable();}if(this._hasCorrectParent(p)){if(!p._bIsCalculationBuilderRendering){p._setupKeyboard();p.getParent()._enableOrDisableExpandAllButton();}}};
a.prototype._setEvents=function(){if(this.isExpandable()){this.$("expandbutton").click(this._expandButtonPress.bind(this));this.$("expandbutton").mousedown(function(E){E.stopPropagation();});}if(!this._bReadOnly){this.$("content").click(this._buttonPress.bind(this));}if(this._isBracket()||this._isFunction()){this._setBracketHover();}};
a.prototype._buttonPress=function(E){var p=this.getParent();if(this._hasCorrectParent(p)&&!p._bDragging){if(E.ctrlKey){p._selectItem(this.$());}else if(E.shiftKey){p._selectItemsTo(this.$());}else{p._deselect();p._openDialog({opener:this,currentItem:this});}}};
a.prototype._expandButtonPress=function(E){if(!this._bReadOnly){this._openExpandConfirmMessageBox();}};
a.prototype.isExpandable=function(){var v=this._oVariable?this._oVariable:this.getVariable();return v&&v.getItems().length>0;};
a.prototype.getVariable=function(){var p=this.getParent();return this._hasCorrectParent(p)&&p._getVariableByKey(this.getKey());};
a.prototype.getType=function(){return this._getType();};
a.prototype._setupDraggable=function(){var p=this.getParent(),$=p.$(),b=this.$();b.draggable({revert:"invalid",axis:"x",delay:100,cursor:"move",helper:function(c){var d=b.clone();d.addClass("sapCalculationBuilderDragging");d.css("pointer-events","none");return d;},scope:p.getId()+"-scope",start:function(){$.find(".sapCalculationBuilderBracket").removeClass("sapCalculationBuilderBracket");$.find(".sapCalculationBuilderItemContent").css("cursor","move");q(this).addClass("sapCalculationBuilderDragging");p._bDragging=true;if(!q(this).hasClass("ui-selected")){p._deselect();}},stop:function(){q(this).removeClass("sapCalculationBuilderDragging");$.find(".sapCalculationBuilderItemContent").css("cursor","pointer");p._bDragging=false;}});U._setupMobileDraggable(b);};
a.prototype._setBracketHover=function(){var $=this.$("content"),b=this._isFunction()?O["("]:this.getKey(),c=b===O[")"],t=c?O["("]:O[")"],T;$.mouseenter(function(E){var o,f,B=0,d=(this._hasCorrectParent()&&this.getParent().getItems())||[],i=c?d.length:0;for(;c?i>=0:i<d.length;(c?i--:i++)){o=d[i];if(o===this){f=true;}if(f){if((o.getKey()===t)||(o._isFunction()&&c)){B--;if(B===0){T=o;break;}}else if((o.getKey()===b)||(o._isFunction()&&!c)){B++;}}}if(T){this.$().addClass("sapCalculationBuilderBracket");T.$().addClass("sapCalculationBuilderBracket");}}.bind(this));$.mouseleave(function(E){this.$().removeClass("sapCalculationBuilderBracket");if(T){T.$().removeClass("sapCalculationBuilderBracket");}}.bind(this));};
a.prototype._expandVariable=function(f){var p=this.getParent(),t,v;if(p){t=p.getItems().indexOf(this);v=p._getVariableByKey(this.getKey());p.insertItem(new a({"key":"("}),t++);v.getItems().forEach(function(i){p.insertItem(i._cloneItem(),t++);});p.insertItem(new a({"key":")"}),t++);p.removeItem(this);if(f){p._aErrors=p._validateSyntax();p._fireChange();}}};
a.prototype._cloneItem=function(){return new a({key:this.getKey()});};
a.prototype._openExpandConfirmMessageBox=function(){M.show(r.getText("CALCULATION_BUILDER_EXPAND_MESSAGE_TEXT",this._getLabel()),{icon:M.Icon.WARNING,title:r.getText("CALCULATION_BUILDER_EXPAND_MESSAGE_TITLE"),actions:[M.Action.OK,M.Action.CANCEL],onClose:function(A){var p;if(A===M.Action.OK){this._expandVariable(true);}else{p=this.getParent();if(p){p._setCorrectFocus();}}}.bind(this)});};
a.prototype._getItemError=function(){var p=this.getParent(),E;if(this._hasCorrectParent(p)){E=q.grep(p._aErrors,function(i){return i.index===this._iIndex;}.bind(this))[0];}return E;};
a.prototype._getLabel=function(){var g=function(){var i=this._getItem();if(!i){return this.getKey();}if(i.title){return i.title;}if(i._getLabel){return i._getLabel();}return i.getText()||i.getKey();}.bind(this);if(!this._sLabel){this._sLabel=g();if(this._isFunction()){this._sLabel+=" (";}}return this._sLabel;};
a.prototype._sanitizeKey=function(k){if(!k||typeof k!=="string"){return k;}k=k.replace(/{/g,"&#125;");k=k.replace(/}/g,"&#123;");return k;};
a.prototype._reset=function(){this._sType="";this._sLabel="";this._oVariable="";};
a.prototype.setKey=function(k,s){this._reset();this.setProperty("key",this._sanitizeKey(k),s);var p=this.getParent();if(p&&p._bRendered){p.getParent()&&p.getParent()._expressionChanged();}return this;};
a.prototype.getKey=function(){var k=this.getProperty("key");k=k.replace(/&#125;/g,"{");k=k.replace(/&#123;/g,"}");return k;};
a.prototype._getType=function(){var p=this.getParent();if(!this._sType&&p){this._sType=p._getType(this.getKey());}return this._sType;};
a.prototype._isEmpty=function(){return!this._bIsNew&&!this.getKey();};
a.prototype._isOperator=function(){return this._getType()===I.Operator;};
a.prototype._isSecondaryOperator=function(){var t=this._getType();if(this._getType()===I.Operator){return["+","-","/","*","(",")",","].indexOf(this.getKey())===-1;}return t===I.CustomOperator;};
a.prototype._isCustomOperator=function(){return this._getType()===I.CustomOperator;};
a.prototype._isVariable=function(){return this._getType()===I.Variable;};
a.prototype._isLiteral=function(){return this._getType()===I.Literal;};
a.prototype._isFunction=function(){var t=this._getType();return t===I.Function||t===I.CustomFunction;};
a.prototype._getFunction=function(){var t=this._getType();if(t===I.Function||t===I.CustomFunction){var b=this.getParent().getParent();return b._createFunctionObject(b._getFunctionDefinition(this.getKey()));}return null;};
a.prototype._getItemInstance=function(t,c){if(this._getType()===t){var k=this.getKey(),b=this.getParent()[c]();return q.grep(b,function(i){return i.getKey().toLowerCase()===k.toLowerCase();})[0];}return null;};
a.prototype._getItem=function(){var t=this._getType();switch(t){case I.Variable:return this._getVariable();case I.CustomFunction:return this._getCustomFunction();case I.CustomOperator:return this._getCustomOperator();}return null;};
a.prototype._getTooltip=function(){var i=this._getItem();return i&&i.getTooltip_AsString?i.getTooltip_AsString():"";};
a.prototype._getVariable=function(){return this._getItemInstance(I.Variable,"getVariables");};
a.prototype._getCustomFunction=function(){return this._getItemInstance(I.CustomFunction,"getFunctions");};
a.prototype._getCustomOperator=function(){return this._getItemInstance(I.CustomOperator,"getOperators");};
a.prototype._isBracket=function(){return this._isOperator()&&(this.getKey()==="("||this.getKey()===")");};
a.prototype._isAddition=function(){return this._isOperator()&&this.getKey()==="+";};
a.prototype._isSubtraction=function(){return this._isOperator()&&this.getKey()==="-";};
a.prototype._isDivision=function(){return this._isOperator()&&this.getKey()==="/";};
a.prototype._isMultiplication=function(){return this._isOperator()&&this.getKey()==="*";};
a.prototype._isComma=function(){return this._isOperator()&&this.getKey()===",";};
a.prototype._isLogicalOperator=function(){return this._isOperator()&&!!L[this.getKey()];};
a.prototype._hasCorrectParent=function(p){p=p||this.getParent();return p instanceof sap.suite.ui.commons.CalculationBuilderExpression;};
return a;});
sap.ui.predefine('sap/suite/ui/commons/CalculationBuilderValidationResult',["sap/ui/thirdparty/jquery","./library","sap/ui/core/Control","sap/ui/base/ManagedObject"],function(q,l,C,M){"use strict";
var a=M.extend("sap.suite.ui.commons.CalculationBuilderValidationResult",{constructor:function(){M.prototype.constructor.apply(this,arguments);this._aErrors=[];}});
a.prototype.addError=function(e){this._aErrors.push(e);};
a.prototype.addErrors=function(e){q.merge(this._aErrors,e);};
a.prototype.getErrors=function(){return this._aErrors;};
return a;});
sap.ui.predefine('sap/suite/ui/commons/CalculationBuilderVariable',["./library","sap/ui/core/Control"],function(l,C){"use strict";
var a=C.extend("sap.suite.ui.commons.CalculationBuilderVariable",{metadata:{library:"sap.suite.ui.commons",properties:{key:{type:"string",group:"Misc",defaultValue:null},label:{type:"string",group:"Misc",defaultValue:null},group:{type:"string",group:"Misc"}},aggregations:{items:{type:"sap.suite.ui.commons.CalculationBuilderItem",multiple:true,singularName:"Item"}}}});
a.prototype._getLabel=function(){return this.getLabel()||this.getKey();};
return a;});
sap.ui.predefine('sap/suite/ui/commons/ControlProxy',["./library","sap/ui/core/Control"],function(l,C){"use strict";
var a=C.extend("sap.suite.ui.commons.ControlProxy",{
metadata:{library:"sap.suite.ui.commons",association:{control:{type:"sap.ui.core.Control",multiple:false}}},
renderer:function(r,p){var i=p.getAssociation("control"),I=sap.ui.getCore().byId(i);r.renderControl(I);}
});
a.prototype.setAssociation=function(A,c){C.prototype.setAssociation.apply(this,arguments);var i=this.getAssociation("control"),I=sap.ui.getCore().byId(i);if(I&&Array.isArray(this.aCustomStyleClasses)){this.aCustomStyleClasses.forEach(function(s){I.addStyleClass(s);});}};
a.prototype.addStyleClass=function(c){C.prototype.addStyleClass.apply(this,arguments);var i=this.getAssociation("control"),I=sap.ui.getCore().byId(i);if(I){I.addStyleClass(c);}};
return a;});
sap.ui.predefine('sap/suite/ui/commons/MicroProcessFlow',["sap/ui/thirdparty/jquery",'./library','sap/ui/core/Control','sap/ui/core/Icon','sap/ui/base/ManagedObject','sap/ui/core/delegate/ItemNavigation',"sap/ui/core/ResizeHandler"],function(q,l,C,I,M,a,R){"use strict";var b=l.MicroProcessFlowRenderType;var r=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var L=function(i){return i[i.length-1];};
var c=C.extend("sap.suite.ui.commons.MicroProcessFlow",{
metadata:{library:"sap.suite.ui.commons",interfaces:["sap.ui.core.IFormContent"],properties:{ariaLabel:{type:"string",defaultValue:null},renderType:{type:"sap.suite.ui.commons.MicroProcessFlowRenderType",defaultValue:sap.suite.ui.commons.MicroProcessFlowRenderType.Wrap},width:{type:"sap.ui.core.CSSSize",defaultValue:""}},aggregations:{content:{type:"sap.suite.ui.commons.MicroProcessFlowItem",multiple:true,singularName:"content"}}},
renderer:function(o,m){var d=m.getContent(),w=m.getWidth(),e=d.length,s=m.getAriaLabel();if(!m._bThemeApplied){return;}o.write("<div ");o.writeAttributeEscaped("role","listbox");o.writeAttributeEscaped("aria-roledescription",r.getText("ACC_CTR_TYPE_MICRO_PROCESS_FLOW"));o.writeControlData(m);o.writeAttribute("aria-label",s);if(w){o.addStyle("width",w);}o.writeStyles();o.addClass("sapSuiteUiCommonsMicroProcessFlow");o.writeClasses(m);o.write(">");if(m._hasScrolling()){o.write("<div tabindex=\"0\" id=\""+m.getId()+"-leftscroller\" class=\"sapSuiteUiCommonsMicroProcessFlowScroller sapSuiteUiCommonsMicroProcessFlowLeftScroller\">");o.renderControl(m._getLeftScroller());o.write("<span id=\""+m.getId()+"-leftlabel\" class=\"sapSuiteUiCommonsMicroProcessFlowLeftLabel\"></span>");o.write("</div>");}o.write("<div id=\""+m.getId()+"-content\" class=\"sapSuiteUiCommonsMicroProcessFlowContent\">");o.write("<div id=\""+m.getId()+"-scrolling\" class=\"sapSuiteUiCommonsMicroProcessFlowScrolling sapSuiteUiCommonsMicroProcessFlowScrollingTransition\"");if(m.getRenderType()===b.Wrap){o.addStyle("flex-wrap","wrap");o.writeStyles();}o.write(">");d.forEach(function(f,i){f._setAccessibilityData(i+1,e);o.renderControl(f);});o.write("</div>");o.write("</div>");if(m._hasScrolling()){o.write("<div tabindex=\"0\" id=\""+m.getId()+"-rightscroller\" class=\"sapSuiteUiCommonsMicroProcessFlowScroller sapSuiteUiCommonsMicroProcessFlowRightScroller\">");o.write("<span id=\""+m.getId()+"-rightlabel\" class=\"sapSuiteUiCommonsMicroProcessFlowRightLabel\"></span>");o.renderControl(m._getRightScroller());o.write("</div>");}o.write("</div>");}
});
c.prototype.exit=function(){if(this._oLeftScroller){this._oLeftScroller.destroy();}if(this._oRightScroller){this._oRightScroller.destroy();}};
c.prototype.init=function(){sap.ui.getCore().attachThemeChanged(function(){this._bThemeApplied=true;this.invalidate();},this);this._bThemeApplied=sap.ui.getCore().isThemeApplied();this._iScrollingIndex=0;this._iLastVisibleIndex=0;this._aEdges=[];this._aWidths=[];};
c.prototype.onAfterRendering=function(){this._correctSeparatorWidth();this._setupKeyboard();if(this._hasScrolling()){this._setupScrolling();this._collectEdgesAndWidths();this._updateScrollingElements();if(this.getRenderType()===b.ScrollingWithResizer){this._oResizer=R.register(this,q.proxy(this._performResizeChanges,this));}}};
c.prototype._performResizeChanges=function(){this._collectEdgesAndWidths();this._updateScrollingElements();};
c.prototype._isLastItem=function(i){return i===this.getContent()[this.getContent().length-1];};
c.prototype._getMaxHeight=function(i){return Math.max.apply(null,this.$().find(".sapSuiteUiCommonsMicroProcessFlowItemWrapper").map(function(){return q(this).height();}).get());};
c.prototype._correctSeparatorWidth=function(){var m=this._getMaxHeight();if(m){this.getContent().forEach(function(i){var s=i.getStepWidth(),S;if(s.indexOf("%")!==-1){S=parseInt(s,10);if(!isNaN(S)){i.$("separator").width(m/S*100);}}},this);}};
c.prototype._firePress=function(){if(this._oItemNavigation){var i=this._oItemNavigation.getFocusedIndex(),d=this.getContent()[i];if(d){d._firePress();}}};
c.prototype._setupKeyboard=function(){var f=this.getDomRef(),d=this.getContent(),D=[];d.forEach(function(o,i){var $=o._getAccessibleItem();D.push($[0]);});if(!this._oItemNavigation){this._oItemNavigation=new a();this.addDelegate(this._oItemNavigation);}this._oItemNavigation.setRootDomRef(f);this._oItemNavigation.setItemDomRefs(D);this._oItemNavigation.setCycling(false);this._oItemNavigation.attachEvent(a.Events.AfterFocus,function(e){if(this._bKeyBoard===true){this._findEdgeItems(e.getParameter("index"));this._updateScrollingElements();}this._bKeyBoard=false;}.bind(this));};
c.prototype._hasScrolling=function(){var s=this.getRenderType();return s===b.Scrolling||s===b.ScrollingWithResizer;};
c.prototype._setupScrolling=function(){var $=this.$("leftscroller"),d=this.$("rightscroller");this._iScrollingIndex=0;this._iLastVisibleIndex=0;$.click(this._scroll.bind(this,-1));d.click(this._scroll.bind(this,1));this._iScrollingIndex<=0?$.hide():$.show();};
c.prototype._updateScrollingElements=function(d){var e=this.getContent(),$=this.$("leftscroller"),f=this.$("rightscroller");$[this._iScrollingIndex<=0?"hide":"show"]();this._iLastVisibleIndex=this._findLastVisibleItemIndex(d);f[this._iLastVisibleIndex>=e.length-1?"hide":"show"]();this.$("leftlabel").text(this._iScrollingIndex);this.$("rightlabel").text(e.length-1-this._iLastVisibleIndex);};
c.prototype._scroll=function(d,e){e.stopPropagation();var f=this.getContent(),$=this.$("rightscroller"),g=this.$("leftscroller"),h=sap.ui.getCore().getConfiguration().getRTL(),E,t,j;var k=function(){if(d>0){var w=this.$("content").width()-(g.is(":visible")?0:g.width()),p=L(this._aEdges)+L(this._aWidths);if(E+w>p){E-=(E+w-p+$.width());for(var i=0;i<this._aEdges;i++){if(this._aEdges[i]+this._aWidths[i]>E){this._iScrollingIndex=i;break;}}}}}.bind(this);var m=function(){if(!h&&o[0].scrollLeft!=0){this._clearScroll(o);}if(h){j=o.scrollRightRTL();if(j){this._clearScroll(o);}}}.bind(this);var n=this.$("scrolling"),o=n.parent();this._bKeyBoard=false;if(d<0&&this._iScrollingIndex<=0){return;}m();(d<0)?$.show():g.show();this._iScrollingIndex+=d;E=this._aEdges[this._iScrollingIndex];k();t="translateX("+((h?1:-1)*E)+"px)";this.$("scrolling").css("transform",t);if(!n.hasClass("sapSuiteUiCommonsMicroProcessFlowScrollingTransition")){setTimeout(function(){n.addClass("sapSuiteUiCommonsMicroProcessFlowScrollingTransition");},0);}this._updateScrollingElements(d);m();};
c.prototype._clearScroll=function($){var i=sap.ui.getCore().getConfiguration().getRTL();if($&&$[0]){i?$.scrollLeftRTL($[0].scrollWidth-$[0].clientWidth):$[0].scrollLeft=0;}};
c.prototype._findLastVisibleItemIndex=function(d){var s=this._aEdges[this._iScrollingIndex],w=this.$("content").width(),W=w+this.$("rightscroller").width(),e,n=0,f;for(var i=0;i<this._aEdges.length;i++){e=this._aEdges[i];if(e+this._aWidths[i]-10<s+w){n=i;}else{if(e+this._aWidths[i]<s+W){f=true;}else{f=false;break;}}}return f&&d!==-1?this.getContent().length-1:n;};
c.prototype._collectEdgesAndWidths=function(){var s=0,h=0,w=this.$("content").width();this._aEdges=[];this._aWidths=[];this.getContent().forEach(function(o,i){var d=o.$().width();this._aEdges.push(s);this._aWidths.push(d);s+=d;},this);};
c.prototype._getLeftScroller=function(){if(!this._oLeftScroller){this._oLeftScroller=new I(this.getId()+"leftscroller",{src:"sap-icon://nav-back"});this._oLeftScroller.addStyleClass("sapSuiteUiCommonsMicroProcessFlowArrow");}return this._oLeftScroller;};
c.prototype._getRightScroller=function(){if(!this._oRightScroller){this._oRightScroller=new I(this.getId()+"rightscroller",{src:"sap-icon://navigation-right-arrow"});this._oRightScroller.addStyleClass("sapSuiteUiCommonsMicroProcessFlowArrow");}return this._oRightScroller;};
c.prototype._findEdgeItems=function(d){var $=this.$("scrolling"),e=$.parent(),f=this.$("leftscroller"),g=this.$("rightscroller"),h=this.getContent(),j=Math.abs($.position().left),w,E,F=-1,k=-1;if(j<10||d===0){F=0;this._clearScroll(e);}if(d===h.length-1){k=h.length-1;}w=$.width();for(var i=0;i<this._aEdges.length;i++){E=this._aEdges[i];if(F===-1&&E>=j){F=i;}if(k===-1&&(E+this._aWidths[i]>j+w+5)){k=i-1;break;}}this._iScrollingIndex=F;this._iLastVisibleIndex=k!==-1?k:h.length-2;};
c.prototype._processKeyPress=function(){if(this._hasScrolling()){var $=this.$("scrolling");this._bKeyBoard=true;$.removeClass("sapSuiteUiCommonsMicroProcessFlowScrollingTransition");$.css("transform","");}};
c.prototype.onsapspace=function(){this._firePress();};
c.prototype.onsapenter=function(){this._firePress();};
c.prototype.onsapnext=function(e){this._processKeyPress();};
c.prototype.onsapprevious=function(){this._processKeyPress();};
c.prototype.onsaphome=function(e){this._processKeyPress();};
c.prototype.onsapend=function(){this._processKeyPress();};
c.prototype.getAccessibilityInfo=function(){var d="";this.getAggregation("content").forEach(function(v){d=d.concat(v._getAriaText());});return{type:r.getText("ACC_CTR_TYPE_MICRO_PROCESS_FLOW"),description:d};};
c.prototype.getFormDoNotAdjustWidth=function(){return true;};
return c;});
sap.ui.predefine('sap/suite/ui/commons/MicroProcessFlowItem',["sap/ui/thirdparty/jquery",'./library',"sap/ui/core/library",'sap/ui/core/Control','sap/suite/ui/commons/MicroProcessFlow'],function(q,l,C,a,M){"use strict";var r=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons"),D={"Error":"sap-icon://message-error","None":null,"Success":"sap-icon://message-success","Warning":"sap-icon://message-warning","Information":"sap-icon://message-information"},V=C.ValueState;
var b=a.extend("sap.suite.ui.commons.MicroProcessFlowItem",{
metadata:{library:"sap.suite.ui.commons",properties:{key:{type:"string",group:"Misc",defaultValue:null},icon:{type:"string",group:"Appearance",defaultValue:null},title:{type:"string",group:"Misc",defaultValue:null},state:{type:"sap.ui.core.ValueState",group:"Appearance",defaultValue:V.Standard},showIntermediary:{type:"boolean",group:"Appearance",defaultValue:false},stepWidth:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:null},showSeparator:{type:"boolean",group:"Appearance",defaultValue:true}},aggregations:{customControl:{type:"sap.ui.core.Control",multiple:false,singularName:"customControl"},intermediary:{type:"sap.ui.core.Control",multiple:false,singularName:"intermediary"}},events:{press:{allowPreventDefault:true,parameters:{item:"object"}}}},
onAfterRendering:function(){this._setupEvents();this._setAccessibility();},
renderer:function(R,m){var f=function(){R.write("<div");R.writeAttributeEscaped("id",m.getId()+"-separator");R.addClass("sapSuiteUiCommonsMicroProcessFlowItemSeparatorWrapper");R.writeClasses();R.addStyle("width",m._getStepWidth());R.writeStyles();R.write(">");R.write("<div ");R.addClass("sapSuiteUiCommonsMicroProcessFlowItemSeparator");if(!m.getShowSeparator()||I){R.addClass("sapSuiteUiCommonsMicroProcessFlowItemHiddenSeparator");}R.writeClasses();R.write(">");R.write("</div>");if(S){c();}R.write("</div>");};var c=function(){var d=m.getIntermediary();R.write("<div class=\"sapSuiteUiCommonsMicroProcessFlowItemIntermediary\" >");if(d){R.renderControl(d);}else{R.write("<div class=\"sapSuiteUiCommonsMicroProcessFlowItemOnHoldElement\" >");R.write("</div>");}R.write("</div>");};var i=m.getIcon()||m._getIconByState(),I=m.getParent()._isLastItem(m),s=m.getId(),S=m.getShowIntermediary(),o=m.getCustomControl(),t=m.getTitle();R.write("<div ");R.addClass("sapSuiteUiCommonsMicroProcessFlowItemWrapper");R.writeClasses(m);R.writeControlData(m);R.write(">");R.write("<div");if(t){R.writeAttributeEscaped("title",t);}R.writeAttributeEscaped("id",s+"-item");R.writeAttribute("class","sapSuiteUiCommonsMicroProcessFlowItemContent");R.write(">");if(o){R.renderControl(o);}else{R.write("<div tabindex=\"0\" id=\""+s+"-itemContent\" class=\"sapSuiteUiCommonsMicroProcessFlowItem sapSuiteUiCommonsMicroProcessFlowItem"+m.getState()+"\"");R.writeAttributeEscaped("aria-label",m._getAriaText());R.writeAttributeEscaped("role","option");R.write(">");if(i){R.renderControl(new sap.ui.core.Icon({tooltip:m.getTitle(),src:i}).addStyleClass("sapSuiteUiCommonsMicroProcessFlowItemIcon"));}R.write("</div>");}R.write("</div>");if(!I||S){f();}R.write("</div>");}
});
b.prototype.getFocusDomRef=function(){var c=this.getCustomControl();return c?c.getFocusDomRef():this.getDomRef("itemContent");};
b.prototype._setAccessibility=function(){var $=this._getAccessibleItem(),A=this._getAriaText();if($.attr("tabindex")!=="0"){$.attr("tabindex",0);}$.attr("aria-label",A);$.attr("role","option");$.attr("aria-posinset",this._iIndex);$.attr("aria-setsize",this._iItemsCount);};
b.prototype._getAccessibleItem=function(){var $=q(this.getFocusDomRef());return $.attr("tabindex")==="0"?$:this.$("item");};
b.prototype._setupEvents=function(){var $=this.$("item"),h=this.hasListeners("press");$.on("touchstart click",this._click.bind(this));if(h){$.mousedown(function(e){q(this).addClass("sapSuiteUiCommonsMicroProcessFlowItemPressed");});$.mouseup(function(e){q(this).removeClass("sapSuiteUiCommonsMicroProcessFlowItemPressed");});}if(h){$.css("cursor","pointer");$.attr("role","button");}};
b.prototype._getAriaText=function(){var t=r.getText("MICRO_PROCESS_FLOW_ITEM");switch(this.getState()){case V.Error:t+=" - "+r.getText("MICRO_PROCESS_FLOW_ERROR");break;case V.Warning:t+=" - "+r.getText("MICRO_PROCESS_FLOW_WARNING");break;case V.Success:t+=" - "+r.getText("MICRO_PROCESS_FLOW_SUCCESS");break;case V.Information:t+=" - "+r.getText("MICRO_PROCESS_FLOW_INFORMATION");break;}if(this.getTitle()){t+=" - "+this.getTitle();}return t;};
b.prototype._isCompact=function(){return q("body").hasClass("sapUiSizeCompact")||this.$().is(".sapUiSizeCompact")||this.$().closest(".sapUiSizeCompact").length>0;};
b.prototype._getStepWidth=function(){var w=this.getStepWidth();if(!w){w=this._isCompact()?"1rem":"1.5rem";}return w;};
b.prototype._setAccessibilityData=function(i,I){this._iIndex=i;this._iItemsCount=I;};
b.prototype._click=function(e){var p=this.getParent();if(p){p._bKeyBoard=false;}this._firePress(e);};
b.prototype._firePress=function(e){if(this.hasListeners("press")){this.firePress({item:this.getFocusDomRef()});if(e.preventDefault){e.preventDefault();}if(e.stopPropagation){e.stopPropagation();}}};
b.prototype._getIconByState=function(){return D[this.getState()];};
return b;});
sap.ui.predefine('sap/suite/ui/commons/imageeditor/CropCustomShapeHistoryItem',["./HistoryItem","sap/base/assert"],function(H,a){"use strict";
var C=H.extend("sap.suite.ui.commons.imageeditor.CropCustomShapeHistoryItem",{constructor:function(p){H.apply(this,arguments);p=p||{};a(typeof p.x==="number","X must be a number.");a(typeof p.y==="number","Y must be a number.");a(typeof p.width==="number","Width must be a number.");a(typeof p.height==="number","Height value must be a number.");a(typeof p.oldWidth==="number","Old width value must be a number.");a(typeof p.oldHeight==="number","Old height value must be a number.");this._iX=p.x;this._iY=p.y;this._iWidth=p.width;this._iHeight=p.height;this._iOldWidth=p.oldWidth;this._iOldHeight=p.oldHeight;}});
C.prototype.getX=function(){return this._iX;};
C.prototype.getY=function(){return this._iY;};
C.prototype.getWidth=function(){return this._iWidth;};
C.prototype.getHeight=function(){return this._iHeight;};
C.prototype.getOldWidth=function(){return this._iOldWidth;};
C.prototype.getOldHeight=function(){return this._iOldHeight;};
C.prototype.compare=function(h){var m=["getWidth","getHeight"];return this._compare(h,m);};
return C;});
sap.ui.predefine('sap/suite/ui/commons/imageeditor/CropEllipseHistoryItem',["./HistoryItem","sap/base/assert"],function(H,a){"use strict";
var C=H.extend("sap.suite.ui.commons.imageeditor.CropEllipseHistoryItem",{constructor:function(p){H.apply(this,arguments);p=p||{};a(typeof p.x==="number","X must be a number.");a(typeof p.y==="number","Y must be a number.");a(typeof p.rx==="number","RX value must be a number.");a(typeof p.ry==="number","RY value must be a number.");a(typeof p.width==="number","Width must be a number.");a(typeof p.height==="number","Height value must be a number.");a(typeof p.oldWidth==="number","Old width value must be a number.");a(typeof p.oldHeight==="number","Old height value must be a number.");this._iX=p.x;this._iY=p.y;this._iRx=p.rx;this._iRy=p.ry;this._iWidth=p.width;this._iHeight=p.height;this._iOldWidth=p.oldWidth;this._iOldHeight=p.oldHeight;}});
C.prototype.getX=function(){return this._iX;};
C.prototype.getY=function(){return this._iY;};
C.prototype.getRx=function(){return this._iRx;};
C.prototype.getRy=function(){return this._iRy;};
C.prototype.getWidth=function(){return this._iWidth;};
C.prototype.getHeight=function(){return this._iHeight;};
C.prototype.getOldWidth=function(){return this._iOldWidth;};
C.prototype.getOldHeight=function(){return this._iOldHeight;};
C.prototype.compare=function(h){var m=["getWidth","getHeight"];return this._compare(h,m);};
return C;});
sap.ui.predefine('sap/suite/ui/commons/imageeditor/CropRectangleHistoryItem',["./HistoryItem","sap/base/assert"],function(H,a){"use strict";
var C=H.extend("sap.suite.ui.commons.imageeditor.CropRectangleHistoryItem",{constructor:function(p){H.apply(this,arguments);p=p||{};a(typeof p.x==="number","X must be a number.");a(typeof p.y==="number","Y must be a number.");a(typeof p.width==="number","Width must be a number.");a(typeof p.height==="number","Height value must be a number.");a(typeof p.oldWidth==="number","Old width value must be a number.");a(typeof p.oldHeight==="number","Old height value must be a number.");this._iX=p.x;this._iY=p.y;this._iWidth=p.width;this._iHeight=p.height;this._iOldWidth=p.oldWidth;this._iOldHeight=p.oldHeight;}});
C.prototype.getX=function(){return this._iX;};
C.prototype.getY=function(){return this._iY;};
C.prototype.getWidth=function(){return this._iWidth;};
C.prototype.getHeight=function(){return this._iHeight;};
C.prototype.getOldWidth=function(){return this._iOldWidth;};
C.prototype.getOldHeight=function(){return this._iOldHeight;};
C.prototype.compare=function(h){var m=["getWidth","getHeight"];return this._compare(h,m);};
return C;});
sap.ui.predefine('sap/suite/ui/commons/imageeditor/CustomSizeItem',["sap/ui/core/Element"],function(E){"use strict";
var C=E.extend("sap.suite.ui.commons.imageeditor.CustomSizeItem",{metadata:{properties:{width:{type:"float",defaultValue:0},height:{type:"float",defaultValue:0},label:{type:"string",defaultValue:""},icon:{type:"sap.ui.core.URI",defaultValue:""},relative:{type:"boolean",defaultValue:false}}}});
return C;});
sap.ui.predefine('sap/suite/ui/commons/imageeditor/FilterHistoryItem',["./HistoryItem","sap/base/assert"],function(H,a){"use strict";
var F=H.extend("sap.suite.ui.commons.imageeditor.FilterHistoryItem",{constructor:function(p){H.apply(this,arguments);p=p||{};a(typeof p.type==="string","Filter type must be a string.");a(typeof p.value==="number","Filter value must be a number.");a(typeof p.unit==="string","Filter unit must be a string.");this._sType=p.type;this._iValue=p.value;this._sUnit=p.unit;}});
F.prototype.getType=function(){return this._sType;};
F.prototype.getValue=function(){return this._iValue;};
F.prototype.getUnit=function(){return this._sUnit;};
F.prototype.compare=function(h){return false;};
return F;});
sap.ui.predefine('sap/suite/ui/commons/imageeditor/FilterUtils',[],function(){"use strict";var F=function(){};
F.grayscale=function(I,v){var r,g,b;for(var i=0;i<I.data.length;i+=4){r=I.data[i];g=I.data[i+1];b=I.data[i+2];I.data[i]=r*(0.2126+0.7874*(1-v))+g*(0.7152-0.7152*(1-v))+b*(0.0722-0.0722*(1-v));I.data[i+1]=r*(0.2126-0.2126*(1-v))+g*(0.7152+0.2848*(1-v))+b*(0.0722-0.0722*(1-v));I.data[i+2]=r*(0.2126-0.2126*(1-v))+g*(0.7152-0.7152*(1-v))+b*(0.0722+0.9278*(1-v));}};
F.sepia=function(I,v){var r,g,b;for(var i=0;i<I.data.length;i+=4){r=I.data[i];g=I.data[i+1];b=I.data[i+2];I.data[i]=r*(0.393+0.607*(1-v))+g*(0.769-0.769*(1-v))+b*(0.189-0.189*(1-v));I.data[i+1]=r*(0.349-0.349*(1-v))+g*(0.686+0.314*(1-v))+b*(0.168-0.168*(1-v));I.data[i+2]=r*(0.272-0.272*(1-v))+g*(0.534-0.534*(1-v))+b*(0.131+0.869*(1-v));}};
F.saturate=function(I,v){var r,g,b;for(var i=0;i<I.data.length;i+=4){r=I.data[i];g=I.data[i+1];b=I.data[i+2];I.data[i]=r*(0.213+0.787*v)+g*(0.715-0.715*v)+b*(0.072-0.072*v);I.data[i+1]=r*(0.213-0.213*v)+g*(0.715+0.285*v)+b*(0.072-0.072*v);I.data[i+2]=r*(0.213-0.213*v)+g*(0.715-0.715*v)+b*(0.072+0.928*v);}};
F.invert=function(I,v){var r,g,b,f,a,c;for(var i=0;i<I.data.length;i+=4){r=I.data[i];g=I.data[i+1];b=I.data[i+2];f=(255-r);a=(255-g);c=(255-b);I.data[i]=r-((r-f)*v);I.data[i+1]=g-((g-a)*v);I.data[i+2]=b-((b-c)*v);}};
F.brightness=function(I,v){var r,g,b;for(var i=0;i<I.data.length;i+=4){r=I.data[i];g=I.data[i+1];b=I.data[i+2];I.data[i]=r*v;I.data[i+1]=g*v;I.data[i+2]=b*v;}};
F.contrast=function(I,v){var r,g,b;for(var i=0;i<I.data.length;i+=4){r=I.data[i];g=I.data[i+1];b=I.data[i+2];I.data[i]=r*v+((-0.5*v)+0.5)*255;I.data[i+1]=g*v+((-0.5*v)+0.5)*255;I.data[i+2]=b*v+((-0.5*v)+0.5)*255;}};
F.hueRotate=function(I,v){var r,g,b;for(var i=0;i<I.data.length;i+=4){r=I.data[i];g=I.data[i+1];b=I.data[i+2];I.data[i]=r*(0.2126+Math.cos(v)*0.7874-Math.sin(v)*0.2126)+g*(0.7152-Math.cos(v)*0.7152-Math.sin(v)*0.7152)+b*(0.0722-Math.cos(v)*0.0722+Math.sin(v)*0.9278);I.data[i+1]=r*(0.2126-Math.cos(v)*0.2126+Math.sin(v)*0.143)+g*(0.7152+Math.cos(v)*0.285+Math.sin(v)*0.140)+b*(0.0722-Math.cos(v)*0.0722-Math.sin(v)*0.283);I.data[i+2]=r*(0.2126-Math.cos(v)*0.2126-Math.sin(v)*0.7874)+g*(0.7152-Math.cos(v)*0.7152+Math.sin(v)*0.7152)+b*(0.0722+Math.cos(v)*0.9278+Math.sin(v)*0.0722);}};
return F;},true);
sap.ui.predefine('sap/suite/ui/commons/imageeditor/FlipHistoryItem',["./HistoryItem","sap/base/assert"],function(H,a){"use strict";
var F=H.extend("sap.suite.ui.commons.imageeditor.FlipHistoryItem",{constructor:function(p){H.apply(this,arguments);p=p||{};a(typeof p.vertical==="boolean","Vertical must be a boolean.");a(typeof p.horizontal==="boolean","Horizontal value must be a bolean.");this._bVertical=p.vertical;this._bHorizontal=p.horizontal;}});
F.prototype.getVertical=function(){return this._bVertical;};
F.prototype.getHorizontal=function(){return this._bHorizontal;};
F.prototype.compare=function(h){return false;};
return F;});
sap.ui.predefine('sap/suite/ui/commons/imageeditor/HistoryItem',["sap/ui/base/Object"],function(B){"use strict";
var H=B.extend("sap.suite.ui.commons.imageeditor.HistoryItem",{metadata:{"abstract":true}});
H.prototype._isSameClass=function(h){return this.getMetadata().getName()===h.getMetadata().getName();};
H.prototype._compare=function(h,m){var t=this;return this._isSameClass(h)&&m.reduce(function(e,M){return t[M]()===h[M]();},true);};
return H;});
sap.ui.predefine('sap/suite/ui/commons/imageeditor/ImageEditor',["sap/ui/thirdparty/jquery","sap/ui/core/Control","sap/suite/ui/commons/library","sap/ui/core/library","sap/m/library","sap/base/Log","sap/ui/Device","sap/m/MessageToast","sap/ui/core/Icon","./ResizeHistoryItem","./RotateHistoryItem","./CropRectangleHistoryItem","./CropEllipseHistoryItem","./CropCustomShapeHistoryItem","./FilterHistoryItem","./FlipHistoryItem","./FilterUtils","sap/ui/core/util/File","sap/suite/ui/commons/Utils","./ImageEditorRenderer","sap/ui/thirdparty/jqueryui/jquery-ui-draggable","sap/ui/thirdparty/jqueryui/jquery-ui-resizable"],function(q,C,l,a,M,L,D,b,I,R,c,d,e,f,F,g,h,j,S){"use strict";var k=l.ImageEditorMode,m=l.ImageFormat,r=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");
var n=C.extend("sap.suite.ui.commons.imageeditor.ImageEditor",{metadata:{library:"sap.suite.ui.commons",properties:{src:{type:"any",defaultValue:""},customShapeSrc:{type:"any",defaultValue:""},mode:{type:"sap.suite.ui.commons.ImageEditorMode",defaultValue:k.Default},keepCropAspectRatio:{type:"boolean",defaultValue:true},keepResizeAspectRatio:{type:"boolean",defaultValue:true},scaleCropArea:{type:"boolean",defaultValue:false}},events:{loaded:{},error:{},customShapeLoaded:{},customShapeError:{},sizeChanged:{parameters:{width:{type:"int"},height:{type:"int"},originalWidth:{type:"int"},originalHeight:{type:"int"}}},cropAreaChanged:{parameters:{cropArea:{type:"object"},originalCropArea:{type:"object"}}},zoomChanged:{parameters:{zoom:{type:"int"}}},historyChanged:{history:{type:"sap.suite.ui.commons.imageeditor.HistoryItem[]"},index:{type:"int"}}}}});
n.LIMITS=Object.freeze({WIDTH_MIN:1,WIDTH_MAX:8192,HEIGHT_MIN:1,HEIGHT_MAX:8192,MAX_CANVAS_SIZE:67108864,MAX_SAFARI_MOBILE_CANVAS_SIZE:16777216,ROTATION_MIN:-360,ROTATION_MAX:360,SEPIA_MIN:0,SEPIA_MAX:100,GRAYSCALE_MIN:0,GRAYSCALE_MAX:100,SATURATE_MIN:0,SATURATE_MAX:500,INVERT_MIN:0,INVERT_MAX:100,BRIGHTNESS_MIN:0,BRIGHTNESS_MAX:500,CONTRAST_MIN:0,CONTRAST_MAX:500,CROP_AREA_MIN:1});n.ZOOM_MILESTONES=[5,10,25,33,50,67,75,80,90,100,110,125,150,175,200,250,300,400,500];var o=Object.freeze({CROP_AREA_SHORTER_SIDE_OFFSET:0.8,DEFAULT_ZOOM_MILESTONE:100});
n.prototype.init=function(){this._oCanvas=document.createElement("canvas");this._initCanvas();this._initOrigImg();this._initCustomShapeImg();this._fZoom=o.DEFAULT_ZOOM_MILESTONE;this._oSavedImg=document.createElement("canvas");this._oSavedImg.width=0;this._oSavedImg.height=0;};
n.prototype._initOrigImg=function(){var t=this;this._oOrigImg=new Image();this._oOrigImg.crossOrigin="Anonymous";this._oOrigImg.onload=function(){t._bImageLoaded=true;t._drawImage(t._oOrigImg);t._storeCurrentImg();t._applyExifOrientation();if(t._isReady()){t._onAfterIsReady();}if(t.getCustomShapeLoaded()&&!D.browser.msie){t._renderCustomShapeMask();}t.fireLoaded();};this._oOrigImg.onerror=function(E){t.fireError();};};
n.prototype._initCustomShapeImg=function(){var t=this;this._oCustomShapeImg=new Image();this._oCustomShapeImg.crossOrigin="Anonymous";this._oCustomShapeImg.onload=function(){t._bCustomShapeLoaded=true;t.$().addClass("sapSuiteUiCommonsImageEditorModeCropCustomShapeLoaded");t._renderCustomShapeMask();t.fireCustomShapeLoaded();};this._oCustomShapeImg.onerror=function(){t.fireCustomShapeError();};};
n.prototype._getExifOrientation=function(p){var s=new FileReader(),O,t,v,u,w,x,T,i,E,o={FIRST_CHECK:65496,SECOND_CHECK:65505,CORRECT_FORMAT_CHECK:1165519206,LITTLE_CHECK:18761,FOURTH_CHECK:65280,EXIF_CHECK:274,ERR_FILE_FORMAT:-2,OFFSET_STEP:2,OFFSET_STEP_MED:4,OFFSET_STEP_BIG:6};return new Promise(function(y){s.onload=function(z){t=z.target.result;v=new DataView(t);u=v.byteLength;O=2;E=0;try{if(v.getUint16(0,false)!=o.FIRST_CHECK){return;}while(O<u){w=v.getUint16(O,false);O+=o.OFFSET_STEP;if(w==o.SECOND_CHECK){O+=o.OFFSET_STEP;if(v.getUint32(O,false)!=o.CORRECT_FORMAT_CHECK){return;}O+=o.OFFSET_STEP_BIG;x=v.getUint16(O,false)==o.LITTLE_CHECK;O+=v.getUint32(O+o.OFFSET_STEP_MED,x);T=v.getUint16(O,x);O+=o.OFFSET_STEP;for(i=0;i<T;i++){if(v.getUint16(O+(i*12),x)==o.EXIF_CHECK){return v.getUint16(O+(i*12)+8,x);}}}else if((w&o.FOURTH_CHECK)!=FOURTH_CHECK){break;}else{O+=v.getUint16(O,false);}}}catch(A){return y(o.ERR_FILE_FORMAT);}};s.readAsArrayBuffer(p.slice(0,64*1024));});};
n.prototype._handleExifOrientation=function(i){var t=this;this._getExifOrientation(i).then(function(O){switch(O){case 1:t._iExifRotation=0;break;case 2:t._iExifRotation=0;t._bExifFlip=true;break;case 3:t._iExifRotation=180;break;case 4:t._bExifFlip=true;t._iExifRotation=180;break;case 5:t._bExifFlip=true;t._iExifRotation=90;break;case 6:t._iExifRotation=90;break;case 7:t._bExifFlip=true;t._iExifRotation=-90;break;case 8:t._iExifRotation=-90;break;default:t._iExifRotation=0;break;}t._applyExifOrientation();});};
n.prototype._applyExifOrientation=function(){if(this.getLoaded()){if(this._iExifRotation){this._setRotation(this._iExifRotation);this._storeCurrentImg();}if(this._bExifFlip){this._flipHorizontal();this._storeCurrentImg();}}};
n.prototype._renderCustomShapeMask=function(){var i=document.createElement("canvas"),p=i.getContext("2d"),w,H;this._oCustomShapeImg.width=500;this._oCustomShapeImg.height=this._oCustomShapeImg.naturalHeight*this._oCustomShapeImg.width/this._oCustomShapeImg.naturalWidth;q("body").prepend(this._oCustomShapeImg);w=this._oCustomShapeImg.clientWidth;H=this._oCustomShapeImg.clientHeight;q(this._oCustomShapeImg).remove();if(w>=H){i.width=this._oCanvas.width;i.height=H*(this._oCanvas.width/w);}else{i.height=this._oCanvas.height;i.width=w*(this._oCanvas.height/H);}this._oCustomShapeImg.width=i.width;this._oCustomShapeImg.height=i.height;p.drawImage(this._oCustomShapeImg,0,0,this._oCustomShapeImg.width,this._oCustomShapeImg.height);p.globalCompositeOperation="source-in";p.fillStyle="black";p.fillRect(0,0,i.width,i.height);this._sBlackCustomShapeUrl=i.toDataURL();if(this.$("overlayMaskCustomBlack")[0]){this.$("overlayMaskCustomBlack")[0].setAttributeNS("http://www.w3.org/1999/xlink","href",this._sBlackCustomShapeUrl);}p.fillStyle="white";p.fillRect(0,0,i.width,i.height);this._sWhiteCustomShapeUrl=i.toDataURL();if(this.$("overlayMaskCustomWhite")[0]){this.$("overlayMaskCustomWhite")[0].setAttributeNS("http://www.w3.org/1999/xlink","href",this._sWhiteCustomShapeUrl);}};
n.prototype.onAfterRendering=function(){this._$Container=this.$("canvasInnerContainer");this._$Container.prepend(this._oCanvas);this._initContainer();this._initCropArea();if(this._isReady()){this._onAfterIsReady();}};
n.prototype.setSrc=function(s){this.setProperty("src",s,true);var t=this,i,u;this._reset();if(typeof s==="string"){i=s;this._oOriginalBlob=this._fetchUrlAsBlob(i).then(function(B){t._handleExifOrientation(B);t._oOriginalBlob=B;t._sOriginalFileType=B.type;});if(!i.startsWith("data:image")){this._sOriginalFileName=this._getFileNameFromUrl(i);}}else if(s instanceof Blob){u=window.URL;i=u.createObjectURL(s);u.revokeObjectURL(s);t._handleExifOrientation(s);this._oOriginalBlob=s;this._sOriginalFileType=s.type;if(s instanceof File){this._sOriginalFileName=s.name;}}if(i){this._oOrigImg.src=i;}else{this.fireLoaded();}return this;};
n.prototype.setScaleCropArea=function(s){this.setProperty("scaleCropArea",s,true);return this;};
n.prototype.setCustomShapeSrc=function(s){this.setProperty("customShapeSrc",s,true);var t=this,i,u;t._bCustomShapeLoaded=false;if(typeof s==="string"){if((D.browser.msie||D.browser.firefox)&&s.startsWith("data:image/svg+xml;base64,")){this._handleSvgString(atob(s.slice("data:image/svg+xml;base64,".length)));}else{i=s;}}else if(s instanceof Blob){if(s instanceof File&&s.type==="image/svg+xml"){var p=new FileReader();p.onload=function(E){t._handleSvgString(E.target.result);};p.readAsText(s);}else{u=window.URL;i=u.createObjectURL(s);u.revokeObjectURL(s);this._setCustomShapeSrc(i);}}if(i){this._setCustomShapeSrc(i);}else if(!s){this._sBlackCustomShapeUrl="";this._sWhiteCustomShapeUrl="";if(this.$("overlayMaskCustomBlack")[0]){this.$("overlayMaskCustomBlack")[0].setAttributeNS("http://www.w3.org/1999/xlink","href",this._sBlackCustomShapeUrl);}if(this.$("overlayMaskCustomWhite")[0]){this.$("overlayMaskCustomWhite")[0].setAttributeNS("http://www.w3.org/1999/xlink","href",this._sWhiteCustomShapeUrl);}this.$().removeClass("sapSuiteUiCommonsImageEditorModeCropCustomShapeLoaded");this.fireCustomShapeLoaded();}return this;};
n.prototype._handleSvgString=function(s){var i,p;if(D.browser.msie){throw Error("SVG files cannot be used as shapes for custom crop in Internet Explorer. Please use a different image source or a different browser.");}var t=new DOMParser().parseFromString(s,"image/svg+xml");if(t.documentElement.width.baseVal.value>0){t.documentElement.width.baseVal.valueAsString=t.documentElement.width.baseVal.value.toString()+"px";}if(t.documentElement.height.baseVal.value>0){t.documentElement.height.baseVal.valueAsString=t.documentElement.height.baseVal.value.toString()+"px";}p=new XMLSerializer().serializeToString(t);i="data:image/svg+xml;base64,"+btoa(p);this._setCustomShapeSrc(i);};
n.prototype._setCustomShapeSrc=function(s){this._oCustomShapeImg.src=s;};
n.prototype.setKeepCropAspectRatio=function(K){this.setProperty("keepCropAspectRatio",K,true);this._updateResizableCropAspectRatio();return this;};
n.prototype.setKeepResizeAspectRatio=function(K){this.setProperty("keepResizeAspectRatio",K,true);this._updateResizableResizeAspectRatio();return this;};
n.prototype.getLoaded=function(){return!!this.getSrc()&&this._bImageLoaded;};
n.prototype.getCustomShapeLoaded=function(){return!!this.getCustomShapeSrc()&&this._bCustomShapeLoaded;};
n.prototype.setSize=function(w,H,p){this._throwIfNotLoaded("setSize");var O,i,s;w=this._constraintValue(w,n.LIMITS.WIDTH_MIN,n.LIMITS.WIDTH_MAX);H=this._constraintValue(H,n.LIMITS.HEIGHT_MIN,n.LIMITS.HEIGHT_MAX);s=this._limitCanvasSize(w,H);w=s.width;H=s.height;this._cancelPreview();O=this.getWidth();i=this.getHeight();this._setCanvasSize(w,H);this._addHistory(new R({width:w,height:H,oldWidth:O,oldHeight:i}),p);return this;};
n.prototype.getWidth=function(){this._throwIfNotLoaded("getWidth");return this._getLastImg().width;};
n.prototype.getPreviewWidth=function(){this._throwIfNotLoaded("getPreviewWidth");return this._oCanvas.width;};
n.prototype.setWidth=function(w,p){this._throwIfNotLoaded("setWidth");var O=this.getHeight(),i=this.getWidth(),H=this.getPreviewHeight(),s;w=this._constraintValue(w,n.LIMITS.WIDTH_MIN,n.LIMITS.WIDTH_MAX);if(this.getKeepResizeAspectRatio()){H=Math.round(w*H/this.getPreviewWidth());}s=this._limitCanvasSize(w,H);w=s.width;H=s.height;this._cancelPreview();this._setCanvasSize(w,H);this._addHistory(new R({width:w,height:H,oldWidth:i,oldHeight:O}),p);return this;};
n.prototype.getHeight=function(){this._throwIfNotLoaded("getHeight");return this._getLastImg().height;};
n.prototype.getPreviewHeight=function(){this._throwIfNotLoaded("getPreviewHeight");return this._oCanvas.height;};
n.prototype.setHeight=function(H,p){this._throwIfNotLoaded("setHeight");var O=this.getWidth(),i=this.getHeight(),w=this.getPreviewWidth(),s;H=this._constraintValue(H,n.LIMITS.HEIGHT_MIN,n.LIMITS.HEIGHT_MAX);if(this.getKeepResizeAspectRatio()){w=Math.round(H*w/this.getPreviewHeight());}s=this._limitCanvasSize(w,H);w=s.width;H=s.height;this._cancelPreview();this._setCanvasSize(w,H);this._addHistory(new R({width:w,height:H,oldWidth:O,oldHeight:i}),p);return this;};
n.prototype.rotate=function(i,p){this._throwIfNotLoaded("rotate");i=this._constraintValue(i,n.LIMITS.ROTATION_MIN,n.LIMITS.ROTATION_MAX);this._cancelPreview();this._setRotation(i);this._addHistory(new c({degrees:i}),p);return this;};
n.prototype.flipVertical=function(p){this._throwIfNotLoaded("flipVertical");this._cancelPreview();this._flipVertical();this._addHistory(new g({vertical:true,horizontal:false}),p);return this;};
n.prototype.flipHorizontal=function(p){this._throwIfNotLoaded("flipHorizontal");this._cancelPreview();this._flipHorizontal();this._addHistory(new g({vertical:false,horizontal:true}),p);return this;};
n.prototype.flip=function(v,H,p){this._throwIfNotLoaded("flip");this._cancelPreview();this._flip(v,H);this._addHistory(new g({vertical:v,horizontal:H}),p);return this;};
n.prototype.applyVisibleCrop=function(p){this._throwIfNotReady("applyVisibleCrop");switch(this.getMode()){case k.CropRectangle:{this._applyRectangleCrop(p);break;}case k.CropEllipse:{this._applyEllipseCrop(p);break;}case k.CropCustomShape:{this._throwIfCustomShapeNotLoaded("applyVisibleCrop CropCustomShape");this._applyCustomShapeCrop(p);break;}default:{L.warning("No cropping mode is selected, applyVisibleCrop does nothing");break;}}};
n.prototype.rectangleCrop=function(x,y,w,H,p){this._throwIfNotLoaded("rectangleCrop");var O=this.getWidth(),i=this.getHeight();this._cancelPreview();this._rectangleCrop(x,y,w,H);this._addHistory(new d({x:Math.round(x),y:Math.round(y),width:Math.round(w),height:Math.round(H),oldWidth:O,oldHeight:i}),p);this._limitCurrentCropArea();};
n.prototype.ellipseCrop=function(x,y,X,Y,p){this._throwIfNotLoaded("ellipseCrop");var O=this.getWidth(),i=this.getHeight();this._cancelPreview();this._ellipseCrop(x,y,X,Y);this._addHistory(new e({x:Math.round(x),y:Math.round(y),rx:Math.round(X),ry:Math.round(Y),width:Math.round(X*2),height:Math.round(Y*2),oldWidth:O,oldHeight:i}),p);this._limitCurrentCropArea();};
n.prototype.customShapeCrop=function(x,y,w,H,p){this._throwIfNotLoaded("customShapeCrop");this._throwIfCustomShapeNotLoaded("customShapeCrop");var O=this.getWidth(),i=this.getHeight();this._cancelPreview();this._customShapeCrop(x,y,w,H);this._addHistory(new f({x:Math.round(x),y:Math.round(y),width:Math.round(w),height:Math.round(H),oldWidth:O,oldHeight:i}),p);this._limitCurrentCropArea();};
n.prototype.setCropArea=function(x,y,w,H){this._throwIfNotLoaded("setCropArea");var i=this._limitCropArea(x,y,w,H);this._setCropArea(i.x,i.y,i.width,i.height);return this;};
n.prototype.setCropAreaByRatio=function(w,H){this._throwIfNotLoaded("setCropAreaByRatio");var O=this._oCanvas.width/this._oCanvas.height,i=w/H,W,p,x,y,s;if(typeof w!=="number"||typeof H!=="number"){return this;}if(O>=i){p=o.CROP_AREA_SHORTER_SIDE_OFFSET;W=this._oCanvas.height*p*i;W=100*W/this._oCanvas.width;p*=100;x=(100-W)/2;y=(100-p)/2;}else{W=o.CROP_AREA_SHORTER_SIDE_OFFSET;p=this._oCanvas.width*W/i;p=100*p/this._oCanvas.height;W*=100;y=(100-p)/2;x=(100-W)/2;}s=this._transposePercentToImageCoordsPx(x,y,W,p);this._setCropArea(s.x,s.y,s.width,s.height);return this;};
n.prototype.setCustomShapeCropAreaRatio=function(){this._throwIfNotLoaded("setCustomShapeCropAreaRatio");this._throwIfCustomShapeNotLoaded("setCustomShapeCropAreaRatio");this.setCropAreaByRatio(this._oCustomShapeImg.width,this._oCustomShapeImg.height);return this;};
n.prototype.setCropAreaBySize=function(w,H){this._throwIfNotLoaded("setCropAreaBySize");var i=this._limitCropArea(null,null,w,H);this._setCropArea(null,null,i.width,i.height);return this;};
n.prototype.getCropArea=function(){return this._oCropArea?q.extend({},this._oCropArea):null;};
n.prototype.zoom=function(z,p){this._setZoom(z,p);return this;};
n.prototype.zoomIn=function(p){this._zoomIn(p);return this;};
n.prototype.zoomOut=function(p){this._zoomOut(p);return this;};
n.prototype.zoomToFit=function(){this._throwIfNotReady("zoomToFit");this._zoomToFit();return this;};
n.prototype.getZoomLevel=function(){return this._fZoom;};
n.prototype.sepia=function(v,p){this._throwIfNotLoaded("sepia");this._constraintValue(v,n.LIMITS.SEPIA_MIN,n.LIMITS.SEPIA_MAX);this._cancelPreview();this._addHistory(new F({type:"sepia",value:v,unit:"%"}),p);};
n.prototype.grayscale=function(v,p){this._throwIfNotLoaded("grayscale");this._constraintValue(v,n.LIMITS.GRAYSCALE_MIN,n.LIMITS.GRAYSCALE_MAX);this._cancelPreview();this._addHistory(new F({type:"grayscale",value:v,unit:"%"}),p);};
n.prototype.saturate=function(v,p){this._throwIfNotLoaded("saturate");this._constraintValue(v,n.LIMITS.SATURATE_MIN,n.LIMITS.SATURATE_MAX);this._cancelPreview();this._addHistory(new F({type:"saturate",value:v,unit:"%"}),p);};
n.prototype.invert=function(v,p){this._throwIfNotLoaded("invert");this._constraintValue(v,n.LIMITS.INVERT_MIN,n.LIMITS.INVERT_MAX);this._cancelPreview();this._addHistory(new F({type:"invert",value:v,unit:"%"}),p);};
n.prototype.brightness=function(v,p){this._throwIfNotLoaded("brightness");this._constraintValue(v,n.LIMITS.BRIGHTNESS_MIN,n.LIMITS.BRIGHTNESS_MAX);this._cancelPreview();this._addHistory(new F({type:"brightness",value:v,unit:"%"}),p);};
n.prototype.contrast=function(v,p){this._throwIfNotLoaded("contrast");this._constraintValue(v,n.LIMITS.CONTRAST_MIN,n.LIMITS.CONTRAST_MAX);this._cancelPreview();this._addHistory(new F({type:"contrast",value:v,unit:"%"}),p);};
n.prototype.applyPreview=function(){this._throwIfNotLoaded("applyPreview");this._applyPreview();};
n.prototype.cancelPreview=function(){this._throwIfNotLoaded("cancelPreview");this._cancelPreview();};
n.prototype.undo=function(){this._throwIfNotLoaded("undo");this._jumpToHistory(this._iHistoryIndex+1);};
n.prototype.redo=function(){this._throwIfNotLoaded("redo");this._jumpToHistory(this._iHistoryIndex-1);};
n.prototype.jumpToHistory=function(i){this._throwIfNotLoaded("jumpToHistory");this._jumpToHistory(i);};
n.prototype.getHistory=function(){return this._aHistory;};
n.prototype.getHistoryIndex=function(){return this._iHistoryIndex;};
n.prototype.getImagePngDataURL=function(){this._throwIfNotLoaded("getImagePngDataURL");return this._getFinalisedCanvas().toDataURL("image/png");};
n.prototype.getImageJpegDataURL=function(Q){this._throwIfNotLoaded("getImageJpegDataURL");return this._getFinalisedCanvas().toDataURL("image/jpeg",Q);};
n.prototype.getImageDataURL=function(s,Q){this._throwIfNotLoaded("getImageDataURL");s=this._convertImageFormatEnumToMime(s)||this._getFileFormat();return this._getFinalisedCanvas().toDataURL(s,Q);};
n.prototype.getImageAsBlob=function(s,Q){this._throwIfNotLoaded("getImageAsBlob");var t=this,p;s=this._convertImageFormatEnumToMime(s)||this._getFileFormat();if(this._aHistory.length===0){p=this._getOriginalBlob();}else{p=new Promise(function(i,u){var v=t._getFinalisedCanvas();if(v.toBlob){v.toBlob(function(B){i(B);},s,Q);}else{t._createBlob(v,s,Q).then(function(B){i(B);});}});}return p;};
n.prototype.openSaveDialog=function(s,i,Q){this._throwIfNotLoaded("openSaveDialog");var p,E;s=s||this._getFileName();i=this._convertImageFormatEnumToMime(i)||this._getFileFormat();E=i.split("/")[1];if(this._aHistory.length===0){this._getOriginalBlob().then(function(B){j.save(B,s,E,i);});}else{p=this._getFinalisedCanvas();if(p.toBlob){p.toBlob(function(B){j.save(B,s,E,i);},i,Q);}else{this._createBlob(p,i,Q).then(function(B){j.save(B,s,E,i);});}}};
n.prototype.getFileName=function(){return this._getFullFileName();};
n.prototype._throwIfNotLoaded=function(s){if(!this.getLoaded()){throw Error("Cannot call "+s+" before image is set and loaded");}};
n.prototype._throwIfNotReady=function(s){if(!this._isReady()){throw Error("Cannot call "+s+" before image is set and loaded and control is rendered");}};
n.prototype._throwIfCustomShapeNotLoaded=function(s){if(!this.getCustomShapeLoaded()){throw Error("Cannot call "+s+" before custom shape is set and loaded");}};
n.prototype._onAfterIsReady=function(){var t=this;this.$().removeClass("sapSuiteUiCommonsImageEditorEmpty");t._refreshContainerSize();this._$Container.css({width:this._oCanvas.width*this._getScale(),height:this._oCanvas.height*this._getScale()});if(!this.getCropArea()){this.setCropAreaByRatio(this.getWidth(),this.getHeight());}else{this._setCropArea(this._oCropArea.x,this._oCropArea.y,this._oCropArea.width,this._oCropArea.height);}this.getDomRef().onmousewheel=this._onMouseWheel.bind(this);this.getDomRef().onmousedown=this._onMouseDown.bind(this);};
n.prototype._isReady=function(){return!!this._$Container&&this.getLoaded();};
n.prototype._createBlob=function(i,t,Q){var p=this;return new Promise(function(s,u){var v=i.toDataURL(t,Q).split(",")[1];setTimeout(function(){s(p._convertDataUriToBlob(v,t));});});};
n.prototype._convertDataUriToBlob=function(B,s){var p=atob(B),t=p.length,A=new Uint8Array(t);for(var i=0;i<t;i++){A[i]=p.charCodeAt(i);}return new Blob([A],{type:s});};
n.prototype._fetchUrlAsBlob=function(s){var p,i,B,t;if(window.fetch){p=fetch(s).then(function(u){return u.blob();}).then(function(u){return u;});}else{if(s.startsWith("data:image")){i=s.split(",");B=i[1];t=i[0].split(";")[0].split(":")[1];p=Promise.resolve(this._convertDataUriToBlob(B,t));}else{p=new Promise(function(u,v){var x=new XMLHttpRequest();x.open("GET",s);x.responseType="blob";x.onreadystatechange=function(){if(this.readyState===XMLHttpRequest.DONE){if(this.status===200){u(x.response);}else{v();}}};x.send();});}}return p;};
n.prototype._getOriginalBlob=function(){var p;if(this._oOriginalBlob instanceof Promise){p=this._oOriginalBlob;}else{p=Promise.resolve(this._oOriginalBlob);}return p;};
n.prototype._getFileNameFromUrl=function(u){return u.split("#")[0].split("?")[0].split("/").pop();};
n.prototype._getFileName=function(){var s=this._sOriginalFileName||"image",i;i=s.lastIndexOf(".");if(i>0){s=s.slice(0,i);}return s;};
n.prototype._getFullFileName=function(){return this._sOriginalFileName;};
n.prototype._convertImageFormatEnumToMime=function(s){switch(s){case m.Png:s="image/png";break;case m.Jpeg:s="image/jpeg";break;default:break;}return s;};
n.prototype._getFileFormat=function(){return this._sOriginalFileType;};
n.prototype._updateTransformation=function(){this._oCanvas.style.transform="scale("+this._getScale()+")";};
n.prototype._refreshContainerSize=function(){if(!this._$Container||!this._$Container[0]||!this._isReady()){return;}this._$Container.css({width:this._oCanvas.width*this._getScale(),height:this._oCanvas.height*this._getScale()});this._refreshOverlayMask();};
n.prototype._refreshOverlayMask=function(){var O=this.$().find(".sapSuiteUiCommonsImageEditorCropOverlayContainer")[0];if(!O||!this._$Container){return;}this._$Container[0].removeChild(O);this._$Container[0].insertBefore(O,this._oCanvas.nextSibling);};
n.prototype._refreshCropContainerSize=function(){var i=this.getCropArea(),p,$;if(i){p=this._transposeImageCoordsPxToPercent(i.x,i.y,i.width,i.height);$=this.$().find(".sapSuiteUiCommonsImageEditorCropInnerRectangle");$.css({left:p.x+"%",top:p.y+"%"});$.width(p.width+"%");$.height(p.height+"%");}};
n.prototype._refreshCropContainerLook=function(){function i(P){return P/parseFloat(getComputedStyle(document.documentElement).fontSize);}var $=this.$().find(".sapSuiteUiCommonsImageEditorCropInnerRectangle"),p=i($.width()),s=i($.height()),t=Math.min(p,s);$.removeClass("sapSuiteUiCommonsImageEditorCropInnerRectangleSmall sapSuiteUiCommonsImageEditorCropInnerRectangleVerySmall sapSuiteUiCommonsImageEditorCropInnerRectangleExtraSmall");if(t<1.25){$.addClass("sapSuiteUiCommonsImageEditorCropInnerRectangleExtraSmall");}else if(t<2){$.addClass("sapSuiteUiCommonsImageEditorCropInnerRectangleVerySmall");}else if(t<3){$.addClass("sapSuiteUiCommonsImageEditorCropInnerRectangleSmall");}};
n.prototype._initCanvas=function(){this._oCanvas.id=this.getId()+"-image";this._oCanvas.classList.add("sapSuiteUiCommonsImageEditorCanvas");this._oContext=this._oCanvas.getContext("2d");};
n.prototype._initContainer=function(){var t=this,H=this.$().find(".sapSuiteUiCommonsImageEditorTransformHandlers .sapSuiteUiCommonsImageEditorHandlerContainer");this._$Container.resizable({containment:"parent",aspectRatio:this.getKeepResizeAspectRatio(),start:function(E,u){t.$("image").addClass("sapSuiteUiCommonsImageEditorCanvasResize");t.$("image").css("transform","");q(this).css({top:u.position.top,left:u.position.left,width:u.size.width,height:u.size.height});},stop:function(E,u){var N=u.size.width*t._oCanvas.width/u.originalSize.width,i=u.size.height*t._oCanvas.height/u.originalSize.height,O=t._oCanvas.width,p=t._oCanvas.height;t.$("image").removeClass("sapSuiteUiCommonsImageEditorCanvasResize");t._$Container.css({top:"",left:""});t.setSize(N,i,true);t._refreshContainerSize();t._updateTransformation();t.fireSizeChanged({width:t.getPreviewWidth(),height:t.getPreviewHeight(),originalWidth:O,originalHeight:p});},handles:{nw:H.filter(".ui-resizable-nw"),ne:H.filter(".ui-resizable-ne"),sw:H.filter(".ui-resizable-sw"),se:H.filter(".ui-resizable-se"),n:H.filter(".ui-resizable-n"),s:H.filter(".ui-resizable-s"),w:H.filter(".ui-resizable-w"),e:H.filter(".ui-resizable-e")}});S._setupMobileDraggable(this._$Container);};
n.prototype._initCropArea=function(){var t=this,B=this.$().find(".sapSuiteUiCommonsImageEditorCropInnerRectangle"),H=this.$().find(".sapSuiteUiCommonsImageEditorCropInnerRectangle .sapSuiteUiCommonsImageEditorHandlerContainer"),i=this.$().find(".sapSuiteUiCommonsImageEditorDragHandlerContainer")[0];function p(E,u){var v=getComputedStyle(u.helper[0]);t._setOverlayMaskSize(u.position.left,u.position.top,u.size?u.size.width:parseFloat(v.width),u.size?u.size.height:parseFloat(v.height),"px");t._refreshCropContainerLook();}function s(E,u){var $=q(this),v=this.getBoundingClientRect(),P=$.position(),w=t._transposeViewportCoordsToImageCoords(P.left,P.top,v.width,v.height),O=t.getCropArea(),x;x=t._limitCropArea(w.x,w.y,w.width,w.height);t._setCropArea(x.x,x.y,x.width,x.height);x=t.getCropArea();t.fireCropAreaChanged({cropArea:x,originalCropArea:O});}B.resizable({aspectRatio:this.getKeepCropAspectRatio(),containment:"parent",minWidth:n.LIMITS.CROP_AREA_MIN,minHeight:n.LIMITS.CROP_AREA_MIN,resize:p,stop:s,handles:{nw:H.filter(".ui-resizable-nw"),ne:H.filter(".ui-resizable-ne"),sw:H.filter(".ui-resizable-sw"),se:H.filter(".ui-resizable-se"),n:H.filter(".ui-resizable-n"),s:H.filter(".ui-resizable-s"),w:H.filter(".ui-resizable-w"),e:H.filter(".ui-resizable-e")}});i.onmousewheel=this._onMouseWheel.bind(this);B.draggable({containment:"parent",handle:i,drag:p,stop:s});S._setupMobileDraggable(B);B.css("position","absolute");};
n.prototype._getLastImg=function(){return this._oSavedImg;};
n.prototype._storeCurrentImg=function(){this._oSavedImg.width=this._oCanvas.width;this._oSavedImg.height=this._oCanvas.height;this._oSavedImg.getContext("2d").drawImage(this._oCanvas,0,0);};
n.prototype._addHistory=function(H,p){if(p){this._oPreview=H;}else{this._addNewHistory(H);this._oPreview=null;}this._updateFilters();};
n.prototype._applyPreview=function(){if(!this._oPreview){return;}this._addNewHistory(this._oPreview);this._oPreview=null;};
n.prototype._addNewHistory=function(N){this._aHistory=this._aHistory.slice(this._iHistoryIndex);this._iHistoryIndex=0;if(this._aHistory.length===0||!this._aHistory[0].compare(N)){this._aHistory.unshift(N);this._storeCurrentImg();this._fireHistoryChanged();}};
n.prototype._cancelPreview=function(){if(!this._oPreview){return;}this._oPreview=null;this._updateFilters();this._drawImage(this._getLastImg());};
n.prototype._jumpToHistory=function(p){var s=this._iHistoryIndex,H,i;this._iHistoryIndex=Math.min(this._aHistory.length,Math.max(0,p));if(s===this._iHistoryIndex){return;}if(s<this._iHistoryIndex){this._drawImage(this._oOrigImg);this._storeCurrentImg();this._applyExifOrientation();i=this._aHistory.length-1;}else{i=s-1;}for(i;i>=this._iHistoryIndex;i--){H=this._aHistory[i];switch(H.getMetadata().getName()){case"sap.suite.ui.commons.imageeditor.RotateHistoryItem":{this._setRotation(H.getDegrees());break;}case"sap.suite.ui.commons.imageeditor.ResizeHistoryItem":{this._setCanvasSize(H.getWidth(),H.getHeight());break;}case"sap.suite.ui.commons.imageeditor.FlipHistoryItem":{this._flip(H.getVertical(),H.getHorizontal());break;}case"sap.suite.ui.commons.imageeditor.FilterHistoryItem":{if(this._needsManualFilter()){this._applyFilterItem(H);}break;}case"sap.suite.ui.commons.imageeditor.CropRectangleHistoryItem":{this._rectangleCrop(H.getX(),H.getY(),H.getWidth(),H.getHeight());break;}case"sap.suite.ui.commons.imageeditor.CropEllipseHistoryItem":{this._ellipseCrop(H.getX(),H.getY(),H.getRx(),H.getRy());break;}case"sap.suite.ui.commons.imageeditor.CropCustomShapeHistoryItem":{this._customShapeCrop(H.getX(),H.getY(),H.getWidth(),H.getHeight());break;}default:{break;}}this._storeCurrentImg();}this._updateFilters();this._fireHistoryChanged();};
n.prototype._fireHistoryChanged=function(){this.fireHistoryChanged({history:this._aHistory.slice(),index:this._iHistoryIndex});};
n.prototype._onMouseDown=function(E){if(E.button!==0||(E.target!==this.getDomRef()&&E.target!==this._oCanvas)){return;}var t=this,s=E.clientX,i=E.clientY;E.preventDefault();function p(E){var v=E.clientX,w=E.clientY,x=v-s,y=w-i,z=t.getDomRef();z.scrollLeft-=x;z.scrollTop-=y;s=v;i=w;}function u(){document.removeEventListener("mousemove",p);document.removeEventListener("mouseup",u);}document.addEventListener("mousemove",p);document.addEventListener("mouseup",u);};
n.prototype._onMouseWheel=function(E){if(!E.ctrlKey){return;}E.preventDefault();var z=E.wheelDeltaY>0?this._zoomIn.bind(this):this._zoomOut.bind(this);z({x:(E.clientX-this._$Container[0].getBoundingClientRect().x)/this.getZoomLevel()*100,y:(E.clientY-this._$Container[0].getBoundingClientRect().y)/this.getZoomLevel()*100});this.fireZoomChanged({zoom:this._fZoom});};
n.prototype._limitCropArea=function(x,y,w,H,i){var p=this._getMaxCropAreaWidth(i),s=this._getMinCropAreaWidth(i),t=this._getMaxCropAreaHeight(i),u=this._getMinCropAreaHeight(i);x=x&&x<0?0:x;y=y&&y<0?0:y;w=this._constraintValue(w,s,p);H=this._constraintValue(H,u,t);if(x+w>this.getWidth()){x-=(x+w)-this.getWidth();}if(y+H>this.getHeight()){y-=(y+H)-this.getHeight();}return{x:x,y:y,width:w,height:H};};
n.prototype._limitCurrentCropArea=function(){var i=this.getCropArea();if(i){this.setCropArea(i.x,i.y,i.width,i.height);}};
n.prototype._getMaxCropAreaWidth=function(i){var p,s=this.getCropArea();if(i&&this.getKeepCropAspectRatio()&&s&&this.getWidth()/this.getHeight()>s.width/s.height){p=s.width*this._getMaxCropAreaHeight()/s.height;}else{p=this.getWidth();}return Math.round(p);};
n.prototype._getMinCropAreaWidth=function(i){var p,s=this.getCropArea();if(i&&this.getKeepCropAspectRatio()&&s&&s.width>s.height){s=this.getCropArea();p=s.width*this._getMinCropAreaHeight()/s.height;}else{p=n.LIMITS.CROP_AREA_MIN;}return Math.round(p);};
n.prototype._getMaxCropAreaHeight=function(i){var p,s=this.getCropArea();if(i&&this.getKeepCropAspectRatio()&&s&&this.getWidth()/this.getHeight()<s.width/s.height){s=this.getCropArea();p=s.height*this._getMaxCropAreaWidth()/s.width;}else{p=this.getHeight();}return Math.round(p);};
n.prototype._getMinCropAreaHeight=function(i){var p,s=this.getCropArea();if(i&&this.getKeepCropAspectRatio()&&s&&s.width<s.height){s=this.getCropArea();p=s.height*this._getMinCropAreaWidth()/s.width;}else{p=n.LIMITS.CROP_AREA_MIN;}return Math.round(p);};
n.prototype._scaleCropArea=function(O,N){var i=this.getCropArea();if(i&&typeof i.x==="number"&&typeof i.width==="number"){i.newWidth=i.width*(O/N);i.newHeight=i.height*(O/N);i.x+=(i.width-i.newWidth)/2;i.y+=(i.height-i.newHeight)/2;i=this._limitCropArea(i.x,i.y,i.newWidth,i.newHeight,true);this._setCropArea(i.x,i.y,i.width,i.height);}};
n.prototype._setCropArea=function(x,y,w,H){this._oCropArea={x:x,y:y,width:w,height:H};if(!this._isReady()){return;}var p;if(typeof this._oCropArea.x!=="number"){this._oCropArea.x=(this.getWidth()-w)/2;this._oCropArea.y=(this.getHeight()-H)/2;}p=this._transposeImageCoordsPxToPercent(this._oCropArea.x,this._oCropArea.y,this._oCropArea.width,this._oCropArea.height);this._refreshCropContainerSize();this._setOverlayMaskSize(p.x,p.y,p.width,p.height,"%");this._refreshOverlayMask();this._refreshCropContainerLook();this._updateCropAreaHandlerColors();};
n.prototype._setOverlayMaskSize=function(x,y,w,H,u){var $;$=this.$("overlayMaskRect");$.attr({x:x+u,y:y+u,width:w+u,height:H+u});$=this.$("overlayMaskEllipse");$.attr({cx:(x+w/2)+u,cy:(y+H/2)+u,rx:(w/2)+u,ry:(H/2)+u});$=this.$("overlayMaskCustomBlack");$.attr({x:x+u,y:y+u,width:w+u,height:H+u});$=this.$("overlayMaskCustomWhite");$.attr({x:x+u,y:y+u,width:w+u,height:H+u});};
n.prototype._constraintValue=function(v,i,p){if(isNaN(v)||v<i){v=i;}else if(v>p){v=p;}return Math.round(v);};
n.prototype._setZoom=function(z,p){var O=this._fZoom,t=this.getDomRef(),T,i,s,u,v,w,x,y;this._fZoom=parseFloat(z.toFixed(2));if(this._fZoom<=0){this._fZoom=1;}p=p||{};if(t){s=t.clientWidth;u=t.clientHeight;v=t.scrollLeft;w=t.scrollTop;}this._updateTransformation();this._refreshContainerSize();if(t){T=t.getBoundingClientRect();i=this._$Container[0].getBoundingClientRect();p.x=p.x||(t.clientWidth/2+T.x-(i.x-((s-t.clientWidth)/2)))/O*100;p.y=p.y||(t.clientHeight/2+T.y-(i.y-((u-t.clientHeight)/2)))/O*100;}if(p.x&&p.y){x=t.scrollLeft+(p.x/100*this.getZoomLevel()-t.scrollLeft)-(p.x/100*O-v);y=t.scrollTop+(p.y/100*this.getZoomLevel()-t.scrollTop)-(p.y/100*O-w);}if(t&&p.x){t.scrollLeft=x;}if(t&&p.y){t.scrollTop=y;}if(this.getScaleCropArea()){this._scaleCropArea(O,this._fZoom);}this._refreshCropContainerLook();};
n.prototype._getScale=function(){return this._fZoom/100;};
n.prototype._zoomIn=function(p){var s=n.ZOOM_MILESTONES.indexOf(this._fZoom),z=this._fZoom,i;if(s>=0&&s<n.ZOOM_MILESTONES.length-1){z=n.ZOOM_MILESTONES[s+1];}else{for(i=0;i<n.ZOOM_MILESTONES.length;i++){if(n.ZOOM_MILESTONES[i]>z){z=n.ZOOM_MILESTONES[i];break;}}}this._setZoom(z,p);};
n.prototype._zoomOut=function(p){var s=n.ZOOM_MILESTONES.indexOf(this._fZoom),z=this._fZoom,i;if(s>0){z=n.ZOOM_MILESTONES[s-1];}else{for(i=n.ZOOM_MILESTONES.length-1;i>=0;i--){if(n.ZOOM_MILESTONES[i]<z){z=n.ZOOM_MILESTONES[i];break;}}}this._setZoom(z,p);};
n.prototype._zoomToFit=function(){this._$Container.css({width:"",height:"",margin:"0px"});this._oCanvas.style.maxWidth="100%";this._oCanvas.style.maxHeight="100%";this._oCanvas.style.transform="";var z=this._oCanvas.getBoundingClientRect().width*100/this._oCanvas.width;this._oCanvas.style.maxWidth="";this._oCanvas.style.maxHeight="";this._$Container.css({margin:"auto"});this.zoom(z);};
n.prototype._setCanvasSize=function(w,H){var i=this._getLastImg();this._oCanvas.width=w;this._oCanvas.height=H;this._oContext.drawImage(i,0,0,i.width,i.height,0,0,w,H);this._refreshContainerSize();};
n.prototype._setRotation=function(i){var p=this._getLastImg(),s,t,u;s=this._degToRad(i);this._oCanvas.width=Math.abs(p.width*Math.cos(s))+Math.abs(p.height*Math.sin(s));this._oCanvas.height=Math.abs(p.width*Math.sin(s))+Math.abs(p.height*Math.cos(s));t=this._limitCanvasSize(this._oCanvas.width,this._oCanvas.height);u=t.width/this._oCanvas.width;this._oCanvas.width=t.width;this._oCanvas.height=t.height;this._oContext.save();this._oContext.translate(this._oCanvas.width/2,this._oCanvas.height/2);this._oContext.rotate(s);this._oContext.translate(-this._oCanvas.width/2,-this._oCanvas.height/2);this._oContext.drawImage(p,0,0,p.width,p.height,Math.round((this._oCanvas.width-p.width*u)/2),Math.round((this._oCanvas.height-p.height*u)/2),p.width*u,p.height*u);this._oContext.restore();this._refreshContainerSize();};
n.prototype._flipVertical=function(){this._flip(true,false);};
n.prototype._flipHorizontal=function(){this._flip(false,true);};
n.prototype._flip=function(v,H){var i=this._getLastImg(),t=document.createElement("canvas"),p=t.getContext("2d");t.width=i.width;t.height=i.height;p.translate(H?i.width:0,v?i.height:0);p.scale(H?-1:1,v?-1:1);p.drawImage(i,0,0);this._oContext.clearRect(0,0,this._oCanvas.width,this._oCanvas.height);this._oContext.drawImage(t,0,0);};
n.prototype._transposeViewportCoordsToImageCoords=function(x,y,w,H){if(!this._isReady()){return{x:0,y:0,width:0,height:0};}var i=this._oCanvas.getBoundingClientRect(),p=this._oCanvas.width/i.width,s=this._oCanvas.height/i.height;return{x:x*p,y:y*s,width:w*p,height:H*s};};
n.prototype._transposeImageCoordsToViewportCoords=function(x,y,w,H){if(!this._isReady()){return{x:0,y:0,width:0,height:0};}var i=this._oCanvas.getBoundingClientRect(),p=this._oCanvas.width/i.width,s=this._oCanvas.height/i.height;return{x:x/p,y:y/s,width:w/p,height:H/s};};
n.prototype._transposeImageCoordsPxToPercent=function(x,y,w,H){return{x:x*100/this._oCanvas.width,y:y*100/this._oCanvas.height,width:w*100/this._oCanvas.width,height:H*100/this._oCanvas.height};};
n.prototype._transposePercentToImageCoordsPx=function(x,y,w,H){return{x:x*this._oCanvas.width/100,y:y*this._oCanvas.height/100,width:w*this._oCanvas.width/100,height:H*this._oCanvas.height/100};};
n.prototype._transposeViewPortPxToPercent=function(x,y,w,H){var i=this._$Container[0].getBoundingClientRect();return{x:x*100/i.width,y:y*100/i.height,width:w*100/i.width,height:H*100/i.height};};
n.prototype._updateCropAreaHandlerColors=function(){var s;if(!this.$().find(".sapSuiteUiCommonsImageEditorCropInnerRectangle").is(":visible")){return;}var t=this;this.$().find(".sapSuiteUiCommonsImageEditorCropInnerRectangle .sapSuiteUiCommonsImageEditorHandlerContainer").each(function(){var $=q(this);if(!$.is(":visible")||$.width()===0||$.height()===0){return;}s=t._getContrastColorForElement(this);for(var i=0;i<this.childElementCount;i++){this.children[i].style.background=s;}});};
n.prototype._getContrastColorForElement=function(E){var i=this._oCanvas.getBoundingClientRect(),p=E.getBoundingClientRect(),s=this._transposeViewportCoordsToImageCoords(p.left-i.left,p.top-i.top,p.width,p.height),t=this._getContrastColorForRectangleArea(s.x,s.y,s.width,s.height);return t;};
n.prototype._getContrastColorForRectangleArea=function(x,y,w,H){var A=this._getRectangleAreaAvg(x,y,w,H);return A>0.5*0.5?"white":"black";};
n.prototype._getRectangleAreaAvg=function(x,y,w,H){if(w===0||H===0){return 0;}var p=this._oContext.getImageData(x,y,Math.ceil(w),Math.ceil(H)).data,s=0,t,G,B,A;for(var i=0;i<p.length;i+=4){t=1-(p[i]/255);G=1-(p[i+1]/255);B=1-(p[i+2]/255);A=p[i+3]/255;s+=(0.2126*t*t+0.7152*G*G+0.0722*B*B)*A;}return s/(p.length/4);};
n.prototype._updateResizableCropAspectRatio=function(){var B=this.$().find(".sapSuiteUiCommonsImageEditorCropInnerRectangle"),K=this.getKeepCropAspectRatio();this._updateResizableAspectRatio(B,K);};
n.prototype._updateResizableResizeAspectRatio=function(){var K=this.getKeepResizeAspectRatio();this._updateResizableAspectRatio(this._$Container,K);};
n.prototype._updateResizableAspectRatio=function($,K){if($&&$.data("uiResizable")){$.resizable("option","aspectRatio",K).data("uiResizable")._aspectRatio=K;}};
n.prototype._applyRectangleCrop=function(p){var i=this.$().find(".sapSuiteUiCommonsImageEditorCropInnerRectangle")[0].getBoundingClientRect(),s=this._oCanvas.getBoundingClientRect(),t=this._transposeViewportCoordsToImageCoords(i.left-s.left,i.top-s.top,i.width,i.height);this.rectangleCrop(t.x,t.y,t.width,t.height,p);};
n.prototype._rectangleCrop=function(x,y,w,H){var t=document.createElement("canvas");t.width=Math.round(w);t.height=Math.round(H);t.getContext("2d").drawImage(this._oCanvas,x,y,w,H,0,0,w,H);this._drawImage(t);this._refreshCropContainerSize();};
n.prototype._applyEllipseCrop=function(p){var i,s,t;i=this.$().find(".sapSuiteUiCommonsImageEditorCropInnerRectangle")[0].getBoundingClientRect();s=this._oCanvas.getBoundingClientRect();t=this._transposeViewportCoordsToImageCoords(i.left-s.left,i.top-s.top,i.width,i.height);this.ellipseCrop(t.width/2+t.x,t.height/2+t.y,t.width/2,t.height/2,p);};
n.prototype._ellipseCrop=function(x,y,X,Y){var t=document.createElement("canvas"),i=X*2,p=Y*2,s=t.getContext("2d");t.width=Math.round(i);t.height=Math.round(p);if(!s.ellipse){s.save();s.translate(X,Y);s.scale(X,Y);s.arc(0,0,1,0,360);s.restore();}else{s.ellipse(X,Y,X,Y,0,0,2*Math.PI);}s.fill();s.globalCompositeOperation="source-in";s.drawImage(this._oCanvas,x-X,y-Y,i,p,0,0,i,p);this._drawImage(t);this._refreshCropContainerSize();};
n.prototype._applyCustomShapeCrop=function(p){var i,s,t;i=this.$().find(".sapSuiteUiCommonsImageEditorCropInnerRectangle")[0].getBoundingClientRect();s=this._oCanvas.getBoundingClientRect();t=this._transposeViewportCoordsToImageCoords(i.left-s.left,i.top-s.top,i.width,i.height);this.customShapeCrop(t.x,t.y,t.width,t.height,p);};
n.prototype._customShapeCrop=function(x,y,w,H){var t=document.createElement("canvas"),i=t.getContext("2d");t.width=w;t.height=H;i.drawImage(this._oCustomShapeImg,0,0,w,H);i.globalCompositeOperation="source-in";i.drawImage(this._oCanvas,x,y,w,H,0,0,w,H);i.globalCompositeOperation="source-over";this._drawImage(t);this._refreshCropContainerSize();};
n.prototype._getFinalisedCanvas=function(){var w=this.getWidth(),H=this.getHeight(),i,t,p;i=this._getLastImg().getContext("2d").getImageData(0,0,w,H);this._applyFilterHistory(i);t=document.createElement("canvas");p=t.getContext("2d");t.width=w;t.height=H;p.putImageData(i,0,0);return t;};
n.prototype._applyFilterHistory=function(p){var s;for(var i=this._aHistory.length-1;i>=this._iHistoryIndex;i--){if(this._aHistory[i].isA("sap.suite.ui.commons.imageeditor.FilterHistoryItem")){s=this._aHistory[i];h[s.getType()](p,s.getValue()/100);}}};
n.prototype._applyFilterItem=function(i){var p=this._getLastImg(),s=p.getContext("2d"),t=s.getImageData(0,0,p.width,p.height);h[i.getType()](t,i.getValue()/100);this._oContext.putImageData(t,0,0);};
n.prototype._updateFilters=function(){var s="",H;function p(t){return t.getType()+"("+t.getValue()+t.getUnit()+") ";}if(this._needsManualFilter()){if(this._isReady()){if(this._oPreview&&this._oPreview.isA("sap.suite.ui.commons.imageeditor.FilterHistoryItem")){this._applyFilterItem(this._oPreview);}}}else{for(var i=this._aHistory.length-1;i>=this._iHistoryIndex;i--){H=this._aHistory[i];if(H.isA("sap.suite.ui.commons.imageeditor.FilterHistoryItem")){s+=p(H);}}if(this._oPreview&&this._oPreview.isA("sap.suite.ui.commons.imageeditor.FilterHistoryItem")){s+=p(this._oPreview);}this._oCanvas.style.filter=s.trim();}};
n.prototype._needsManualFilter=function(){return D.browser.msie||D.os.name===D.os.OS.IOS;};
n.prototype._isMobileSafari=function(){return D.os.name===D.os.OS.IOS&&D.browser.name===D.browser.BROWSER.SAFARI;};
n.prototype._reset=function(){this.$().addClass("sapSuiteUiCommonsImageEditorEmpty");this._aHistory=[];this._iHistoryIndex=0;this._oPreview=null;this._bImageLoaded=false;this._oCropArea=null;this._oCanvas.width=0;this._oCanvas.height=0;this._oOriginalBlob=null;this._sOriginalFileName=null;this._sOriginalFileType=null;this._iExifRotation=null;this._bExifFlip=false;this._updateFilters();this._refreshContainerSize();};
n.prototype._drawImage=function(s){var i=this._limitCanvasSize(s.width,s.height);this._oCanvas.width=i.width;this._oCanvas.height=i.height;this._oContext.drawImage(s,0,0,s.width,s.height,0,0,this._oCanvas.width,this._oCanvas.height);this._refreshContainerSize();};
n.prototype._limitCanvasSize=function(w,H,s){var i=this._isMobileSafari()?n.LIMITS.MAX_SAFARI_MOBILE_CANVAS_SIZE:n.LIMITS.MAX_CANVAS_SIZE,N=w,p=H,t;if(w*H>i){t=Math.sqrt(i/(w*H));N=Math.floor(w*t);p=Math.floor(p*N/w);if(!s){this.fireSizeChanged({width:N,height:p,originalWidth:w,originalHeight:H});b.show(r.getText("IMGEDITOR_SCALE_WARNING",[N,p,w,H]),{duration:6000});}}return{width:N,height:p};};
n.prototype._degToRad=function(i){return i*Math.PI/180;};
n.prototype._RadToDeg=function(i){return i*180/Math.PI;};
n.prototype._getCropAreaDragIcon=function(){if(!this._cropAreaDragIcon){this._cropAreaDragIcon=new I({src:"sap-icon://move",useIconTooltip:false});}return this._cropAreaDragIcon;};
return n;});
sap.ui.predefine('sap/suite/ui/commons/imageeditor/ImageEditorContainer',["sap/ui/thirdparty/jquery","sap/ui/core/Control","sap/suite/ui/commons/library","sap/ui/core/library","sap/m/library","./ImageEditor","sap/m/OverflowToolbar","sap/m/OverflowToolbarButton","sap/m/OverflowToolbarToggleButton","sap/m/OverflowToolbarLayoutData","sap/m/ToggleButton","sap/m/ToolbarSeparator","sap/m/ToolbarSpacer","sap/m/Label","sap/m/Slider","sap/m/Input","sap/m/CheckBox","sap/ui/model/json/JSONModel","sap/m/MenuButton","sap/m/SegmentedButton","sap/m/SegmentedButtonItem","sap/m/Select","sap/m/Button","sap/ui/core/Item","sap/m/ResponsivePopover","sap/m/List","sap/m/StandardListItem","sap/m/CustomListItem","sap/m/FlexBox","sap/m/FlexItemData","sap/m/IconTabBar","sap/m/IconTabFilter","sap/ui/core/Icon","sap/ui/core/HTML","sap/m/Switch","sap/suite/ui/commons/ControlProxy","sap/base/Log","sap/ui/unified/FileUploader","sap/ui/base/ManagedObjectObserver","sap/ui/core/ResizeHandler","./ImageEditorContainerRenderer"],function(q,C,l,a,M,I,O,b,c,d,T,e,f,L,S,g,h,J,j,k,m,n,B,o,R,p,r,s,F,t,u,v,w,H,x,y,z,A,D,E){"use strict";var G=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var K=M.InputType,N=M.ListType,P=l.ImageEditorMode,Q=l.ImageEditorContainerMode,U=l.ImageEditorContainerButton,V=a.ValueState,W=M.ListMode,X=M.ButtonType,Y=M.FlexDirection,Z=M.FlexRendertype,$=M.FlexJustifyContent,_=M.FlexAlignItems,a1=M.IconTabDensityMode,b1=M.BackgroundDesign,c1=M.SwitchType,d1=a.TextAlign,e1=Object.freeze({WIDTH:{min:I.LIMITS.WIDTH_MIN,max:I.LIMITS.WIDTH_MAX,callback:"_setWidth"},HEIGHT:{min:I.LIMITS.HEIGHT_MIN,max:I.LIMITS.HEIGHT_MAX,callback:"_setHeight"},ROTATION:{min:I.LIMITS.ROTATION_MIN,max:I.LIMITS.ROTATION_MAX,callback:"_rotate"},FILTER:{callback:"_applyCurrentFilter"}}),f1=Object.freeze({CUSTOMSIZE:"sap-icon://write-new-document",ORIGINALSIZE:"sap-icon://table-view",ROTATELEFT:"sap-icon://response",ROTATERIGHT:"sap-icon://forward",CROPRECTANGLE:"sap-icon://color-fill",CROPELLIPSE:"sap-icon://circle-task-2",CROPCUSTOMSHAPE:"sap-icon://add-favorite",TRANSFORM:"sap-icon://draw-rectangle",FILTER:"sap-icon://palette",CROP:"sap-icon://crop",UNDO:"sap-icon://undo",DROPDOWN:"sap-icon://slim-arrow-down",ZONES:"sap-icon://tag",LOCK:"sap-icon://locked",RESET:"sap-icon://reset",FLIPVERTICAL:"sap-icon://resize-vertical",FLIPHORIZONTAL:"sap-icon://resize-horizontal",RELATIVE:"sap-icon://resize",ZOOMIN:"sap-icon://zoom-in",ZOOMOUT:"sap-icon://zoom-out",ZOOMFIT:"sap-icon://popup-window"});
var g1=C.extend("sap.suite.ui.commons.imageeditor.ImageEditorContainer",{metadata:{library:"sap.suite.ui.commons",properties:{mode:{type:"sap.suite.ui.commons.ImageEditorContainerMode",defaultValue:Q.Filter},enabledButtons:{type:"sap.suite.ui.commons.ImageEditorContainerButton[]",defaultValue:[U.Filter,U.Transform,U.Crop]}},defaultAggregation:"imageEditor",aggregations:{imageEditor:{type:"sap.suite.ui.commons.imageeditor.ImageEditor",multiple:false,singularName:"imageEditor"},customToolbarControls:{type:"sap.ui.core.Control",multiple:true,singularName:"customToolbarControl"},customResizeItems:{type:"sap.suite.ui.commons.imageeditor.CustomSizeItem",multiple:true,singularName:"customResizeItem"},customRectangleCropItems:{type:"sap.suite.ui.commons.imageeditor.CustomSizeItem",multiple:true,singularName:"customRectangleCropItem"},customEllipseCropItems:{type:"sap.suite.ui.commons.imageeditor.CustomSizeItem",multiple:true,singularName:"customEllipseCropItem"}}}});
var h1=Object.freeze({NUM_KEPT_ITEMS:2});
g1.prototype.init=function(){var i={enabled:false,mode:null,zoom:100,transform:{keepAspectRatio:true,width:null,height:null,widthValueState:V.None,widthValueStateText:null,heightValueState:V.None,heightValueStateText:null,rotate:0,rotateValueState:V.None,rotateValueStateText:null,selectedTypeKey:"Resize",flipVertical:false,flipHorizontal:false,resizes:[{key:"custom",text:G.getText("IMGEDITOR_CUSTOM_SIZE"),icon:f1.CUSTOMSIZE,unlockRatio:true},{key:"original",text:G.getText("IMGEDITOR_ORIGINAL_SIZE"),icon:f1.ORIGINALSIZE}],rotates:[{key:"90left",text:G.getText("IMGEDITOR_ROTATE_90LEFT"),rotate:-90,icon:f1.ROTATELEFT},{key:"90right",text:G.getText("IMGEDITOR_ROTATE_90RIGHT"),rotate:90,icon:f1.ROTATERIGHT},{key:"45left",text:G.getText("IMGEDITOR_ROTATE_45LEFT"),rotate:-45,icon:f1.ROTATELEFT},{key:"45right",text:G.getText("IMGEDITOR_ROTATE_45RIGHT"),rotate:45,icon:f1.ROTATERIGHT}],flips:[{key:"vertical",text:G.getText("IMGEDITOR_FLIP_VERTICAL"),icon:f1.FLIPVERTICAL,flipVertical:true,flipHorizontal:false},{key:"horizontal",text:G.getText("IMGEDITOR_FLIP_HORIZONTAL"),icon:f1.FLIPHORIZONTAL,flipVertical:false,flipHorizontal:true}]},crop:{scaleCropArea:false,customShapeLoaded:false,zoom:100,zoomValueState:V.None,zoomValueStateText:null,width:null,widthValueState:V.None,widthValueStateText:null,height:null,heightValueState:V.None,heightValueStateText:null,keepAspectRatio:true,selectedTypeKey:"Rectangle",selectedType:null,enabled:true,areaRectangle:{x:10,y:10,width:80,height:80},types:[{key:"Rectangle",text:"\ue17b",icon:f1.CROPRECTANGLE,apply:"applyVisibleCrop"},{key:"Ellipse",text:"\ue255",icon:f1.CROPELLIPSE,apply:"applyVisibleCrop"},{key:"CustomShape",text:"\ue057",icon:f1.CROPCUSTOMSHAPE,apply:"applyVisibleCrop"}],ratiosRectangle:[{key:"custom",text:G.getText("IMGEDITOR_CUSTOM_SIZE"),icon:f1.CUSTOMSIZE,unlockRatio:true,relative:true},{key:"original",text:G.getText("IMGEDITOR_CROP_RATIO_ORIGINAL"),width:null,height:null,icon:f1.ORIGINALSIZE,relative:true}],ratiosCircle:[{key:"custom",text:G.getText("IMGEDITOR_CUSTOM_SIZE"),icon:f1.CUSTOMSIZE,unlockRatio:true,relative:true},{key:"original",text:G.getText("IMGEDITOR_CROP_RATIO_ORIGINAL"),width:null,height:null,icon:f1.ORIGINALSIZE,relative:true}],ratiosCustomShape:[{key:"custom",text:G.getText("IMGEDITOR_CUSTOM_SIZE"),icon:f1.CUSTOMSIZE,unlockRatio:true,relative:true},{key:"original",text:G.getText("IMGEDITOR_CROP_RATIO_ORIGINAL"),callback:"_setCustomShapeCropAreaRatio",icon:f1.ORIGINALSIZE,relative:true}]},filter:{filterValueState:V.None,filterValueStateText:null,selectedFilter:null,filters:[{text:G.getText("IMGEDITOR_FILTER_BRIGHTNESS"),type:"brightness",value:100,defaultValue:100,unit:"%",min:I.LIMITS.BRIGHTNESS_MIN,max:I.LIMITS.BRIGHTNESS_MAX},{text:G.getText("IMGEDITOR_FILTER_CONTRAST"),type:"contrast",value:100,defaultValue:100,unit:"%",min:I.LIMITS.CONTRAST_MIN,max:I.LIMITS.CONTRAST_MAX},{text:G.getText("IMGEDITOR_FILTER_SATURATION"),type:"saturate",value:100,defaultValue:100,unit:"%",min:I.LIMITS.SATURATE_MIN,max:I.LIMITS.SATURATE_MAX},{text:G.getText("IMGEDITOR_FILTER_GRAYSCALE"),type:"grayscale",value:0,defaultValue:0,unit:"%",min:I.LIMITS.GRAYSCALE_MIN,max:I.LIMITS.GRAYSCALE_MAX},{text:G.getText("IMGEDITOR_FILTER_INVERT"),type:"invert",value:0,defaultValue:0,unit:"%",min:I.LIMITS.INVERT_MIN,max:I.LIMITS.INVERT_MAX},{text:G.getText("IMGEDITOR_FILTER_SEPIA"),type:"sepia",value:0,defaultValue:0,unit:"%",min:I.LIMITS.SEPIA_MIN,max:I.LIMITS.SEPIA_MAX}]},history:[],historyIndex:0};this._bFirstTimeRendered=true;this._oObserver=new D(this._onManagedObjectChange.bind(this));this._oObserver.observe(this,{properties:["enabledButtons"],aggregations:["customToolbarControls"]});this._oModel=new J(i);this._oThumbnailCanvas=document.createElement("canvas");this._updateToolbarsContent();this["_setMode"+this.getMode()]();};
g1.prototype.onBeforeRendering=function(){if(this._sResizeHandlerId){E.deregister(this._sResizeHandlerId);}};
g1.prototype.onAfterRendering=function(){var i=this;this._bIsSmallSize=this._isSmallSize();function i1(){sap.ui.getCore().detachThemeChanged(i1);i._zoomToFit();}if(this._bFirstTimeRendered&&this.getImageEditor()){this._bFirstTimeRendered=false;if(sap.ui.getCore().isThemeApplied()){this._zoomToFit();}else{sap.ui.getCore().attachThemeChanged(i1);}}this._sResizeHandlerId=E.register(this,this._onResize.bind(this));};
g1.prototype.onExit=function(){if(this._sResizeHandlerId){E.deregister(this._sResizeHandlerId);}};
g1.prototype._onResize=function(){var i=this._isSmallSize();if(this._bIsSmallSize!==i){this._bIsSmallSize=i;this.rerender();}};
g1.prototype._isSmallSize=function(){var i=(sap.m.ScreenSizes&&sap.m.ScreenSizes.table)||600;return this.$()[0]&&this.$().width()<i;};
g1.prototype._zoomToFit=function(){var i=this.getImageEditor();if(i&&i._isReady()&&this.getDomRef()){i.zoomToFit();this._oModel.setProperty("/zoom",i.getZoomLevel());this._refreshCropAreaSize();}};
g1.prototype.exit=function(){this._oObserver.disconnect();this._oObserver.destroy();};
g1.prototype.setMode=function(i){this.setProperty("mode",i,true);this["_setMode"+this.getMode()]();return this;};
g1.prototype.setImageEditor=function(i){this._detachEditorEvents(this.getImageEditor());this.setAggregation("imageEditor",i);this._attachEditorEvents(i);if(i&&i.getLoaded()){this._onImageLoaded();}if(i&&i.getCustomShapeLoaded()){this._onCustomShapeLoaded();}return this;};
g1.prototype.destroyImageEditor=function(){this._detachEditorEvents(this.getImageEditor());this.destroyAggregation("imageEditor");this._oModel.setProperty("/enabled",false);return this;};
g1.prototype.getToolbar=function(){return this._getHeaderToolbar();};
g1.prototype.getToolbarIds=function(){return{filter:this.getId()+"-filterButton",crop:this.getId()+"-cropButton",transform:this.getId()+"-transformButton",undo:this.getId()+"-undoButton",history:this.getId()+"-historyButton",zoomIn:this.getId()+"-zoominButton",zoomOut:this.getId()+"-zoomoutButton",zoomToFit:this.getId()+"-zoomToFitButton",zoomLabel:this.getId()+"-zoomLabel",separator:this.getId()+"-separator"};};
g1.prototype.getMobileHeaderToolbar=function(){return this._getMobileHeaderToolbar();};
g1.prototype.getMobileZoomToolbar=function(){return this._getMobileZoomToolbar();};
g1.prototype.getMobileZoomToolbarIds=function(){return{zoomIn:this.getId()+"-mobileZoominButton",zoomLabel:this.getId()+"-mobileZoomLabel",zoomOut:this.getId()+"-mobilezoomoutButton",zoomToFit:this.getId()+"-mobileZoomToFitButton",scaleSwitch:this.getId()+"-mobileScaleSwitch",scaleLabel:this.getId()+"-mobileScaleLabel"};};
g1.prototype.getMobileFooterToolbar=function(){return this._getMobileFooterToolbar();};
g1.prototype.getMobileFooterToolbarIds=function(){return{filter:this.getId()+"-mobileFilterButton",crop:this.getId()+"-mobileCropButton",transform:this.getId()+"-mobileTransformButton",undo:this.getId()+"-mobileUndoButton",history:this.getId()+"-mobileHistoryButton",apply:this.getId()+"-mobileApplyButton"};};
g1.prototype._attachEditorEvents=function(i){if(!i){return;}i.attachLoaded(this._onImageLoaded,this);i.attachCustomShapeLoaded(this._onCustomShapeLoaded,this);i.attachError(this._onImageError,this);i.attachCropAreaChanged(this._onCropAreaChange,this);i.attachHistoryChanged(this._onHistoryChange,this);i.attachSizeChanged(this._onSizeChange,this);i.attachZoomChanged(this._onZoomChange,this);};
g1.prototype._detachEditorEvents=function(i){if(!i){return;}i.detachLoaded(this._onImageLoaded,this);i.detachCustomShapeLoaded(this._onCustomShapeLoaded,this);i.detachError(this._onImageError,this);i.detachCropAreaChanged(this._onCropAreaChange,this);i.detachHistoryChanged(this._onHistoryChange,this);i.detachSizeChanged(this._onSizeChange,this);i.detachZoomChanged(this._onZoomChange,this);};
g1.prototype._onManagedObjectChange=function(i){if(i.object===this._oMobileHeaderToolbar){this._oMobileHeaderToolbar.setVisible(i.object.getContent().length>0);}else if(i.object===this){this._updateToolbarsContent();}};
g1.prototype._refreshImageSize=function(){if(!this.getImageEditor()||!this.getImageEditor().getLoaded()){return;}var i=this.getImageEditor().getWidth(),i1=this.getImageEditor().getHeight();this._oModel.setProperty("/transform/resizes/1/width",i);this._oModel.setProperty("/transform/resizes/1/height",i1);this._oModel.setProperty("/crop/ratiosRectangle/1/width",i);this._oModel.setProperty("/crop/ratiosRectangle/1/height",i1);this._oModel.setProperty("/crop/ratiosCircle/1/width",i);this._oModel.setProperty("/crop/ratiosCircle/1/height",i1);this._updateCurrentSize(i,i1);};
g1.prototype._refreshCropAreaSize=function(){var i=this.getImageEditor().getCropArea();if(!i){return;}this._updateCropSize(Math.round(i.width),Math.round(i.height));};
g1.prototype._onImageLoaded=function(){var i=this.getImageEditor();this._resetValueStates();this._oModel.setProperty("/enabled",!!i.getSrc());if(!i.getSrc()){this._changeOptionsPanelContent();return;}this["_setMode"+this.getMode()]();this._refreshImageSize();this._oModel.setProperty("/history",[]);this._oModel.setProperty("/historyIndex",0);this._zoomToFit();this._updateOrigThumbnail();this._resetCurrentPanel();};
g1.prototype._onCustomShapeLoaded=function(){var i=this.getImageEditor();if(i.getCustomShapeSrc()&&i.getLoaded()&&i.getMode()===P.CropCustomShape){this._setCustomShapeCropAreaRatio();}this._oModel.setProperty("/crop/customShapeLoaded",!!i.getCustomShapeSrc());};
g1.prototype._onImageError=function(){this._resetValueStates();this._changeOptionsPanelContent();this._oModel.setProperty("/enabled",false);};
g1.prototype._onCropAreaChange=function(i){this._resetValueStates();this._updateCropSize(Math.round(i.getParameter("cropArea").width),Math.round(i.getParameter("cropArea").height));};
g1.prototype._onHistoryChange=function(i){var i1=i.getParameter("history"),j1=i.getParameter("index");this._resetValueStates();this._refreshImageSize();i1.push({noChange:"NoChange"});this._oModel.setProperty("/history",i1);this._oModel.setProperty("/historyIndex",j1);};
g1.prototype._onSizeChange=function(i){this._resetValueStates();this._updateCurrentSize(i.getParameter("width"),i.getParameter("height"));this._selectResizeCustomSizeItem(this.getImageEditor().getKeepResizeAspectRatio());};
g1.prototype._onZoomChange=function(i){var i1=i.getParameter("zoom");this._oModel.setProperty("/zoom",i1);this._refreshCropAreaSize();};
g1.prototype._updateCropSize=function(i,i1){this._oModel.setProperty("/crop/width",i);this._oModel.setProperty("/crop/height",i1);};
g1.prototype._updateCurrentSize=function(i,i1){this._oModel.setProperty("/transform/width",i);this._oModel.setProperty("/transform/height",i1);};
g1.prototype._updateOrigThumbnail=function(){var i=this.$("origThumbnail"),i1=this.getImageEditor(),j1,k1,l1=this._oThumbnailCanvas.getContext("2d");if(i1.getWidth()>=i1.getHeight()){j1=300;k1=Math.round(i1.getHeight()*j1/i1.getWidth());}else{k1=300;j1=Math.round(i1.getWidth()*k1/i1.getHeight());}this._oThumbnailCanvas.width=j1;this._oThumbnailCanvas.height=k1;l1.clearRect(0,0,j1,k1);l1.drawImage(i1._oCanvas,0,0,j1,k1);i.attr({"href":this._oThumbnailCanvas.toDataURL()});if(i[0]){i[0].setAttribute("viewBox","0 0 "+j1+" "+k1);}};
g1.prototype._getHeaderToolbar=function(){if(!this._oHeaderToolbar){this._oHeaderToolbar=new O({enabled:"{/enabled}"}).addStyleClass("sapSuiteUiCommonsImageEditorContainerHeaderToolbar");this._oHeaderToolbar.setModel(this._oModel);this.addDependent(this._oHeaderToolbar);}return this._oHeaderToolbar;};
g1.prototype._updateToolbarsContent=function(){var i1=this._getHeaderToolbar(),j1=this._getMobileHeaderToolbar(),k1=this._getMobileFooterToolbar(),l1=this.getEnabledButtons(),i;i1.removeAllContent();j1.removeAllContent();k1.removeAllContent();this._getHistoryItems().forEach(function(m1){i1.addContent(m1);});this._getMobileHistoryItems().forEach(function(m1){k1.addContent(m1);});this._getZoomItems().forEach(function(m1){i1.addContent(m1);});i1.addContent(this._getToolbarSeparator());for(i=0;i<l1.length;i++){switch(l1[i]){case U.Filter:{i1.addContent(this._getFilterButton());k1.addContent(this._getMobileFilterButton());break;}case U.Crop:{i1.addContent(this._getCropButton());k1.addContent(this._getMobileCropButton());break;}case U.Transform:{i1.addContent(this._getTransformButton());k1.addContent(this._getMobileTransformButton());break;}case U.History:{break;}default:break;}}i1.addContent(this._getToolbarSpacer());k1.addContent(this._getMobileFooterToolbarSpacer());k1.addContent(this._getMobileApplyButton());if(this.getCustomToolbarControls().length>0){j1.addContent(this._getMobileHeaderToolbarSpacer());}this.getCustomToolbarControls().forEach(function(m1){var n1=new y(),o1=new y();this.addDependent(n1);n1.setAssociation("control",m1);i1.addContent(n1);this.addDependent(o1);o1.setAssociation("control",m1);j1.addContent(o1);},this);};
g1.prototype._getToolbarSpacer=function(){if(!this._oSpacer){this._oSpacer=new f({id:this.getId()+"-spacer"});this.addDependent(this._oSpacer);}return this._oSpacer;};
g1.prototype._getMobileHeaderToolbarSpacer=function(){if(!this._oMobileHeaderSpacer){this._oMobileHeaderSpacer=new f({id:this.getId()+"-mobileSpacer"});this.addDependent(this._oMobileHeaderSpacer);}return this._oMobileHeaderSpacer;};
g1.prototype._getMobileFooterToolbarSpacer=function(){if(!this._oMobileFooterSpacer){this._oMobileFooterSpacer=new f({id:this.getId()+"-mobileFooterSpacer"});this.addDependent(this._oMobileFooterSpacer);}return this._oMobileFooterSpacer;};
g1.prototype._getMobileHeaderToolbar=function(){if(!this._oMobileHeaderToolbar){this._oMobileHeaderToolbar=new O({enabled:"{/enabled}",visible:false}).addStyleClass("sapSuiteUiCommonsImageEditorContainerMobileToolbar");this.addDependent(this._oMobileHeaderToolbar);this._oObserver.observe(this._oMobileHeaderToolbar,{aggregations:["content"]});}return this._oMobileHeaderToolbar;};
g1.prototype._getMobileZoomToolbar=function(){if(!this._oMobileZoomToolbar){this._oMobileZoomToolbar=new O({enabled:"{/enabled}",content:[this._getMobileZoomInButton(),this._getMobileZoomLabel(),this._getMobileZoomOutButton(),this._getMobileZoomToFitButton(),this._getMobileScaleSwitch(),this._getMobileScaleLabel()]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerMobileToolbar");this._oMobileZoomToolbar.setModel(this._oModel);this.addDependent(this._oMobileZoomToolbar);}return this._oMobileZoomToolbar;};
g1.prototype._getMobileFooterToolbar=function(){if(!this._oMobileFooterToolbar){this._oMobileFooterToolbar=new O({enabled:"{/enabled}"}).addStyleClass("sapSuiteUiCommonsImageEditorContainerMobileToolbar");this._oMobileFooterToolbar.setModel(this._oModel);this.addDependent(this._oMobileFooterToolbar);if(this._oMobileFooterToolbar._applyContextClassFor){this._oMobileFooterToolbar._applyContextClassFor("footer");}else{z.warning("ImageEditorContainer: _applyContextClassFor method doesn't exist, footer look is not applied on mobile footer toolbar");}}return this._oMobileFooterToolbar;};
g1.prototype._getHistoryPopover=function(){var i=this;if(!this._oHistoryPopover){this._oHistoryPopover=new R({title:{path:"/history",formatter:function(i1){return G.getText("IMGEDITOR_HISTORY_TITLE",String(i1.length-1));}},endButton:new B({text:G.getText("IMGEDITOR_HISTORY_CLOSE"),press:function(){i._oHistoryPopover.close();}}),afterOpen:function(){var i1=i._oModel.getProperty("/historyIndex"),j1=i._oHistoryList.getItems()[i1];i._oHistoryList.setSelectedItem(j1);j1.focus();}});this._oHistoryList=new p({mode:W.SingleSelectMaster,selectionChange:function(i1){var j1=i1.getParameter("listItem"),k1=j1.getParent().indexOfItem(j1);i._jumpToHistory(k1);},items:{path:"/history",factory:this._historyItemFactory.bind(this)}});this._oHistoryPopover.setModel(this._oModel);this._oHistoryPopover.addContent(this._oHistoryList);this.addDependent(this._oHistoryPopover);}return this._oHistoryPopover;};
g1.prototype._historyItemFactory=function(i,i1){var j1=this._oModel.getProperty("/history").indexOf(i1.getProperty()),k1=i1.getProperty(),l1,m1,n1,o1;switch(k1.noChange||k1.getMetadata().getName()){case"sap.suite.ui.commons.imageeditor.RotateHistoryItem":{m1=G.getText("IMGEDITOR_ROTATE");n1=k1.getDegrees();o1=f1.TRANSFORM;break;}case"sap.suite.ui.commons.imageeditor.ResizeHistoryItem":{m1=G.getText("IMGEDITOR_RESIZE");n1=G.getText("IMGEDITOR_HISTORY_TEXT",[k1.getOldWidth()+" x "+k1.getOldHeight(),k1.getWidth()+" x "+k1.getHeight()]);o1=f1.TRANSFORM;break;}case"sap.suite.ui.commons.imageeditor.FlipHistoryItem":{m1=G.getText("IMGEDITOR_FLIP");if(k1.getVertical()&&k1.getHorizontal()){n1=G.getText("IMGEDITOR_FLIP_BOTH");o1=f1.FLIPHORIZONTAL;}else{n1=k1.getVertical()?G.getText("IMGEDITOR_FLIP_VERTICAL"):G.getText("IMGEDITOR_FLIP_HORIZONTAL");o1=k1.getVertical()?f1.FLIPVERTICAL:f1.FLIPHORIZONTAL;}break;}case"sap.suite.ui.commons.imageeditor.FilterHistoryItem":{m1=k1.getType();m1=m1[0].toUpperCase()+m1.slice(1);n1=k1.getValue();o1=f1.FILTER;break;}case"sap.suite.ui.commons.imageeditor.CropRectangleHistoryItem":case"sap.suite.ui.commons.imageeditor.CropEllipseHistoryItem":case"sap.suite.ui.commons.imageeditor.CropCustomShapeHistoryItem":{m1=G.getText("IMGEDITOR_CROP");n1=G.getText("IMGEDITOR_HISTORY_TEXT",[k1.getOldWidth()+" x "+k1.getOldHeight(),k1.getWidth()+" x "+k1.getHeight()]);o1=f1.CROP;break;}case"NoChange":{m1=G.getText("IMGEDITOR_HISTORY_ORIGINAL");n1=G.getText("IMGEDITOR_HISTORY_ORIGINAL_TEXT");o1=f1.RESET;break;}default:{break;}}l1=new r({title:m1,description:n1,icon:o1,selected:{path:"/historyIndex",formatter:function(p1){return j1===p1;}}});return l1;};
g1.prototype._getHistoryItems=function(){if(!this._aHistoryItems){this._aHistoryItems=[this._getUndoButton(),this._getHistoryArrowButton()];}return this._aHistoryItems;};
g1.prototype._getMobileHistoryItems=function(){if(!this._aMobileHistoryItems){this._aMobileHistoryItems=[this._getMobileUndoButton(),this._getMobileHistoryArrowButton()];}return this._aMobileHistoryItems;};
g1.prototype._getUndoButton=function(){if(!this._oHistoryButton){this._oHistoryButton=this._createUndoButton(this.getId()+"-undoButton");this.addDependent(this._oHistoryButton);}return this._oHistoryButton;};
g1.prototype._getMobileUndoButton=function(){if(!this._oMobileHistoryButton){this._oMobileHistoryButton=this._createUndoButton(this.getId()+"-mobileUndoButton");this.addDependent(this._oMobileHistoryButton);}return this._oMobileHistoryButton;};
g1.prototype._createUndoButton=function(i){var i1=this;return new b({id:i,type:X.Transparent,icon:f1.UNDO,enabled:{parts:["/history","/historyIndex"],formatter:function(j1,k1){return j1.length>1&&k1<j1.length-1;}},press:function(){i1._undo();},tooltip:G.getText("IMGEDITOR_PANEL_UNDO")});};
g1.prototype._getHistoryArrowButton=function(){var i=this;if(!this._oHistoryArrowButton){this._oHistoryArrowButton=this._createHistoryArrowButton(this.getId()+"-historyButton",function(){i._resetValueStates();i._getHistoryPopover().openBy(i._oHistoryArrowButton);});this.addDependent(this._oHistoryArrowButton);}return this._oHistoryArrowButton;};
g1.prototype._getMobileHistoryArrowButton=function(){var i=this;if(!this._oMobileHistoryArrowButton){this._oMobileHistoryArrowButton=this._createHistoryArrowButton(this.getId()+"-mobileHistoryButton",function(){i._resetValueStates();i._getHistoryPopover().openBy(i._oMobileHistoryArrowButton);});this.addDependent(this._oMobileHistoryArrowButton);}return this._oMobileHistoryArrowButton;};
g1.prototype._createHistoryArrowButton=function(i,i1){return new b({id:i,type:X.Transparent,icon:f1.DROPDOWN,enabled:{path:"/history",formatter:function(j1){return j1.length>1;}},press:i1,tooltip:G.getText("IMGEDITOR_PANEL_HISTORY")});};
g1.prototype._getZoomItems=function(){if(!this._aZoomItems){this._aZoomItems=[this._getZoomInButton(),this._getZoomLabel(),this._getZoomOutButton(),this._getZoomToFitButton()];}return this._aZoomItems;};
g1.prototype._getZoomInButton=function(){if(!this._oZoomInButton){this._oZoomInButton=this._createZoomInButton(this.getId()+"-zoominButton");this.addDependent(this._oZoomInButton);}return this._oZoomInButton;};
g1.prototype._getMobileZoomInButton=function(){if(!this._oMobileZoomInButton){this._oMobileZoomInButton=this._createZoomInButton(this.getId()+"-mobileZoominButton");this.addDependent(this._oMobileZoomInButton);}return this._oMobileZoomInButton;};
g1.prototype._createZoomInButton=function(i){var i1=this;return new b({id:i,type:X.Transparent,icon:f1.ZOOMIN,press:function(){var j1=i1.getImageEditor();j1.zoomIn();i1._oModel.setProperty("/zoom",j1.getZoomLevel());i1._refreshCropAreaSize();},tooltip:G.getText("IMGEDITOR_PANEL_ZOOMIN")});};
g1.prototype._getZoomLabel=function(){if(!this._oZoomLabel){this._oZoomLabel=this._createZoomLabel(this.getId()+"-zoomLabel");this.addDependent(this._oZoomLabel);}return this._oZoomLabel;};
g1.prototype._getMobileZoomLabel=function(){if(!this._oMobileZoomLabel){this._oMobileZoomLabel=this._createZoomLabel(this.getId()+"-mobileZoomLabel");this.addDependent(this._oMobileZoomLabel);}return this._oMobileZoomLabel;};
g1.prototype._createZoomLabel=function(i){return new L({id:i,text:{path:"/zoom",formatter:function(i1){return i1+"%";}}});};
g1.prototype._getZoomOutButton=function(){if(!this._oZoomOutButton){this._oZoomOutButton=this._createZoomOutButton(this.getId()+"-zoomoutButton");this.addDependent(this._oZoomOutButton);}return this._oZoomOutButton;};
g1.prototype._getMobileZoomOutButton=function(){if(!this._oMobileZoomOutButton){this._oMobileZoomOutButton=this._createZoomOutButton(this.getId()+"-mobileZoomoutButton");this.addDependent(this._oMobileZoomOutButton);}return this._oMobileZoomOutButton;};
g1.prototype._createZoomOutButton=function(i){var i1=this;return new b({id:i,type:X.Transparent,icon:f1.ZOOMOUT,press:function(){var j1=i1.getImageEditor();j1.zoomOut();i1._oModel.setProperty("/zoom",j1.getZoomLevel());i1._refreshCropAreaSize();},tooltip:G.getText("IMGEDITOR_PANEL_ZOOMOUT")});};
g1.prototype._getZoomToFitButton=function(){if(!this._oZoomToFit){this._oZoomToFit=this._createZoomToFitButton(this.getId()+"-zoomToFitButton");this.addDependent(this._oZoomToFit);}return this._oZoomToFit;};
g1.prototype._getMobileZoomToFitButton=function(){if(!this._oMobileZoomToFit){this._oMobileZoomToFit=this._createZoomToFitButton(this.getId()+"-mobileZoomToFitButton");this.addDependent(this._oMobileZoomToFit);}return this._oMobileZoomToFit;};
g1.prototype._createZoomToFitButton=function(i){var i1=this;return new b({id:i,type:X.Transparent,icon:f1.ZOOMFIT,press:i1._zoomToFit.bind(i1),tooltip:G.getText("IMGEDITOR_PANEL_ZOOMTOFIT")});};
g1.prototype._getScaleSwitch=function(){if(!this._oScaleSwitch){this._oScaleSwitch=this._createScaleSwitch(this.getId()+"-scaleSwitch");this.addDependent(this._oScaleSwitch);}return this._oScaleSwitch;};
g1.prototype._getMobileScaleSwitch=function(){if(!this._oMobileScaleSwitch){this._oMobileScaleSwitch=this._createScaleSwitch(this.getId()+"-mobileScaleSwitch");this.addDependent(this._oMobileScaleSwitch);}return this._oMobileScaleSwitch;};
g1.prototype._createScaleSwitch=function(i){var i1=this;return new x({id:i,type:c1.AcceptReject,state:"{/crop/scaleCropArea}",visible:{path:"/mode",formatter:function(j1){return j1==="Crop";}},change:function(j1){i1._setScaleCropArea(j1.getParameter("state"));}}).addStyleClass("sapUiTinyMarginEnd");};
g1.prototype._getScaleLabel=function(){if(!this._oScaleLabel){this._oScaleLabel=this._createScaleLabel(this.getId()+"-scaleLabel");this.addDependent(this._oScaleLabel);}return this._oScaleLabel;};
g1.prototype._getMobileScaleLabel=function(){if(!this._oMobileScaleLabel){this._oMobileScaleLabel=this._createScaleLabel(this.getId()+"-mobileScaleLabel");this.addDependent(this._oMobileScaleLabel);}return this._oMobileScaleLabel;};
g1.prototype._createScaleLabel=function(i){return new L({text:G.getText("IMGEDITOR_CROP_SCALE"),labelFor:i,visible:{path:"/mode",formatter:function(i1){return i1==="Crop";}}});};
g1.prototype._getToolbarSeparator=function(){if(!this._oSeparator){this._oSeparator=new e({id:this.getId()+"-separator"});this.addDependent(this._oSeparator);}return this._oSeparator;};
g1.prototype._getTransformButton=function(){if(!this._oTransformButton){this._oTransformButton=this._createTransformButton(this.getId()+"-transformButton");this.addDependent(this._oTransformButton);}return this._oTransformButton;};
g1.prototype._getMobileTransformButton=function(){if(!this._oMobileTransformButton){this._oMobileTransformButton=this._createTransformButton(this.getId()+"-mobileTransformButton");this.addDependent(this._oMobileTransformButton);}return this._oMobileTransformButton;};
g1.prototype._createTransformButton=function(i){return new c({id:i,icon:f1.TRANSFORM,type:X.Transparent,pressed:{path:"/mode",formatter:function(i1){return i1===Q.Transform;}},enabled:{path:"/mode",formatter:function(i1){return i1!==Q.Transform;}},press:this._onButtonPress.bind(this,this._setModeTransform.bind(this)),tooltip:G.getText("IMGEDITOR_PANEL_TRANSFORM")});};
g1.prototype._getCropButton=function(){if(!this._oCropButton){this._oCropButton=this._createCropButton(this.getId()+"-cropButton");this.addDependent(this._oCropButton);}return this._oCropButton;};
g1.prototype._getMobileCropButton=function(){if(!this._oMobileCropButton){this._oMobileCropButton=this._createCropButton(this.getId()+"-mobileCropButton");this.addDependent(this._oMobileCropButton);}return this._oMobileCropButton;};
g1.prototype._createCropButton=function(i){return new c({id:i,icon:f1.CROP,type:X.Transparent,pressed:{path:"/mode",formatter:function(i1){return i1===Q.Crop;}},enabled:{path:"/mode",formatter:function(i1){return i1!==Q.Crop;}},press:this._onButtonPress.bind(this,this._setModeCrop.bind(this)),tooltip:G.getText("IMGEDITOR_PANEL_CROP")});};
g1.prototype._getFilterButton=function(){if(!this._oFilterButton){this._oFilterButton=this._createFilterButton(this.getId()+"-filterButton");this.addDependent(this._oFilterButton);}return this._oFilterButton;};
g1.prototype._getMobileFilterButton=function(){if(!this._oMobileFilterButton){this._oMobileFilterButton=this._createFilterButton(this.getId()+"-mobileFilterButton");this.addDependent(this._oMobileFilterButton);}return this._oMobileFilterButton;};
g1.prototype._createFilterButton=function(i){return new c({id:i,icon:f1.FILTER,type:X.Transparent,pressed:{path:"/mode",formatter:function(i1){return i1===Q.Filter;}},enabled:{path:"/mode",formatter:function(i1){return i1!==Q.Filter;}},press:this._onButtonPress.bind(this,this._setModeFilter.bind(this)),tooltip:G.getText("IMGEDITOR_PANEL_FILTER")});};
g1.prototype._getMobileApplyButton=function(){if(!this._oMobileApplyButton){this._oMobileApplyButton=new B({id:this.getId()+"-mobileApplyButton",text:G.getText("IMGEDITOR_APPLY"),type:X.Emphasized,press:this._applyPreview.bind(this)});}return this._oMobileApplyButton;};
g1.prototype._changeOptionsPanelContent=function(i){var i1=this._getOptionsPanel();i1.removeAllItems();if(!this.getImageEditor()||!this.getImageEditor().getLoaded()||!i){return;}i().forEach(function(j1){i1.addItem(j1);});};
g1.prototype._onButtonPress=function(i){this.getImageEditor()._cancelPreview();i();};
g1.prototype._setModeTransform=function(i){this._changeOptionsPanelContent(this._getTransformPanelContent.bind(this));if(this.getImageEditor()){this.getImageEditor().setMode(P.Resize);}if(this.getMode()!==Q.Transform){this.setProperty("mode",Q.Transform,true);}this._setTransformTypeByKey(i||"Resize");this._oModel.setProperty("/mode",Q.Transform);};
g1.prototype._setModeCrop=function(i){this._changeOptionsPanelContent(this._getCropPanelContent.bind(this));if(this.getImageEditor()){this._setCropTypeByKey(i||"Rectangle");}if(this.getMode()!==Q.Crop){this.setProperty("mode",Q.Crop,true);}this._oModel.setProperty("/mode",Q.Crop);this._setScaleCropArea(this._oModel.getProperty("/crop/scaleCropArea"));};
g1.prototype._setModeFilter=function(){this._changeOptionsPanelContent(this._getFilterPanelContent.bind(this));if(this.getImageEditor()){this.getImageEditor().setMode(P.Default);}if(this.getMode()!==Q.Filter){this.setProperty("mode",Q.Filter,true);}this._resetFilterValues();this._selectFilterItem(0);this._oModel.setProperty("/mode",Q.Filter);};
g1.prototype._constraintValue=function(i,i1,j1){var k1=j1.getBinding("value"),l1=j1.getBinding("valueState"),m1=j1.getBinding("valueStateText"),n1;if(isNaN(i)||i<i1.min||i>i1.max){n1=G.getText("IMGEDITOR_BAD_NUMBER",[i1.min,i1.max]);i=this._oModel.getProperty(k1.getPath());}if(n1){this._oModel.setProperty(l1.getPath(),V.Warning);this._oModel.setProperty(m1.getPath(),n1);}this._oModel.setProperty(k1.getPath(),i);j1.setValue(i);return i;};
g1.prototype._onNumberInputChange=function(i,i1){var j1=i1.getParameter("value"),k1=i1.getParameter("newValue"),l1;this._resetValueStates();if(typeof j1==="number"){l1=j1;}else if(typeof k1==="number"){l1=k1;}else{l1=parseInt(i1.getParameter("value")||i1.getParameter("newValue"),10);}l1=this._constraintValue(l1,i,i1.getSource());this[i.callback](l1);};
g1.prototype._setRatio=function(i,i1){if(!this.getImageEditor()||!this.getImageEditor().getLoaded()){return;}this.getImageEditor().setCropAreaByRatio(i,i1);this._refreshCropAreaSize();};
g1.prototype._setCropAreaBySize=function(i,i1){this.getImageEditor().setCropAreaBySize(i,i1);this._refreshCropAreaSize();};
g1.prototype._setRatioByKey=function(i){if(i==="Rectangle"){this._setRatio(this._oModel.getProperty("/crop/ratiosRectangle/1/width"),this._oModel.getProperty("/crop/ratiosRectangle/1/height"));}else if(i==="Ellipse"){this._setRatio(1,1);}else if(i==="CustomShape"&&this.getImageEditor().getCustomShapeLoaded()){this._setCustomShapeCropAreaRatio();}};
g1.prototype._setCustomShapeCropAreaRatio=function(){this.getImageEditor().setCustomShapeCropAreaRatio();this._refreshCropAreaSize();};
g1.prototype._setTransformTypeByKey=function(i){var i1=i==="Resize"?P.Resize:P.Default;if(i==="Resize"){this._refreshImageSize();this._selectResizeCustomSizeItem();}else if(i==="Rotate"){this._oModel.setProperty("/transform/rotate",0);}else if(i==="Flip"){this._resetFlips();}this._oModel.setProperty("/transform/selectedTypeKey",i);this._resetValueStates();if(this.getImageEditor()){this.getImageEditor()._cancelPreview();this.getImageEditor().setMode(i1);}};
g1.prototype._setCropTypeByKey=function(i,i1){var j1=this._oModel.getProperty("/crop/types").filter(function(k1){return k1.key===i;})[0];this._setRatioByKey(i);this._oModel.setProperty("/crop/selectedTypeKey",i);this._oModel.setProperty("/crop/selectedType",j1);if(this["_select"+i+"CropCustomSizeItem"]){this["_select"+i+"CropCustomSizeItem"](i1);}this.getImageEditor().setMode("Crop"+i);this._resetValueStates();};
g1.prototype._resetCurrentPanel=function(){this.getImageEditor().cancelPreview();switch(this.getMode()){case Q.Transform:{this._setTransformTypeByKey(this._oModel.getProperty("/transform/selectedTypeKey"));break;}case Q.Crop:{this._setCropTypeByKey(this._oModel.getProperty("/crop/selectedTypeKey"));break;}case Q.Filter:{this._selectFilterItem(this._getSelectedFilterIndex());break;}default:break;}this._resetValueStates();};
g1.prototype._undo=function(){this.getImageEditor().undo();this._resetCurrentPanel();};
g1.prototype._redo=function(){this.getImageEditor().redo();this._resetCurrentPanel();};
g1.prototype._jumpToHistory=function(i){this.getImageEditor().jumpToHistory(i);this._resetCurrentPanel();};
g1.prototype._setZoom=function(i){this._oModel.setProperty("/zoom",i);this.getImageEditor().zoom(i);this._refreshCropAreaSize();};
g1.prototype._setWidth=function(i){this.getImageEditor().setWidth(i,true);this._oModel.setProperty("/transform/height",this.getImageEditor().getPreviewHeight());this._selectResizeCustomSizeItem(this.getImageEditor().getKeepResizeAspectRatio());};
g1.prototype._setHeight=function(i){this.getImageEditor().setHeight(i,true);this._oModel.setProperty("/transform/width",this.getImageEditor().getPreviewWidth());this._selectResizeCustomSizeItem(this.getImageEditor().getKeepResizeAspectRatio());};
g1.prototype._setSize=function(i,i1,j1){if(j1){i=this.getImageEditor().getWidth()*i;i1=this.getImageEditor().getHeight()*i1;}this._updateCurrentSize(i,i1);if(this.getImageEditor().getPreviewWidth()===i&&this.getImageEditor().getPreviewHeight()===i1){return;}this.getImageEditor().setSize(i,i1,true);};
g1.prototype._rotate=function(i){i=i>I.LIMITS.ROTATION_MAX?I.LIMITS.ROTATION_MAX:i;i=i<I.LIMITS.ROTATION_MIN?I.LIMITS.ROTATION_MIN:i;this._oModel.setProperty("/transform/rotate",i);this.getImageEditor().rotate(i,true);};
g1.prototype._flip=function(i,i1){this.getImageEditor().flip(i,i1,true);};
g1.prototype._setKeepResizeAspectRatio=function(i){this._oModel.setProperty("/transform/keepAspectRatio",i);if(this.getImageEditor()){this.getImageEditor().setKeepResizeAspectRatio(i);}};
g1.prototype._getKeepCropAspectRatio=function(){return this._oModel.getProperty("/crop/keepAspectRatio");};
g1.prototype._setKeepCropAspectRatio=function(i){this._oModel.setProperty("/crop/keepAspectRatio",i);if(this.getImageEditor()){this.getImageEditor().setKeepCropAspectRatio(i);}};
g1.prototype._setScaleCropArea=function(i){this._oModel.setProperty("/crop/scaleCropArea",i);if(this.getImageEditor()){this.getImageEditor().setScaleCropArea(i);}};
g1.prototype._applyCurrentFilter=function(i){var i1=this._oModel.getProperty("/filter/selectedFilter");if(typeof i!=="undefined"){this._oModel.setProperty("/filter/selectedFilter/value",i);}this.getImageEditor()[i1.type](i1.value,true);};
g1.prototype._resetFilterValues=function(){var i=this._oModel.getProperty("/filter/filters");i.forEach(function(i1,j1){this._oModel.setProperty("/filter/filters/"+j1+"/value",i1.defaultValue);},this);};
g1.prototype._resetValueStates=function(){var i=["/transform/widthValueState","/transform/heightValueState","/transform/rotateValueState","/crop/widthValueState","/crop/heightValueState","/filter/filterValueState"];i.forEach(function(i1){this._oModel.setProperty(i1,V.None);},this);};
g1.prototype._resetFlips=function(){this._oModel.setProperty("/transform/flipVertical",false);this._oModel.setProperty("/transform/flipHorizontal",false);};
g1.prototype._applyPreview=function(){this.getImageEditor().applyPreview();this._resetValueStates();switch(this.getMode()){case Q.Transform:{switch(this._oModel.getProperty("/transform/selectedTypeKey")){case"Resize":{this._refreshImageSize();break;}case"Rotate":{this._oModel.setProperty("/transform/rotate",0);this._refreshImageSize();break;}case"Flip":{this._resetFlips();break;}default:break;}break;}case Q.Crop:{var i=this._oModel.getProperty("/crop/selectedType/apply");if(i){this.getImageEditor()[i]();}this._refreshImageSize();this._setRatioByKey(this._oModel.getProperty("/crop/selectedTypeKey"));this._deselectCropItem();this.getImageEditor().setMode(P.Default);break;}case Q.Filter:{this._resetFilterValues();break;}default:break;}};
g1.prototype._createGridList=function(i,i1,j1){var k1=this;var l1=new p({width:"auto",mode:"SingleSelectMaster",itemPress:function(m1){k1._resetValueStates();j1.call(k1,m1);},items:{path:i,factory:i1.bind(this)}}).addStyleClass("sapSuiteUiCommonsImageEditorContainerGridList");l1.setModel(this._oModel);if(!l1._oItemNavigation){l1._startItemNavigation();}if(l1._oItemNavigation){l1._oItemNavigation.setColumns(2);}return l1;};
g1.prototype._selectResizeCustomSizeItem=function(i){var i1=this._getResizeGridList(),j1=i1.getItems()[0];i1.setSelectedItem(j1);this._setKeepResizeAspectRatio(!!i);};
g1.prototype._deselectCropItem=function(){this._getRectangleCropGridList().removeSelections();this._getEllipseCropGridList().removeSelections();this._disableCrop();};
g1.prototype._disableCrop=function(){this._oModel.setProperty("/crop/enabled",false);};
g1.prototype._enableCrop=function(){this._oModel.setProperty("/crop/enabled",true);};
g1.prototype._selectRectangleCropCustomSizeItem=function(i){var i1=this._getRectangleCropGridList(),j1=i1.getItems()[0];i1.setSelectedItem(j1);this._setKeepCropAspectRatio(!!i);this._enableCrop();};
g1.prototype._selectEllipseCropCustomSizeItem=function(i){var i1=this._getEllipseCropGridList(),j1=i1.getItems()[0];i1.setSelectedItem(j1);this._setKeepCropAspectRatio(!!i);this._enableCrop();};
g1.prototype._selectCustomShapeCropCustomSizeItem=function(i){var i1=this._getCustomShapeCropGridList(),j1=i1.getItems()[0];i1.setSelectedItem(j1);this._setKeepCropAspectRatio(!!i);this._enableCrop();};
g1.prototype._selectFilterItem=function(i){var i1=this._getFilterGridList(),j1=i1.getItems()[i];this._oModel.setProperty("/filter/selectedFilter",j1.getBindingContext().getProperty());this._oModel.setProperty("/filter/selectedFilter/value",this._oModel.getProperty("/filter/selectedFilter/defaultValue"));i1.setSelectedItem(j1);};
g1.prototype._getSelectedFilterIndex=function(){var i=this._oModel.getProperty("/filter/selectedFilter"),i1=i?this._oModel.getProperty("/filter/filters").indexOf(i):0;return i1;};
g1.prototype._getResizeGridList=function(){if(!this._oGridListResize){this._oGridListResize=this._createGridList("/transform/resizes",this._gridRectShapeItemFactory,this._onResizeGridListSelectionChange);}return this._oGridListResize;};
g1.prototype._onResizeGridListSelectionChange=function(i){var i1=i.getParameter("listItem"),j1=i1.getBindingContext();if(j1.getProperty("width")){this._setSize(j1.getProperty("width"),j1.getProperty("height"),j1.getProperty("relative"));}this._setKeepResizeAspectRatio(!j1.getProperty("unlockRatio"));};
g1.prototype._getRotateGridList=function(){if(!this._oGridListRotate){this._oGridListRotate=this._createGridList("/transform/rotates",this._gridRectShapeItemFactory,this._onRotateGridListSelectionChange);}return this._oGridListRotate;};
g1.prototype._onRotateGridListSelectionChange=function(i){var i1=i.getParameter("listItem"),j1=i1.getBindingContext();this._getRotateGridList().removeSelections();this._rotate(this._oModel.getProperty("/transform/rotate")+j1.getProperty("rotate"));};
g1.prototype._getFlipGridList=function(){if(!this._oGridListFlip){this._oGridListFlip=this._createGridList("/transform/flips",this._gridRectShapeItemFactory,this._onFlipGridListSelectionChange);}return this._oGridListFlip;};
g1.prototype._onFlipGridListSelectionChange=function(i){var i1=i.getParameter("listItem"),j1=i1.getBindingContext(),k1=this._oModel.getProperty("/transform/flipVertical"),l1=this._oModel.getProperty("/transform/flipHorizontal");this._getFlipGridList().removeSelections();k1=k1!==j1.getProperty("flipVertical");l1=l1!==j1.getProperty("flipHorizontal");this._oModel.setProperty("/transform/flipVertical",k1);this._oModel.setProperty("/transform/flipHorizontal",l1);this._flip(k1,l1);};
g1.prototype._getRectangleCropGridList=function(){if(!this._oGridListRectCrop){this._oGridListRectCrop=this._createGridList("/crop/ratiosRectangle",this._gridRectShapeItemFactory,this._onRectCropGridListSelectionChange);}return this._oGridListRectCrop;};
g1.prototype._onRectCropGridListSelectionChange=function(i){var i1=i.getParameter("listItem");this._onGridListSelectionChange(i1,P.CropRectangle);};
g1.prototype._getEllipseCropGridList=function(){if(!this._oGridListEllipseCrop){this._oGridListEllipseCrop=this._createGridList("/crop/ratiosCircle",this._gridCircleShapeItemFactory,this._onEllipseCropGridListSelectionChange);}return this._oGridListEllipseCrop;};
g1.prototype._onEllipseCropGridListSelectionChange=function(i){var i1=i.getParameter("listItem");this._onGridListSelectionChange(i1,P.CropEllipse);};
g1.prototype._getCustomShapeCropGridList=function(){if(!this._oGridListCustomShapeCrop){this._oGridListCustomShapeCrop=this._createGridList("/crop/ratiosCustomShape",this._gridRectShapeItemFactory,this._onCustomShapeCropGridListSelectionChange);this._oGridListCustomShapeCrop.setModel(this._oModel);}return this._oGridListCustomShapeCrop;};
g1.prototype._onCustomShapeCropGridListSelectionChange=function(i){var i1=i.getParameter("listItem");this._onGridListSelectionChange(i1,P.CropCustomShape);};
g1.prototype._onGridListSelectionChange=function(i,i1){var j1=i.getBindingContext(),k1=this.getImageEditor();k1.setMode(i1);if(j1.getProperty("callback")){this[j1.getProperty("callback")]();}if(j1.getProperty("width")&&j1.getProperty("relative")){this._setRatio(j1.getProperty("width"),j1.getProperty("height"));}else if(j1.getProperty("width")&&!j1.getProperty("relative")){this._setCropAreaBySize(j1.getProperty("width"),j1.getProperty("height"));}this._enableCrop();this._setKeepCropAspectRatio(!j1.getProperty("unlockRatio"));};
g1.prototype._getFilterGridList=function(){if(!this._oGridListFilter){this._oGridListFilter=this._createGridList("/filter/filters",this._gridFilterItemFactory,this._onFilterGridListSelectionChange);}return this._oGridListFilter;};
g1.prototype._onFilterGridListSelectionChange=function(i){var i1=i.getParameter("listItem"),j1=i1.getBindingContext();this._resetFilterValues();this._oModel.setProperty("/filter/selectedFilter",j1.getProperty());this.getImageEditor().cancelPreview();this.getImageEditor()[j1.getProperty("type")](j1.getProperty("value"),true);};
g1.prototype._gridRectShapeItemFactory=function(i,i1){var j1;if(i1.getProperty("icon")){j1=new F({renderType:Z.Bare,alignItems:_.Center,justifyContent:$.Center,items:[new w({src:"{icon}"})]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerGridItemIcon");}else{j1=this._createGridItemRectShape(i1.getProperty("width"),i1.getProperty("height"));}return this._createGridListItem(j1);};
g1.prototype._gridCircleShapeItemFactory=function(i,i1){var j1;if(i1.getProperty("icon")){j1=new F({renderType:Z.Bare,alignItems:_.Center,justifyContent:$.Center,items:[new w({src:"{icon}"})]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerGridItemIcon");}else{j1=this._createGridItemCircleShape(i1.getProperty("width"),i1.getProperty("height"));}return this._createGridListItem(j1);};
g1.prototype._refreshGridListsItems=function(){var i=this,i1=[{path:"/transform/resizes",fnGetItems:this.getCustomResizeItems.bind(this)},{path:"/crop/ratiosRectangle",fnGetItems:this.getCustomRectangleCropItems.bind(this)},{path:"/crop/ratiosCircle",fnGetItems:this.getCustomEllipseCropItems.bind(this)}];this.getCustomResizeItems().forEach(function(j1){if(j1.getRelative()&&!j1.getIcon()){j1.setIcon(f1.RELATIVE);}});i1.forEach(function(j1){var k1=i._oModel.getProperty(j1.path),l1=k1.slice(0,h1.NUM_KEPT_ITEMS);j1.fnGetItems().forEach(function(m1){if(m1.getWidth()>0&&m1.getHeight()>0){l1.push({width:m1.getWidth(),height:m1.getHeight(),text:m1.getLabel(),icon:m1.getIcon(),relative:m1.getRelative()});}});i._oModel.setProperty(j1.path,l1);});};
g1.prototype._createGridListItem=function(i){return new s({type:N.Active,content:[i,new L({text:"{text}",wrapping:false,textAlign:d1.Center,layoutData:[new t({growFactor:0,shrinkFactor:0,baseSize:"auto"})]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerGridItemLabel")]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerGridItem");};
g1.prototype._createGridItemRectShape=function(i,i1){var j1,k1;if(i<100){i*=10;i1*=10;}else if(i>100){i/=10;i1/=10;}j1=document.createElementNS("http://www.w3.org/2000/svg","svg");j1.setAttribute("class","sapSuiteUiCommonsImageEditorContainerGridItemHeaderContent");j1.setAttribute("viewBox","-1 -1 "+(i+2)+" "+(i1+2));k1=document.createElement("rect");k1.setAttribute("x","0");k1.setAttribute("y","0");k1.setAttribute("width",i);k1.setAttribute("height",i1);j1.appendChild(k1);return new H({content:new XMLSerializer().serializeToString(j1)});};
g1.prototype._createGridItemCircleShape=function(i,i1){var j1,k1;i*=100;i1*=100;j1=document.createElementNS("http://www.w3.org/2000/svg","svg");j1.setAttribute("class","sapSuiteUiCommonsImageEditorContainerGridItemHeaderContent");j1.setAttribute("viewBox","-"+(i+2)+" -"+(i1+2)+" "+(i*2+4)+" "+(i1*2+4));k1=document.createElement("ellipse");k1.setAttribute("cx","0");k1.setAttribute("cy","0");k1.setAttribute("rx",i);k1.setAttribute("ry",i1);j1.appendChild(k1);return new H({content:new XMLSerializer().serializeToString(j1)});};
g1.prototype._gridFilterItemFactory=function(i,i1){var j1,k1,l1;k1=document.createElementNS("http://www.w3.org/2000/svg","svg");k1.setAttribute("class","sapSuiteUiCommonsImageEditorContainerGridItemHeaderContent sapSuiteUiCommonsImageEditorContainerGridItemHeaderFilterContent");l1=document.createElementNS("http://www.w3.org/2000/svg","use");l1.setAttribute("href","#"+this.getId()+"-origThumbnail");l1.setAttribute("filter","url(#"+this.getId()+"-"+i1.getProperty("type")+")");k1.appendChild(l1);j1=new H({content:new XMLSerializer().serializeToString(k1)});return this._createGridListItem(j1);};
g1.prototype._getTransformPanelContent=function(){var i=this;if(!this._oTransformToolbarContent){this._oTransformToolbarContent=[new S({min:I.LIMITS.ROTATION_MIN,max:I.LIMITS.ROTATION_MAX,showAdvancedTooltip:true,visible:{path:"/transform/selectedTypeKey",formatter:function(i1){return i1==="Rotate";}},value:{path:"/transform/rotate",mode:"OneWay"},liveChange:this._onNumberInputChange.bind(this,e1.ROTATION),progress:true,ariaLabelledBy:[this.getId()+"-transformAngle"]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerMobileSlider"),new u({tabDensityMode:a1.Compact,backgroundDesign:b1.Transparent,headerBackgroundDesign:b1.Transparent,expandable:false,select:function(i1){var j1=i1.getParameter("key");i._setTransformTypeByKey(j1);},selectedKey:"{/transform/selectedTypeKey}",items:[new v({key:"Resize",text:G.getText("IMGEDITOR_RESIZE"),content:[this._getResizeGridList(),new F({renderType:Z.Bare,direction:Y.Column,items:[new F({renderType:Z.Bare,justifyContent:$.SpaceBetween,items:[new F({renderType:Z.Bare,direction:Y.Column,items:[new L({text:G.getText("IMGEDITOR_WIDTH"),labelFor:this.getId()+"-transformWidth"}),new g({id:this.getId()+"-transformWidth",type:K.Number,textAlign:d1.Right,change:this._onNumberInputChange.bind(this,e1.WIDTH),value:{path:"/transform/width",type:"sap.ui.model.type.Integer",mode:"OneWay"},valueState:"{/transform/widthValueState}",valueStateText:"{/transform/widthValueStateText}",width:"5.9375rem",fieldWidth:"4.375rem",description:G.getText("IMGEDITOR_PX")})]}),new F({renderType:Z.Bare,direction:Y.Column,justifyContent:$.End,items:[new T({tooltip:G.getText("IMGEDITOR_LOCK_RATIO"),icon:f1.LOCK,type:X.Transparent,pressed:{path:"/transform/keepAspectRatio"},press:function(i1){i._resetValueStates();i.getImageEditor().setKeepResizeAspectRatio(i1.getParameter("pressed"));i._selectResizeCustomSizeItem(i1.getParameter("pressed"));}})]}),new F({renderType:Z.Bare,direction:Y.Column,items:[new L({text:G.getText("IMGEDITOR_HEIGHT"),labelFor:this.getId()+"-transformHeight"}),new g({id:this.getId()+"-transformHeight",type:K.Number,textAlign:d1.Right,change:this._onNumberInputChange.bind(this,e1.HEIGHT),value:{path:"/transform/height",type:"sap.ui.model.type.Integer",mode:"OneWay"},valueState:"{/transform/heightValueState}",valueStateText:"{/transform/heightValueStateText}",width:"5.9375rem",fieldWidth:"4.375rem",description:G.getText("IMGEDITOR_PX")})]})]}),new B({width:"50%",text:G.getText("IMGEDITOR_APPLY"),type:X.Emphasized,press:this._applyPreview.bind(this)})]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerPanelArea")]}),new v({key:"Rotate",text:G.getText("IMGEDITOR_ROTATE"),content:[this._getRotateGridList(),new F({renderType:Z.Bare,direction:Y.Column,items:[new L({id:this.getId()+"-transformAngle",text:G.getText("IMGEDITOR_TRANSFORM_ANGLE")}),new S({min:I.LIMITS.ROTATION_MIN,max:I.LIMITS.ROTATION_MAX,value:{path:"/transform/rotate",mode:"OneWay"},liveChange:this._onNumberInputChange.bind(this,e1.ROTATION),progress:true,ariaLabelledBy:[this.getId()+"-transformAngle"]}),new g({type:K.Number,textAlign:d1.Right,width:"50%",fieldWidth:"50%",description:G.getText("IMGEDITOR_TRANSFORM_DEG"),change:this._onNumberInputChange.bind(this,e1.ROTATION),value:{path:"/transform/rotate",type:"sap.ui.model.type.Integer",mode:"OneWay"},valueState:"{/transform/rotateValueState}",valueStateText:"{/transform/rotateValueStateText}",ariaLabelledBy:[this.getId()+"-transformAngle"]}),new B({width:"50%",text:G.getText("IMGEDITOR_APPLY"),type:X.Emphasized,press:this._applyPreview.bind(this)})]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerPanelArea")]}),new v({key:"Flip",text:G.getText("IMGEDITOR_FLIP"),content:[this._getFlipGridList(),new F({renderType:Z.Bare,direction:Y.Column,items:[new B({width:"50%",text:G.getText("IMGEDITOR_APPLY"),type:X.Emphasized,press:this._applyPreview.bind(this)})]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerPanelArea")]})]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerTabBar")];this._oTransformToolbarContent.forEach(function(i1){this.addDependent(i1);},this);}return this._oTransformToolbarContent;};
g1.prototype._onCropSizeInputChange=function(i,i1){var j1=this._oModel.getProperty("/crop/width"),k1=this._oModel.getProperty("/crop/height"),l1=this._getKeepCropAspectRatio(),m1,n1,o1,p1,q1,r1=parseInt(i1.getParameter("value"),10);r1=isNaN(r1)?0:r1;if(i==="width"){o1=j1;m1=r1;n1=l1?m1*k1/j1:k1;q1=this.getImageEditor()._getMaxCropAreaWidth(true);p1=this.getImageEditor()._getMinCropAreaWidth(true);}else{o1=k1;n1=r1;m1=l1?n1*j1/k1:j1;q1=this.getImageEditor()._getMaxCropAreaHeight(true);p1=this.getImageEditor()._getMinCropAreaHeight(true);}this._resetValueStates();if(r1>q1||r1<p1){i1.getSource().setValue(o1);this._oModel.setProperty("/crop/"+i+"ValueState",V.Warning);this._oModel.setProperty("/crop/"+i+"ValueStateText",G.getText("IMGEDITOR_BAD_NUMBER",[p1,q1]));}else{this._setCropAreaBySize(m1,n1);}};
g1.prototype._getCropPanelContent=function(){var i=this;if(!this._oCropToolbarContent){this._oCropToolbarContent=[new u({tabDensityMode:a1.Compact,backgroundDesign:b1.Transparent,headerBackgroundDesign:b1.Transparent,expandable:false,select:function(i1){var j1=i1.getParameter("key");i._setCropTypeByKey(j1);},selectedKey:"{/crop/selectedTypeKey}",items:[new v({tooltip:G.getText("IMGEDITOR_CROP_RECTANGLE"),key:"Rectangle",text:"\ue17b",content:[this._getRectangleCropGridList()]}),new v({tooltip:G.getText("IMGEDITOR_CROP_ELLIPSE"),key:"Ellipse",text:"\ue255",content:[this._getEllipseCropGridList()]}),new v({tooltip:G.getText("IMGEDITOR_CROP_CUSTOM"),key:"CustomShape",text:"\ue057",content:[this._getCustomShapeCropGridList(),this._getCustomShapeCropContent()]})]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerTabBar").addStyleClass("sapSuiteUiCommonsImageEditorContainerFilterIcons"),new F({renderType:Z.Bare,direction:Y.Column,items:[new F({renderType:Z.Bare,justifyContent:$.SpaceBetween,items:[new F({renderType:Z.Bare,direction:Y.Column,items:[new L({text:G.getText("IMGEDITOR_WIDTH"),labelFor:this.getId()+"-cropWidth"}),new g({id:this.getId()+"-cropWidth",type:K.Number,textAlign:d1.Right,value:{path:"/crop/width",mode:"OneWay",type:"sap.ui.model.type.Integer"},valueState:"{/crop/widthValueState}",valueStateText:"{/crop/widthValueStateText}",width:"5.9375rem",fieldWidth:"4.375rem",description:G.getText("IMGEDITOR_PX"),change:this._onCropSizeInputChange.bind(this,"width"),enabled:{parts:["/crop/selectedTypeKey","/crop/customShapeLoaded","/crop/enabled"],formatter:function(i1,j1,k1){return!(i1==="CustomShape"&&!j1)&&k1;}}})]}),new F({renderType:Z.Bare,direction:Y.Column,justifyContent:$.End,items:[new T({tooltip:G.getText("IMGEDITOR_LOCK_RATIO"),icon:f1.LOCK,type:X.Transparent,pressed:{path:"/crop/keepAspectRatio"},press:function(i1){var j1=i.getImageEditor().getMode(),k1,l1;i._resetValueStates();if(i._oModel.getProperty("/crop/selectedTypeKey")==="Rectangle"){k1=P.CropRectangle;l1=i._selectRectangleCropCustomSizeItem.bind(i);}else if(i._oModel.getProperty("/crop/selectedTypeKey")==="Ellipse"){k1=P.CropEllipse;l1=i._selectEllipseCropCustomSizeItem.bind(i);}else{k1=P.CropCustomShape;l1=i._selectCustomShapeCropCustomSizeItem.bind(i);}if(j1!==k1){i.getImageEditor().setMode(k1);}if(l1){l1(i1.getParameter("pressed"));}}})]}),new F({renderType:Z.Bare,direction:Y.Column,items:[new L({text:G.getText("IMGEDITOR_HEIGHT"),labelFor:this.getId()+"-cropHeight"}),new g({id:this.getId()+"-cropHeight",type:K.Number,textAlign:d1.Right,value:{path:"/crop/height",mode:"OneWay",type:"sap.ui.model.type.Integer"},valueState:"{/crop/heightValueState}",valueStateText:"{/crop/heightValueStateText}",width:"5.9375rem",fieldWidth:"4.375rem",description:G.getText("IMGEDITOR_PX"),change:this._onCropSizeInputChange.bind(this,"height"),enabled:{parts:["/crop/selectedTypeKey","/crop/customShapeLoaded","/crop/enabled"],formatter:function(i1,j1,k1){return!(i1==="CustomShape"&&!j1)&&k1;}}})]})]}),new F({renderType:Z.Bare,alignItems:_.Center,items:[this._getScaleSwitch(),this._getScaleLabel()]}).addStyleClass("sapUiSmallMarginTopBottom"),new B({width:"50%",text:G.getText("IMGEDITOR_APPLY"),type:X.Emphasized,press:this._applyPreview.bind(this),enabled:{parts:["/crop/selectedTypeKey","/crop/customShapeLoaded","/crop/enabled"],formatter:function(i1,j1,k1){return!(i1==="CustomShape"&&!j1)&&k1;}}})]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerPanelArea")];this._oCropToolbarContent.forEach(function(i1){this.addDependent(i1);},this);}return this._oCropToolbarContent;};
g1.prototype._getCustomShapeCropContent=function(){var i=this;if(!this.oCustomShapeContent){this.oCustomShapeContent=new F({renderType:Z.Bare,direction:Y.Column,items:[new L({text:G.getText("IMGEDITOR_CROP_CUSTOM_FILE"),labelFor:this.getId()+"-customFile"}),new A({id:this.getId()+"-customFile",mimeType:"image/*",change:function(i1){var j1=i1.getParameter("files")[0];if(!j1){return;}i._resetValueStates();i._enableCrop();i.getImageEditor().setMode(P.CropCustomShape);i.getImageEditor().setCustomShapeSrc(j1);}})]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerPanelArea").addStyleClass("sapSuiteUiCommonsImageEditorContainerPanelAreaMobile");this.addDependent(this.oCustomShapeContent);}return this.oCustomShapeContent;};
g1.prototype._getFilterPanelContent=function(){var i=this;if(!this._oFilterToolbarContent){this._oFilterToolbarContent=[new S({min:"{/filter/selectedFilter/min}",max:"{/filter/selectedFilter/max}",showAdvancedTooltip:true,value:{path:"/filter/selectedFilter/value",mode:"OneWay"},liveChange:this._onNumberInputChange.bind(this,e1.FILTER),progress:true,ariaLabelledBy:[this.getId()+"-filterValue"]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerMobileSlider"),this._getFilterGridList(),new F({renderType:Z.Bare,direction:Y.Column,items:[new S({min:"{/filter/selectedFilter/min}",max:"{/filter/selectedFilter/max}",value:{path:"/filter/selectedFilter/value",mode:"OneWay"},liveChange:this._onNumberInputChange.bind(this,e1.FILTER),progress:true,ariaLabelledBy:[this.getId()+"-filterValue"]}),new L({id:this.getId()+"-filterValue",text:G.getText("IMGEDITOR_FILTER_VALUE")}),new g({type:K.Number,textAlign:d1.Right,width:"5.9375rem",fieldWidth:"4.375rem",description:"{/filter/selectedFilter/unit}",change:function(i1){i._onNumberInputChange(q.extend(e1.FILTER,i._oModel.getProperty("/filter/selectedFilter")),i1);},value:{path:"/filter/selectedFilter/value",type:"sap.ui.model.type.Integer",mode:"OneWay"},valueState:"{/filter/filterValueState}",valueStateText:"{/filter/filterValueStateText}",ariaLabelledBy:[this.getId()+"-filterValue"]}),new B({width:"50%",text:G.getText("IMGEDITOR_APPLY"),type:X.Emphasized,press:this._applyPreview.bind(this)})]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerPanelArea")];this._oFilterToolbarContent.forEach(function(i1){this.addDependent(i1);},this);}return this._oFilterToolbarContent;};
g1.prototype._getOptionsPanel=function(){if(!this._oOptionsPanel){this._oOptionsPanel=new F({renderType:Z.Bare,direction:Y.Column});this._oOptionsPanel.addStyleClass("sapSuiteUiCommonsImageEditorContainerPanel");this._oOptionsPanel.setModel(this._oModel);this.addDependent(this._oOptionsPanel);}return this._oOptionsPanel;};
g1.prototype.onkeydown=function(i){var i1=this;function j1(){return i1._oModel.getProperty("/historyIndex")<i1._oModel.getProperty("/history").length-1;}if(i.ctrlKey&&i.key!=="Control"&&i.shiftKey&&i.key!=="Shift"){switch(i.key){case"z":case"Z":if(j1()){this.getImageEditor().undo();if(j1()){this._getUndoButton().focus();}else{this._getHistoryArrowButton().focus();}}i.preventDefault();break;case"y":case"Y":if(this._oModel.getProperty("/historyIndex")>0){this.getImageEditor().redo();this._getUndoButton().focus();}i.preventDefault();break;case"h":case"H":if(this._oModel.getProperty("/history").length>1){this._getHistoryArrowButton().focus();this._getHistoryPopover().openBy(this._oHistoryArrowButton);}i.preventDefault();break;default:break;}}else if(i.ctrlKey&&i.key!=="Control"&&!i.shiftKey){switch(i.key){case"u":case"U":this._focusOnToolbar();i.preventDefault();break;case"g":case"G":this._focusOnPanel();i.preventDefault();break;case"i":case"I":this._focusOnImageEditor();i.preventDefault();break;case"e":case"E":this._setModeTransform("Resize");this._focusOnItem(this._getResizeGridList().getItems()[0]);i.preventDefault();break;case"r":case"R":this._setModeTransform("Rotate");this._focusOnItem(this._getRotateGridList().getItems()[0]);i.preventDefault();break;case"f":case"F":this._setModeTransform("Flip");this._focusOnItem(this._getFlipGridList().getItems()[0]);i.preventDefault();break;case"j":case"J":this._setModeCrop("Rectangle");this._focusOnItem(this._getRectangleCropGridList().getItems()[0]);i.preventDefault();break;case"s":case"S":this._setModeFilter();this._focusOnItem(this._getFilterGridList().getItems()[0]);i.preventDefault();break;case"Enter":this._applyPreview();break;default:break;}}else if(i.altKey&&i.key!=="Alt"){switch(i.key){case"Enter":this._switchFocusPanelImage();i.preventDefault();break;default:break;}}};
g1.prototype._focusFirstTabbable=function(i){var i1=i.find(":tabbable").get(0);if(i1){i1.focus();}};
g1.prototype._focusOnToolbar=function(){this._focusFirstTabbable(this._getHeaderToolbar().$());};
g1.prototype._focusOnPanel=function(){this._focusFirstTabbable(this._getOptionsPanel().$());};
g1.prototype._focusOnImageEditor=function(){this._focusFirstTabbable(this.getImageEditor().$());};
g1.prototype._focusOnItem=function(i){if(i.getDomRef()){if(!this._getHistoryPopover().isOpen()){i.focus();}}else{var i1={onAfterRendering:function(){i.removeEventDelegate(i1);i.focus();if(i.getParent()&&i.getParent().isA("sap.m.List")){i.getParent()._startItemNavigation();}}};i.addEventDelegate(i1);}};
g1.prototype._switchFocusPanelImage=function(){var i=document.activeElement;if(this._getOptionsPanel().getDomRef().contains(i)){this._focusOnImageEditor();}else{this._focusOnPanel();}};
return g1;});
sap.ui.predefine('sap/suite/ui/commons/imageeditor/ImageEditorContainerRenderer',["sap/ui/Device"],function(D){"use strict";var r=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var I={};
I.render=function(R,c){R.write("<div");R.addClass("sapSuiteUiCommonsImageEditorContainer");R.writeControlData(c);R.writeAttribute("tabindex","0");R.writeAttribute("aria-label",r.getText("IMGEDITOR_ACCESSIBILITY_LABEL"));R.writeClasses();R.write(">");this.renderSvgFilters(R,c);this.renderHeaderToolbar(R,c);this.renderMobileHeaderToolbar(R,c);R.write("<div");R.addClass("sapSuiteUiCommonsImageEditorContainerContent");R.writeClasses();R.write(">");this.renderOptionsPanel(R,c);this.renderImageEditor(R,c);R.write("</div>");this.renderMobileZoomToolbar(R,c);this.renderMobileFooterToolbar(R,c);R.write("</div>");};
I.renderSvgFilters=function(R,c){R.write("<svg width='0' height='0' style='position: absolute;'>");R.write("<defs>");this.renderOriginalThumbnail(R,c);this.renderSepiaFilter(R,c);this.renderGrayscaleFilter(R,c);this.renderSaturateFilter(R,c);this.renderInvertFilter(R,c);this.renderBrightnessFilter(R,c);this.renderContrastFilter(R,c);this.renderHueRotateFilter(R,c);R.write("</defs>");R.write("</svg>");};
I.renderOriginalThumbnail=function(R,c){var i=c.getImageEditor();if(!i||!i._oCanvas){return;}R.write("<image xmlns:xlink='http://www.w3.org/1999/xlink'");R.writeAttribute("id",c.getId()+"-origThumbnail");R.writeAttribute("preserveAspectRatio","xMidYMid slice");R.writeAttribute("viewBox","0 0 "+c._oThumbnailCanvas.width+" "+c._oThumbnailCanvas.height);R.writeAttribute("href",i._oCanvas.toDataURL());R.writeAttribute("width","100%");R.writeAttribute("height","100%");R.write("/>");};
I.renderSepiaFilter=function(R,c){R.write("<filter id='"+c.getId()+"-sepia'>");R.write("<feColorMatrix type='matrix' values='0.393 0.769 0.189 0 0  0.349 0.686 0.168 0 0  0.272 0.534 0.131 0 0  0 0 0 1 0'/>");R.write("</filter>");};
I.renderGrayscaleFilter=function(R,c){R.write("<filter id='"+c.getId()+"-grayscale'>");R.write("<feColorMatrix type='matrix' values='0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0  0.2126 0.7152 0.0722 0 0 0 0 0 1 0'/>");R.write("</filter>");};
I.renderSaturateFilter=function(R,c){R.write(" <filter id='"+c.getId()+"-saturate'>");R.write("<feColorMatrix type='saturate' values='3'/>");R.write("</filter>");};
I.renderInvertFilter=function(R,c){R.write("<filter id='"+c.getId()+"-invert'>");R.write("<feComponentTransfer><feFuncR type='table' tableValues='1 0'/><feFuncG type='table' tableValues='1 0'/><feFuncB type='table' tableValues='1 0'/></feComponentTransfer>");R.write("</filter>");};
I.renderBrightnessFilter=function(R,c){R.write("<filter id='"+c.getId()+"-brightness'>");R.write("<feComponentTransfer><feFuncR type='linear' slope='3'/><feFuncG type='linear' slope='3'/><feFuncB type='linear' slope='3'/></feComponentTransfer>");R.write("</filter>");};
I.renderContrastFilter=function(R,c){R.write("<filter id='"+c.getId()+"-contrast'>");R.write("<feComponentTransfer>");R.write("<feFuncR type='linear' slope='3' intercept='-0.3'/>");R.write("<feFuncG type='linear' slope='3' intercept='-0.3'/>");R.write("<feFuncB type='linear' slope='3' intercept='-0.3'/>");R.write("</feComponentTransfer>");R.write("</filter>");};
I.renderHueRotateFilter=function(R,c){R.write("<filter id='"+c.getId()+"-hueRotate'>");R.write("<feColorMatrix type='hueRotate' values='90' />");R.write("</filter>");};
I.renderHeaderToolbar=function(R,c){if(!D.system.phone&&!c._isSmallSize()){var h=c._getHeaderToolbar();R.renderControl(h);}};
I.renderMobileHeaderToolbar=function(R,c){if(D.system.phone||c._isSmallSize()){var h=c._getMobileHeaderToolbar();R.renderControl(h);}};
I.renderMobileZoomToolbar=function(R,c){var h=c._getMobileZoomToolbar();R.renderControl(h);};
I.renderMobileFooterToolbar=function(R,c){var h=c._getMobileFooterToolbar();R.renderControl(h);};
I.renderOptionsPanel=function(R,c){var o=c._getOptionsPanel();R.renderControl(o);c._refreshGridListsItems();};
I.renderImageEditor=function(R,c){var i=c.getImageEditor();R.write("<div");R.addClass("sapSuiteUiCommonsImageEditorContainerWrapper");R.writeClasses();R.write(">");if(i){R.renderControl(i);}R.write("</div>");};
return I;},true);
sap.ui.predefine('sap/suite/ui/commons/imageeditor/ImageEditorRenderer',["sap/ui/Device"],function(D){"use strict";var r=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var I={};var H={nw:{vertical:"sapSuiteUiCommonsImageEditorTop",horizontal:"sapSuiteUiCommonsImageEditorLeft",handlers:["Horizontal","Vertical"],types:["Rectangle","CustomShape"]},ne:{vertical:"sapSuiteUiCommonsImageEditorTop",horizontal:"sapSuiteUiCommonsImageEditorRight",handlers:["Horizontal","Vertical"],types:["Rectangle","CustomShape"]},sw:{vertical:"sapSuiteUiCommonsImageEditorBottom",horizontal:"sapSuiteUiCommonsImageEditorLeft",handlers:["Horizontal","Vertical"],types:["Rectangle","CustomShape"]},se:{vertical:"sapSuiteUiCommonsImageEditorBottom",horizontal:"sapSuiteUiCommonsImageEditorRight",handlers:["Horizontal","Vertical"],types:["Rectangle","CustomShape"]},n:{vertical:"sapSuiteUiCommonsImageEditorTop",horizontal:"sapSuiteUiCommonsImageEditorCenter",handlers:["Horizontal"],types:["Rectangle","CustomShape","Ellipse"]},s:{vertical:"sapSuiteUiCommonsImageEditorBottom",horizontal:"sapSuiteUiCommonsImageEditorCenter",handlers:["Horizontal"],types:["Rectangle","CustomShape","Ellipse"]},w:{vertical:"sapSuiteUiCommonsImageEditorMiddle",horizontal:"sapSuiteUiCommonsImageEditorLeft",handlers:["Vertical"],types:["Rectangle","CustomShape","Ellipse"]},e:{vertical:"sapSuiteUiCommonsImageEditorMiddle",horizontal:"sapSuiteUiCommonsImageEditorRight",handlers:["Vertical"],types:["Rectangle","CustomShape","Ellipse"]}};
I.render=function(R,c){R.write("<div");R.addClass("sapSuiteUiCommonsImageEditor");R.addClass("sapSuiteUiCommonsImageEditorEmpty");R.addClass("sapSuiteUiCommonsImageEditorMode"+c.getMode());if(c.getCustomShapeLoaded()){R.addClass("sapSuiteUiCommonsImageEditorModeCropCustomShapeLoaded");}R.writeClasses();R.writeControlData(c);R.write(">");this.renderNoData(R,c);R.write("<div");R.writeAttribute("id",c.getId()+"-canvasInnerContainer");R.writeAttribute("tabindex","0");R.writeAttribute("role","img");R.addClass("sapSuiteUiCommonsImageEditorCanvasInnerContainer");R.writeClasses();R.write(">");this.renderTransformHandlers(R);this.renderSvgOverlay(R,c);this.renderCropArea(R,c);R.write("</div>");R.write("</div>");};
I.renderNoData=function(R,c){R.write("<div");R.addClass("sapSuiteUiCommonsImageEditorNoData");R.writeClasses();R.writeAttribute("tabindex","0");R.writeAttribute("aria-label",r.getText("IMGEDITOR_NO_IMAGE"));R.write(">");R.write("<div");R.addClass("sapSuiteUiCommonsImageEditorNoDataText");R.writeClasses();R.write(">");R.write(r.getText("IMGEDITOR_NO_IMAGE"));R.write("</div>");R.write("</div>");};
I.renderSvgOverlay=function(R,c){R.write("<svg class='sapSuiteUiCommonsImageEditorCropOverlayContainer'>");R.write("<defs>");R.write("<rect id='"+c.getId()+"-overlayMaskRect'/>");R.write("<ellipse id='"+c.getId()+"-overlayMaskEllipse'/>");R.write("<image xmlns:xlink='http://www.w3.org/1999/xlink' id='"+c.getId()+"-overlayMaskCustomBlack' preserveAspectRatio='none' x='0' y='0' width='100%' height='100%'");if(c._sBlackCustomShapeUrl){R.writeAttribute("xlink:href",c._sBlackCustomShapeUrl);}R.write("/>");R.write("<image xmlns:xlink='http://www.w3.org/1999/xlink' id='"+c.getId()+"-overlayMaskCustomWhite' preserveAspectRatio='none' x='0' y='0' width='100%' height='100%'");if(c._sWhiteCustomShapeUrl){R.writeAttribute("xlink:href",c._sWhiteCustomShapeUrl);}R.write("/>");R.write("<mask");R.writeAttribute("id",c.getId()+"-darkOverlayMask");R.write(">");R.write("<rect");R.writeAttribute("fill","white");R.writeAttribute("x","0");R.writeAttribute("y","0");R.writeAttribute("width","100%");R.writeAttribute("height","100%");R.write("/>");R.write("<use fill='black' href='#"+c.getId()+"-overlayMaskRect"+"' class='sapSuiteUiCommonsImageEditorCropItemRectangle'/>");R.write("<use fill='black' href='#"+c.getId()+"-overlayMaskEllipse"+"' class='sapSuiteUiCommonsImageEditorCropItemEllipse'/>");R.write("<use href='#"+c.getId()+"-overlayMaskCustomBlack"+"' class='sapSuiteUiCommonsImageEditorCropItemCustomShape'/>");R.write("</mask>");R.write("<mask");R.writeAttribute("id",c.getId()+"-lightOverlayClip");R.write(">");R.write("<use fill='white' href='#"+c.getId()+"-overlayMaskRect"+"' class='sapSuiteUiCommonsImageEditorCropItemRectangle'/>");R.write("<use fill='white' href='#"+c.getId()+"-overlayMaskEllipse"+"' class='sapSuiteUiCommonsImageEditorCropItemEllipse'/>");R.write("<use href='#"+c.getId()+"-overlayMaskCustomWhite"+"' class='sapSuiteUiCommonsImageEditorCropItemCustomShape'/>");R.write("</mask>");R.write("</defs>");R.write("<rect");R.writeAttribute("mask","url(#"+c.getId()+"-darkOverlayMask)");R.writeAttribute("x","0");R.writeAttribute("y","0");R.writeAttribute("width","100%");R.writeAttribute("height","100%");R.addClass("sapSuiteUiCommonsImageEditorCropOverlayBlack");R.writeClasses();R.write("/>");R.write("<rect");R.writeAttribute("mask","url(#"+c.getId()+"-lightOverlayClip)");R.writeAttribute("fill","white");R.writeAttribute("x","0");R.writeAttribute("y","0");R.writeAttribute("width","100%");R.writeAttribute("height","100%");R.addClass("sapSuiteUiCommonsImageEditorCropOverlayWhite");R.writeClasses();R.write("/>");R.write("</svg>");};
I.renderCropArea=function(R,c){R.write("<div class='sapSuiteUiCommonsImageEditorCropInnerRectangle'>");R.write("<svg class='sapSuiteUiCommonsImageEditorCropSvg'>");R.write("<defs>");R.write("<mask id='"+c.getId()+"-thirdsMask"+"' maskContentUnits='objectBoundingBox'>");R.write("<rect class='sapSuiteUiCommonsImageEditorCropItemRectangle' fill='white' width='1' height='1' />");R.write("<ellipse class='sapSuiteUiCommonsImageEditorCropItemEllipse' fill='white' cx='0.5' cy='0.5' rx='0.5' ry='0.5' />");R.write("</mask>");this.renderShadowFilter(R,c.getId()+"-bottomShadow",0,2);this.renderShadowFilter(R,c.getId()+"-topShadow",0,-2);this.renderShadowFilter(R,c.getId()+"-rightShadow",2,0);this.renderShadowFilter(R,c.getId()+"-leftShadow",-2,0);R.write("</defs>");R.write("<ellipse class='sapSuiteUiCommonsImageEditorCropItemEllipse' fill='transparent' stroke-width='1' stroke='white' cx='50%' cy='50%' rx='50%' ry='50%' />");this.renderRectBorders(R,c);this.renderThirdLines(R,c);R.write("</svg>");this.renderCropAreaDragHandler(R,c);this.renderCropAreaResizeHandlers(R);R.write("</div>");};
I.renderZones=function(R,c){R.write("<div class='sapSuiteUiCommonsImageEditorZones'>");c.getZones().forEach(function(z){this.renderZone(R,c,z);},this);R.write("</div>");};
I.renderZone=function(R,c,z){R.write("<div");R.writeElementData(z);R.addClass("sapSuiteUiCommonsImageEditorZone");if(z.getEditable()){R.addClass("sapSuiteUiCommonsImageEditorZoneEditable");}if(z.getHighlighted()){R.addClass("sapSuiteUiCommonsImageEditorZoneHighlighted");}R.writeStyles();R.writeClasses();R.write(">");R.write("<div class='sapSuiteUiCommonsImageEditorZoneInner'>");if(!z.getEditable()&&!z.getHighlighted()){R.write("<div class='sapSuiteUiCommonsImageEditorZoneInnerColoring'></div>");}if(z.getHighlighted()){R.write("<div class='sapSuiteUiCommonsImageEditorZoneLabel'>");R.write("<span>");R.writeEscaped(z.getLabel());R.write("</span>");R.write("</div>");}if(z.getEditable()){this.renderBWBorder(R);}R.write("</div>");if(z.getEditable()){this.renderZoneResizeHandlers(R);}R.write("</div>");};
I.renderBWBorder=function(R){R.write("<svg class='sapSuiteUiCommonsImageEditorZoneEditBorder' x='0' y='0' width='100%' height='100%'>");this.renderStrokeRect(R,"black",5,5,5,0.5);this.renderStrokeRect(R,"white",5,5,0,0.5);R.write("</svg>");};
I.renderStrokeRect=function(R,c,d,i,o,f){R.write("<rect x='0' y='0' width='100%' height='100%' fill='none'");R.writeAttribute("stroke",c);R.writeAttribute("stroke-dasharray",d+","+i);R.write(">");R.write("<animate attributeName='stroke-dashoffset' repeatCount='indefinite'");R.writeAttribute("from",o);R.writeAttribute("to",o+d+i);R.writeAttribute("dur",f);R.write("></animate>");R.write("</rect>");};
I.renderShadowFilter=function(R,i,d,a){R.write("<filter");R.writeAttribute("id",i);R.writeAttribute("x","0");R.writeAttribute("y","0");R.writeAttribute("width","100%");R.writeAttribute("height","100%");R.writeAttribute("filterUnits","userSpaceOnUse");R.write(">");R.write("<feGaussianBlur");R.writeAttribute("in","SourceAlpha");R.writeAttribute("stdDeviation","2");R.writeAttribute("result","blur");R.write("/>");R.write("<feOffset");R.writeAttribute("in","blur");R.writeAttribute("result","offOut");R.writeAttribute("x",d);R.writeAttribute("y",a);R.write("/>");R.write("<feBlend");R.writeAttribute("in","SourceGraphic");R.writeAttribute("in2","offOut");R.writeAttribute("mode","normal");R.write("/>");R.write("</filter>");};
I.renderRectBorders=function(R,c){R.write("<g class='sapSuiteUiCommonsImageEditorCropItemRectangle sapSuiteUiCommonsImageEditorCropItemCustomShape'>");this.renderCropLine(R,c,"bottomShadow",0,0,100,0);this.renderCropLine(R,c,"leftShadow",100,0,100,100);this.renderCropLine(R,c,"topShadow",100,100,0,100);this.renderCropLine(R,c,"rightShadow",0,100,0,0);R.write("</g>");};
I.renderThirdLines=function(R,c){R.write("<g mask='url(#"+c.getId()+"-thirdsMask)' class='sapSuiteUiCommonsImageEditorCropThirds'>");this.renderCropLine(R,c,"rightShadow",100/3,0,100/3,100);this.renderCropLine(R,c,"rightShadow",100*2/3,0,100*2/3,100);this.renderCropLine(R,c,"bottomShadow",0,100/3,100,100/3);this.renderCropLine(R,c,"bottomShadow",0,100*2/3,100,100*2/3);R.write("</g>");};
I.renderCropLine=function(R,c,f,x,y,X,Y){R.write("<line class='sapSuiteUiCommonsImageEditorCropLine'");if(!D.browser.msie&&!D.browser.edge){R.writeAttribute("filter","url(#"+c.getId()+"-"+f+")");}R.writeAttribute("x1",x+"%");R.writeAttribute("y1",y+"%");R.writeAttribute("x2",X+"%");R.writeAttribute("y2",Y+"%");R.write("/>");};
I.renderTransformHandlers=function(R){R.write("<div class='sapSuiteUiCommonsImageEditorTransformHandlers'>");Object.keys(H).forEach(function(k){this.renderTransformHandler(R,k);},this);R.write("</div>");};
I.renderTransformHandler=function(R,d){var h=H[d],c;R.write("<div");c=this.getCommonHandlerClasses(d);c.push("sapSuiteUiCommonsImageEditorHandlerContainer");c.forEach(function(C){R.addClass(C);});R.writeClasses();R.write(">");h.handlers.forEach(function(s){this.renderDiv(R,["sapSuiteUiCommonsImageEditorHandler","sapSuiteUiCommonsImageEditorHandler"+s]);},this);R.write("</div>");};
I.renderCropAreaDragHandler=function(R,c){var i=c._getCropAreaDragIcon();R.write("<div");R.addClass("sapSuiteUiCommonsImageEditorDragHandlerContainer");R.writeClasses();R.write(">");R.renderControl(i);R.write("</div>");};
I.renderCropAreaResizeHandlers=function(R){Object.keys(H).forEach(function(k){this.renderCropAreaResizeHandler(R,k);},this);};
I.renderCropAreaResizeHandler=function(R,d){var h=H[d],c;R.write("<div");c=this.getCommonHandlerClasses(d);c.push("sapSuiteUiCommonsImageEditorHandlerContainer");h.types.forEach(function(t){c.push("sapSuiteUiCommonsImageEditorCropItem"+t);});c.forEach(function(C){R.addClass(C);});R.writeClasses();R.write(">");h.handlers.forEach(function(s){this.renderDiv(R,["sapSuiteUiCommonsImageEditorHandler","sapSuiteUiCommonsImageEditorHandler"+s]);},this);R.write("</div>");};
I.renderDiv=function(R,c){R.write("<div");c.forEach(function(C){R.addClass(C);});R.writeClasses();R.write(">");R.write("</div>");};
I.renderZoneResizeHandlers=function(R){Object.keys(H).forEach(function(k){this.renderZoneResizeHandler(R,k);},this);};
I.renderZoneResizeHandler=function(R,d){var c=this.getCommonHandlerClasses(d);c.push("sapSuiteUiCommonsImageEditorZoneResizeHandler");this.renderDiv(R,c);};
I.getCommonHandlerClasses=function(d){var h=H[d];return["ui-resizable-handle","ui-resizable-"+d,h.vertical,h.horizontal];};
return I;},true);
sap.ui.predefine('sap/suite/ui/commons/imageeditor/ImageEditorResponsiveContainer',["sap/suite/ui/commons/imageeditor/ImageEditorContainer","./ImageEditorContainerRenderer","sap/ui/Device","sap/m/Button","sap/m/Dialog","sap/m/Bar","sap/m/Title","sap/suite/ui/commons/ControlProxy"],function(I,a,D,B,b,c,T,C){"use strict";var r=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");
var d=I.extend("sap.suite.ui.commons.imageeditor.ImageEditorResponsiveContainer",{renderer:function(R,o){if(!D.system.phone||o._bInDialog){a.render.apply(this,arguments);}else{R.renderControl(o._getOpenButton());}}});
d.prototype._onImageLoaded=function(){I.prototype._onImageLoaded.apply(this,arguments);this._refreshTitle();};
d.prototype._getOpenButton=function(){var t=this;if(!this._oOpenButton){this._oOpenButton=new B({text:r.getText("IMGEDITOR_RESPONSIVE_OPEN"),press:function(){t._refreshTitle();t._getDialog().open();}});this.addDependent(this._oOpenButton);}return this._oOpenButton;};
d.prototype._getTitle=function(){if(!this._oTitle){this._oTitle=new T();this.addDependent(this._oTitle);}return this._oTitle;};
d.prototype._refreshTitle=function(){var i=this.getImageEditor(),t=r.getText("IMGEDITOR_DIALOG_TITLE");if(i&&i.getFileName()){t+=" - "+i.getFileName();}this._getTitle().setText(t);};
d.prototype._getDialog=function(){var t=this;if(!this._oDialog){var p=new C("test");p.setAssociation("control",this);this._oDialog=new b({stretch:true,verticalScrolling:false,beforeOpen:function(){t._bInDialog=true;},afterOpen:function(){t._zoomToFit();},beforeClose:function(){t._bInDialog=false;},customHeader:new c({contentMiddle:[t._getTitle()],contentRight:[new B({icon:"sap-icon://decline",press:function(){t._oDialog.close();}})]}),content:[p]});this.addDependent(this._oDialog);}return this._oDialog;};
return d;});
sap.ui.predefine('sap/suite/ui/commons/imageeditor/ResizeHistoryItem',["./HistoryItem","sap/base/assert"],function(H,a){"use strict";
var R=H.extend("sap.suite.ui.commons.imageeditor.ResizeHistoryItem",{constructor:function(p){H.apply(this,arguments);p=p||{};a(typeof p.width==="number","Width must be a number.");a(typeof p.height==="number","Height value must be a number.");a(typeof p.oldWidth==="number","Old width value must be a number.");a(typeof p.oldHeight==="number","Old height value must be a number.");this._iWidth=p.width;this._iHeight=p.height;this._iOldWidth=p.oldWidth;this._iOldHeight=p.oldHeight;}});
R.prototype.getWidth=function(){return this._iWidth;};
R.prototype.getHeight=function(){return this._iHeight;};
R.prototype.getOldWidth=function(){return this._iOldWidth;};
R.prototype.getOldHeight=function(){return this._iOldHeight;};
R.prototype.compare=function(h){var m=["getWidth","getHeight"];return this._compare(h,m);};
return R;});
sap.ui.predefine('sap/suite/ui/commons/imageeditor/RotateHistoryItem',["./HistoryItem","sap/base/assert"],function(H,a){"use strict";
var R=H.extend("sap.suite.ui.commons.imageeditor.RotateHistoryItem",{constructor:function(p){H.apply(this,arguments);p=p||{};a(typeof p.degrees==="number","Degrees must be a number.");this._iDegrees=p.degrees;}});
R.prototype.getDegrees=function(){return this._iDegrees;};
R.prototype.compare=function(){return false;};
return R;});
sap.ui.predefine('sap/suite/ui/commons/networkgraph/layout/SwimLaneChainLayout',["sap/suite/ui/commons/library","./LayoutAlgorithm","./Geometry","./LayoutTask"],function(l,L,G,a){"use strict";var O=l.networkgraph.Orientation;var b=l.networkgraph.LayoutRenderType,c=32,d=50,e=75,S=75,f=75,C=32,g=10,h=25;
var k=L.extend("sap.suite.ui.commons.networkgraph.layout.SwimlaneChainLayout",{metadata:{library:"sap.suite.ui.commons",properties:{}}});
k.prototype.getLayoutRenderType=function(){return b.SwimLanes;};
k.prototype.layout=function(){return new a(function(r,R,o){var i=this.getParent(),E;if(!i){R("The algorithm must be associated with a graph.");return;}this.oGraph=i;E=this._validateGraphDefinition();if(E){R(E);}this.bVertLane=i.getOrientation()===O.LeftRight||i.getOrientation()===O.RightLeft;this._calcLanesProperties();this._findRoots();this._initGrid();this._traceAndStackNodes();this._calcRowsProperties();this._calcNodesCoordinates();this.oGraph.getLines().forEach(function(j){this._traceSingleLine(j);this._calcLineCentroid(j);j._aNipples=[];}.bind(this));this._indexAllLineFragments();this._cutLinesAtBoxNodeBorders();this._removeLineOverlays(this.aHorizontalFragments,true);this._removeLineOverlays(this.aVerticalFragments,false);this._calcLanesWidthsAndPositions();this._collapseShiftNodesAndLines();this._alignCoordinatesWithView();this._beautify();this._findAllNipples();this._cullLineFragmentsInCollapsedGroups();if((!this.oGraph._bIsRtl&&i.getOrientation()===O.RightLeft)||(this.oGraph._bIsRtl&&i.getOrientation()===O.LeftRight)){this._verticalMirror();}else if(i.getOrientation()===O.BottomTop){this._horizontalMirror();}r();}.bind(this));};
k.prototype._validateGraphDefinition=function(){var u=[];this.oGraph.getNodes().forEach(function(n){if(!n.getGroup()){u.push(n.getKey());}});if(u.length>0){return"Some nodes are missing swim lanes: "+u.join();}if(this._hasHierarchicalGroups()){return"Swim lane layout algorithm doesn't support hierarchical groups.";}return null;};
k.prototype._calcLanesProperties=function(){this.aLanes=[];this.oGraph.getGroups().forEach(function(j){if(this.bVertLane){j.setY(0);}else{j.setX(0);}this.aLanes.push(j.getKey());}.bind(this));this.aLanes.sort();this.oGraph.getNodes().forEach(function(N){N._iGroupIndex=this.aLanes.indexOf(N.getGroup());}.bind(this));var n;this.aLaneWidths={};this.aLaneOffsets={};this.oGraph.getNodes().forEach(function(N){n=this.bVertLane?N._iWidth:N._iHeight;if(!this.aLaneWidths[N._iGroupIndex]||this.aLaneWidths[N._iGroupIndex]<n){this.aLaneWidths[N._iGroupIndex]=n;}}.bind(this));var i;this.aLaneGroups={};this.oGraph.getGroups().forEach(function(j){i=this.aLanes.indexOf(j.getKey());if(this.aLaneWidths[i]<j.getMinWidth()){this.aLaneWidths[i]=j.getMinWidth();}this.aLaneGroups[i]=j;}.bind(this));var o=0;Object.keys(this.aLaneWidths).forEach(function(i){if(o>0){o+=S;}this.aLaneOffsets[i]=o;o+=this.aLaneWidths[i];}.bind(this));};
k.prototype._findRoots=function(){this.aRoots=[];this.oGraph.getNodes().forEach(function(n){if((n._iGroupIndex===0)&&(n.aParents.length===0)){this.aRoots.push(n);}}.bind(this));this.oGraph.getNodes().forEach(function(n){if((n._iGroupIndex>0)&&(n.aParents.length===0)){this.aRoots.push(n);}}.bind(this));this.oGraph.getNodes().forEach(function(n){this.aRoots.push(n);}.bind(this));};
k.prototype._initGrid=function(){this.aGrid=[];this.oGraph.getNodes().forEach(function(n){if(!this.aGrid[n._iGroupIndex]){this.aGrid[n._iGroupIndex]=[];}n._bChainTraced=false;}.bind(this));};
k.prototype._traceAndStackNodes=function(){this.aRoots.forEach(function(r){if(!r._bChainTraced){this.aGrid[r._iGroupIndex].push(r);r._bChainTraced=true;this._traceNodeChainDepthFirst(r);}}.bind(this));};
k.prototype._traceNodeChainDepthFirst=function(n){n.aChildren.forEach(function(o){if(!o._bChainTraced){o._bChainTraced=true;this.aGrid[o._iGroupIndex].push(o);this._traceNodeChainDepthFirst(o);}}.bind(this));};
k.prototype._calcRowsProperties=function(){var m=0,n;this.aGrid.forEach(function(s){if(s.length>m){m=s.length;}});this.aRowHeights=[];this.aRowOffsets=[];for(var r=0;r<m;r++){this.aGrid.forEach(function(s){if(!s[r]){return;}n=this.bVertLane?s[r]._iHeight:s[r]._iWidth;if(!this.aRowHeights[r]||this.aRowHeights[r]<n){this.aRowHeights[r]=n;}}.bind(this));}var i=-1,o=0;this.aRowHeights.forEach(function(H){i++;if(i>0){o+=S;}this.aRowOffsets[i]=o;o+=H;}.bind(this));this.fGridHeight=this.aRowOffsets[m-1]+this.aRowHeights[m-1];if(this.bVertLane){this.fGridHeight+=d;}else{this.fGridHeight+=e;}this.oGraph.getGroups().forEach(function(j){if(this.bVertLane){j._iHeight=this.fGridHeight;}else{j._iWidth=this.fGridHeight;}}.bind(this));};
k.prototype._calcNodesCoordinates=function(){var y;this.aGrid.forEach(function(s){y=-1;s.forEach(function(n){y++;if(this.bVertLane){n.setX(this.aLaneOffsets[n._iGroupIndex]+this.aLaneWidths[n._iGroupIndex]/2-n._iWidth/2+S/2);n.setY(this.aRowOffsets[y]+this.aRowHeights[y]/2-n._iHeight/2+f/2);}else{n.setX(this.aRowOffsets[y]+this.aRowHeights[y]/2-n._iWidth/2+f/2);n.setY(this.aLaneOffsets[n._iGroupIndex]+this.aLaneWidths[n._iGroupIndex]/2-n._iHeight/2+S/2);}n.iRow=y;}.bind(this));}.bind(this));};
k.prototype._calcLineCentroid=function(o){var i=o.getBends().length+2,x=o.getSource().getX()+o.getTarget().getX(),y=o.getSource().getY()+o.getTarget().getY();o.getBends().forEach(function(B){x+=B.getX();y+=B.getY();});o._oCentroid={x:x/i,y:y/i};};
k.prototype._indexAllLineFragments=function(){this.aVerticalFragments=[];this.aHorizontalFragments=[];this.oGraph.getLines().forEach(function(o){this._indexLineFragments(o);}.bind(this));};
k.prototype._indexLineFragments=function(o){var p=this._getLinePointsList(o),j,m;for(var i=0;i<p.length-1;i++){j=p[i];m=p[i+1];if(j.x===m.x){if(j.y<m.y){this.aVerticalFragments.push({line:o,index:i,cc:j.x,c1:j.y,c2:m.y});}else{this.aVerticalFragments.push({line:o,index:i,cc:j.x,c1:m.y,c2:j.y,invert:true});}}else if(j.y===m.y){if(j.x<m.x){this.aHorizontalFragments.push({line:o,index:i,cc:j.y,c1:j.x,c2:m.x});}else{this.aHorizontalFragments.push({line:o,index:i,cc:j.y,c1:m.x,c2:j.x,invert:true});}}}};
k.prototype._removeLineOverlays=function(F,H){var o,m,s,n,p;for(var i=0;i<F.length;i++){o=F[i];m=[o];for(var j=i+1;j<F.length;j++){if(this._doFragmentsIntersect(o,F[j])){m.push(F[j]);}}if(m.length===1){continue;}m.sort(function(q,r){if(H){return q.line._oCentroid.y-r.line._oCentroid.y;}else{return q.line._oCentroid.x-r.line._oCentroid.x;}});s=(m.length-1)*g;if(s>h){s=h;}n=s/(m.length-1);p=o.cc-s/2;for(j=0;j<m.length;j++){this._shiftLineFragment(m[j],p,!H);p+=n;}}};
k.prototype._shiftLineFragment=function(F,n,H){var i=F.line.getCoordinates()[F.index],j=F.line.getCoordinates()[F.index+1];F.cc=n;if(H){i.setX(n);j.setX(n);}else{i.setY(n);j.setY(n);}};
k.prototype._doFragmentsIntersect=function(F,o){return(F.cc===o.cc)&&!(F.c1<o.c1&&F.c1<o.c2&&F.c2<o.c1&&F.c2<o.c2||F.c1>o.c1&&F.c1>o.c2&&F.c2>o.c1&&F.c2>o.c2);};
k.prototype._getLinePointsList=function(o){var p=[];p.push({x:o.getSource().getX(),y:o.getSource().getY()});o.getBends().forEach(function(B){p.push({x:B.getX(),y:B.getY()});});p.push({x:o.getTarget().getX(),y:o.getTarget().getY()});return p;};
k.prototype._calcLanesWidthsAndPositions=function(){var o,i=0;this.aLanes.forEach(function(K,j){o=this.oGraph.mGroups[K];o._fExpandedWidth=this.aLaneWidths[j]+S;o._fExpandedPosition=this.aLaneOffsets[j];if(this.bVertLane){o.setX(this.aLaneOffsets[j]+i);}else{o.setY(this.aLaneOffsets[j]+i);}if(o.getCollapsed()){if(this.bVertLane){o._iWidth=C;}else{o._iHeight=C;}if(o.getNodes().length>0){i+=(C-(this.aLaneWidths[j]+S));}}else{if(this.bVertLane){o._iWidth=o._fExpandedWidth;}else{o._iHeight=o._fExpandedWidth;}}}.bind(this));};
k.prototype._collapseShiftNodesAndLines=function(){var s,i,o;this.aLanes.forEach(function(K){o=this.oGraph.mGroups[K];i=C/o._fExpandedWidth;this.oGraph.getNodes().forEach(function(n){if(this.bVertLane){if(n.getCenterPosition().x>o._fExpandedPosition&&n.getCenterPosition().x<=(o._fExpandedPosition+o._fExpandedWidth)){s=o.getX()-o._fExpandedPosition;if(o.getCollapsed()){s+=(C-o._fExpandedWidth)/2;}n.setX(n.getX()+s);}}else{if(n.getCenterPosition().y>o._fExpandedPosition&&n.getCenterPosition().y<=(o._fExpandedPosition+o._fExpandedWidth)){s=o.getY()-o._fExpandedPosition;if(o.getCollapsed()){s+=(C-o._fExpandedWidth)/2;}n.setY(n.getY()+s);}}}.bind(this));this.oGraph.getLines().forEach(function(j){j.getCoordinates().forEach(function(m){if(this.bVertLane){if(m.getX()>o._fExpandedPosition&&m.getX()<=(o._fExpandedPosition+o._fExpandedWidth)){s=o.getX()-o._fExpandedPosition;if(o.getCollapsed()){s-=(m.getX()-o._fExpandedPosition)*(1-i);}m.setX(m.getX()+s);}}else{if(m.getY()>o._fExpandedPosition&&m.getY()<=(o._fExpandedPosition+o._fExpandedWidth)){s=o.getY()-o._fExpandedPosition;if(o.getCollapsed()){s-=(m.getY()-o._fExpandedPosition)*(1-i);}m.setY(m.getY()+s);}}}.bind(this));}.bind(this));}.bind(this));};
k.prototype._traceSingleLine=function(o){var F,t,j,T;F=o.getFromNode();t=o.getToNode();j=F.getCenterPosition();T=t.getCenterPosition();o.setSource({x:j.x,y:j.y});o.setTarget({x:T.x,y:T.y});o.clearBends();var m=(this.aLaneWidths[F._iGroupIndex]+S)/2,n=(this.aLaneWidths[t._iGroupIndex]+S)/2,p=(this.aRowHeights[F.iRow]+f)/2,q=(this.aRowHeights[t.iRow]+f)/2;if((F._iGroupIndex===t._iGroupIndex)&&(Math.abs(F.iRow-t.iRow)===1)||(F.iRow===t.iRow)&&(Math.abs(F._iGroupIndex-t._iGroupIndex)===1)){}else if(F._iGroupIndex===t._iGroupIndex){if(this.bVertLane){o.addBend({x:j.x+m,y:j.y});o.addBend({x:T.x+n,y:T.y});}else{o.addBend({x:j.x,y:j.y+m});o.addBend({x:T.x,y:T.y+n});}}else if(F.iRow===t.iRow){var E=true,M=Math.min(F._iGroupIndex,t._iGroupIndex),r=Math.max(F._iGroupIndex,t._iGroupIndex);for(var i=M+1;i<r;i++){if(this.aGrid[i]&&this.aGrid[i].length>F.iRow){E=false;}}if(!E){if(this.bVertLane){o.addBend({x:j.x,y:j.y+p});o.addBend({x:T.x,y:T.y+q});}else{o.addBend({x:j.x+p,y:j.y});o.addBend({x:T.x+q,y:T.y});}}}else if(Math.abs(F.iRow-t.iRow)===1){if(this.bVertLane){if(F.iRow<t.iRow){o.addBend({x:j.x,y:j.y+p});o.addBend({x:T.x,y:T.y-q});}else{o.addBend({x:j.x,y:j.y-p});o.addBend({x:T.x,y:T.y+q});}}else{if(F.iRow<t.iRow){o.addBend({x:j.x+p,y:j.y});o.addBend({x:T.x-q,y:T.y});}else{o.addBend({x:j.x-p,y:j.y});o.addBend({x:T.x+q,y:T.y});}}}else if(Math.abs(F._iGroupIndex-t._iGroupIndex)===1){if(this.bVertLane){if(F._iGroupIndex<t._iGroupIndex){o.addBend({x:j.x+m,y:j.y});o.addBend({x:T.x-n,y:T.y});}else{o.addBend({x:j.x-m,y:j.y});o.addBend({x:T.x+n,y:T.y});}}else{if(F._iGroupIndex<t._iGroupIndex){o.addBend({x:j.x,y:j.y+m});o.addBend({x:T.x,y:T.y-n});}else{o.addBend({x:j.x,y:j.y-m});o.addBend({x:T.x,y:T.y+n});}}}else{var x,y;if(this.bVertLane){x=(F._iGroupIndex<t._iGroupIndex)?j.x+m:j.x-m;o.addBend({x:x,y:j.y});y=(F.iRow<t.iRow)?T.y-q:T.y+q;o.addBend({x:x,y:y});o.addBend({x:T.x,y:y});}else{y=(F._iGroupIndex<t._iGroupIndex)?j.y+m:j.y-m;o.addBend({x:j.x,y:y});x=(F.iRow<t.iRow)?T.x-q:T.x+q;o.addBend({x:x,y:y});o.addBend({x:x,y:T.y});}}var P,B;if(o.getBends().length>0){B=o.getBends()[o.getBends().length-1];P={x:B.getX(),y:B.getY()};}else{P=j;}if(T.x===P.x){if(T.y<P.y){o.setTarget({x:T.x,y:T.y+t._iHeight/2});}else{o.setTarget({x:T.x,y:T.y-t._iHeight/2});}}else{if(T.x<P.x){o.setTarget({x:T.x+t._iWidth/2,y:T.y});}else{o.setTarget({x:T.x-t._iWidth/2,y:T.y});}}};
k.prototype._beautify=function(){if(this.bVertLane){this.oGraph.getGroups().forEach(function(o){o._iHeight+=c;this._shiftGraph(0,4,true);}.bind(this));}else{this._shiftGraph(c/2,0,true);}};
k.prototype._alignCoordinatesWithView=function(){var B=this._getGraphBoundingBox();this._shiftGraph(-B.p1.x,-B.p1.y);};
k.prototype._findAllNipples=function(){var F,s,o,i,j,t,m,n,E,p,N,q;this._indexAllLineFragments();F=this.bVertLane?this.aHorizontalFragments:this.aVerticalFragments;F.forEach(function(r){s=Object.keys(this.aLaneOffsets).length-1;Object.keys(this.aLaneOffsets).forEach(function(u,I){if(I===s){return;}o=this.aLaneGroups[u];i=this.aLaneGroups[Object.keys(this.aLaneOffsets)[I+1]];if(!o.getCollapsed()&&!i.getCollapsed()){return;}j=r.line.getFromNode()._oGroup;t=r.line.getToNode()._oGroup;if(o.getCollapsed()&&i.getCollapsed()&&j===o&&t===i){return;}m=o.getCollapsed()&&(o.getKey()===j.getKey()||o.getKey()===t.getKey());n=i.getCollapsed()&&(i.getKey()===j.getKey()||i.getKey()===t.getKey());N=undefined;E=o.getX()+o._iWidth;p=o.getY()+o._iHeight;if(this.bVertLane){if(((m&&r.c1<=E&&r.c2>E)||((n)&&r.c1<E&&r.c2>=E))&&r.cc>o.getY()&&r.cc<p){N={x:E,y:r.cc};}}else{if(((m&&r.c1<=p&&r.c2>p)||((n)&&r.c1<p&&r.c2>=p))&&r.cc>o.getX()&&r.cc<E){N={x:r.cc,y:p};}}if(N){if(m){if(this.bVertLane){q=O.LeftRight;}else{q=O.TopBottom;}}else if(n){if(this.bVertLane){q=O.RightLeft;}else{q=O.BottomTop;}}else{return;}r.line._aNipples.push({x:N.x,y:N.y,orientation:q});}}.bind(this));}.bind(this));};
k.prototype._cullLineFragmentsInCollapsedGroups=function(){var F,s,i=function(o,m){return o.getX()>=m.getX()&&o.getX()<=(m.getX()+m._iWidth)&&o.getY()>=m.getY()&&o.getY()<=(m.getY()+m._iHeight);},j=function(o,r){var n=r?o.getToNode():o.getFromNode(),m=function(){return r?o.getCoordinates().length-1:0;},p;if(!n._isInCollapsedGroup()){return;}p=n._oGroup;while(o.getCoordinates().length>0&&i(o.getCoordinates()[m()],p)){F=o.getCoordinates()[m()];s=o.getCoordinates()[m()+(r?-1:1)];if(s&&!i(s,p)){if(this.bVertLane){if(s.getX()<F.getX()){F.setX(p.getX());}else{F.setX(p.getX()+p._iWidth);}}else{if(s.getY()<F.getY()){F.setY(p.getY());}else{F.setY(p.getY()+p._iHeight);}}break;}else{o.removeAggregation("coordinates",m(),true);}}}.bind(this);this.oGraph.getLines().forEach(function(o){j(o,false);j(o,true);});};
return k;});
sap.ui.predefine('sap/suite/ui/commons/networkgraph/layout/TwoColumnsLayout',["sap/suite/ui/commons/library","./LayoutAlgorithm","./Geometry","./LayoutTask"],function(l,L,G,c){"use strict";var d=l.networkgraph.LayoutRenderType;var e=15,S=75,C=32,f=42,g=160,h=100,j=50,m=25,n=10,o=0.6,I=20;
var T=L.extend("sap.suite.ui.commons.networkgraph.layout.TwoColumnsLayout");
T.prototype.getLayoutRenderType=function(){return d.TwoColumns;};
T.prototype.layout=function(){return new c(function(r,R,a){var b=this.getParent(),E;if(!b){R("The algorithm must be associated with a graph.");return;}this.oGraph=b;this.oLeftColumn=undefined;this.oRightColumn=undefined;E=this._validateGraphDefinition();if(E){R(E);}this._preprocessGroupsAndNodes();E=this._validateLines();if(E){R(E);}this._calcLanesProperties();this._createNodesGrid();this._calcNodeEndingAndStartingPoints();this._setNodesCoordinates();this._setGroupCoordinates();this._setLinesCoordinates();this._cutLinesAtBoxNodeBorders();if(this.oGraph._bIsRtl){this._verticalMirror();}r();}.bind(this));};
T.prototype._validateGraphDefinition=function(){var u=[];this.oGraph.getNodes().forEach(function(N){if(!N.getGroup()){u.push(N.getKey());}});if(u.length>0){return"Some nodes are missing group: "+u.join();}return null;};
T.prototype._preprocessGroupsAndNodes=function(){if(this.oGraph.getGroups().some(function(a){a._oFirstNode=null;a._oLastNode=null;a._bNestedSet=false;if(!a._oParentGroup){if(!this.oLeftColumn){this.oLeftColumn=a;}else if(!this.oRightColumn){this.oRightColumn=a;}else{return true;}}return false;}.bind(this))){return"There are too many columns, ie. groups without a parent group. Expected exactly 2.";}if(!this.oRightColumn||!this.oLeftColumn){return"There are too few columns, ie. groups without a parent group. Expected exactly 2.";}this.oGraph.getNodes().forEach(function(N){N._iStartingGroupCount=0;N._iEndingGroupCount=0;});};
T.prototype._validateLines=function(){var F,t;if(this.oGraph.getLines().some(function(a){F=a.getFromNode()._oGroup._oTopParentGroup;t=a.getToNode()._oGroup._oTopParentGroup;return!((F===this.oLeftColumn&&t===this.oRightColumn)||(t===this.oLeftColumn&&F===this.oRightColumn));}.bind(this))){return"For Two columns layout all lines have to go from one column to the other.";}else{return null;}};
T.prototype._calcLanesProperties=function(){var a;this.aLanes=[];this.oGraph.getGroups().forEach(function(b){if(!b.getParentGroupKey()){this.aLanes.push(b.getKey());}}.bind(this));this.aLanes.sort();var M=this.aLanes.map(Number.prototype.valueOf,0);this.oGraph.getNodes().forEach(function(N){var b=N._oGroup,u=(b._oTopParentGroup&&b._oTopParentGroup.getKey())||N.getGroup();a=this.aLanes.indexOf(u);N._iGroupIndex=b._iLaneIndex=a;if(b._iNestedLevel>M[a]){M[a]=b._iNestedLevel;}}.bind(this));this.oGraph.getGroups().forEach(function(b){var u=(b._oTopParentGroup&&b._oTopParentGroup.getKey())||b.getKey();b._iLaneIndex=this.aLanes.indexOf(u);}.bind(this));this.aLaneWidths=[];this.oGraph.getNodes().forEach(function(N){if(!this.aLaneWidths[N._iGroupIndex]||this.aLaneWidths[N._iGroupIndex]<N._iWidth){this.aLaneWidths[N._iGroupIndex]=N._iWidth;}}.bind(this));this.aLaneWidths=this.aLaneWidths.map(function(w,i){var b=this.oGraph.mGroups[this.aLanes[i]],k=b.getMinWidth()||g;return Math.max(k,w);}.bind(this));this.aLaneGroupWidths=this.aLaneWidths.map(function(w,i){return w+M[i]*e*2;});var A=this.oGraph.$("innerscroller").width();A=Math.max(this.aLaneGroupWidths[0]+this.aLaneGroupWidths[1]+h+m*2,A);this.aLaneCenters=[m+(this.aLaneGroupWidths[0]/2)+(this.oGraph._bIsRtl?30:0),A-this.aLaneGroupWidths[1]/2-m*1.5];};
T.prototype._createNodesGrid=function(){var a=this.oGraph.getGroups(),b=0;var t=a.filter(function(i){return i._iNestedLevel===0;});this.aGrid=this.aLanes.map(function(i){return[];});var p=function(i){i.aNodes.forEach(function(k){var q=k._oGroup._oCollapsedByParent,r=q||i;if(!i.getCollapsed()&&!q){this.aGrid[b].push(k);}else if(r.getCollapsed()){while(r._oCollapsedByParent){r=r._oCollapsedByParent;}if(!r._bNestedSet){r._bNestedSet=true;this.aGrid[b].push(k);}}}.bind(this));i.aChildGroups.forEach(function(k){p(k);});}.bind(this);t.forEach(function(k,i){k._iTopGroupIndex=i;p(k);b++;});};
T.prototype._calcNodeEndingAndStartingPoints=function(){var p=function(q,N,O,s,A){var r=q._oParentGroup;while(r&&r._iNestedLevel>0){if(!r[O]||A){r[O]=N;if(!r._oCollapsedByParent&&!r.getCollapsed()){N[s]++;}}else{return;}r=r._oParentGroup;}};var P=function(q){if(!q._oGroup._oLastNode){q._oGroup._oLastNode=q;if(!q._oGroup._oCollapsedByParent&&!q._oGroup.getCollapsed()){q._iEndingGroupCount++;}p(q._oGroup,q,"_oLastNode","_iEndingGroupCount",false);}};var a=function(F){if(!F._oGroup._oFirstNode){F._oGroup._oFirstNode=F;if(!F._oGroup._oCollapsedByParent&&!F._oGroup.getCollapsed()){F._iStartingGroupCount++;}p(F._oGroup,F,"_oFirstNode","_iStartingGroupCount",false);}};for(var i=0;i<this.aGrid.length;i++){var b=null;for(var k=0;k<this.aGrid[i].length;k++){var N=this.aGrid[i][k];if(N._oGroup!==b){a(N);b=N._oGroup;}}b=null;for(var k=this.aGrid[i].length-1;k>=0;k--){var N=this.aGrid[i][k];if(N._oGroup!==b){P(N);b=N._oGroup;}}}};
T.prototype._setGroupCoordinates=function(){var M=this.aLanes.map(Number.prototype.valueOf,0);var a=function(i,N){var k=N._oGroup._oCollapsedByParent||N._oGroup.getCollapsed()?0:1,p=N._oGroup._oParentGroup;if(i===N._oGroup){return k;}while(p){if(!p._oCollapsedByParent&&!p.getCollapsed()){k++;}if(i===p){break;}p=p._oParentGroup;}return k;};var b=function(i,N){var k=0,p=N._oGroup._oParentGroup;if(i===N._oGroup){return k;}while(p){if(!p._oCollapsedByParent&&!p.getCollapsed()){k++;}if(i===p){break;}p=p._oParentGroup;}return k;};this.oGraph.getGroups().forEach(function(i){M[i._iLaneIndex]=i._iNestedLevel>M[i._iLaneIndex]?i._iNestedLevel:M[i._iLaneIndex];});this.oGraph.getGroups().forEach(function(i){if(i._iNestedLevel===0){i.setX(this.aLaneCenters[i._iLaneIndex]-this.aLaneWidths[i._iLaneIndex]);i.setY(0);}else if(i._oLastNode&&i._oFirstNode){i._iWidth=this.aLaneWidths[i._iLaneIndex]+((M[i._iLaneIndex]-i._iNestedLevel)*e*2)+e*2;i.setX(this.aLaneCenters[i._iLaneIndex]-i._iWidth/2);var O=b(i,i._oLastNode),k=O*(e/2)+(e/2),p=a(i,i._oFirstNode),q=p*f;var y=i._oFirstNode.getY()-q,r=i._oLastNode._oGroup.getCollapsed()||i._oLastNode._oGroup._oCollapsedByParent?C:i._oLastNode._iHeight;i.setY(y);i._iHeight=i.getCollapsed()?C:i._oLastNode.getY()+r-y+k;}}.bind(this));};
T.prototype._setNodesCoordinates=function(){this.aGrid.forEach(function(s){var y=j;s.forEach(function(N){var t=N._oGroup._oCollapsedByParent||N._oGroup;N.setX(this.aLaneCenters[N._iGroupIndex]-N._iWidth/2);y+=N._iStartingGroupCount*f;N.setY(y);y+=S/2;y+=N._iEndingGroupCount*e/2;y+=t.getCollapsed()?C:N._iHeight;}.bind(this));}.bind(this));};
T.prototype._setLinesCoordinates=function(){var F,t,i,k,p=[],r=[],B=[],q=function(N){var a;if(!N._oGroup){return null;}a=N._oGroup;while(a&&a._isCollapsed()){if(!a._oParentGroup||!a._oParentGroup._isCollapsed()){return a;}a=a._oParentGroup;}return null;},s=function(a){var E;if(a._oTopParentGroup===this.oLeftColumn){E=a.getX()+a._iWidth+2*a._getBorderSize();}else{E=a.getX();}return{x:E,y:a.getY()+a._iHeight/2};},A=function(N){var v,w,x;if(N.groupDelegate){N.anchors.forEach(function(a){N.groupDelegate.anchors.push({node:N,line:a.line,oppositeY:a.oppositeY});if(N.isLeftie){B.push(a.line);}});return;}v=(N._iHeight-2*n)/(N.anchors.length-1);w=(N.anchors.length===1)?N.getCenterPosition().y:N.getY()+n;x=w;N.anchors.sort(function(a,b){return a.oppositeY-b.oppositeY;}).forEach(function(a){var b=a.line,y=N.getCenterPosition().x;if(N===b.getFromNode()){b.setSource({x:y,y:x});}else if(N===b.getToNode()){b.setTarget({x:y,y:x});}x+=v;if(N.isLeftie){B.push(b);}});},u=function(v){var w=s.bind(this)(v),x=(v._iHeight-2*n)/(v.anchors.length-1),y=(v.anchors.length===1)?s.bind(this)(v).y:v.getY()+n,z=y;v.anchors.sort(function(a,b){return a.oppositeY-b.oppositeY;}).forEach(function(a){var b=a.line;if(a.node===b.getFromNode()){b.setSource({x:w.x,y:z});}else if(a.node===b.getToNode()){b.setTarget({x:w.x,y:z});}z+=x;});},P=function(){var a=o*(this.oRightColumn.getX()-(this.oLeftColumn.getX()+this.oLeftColumn._iWidth)),b=this.oGraph.getLines().length-1,v=a/b,R=v<I?v:I,w=(p[0].getCenterPosition().x+r[0].getCenterPosition().x)/2,x=w-b*R/2,y=x;B.forEach(function(z){z.addBend({x:y,y:z.getSource().getY()});z.addBend({x:y,y:z.getTarget().getY()});y+=R;});}.bind(this);this.oGraph.getNodes().forEach(function(N){if(N._oGroup){if(N._oGroup._oTopParentGroup===this.oLeftColumn){N.isLeftie=true;p.push(N);}else if(N._oGroup._oTopParentGroup===this.oRightColumn){N.isLeftie=false;r.push(N);}}N.groupDelegate=q(N);N.anchors=[];}.bind(this));this.oGraph.getLines().forEach(function(a){F=a.getFromNode();t=a.getToNode();i=F.getCenterPosition();k=t.getCenterPosition();F.anchors.push({line:a,oppositeY:k.y});t.anchors.push({line:a,oppositeY:i.y});a.setSource({x:0,y:0});a.clearBends();});this.oGraph.getGroups().forEach(function(a){a.anchors=[];});p.sort(function(a,b){return a.getY()-b.getY();}).forEach(A);r.sort(function(a,b){return a.getY()-b.getY();}).forEach(A);this.oGraph.getGroups().sort(function(a,b){return a.getY()-b.getY();}).forEach(u.bind(this));P();};
return T;});
sap.ui.predefine('sap/suite/ui/commons/statusindicator/Rectangle',["sap/suite/ui/commons/util/HtmlElement","sap/suite/ui/commons/statusindicator/SimpleShape","sap/suite/ui/commons/statusindicator/SimpleShapeRenderer"],function(H,S,a){"use strict";
var R=S.extend("sap.suite.ui.commons.statusindicator.Rectangle",{
metadata:{properties:{x:{type:"int",defaultValue:0},y:{type:"int",defaultValue:0},rx:{type:"int",defaultValue:0},ry:{type:"int",defaultValue:0},width:{type:"int",defaultValue:0},height:{type:"int",defaultValue:0}}},
renderer:a
});
R.prototype._getSimpleShapeElement=function(r){var o=new H("rect");o.setId(this._buildIdString(r));o.setAttribute("x",this.getX());o.setAttribute("y",this.getY());o.setAttribute("width",this.getWidth());o.setAttribute("height",this.getHeight());o.setAttribute("rx",this.getRx());o.setAttribute("ry",this.getRy());o.setAttribute("stroke-width",this.getStrokeWidth());o.setAttribute("stroke",this._getCssStrokeColor());return o;};
return R;});
sap.ui.predefine('sap/suite/ui/commons/statusindicator/util/AnimationPropertiesResolver',["sap/suite/ui/commons/statusindicator/Shape","sap/suite/ui/commons/statusindicator/ShapeGroup","sap/suite/ui/commons/statusindicator/CustomShape","sap/base/Log"],function(S,a,C,L){"use strict";var A=function(s){this._oStatusIndicator=s;this.aOnDiscreteThresholdChange=[];this.aOnPropertyThresholdChange=[];};
A.prototype.addDiscreteThresholdChange=function(c){this.aOnDiscreteThresholdChange.push(c);};
A.prototype.addPropertyThresholdChange=function(c){this.aOnPropertyThresholdChange.push(c);};
A.prototype.getValue=function(s,i){var p=s.getParent();if(!p instanceof a){L.fatal("Shape should be always direct child of ShapeGroup.");return i;}if(!this._oStatusIndicator._discreteThresholdsEnabled()){return i;}return this._getGroupValue(p,this._getCappedValue(p,i));};
A.prototype._getCappedValue=function(g,s){var n=this._getStatusIndicatorValue(g,s);var d=this._oStatusIndicator._getDiscreteThresholdForValue(n);return d?d.getValue():0;};
A.prototype.propagateValueChange=function(s,n){if(!this._oStatusIndicator._discreteThresholdsEnabled()){return;}var g=s.getParent();var o=this._getCappedValue(g,s.getDisplayedValue());var N=this._getCappedValue(g,n);if(o!==N){this.aOnDiscreteThresholdChange.forEach(function(O){O(N);});}};
A.prototype.getColor=function(s,i){var p=s.getParent();if(p instanceof C){i=p.getDisplayedValue();p=p.getParent();}var b=this._getStatusIndicatorSliderValue();var n=s._getCssFillColor();if(this._oStatusIndicator._propertyThresholdsEnabled()){var P=this._oStatusIndicator._getPropertyThresholdForValue(b);if(P){n=P._getCssFillColor();}}return n;};
A.prototype.propagateColorChange=function(s,i){if(!this._oStatusIndicator._propertyThresholdsEnabled()){return;}var p=s.getParent();var n=this._getPropertyThreshold(p,i);var o=this._getPropertyThreshold(p,s.getDisplayedValue());if(n!==o){this.aOnPropertyThresholdChange.forEach(function(O){O(n._getCssFillColor());});}};
A.prototype._getPropertyThreshold=function(g,s){var i=this._getStatusIndicatorValue(g,s);return this._oStatusIndicator._getPropertyThresholdForValue(i);};
A.prototype._getStatusIndicatorValue=function(c,s){var t=this;var g=this._oStatusIndicator.getGroups();var i=0;g.some(function(G){var f=G.getWeight()/t._getTotalWeight();if(G!==c){var F=100*f;i+=F;return false;}var b=s*f;i+=b;return true;});return Number(i.toPrecision(3));};
A.prototype._getStatusIndicatorSliderValue=function(){var s=0;if(this._oStatusIndicator){s=this._oStatusIndicator.getValue();}return s;};
A.prototype._getGroupValue=function(c,s){var g=this._oStatusIndicator.getGroups();var t=this._getTotalWeight();var r=0;g.some(function(G){var f=G.getWeight()/t;var n;if(s===0){n=0;}else if(s>=100*f){n=100;}else{n=s/f;}s-=n*f;if(c!==G){return false;}r=n;return true;});return r;};
A.prototype._getTotalWeight=function(){return this._oStatusIndicator.getGroups().reduce(function(i,g){return i+g.getWeight();},0);};
return A;});
sap.ui.predefine('sap/suite/ui/commons/statusindicator/util/ProgressHandler',[],function(){"use strict";var P=function(p){var t=this;this._fnResolveCallback=null;this._oPromise=null;this._bInProgress=false;this._fnProgress=p;this._oInnerProgressHandler={finish:function(){t.finish();},stop:function(r){t.stop(r);},isCanceled:function(){return t.isCanceled();}};};
P.prototype.start=function(){var t=this;if(this._oPromise){return this._oPromise;}this._oPromise=new Promise(function(r,a){t._fnResolveCallback=r;t._bInProgress=true;t._fnProgress(t._oInnerProgressHandler);});return this._oPromise;};
P.prototype.finish=function(){this._bInProgress=false;if(this._fnResolveCallback){this._fnResolveCallback();this._fnResolveCallback=null;}};
P.prototype.stop=function(r){this._bInProgress=false;if(this._fnResolveCallback){this._fnResolveCallback(r);this._fnResolveCallback=null;}};
P.prototype.cancel=function(){this._bCancelled=true;};
P.prototype.isCanceled=function(){return this._bCancelled;};
P.prototype.isInProgress=function(){return this._bInProgress;};
return P;},true);
sap.ui.predefine('sap/suite/ui/commons/statusindicator/util/ThemingUtil',["sap/ui/core/theming/Parameters","sap/m/library","sap/ui/core/library"],function(P,m,c){"use strict";var V=m.ValueColor;var C=c.CSSColor;var T=function(){throw new Error();};
T.resolveColor=function(s){if(C.isValid(s)){return s;}switch(s){case V.Good:return P.get("sapPositiveColor");case V.Error:return P.get("sapNegativeColor");case V.Critical:return P.get("sapCriticalColor");case V.Neutral:return P.get("sapNeutralColor");default:return P.get(s);}};
return T;},true);
sap.ui.predefine('sap/suite/ui/commons/taccount/TAccount',["sap/suite/ui/commons/library","sap/ui/Device","sap/ui/core/Control","sap/ui/core/delegate/ItemNavigation","./TAccountGroup","sap/ui/core/IconPool","sap/ui/core/Icon","sap/ui/core/InvisibleText","sap/base/security/encodeXML","./TAccountUtils","sap/suite/ui/commons/Utils","sap/ui/thirdparty/bignumber","sap/ui/thirdparty/jqueryui/jquery-ui-core","sap/ui/thirdparty/jqueryui/jquery-ui-widget","sap/ui/thirdparty/jqueryui/jquery-ui-mouse","sap/ui/thirdparty/jqueryui/jquery-ui-draggable","sap/ui/thirdparty/jqueryui/jquery-ui-droppable","sap/ui/thirdparty/jqueryui/jquery-ui-selectable"],function(l,D,C,I,T,a,b,c,e,d,U,B){"use strict";var r=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var f=Object.freeze({UP:"UP",DOWN:"DOWN",PREVIOUS:"PREVIOUS",NEXT:"NEXT"});var s=D.os.macintosh?"metaKey":"ctrlKey";
var g=C.extend("sap.suite.ui.commons.taccount.TAccount",{
metadata:{library:"sap.suite.ui.commons",properties:{measureOfUnit:{type:"string",group:"Misc",defaultValue:""},collapsed:{type:"boolean",group:"Misc",defaultValue:false},title:{type:"string",group:"Misc",defaultValue:null},subtitle:{type:"string",group:"Misc",defaultValue:null},orderBy:{type:"string",group:"Misc",defaultValue:""},opening:{type:"boolean",group:"Misc",defaultValue:false},openingDebit:{type:"any",group:"Misc",defaultValue:0},openingCredit:{type:"any",group:"Misc",defaultValue:0}},aggregations:{debit:{type:"sap.suite.ui.commons.taccount.TAccountItem",multiple:true,singularName:"debit"},credit:{type:"sap.suite.ui.commons.taccount.TAccountItem",multiple:true,singularName:"credit"}}},
renderer:function(R,A){var w=function(j,k){j.forEach(function(m,i){m._bIsDebit=k;m._index=i+1;m._indexSize=j.length;R.renderControl(m);});};var W=function(j){var k=A.getOrderBy();j.forEach(function(m){var p=m.getProperties();m._sOrderBy="";for(var i=0;i<p.length;i++){if(p[i].getKey().toLowerCase()===k.toLowerCase()){m._sOrderBy=p[i].getValue();break;}}});j.sort(function(i,m){return new Date(i._sOrderBy)>=new Date(m._sOrderBy)?1:-1;});A._setItemsAttrs(j);j.forEach(function(i){R.renderControl(i.addStyleClass(i._bIsDebit?"sapSuiteUiCommonsAccountItemLeft":"sapSuiteUiCommonsAccountItemRight"));});};var h=function(i){var j=i?A.getDebit():A.getCredit(),k=new B(i?A.getOpeningDebit():A.getOpeningCredit());j.forEach(function(m){k=k.plus(new B(m.getValue()));});return d.formatCurrency(k,A.getMeasureOfUnit());};var u=A.getMeasureOfUnit(),o=d.formatCurrency(A.getOpeningDebit(),u),O=d.formatCurrency(A.getOpeningCredit(),u),H=(A.getDebit().length>0||A.getCredit().length>0);R.write("<div");if(A.getCollapsed()){R.addClass("sapSuiteUiCommonsAccountCollapsed");}R.addClass("sapSuiteUiCommonsAccount");if(!H){R.addClass("sapSuiteUiCommonsAccountEmpty");}R.writeClasses(A);R.writeControlData(A);R.writeAttribute("role","region");R.writeAttribute("aria-describedby",A.getId());R.writeAttributeEscaped("aria-label",A._getAriaLabelText());R.writeAttribute("tabindex","0");R.write(">");R.write("<div class=\"sapSuiteUiCommonsTAccountDropZoneTop\"></div>");R.write("<div class=\"sapSuiteUiCommonsTAccountDropZoneBottom\"></div>");R.write("<div class=\"sapSuiteUiCommonsTAccountInfoIconWrapper sapSuiteUiCommonsTAccountBaseInfoIconWrapper\" aria-labelledby=\""+A.getId()+"-mark-text\" title=\""+r.getText("TACCOUNT_SELECTED")+"\">");R.renderControl(A._getAriaMarkText());R.write("<div class=\"sapSuiteUiCommonsInfoIcon\">");R.write("!");R.write("</div>");R.write("</div>");R.write("<div class=\"sapSuiteUiCommonsAccountHeader\">");R.write("<div class=\"sapSuiteUiCommonsAccountHeaderFirst\">");R.write("<div");R.addClass("sapSuiteUiCommonsAccountHeaderExpandWrapper");R.writeClasses();R.write(">");R.renderControl(A._getDownArrow());R.write("</div>");var t=e(A.getTitle()).replace(/&#xa;|\n/g,"<br>");if(A.getSubtitle()){var S=e(A.getSubtitle()).replace(/&#xa;|\n/g,"<br>");R.write("<div class=\"sapSuiteUiCommonsAccountHeaderTitleWrapper\">");R.write("<div id=\""+A.getId()+"-title"+"\" class=\"sapSuiteUiCommonsAccountHeaderTitleWithSubtitle\">"+t+"</div>");R.write("<div class=\"sapSuiteUiCommonsAccountHeaderSubtitle\">"+S+"</div>");R.write("</div>");}else{R.write("<span id=\""+A.getId()+"-title"+"\" class=\"sapSuiteUiCommonsAccountHeaderTitle\">"+t+"</span>");}R.write("</div>");R.write("<div class=\"sapSuiteUiCommonsAccountHeaderSecond\">");R.write("<span id=\""+A.getId()+"-sum"+"\" class=\"sapSuiteUiCommonsAccountHeaderSUM\">"+A._getSumText()+"</span>");R.write("</div>");R.write("</div>");R.write("<div id=\""+A.getId()+"-content"+"\" class=\"sapSuiteUiCommonsAccountTWrapper\"");if(A.getCollapsed()){R.write("style=\"display:none\"");}R.write(">");if(H||A.getOpening()){R.write("<div");R.addClass("sapSuiteUiCommonsAccountTHeader");if(A.getOpening()){R.addClass("sapSuiteUiCommonsAccountTHeaderOpening");}R.writeClasses();R.write(">");R.write("<span id=\""+A.getId()+"-debit-text"+"\" class=\"sapSuiteUiCommonsAccountTHeaderTitle\">"+r.getText("TACCOUNT_DEBIT")+"</span>");R.write("<span id=\""+A.getId()+"-credit-text"+"\" class=\"sapSuiteUiCommonsAccountTHeaderTitle\">"+r.getText("TACCOUNT_CREDIT")+"</span>");R.write("</div>");if(H){if(A.getOpening()){R.write("<div class=\"sapSuiteUiCommonsAccountOpeningHeader\">");R.write("<span id=\""+A.getId()+"-opening-debit-text"+"\" class=\"sapSuiteUiCommonsAccountTHeaderOpeningDebitTitle\">"+o+" "+u+"</span>");R.write("<span id=\""+A.getId()+"-opening-credit-text"+"\" class=\"sapSuiteUiCommonsAccountTHeaderOpeningCreditTitle\">"+O+" "+u+"</span>");R.write("</div>");}R.write("<div class=\"sapSuiteUiCommonsAccountTBody\"");R.writeAttribute("role","listbox");R.write(">");if(A._isOrdered()){R.write("<div class=\"sapSuiteUiCommonsAccountDebitCredit\"");R.writeAttribute("role","listbox");R.writeAttribute("aria-labelledby",A.getId()+"-debit-text "+A.getId()+"-credit-text");R.write(">");R.write("<div class=\"sapSuiteUiCommonsAccountMiddleBorder\"></div>");W(A.getDebit().concat(A.getCredit()));}else{R.write("<div class=\"sapSuiteUiCommonsAccountDebit\"");R.writeAttribute("role","listbox");R.writeAttribute("aria-labelledby",A.getId()+"-debit-text");R.write(">");w(A.getDebit(),true);}R.write("</div>");if(!A._isOrdered()){R.write("<div class=\"sapSuiteUiCommonsAccountCredit\"");R.writeAttribute("role","listbox");R.writeAttribute("aria-labelledby",A.getId()+"-credit-text");R.write(">");w(A.getCredit(),false);R.write("</div>");}R.write("</div>");}}else{R.write("<div class=\"sapSuiteUiCommonsAccountNoData\">");R.write(r.getText("TACCOUNT_NO_DATA"));R.write("</div>");}if(A.getOpening()){R.write("<div class=\"sapSuiteUiCommonsAccountClosingHeaderLine\"></div>");R.write("<div class=\"sapSuiteUiCommonsAccountClosingHeader\">");R.write("<span id=\""+A.getId()+"-closing-debit-text"+"\" class=\"sapSuiteUiCommonsAccountTHeaderOpeningDebitTitle\">"+h(true)+" "+u+"</span>");R.write("<span id=\""+A.getId()+"-closing-credit-text"+"\" class=\"sapSuiteUiCommonsAccountTHeaderOpeningCreditTitle\">"+h(false)+" "+u+"</span>");R.write("</div>");}R.write("</div>");R.write("</div>");}
});
g.prototype.onBeforeRendering=function(){this._bRendered=false;this._iOldSum=this._iSum;this._iSum=null;};
g.prototype.onAfterRendering=function(){var p=this.getParent();this._bRendered=true;this._setupDraggable();this._setupKeyboard();if(p&&this._hasGroupParent(p)){if(!p._bRendered){p.addEventDelegate({onAfterRendering:this._setupTooltips.bind(this)});}if(p._bRendered&&this._iOldSum!=null){var i=this._iSum-this._iOldSum;p._valueChanged(i);}}else{this._setupTooltips();}this.$().find(".sapSuiteUiCommonsAccountGroupCollapseIcon").attr("aria-pressed",!this.getCollapsed());};
g.prototype.onsapdownmodifiers=function(E){if(E[s]){this._handleArrowMoveEvent(E,f.DOWN);}};
g.prototype.onsapupmodifiers=function(E){if(E[s]){this._handleArrowMoveEvent(E,f.UP);}};
g.prototype.onsappreviousmodifiers=function(E){if(E[s]){this._handleArrowMoveEvent(E,f.PREVIOUS);}};
g.prototype.onsapnextmodifiers=function(E){if(E[s]){this._handleArrowMoveEvent(E,f.NEXT);}};
g.prototype.reset=function(){this._oSum=null;};
g.prototype._isOrdered=function(){return!!this.getOrderBy();};
g.prototype._setupKeyboard=function(){if(!this._oItemNavigation){this._oItemNavigation=new I();this.addDelegate(this._oItemNavigation);}this._oItemNavigation.setRootDomRef(this.$().find(".sapSuiteUiCommonsAccountTBody")[0]);this._oItemNavigation.setItemDomRefs(this.$().find(".sapSuiteUiCommonsAccountItem"));this._oItemNavigation.setCycling(true);};
g.prototype._isInGroup=function(){return this.getParent()instanceof T;};
g.prototype._setupDraggable=function(){if(this._isInGroup()){var $=this.$(),p=this.getParent();$.draggable({revert:"invalid",delay:100,helper:function(){return $.clone().width($.width()).css("z-index",500);},opacity:0.6,scope:p.getId()+"-content",handle:".sapSuiteUiCommonsAccountHeader",start:function(){$.addClass("sapSuiteUiCommonsAccountItemDragging");p.$().find(".sapSuiteUiCommonsAccountGroupDroppingArea").addClass("sapSuiteUiCommonsAccountGroupDroppingAreaHighlight");p.$().find(".sapSuiteUiCommonsAccountHeader").css("cursor","grabbing");},stop:function(){$.removeClass("sapSuiteUiCommonsAccountItemDragging");p.$().find(".sapSuiteUiCommonsAccountGroupDroppingArea").removeClass("sapSuiteUiCommonsAccountGroupDroppingAreaHighlight");p.$().find(".sapSuiteUiCommonsAccountHeader").css("cursor","grab");}});U._setupMobileDraggable($);}};
g.prototype._setItemsAttrs=function(h){h.forEach(function(o,i){o._index=i+1;o._indexSize=h.length;});this.getDebit().forEach(function(i){i._bIsDebit=true;});};
g.prototype._getExpandAltText=function(h){return(h?r.getText("TACCOUNT_COLLAPSE"):r.getText("TACCOUNT_EXPAND"))+" "+r.getText("TACCOUNT_TITLE");};
g.prototype._getDownArrow=function(){var h=this.getCollapsed();if(!this._oArrowDown){this._oArrowDown=new b({alt:this._getExpandAltText(!h),tooltip:this._getExpandAltText(!h),decorative:false,src:!h?"sap-icon://navigation-right-arrow":"sap-icon://navigation-down-arrow",press:function(){this.setCollapsed(!this.getCollapsed());}.bind(this)}).addStyleClass("sapSuiteUiCommonsAccountGroupCollapseIcon");}this._oArrowDown.$().attr("aria-pressed",!this.getCollapsed());return this._oArrowDown;};
g.prototype._getAriaMarkText=function(){if(!this._oMarkText){this._oMarkText=new c({id:this.getId()+"-mark-text",text:r.getText("TACCOUNT_SELECTED")});this.addDependent(this._oMarkText);}return this._oMarkText;};
g.prototype._getSum=function(){if(this._iSum==null){var S=new B("0");this.getCredit().forEach(function(i){S=S.plus(new B(i.getValue()));});this.getDebit().forEach(function(i){S=S.minus(new B(i.getValue()));});if(this.getOpening()){S=S.plus(new B(this.getOpeningCredit()));S=S.minus(new B(this.getOpeningDebit()));}this._iSum=S;}return this._iSum;};
g.prototype._getAriaLabelText=function(){return this.getTitle()+" "+this._getSumText()+" "+r.getText("TACCOUNT_NAVIGATION");};
g.prototype._getSumText=function(){var h=this.getMeasureOfUnit();var v=this._getSum();v=v.isLessThan(0)?v.times(-1):v;var V=d.formatCurrency(v,h);return(this._getSum().isGreaterThan(0)?r.getText("TACCOUNT_CREDIT"):r.getText("TACCOUNT_DEBIT"))+": "+V+" "+e(h);};
g.prototype._valueChanged=function(i,h){if(this._bRendered){if(h){this._iSum=this._getSum().minus(i);}else{this._iSum=this._getSum().plus(i);}this.$("sum").text(this._getSumText());var p=this.getParent();if(this._hasGroupParent(p)){p._valueChanged(i,h);}}};
g.prototype._hasGroupParent=function(p){return(p||this.getParent())instanceof T;};
g.prototype._handleArrowMoveEvent=function(E,o){this._moveTAccount(o);E.preventDefault();E.stopImmediatePropagation();};
g.prototype._moveTAccount=function(o){var $,h,i,m,j=o===f.UP,S=true,k=this.$();var M=function(A){if(i.length===0){S=false;return;}k.detach();$.detach();i[A](k);i[A]($);};if(j||o===f.DOWN){m=j?["next","prev","insertBefore","append"]:["prev","next","insertAfter","prepend"];$=k[m[0]](".sapSuiteUiCommonsAccountGroupDroppingArea");h=k[m[1]]()[m[1]](".sapSuiteUiCommonsAccount");if(h.length!==0){k.detach()[m[2]](h);$.detach()[m[2]](h);}else{i=k.parent()[m[1]](".sapSuiteUiCommonsAccountGroupColumn");M(m[3]);}}else{$=k.prev(".sapSuiteUiCommonsAccountGroupDroppingArea");i=k.parent()[o===f.NEXT?"next":"prev"](".sapSuiteUiCommonsAccountGroupColumn");M("append");}if(S){k.focus();}};
g.prototype._setControlKeyName=function(k){s=k;};
g.prototype._setupTooltips=function(){var h=function(i){var E=this.$().find(i);if(E[0]&&E[0].clientHeight<E[0].scrollHeight){E.attr("title",E.html());}}.bind(this);if(this.getSubtitle()){h(".sapSuiteUiCommonsAccountHeaderTitleWithSubtitle");h(".sapSuiteUiCommonsAccountHeaderSubtitle");}else{h(".sapSuiteUiCommonsAccountHeaderTitle");}};
g.prototype.updateBindingContext=function(){this.reset();return C.prototype.updateBindingContext.apply(this,arguments);};
g.prototype.setMeasureOfUnit=function(v){this.setProperty("measureOfUnit",v,true);if(this._bRendered){this.$("sum").text(this._getSumText());var p=this.getParent();if(this._hasGroupParent(p)){p._measureChanged(v);}}this.invalidate();return this;};
g.prototype.invalidate=function(){this._bRendered=false;C.prototype.invalidate.apply(this,arguments);};
g.prototype.setCollapsed=function(v){this.setProperty("collapsed",v,true);var t=this._getExpandAltText(!v);this._getDownArrow().setTooltip(t);this._getDownArrow().$().attr("aria-label",t);this._getDownArrow().setSrc(!v?"sap-icon://navigation-down-arrow":"sap-icon://navigation-right-arrow");this.$()[v?"addClass":"removeClass"]("sapSuiteUiCommonsAccountCollapsed");this.$().find(".sapSuiteUiCommonsAccountGroupCollapseIcon").attr("aria-pressed",!v);if(this.getDomRef()){this.$("content")[v?"hide":"show"]("medium");}return this;};
return g;});
sap.ui.predefine('sap/suite/ui/commons/taccount/TAccountGroup',["sap/ui/thirdparty/jquery","sap/suite/ui/commons/library","sap/ui/core/Control","sap/ui/core/theming/Parameters","./TAccountPanel","sap/ui/core/IconPool","sap/ui/core/Icon","sap/m/Button","sap/base/security/encodeXML","sap/ui/core/Configuration","sap/ui/core/delegate/ItemNavigation","./TAccountUtils","sap/ui/core/ResizeHandler","sap/ui/thirdparty/bignumber"],function(q,l,C,P,T,I,a,B,e,b,c,d,R,f){"use strict";var r=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");
var g=C.extend("sap.suite.ui.commons.taccount.TAccountGroup",{
metadata:{library:"sap.suite.ui.commons",properties:{title:{type:"string",group:"Misc",defaultValue:null},collapsed:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{accounts:{type:"sap.suite.ui.commons.taccount.TAccount",multiple:true,singularName:"account"}},events:{}},
renderer:function(o,G){if(!G._bThemeApplied){return;}o.write("<div");o.addClass("sapSuiteUiCommonsAccountGroup");if(G.getCollapsed()){o.addClass("sapSuiteUiCommonsAccountGroupCollapsed");}o.writeClasses(G);o.writeControlData(G);o.writeAttributeEscaped("aria-label",G._getSumText());o.write(">");o.write("<div class=\"sapSuiteUiCommonsGroupHeader\">");o.write("<div class=\"sapSuiteUiCommonsGroupHeaderExpandWrapper\">");o.renderControl(G._getExpandCollapse());o.write("</div>");o.write("<div class=\"sapSuiteUiCommonsGroupHeaderFirst\">");o.write("<span class=\"sapSuiteUiCommonsGroupHeaderTitle\">"+e(G.getTitle())+"</span>");o.write("<span id=\""+G.getId()+"-sum\" class=\"sapSuiteUiCommonsGrouptHeaderSUM\">"+G._getSumText()+"</span>");o.write("<div id=\"\" class=\"sapSuiteUiCommonsGroupInfoIconWrapper sapSuiteUiCommonsTAccountBaseInfoIconWrapper\" title=\""+r.getText("TACCOUNT_SELECTED")+"\">");o.write("<span class=\"sapSuiteUiCommonsInfoIcon\">");o.write("!");o.write("</span>");o.write("</div>");o.write("</div>");o.write("<div class=\"sapSuiteUiCommonsGroupHeaderSecond\">");o.renderControl(G._getExpandAllAccounts());o.renderControl(G._getCollapseAllAccounts());o.write("</div>");o.write("</div>");o.write("<div id=\""+G.getId()+"-content\" class=\"sapSuiteUiCommonsAccountGroupContent\">");G.getAccounts().forEach(function(i){o.renderControl(i);});o.write("</div>");o.write("</div>");}
});
g.prototype.init=function(){sap.ui.getCore().attachThemeChanged(function(){this._bThemeApplied=true;this.invalidate();},this);this._bThemeApplied=sap.ui.getCore().isThemeApplied();if(!this._sResizeHandlerId){this._sResizeHandlerId=R.register(this,this._adjustUI.bind(this));}};
g.prototype.exit=function(){if(this._oIconExpand){this._oIconExpand.destroy();}if(this._oIconCollapse){this._oIconCollapse.destroy();}if(this._sResizeHandlerId){R.deregister(this._sResizeHandlerId);this._sResizeHandlerId="";}};
g.prototype.onBeforeRendering=function(){this._bRendered=false;this._oSum=null;this._iColumnCount=-1;};
g.prototype.onAfterRendering=function(){this._adjustUI();this._bRendered=true;var p=this.getParent();if(p&&this._hasPanelParent(p)&&p._bRendered){p._recalculate();}if(this.getCollapsed()){this.$("content").hide();}};
g.prototype.reset=function(){this._oSum=null;};
g.prototype.updateBindingContext=function(){this.reset();return C.prototype.updateBindingContext.apply(this,arguments);};
g.prototype._hasPanelParent=function(p){return(p||this.getParent())instanceof T;};
g.prototype._getExpandCollapse=function(){var h=this.getCollapsed(),t=this._getExpandAltText(!h);if(!this._oArrowDown){this._oArrowDown=new a({src:h?"sap-icon://navigation-right-arrow":"sap-icon://navigation-down-arrow",alt:t,tooltip:t,press:function(){this._expandCollapse();}.bind(this)});}return this._oArrowDown;};
g.prototype._getExpandAltText=function(h){return(h?r.getText("TACCOUNT_COLLAPSE"):r.getText("TACCOUNT_EXPAND"))+" "+r.getText("TACCOUNT_GROUP_TITLE");};
g.prototype._expandCollapse=function(){var h=this.getCollapsed(),t=this._getExpandAltText(h);this._getExpandCollapse().$().attr("aria-label",t);this._getExpandCollapse().setTooltip(t);this._getExpandCollapse().setSrc(h?"sap-icon://navigation-down-arrow":"sap-icon://navigation-right-arrow");this.setProperty("collapsed",!h,true);this._bIsExpanding=true;this.$("content")[h?"show":"hide"]("medium",function(){this._bIsExpanding=false;}.bind(this));this.$()[!h?"addClass":"removeClass"]("sapSuiteUiCommonsAccountGroupCollapsed");};
g.prototype._expandCollapseAllAccounts=function(E){this.getAccounts().forEach(function(A){A.setCollapsed(!!E);});};
g.prototype._getExpandAllAccounts=function(){if(!this._oIconExpand){this._oIconExpand=new B({icon:"sap-icon://expand-all",type:"Transparent",tooltip:r.getText("TACCOUNT_EXPAND"),press:this._expandCollapseAllAccounts.bind(this,false)}).addStyleClass("sapSuiteUiCommonsGroupHeaderIcon");}return this._oIconExpand;};
g.prototype._getCollapseAllAccounts=function(){if(!this._oIconCollapse){this._oIconCollapse=new B({icon:"sap-icon://collapse-all",type:"Transparent",tooltip:r.getText("TACCOUNT_COLLAPSE"),press:this._expandCollapseAllAccounts.bind(this,true)}).addStyleClass("sapSuiteUiCommonsGroupHeaderIcon");}return this._oIconCollapse;};
g.prototype._getSum=function(F){var A=this.getAccounts(),s=new f("0"),m="",h=true;if(!this._oSum||F){for(var i=0;i<A.length;i++){var o=A[i];if(m&&m!==o.getMeasureOfUnit()){h=false;break;}m=o.getMeasureOfUnit();s=s.plus(o._getSum());}this._oSum={sum:s,measure:m,correct:h};}return this._oSum;};
g.prototype._getSumText=function(){var s=this._getSum();if(s&&s.correct){var v=d.formatCurrency(s.sum,s.measure);return(s.sum>0?r.getText("TACCOUNT_CREDIT"):r.getText("TACCOUNT_DEBIT"))+": "+v+" "+e(s.measure);}return"-";};
g.prototype._getAriaText=function(){return"T Account Group "+e(this.getTitle())+" "+this._getSumText();};
g.prototype._adjustUI=function(){var h=320,S=16,j=h+S;var $=this.$("content"),w=$.width(),m=Math.max(Math.ceil(w/(j))-1,1);if(m===this._iColumnCount){return;}if(this._bIsExpanding||(this._bRendered&&this.getCollapsed())){return;}var n=q("<div id=\""+this.getId()+"-content\" class=\"sapSuiteUiCommonsAccountGroupContent\"></div>"),H=Array.apply(null,Array(m)).map(Number.prototype.valueOf,0);var o=this.$().find(".sapSuiteUiCommonsAccount"),p=0;this._iColumnCount=m;this._iDivs=[];var D="<div class=\"sapSuiteUiCommonsAccountGroupDroppingArea\"><div class=\"sapSuiteUiCommonsAccountGroupDroppingAreaInner\">"+"</div><div class=\"sapSuiteUiCommonsAccountGroupDroppingAreaInnerBall\"></div><div class=\"sapSuiteUiCommonsAccountGroupDroppingAreaInnerText\">"+r.getText("TACCOUNT_DROP_HERE")+"</div></div>";for(var i=0;i<m;i++){var s="<div class=\"sapSuiteUiCommonsAccountGroupColumn\">"+D+"</div>",t=q(s);n.append(t);this._iDivs.push(t);}for(var i=0;i<o.length;i++){var u=q(o[i]),v=u.height(),x=this._iDivs[p];var M=Number.MAX_VALUE,y=0;for(var k=0;k<m;k++){var z=H[k];if(z<M){M=z;y=k;}}var x=this._iDivs[y];u.detach().appendTo(x);q(D).appendTo(x);H[y]+=v;}$.detach();this.$().append(n);this._setupDroppable();};
g.prototype._setupDroppable=function(){var G=function(o){var $=q(o);return $.hasClass("sapSuiteUiCommonsTAccountDropZoneTop")?$.parent().prev():$.parent().next();};var D=function($,u){var j=u.draggable,k=j.next();if(k[0]!==$[0]){k.detach().insertAfter($);j.detach().insertAfter($);}else{j.detach().insertBefore($);}$.removeClass("sapSuiteUiCommonsAccountGroupDroppingAreaActiveSide");j.css("left",0);j.css("top",0);};var i=this.$().find(".sapSuiteUiCommonsAccountGroupDroppingArea");i.droppable({scope:this.getId()+"-content",tolerance:"pointer",activeClass:"sapSuiteUiCommonsAccountGroupDroppingAreaActive",hoverClass:"sapSuiteUiCommonsAccountGroupDroppingAreaActive",drop:function(E,u){var $=q(this);D($,u);}});var h=this.$().find(".sapSuiteUiCommonsTAccountDropZoneBottom, .sapSuiteUiCommonsTAccountDropZoneTop");h.droppable({scope:this.getId()+"-content",tolerance:"pointer",drop:function(j,u){var $=q(this);$=$.hasClass("sapSuiteUiCommonsTAccountDropZoneTop")?$.parent().prev():$.parent().next();D($,u);},over:function(j,u){G(this).addClass("sapSuiteUiCommonsAccountGroupDroppingAreaActiveSide");},out:function(j,u){G(this).removeClass("sapSuiteUiCommonsAccountGroupDroppingAreaActiveSide");}});};
g.prototype._valueChanged=function(D,i){if(this._oSum){if(i){this._oSum.sum=this._oSum.sum.minus(D);}else{this._oSum.sum=this._oSum.sum.plus(D);}this.$("sum").text(this._getSumText());var p=this.getParent();if(this._hasPanelParent(p)){p._valueChanged(D,i);}}};
g.prototype._measureChanged=function(m){if(this._oSum){if(this._oSum.measure===m&&!this._oSum.correct){this._recalculate();return;}if(this._oSum.measure!==m&&this._oSum.correct){var p=this.getParent();this._oSum.correct=false;if(this._hasPanelParent(p)){p._setInvalid();}}this.$("sum").text(this._getSumText());}};
g.prototype._recalculate=function(){this._oSum=this._getSum(true);this.$("sum").text(this._getSumText());var p=this.getParent();if(this._hasPanelParent(p)){p._recalculate();}};
g.prototype._hasPanelParent=function(p){return(p||this.getParent())instanceof T;};
g.prototype.invalidate=function(){this._bRendered=false;C.prototype.invalidate.apply(this,arguments);};
return g;});
sap.ui.predefine('sap/suite/ui/commons/taccount/TAccountItem',["sap/ui/thirdparty/jquery","sap/suite/ui/commons/library","sap/ui/core/Control","sap/ui/core/theming/Parameters","sap/suite/ui/commons/taccount/TAccountPanel","sap/suite/ui/commons/taccount/TAccountGroup","sap/ui/core/format/NumberFormat","sap/ui/core/Core","sap/ui/core/library","./TAccountUtils","sap/ui/thirdparty/bignumber"],function(q,l,C,P,T,a,N,b,c,d,B){"use strict";var r=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");
var e=C.extend("sap.suite.ui.commons.taccount.TAccountItem",{
metadata:{library:"sap.suite.ui.commons",properties:{value:{type:"any",group:"Misc",defaultValue:0},color:{type:"sap.m.ValueCSSColor",group:"Misc",defaultValue:null},group:{type:"string",group:"Misc",defaultValue:""},ariaLabel:{type:"string",group:"Misc",defaultValue:""}},aggregations:{properties:{type:"sap.suite.ui.commons.taccount.TAccountItemProperty",multiple:true,singularName:"property"}},events:{press:{}}},
renderer:function(R,i){var s=i.getColor(),u=i.getParent()&&i.getParent().getMeasureOfUnit(),v=d.formatCurrency(i.getValue(),u),t=v+" "+u;R.write("<div tabindex=\"0\"");R.addClass("sapSuiteUiCommonsAccountItem");R.writeClasses(i);R.writeControlData(i);if(i.getGroup()){R.writeAttributeEscaped("group",i.getGroup());}R.writeAttribute("aria-selected","false");R.writeAttribute("aria-setsize",i._indexSize);R.writeAttribute("aria-posinset",i._index);R.writeAttribute("role","option");R.writeAttributeEscaped("aria-label",i._getAriaLabel(t));R.write(">");R.write("<div class=\"sapSuiteUiCommonsAccountColorBar\"");if(s&&c.CSSColor.isValid(s)){R.write("style=\"background-color:"+s+"\"");}else if(c.CSSColor.isValid(P.get(s))){R.write("style=\"background-color:"+P.get(s)+"\"");}R.write(">");R.write("</div>");R.write("<div id=\""+i.getId()+"-content\" class=\"sapSuiteUiCommonsAccountContent\">");R.write("<div class=\"sapSuiteUiCommonsAccountItemTitleWrapper\">");R.write("<span class=\"sapSuiteUiCommonsAccountItemTitle\">");R.writeEscaped(t);R.write("</span>");R.write("</div>");R.write("<div class=\"sapSuiteUiCommonsAccountItemProperties\">");i.getProperties().forEach(function(p){R.renderControl(p);});R.write("</div>");R.write("</div>");R.write("</div>");}
});
e.prototype.onBeforeRendering=function(){this._prepareProperties();};
e.prototype.onAfterRendering=function(){this.$().on("click",this._click.bind(this));};
e.prototype._refreshAriaLabel=function(v){this.$().attr("aria-label",this._getAriaLabel());};
e.prototype._getAriaLabel=function(t){var A=this.getAriaLabel();if(A){return A;}if(!t){var u=this.getParent()&&this.getParent().getMeasureOfUnit(),v=d.formatCurrency(this.getValue(),u),t=v+" "+u;}var s=(this._bIsDebit?r.getText("TACCOUNT_DEBIT"):r.getText("TACCOUNT_CREDIT"))+" "+r.getText("TACCOUNT_ITEM");s+=" "+t+" ";this.getProperties().forEach(function(i){if(i.getVisible()){s+=i.getLabel()+":"+i.getValue()+" ";}});return s;};
e.prototype._click=function(){var E=this.fireEvent("press",{},true);if(E){this._highlightItems();}};
e.prototype._highlightItems=function(){var $=this.$(),g=this.getGroup(),s=!$.is(".sapSuiteUiCommonsAccountItemSelected, .sapSuiteUiCommonsAccountItemSelectedByGroup"),f=q(".sapSuiteUiCommonsAccountItemSelected");this._setAriaHighlighted(f,false);this._setAriaHighlighted($,s);f.removeClass("sapSuiteUiCommonsAccountItemSelected");s?$.addClass("sapSuiteUiCommonsAccountItemSelected"):$.removeClass("sapSuiteUiCommonsAccountItemSelected");var p=this._findHighlightParent();if(p){var h=q(".sapSuiteUiCommonsAccountItemSelectedByGroup");h.removeClass("sapSuiteUiCommonsAccountItemSelectedByGroup");this._setAriaHighlighted(h,false);if(g&&s){var G=q(".sapSuiteUiCommonsAccountItem[group="+g+"]");G.addClass("sapSuiteUiCommonsAccountItemSelectedByGroup");var t=this;G.each(function(i,j){var E=sap.ui.getCore().byId(j.id);if(E){t._setAriaHighlighted(E.$(),true);var o=E.getParent();if(o){o.$().addClass("sapSuiteUiCommonsAccountItemSelectedByGroup");var k=o.getParent();if(k instanceof a){k.$().addClass("sapSuiteUiCommonsAccountItemSelectedByGroup");}}}});}}};
e.prototype.onsapenter=function(){this._highlightItems();};
e.prototype.onsapspace=function(){this._highlightItems();};
e.prototype._setAriaHighlighted=function($,s){$.attr("aria-selected",s);$.attr("aria-label",s?r.getText("COLORED_ITEM_FROM")+" "+this.getGroup():this._getAriaLabel());};
e.prototype._findHighlightParent=function(){var p=this.getParent();p=p&&p.getParent();if(p instanceof a){var o=p.getParent();return o instanceof T||p;}return null;};
e.prototype._prepareProperties=function(){this._mProperties={};this.getProperties().forEach(function(p){var k=p.getKey();if(k){this._mProperties[k]=p;}}.bind(this));};
e.prototype.setValue=function(v){var n=new B(v);var o=new B(this.getValue());var m=this._bIsDebit?-1:1;var D=new B(m).times(n.minus(o));var i=D.isGreaterThan(0);this.setProperty("value",v);this.getParent()&&this.getParent()._valueChanged(D,this._bIsDebit&&!i);};
return e;});
sap.ui.predefine('sap/suite/ui/commons/taccount/TAccountItemProperty',["sap/suite/ui/commons/library","sap/ui/core/Control","sap/ui/core/theming/Parameters"],function(l,C,P){"use strict";
var T=C.extend("sap.suite.ui.commons.taccount.TAccountItemProperty",{
metadata:{library:"sap.suite.ui.commons",properties:{key:{type:"string",group:"Misc",defaultValue:null},value:{type:"string",group:"Misc",defaultValue:null},label:{type:"string",group:"Misc",defaultValue:null},displayLabel:{type:"boolean",group:"Misc",defaultValue:true},visible:{type:"boolean",group:"Misc",defaultValue:true}}},
renderer:function(r,p){var v=p.getValue(),L=p.getLabel(),d=p.getVisible()?"":"style=\"display:none\"",k="key="+p.getKey();r.write("<div class=\"sapSuiteUiCommonsAccountPropertyWrapper\""+k+" "+d);r.writeControlData(p);r.write(">");if(L&&p.getDisplayLabel()){r.write("<div class=\"sapSuiteUiCommonsAccountItemLabel\">"+L+":</div>");}r.write("<div class=\"sapSuiteUiCommonsAccountItemProperty\">"+v+"</div>");r.write("</div>");}
});
T.prototype._getLabel=function(){return this.getValue()||this.getKey();};
return T;});
sap.ui.predefine('sap/suite/ui/commons/taccount/TAccountPanel',["sap/ui/thirdparty/jquery","sap/suite/ui/commons/library","sap/ui/core/Control","sap/ui/core/theming/Parameters","sap/m/Panel","sap/ui/model/json/JSONModel","sap/m/Dialog","sap/m/Button","sap/m/FlexBox","sap/m/Label","sap/ui/model/Filter","sap/m/SearchField","sap/m/List","sap/m/StandardListItem","sap/m/CheckBox","sap/m/Title","sap/m/Toolbar","sap/m/ToolbarSpacer","sap/m/Text","sap/m/SegmentedButton","sap/m/SegmentedButtonItem","sap/ui/model/FilterOperator","sap/base/security/encodeXML","sap/ui/core/format/NumberFormat","sap/ui/core/Core","sap/ui/core/Configuration","./TAccountUtils","./TAccountPanelRenderer","sap/m/library","sap/ui/thirdparty/bignumber"],function(q,l,C,P,a,J,D,B,F,L,b,S,c,d,e,T,f,g,h,j,k,m,n,N,o,p,r,s,M,t){"use strict";var u=M.ButtonType;var R=o.getLibraryResourceBundle("sap.suite.ui.commons");var v=l.taccount.TAccountPanelState;
var w=a.extend("sap.suite.ui.commons.taccount.TAccountPanel",{metadata:{library:"sap.suite.ui.commons",properties:{title:{type:"string",group:"Misc",defaultValue:null},state:{type:"sap.suite.ui.commons.taccount.TAccountPanelState",group:"Misc",defaultValue:"Default"},showOverlay:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{properties:{type:"sap.suite.ui.commons.taccount.TAccountItemProperty",multiple:true,singularName:"property"},table:{type:"sap.ui.core.Control",multiple:false}},events:{stateChanged:{parameters:{state:"sap.suite.ui.commons.taccount.TAccountPanelState"}},settingsApplied:{parameters:{properties:"object"}}}}});
w.prototype.init=function(){this._bDisplayLabels=true;};
w.prototype.onBeforeRendering=function(){this._oSum=null;this._bRendered=false;this._prepareProperties();this._createToolbar();};
w.prototype.onAfterRendering=function(){var $=this.$();this._switchContent(this.getState()===v.Table);this._bRendered=true;$.attr("aria-label",this._getAriaLabelText());$.addClass("sapSuiteUiCommonsAccountPanel");this._setTotalBalanceTitle();};
w.prototype.getSum=function(){var x=new t("0"),y="",z=true,A=this.getContent();if(!this._oSum){for(var i=0;i<A.length;i++){var G=A[i];if(G instanceof sap.suite.ui.commons.taccount.TAccountGroup){var E=G._getSum();if((y&&y!==E.measure)||!E.correct){z=false;break;}y=E.measure;x=x.plus(E.sum);}}this._oSum={measure:y,sum:x||0,correct:z};}return this._oSum;};
w.prototype.switchContent=function(i){var x=i?v.Table:v.Default;this._switchContent(i);this.setProperty("state",x,true);};
w.prototype.getSettingsDialog=function(){return this._getPopover();};
w.prototype.getToolbar=function(){return this._getToolbar();};
w.prototype.openSettings=function(){this._oSelectAllCheckBox&&this._oSelectAllCheckBox.setText(this._getSelectAllText());this._getPopover().open();};
w.prototype.reset=function(){this._oSum=null;if(this._oPopover){this._oPopover.destroy();this._oPopover=null;}};
w.prototype.setState=function(V){var i=V===v.Table;this._switchContent(i);this.setProperty("state",V,true);return this;};
w.prototype.updateBindingContext=function(){this.reset();return C.prototype.updateBindingContext.apply(this,arguments);};
w.prototype._switchContent=function(i){var x=i?v.Table:v.Default;this.$("table")[i?"show":"hide"]();this.$("datacontent")[i?"hide":"show"]();if(this._oDisplaySwitcher){this._oDisplaySwitcher.setSelectedKey(x);}};
w.prototype._prepareProperties=function(){this._mProperties={};this.getProperties().forEach(function(i){var K=i.getKey();if(K){this._mProperties[K]=i;}}.bind(this));};
w.prototype._setPropertiesVisibility=function(x){var $=this.$();Object.keys(x).forEach(function(K){var y=x[K],I=$.find(".sapSuiteUiCommonsAccountPropertyWrapper[key="+K+"]");I.each(function(i,z){var V=y.getVisible(),A=o.byId(z.id);if(A){A.setProperty("visible",V,true);A.getParent()._refreshAriaLabel();}q(z)[V?"show":"hide"]();});});$.find(".sapSuiteUiCommonsAccountItemLabel")[this._bDisplayLabels?"show":"hide"]();};
w.prototype._getPopover=function(){if(!this._oPopover){this._createPopover();}return this._oPopover;};
w.prototype._getSelectAllText=function(i){var x=this.getProperties();if(!i&&i!==0){i=x.reduce(function(y,z){return y+(z.getVisible()?1:0);},0);}this._iSelectedCount=i;return R.getText("TACCOUNT_SELECTALL")+" ("+i+"/"+x.length+")";};
w.prototype._createPopover=function(){var i=this,x=false;if(!this._oPopover){this._oPopover=new D({contentWidth:"450px",title:R.getText("TACCOUNT_DISPLAYOPTIONS"),afterOpen:function(){if(!x){var Q=i._oPopover.$().height();i._oPopover.setProperty("contentHeight",Q+"px",true);x=true;}}});}this._oPopover.setEndButton(new B({text:R.getText("TACCOUNT_CANCEL"),press:function(Q){i._oPopover.close();}}));this._oPopover.setBeginButton(new B({text:R.getText("TACCOUNT_OK"),type:u.Emphasized,press:function(Q){var U=G.getSelectedContexts(true),V=G.getModel();var X={},Y={};U.forEach(function(Z){var $=V.getProperty(Z.sPath);if($){var _=i._mProperties[$.key];X[$.key]=1;if(_&&!_.getVisible()){_.setProperty("visible",true,true);Y[$.key]=_;}}});Object.keys(i._mProperties).forEach(function(Z){var $=i._mProperties[Z];if($.getVisible()&&!X[Z]){$.setProperty("visible",false,true);Y[Z]=$;}});i._bDisplayLabels=y.getSelected();if(i.fireEvent("settingsApplied",{properties:Y},true)){i._setPropertiesVisibility(Y);}i._oPopover.close();}}));this._oPopover.removeAllContent();var W=new F({width:"100%",renderType:"Bare",direction:"Column"});this._oPopover.addContent(W);var y=new e({selected:this._bDisplayLabels}).addStyleClass("sapUiTinyMarginBegin");var z=new F({renderType:"Bare",alignItems:"Center",items:[y,new L({text:"Show labels"}).addStyleClass("sapUiTinyMarginBegin")]}).addStyleClass("sapUiTinyMarginBottom sapUiTinyMarginTop");W.addItem(z);var A=function(Q){var U=[],V=Q.getSource().getValue();if(V&&V.length>0){U.push(new b("title",m.Contains,V));}var X=G.getBinding("items");X.filter(U,"Application");};var E=new S({width:"100%",liveChange:A}).addStyleClass("sapSuiteUiCommonsAccountsPopupSearch");W.addItem(E);var G=new c({width:"100%",mode:"MultiSelect",includeItemInSelection:true,selectionChange:function(Q){var U=Q.getParameter("listItem").getSelected();i._oSelectAllCheckBox.setText(i._getSelectAllText(i._iSelectedCount+(U?1:-1)));i._oSelectAllCheckBox.setSelected(H.length===i._iSelectedCount);}}).addStyleClass("sapSuiteUiCommonsAccountsPopupList");G.bindAggregation("items",{path:"/items",template:new d({title:"{title}",selected:"{selected}"})});var H=this.getProperties(),I=this._getSelectAllText();this._oSelectAllCheckBox=new e({selected:H.length===i._iSelectedCount,text:I,select:function(Q){var U=Q.getSource().getSelected();i._oSelectAllCheckBox.setText(i._getSelectAllText(U?H.length:0));G.getItems().forEach(function(V){V.setSelected(U);});}}).addStyleClass("sapUiTinyMarginBegin sapUiTinyMarginEnd sapSuiteUiCommonsAccountsPopupSelectAll");var K=new F({renderType:"Bare",alignItems:"Center"}).addStyleClass("sapSuiteUiCommonsAccountsPopupSelectAllWrapper");K.addItem(this._oSelectAllCheckBox);W.addItem(K);W.addItem(G);var O=[];H.forEach(function(Q){O.push({title:Q._getLabel(),key:Q.getKey(),selected:Q.getVisible()});});G.setModel(new J({items:O}));return this._oPopover;};
w.prototype._getToolbar=function(){if(!this._oToolbar){this._createToolbar();}return this._oToolbar;};
w.prototype._createToolbar=function(){var i=this;if(this._oToolbar){return;}this._oToolbar=new f();this._oToolbar.addContent(new T(this.getId()+"-toolbartitle",{text:this.getTitle()}));this._oToolbar.addContent(new g(this.getId()+"-toolbarspacer"));this._oToolbar.addContent(new h(this.getId()+"-toolbarbalancelabel",{wrapping:false,text:R.getText("TACCOUNT_TOTALBALANCE")+":"}).addStyleClass("sapSuiteUiCommonsAccountPanelLabel"));this._oToolbar.addContent(new h(this.getId()+"-toolbarsumtitle",{wrapping:false}).addStyleClass("sapSuiteUiCommonsAccountPanelSum"));this._oDisplaySwitcher=new j(this.getId()+"-toolbarswitcher",{selectionChange:function(E){var I=o.byId(i._oDisplaySwitcher.getSelectedItem());if(I){i.switchContent(I.getKey()===v.Table);i.fireStateChanged({state:I.getKey()});}},items:[new k({key:v.Default,tooltip:R.getText("TACCOUNT_DEFAULT"),icon:"sap-icon://screen-split-two"}),new k({key:v.Table,tooltip:R.getText("TACCOUNT_TABLE"),icon:"sap-icon://table-chart"})]});this._oToolbar.addContent(this._oDisplaySwitcher);this._oToolbar.addContent(new B(this.getId()+"-toolbarsettings",{icon:"sap-icon://action-settings",press:this.openSettings.bind(this)}));this.setHeaderToolbar(this._oToolbar);};
w.prototype._getSumText=function(){var i=this.getSum();if(!i.correct){return" - ";}return r.formatCurrency(Math.abs(i.sum),i.measure)+" "+n(i.measure);};
w.prototype._setTotalBalanceTitle=function(){var i=this.getSum(),x="";if(!i.correct||i.sum.isEqualTo(0)){x=R.getText("TACCOUNT_TOTALBALANCE");}else{x=i.sum.isGreaterThan(0)?R.getText("TACCOUNT_TOTALCREDIT"):R.getText("TACCOUNT_TOTALDEBIT");}this.$("toolbarbalancelabel").text(x+":");this.$("toolbarsumtitle").text(this._getSumText());};
w.prototype._getAriaLabelText=function(){return"T account panel "+this.getTitle()+" "+this._getSumText();};
w.prototype._recalculate=function(){this._oSum=null;this._oSum=this.getSum();this._setTotalBalanceTitle();};
w.prototype._valueChanged=function(i,I){var x=this.getSum();if(x.correct){if(I){this._oSum.sum=this._oSum.sum.minus(i);}else{this._oSum.sum=this._oSum.sum.plus(i);}}this._setTotalBalanceTitle();};
w.prototype.setShowOverlay=function(V){this.setProperty("showOverlay",V,true);this.$("overlay")[V?"addClass":"removeClass"]("sapSuiteUiCommonsAccountPanelOverlayVisible");};
w.prototype._setInvalid=function(){if(this._oSum){this._oSum.correct=false;this._setTotalBalanceTitle();}};
w.prototype.invalidate=function(){this._bRendered=false;C.prototype.invalidate.apply(this,arguments);};
return w;});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine('sap/suite/ui/commons/AriaProperties',["./library","sap/ui/core/Element"],function(l,E){"use strict";
var A=E.extend("sap.suite.ui.commons.AriaProperties",{metadata:{library:"sap.suite.ui.commons",properties:{label:{type:"string",defaultValue:null},labelledBy:{type:"string",defaultValue:null},describedBy:{type:"string",defaultValue:null},role:{type:"string",defaultValue:null},hasPopup:{type:"string",defaultValue:null}}}});
A.writeAriaProperties=function(r,d,a){var L=(a&&a.getLabel())||d.label;if(L){r.writeAttributeEscaped("aria-label",L);}var s=(a&&a.getLabelledBy())||d.labelledBy;if(s){r.writeAttributeEscaped("aria-labelledby",s);}var D=(a&&a.getDescribedBy())||d.describedBy;if(D){r.writeAttributeEscaped("aria-describedby",D);}var R=(a&&a.getRole())||d.role;if(R){r.writeAttributeEscaped("role",R);}var h=(a&&a.getHasPopup())||d.hasPopup;if(h){r.writeAttributeEscaped("aria-haspopup",h);}};
return A;});
sap.ui.predefine('sap/suite/ui/commons/ChartContainer',["sap/ui/thirdparty/jquery",'./library','sap/m/library','sap/viz/library','sap/ui/base/ManagedObject','sap/m/Button','sap/m/OverflowToolbar','sap/m/OverflowToolbarButton','sap/m/SegmentedButton','sap/m/Title','sap/m/ToolbarSpacer','sap/ui/Device','sap/ui/core/Control','sap/ui/core/CustomData','sap/ui/core/Popup','sap/ui/core/ResizeHandler','sap/ui/core/delegate/ScrollEnablement','sap/m/ToggleButton','sap/m/OverflowToolbarToggleButton',"sap/base/util/uid","sap/base/Log","./ChartContainerRenderer","sap/ui/core/routing/HashChanger"],function(q,l,M,V,a,B,O,b,S,T,c,D,C,d,P,R,e,f,g,u,L,h,H){"use strict";var j=M.ButtonType;
var k=C.extend("sap.suite.ui.commons.ChartContainer",{metadata:{library:"sap.suite.ui.commons",properties:{showPersonalization:{type:"boolean",group:"Misc",defaultValue:false},showFullScreen:{type:"boolean",group:"Misc",defaultValue:false},fullScreen:{type:"boolean",group:"Misc",defaultValue:false},showLegend:{type:"boolean",group:"Misc",defaultValue:true},title:{type:"string",group:"Misc",defaultValue:''},selectorGroupLabel:{type:"string",group:"Misc",defaultValue:null,deprecated:true},autoAdjustHeight:{type:"boolean",group:"Misc",defaultValue:false},showZoom:{type:"boolean",group:"Misc",defaultValue:true},showLegendButton:{type:"boolean",group:"Misc",defaultValue:true},showSelectionDetails:{type:"boolean",group:"Behavior",defaultValue:false},wrapLabels:{type:"boolean",group:"Misc",defaultValue:false},enableScroll:{type:"boolean",group:"Misc",defaultValue:true},width:{type:"sap.ui.core.CSSSize",defaultValue:"100%"}},defaultAggregation:"content",aggregations:{dimensionSelectors:{type:"sap.ui.core.Control",multiple:true,singularName:"dimensionSelector"},content:{type:"sap.suite.ui.commons.ChartContainerContent",multiple:true,singularName:"content"},toolbar:{type:"sap.m.OverflowToolbar",multiple:false},customIcons:{type:"sap.ui.core.Icon",multiple:true,singularName:"customIcon"}},events:{personalizationPress:{},contentChange:{parameters:{selectedItemId:{type:"string"}}},customZoomInPress:{},customZoomOutPress:{}}}});
k.prototype.init=function(){this._aUsedContentIcons=[];this._aCustomIcons=[];this._oToolBar=null;this._aDimensionSelectors=[];this._bChartContentHasChanged=false;this._bControlNotRendered=true;this._bSegmentedButtonSaveSelectState=false;this._mOriginalVizFrameHeights={};this._oActiveChartButton=null;this._oSelectedContent=null;this._sResizeListenerId=null;this._bHasApplicationToolbar=false;this._iPlaceholderPosition=0;this._oResBundle=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");this._oFullScreenButton=new g({icon:"sap-icon://full-screen",type:j.Transparent,text:this._oResBundle.getText("CHARTCONTAINER_FULLSCREEN"),tooltip:this._oResBundle.getText("CHARTCONTAINER_FULLSCREEN"),press:this._onFullScreenButtonPress.bind(this)});this._oPopup=new P({modal:true,shadow:false,autoClose:false});this._oShowLegendButton=new f({icon:"sap-icon://legend",type:j.Transparent,tooltip:this._oResBundle.getText("CHARTCONTAINER_LEGEND"),press:this._onShowLegendButtonPress.bind(this)});this._oPersonalizationButton=new b({icon:"sap-icon://action-settings",type:j.Transparent,text:this._oResBundle.getText("CHARTCONTAINER_PERSONALIZE"),tooltip:this._oResBundle.getText("CHARTCONTAINER_PERSONALIZE"),press:this._onPersonalizationButtonPress.bind(this)});this._oZoomInButton=new b({icon:"sap-icon://zoom-in",type:j.Transparent,text:this._oResBundle.getText("CHARTCONTAINER_ZOOMIN"),tooltip:this._oResBundle.getText("CHARTCONTAINER_ZOOMIN"),press:this._zoom.bind(this,true)});this._oZoomOutButton=new b({icon:"sap-icon://zoom-out",type:j.Transparent,text:this._oResBundle.getText("CHARTCONTAINER_ZOOMOUT"),tooltip:this._oResBundle.getText("CHARTCONTAINER_ZOOMOUT"),press:this._zoom.bind(this,false)});this._oChartSegmentedButton=new S({select:this._onChartSegmentButtonSelect.bind(this),width:"auto"});this._oChartTitle=new T();this.oHashChanger=new H();this.oHashChanger.init();};
k.prototype.onAfterRendering=function(){this._sResizeListenerId=R.register(this,this._performHeightChanges.bind(this));if(!D.system.desktop){D.resize.attachHandler(this._performHeightChanges,this);}if(this.getAutoAdjustHeight()||this.getFullScreen()){setTimeout(function(){var m=this._performHeightChanges.bind(this);if(typeof m==="string"||m instanceof String){m=this[m];}m.apply(this,[]);}.bind(this),500);}var s=this.getSelectedContent(),v=false,i;if(s){i=s.getContent();v=i&&i.getMetadata().getName()==="sap.viz.ui5.controls.VizFrame";}if(this.getEnableScroll()){this._oScrollEnablement=new e(this,this.getId()+"-wrapper",{horizontal:!v,vertical:!v});}this._bControlNotRendered=false;this.oHashChanger.attachEvent("hashChanged",function(){var I=this.getFullScreen();if(I){this._toggleFullScreen();}}.bind(this));};
k.prototype.onBeforeRendering=function(){if(this._sResizeListenerId){R.deregister(this._sResizeListenerId);this._sResizeListenerId=null;}if(!D.system.desktop){D.resize.detachHandler(this._performHeightChanges,this);}if(this._bChartContentHasChanged||this._bControlNotRendered){this._chartChange();}var m=this._aCustomIcons;this._aCustomIcons=[];var n=this.getAggregation("customIcons");if(n&&n.length>0){for(var i=0;i<n.length;i++){this._addButtonToCustomIcons(n[i]);}}if(this._bControlNotRendered){if(!this.getToolbar()){this.setAggregation("toolbar",new O({design:"Transparent"}));if(this.getTitle()){this.getToolbar().setActive(true);}}}this._adjustDisplay();this._destroyButtons(m);var s=this.getSelectedContent();if(s){var o=s.getContent();if(o&&o.attachRenderComplete){o.detachRenderComplete(this._checkZoomIcons,this);o.attachRenderComplete(this._checkZoomIcons,this);}}this._oShowLegendButton.setPressed(this.getShowLegend());};
k.prototype.exit=function(){if(this._oFullScreenButton){this._oFullScreenButton.destroy();this._oFullScreenButton=undefined;}if(this._oPopup){this._oPopup.destroy();this._oPopup=undefined;}if(this._oShowLegendButton){this._oShowLegendButton.destroy();this._oShowLegendButton=undefined;}if(this._oPersonalizationButton){this._oPersonalizationButton.destroy();this._oPersonalizationButton=undefined;}if(this._oActiveChartButton){this._oActiveChartButton.destroy();this._oActiveChartButton=undefined;}if(this._oChartSegmentedButton){this._oChartSegmentedButton.destroy();this._oChartSegmentedButton=undefined;}if(this._oSelectedContent){this._oSelectedContent.destroy();this._oSelectedContent=undefined;}if(this._oToolBar){this._oToolBar.destroy();this._oToolBar=undefined;}if(this._oToolbarSpacer){this._oToolbarSpacer.destroy();this._oToolbarSpacer=undefined;}if(this._aDimensionSelectors){for(var i=0;i<this._aDimensionSelectors.length;i++){if(this._aDimensionSelectors[i]){this._aDimensionSelectors[i].destroy();}}this._aDimensionSelectors=undefined;}if(this._oScrollEnablement){this._oScrollEnablement.destroy();this._oScrollEnablement=undefined;}if(this._sResizeListenerId){R.deregister(this._sResizeListenerId);this._sResizeListenerId=null;}if(!D.system.desktop){D.resize.detachHandler(this._performHeightChanges,this);}if(this._oZoomInButton){this._oZoomInButton.destroy();this._oZoomInButton=undefined;}if(this._oZoomOutButton){this._oZoomOutButton.destroy();this._oZoomOutButton=undefined;}if(this.oHashChanger){this.oHashChanger.destroy();this.oHashChanger=undefined;}};
k.prototype._onButtonIconPress=function(E){var s=E.getSource().getCustomData()[0].getValue();this._switchChart(s);};
k.prototype._onFullScreenButtonPress=function(E){if(E.getParameter("pressed")===true){this._oFullScreenButton.setTooltip(this._oResBundle.getText("CHARTCONTAINER_FULLSCREEN_CLOSE"));this._oFullScreenButton.setText(this._oResBundle.getText("CHARTCONTAINER_FULLSCREEN_CLOSE"));this._oFullScreenButton.setIcon("sap-icon://exit-full-screen");}else{this._oFullScreenButton.setTooltip(this._oResBundle.getText("CHARTCONTAINER_FULLSCREEN"));this._oFullScreenButton.setText(this._oResBundle.getText("CHARTCONTAINER_FULLSCREEN"));this._oFullScreenButton.setIcon("sap-icon://full-screen");}this._bSegmentedButtonSaveSelectState=true;this._toggleFullScreen();this._oFullScreenButton.focus();};
k.prototype._onShowLegendButtonPress=function(E){this._bSegmentedButtonSaveSelectState=true;this._onLegendButtonPress();};
k.prototype._onChartSegmentButtonSelect=function(E){var s=E.getParameter("button").getCustomData()[0].getValue();this._bSegmentedButtonSaveSelectState=true;this._switchChart(s);};
k.prototype._onOverflowToolbarButtonPress=function(E,i){i.icon.firePress({controlReference:E.getSource()});};
k.prototype._onLegendButtonPress=function(){var s=this.getSelectedContent();if(s){var i=s.getContent();if(q.isFunction(i.getLegendVisible)){var m=i.getLegendVisible();i.setLegendVisible(!m);this.setShowLegend(!m);}else{this.setShowLegend(!this.getShowLegend());}}else{this.setShowLegend(!this.getShowLegend());}};
k.prototype._checkZoomIcons=function(E){if(E.getSource()._getZoomInfo){var z=E.getSource()._getZoomInfo();if(z){this._manageZoomIcons(z.currentZoomLevel);}}};
k.prototype._onPersonalizationButtonPress=function(){this.firePersonalizationPress();};
k.prototype._setSelectedContent=function(s){var i;if(this.getSelectedContent()===s){return this;}if(s===null){this._oShowLegendButton.setVisible(false);return this;}var o=s.getContent();this._toggleShowLegendButtons(o);i=o&&o.getMetadata&&o.getMetadata().getName()==="sap.viz.ui5.controls.VizFrame";var m=i||q.isFunction(o.setLegendVisible);if(this.getShowLegendButton()){this._oShowLegendButton.setVisible(m);}var n=this.getShowZoom()&&D.system.desktop&&i;this._oZoomInButton.setVisible(n);this._oZoomOutButton.setVisible(n);this._oSelectedContent=s;return this;};
k.prototype._getSelectionDetails=function(){var o=this.getSelectedContent();return o&&o._getSelectionDetails();};
k.prototype._toggleShowLegendButtons=function(m){var s=m.getId();var r=null;for(var i=0;!r&&i<this._aUsedContentIcons.length;i++){if(this._aUsedContentIcons[i].getCustomData()[0].getValue()===s&&m.getVisible()===true){r=this._aUsedContentIcons[i];this._oChartSegmentedButton.setSelectedButton(r);break;}}};
k.prototype._setDefaultOnSegmentedButton=function(){if(!this._bSegmentedButtonSaveSelectState){this._oChartSegmentedButton.setSelectedButton(null);}this._bSegmentedButtonSaveSelectState=false;};
k.prototype._toggleFullScreen=function(){var F=this.getProperty("fullScreen");if(F){var m=this.getAggregation("content");this._closeFullScreen();this.setProperty("fullScreen",false,true);this._oFullScreenButton.setIcon("sap-icon://full-screen");this._oFullScreenButton.setTooltip(this._oResBundle.getText("CHARTCONTAINER_FULLSCREEN"));this._oFullScreenButton.setText(this._oResBundle.getText("CHARTCONTAINER_FULLSCREEN"));this._oFullScreenButton.setPressed(false);var o;var s;for(var i=0;i<m.length;i++){o=m[i].getContent();o.setWidth("100%");s=this._mOriginalVizFrameHeights[o.getId()];if(s){o.setHeight(s);}}this.invalidate();}else{this._openFullScreen();this.setProperty("fullScreen",true,true);this._oFullScreenButton.setIcon("sap-icon://exit-full-screen");this._oFullScreenButton.setTooltip(this._oResBundle.getText("CHARTCONTAINER_FULLSCREEN_CLOSE"));this._oFullScreenButton.setText(this._oResBundle.getText("CHARTCONTAINER_FULLSCREEN_CLOSE"));this._oFullScreenButton.setPressed(true);}};
k.prototype._openFullScreen=function(){var i=P.Dock;this.$content=this.$();if(this.$content){this.$tempNode=q("<div></div>");this.$content.before(this.$tempNode);this._$overlay=q("<div id='"+u()+"'></div>");this._$overlay.addClass("sapSuiteUiCommonsChartContainerOverlay");this._$overlay.addClass("sapSuiteUiCommonsChartContainerChartArea");this._$overlay.append(this.$content);this._oPopup.setContent(this._$overlay);}else{L.warning("Overlay: content does not exist or contains more than one child");}this._oPopup.open(200,i.BeginTop,i.BeginTop,q("body"));if(!D.system.desktop){setTimeout(function(){var m=this._performHeightChanges.bind(this);if(typeof m==="string"||m instanceof String){m=this[m];}m.apply(this,[]);}.bind(this),500);}};
k.prototype._closeFullScreen=function(){if(this._oScrollEnablement){this._oScrollEnablement.destroy();this._oScrollEnablement=null;}this.$tempNode.replaceWith(this.$content);this._oToolBar.setDesign(M.ToolbarDesign.Auto);this._oPopup.close();this._$overlay.remove();};
k.prototype._performHeightChanges=function(){var t,v;if(this.getAutoAdjustHeight()||this.getFullScreen()){var $=this.$(),s,i,I;t=$.find(".sapSuiteUiCommonsChartContainerToolBarArea :first");v=$.find(".sapSuiteUiCommonsChartContainerChartArea :first");s=this.getSelectedContent();if(t[0]&&v[0]&&s){var m=$.height();var n=t.height();var o=Math.round(parseFloat(t.css("borderBottomWidth")));var N=m-n-o;var E=v.height();i=s.getContent();if(i){I=i.getMetadata().getName();if(I==="sap.viz.ui5.controls.VizFrame"||I==="sap.chart.Chart"){if(N>0&&N!==E){this._rememberOriginalHeight(i);i.setHeight(N+"px");}}else if(this.$("chartArea").innerWidth()&&i.$().innerWidth()!==this.$("chartArea").innerWidth()){this.rerender();}}}}};
k.prototype._rememberOriginalHeight=function(i){var s;if(q.isFunction(i.getHeight)){s=i.getHeight();}else{s=0;}this._mOriginalVizFrameHeights[i.getId()]=s;};
k.prototype._switchChart=function(i){var o=this._findChartById(i);this._setSelectedContent(o);this.fireContentChange({selectedItemId:i});this.rerender();};
k.prototype._chartChange=function(){var m=this.getContent();this._destroyButtons(this._aUsedContentIcons);this._aUsedContentIcons=[];if(this.getContent().length===0){this._oChartSegmentedButton.removeAllButtons();this._setDefaultOnSegmentedButton();this.switchChart(null);}if(m){var s=this.getShowLegend();var I;var o;for(var i=0;i<m.length;i++){if(!m[i].getVisible()){continue;}I=m[i].getContent();if(q.isFunction(I.setVizProperties)){I.setVizProperties({legend:{visible:s},sizeLegend:{visible:s}});}if(q.isFunction(I.setWidth)){I.setWidth("100%");}if(q.isFunction(I.setHeight)&&this._mOriginalVizFrameHeights[I.getId()]){I.setHeight(this._mOriginalVizFrameHeights[I.getId()]);}o=new B({icon:m[i].getIcon(),type:j.Transparent,tooltip:m[i].getTitle(),customData:[new d({key:'chartId',value:I.getId()})],press:this._onButtonIconPress.bind(this)});this._aUsedContentIcons.push(o);if(i===0){this._setSelectedContent(m[i]);this._oActiveChartButton=o;}}}this._bChartContentHasChanged=false;};
k.prototype._findChartById=function(m){var o=this.getAggregation("content");if(o){for(var i=0;i<o.length;i++){if(o[i].getContent().getId()===m){return o[i];}}}return null;};
k.prototype._getToolbarPlaceHolderPosition=function(t){var o;for(var i=0;i<t.getContent().length;i++){o=t.getContent()[i];if(o.getMetadata&&o.getMetadata().getName()==="sap.suite.ui.commons.ChartContainerToolbarPlaceholder"){return i;}}return-1;};
k.prototype._addContentToolbar=function(i,p){if(!this._bHasApplicationToolbar){if(!p){this._oToolBar.addContent(i);}else{this._oToolBar.insertContent(i,p);}}else{if(i instanceof c){this._iPlaceholderPosition=this._getToolbarPlaceHolderPosition(this._oToolBar);return;}if(p){this._iPlaceholderPosition=this._iPlaceholderPosition+p;}this._oToolBar.insertContent(i,this._iPlaceholderPosition);this._iPlaceholderPosition=this._iPlaceholderPosition+1;}};
k.prototype._rearrangeToolbar=function(){var t=this._aToolbarContent.length;for(var i=0;i<t;i++){this._oToolBar.insertContent(this._aToolbarContent[i],i);}};
k.prototype._adjustIconsDisplay=function(){if(this.getShowSelectionDetails()){this._addContentToolbar(this._getSelectionDetails());}if(this.getShowLegendButton()){this._addContentToolbar(this._oShowLegendButton);}if(this.getShowZoom()&&D.system.desktop){this._addContentToolbar(this._oZoomInButton);this._addContentToolbar(this._oZoomOutButton);}if(this.getShowPersonalization()){this._addContentToolbar(this._oPersonalizationButton);}if(this.getShowFullScreen()){this._addContentToolbar(this._oFullScreenButton);}var i=0;for(i;i<this._aCustomIcons.length;i++){this._addContentToolbar(this._aCustomIcons[i]);}if(!this._bControlNotRendered){this._oChartSegmentedButton.removeAllButtons();}var I=this._aUsedContentIcons.length;if(I>1){for(i=0;i<I;i++){this._oChartSegmentedButton.addButton(this._aUsedContentIcons[i]);}this._addContentToolbar(this._oChartSegmentedButton);}};
k.prototype._adjustSelectorDisplay=function(){if(this._aDimensionSelectors.length===0){this._oChartTitle.setVisible(true);this._addContentToolbar(this._oChartTitle);return;}for(var i=0;i<this._aDimensionSelectors.length;i++){if(q.isFunction(this._aDimensionSelectors[i].setAutoAdjustWidth)){this._aDimensionSelectors[i].setAutoAdjustWidth(true);}this._addContentToolbar(this._aDimensionSelectors[i]);}};
k.prototype._adjustDisplay=function(){this._oToolBar=this.getToolbar();if(this._oToolbarSpacer){this._oToolBar.removeContent(this._oToolbarSpacer);this._oToolbarSpacer.destroy();}this._oToolBar.removeAllContent();this._oToolBar.setProperty("height","3rem",true);if(this._bHasApplicationToolbar){this._rearrangeToolbar();this._iPlaceholderPosition=0;}this._adjustSelectorDisplay();this._oToolbarSpacer=new c();this._addContentToolbar(this._oToolbarSpacer);this._adjustIconsDisplay();};
k.prototype._addButtonToCustomIcons=function(i){var I=i;var s=I.getTooltip();var o=new b({icon:I.getSrc(),text:s,tooltip:s,type:j.Transparent,visible:I.getVisible(),press:[{icon:I},this._onOverflowToolbarButtonPress.bind(this)]});this._aCustomIcons.push(o);};
k.prototype._zoom=function(z){var o=this.getSelectedContent().getContent();if(o.getMetadata().getName()==="sap.viz.ui5.controls.VizFrame"){if(z){o.zoom({"direction":"in"});}else{o.zoom({"direction":"out"});}}if(z){this.fireCustomZoomInPress();}else{this.fireCustomZoomOutPress();}this._manageZoomIcons(o._getZoomInfo().currentZoomLevel);};
k.prototype._manageZoomIcons=function(z){if(z===undefined){return;}else if(z===null){this._oZoomOutButton.setEnabled(false);this._oZoomInButton.setEnabled(false);}else if(z===0){this._oZoomOutButton.setEnabled(false);this._oZoomInButton.setEnabled(true);}else if(z===1){this._oZoomInButton.setEnabled(false);this._oZoomOutButton.setEnabled(true);}else{if(this._oZoomOutButton.getEnabled()==false){this._oZoomOutButton.setEnabled(true);}if(this._oZoomInButton.getEnabled()==false){this._oZoomInButton.setEnabled(true);}}};
k.prototype._destroyButtons=function(m){for(var i=0;i<m.length;i++){m[i].destroy();}};
k.prototype._setShowLegendForAllCharts=function(s){var m=this.getContent();var I;for(var i=0;i<m.length;i++){I=m[i].getContent();if(q.isFunction(I.setLegendVisible)){I.setLegendVisible(s);}else{L.info("ChartContainer: chart with id "+I.getId()+" is missing the setVizProperties property");}}};
k.prototype.setFullScreen=function(i){if(this._bControlNotRendered){return this;}if(this.getFullScreen()===i){return this;}if(this.getProperty("fullScreen")!==i){this._toggleFullScreen();}return this;};
k.prototype.setTitle=function(t){if(this.getTitle()===t){return this;}this._oChartTitle.setText(t);this.setProperty("title",t,true);return this;};
k.prototype.setShowLegendButton=function(s){if(this.getShowLegendButton()===s){return this;}this.setProperty("showLegendButton",s,true);if(!this.getShowLegendButton()){this.setShowLegend(false);}return this;};
k.prototype.setSelectorGroupLabel=function(s){if(this.getSelectorGroupLabel()===s){return this;}this.setProperty("selectorGroupLabel",s,true);return this;};
k.prototype.setShowLegend=function(s){if(this.getShowLegend()===s){return this;}this.setProperty("showLegend",s,true);this._setShowLegendForAllCharts(s);return this;};
k.prototype.setWrapLabels=function(i){var s;if(this.getWrapLabels()!==i){this.setProperty("wrapLabels",i);s=this._getSelectionDetails();if(s){s.setWrapLabels(i);}}return this;};
k.prototype.setToolbar=function(t){if(!t||this._getToolbarPlaceHolderPosition(t)===-1){L.info("A placeholder of type 'sap.suite.ui.commons.ChartContainerToolbarPlaceholder' needs to be provided. Otherwise, the toolbar will be ignored");return this;}if(this.getToolbar()!==t){this.setAggregation("toolbar",t);}if(this.getToolbar()){this._aToolbarContent=this.getToolbar().getContent();this._bHasApplicationToolbar=true;}else{this._aToolbarContent=null;this._bHasApplicationToolbar=false;}this.invalidate();return this;};
k.prototype.getDimensionSelectors=function(){return this._aDimensionSelectors;};
k.prototype.indexOfDimensionSelector=function(m){for(var i=0;i<this._aDimensionSelectors.length;i++){if(this._aDimensionSelectors[i]===m){return i;}}return-1;};
k.prototype.addDimensionSelector=function(i){this._aDimensionSelectors.push(i);return this;};
k.prototype.insertDimensionSelector=function(m,n){if(!m){return this;}var i;if(n<0){i=0;}else if(n>this._aDimensionSelectors.length){i=this._aDimensionSelectors.length;}else{i=n;}if(i!==n){L.warning("ManagedObject.insertAggregation: index '"+n+"' out of range [0,"+this._aDimensionSelectors.length+"], forced to "+i);}this._aDimensionSelectors.splice(i,0,m);return this;};
k.prototype.destroyDimensionSelectors=function(){if(this._oToolBar){for(var i=0;i<this._aDimensionSelectors.length;i++){if(this._aDimensionSelectors[i]){this._oToolBar.removeContent(this._aDimensionSelectors[i]);this._aDimensionSelectors[i].destroy();}}}this._aDimensionSelectors=[];return this;};
k.prototype.removeDimensionSelector=function(i){if(!i){return null;}if(this._oToolBar){this._oToolBar.removeContent(i);}var m=this.indexOfDimensionSelector(i);if(m===-1){return null;}else{return this._aDimensionSelectors.splice(m,1)[0];}};
k.prototype.removeAllDimensionSelectors=function(){var m=this._aDimensionSelectors.slice();if(this._oToolBar){for(var i=0;i<this._aDimensionSelectors.length;i++){if(this._aDimensionSelectors[i]){this._oToolBar.removeContent(this._aDimensionSelectors[i]);}}}this._aDimensionSelectors=[];return m;};
k.prototype.addContent=function(i){this.addAggregation("content",i);this._bChartContentHasChanged=true;return this;};
k.prototype.insertContent=function(i,m){this.insertAggregation("content",i,m);this._bChartContentHasChanged=true;return this;};
k.prototype.updateContent=function(){this.updateAggregation("content");this._bChartContentHasChanged=true;};
k.prototype.addAggregation=function(i,o,s){if(i==="dimensionSelectors"){return this.addDimensionSelector(o);}else{return a.prototype.addAggregation.apply(this,arguments);}};
k.prototype.getAggregation=function(i,m){if(i==="dimensionSelectors"){return this.getDimensionSelectors();}else{return a.prototype.getAggregation.apply(this,arguments);}};
k.prototype.indexOfAggregation=function(i,o){if(i==="dimensionSelectors"){return this.indexOfDimensionSelector(o);}else{return a.prototype.indexOfAggregation.apply(this,arguments);}};
k.prototype.insertAggregation=function(i,o,m,s){if(i==="dimensionSelectors"){return this.insertDimensionSelector(o,m);}else{return a.prototype.insertAggregation.apply(this,arguments);}};
k.prototype.destroyAggregation=function(i,s){if(i==="dimensionSelectors"){return this.destroyDimensionSelectors();}else{return a.prototype.destroyAggregation.apply(this,arguments);}};
k.prototype.removeAggregation=function(i,o,s){if(i==="dimensionSelectors"){return this.removeDimensionSelector(o);}else{return a.prototype.removeAggregation.apply(this,arguments);}};
k.prototype.removeAllAggregation=function(i,s){if(i==="dimensionSelectors"){return this.removeAllDimensionSelectors();}else{return a.prototype.removeAllAggregation.apply(this,arguments);}};
k.prototype.getSelectedContent=function(){return this._oSelectedContent;};
k.prototype.getScrollDelegate=function(){return this._oScrollEnablement;};
k.prototype.switchChart=function(i){this._setSelectedContent(i);this.rerender();};
k.prototype.updateChartContainer=function(){this._bChartContentHasChanged=true;this.rerender();return this;};
k.prototype.setWidth=function(v){this.setProperty("width",v,true);this.$().css("width",this.getWidth());return this;};
return k;});
sap.ui.predefine('sap/suite/ui/commons/ChartContainerContent',["sap/ui/thirdparty/jquery",'sap/ui/core/Control','sap/ui/base/Event','sap/m/SelectionDetails','sap/m/SelectionDetailsItem','sap/m/SelectionDetailsItemLine','sap/suite/ui/commons/ChartContainer','./ChartContainerContentRenderer'],function(q,C,E,S,a,b,c,d){"use strict";
var e=C.extend("sap.suite.ui.commons.ChartContainerContent",{metadata:{library:"sap.suite.ui.commons",properties:{icon:{type:"string",group:"Misc",defaultValue:null},title:{type:"string",group:"Misc",defaultValue:null}},aggregations:{content:{type:"sap.ui.core.Control",multiple:false}}}});
e.prototype.init=function(){this._oSelectionDetails=new S();this._oSelectionDetails.registerSelectionDetailsItemFactory(e._selectionDetailsItemFactory);};
e.prototype.onBeforeRendering=function(){var p=this.getParent(),o;this._oSelectionDetails.detachSelectionHandler("_selectionDetails");o=this.getContent();if(o&&o.getMetadata().getName()==="sap.viz.ui5.controls.VizFrame"){this._oSelectionDetails.attachSelectionHandler("_selectionDetails",o);}if(p instanceof c){this._oSelectionDetails.setWrapLabels(p.getWrapLabels());}};
e.prototype.exit=function(){if(this._oSelectionDetails){this._oSelectionDetails.destroy();this._oSelectionDetails=null;}};
e.prototype.getSelectionDetails=function(){e._addEventMapping(this._oSelectionDetails);return this._oSelectionDetails.getFacade();};
e.prototype._getSelectionDetails=function(){var o=this.getContent();if(o&&o.getMetadata().getName()==="sap.viz.ui5.controls.VizFrame"){return this._oSelectionDetails;}};
e._selectionDetailsItemFactory=function(f,g,h,j,s){s=s||"";var l=[],L,I=typeof s==="string";for(var i=0;i<f.length;i++){L=new b({label:f[i].label,value:f[i].value,unit:f[i].unit});if(!I){L.setLineMarker(s[f[i].id]);}else if(i===0){L.setLineMarker(s);}l.push(L);}return new a({lines:l});};
e._aProxyEvent=["beforeOpen","beforeClose","navigate","actionPress"];
e._addEventMapping=function(s){var A=s.attachEvent;s.attachEvent=function(f,g,h,l){if(e._aProxyEvent.indexOf(f)===-1){A.apply(this,arguments);return;}else if(q.type(g)==="function"){l=h;h=g;g=null;}A.apply(s,[f,g,p,l||s.getFacade()]);function p(i){var o=new E(f,i.oSource,i.mParameters);o.getSource=s.getFacade;if(f==="actionPress"){i.getParameters().items=j(i);}else if(f==="navigate"){i.getParameters().item=i.getParameter("item").getFacade();}h.call(l||s.getFacade(),o,g);}function j(k){var I=k.getParameter("items"),m=[];for(var i=0;i<I.length;i++){m.push(I[i].getFacade());}return m;}};};
return e;});
sap.ui.predefine('sap/suite/ui/commons/ChartContainerContentRenderer',function(){"use strict";var C={};
C.render=function(r,c){r.renderControl(c.getContent());};
return C;},true);
sap.ui.predefine('sap/suite/ui/commons/ChartContainerRenderer',function(){"use strict";var C={};
C.render=function(r,c){var s=c.getSelectedContent();r.write("<div");r.writeControlData(c);r.addClass("sapSuiteUiCommonsChartContainer");r.style("width",c.getWidth());r.writeClasses();r.write(">");r.write("<div");r.writeAttributeEscaped("id",c.getId()+"-wrapper");r.addClass("sapSuiteUiCommonsChartContainerWrapper");r.writeClasses();r.write(">");r.write("<div");r.addClass("sapSuiteUiCommonsChartContainerToolBarArea");r.writeClasses();r.write(">");r.renderControl(c.getToolbar());r.write("</div>");r.write("<div");r.writeAttributeEscaped("id",c.getId()+"-chartArea");r.addClass("sapSuiteUiCommonsChartContainerChartArea");r.writeClasses();r.write(">");if(s!==null){r.renderControl(s);}else if(c.getContent().length>0){s=c.getContent()[0];r.renderControl(s);}r.write("</div>");r.write("</div>");r.write("</div>");};
return C;},true);
sap.ui.predefine('sap/suite/ui/commons/ChartContainerToolbarPlaceholder',['sap/ui/core/Control','./ChartContainerToolbarPlaceholderRenderer'],function(C,a){"use strict";
var b=C.extend("sap.suite.ui.commons.ChartContainerToolbarPlaceholder",{metadata:{library:"sap.suite.ui.commons"}});
return b;});
sap.ui.predefine('sap/suite/ui/commons/ChartContainerToolbarPlaceholderRenderer',function(){"use strict";var C={};
C.render=function(r,c){};
return C;},true);
sap.ui.predefine('sap/suite/ui/commons/ProcessFlow',["sap/ui/thirdparty/jquery","./library","sap/m/library","sap/ui/core/Control","sap/suite/ui/commons/ProcessFlowConnection","sap/suite/ui/commons/ProcessFlowLaneHeader","sap/ui/Device","sap/ui/core/ResizeHandler","sap/base/Log","sap/ui/events/KeyCodes","./ProcessFlowRenderer"],function(q,l,M,C,P,a,D,R,L,K,b){"use strict";
var c=C.extend("sap.suite.ui.commons.ProcessFlow",{metadata:{library:"sap.suite.ui.commons",properties:{foldedCorners:{type:"boolean",group:"Misc",defaultValue:false},scrollable:{type:"boolean",group:"Misc",defaultValue:true},wheelZoomable:{type:"boolean",group:"Behavior",defaultValue:true},showLabels:{type:"boolean",group:"Appearance",defaultValue:false}},defaultAggregation:"lanes",aggregations:{_connections:{type:"sap.suite.ui.commons.ProcessFlowConnection",multiple:true,singularName:"_connection",visibility:"hidden"},nodes:{type:"sap.suite.ui.commons.ProcessFlowNode",multiple:true,singularName:"node"},lanes:{type:"sap.suite.ui.commons.ProcessFlowLaneHeader",multiple:true,singularName:"lane"},ariaProperties:{type:"sap.suite.ui.commons.AriaProperties",multiple:false,group:"Misc"}},events:{nodeTitlePress:{deprecated:true,parameters:{oEvent:{type:"object"}}},nodePress:{parameters:{oEvent:{type:"object"}}},labelPress:{parameters:{oEvent:{type:"object"}}},headerPress:{parameters:{oEvent:{type:"object"}}},onError:{parameters:{oEvent:{type:"object"}}}},dnd:{draggable:false,droppable:true}}});
c.prototype._resBundle=null;c._cellEdgeConstants={"LU":"tl","LD":"lb","DU":"tb","LR":"rl","DR":"rt","UR":"rb"};c._constants={scrollContainer:"scrollContainer",counterLeft:"counterLeft",counterRight:"counterRight",arrowScrollRight:"arrowScrollRight",arrowScrollRightMinus:"-arrowScrollRight",arrowScrollLeft:"arrowScrollLeft",arrowScrollLeftMinus:"-arrowScrollLeft",top:"top",px:"px",parents:"parents",left:"left",right:"right"};c._mouseEvents={mouseMove:"mousemove",mouseDown:"mousedown",mouseUp:"mouseup",mouseLeave:"mouseleave",mouseEnter:"mouseenter",touchStart:"touchstart",sapTouchStart:"saptouchstart",touchEnd:"touchend",sapTouchCancel:"saptouchcancel"};c._enumMoveDirection={"LEFT":"left","RIGHT":"right","UP":"up","DOWN":"down"};c.prototype._zoomLevel=l.ProcessFlowZoomLevel.Two;c.prototype._wheelTimeout=null;c.prototype._isFocusChanged=false;c.prototype._wheelTimestamp=null;c.prototype._wheelCalled=false;c.prototype._internalCalcMatrix=false;c.prototype._internalConnectionMap=null;c.prototype._internalLanes=false;c.prototype._jumpOverElements=5;c.prototype._lastNavigationFocusElement=null;c.prototype._bHighlightedMode=false;c.prototype._isLayoutOptimized=false;c.prototype._defaultCursorClass="sapSuiteUiDefaultCursorPF";if(D.browser.msie||D.browser.edge){c.prototype._grabCursorClass="sapSuiteUiGrabCursorIEPF";c.prototype._grabbingCursorClass="sapSuiteUiGrabbingCursorIEPF";}else{c.prototype._grabCursorClass="sapSuiteUiGrabCursorPF";c.prototype._grabbingCursorClass="sapSuiteUiGrabbingCursorPF";}c.prototype._mousePreventEvents="contextmenu dblclick";c.prototype._mouseEvents="contextmenu mousemove mouseleave mousedown mouseup mouseenter";c.prototype._mouseWheelEvent=D.browser.mozilla?"DOMMouseScroll MozMousePixelScroll":"mousewheel wheel";c.prototype._headerHasFocus=false;c.prototype._isInitialZoomLevelNeeded=true;c.prototype._bDoScroll=!D.system.desktop||D.os.windows&&D.os.version>=8;c.prototype._scrollStep=192;c.prototype._bPreviousScrollForward=false;c.prototype._bPreviousScrollBack=false;c.prototype._iInitialArrowTop=undefined;c.prototype._iInitialCounterTop=undefined;c.prototype._bRtl=false;c.prototype._arrowScrollable=null;c.prototype._iTouchStartScrollTop=undefined;c.prototype._iTouchStartScrollLeft=undefined;c.prototype._bSetFocusOnce=true;
c.prototype.init=function(){this._bRtl=sap.ui.getCore().getConfiguration().getRTL();if(!this._resBundle){this._resBundle=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");}this._internalLanes=[];if(this._getScrollContainer()){this._getScrollContainer().bind("keydown",q.proxy(this.onkeydown,this));}};
c.prototype.exit=function(){var n=this.getNodes(),i;if(n){for(i=0;i<n.length;i++){if(n[i]){n[i].destroy();}}n=null;}if(this._internalLanes){for(i=0;i<this._internalLanes.length;i++){this._internalLanes[i].destroy();}this._internalLanes=null;}var I=this.getAggregation("_connections");if(I){for(i=0;i<I.length;i++){I[i].destroy();}I=null;}if(this._oArrowLeft){this._oArrowLeft.destroy();}if(this._oArrowRight){this._oArrowRight.destroy();}if(this._resizeRegId){R.deregister(this._resizeRegId);}if(this._internalCalcMatrix){delete this._internalCalcMatrix;this._internalCalcMatrix=null;}if(this._getScrollContainer()){this._getScrollContainer().unbind(this._mousePreventEvents,this._handlePrevent);this._getScrollContainer().unbind(this._mouseEvents,q.proxy(this._registerMouseEvents,this));this._getScrollContainer().unbind(this._mouseWheelEvent,q.proxy(this._registerMouseWheel,this));this._getScrollContainer().unbind("keydown",q.proxy(this.onkeydown,this));this._getScrollContainer().unbind("scroll",q.proxy(this._onScroll,this));}};
c.prototype.onBeforeRendering=function(){if(this._getScrollContainer()){this._getScrollContainer().unbind(this._mousePreventEvents,this._handlePrevent);this._getScrollContainer().unbind(this._mouseEvents,q.proxy(this._registerMouseEvents,this));this._getScrollContainer().unbind(this._mouseWheelEvent,q.proxy(this._registerMouseWheel,this));this._getScrollContainer().unbind("keydown",q.proxy(this.onkeydown,this));this._getScrollContainer().unbind("scroll",q.proxy(this._onScroll,this));}};
c.prototype.onAfterRendering=function(){var s=false,$=this.$("scroll-content"),h,w,S,i;this._checkOverflow(this._getScrollContainer().get(0),this.$());this.iCursorPositionX=0;this.iCursorPositionY=0;if($&&$.length){this._getScrollContainer().find(".sapSuiteUiCommonsProcessFlowNode .sapUiIcon").css("cursor","inherit");if(this.getScrollable()){h=parseInt(this._getScrollContainer().css("height").slice(0,-2),10);w=parseInt(this._getScrollContainer().css("width").slice(0,-2),10);i=$[0].scrollHeight;S=$[0].scrollWidth;if(i<=h&&S<=w){this._clearHandlers(this._getScrollContainer());this._switchCursors(this._getScrollContainer(),this._grabCursorClass,this._defaultCursorClass);}else{this._switchCursors(this._getScrollContainer(),this._defaultCursorClass,this._grabCursorClass);s=true;}}else{this._clearHandlers(this._getScrollContainer());this._switchCursors(this._getScrollContainer(),this._grabCursorClass,this._defaultCursorClass);$.css("position","static");}if(s){if(!this._iInitialArrowTop||!this._iInitialCounterTop){this._iInitialArrowTop=parseInt(this.$(c._constants.arrowScrollRight).css(c._constants.top),10);this._iInitialCounterTop=parseInt(this.$(c._constants.counterRight).css(c._constants.top),10);}if(D.os.windows&&D.system.combi&&D.browser.chrome){this._getScrollContainer().bind(this._mouseEvents,q.proxy(this._registerMouseEvents,this));this._getScrollContainer().css("overflow","auto");}else if(D.os.windows&&(D.browser.msie&&(D.browser.version>9)||D.browser.edge)){this._getScrollContainer().bind(this._mouseEvents,q.proxy(this._registerMouseEvents,this));this._getScrollContainer().css("overflow","auto");this._getScrollContainer().css("-ms-overflow-style","none");}else if(!D.support.touch){this._getScrollContainer().bind(this._mouseEvents,q.proxy(this._registerMouseEvents,this));}else{this._clearHandlers(this._getScrollContainer());this._getScrollContainer().css("overflow","auto");}}else if(this._bDoScroll){this._getScrollContainer().css("overflow","auto");}else{this._getScrollContainer().css("overflow","hidden");}if(this.getWheelZoomable()&&D.system.desktop&&!this._isHeaderMode()){this._getScrollContainer().bind(this._mouseWheelEvent,q.proxy(this._registerMouseWheel,this));}if(this._bDoScroll){this._getScrollContainer().bind("scroll",q.proxy(this._onScroll,this));}this._resizeRegId=R.register(this,q.proxy(c.prototype._onResize,this));if(this._isInitialZoomLevelNeeded){this._initZoomLevel();}if(this._headerHasFocus){var d=this.$("scroll-content").children().children().children(1).children("td[tabindex='0']").first().children();if(d[0]){var n=sap.ui.getCore().byId(d[0].id);this._changeNavigationFocus(null,n);this._headerHasFocus=false;}}}};
c.prototype.ontouchend=function(e){if(e.target&&e.target.id.indexOf("arrowScroll")!==-1){this._onArrowClick(e);}else{if(!D.support.touch){this.onAfterRendering();}else{this._adjustAndShowArrow();}if(e===null||e.oSource===undefined){return;}e.preventDefault();if(this._isHeaderMode()){this._internalLanes=[];this.fireHeaderPress(this);}}};
c.prototype._handlePrevent=function(e){if(e&&!e.isDefaultPrevented()){e.preventDefault();}if(e&&!e.isPropagationStopped()){e.stopPropagation();}if(e&&!e.isImmediatePropagationStopped()){e.stopImmediatePropagation();}};
c.prototype._onResize=function(){var A=new Date().getTime();if(!this._iLastResizeEventTime||((A-this._iLastResizeEventTime)<50)){if(!this._iLastResizeHandlingTime||(A-this._iLastResizeHandlingTime>500)){this.onAfterRendering();this._iLastResizeHandlingTime=new Date().getTime();}}else{this._iLastResizeHandlingTime=null;}this._iLastResizeEventTime=new Date().getTime();};
c.prototype._registerMouseEvents=function(e){if(e&&!e.isDefaultPrevented()){e.preventDefault();}switch(e.type){case c._mouseEvents.mouseMove:if(this._getScrollContainer().hasClass(this._grabbingCursorClass)){if(sap.ui.getCore().getConfiguration().getRTL()){this._getScrollContainer().scrollLeftRTL(this.iCursorPositionX-e.pageX);}else{this._getScrollContainer().scrollLeft(this.iCursorPositionX-e.pageX);}this._getScrollContainer().scrollTop(this.iCursorPositionY-e.pageY);this._adjustAndShowArrow();}break;case c._mouseEvents.mouseDown:this._switchCursors(this._getScrollContainer(),this._defaultCursorClass,this._grabbingCursorClass);if(sap.ui.getCore().getConfiguration().getRTL()){this.iCursorPositionX=this._getScrollContainer().scrollLeftRTL()+e.pageX;}else{this.iCursorPositionX=this._getScrollContainer().scrollLeft()+e.pageX;}this.iCursorPositionY=this._getScrollContainer().scrollTop()+e.pageY;if(D.system.combi){this._iTouchStartScrollLeft=this._getScrollContainer().scrollLeft();if(this.getScrollable()){this._iTouchStartScrollTop=this._getScrollContainer().scrollTop();}}break;case c._mouseEvents.mouseUp:this._switchCursors(this._getScrollContainer(),this._grabbingCursorClass,this._grabCursorClass);break;case c._mouseEvents.mouseLeave:this._getScrollContainer().removeClass(this._grabbingCursorClass);this._getScrollContainer().removeClass(this._grabCursorClass);this._getScrollContainer().addClass(this._defaultCursorClass);break;case c._mouseEvents.mouseEnter:this._getScrollContainer().removeClass(this._defaultCursorClass);if(e.buttons===null){if(e.which===1){this._getScrollContainer().addClass(this._grabbingCursorClass);}else{this._getScrollContainer().addClass(this._grabCursorClass);}}else if(e.buttons===0){this._getScrollContainer().addClass(this._grabCursorClass);}else if(e.buttons===1){this._getScrollContainer().addClass(this._grabbingCursorClass);}break;default:}if(e.target&&e.target.parentElement&&e.target.parentElement.parentElement&&e.target.parentElement.parentElement.getMetadata&&e.target.parentElement.parentElement.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnectionLabel"){if(e&&!e.isPropagationStopped()){e.stopPropagation();}if(e&&!e.isImmediatePropagationStopped()){e.stopImmediatePropagation();}}};
c.prototype.onfocusin=function(e){var t;if(e&&e.target&&e.target.id){t=sap.ui.getCore().byId(e.target.id);}if(this._isHeaderMode()||this._checkNodesVisibility()){this._setFocusOnHeader(true);}else if(this._bSetFocusOnce&&!(t&&e.target.id.indexOf("arrowScroll"))){this._bSetFocusOnce=false;if(t&&t.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnectionLabel"){this._changeNavigationFocus(null,t);}else if(!this._lastNavigationFocusElement){var $=this.$("scroll-content").children().children().children(1).children("td[tabindex='0']").first().children();var n=sap.ui.getCore().byId($[0].id);this._changeNavigationFocus(null,n);}else if(this._lastNavigationFocusElement){this._changeNavigationFocus(null,this._lastNavigationFocusElement);}}};
c.prototype._checkNodesVisibility=function(){var d=true;this.getNodes().forEach(function(n){if(n.getVisible()){d=false;}});return d;};
c.prototype.onfocusout=function(){this._bSetFocusOnce=true;if(this._lastNavigationFocusElement&&this._lastNavigationFocusElement._getNavigationFocus()){this._lastNavigationFocusElement._setNavigationFocus(false);if(this._lastNavigationFocusElement.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){this._lastNavigationFocusElement.rerender();}}};
c.prototype.onsapplus=function(){this._isFocusChanged=true;this.zoomIn();};
c.prototype.onsapminus=function(){this._isFocusChanged=true;this.zoomOut();};
c.prototype.onsaptabnext=function(e){var f=true;var $=e.target;var A=sap.ui.getCore().byId($.id);if(!A&&$&&$.childElementCount>0){$=$.childNodes[0];A=sap.ui.getCore().byId($.id);}if(!A||(A.getMetadata().getName()!=="sap.suite.ui.commons.ProcessFlowNode"&&A.getMetadata().getName()!=="sap.suite.ui.commons.ProcessFlowConnectionLabel")){if(!this._isHeaderMode()&&!this._lastNavigationFocusElement&&!this._checkNodesVisibility()){var d=this.$("scroll-content").children().children().children(1).children("td[tabindex='0']").first().children();var n=sap.ui.getCore().byId(d[0].id);this._changeNavigationFocus(null,n);f=false;}else if(this._lastNavigationFocusElement){this._changeNavigationFocus(null,this._lastNavigationFocusElement);f=false;}}if((this._isHeaderMode()||this._checkNodesVisibility())&&f){if(!this._headerHasFocus){this._setFocusOnHeader(true);}else{this._setFocusOnHeader(false);}}else if(this._lastNavigationFocusElement&&this._lastNavigationFocusElement.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){this._lastNavigationFocusElement.rerender();}var N;if(f){N=this.$().nextAll(":focusable").first();if(N.length===0){N=this.$().nextAll().find(":focusable").first();if(N.length===0){s.apply(this);}}N.focus();L.debug("saptabnext: Keyboard focus has been changed to element:  id='"+N.id+"' outerHTML='"+N.outerHTML+"'");N=null;}e.preventDefault();function s(){var g=this.$().parent();do{N=g.next(":focusable");if(N.length===0){N=g.nextAll().find(":focusable").first();}g=g.parent();}while((g.length!==0)&&(N.length===0));if(N.length===0){N=q(":focusable")[0];}}};
c.prototype.onsaptabprevious=function(e){var p=null;var $=e.target;if((!this._lastNavigationFocusElement||!this._lastNavigationFocusElement._getNavigationFocus())&&e.target&&e.target.childElementCount>0){$=e.target.childNodes[0];}var A=sap.ui.getCore().byId($.id);if(A&&(A.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"||A.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode")){if(!this._isHeaderMode()&&!this._lastNavigationFocusElement){var d=this.$("scroll-content").children().children().children(1).children("td[tabindex='0']").first().children();var n=sap.ui.getCore().byId(d[0].id);this._changeNavigationFocus(null,n);}else if(this._lastNavigationFocusElement){this._changeNavigationFocus(null,this._lastNavigationFocusElement);e.preventDefault();return;}}if(this._isHeaderMode()){if(!this._headerHasFocus){this._setFocusOnHeader(true);}else{this._setFocusOnHeader(false);p=this.$().prevAll().find(":focusable").first();}}else{p=this.$().prev(":focusable");if(p.length===0){p=this.$().prevAll().find(":focusable").first();}if(this._lastNavigationFocusElement){this._lastNavigationFocusElement._setNavigationFocus(false);}if(this._lastNavigationFocusElement&&this._lastNavigationFocusElement.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){this._lastNavigationFocusElement.rerender();}}if(p){if(p.length===0){s.apply(this);}else if(p.first().length!==0){p=q(p.first());}p.focus();L.debug("saptabnext: Keyboard focus has been set on element:  id='"+p.id+"' outerHTML='"+p.outerHTML+"'");p=null;}e.preventDefault();function s(){var f=this.$();do{p=f.prev(":focusable");if(p.length===0){p=f.prevAll().find(":focusable").last();}f=f.parent();}while((f.length!==0)&&(p.length===0));}};
c.prototype._handleKeySelect=function(e){if(this._isHeaderMode()){this._internalLanes=[];this.fireHeaderPress(this);var $=this.$("scroll-content").children().children().children(1).children("td[tabindex='0']").first().children();var n=sap.ui.getCore().byId($[0].id);this._changeNavigationFocus(null,n);}else if(this._lastNavigationFocusElement&&this._lastNavigationFocusElement.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"&&this._lastNavigationFocusElement._getNavigationFocus()){var f=this._lastNavigationFocusElement;f._handleEvents(e);}};
c.prototype.onkeyup=function(e){var k=e.keyCode?e.keyCode:e.which;switch(k){case K.ENTER:case K.SPACE:var f=this._lastNavigationFocusElement;if(f){this.fireNodePress(this._lastNavigationFocusElement);f._handleEvents(e);}break;default:break;}};
c.prototype.onkeydown=function(e){var k=(e.keyCode?e.keyCode:e.which);L.debug("ProcessFlow::keyboard input has been catched and action going to start: keycode="+k);var E=false;var d=e.ctrlKey;var f=e.altKey;var p=this._lastNavigationFocusElement;switch(k){case K.ARROW_RIGHT:E=this._moveToNextElement(c._enumMoveDirection.RIGHT);break;case K.ARROW_LEFT:E=this._moveToNextElement(c._enumMoveDirection.LEFT);break;case K.ARROW_DOWN:E=this._moveToNextElement(c._enumMoveDirection.DOWN);break;case K.ARROW_UP:E=this._moveToNextElement(c._enumMoveDirection.UP);break;case K.PAGE_UP:E=this._moveOnePage(c._enumMoveDirection.UP,f);break;case K.PAGE_DOWN:E=this._moveOnePage(c._enumMoveDirection.DOWN,f);break;case K.HOME:E=this._moveHomeEnd(c._enumMoveDirection.LEFT,d);break;case K.END:E=this._moveHomeEnd(c._enumMoveDirection.RIGHT,d);break;case K.NUMPAD_0:case K.DIGIT_0:this._initZoomLevel();break;case K.ENTER:case K.SPACE:this._handleKeySelect(e);e.preventDefault();return;default:return;}e.preventDefault();if(E){this._changeNavigationFocus(p,this._lastNavigationFocusElement);}};
c.prototype._onArrowClick=function(e){var t=e.target.id;if(t){var i=this.getId();e.preventDefault();if(t===i+c._constants.arrowScrollLeftMinus&&D.system.desktop){this._scroll(-this._scrollStep,500);}else if(t===i+c._constants.arrowScrollRightMinus&&D.system.desktop){this._scroll(this._scrollStep,500);}}};
c.prototype._onScroll=function(){var s=this._getScrollContainer().scrollLeft();var d=Math.abs(s-this._iTouchStartScrollLeft);if(d>(this._scrollStep/4)&&!this._isFocusChanged){this._adjustAndShowArrow();this._iTouchStartScrollLeft=s;}else if(this.getScrollable()){var S=this._getScrollContainer().scrollTop();var i=Math.abs(S-this._iTouchStartScrollTop);if(i>10){this._moveArrowAndCounterVertical();this._iTouchStartScrollTop=S;}}};
c.prototype.ontouchstart=function(){this._iTouchStartScrollLeft=this._getScrollContainer().scrollLeft();if(this.getScrollable()){this._iTouchStartScrollTop=this._getScrollContainer().scrollTop();}};
c.prototype.ontouchmove=function(e){e.setMarked();};
c.prototype._handleLabelClick=function(e){if(e){var o=e.getSource();if(o&&o.getMetadata().getName()==="sap.ui.core.Icon"){o=o.getParent();}if(o&&o.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnectionLabel"){var r=this._getConnectionMapEntries(o);var d=this._createLabelPressEventArgs(o,r);this.fireLabelPress(d);}}};
c.prototype._onFocusChanged=function(){var f=this._lastNavigationFocusElement,$=f?f.$():null,s,S,i,d,e,g,h,E,j,p,k,m,n,o,r,t,u=500;if(f&&this.getScrollable()){L.debug("The actually focused element is "+f.getId());if(f.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnectionLabel"){E=$.parent().parent().parent().outerWidth();j=$.parent().parent().parent().outerHeight();p=$.parent().parent().parent().position();}else{E=$.outerWidth();j=$.outerHeight();p=$.position();}L.debug("Element outer width x height ["+E+" x "+j+"]");L.debug("Position of element in the content is ["+p.left+", "+p.top+"]");e=this.$("scroll-content");s=this._getScrollContainer().innerWidth();S=this._getScrollContainer().innerHeight();L.debug("Scroll container inner width x height ["+s+" x "+S+"]");i=this._getScrollContainer().scrollLeft();d=this._getScrollContainer().scrollTop();L.debug("Current scroll offset is ["+i+", "+d+"]");g=e.innerWidth();h=e.innerHeight();L.debug("Scroll content inner width x height ["+g+" x "+h+"]");k=-i+p.left;n=k+E;m=-d+p.top;o=m+j;if((n>s)||(k<0)||(o>S)||(m<0)){r=Math.round((s-E)/2);r=Math.max(s-g+p.left,r);r=Math.min(p.left,r);t=Math.round((S-j)/2);t=Math.max(S-h+p.top,t);t=Math.min(p.top,t);L.debug("Element lies outside the scroll container, scrolling from ["+k+","+m+"] to ["+r+","+t+"]");this._isFocusChanged=true;this._getScrollContainer().animate({scrollTop:p.top-t,scrollLeft:p.left-r},u,"swing",q.proxy(this._adjustAndShowArrow,this));}else{L.debug("Element lies inside the scroll container, no scrolling happens.");this._setFocusToNode(f);}}else{this._setFocusToNode(f);this._adjustAndShowArrow();}};
c.prototype._setScrollWidth=function(){switch(this.getZoomLevel()){case(l.ProcessFlowZoomLevel.One):this._scrollStep=240;break;case(l.ProcessFlowZoomLevel.Two):this._scrollStep=192;break;case(l.ProcessFlowZoomLevel.Three):this._scrollStep=168;break;case(l.ProcessFlowZoomLevel.Four):this._scrollStep=128;break;default:this._scrollStep=192;}};
c.prototype._getLastNavigationFocusElement=function(){return this._lastNavigationFocusElement;};
c.prototype._getNode=function(n,d){for(var i=0;i<d.length;i++){if(d[i].getNodeId()===n.toString()){return d[i];}}};
c.prototype._getLane=function(d){for(var i=0;i<this._internalLanes.length;i++){if(this._internalLanes[i].getLaneId()===d){return this._internalLanes[i];}}};
c.prototype.destroyLanes=function(){this.removeAllAggregation("lanes");this._internalLanes=[];};
c._getChildIdByElement=function(d){if(typeof d==="object"){return d.nodeId;}else{return d;}};
c.prototype._isHeaderMode=function(){var n=this.getNodes();return!n||(n.length===0);};
c.prototype._getScrollContainer=function(){return this.$(c._constants.scrollContainer);};
c.prototype._handleException=function(e){var t=this._resBundle.getText("PF_ERROR_INPUT_DATA");this.fireOnError({text:t});L.error("Error loading data for the process flow with id : "+this.getId());if(e instanceof Array){for(var i=0;i<e.length;i++){L.error("Detailed description ("+i+") :"+e[i]);}}else{L.error("Detailed description  :"+e);}};
c.prototype._getAriaText=function(){return this._resBundle.getText("PF_ARIA_PROCESS_FLOW");};
c.prototype._updateLanesFromNodes=function(){c.NodeElement._createNodeElementsFromProcessFlowNodes(this.getNodes(),this.getLanes());var i=this._arrangeNodesByParentChildRelation(this.getNodes());this._internalLanes=c.NodeElement._updateLanesFromNodes(this.getLanes(),i).lanes;};
c.prototype._getOrCreateLaneMap=function(){if(!this._internalLanes||this._internalLanes.length<=0){this._updateLanesFromNodes();}return c.NodeElement._createMapFromLanes(this._internalLanes,q.proxy(this.ontouchend,this),this._isHeaderMode()).positionMap;};
c.prototype._arrangeNodesByParentChildRelation=function(d){var I=d?d.length:0;var e=[];var i,j;if(I>0){this._setParentForNodes(d);for(i=0;i<I;i++){e=d[i].getChildren();if(e){var f=e.length;for(j=0;j<f;j++){e[j]=c._getChildIdByElement(e[j]).toString();}}for(j=0;j<i;j++){if(e&&Array.prototype.indexOf.call(e,d[j].getNodeId())>-1&&d[j].getLaneId()===d[i].getLaneId()){d.splice(j,0,d[i]);d.splice(i+1,1);d=this._arrangeNodesByParentChildRelation(d);break;}}}}return d;};
c.prototype._getOrCreateProcessFlow=function(){if(!this._internalLanes||this._internalLanes.length<=0||this._isLanesUpdated()){this._resetLanesFromModel();this._updateLanesFromNodes();}this.applyNodeDisplayState();var I=this.getNodes();var r=c.NodeElement._createNodeElementsFromProcessFlowNodes(I,this._internalLanes);var e=r.elementById;var E=r.elementsByLane;var m=this._calculateMatrix(e);m=this._addFirstAndLastColumn(m);c.NodeElement._calculateLaneStatePieChart(E,this._internalLanes,I,this);for(var i=0;i<m.length;i++){for(var j=0;j<m[i].length;j++){if(m[i][j]instanceof c.NodeElement){m[i][j]=e[m[i][j].nodeId].oNode;}}}this._internalCalcMatrix=m;return m;};
c.prototype._isLanesUpdated=function(){var o=this.getLanes();if(o.length!=this._internalLanes.length){return true;}var d;for(var i=0;i<o.length;i++){var e=o[i];d=false;for(var j=0;j<this._internalLanes.length;j++){var f=this._internalLanes[j];if(f.getLaneId()===e.getLaneId()){d=true;break;}}if(!d){return true;}}return false;};
c.prototype._resetLanesFromModel=function(){var n=this.getNodes();n.forEach(function(e){e._mergedLaneId=false;});var d=this.getLanes();d.forEach(function(e){e._mergedLanePosition=false;});this._internalLanes=[];if(this._isHeaderMode()){var o=this.getBindingInfo("lanes");if(o&&o.model){this.getModel(o.model).refresh();}}else{var N=this.getBindingInfo("nodes");if(N&&N.model){this.getModel(N.model).refresh();}}};
c.prototype._addFirstAndLastColumn=function(d){if(!d||d.length<=0){return[];}var o=d.length;for(var i=0;i<o;i++){d[i].unshift(null);d[i].push(null);}return d;};
c.prototype._calculateMatrix=function(n){var I,e,d,r,m;if(!n||(n.length===0)){return[];}I=new c.InternalMatrixCalculation(this);I.checkInputNodeConsistency(n);e=I._retrieveInfoFromInputArray(n);I._resetPositions();d=e.highestLanePosition+1;r=Math.max(Object.keys(n).length,2);m=I._createMatrix(r,d);for(var i=0;i<e.rootElements.length;i++){I.iPositionY=e.rootElements[i].lane;m=I.processCurrentElement(e.rootElements[i],n,m);}if(this._isLayoutOptimized){I._optimizeMatrix(m,n);}m=I._doubleColumnsInMatrix(m);m=I._calculatePathInMatrix(m);m=I._removeEmptyLines(m);return m;};
c.NodeElement=function(i,d,n,e){this.nodeId=i;this.lane=d;this.state=n.getState();this.displayState=n._getDisplayState();this.isProcessed=false;if(Array.isArray(e)){this.aParent=e;}else{this.oParent=e;}this.oNode=n;};
c.NodeElement._initNodeElement=function(i,d,n,e){return new c.NodeElement(i,d,n,e);};
c.NodeElement.prototype={toString:function(){return this.nodeId;},containsChildren:function(e){if(!e){return false;}if(!(e instanceof c.NodeElement)){return false;}if(this.oNode.getChildren()&&e.oNode.getChildren()&&this.oNode.getChildren().length&&e.oNode.getChildren().length){for(var i=0;i<this.oNode.getChildren().length;i++){if(e.oNode.getChildren().indexOf(this.oNode.getChildren()[i])>=0){return true;}}}return false;}};
c.NodeElement._calculateLaneStatePieChart=function(d,e,f,p){if(!d||!e||!f){return;}var i;for(i=0;i<f.length;i++){p._bHighlightedMode=f[i].getHighlighted();if(p._bHighlightedMode){break;}}var g,n,N,h,k;for(i=0;i<e.length;i++){var o=e[i];var m=d[o.getLaneId()];if(!m){continue;}g=0;n=0;N=0;h=0;k=0;for(var j=0;j<m.length;j++){if(!p._bHighlightedMode||(m[j].oNode._getDisplayState()===l.ProcessFlowDisplayState.Highlighted||m[j].oNode._getDisplayState()===l.ProcessFlowDisplayState.HighlightedFocused||m[j].oNode._getDisplayState()===l.ProcessFlowDisplayState.SelectedHighlighted||m[j].oNode._getDisplayState()===l.ProcessFlowDisplayState.SelectedHighlightedFocused)){switch(m[j].oNode.getState()){case l.ProcessFlowNodeState.Positive:g++;break;case l.ProcessFlowNodeState.Negative:case l.ProcessFlowNodeState.PlannedNegative:n++;break;case l.ProcessFlowNodeState.Planned:h++;break;case l.ProcessFlowNodeState.Critical:k++;break;case l.ProcessFlowNodeState.Neutral:default:N++;}}}var s=[{state:l.ProcessFlowNodeState.Positive,value:g},{state:l.ProcessFlowNodeState.Negative,value:n},{state:l.ProcessFlowNodeState.Neutral,value:N},{state:l.ProcessFlowNodeState.Planned,value:h},{state:l.ProcessFlowNodeState.Critical,value:k}];o.setState(s);}};
c.NodeElement._updateLanesFromNodes=function(p,d){var r=c.NodeElement._createMapFromLanes(p,null,false);var e=r.positionMap;var f=r.idMap;var n={};var t=p.slice();var g;var T={};var h=0;var i;for(i=0;i<d.length;i++){n[d[i].getNodeId()]=d[i];}for(i=0;i<d.length;i++){var o=d[i];var k=o.getChildren()||[];var m=1;var N=null;var s=null;for(var j=0;j<k.length;j++){var u=c._getChildIdByElement(k[j]);var w=n[u];if(w){if(o.getLaneId()===w.getLaneId()){N=w.getLaneId()+m;s=f[N];if(!s){var x=f[o.getLaneId()];s=c.NodeElement._createNewProcessFlowElement(x,N,x.getPosition()+m);f[s.getLaneId()]=s;t.splice(s.getPosition(),0,s);}w._setMergedLaneId(s.getLaneId());}c.NodeElement._changeLaneOfChildren(o.getLaneId(),w,n);}}if(s){T={};g=false;for(var y in e){if(s.getLaneId()===e[y].getLaneId()){g=true;break;}if(parseInt(y,10)>=s.getPosition()){var z=e[y];T[z.getPosition()+m]=z;}}if(!g){for(var A in T){h=parseInt(A,10);T[h]._setMergedPosition(h);}T[s.getPosition()]=s;for(var v=0;v<s.getPosition();v++){T[v]=e[v];}e=T;}}}return{lanes:t,nodes:d};};
c.NodeElement._changeLaneOfChildren=function(d,e,n){var f=e.getChildren();if(f){for(var i=0;i<f.length;i++){var s=c._getChildIdByElement(f[i]);var o=n[s];if(o&&o.getLaneId()===d){o._setMergedLaneId(e.getLaneId());c.NodeElement._changeLaneOfChildren(d,o,n);}}}};
c.NodeElement._createNewProcessFlowElement=function(o,n,d){return new a({laneId:n,iconSrc:o.getIconSrc(),text:o.getText(),state:o.getState(),position:d,zoomLevel:o.getZoomLevel()});};
c.NodeElement._createMapFromLanes=function(p,t,d){var o,e={},f={},g=p?p.length:0,i=0;if(!g){return{};}else{while(i<g){o=p[i];if(o&&o.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowLaneHeader"){e[o.getPosition()]=o;f[o.getLaneId()]=o;if(t){o.attachPress(t);}o._setHeaderMode(d);}i++;}return{positionMap:e,idMap:f};}};
c.NodeElement._createNodeElementsFromProcessFlowNodes=function(p,d){var e={},f={},g={},n,N=p?p.length:0,s,o,h=d?d.length:0,k,m=[],r,t,u,v,i,j,I={};if(N===0){return{elementById:{},elementsByLane:{}};}if(h===0){throw["No lane definition although there is a node definition."];}i=0;while(i<h){o=d[i];k=o.getLaneId();r=o.getPosition();if(e[k]){throw["The lane with id: "+k+" is defined at least twice. (Lane error)"];}e[k]=r;if(m&&Array.prototype.indexOf.call(m,r)>-1){throw["The position "+r+" is defined at least twice. (Lane error)."];}else{m.push(r);}f[k]=[];i++;}i=0;while(i<N){n=p[i];if(n&&n.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){s=n.getNodeId();k=n.getLaneId();t=n.getChildren()||[];v=t.length;j=0;while(j<v){u=c._getChildIdByElement(t[j]);g[u]=g[u]||[];g[u].push(s);j++;}}i++;}i=0;while(i<N){n=p[i];if(n&&n.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){s=n.getNodeId();if(!s){throw["There is a node which has no node id defined. (Title="+n.getTitle()+") and array position: "+i];}k=n.getLaneId();r=e[k];if(q.type(r)!=="number"){throw["For the node "+s+" position (lane) is not defined."];}if(!I[s]){I[s]=c.NodeElement._initNodeElement(s,r,n,g[s]);f[k].push(I[s]);}else{throw["The node id "+s+" is used second time."];}}i++;}return{elementById:I,elementsByLane:f};};
c.InternalMatrixCalculation=function(){this.iPositionX=0;this.iPositionY=0;this.nodePositions={};this.mapChildToNode={};};
c.InternalMatrixCalculation.prototype._optimizeMatrix=function(m,e){var d;do{d=false;for(var f=0;f<m[0].length;f++){for(var g=0;g<m.length-1;g++){if(!m[g][f]){var n=false;for(var i=g+1;i<m.length;i++){if(m[i][f]){n=true;break;}}if(!n){break;}if(this._optimizeLane(m,g,f,e)){d=true;}}}}}while(d);};
c.InternalMatrixCalculation.prototype._optimizeLane=function(m,r,d,e){for(var i=r+1;i<m.length;i++){if(m[i][d]){var n=m[i][d];if(this._verifyOptimizeLane(m,r,i,d,e)){m[r][d]=n;this.nodePositions[n.nodeId].x=r;m[i][d]=null;return true;}else{return false;}}}return false;};
c.InternalMatrixCalculation.prototype._verifyOptimizeLane=function(m,r,d,e,n){var N=m[d][e].oNode;var i,j,f,s;if(N&&N.getChildren()){f=m[d][e].oNode.getChildren();for(i=0;i<f.length;i++){s=c._getChildIdByElement(f[i]);var g=n[s].lane;for(j=e+1;j<g;j++){if(m[r][j]){return false;}}}}var o=m[d][e].nodeId;var O=this.nodePositions[o];var p=m[d][e].aParent;if(p){for(i=0;i<p.length;i++){s=c._getChildIdByElement(p[i]);if(e-1!==n[s].lane){return false;}var h=this.nodePositions[s];if(h.x>=O.x){return false;}}}for(i=0;i<e;i++){for(j=0;j<m.length;j++){if(m[j][i]&&m[j][i].oNode){s=m[j][i].nodeId;var t=this.nodePositions[s];f=m[j][i].oNode.getChildren();if(f){for(var k=0;k<f.length;k++){var u=c._getChildIdByElement(f[k]);var v=this.nodePositions[u];if(n[u].lane>e&&!((t.x<r&&v.x<r)||((t.x>r&&v.x>r)))){return false;}}}}}}if(N._hasChildren()){for(i=0;i<r;i++){if(m[i][e]){f=m[i][e].oNode.getChildren();if(f){for(j=0;j<f.length;j++){s=c._getChildIdByElement(f[j]);var E=n[s];var w=this.nodePositions[s];if(E.lane>e&&w.x>=r&&!N._hasChildrenWithNodeId(s)){return false;}}}}}}return true;};
c.InternalMatrixCalculation.prototype._resetPositions=function(){this.iPositionX=0;this.iPositionY=0;delete this.nodePositions;delete this.mapChildToNode;this.nodePositions={};this.mapChildToNode={};};
c.InternalMatrixCalculation.prototype._createMatrix=function(d){d=parseInt(d,10);var e=new Array(d||0);var i=d;if(arguments.length>1){var f=Array.prototype.slice.call(arguments,1);while(i--){e[d-1-i]=this._createMatrix.apply(this,f);}}return e;};
c.InternalMatrixCalculation.prototype._retrieveInfoFromInputArray=function(e){var i=0,r=[],E;Object.keys(e).forEach(function(s){E=e[s];if(!E.oParent&&!E.aParent){r.push(E);}if(i<E.lane){i=E.lane;}});return{"highestLanePosition":i,"rootElements":r};};
c.InternalMatrixCalculation.prototype._doubleColumnsInMatrix=function(d){var m=0,i;for(i=0;i<d.length;i++){m=m>d[i].length?m:d[i].length;}var t=new Array(d.length||0);for(i=0;i<t.length;i++){t[i]=new Array(m*2-1);for(var j=0;j<m;j++){if(d[i][j]){t[i][2*j]=d[i][j];}}}return t;};
c.InternalMatrixCalculation.prototype._removeEmptyLines=function(o){var d=0,i,j;for(i=0;i<o.length;i++){for(j=0;j<o[i].length;j++){if(o[i][j]){d++;break;}}}var r=this._createMatrix(d,o[0].length);for(i=0;i<d;i++){for(j=0;j<o[i].length;j++){r[i][j]=null;if(o[i][j]){r[i][j]=o[i][j];}}}return r;};
c.InternalMatrixCalculation.prototype._sortBasedOnChildren=function(n,e){var E={},d,s=null,f,i,g,S=[],h,j,p;if(n){n.forEach(function(o){var m=c._getChildIdByElement(o);d=E[e[m].lane];if(!d){E[e[m].lane]=d=[];}d.push(e[m]);});}else{return[];}var k=function(m,o){i=(m.oNode.getChildren()||[]).length;g=(o.oNode.getChildren()||[]).length;return g-i;};f=[];for(s in E){f.push(s);E[s].sort(k);}f=f.sort(function(m,o){return o-m;});var A=function(o){if(p.containsChildren(o)){j.push(o);}};f.forEach(function(m){h=E[m];if(h.length>1){j=[];p=h.shift();while(p){if(j.indexOf(p)<0){j.push(p);}h.forEach(A);p=h.shift();}S=S.concat(j);}else{S=S.concat(h);}});return S;};
c.InternalMatrixCalculation.prototype._calculatePathInMatrix=function(o){var d=null;for(var k in this.nodePositions){if(this.nodePositions.hasOwnProperty(k)){d=this.nodePositions[k];var e=d.c.oNode.getChildren();for(var i=0;e&&i<e.length;i++){var s=c._getChildIdByElement(e[i]);var p=this.nodePositions[s];o=this._calculateSingleNodeConnection(d,p,d.x,d.y,p.x,p.y,o);}}}return o;};
c.InternalMatrixCalculation.prototype._calculateSingleNodeConnection=function(n,d,p,e,f,g,o){var h=g-e;var v=f-p;if(h<0){throw["Problem with negative horizontal movement","Parent node is "+n.c.toString(),"Children node is "+d.c.toString(),"Coordinates : '"+p+"','"+e+"','"+f+"','"+g+"'"];}else if(v<=-1){var N=this._checkIfHorizontalLinePossible(o,f,e+2,g);var i=g-1;if(N){i=e+1;}var j=p;if(N){j=f;}o[p][i]=this._createConnectionElement(o[p][i],c._cellEdgeConstants.LU,n,d,false);o=this._writeVerticalLine(o,p,f,i,n,d);o[f][i]=this._createConnectionElement(o[f][i],c._cellEdgeConstants.UR,n,d,(i===g-1));var s=e+2;var E=g;if(!N){s=e+1;E=i+1;}o=this._writeHorizontalLine(o,j,s,E,n,d);}else if(v===0){o=this._writeHorizontalLine(o,p,e+1,g,n,d);}else if(v===1){o[p][e+1]=this._createConnectionElement(o[p][e+1],c._cellEdgeConstants.LD,n,d,false);o[f][e+1]=this._createConnectionElement(o[f][e+1],c._cellEdgeConstants.DR,n,d,(e+1)===(g-1));o=this._writeHorizontalLine(o,f,e+2,g,n,d);}else{o[p][e+1]=this._createConnectionElement(o[p][e+1],c._cellEdgeConstants.LD,n,d,false);o=this._writeVerticalLine(o,f,p,e+1,n,d);o[f][e+1]=this._createConnectionElement(o[f][e+1],c._cellEdgeConstants.DR,n,d,(e+1)===(g-1));o=this._writeHorizontalLine(o,f,e+2,g,n,d);}return o;};
c.InternalMatrixCalculation.prototype._writeVerticalLine=function(o,f,d,e,n,g){for(var j=f-1;j>d;j--){o[j][e]=this._createConnectionElement(o[j][e],c._cellEdgeConstants.DU,n,g,false);}return o;};
c.InternalMatrixCalculation.prototype._checkIfHorizontalLinePossible=function(o,r,f,d){var e=true;for(var i=f;i<d;i++){if(o[r][i]instanceof c.NodeElement){e=false;break;}}return e;};
c.InternalMatrixCalculation.prototype._writeHorizontalLine=function(o,r,f,d,n,e){var p=(r===e.x);if(!p){d--;}for(var i=f;i<d;i++){o[r][i]=this._createConnectionElement(o[r][i],c._cellEdgeConstants.LR,n,e,(i===(d-1))&&p);}return o;};
c.InternalMatrixCalculation.prototype._createConnectionElement=function(o,f,s,t,h){var n=o;if(!n){n=new P();}if(n.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){var d=this._calculateConnectionDisplayStateBySourceAndTargetNode(s.c.oNode,t.c.oNode);var e={flowLine:f,targetNodeState:t.c.state,displayState:d,hasArrow:h};n.addConnectionData(e);}return n;};
c.InternalMatrixCalculation.prototype._calculateConnectionDisplayStateBySourceAndTargetNode=function(s,t){var S=s.getHighlighted();var d=s.getSelected();var e=s._getDimmed();var T=t.getHighlighted();var f=t.getSelected();var g=t._getDimmed();var o=l.ProcessFlowDisplayState.Regular;if(d&&f){o=l.ProcessFlowDisplayState.Selected;}else if(S&&T){o=l.ProcessFlowDisplayState.Highlighted;}else if((e||g)||S&&f||d&&T){o=l.ProcessFlowDisplayState.Dimmed;}return o;};
c.prototype.addNode=function(n){return this.addAggregation("nodes",n,false);};
c.prototype._switchCursors=function($,d,e){if($.hasClass(d)){$.removeClass(d);}if(!$.hasClass(e)){$.addClass(e);}};
c.prototype._clearHandlers=function($){$.bind(this._mousePreventEvents,q.proxy(this._handlePrevent,this));};
c.prototype._initZoomLevel=function(){if(this.$()){var w=this.$().width();if(w){if(w<M.ScreenSizes.tablet){this.setZoomLevel(l.ProcessFlowZoomLevel.Four);}else if(w<M.ScreenSizes.desktop){this.setZoomLevel(l.ProcessFlowZoomLevel.Three);}else{this.setZoomLevel(l.ProcessFlowZoomLevel.Two);}}}};
c.prototype._registerMouseWheel=function(e){var d=e.originalEvent.wheelDelta||-e.originalEvent.detail;if(d===0){d=-e.originalEvent.deltaY;}if(e&&!e.isDefaultPrevented()){e.preventDefault();e.originalEvent.returnValue=false;}var w=300;var f=function(){var i=new Date()-this._wheelTimestamp;if(i<w){this._wheelTimeout=setTimeout(function(){var m=f.bind(this);if(typeof m==="string"||m instanceof String){m=this[m];}m.apply(this,[]);}.bind(this),w-i);}else{this._wheelTimeout=null;this._wheelCalled=false;}};if(!this._wheelCalled){this._wheelCalled=true;if(d<0){this._isFocusChanged=true;this.zoomOut();}else{this._isFocusChanged=true;this.zoomIn();}}if(!this._wheelTimeout){this._wheelTimestamp=new Date();this._wheelTimeout=setTimeout(function(){var m=f.bind(this);if(typeof m==="string"||m instanceof String){m=this[m];}m.apply(this,[]);}.bind(this),w);}if(e&&!e.isPropagationStopped()){e.stopPropagation();}if(e&&!e.isImmediatePropagationStopped()){e.stopImmediatePropagation();}};
c.prototype._setFocusToNode=function(n){if(n){if(n.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){q(document.getElementById(n.sId)).parent().focus();n._setNavigationFocus(true);n.rerender();}else if(n.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnectionLabel"){n.$().focus();n._setNavigationFocus(true);}}else if(this._lastNavigationFocusElement){if(this._lastNavigationFocusElement.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){q(document.getElementById(this._lastNavigationFocusElement.sId)).parent().focus();this._lastNavigationFocusElement._setNavigationFocus(true);this._lastNavigationFocusElement.rerender();}else if(this._lastNavigationFocusElement.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnectionLabel"){this._lastNavigationFocusElement.$().focus();this._lastNavigationFocusElement._setNavigationFocus(true);}}};
c.prototype._changeNavigationFocus=function(n,d){if(n&&d&&(n.getId()!==d.getId())){L.debug("Rerendering PREVIOUS node with id '"+n.getId()+"' navigation focus : "+n._getNavigationFocus());n._setNavigationFocus(false);if(n.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){n.rerender();}}if(d){L.debug("Rerendering CURRENT node with id '"+d.getId()+"' navigation focus : "+d._getNavigationFocus());d._setNavigationFocus(true);if(d.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){d.rerender();}this._lastNavigationFocusElement=d;this._onFocusChanged();}};
c.prototype._moveOnePage=function(d,e){d=d||c._enumMoveDirection.UP;e=e||false;var p=0,f=0;var g=0,h=0;var n=0;var N=false,i,j,o;for(i=0;i<this._internalCalcMatrix.length;i++){for(j=0;j<this._internalCalcMatrix[i].length;j++){if(this._internalCalcMatrix[i][j]&&this._internalCalcMatrix[i][j].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"&&this._internalCalcMatrix[i][j]._getNavigationFocus()){p=i;f=j;break;}else if(this._internalCalcMatrix[i][j]&&this._internalCalcMatrix[i][j].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){o=this._internalCalcMatrix[i][j]._getVisibleLabel();if(o&&o._getNavigationFocus()){p=i;f=j;break;}}}}if(e){if(d===c._enumMoveDirection.UP){for(j=f-1;j>=0&&n<this._jumpOverElements;j--){if(this._internalCalcMatrix[p][j]&&this._internalCalcMatrix[p][j].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"&&(!this._bHighlightedMode||this._internalCalcMatrix[p][j].getHighlighted())){n++;g=p;h=j;N=true;}else if(this._internalCalcMatrix[p][j]&&this._internalCalcMatrix[p][j].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){o=this._internalCalcMatrix[p][j]._getVisibleLabel();if(this._labelCanGetFocus(o)){n++;g=p;h=j;N=true;}}}}else if(d===c._enumMoveDirection.DOWN){for(j=f+1;j<this._internalCalcMatrix[p].length&&n<this._jumpOverElements;j++){if(this._internalCalcMatrix[p][j]&&this._internalCalcMatrix[p][j].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"&&(!this._bHighlightedMode||this._internalCalcMatrix[p][j].getHighlighted())){n++;g=p;h=j;N=true;}else if(this._internalCalcMatrix[p][j]&&this._internalCalcMatrix[p][j].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){o=this._internalCalcMatrix[p][j]._getVisibleLabel();if(this._labelCanGetFocus(o)){n++;g=p;h=j;N=true;}}}}}else if(d===c._enumMoveDirection.UP){for(i=p-1;i>=0&&n<this._jumpOverElements;i--){if(this._internalCalcMatrix[i][f]&&this._internalCalcMatrix[i][f].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"&&(!this._bHighlightedMode||this._internalCalcMatrix[i][f].getHighlighted())){n++;g=i;h=f;N=true;}else if(this._internalCalcMatrix[i][f]&&this._internalCalcMatrix[i][f].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){o=this._internalCalcMatrix[i][f]._getVisibleLabel();if(this._labelCanGetFocus(o)){n++;g=i;h=f;N=true;}}}}else if(d===c._enumMoveDirection.DOWN){for(i=p+1;i<this._internalCalcMatrix.length&&n<this._jumpOverElements;i++){if(this._internalCalcMatrix[i][f]&&this._internalCalcMatrix[i][f].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"&&(!this._bHighlightedMode||this._internalCalcMatrix[i][f].getHighlighted())){n++;g=i;h=f;N=true;}else if(this._internalCalcMatrix[i][f]&&this._internalCalcMatrix[i][f].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){o=this._internalCalcMatrix[i][f]._getVisibleLabel();if(this._labelCanGetFocus(o)){n++;g=i;h=f;N=true;}}}}if(N){if(this._internalCalcMatrix[p][f]&&this._internalCalcMatrix[p][f].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){this._internalCalcMatrix[p][f]._getVisibleLabel()._setNavigationFocus(false);}else{this._internalCalcMatrix[p][f]._setNavigationFocus(false);}if(this._internalCalcMatrix[g][h]&&this._internalCalcMatrix[g][h].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){o=this._internalCalcMatrix[g][h]._getVisibleLabel();o._setNavigationFocus(true);this._lastNavigationFocusElement=o;}else{this._internalCalcMatrix[g][h]._setNavigationFocus(true);this._lastNavigationFocusElement=this._internalCalcMatrix[g][h];}}return N;};
c.prototype._moveHomeEnd=function(d,e){d=d||c._enumMoveDirection.RIGHT;e=e||false;var p=0,f=0;var g=0,h=0;var n=false,i,j,o;for(i=0;i<this._internalCalcMatrix.length;i++){for(j=0;j<this._internalCalcMatrix[i].length;j++){if(this._internalCalcMatrix[i][j]&&this._internalCalcMatrix[i][j].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"&&this._internalCalcMatrix[i][j]._getNavigationFocus()){p=i;f=j;break;}else if(this._internalCalcMatrix[i][j]&&this._internalCalcMatrix[i][j].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){o=this._internalCalcMatrix[i][j]._getVisibleLabel();if(o&&o._getNavigationFocus()){p=i;f=j;break;}}}}if(e){if(d===c._enumMoveDirection.LEFT){for(i=0;i<p;i++){if(this._internalCalcMatrix[i][f]&&this._internalCalcMatrix[i][f].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"&&(!this._bHighlightedMode||this._internalCalcMatrix[i][f].getHighlighted())){g=i;h=f;n=true;break;}else if(this._internalCalcMatrix[i][f]&&this._internalCalcMatrix[i][f].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){o=this._internalCalcMatrix[i][f]._getVisibleLabel();if(this._labelCanGetFocus(o)){g=i;h=f;n=true;break;}}}}else if(d===c._enumMoveDirection.RIGHT){for(i=this._internalCalcMatrix.length-1;i>p;i--){if(this._internalCalcMatrix[i][f]&&this._internalCalcMatrix[i][f].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"&&(!this._bHighlightedMode||this._internalCalcMatrix[i][f].getHighlighted())){g=i;h=f;n=true;break;}else if(this._internalCalcMatrix[i][f]&&this._internalCalcMatrix[i][f].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){o=this._internalCalcMatrix[i][f]._getVisibleLabel();if(this._labelCanGetFocus(o)){g=i;h=f;n=true;break;}}}}}else if(d===c._enumMoveDirection.LEFT){for(j=0;j<f;j++){if(this._internalCalcMatrix[p][j]&&this._internalCalcMatrix[p][j].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"&&(!this._bHighlightedMode||this._internalCalcMatrix[p][j].getHighlighted())){g=p;h=j;n=true;break;}else if(this._internalCalcMatrix[p][j]&&this._internalCalcMatrix[p][j].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){o=this._internalCalcMatrix[p][j]._getVisibleLabel();if(this._labelCanGetFocus(o)){g=p;h=j;n=true;break;}}}}else if(d===c._enumMoveDirection.RIGHT){for(j=this._internalCalcMatrix[p].length-1;j>f;j--){if(this._internalCalcMatrix[p][j]&&this._internalCalcMatrix[p][j].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"&&(!this._bHighlightedMode||this._internalCalcMatrix[p][j].getHighlighted())){g=p;h=j;n=true;break;}else if(this._internalCalcMatrix[p][j]&&this._internalCalcMatrix[p][j].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){o=this._internalCalcMatrix[p][j]._getVisibleLabel();if(this._labelCanGetFocus(o)){g=p;h=j;n=true;break;}}}}if(n){if(this._internalCalcMatrix[p][f]&&this._internalCalcMatrix[p][f].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){this._internalCalcMatrix[p][f]._getVisibleLabel()._setNavigationFocus(false);}else{this._internalCalcMatrix[p][f]._setNavigationFocus(false);}if(this._internalCalcMatrix[g][h]&&this._internalCalcMatrix[g][h].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){o=this._internalCalcMatrix[g][h]._getVisibleLabel();o._setNavigationFocus(true);this._lastNavigationFocusElement=o;}else{this._internalCalcMatrix[g][h]._setNavigationFocus(true);this._lastNavigationFocusElement=this._internalCalcMatrix[g][h];}}return n;};
c.prototype._moveToNextElement=function(d,s){d=d||c._enumMoveDirection.RIGHT;if(sap.ui.getCore().getConfiguration().getRTL()){if(d===c._enumMoveDirection.RIGHT){d=c._enumMoveDirection.LEFT;}else if(d===c._enumMoveDirection.LEFT){d=c._enumMoveDirection.RIGHT;}}s=s||1;var f=false;var n=false;var p=0,e=1,i,j,o;if(!this._internalCalcMatrix){return false;}var g=0,h=0;for(i=0;i<this._internalCalcMatrix.length;i++){for(j=0;j<this._internalCalcMatrix[i].length;j++){if(this._internalCalcMatrix[i][j]){if(this._internalCalcMatrix[i][j]&&this._internalCalcMatrix[i][j].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"&&this._internalCalcMatrix[i][j]._getNavigationFocus()){p=g=i;e=h=j;f=true;break;}else if(this._internalCalcMatrix[i][j]&&this._internalCalcMatrix[i][j].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){o=this._internalCalcMatrix[i][j]._getVisibleLabel();if(o&&o._getNavigationFocus()&&o.getEnabled()){p=g=i;e=h=j;f=true;break;}}}}if(f){break;}}if(d===c._enumMoveDirection.RIGHT){for(i=g;i<this._internalCalcMatrix.length;i++){for(j=h+1;j<this._internalCalcMatrix[i].length;j++){if(this._internalCalcMatrix[i][j]&&this._internalCalcMatrix[i][j].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){if(f&&(!this._bHighlightedMode||this._internalCalcMatrix[i][j].getHighlighted())){this._internalCalcMatrix[i][j]._setNavigationFocus(true);this._lastNavigationFocusElement=this._internalCalcMatrix[i][j];n=true;break;}}else if(this._internalCalcMatrix[i][j]&&this._internalCalcMatrix[i][j].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){o=this._internalCalcMatrix[i][j]._getVisibleLabel();if(f&&this._labelCanGetFocus(o)){o._setNavigationFocus(true);this._lastNavigationFocusElement=o;n=true;break;}}}h=0;if(n){break;}}}if(d===c._enumMoveDirection.LEFT){for(i=g;i>=0;i--){for(j=h-1;j>=0;j--){if(this._internalCalcMatrix[i][j]&&this._internalCalcMatrix[i][j].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){if(f&&(!this._bHighlightedMode||this._internalCalcMatrix[i][j].getHighlighted())){this._lastNavigationFocusElement=this._internalCalcMatrix[i][j]._setNavigationFocus(true);this._lastNavigationFocusElement=this._internalCalcMatrix[i][j];n=true;break;}}else if(this._internalCalcMatrix[i][j]&&this._internalCalcMatrix[i][j].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){o=this._internalCalcMatrix[i][j]._getVisibleLabel();if(f&&this._labelCanGetFocus(o)){o._setNavigationFocus(true);this._lastNavigationFocusElement=o;n=true;break;}}}if(i>0){h=this._internalCalcMatrix[i-1].length;}if(n){break;}}}var k,m,r;if(d===c._enumMoveDirection.UP){for(i=g-1;i>=0;i--){k=0;while(!n){m=h-k;r=h+k;if(m>=0&&this._internalCalcMatrix[i][m]&&this._internalCalcMatrix[i][m].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){if(f&&(!this._bHighlightedMode||this._internalCalcMatrix[i][m].getHighlighted())){this._internalCalcMatrix[i][m]._setNavigationFocus(true);this._lastNavigationFocusElement=this._internalCalcMatrix[i][m];n=true;break;}}else if(m>=0&&this._internalCalcMatrix[i][m]&&this._internalCalcMatrix[i][m].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){o=this._internalCalcMatrix[i][m]._getVisibleLabel();if(f&&this._labelCanGetFocus(o)){o._setNavigationFocus(true);this._lastNavigationFocusElement=o;n=true;break;}}if(r<this._internalCalcMatrix[i].length&&this._internalCalcMatrix[i][r]&&this._internalCalcMatrix[i][r].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){if(f&&(!this._bHighlightedMode||this._internalCalcMatrix[i][r].getHighlighted())){this._internalCalcMatrix[i][r]._setNavigationFocus(true);this._lastNavigationFocusElement=this._internalCalcMatrix[i][r];n=true;break;}}else if(r>=0&&this._internalCalcMatrix[i][r]&&this._internalCalcMatrix[i][r].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){o=this._internalCalcMatrix[i][r]._getVisibleLabel();if(f&&this._labelCanGetFocus(o)){o._setNavigationFocus(true);this._lastNavigationFocusElement=o;n=true;break;}}if(m<0&&r>this._internalCalcMatrix[i].length){break;}k++;}}}if(d===c._enumMoveDirection.DOWN){for(i=g+1;i<this._internalCalcMatrix.length;i++){k=0;while(!n){m=h-k;r=h+k;if(m>=0&&this._internalCalcMatrix[i][m]&&this._internalCalcMatrix[i][m].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){if(f&&(!this._bHighlightedMode||this._internalCalcMatrix[i][m].getHighlighted())){this._lastNavigationFocusElement=this._internalCalcMatrix[i][m]._setNavigationFocus(true);this._lastNavigationFocusElement=this._internalCalcMatrix[i][m];n=true;break;}}else if(m>=0&&this._internalCalcMatrix[i][m]&&this._internalCalcMatrix[i][m].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){o=this._internalCalcMatrix[i][m]._getVisibleLabel();if(f&&this._labelCanGetFocus(o)){o._setNavigationFocus(true);this._lastNavigationFocusElement=o;n=true;break;}}if(r<this._internalCalcMatrix[i].length&&this._internalCalcMatrix[i][r]&&this._internalCalcMatrix[i][r].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){if(f&&(!this._bHighlightedMode||this._internalCalcMatrix[i][r].getHighlighted())){this._lastNavigationFocusElement=this._internalCalcMatrix[i][r]._setNavigationFocus(true);this._lastNavigationFocusElement=this._internalCalcMatrix[i][r];n=true;break;}}else if(r>=0&&this._internalCalcMatrix[i][r]&&this._internalCalcMatrix[i][r].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){o=this._internalCalcMatrix[i][r]._getVisibleLabel();if(f&&this._labelCanGetFocus(o)){o._setNavigationFocus(true);this._lastNavigationFocusElement=o;n=true;break;}}if(m<0&&r>this._internalCalcMatrix[i].length){break;}k++;}}}if(n){if(this._internalCalcMatrix[p][e]&&this._internalCalcMatrix[p][e].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){this._internalCalcMatrix[p][e]._setNavigationFocus(false);}else{this._internalCalcMatrix[p][e]._getVisibleLabel()._setNavigationFocus(false);}}return n;};
c.prototype._getScrollContainerOnZoomChanged=function(s,$){s.scrollLeft=Math.round($.get()[0].scrollWidth/s.scrollWidth*s.scrollLeft);s.scrollTop=Math.round($.get()[0].scrollHeight/s.scrollHeight*s.scrollTop);s.scrollWidth=$.get()[0].scrollWidth;s.scrollHeight=$.get()[0].scrollHeight;return s;};
c.prototype._mergeLaneIdNodeStates=function(d){var p=0;var n=0;var N=0;var i=0;var e=0;for(var s=0;s<5;s++){for(var f=0;f<d.length;f++){switch(d[f][s].state){case l.ProcessFlowNodeState.Positive:p=p+d[f][s].value;break;case l.ProcessFlowNodeState.Negative:n=n+d[f][s].value;break;case l.ProcessFlowNodeState.Neutral:N=N+d[f][s].value;break;case l.ProcessFlowNodeState.Planned:i=i+d[f][s].value;break;case l.ProcessFlowNodeState.PlannedNegative:n=n+d[f][s].value;break;case l.ProcessFlowNodeState.Critical:e=e+d[f][s].value;break;default:break;}}}return[{state:l.ProcessFlowNodeState.Positive,value:p},{state:l.ProcessFlowNodeState.Negative,value:n},{state:l.ProcessFlowNodeState.Neutral,value:N},{state:l.ProcessFlowNodeState.Planned,value:i},{state:l.ProcessFlowNodeState.Critical,value:e}];};
c.prototype._setFocusOnHeader=function(n){var t=this.$("thead");if(n){t.focus();t.addClass("sapSuiteUiCommonsPFHeaderFocused");this._headerHasFocus=true;}else{t.removeClass("sapSuiteUiCommonsPFHeaderFocused");this._headerHasFocus=false;}};
c.prototype._scroll=function(d,e){var o=this._getScrollContainer().get(0);var s=o.scrollLeft;if(!D.browser.msie&&!D.browser.edge&&this._bRtl){d=-d;}var S=s+d;q(o).stop(true,true).animate({scrollLeft:S},e,q.proxy(this._adjustAndShowArrow,this));};
c.prototype._adjustAndShowArrow=function(){this._checkOverflow(this._getScrollContainer().get(0),this.$());if(this.getScrollable()){this._moveArrowAndCounterVertical();}if(this._isFocusChanged){this._setFocusToNode(this._lastNavigationFocusElement);this._isFocusChanged=false;}};
c.prototype._getScrollingArrow=function(d){var s;if(D.system.desktop){s="sap-icon://navigation-"+d+"-arrow";}else{s="sap-icon://slim-arrow-"+d;}var p={src:s};var e="sapPFHArrowScrollLeft";var r="sapPFHArrowScrollRight";var f=["sapPFHArrowScroll",e];var g=["sapPFHArrowScroll",r];if(d===c._constants.left){if(!this._oArrowLeft){this._oArrowLeft=M.ImageHelper.getImageControl(this.getId()+c._constants.arrowScrollLeftMinus,null,this,p,f);}return this._oArrowLeft;}if(d===c._constants.right){if(!this._oArrowRight){this._oArrowRight=M.ImageHelper.getImageControl(this.getId()+c._constants.arrowScrollRightMinus,null,this,p,g);}return this._oArrowRight;}};
c.prototype._checkScrolling=function(s,$){var S=false;if(s){if(s.scrollWidth>s.clientWidth){S=true;}}if(this._arrowScrollable!==S){$.toggleClass("sapPFHScrollable",S);$.toggleClass("sapPFHNotScrollable",!S);this._arrowScrollable=S;}return S;};
c.prototype._updateLeftCounter=function(){var s;if(!this._bRtl){s=this._getScrollContainer().scrollLeft();}else{s=this._getScrollContainer().scrollRightRTL();}var i=Math.round(s/this._scrollStep);this.$(c._constants.counterLeft).text(i.toString());return i;};
c.prototype._updateRightCounter=function(s,d){var S;var i;if(!this._bRtl){S=this._getScrollContainer().scrollLeft();i=Math.round((d-S-s)/this._scrollStep);}else{S=this._getScrollContainer().scrollLeftRTL();i=Math.round(S/this._scrollStep);}this.$(c._constants.counterRight).text(i.toString());return i;};
c.prototype._moveArrowAndCounterVertical=function(){var s=this._getScrollContainer().scrollTop();if(s>0){var A=this._iInitialArrowTop-s;var i=this._iInitialCounterTop-s;var d=this._iInitialCounterTop-this._iInitialArrowTop;if(A>0){this.$(c._constants.arrowScrollRight).css(c._constants.top,A+c._constants.px);this.$(c._constants.arrowScrollLeft).css(c._constants.top,A+c._constants.px);}else{this.$(c._constants.arrowScrollRight).css(c._constants.top,"0px");this.$(c._constants.arrowScrollLeft).css(c._constants.top,"0px");}if(i>d){this.$(c._constants.counterRight).css(c._constants.top,i+c._constants.px);this.$(c._constants.counterLeft).css(c._constants.top,i+c._constants.px);}else{this.$(c._constants.counterRight).css(c._constants.top,d+c._constants.px);this.$(c._constants.counterLeft).css(c._constants.top,d+c._constants.px);}}else{this.$(c._constants.arrowScrollRight).css(c._constants.top,this._iInitialArrowTop+c._constants.px);this.$(c._constants.arrowScrollLeft).css(c._constants.top,this._iInitialArrowTop+c._constants.px);this.$(c._constants.counterRight).css(c._constants.top,this._iInitialCounterTop+c._constants.px);this.$(c._constants.counterLeft).css(c._constants.top,this._iInitialCounterTop+c._constants.px);}};
c.prototype._checkOverflow=function(s,$){if(this._checkScrolling(s,$)&&s){this._setScrollWidth();var S=false;var d=false;var o=20;var i=this._getScrollContainer().scrollLeft();var e=s.scrollWidth;var f=s.clientWidth;if(Math.abs(e-f)===1){e=f;}if(!this._bRtl){if(i>o){S=true;}if((e>f)&&(i+f+o<e)){d=true;}}else{var g=q(s);if(g.scrollLeftRTL()>o){d=true;}if(g.scrollRightRTL()>o){S=true;}}this._updateLeftCounter();this._updateRightCounter(f,e);if(d!==this._bPreviousScrollForward||(S!==this._bPreviousScrollBack)){this._bPreviousScrollForward=d;this._bPreviousScrollBack=S;$.toggleClass("sapPFHScrollBack",S);$.toggleClass("sapPFHNoScrollBack",!S);$.toggleClass("sapPFHScrollForward",d);$.toggleClass("sapPFHNoScrollForward",!d);}}else{this._bPreviousScrollForward=false;this._bPreviousScrollBack=false;}};
c.prototype._setParentForNodes=function(d){var I=d?d.length:0;var e;var i,j;for(var o in d){d[o].removeAllAssociation(c._constants.parents,true);}for(i=0;i<I;i++){e=d[i].getChildren();if(e){for(j=0;j<e.length;j++){var f=this._getNode(c._getChildIdByElement(e[j]),d);if(f){f.addAssociation(c._constants.parents,d[i],true);}}}}};
c.prototype._getConnectionsMap=function(){var d=[];var n=this.getNodes();for(var i=0;i<n.length;i++){var p=this._getPositionOfNodeInMatrix(this._internalCalcMatrix,n[i]);var e=n[i].getChildren();if(e){for(var j=0;j<e.length;j++){var o={};o.sourceNode=n[i];var f=c._getChildIdByElement(e[j]);var g=this._getNode(f,n);if(g){if(typeof e[j]==="object"){o.label=e[j].connectionLabel;}o.targetNode=g;var h=this._getPositionOfNodeInMatrix(this._internalCalcMatrix,o.targetNode);o.connectionParts=this._calculateConnectionParts(p,h);d.push(o);}}}}this._internalConnectionMap=d;return d;};
c.prototype._getPositionOfNodeInMatrix=function(m,n){var p={};for(var i=0;i<m.length;i++){var d=m[i];for(var j=0;j<d.length;j++){var e=d[j];if(e&&e.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"&&e.getNodeId()===n.getNodeId()){p.y=i;p.x=j;return p;}}}return p;};
c.prototype._calculateConnectionParts=function(p,d){var e=[];var s=p.y;var S=p.x;S++;e.push({x:S,y:s});if(d.y>=p.y){while(s<d.y){s++;e.push({x:S,y:s});}}else{while(s>d.y){s--;e.push({x:S,y:s});}}while(S<d.x-1){S++;e.push({x:S,y:s});}return e;};
c.prototype._getConnectionMapEntries=function(d){var f=[];var o=null;var e=null;if(this._internalConnectionMap){for(var i=0;i<this._internalConnectionMap.length;i++){e=this._internalConnectionMap[i];if(e.label&&e.label.getId()===d.getId()){o=e;break;}}e=null;for(var j=0;j<this._internalConnectionMap.length;j++){e=this._internalConnectionMap[j];if(e.targetNode&&e.targetNode.getNodeId()===o.targetNode.getNodeId()){f.push(e);}}}return f;};
c.prototype._createLabelPressEventArgs=function(d,e){var E={};var f=[];if(e){for(var i=0;i<e.length;i++){var o={sourceNode:e[i].sourceNode,targetNode:e[i].targetNode,label:e[i].label};f.push(o);}}E.selectedLabel=d;E.connections=f;return E;};
c.prototype.applyNodeDisplayState=function(){var I=this.getNodes(),n=I?I.length:0,i=0;if(n!==0){while(i<n){I[i]._setRegularState();i++;}i=0;while((i<n)&&!I[i].getHighlighted()&&!I[i].getSelected()){i++;}if(i<n){i=0;while(i<n){if(!I[i].getHighlighted()&&!I[i].getSelected()){I[i]._setDimmedState();}i++;}}}};
c.InternalMatrixCalculation.prototype.checkInputNodeConsistency=function(e){var E=[],j,s,i,d,o,f=0;Object.keys(e).forEach(function(g){o=e[g];d=o.oNode.getChildren();i=d?d.length:0;if(o.oNode.getFocused()){f++;}j=0;while(j<i){s=c._getChildIdByElement(d[j]);if(!e[s]){E.push("Node identificator "+s+" used in children definition is not presented as the node itself. Element : "+o.nodeId);}j++;}});if(E.length>0){throw E;}return f>1;};
c.InternalMatrixCalculation.prototype.processCurrentElement=function(d,e,m){var E,f,n=true,g=true;if(d.isProcessed){return m;}this.nodePositions[d.nodeId]={"c":d,"x":this.iPositionX,"y":this.iPositionY*2};m[this.iPositionX][this.iPositionY++]=d;E=d.oNode.getChildren();d.isProcessed=true;f=this._sortBasedOnChildren(E,e);if(f){f.forEach(function(o){if(!o.isProcessed){g=false;while(this.iPositionY<o.lane){m[this.iPositionX][this.iPositionY++]=null;}m=this.processCurrentElement(o,e,m);}else if(n&&g){this.iPositionX++;n=false;}}.bind(this));}if(!E||g){if(n){this.iPositionX++;}this.iPositionY=0;}return m;};
c.prototype.getZoomLevel=function(){return this._zoomLevel;};
c.prototype.setZoomLevel=function(z){if(!this._getScrollContainer()){return;}var $=this._getScrollContainer();var s=null;var S;if($.get().length){s={scrollWidth:$.get()[0].scrollWidth,scrollHeight:$.get()[0].scrollHeight,scrollLeft:$.get()[0].scrollLeft,scrollTop:$.get()[0].scrollTop};S=s;if(this._zoomLevel===z){this._isInitialZoomLevelNeeded=false;return;}}if(!(z in l.ProcessFlowZoomLevel)){this._handleException("\""+z+"\" is not a valid entry of the enumeration for property zoom level of ProcessFlow");return;}this._zoomLevel=z;if(this._isInitialZoomLevelNeeded){this._isInitialZoomLevelNeeded=false;this.invalidate();}else{this.rerender();}if(s){if(D.support.touch){var h=parseInt(this._getScrollContainer().css("height").slice(0,-2),10);var w=parseInt(this._getScrollContainer().css("width").slice(0,-2),10);var i=this._getScrollContainer()[0].scrollHeight;var d=this._getScrollContainer()[0].scrollWidth;if(this.getScrollable()&&(i>h||d>w)){this._switchCursors(this._getScrollContainer(),this._defaultCursorClass,this._grabCursorClass);this._getScrollContainer().css("overflow","auto");}}$=this._getScrollContainer();S=this._getScrollContainerOnZoomChanged(s,$);$.scrollLeft(S.scrollLeft);$.scrollTop(S.scrollTop);this._adjustAndShowArrow();if(this._isFocusChanged){this._setFocusToNode();this._isFocusChanged=false;}}};
c.prototype.zoomOut=function(){var s=this.getZoomLevel();var n=s;switch(s){case(l.ProcessFlowZoomLevel.One):n=l.ProcessFlowZoomLevel.Two;break;case(l.ProcessFlowZoomLevel.Two):n=l.ProcessFlowZoomLevel.Three;break;case(l.ProcessFlowZoomLevel.Three):n=l.ProcessFlowZoomLevel.Four;break;default:break;}this.setZoomLevel(n);return this.getZoomLevel();};
c.prototype.zoomIn=function(){var s=this.getZoomLevel();var n=s;switch(s){case(l.ProcessFlowZoomLevel.Four):n=l.ProcessFlowZoomLevel.Three;break;case(l.ProcessFlowZoomLevel.Three):n=l.ProcessFlowZoomLevel.Two;break;case(l.ProcessFlowZoomLevel.Two):n=l.ProcessFlowZoomLevel.One;break;default:break;}this.setZoomLevel(n);return this.getZoomLevel();};
c.prototype.updateModel=function(){this._lastNavigationFocusElement=null;var n=this.getNodes();n.forEach(function(e){e._mergedLaneId=false;});var d=this.getLanes();d.forEach(function(e){e._mergedLanePosition=false;});this._internalLanes=[];if(this._isHeaderMode()){var o=this.getBindingInfo("lanes");this.getModel(o.model).refresh();}else{var N=this.getBindingInfo("nodes");this.getModel(N.model).refresh();}this.rerender();};
c.prototype.optimizeLayout=function(i){if(i===undefined){i=true;}if(this._isLayoutOptimized!==i){this._isLayoutOptimized=i;this.updateModel();}return this;};
c.prototype.getFocusedNode=function(){return this._lastNavigationFocusElement&&this._lastNavigationFocusElement.sId;};
c.prototype.updateNodesOnly=function(){var n=this.getBindingInfo("nodes");this.getModel(n.model).refresh();this.rerender();};
c.prototype.setSelectedPath=function(s,t){var n=this.getNodes(),i;if(n){if(s&&t){var d=0;for(i=0;i<n.length;i++){if(n[i].getNodeId()===s||n[i].getNodeId()===t){n[i].setSelected(true);d++;}else{n[i].setSelected(false);}}if(d===2){this.rerender();}}else if(!s&&!t){for(i=0;i<n.length;i++){n[i].setSelected(false);}this.rerender();}}};
c.prototype.setShowLabels=function(v){var o=this.getShowLabels();if(o&&!v){this.setProperty("showLabels",v,true);if(!this.getShowLabels()){this.setSelectedPath(null,null);}}else{this.setProperty("showLabels",v);}return this;};
c.prototype.setFocusToLabel=function(d){this._changeNavigationFocus(this._lastNavigationFocusElement,d);};
c.prototype._labelCanGetFocus=function(d){return d&&d.getEnabled()&&(!this._bHighlightedMode||d._bHighlighted);};
c.prototype.getNode=function(n){var N=this.getNodes();for(var i=0;i<N.length;i++){if(N[i].getProperty("nodeId")===n){return N[i];}}};
c.prototype.getFocusInfo=function(){var e=document.activeElement;if(e&&e.nodeName){return{'sFocusId':e.id,'oFocusedElement':e,'oFocusInfo':{}};}else{return{};}};
c.prototype.applyFocusInfo=function(p){if(p.sFocusId){var n=this._lastNavigationFocusElement;this._changeNavigationFocus(null,n);}};
c.prototype.getLane=function(s){var d=this.getLanes();for(var i=0;i<d.length;i++){if(d[i].getProperty("laneId")===s){return d[i];}}};
c.prototype.removeAllLanes=function(){this.removeAllAggregation("lanes");this._internalLanes=[];};
return c;});
sap.ui.predefine('sap/suite/ui/commons/ProcessFlowConnection',['./library','sap/ui/core/Control','./ProcessFlowConnectionRenderer'],function(l,C,P){"use strict";
var a=C.extend("sap.suite.ui.commons.ProcessFlowConnection",{metadata:{library:"sap.suite.ui.commons",properties:{drawData:{type:"object[]",group:"Misc",defaultValue:null},zoomLevel:{type:"sap.suite.ui.commons.ProcessFlowZoomLevel",group:"Misc",defaultValue:"Two"},type:{type:"sap.suite.ui.commons.ProcessFlowConnectionType",group:"Appearance",defaultValue:"Normal",deprecated:true},state:{type:"sap.suite.ui.commons.ProcessFlowConnectionState",group:"Appearance",defaultValue:"Regular",deprecated:true}},defaultAggregation:"_labels",aggregations:{_labels:{type:"sap.suite.ui.commons.ProcessFlowConnectionLabel",multiple:true,singularName:"_label",visibility:"hidden"}}}});
a.prototype._oResBundle=null;a.prototype._showLabels=false;a.prototype._oStateOrderMapping=null;
a.prototype.init=function(){if(!this._oResBundle){this._oResBundle=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");}this._oStateOrderMapping={};this._oStateOrderMapping[l.ProcessFlowConnectionLabelState.Neutral]=1;this._oStateOrderMapping[l.ProcessFlowConnectionLabelState.Positive]=2;this._oStateOrderMapping[l.ProcessFlowConnectionLabelState.Critical]=3;this._oStateOrderMapping[l.ProcessFlowConnectionLabelState.Negative]=4;};
a.prototype._getAriaText=function(t){var A="";var s=" "+this._oResBundle.getText('PF_CONNECTION_ENDS');if(this._isHorizontalLine(t)){A=this._oResBundle.getText('PF_CONNECTION_HORIZONTAL_LINE');if(t.arrow){A+=s;}}else if(this._isVerticalLine(t)){A=this._oResBundle.getText('PF_CONNECTION_VERTICAL_LINE');if(t.arrow){A+=s;}}else{A=this._oResBundle.getText('PF_CONNECTION_BRANCH');if(t.arrow){A+=s;}}return A;};
a.prototype._getVisibleLabel=function(){var v=null;if(this.getAggregation("_labels")){var L=this.getAggregation("_labels");for(var i=0;i<L.length;i++){var c=L[i];if(c&&c.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnectionLabel"){if(v){if(this._oStateOrderMapping[v.getState()]<this._oStateOrderMapping[c.getState()]){v=c;}else if(this._oStateOrderMapping[v.getState()]===this._oStateOrderMapping[c.getState()]){if(v.getPriority()<c.getPriority()){v=c;}}}else{v=c;}}}}return v;};
a.prototype._getShowLabels=function(){return a.prototype._showLabels;};
a.prototype._setShowLabels=function(s){a.prototype._showLabels=s;};
a.prototype._traverseConnectionData=function(){var c=this.getDrawData();if(!c){return{};}var t=this._createConnection(c);if(this.getAggregation("_labels")){t.labels=this.getAggregation("_labels");}return t;};
a.prototype._isVerticalLine=function(c){return c.hasOwnProperty("left")&&!c.left.draw&&c.hasOwnProperty("right")&&!c.right.draw&&c.hasOwnProperty("top")&&c.top.draw&&c.hasOwnProperty("bottom")&&c.bottom.draw;};
a.prototype._isHorizontalLine=function(c){return c.hasOwnProperty("left")&&c.left.draw&&c.hasOwnProperty("right")&&c.right.draw&&c.hasOwnProperty("top")&&!c.top.draw&&c.hasOwnProperty("bottom")&&!c.bottom.draw;};
a.prototype._createConnection=function(c){var L={draw:false,type:"",state:""};var o={right:L,top:L,left:L,bottom:L,arrow:false};for(var i=0;i<c.length;i++){o.right=this._createLine(c[i],"r",o.right);o.top=this._createLine(c[i],"t",o.top);o.left=this._createLine(c[i],"l",o.left);o.bottom=this._createLine(c[i],"b",o.bottom);if(c[i].flowLine.indexOf("r")>=0){if(c[i].hasArrow){o.arrow=true;}}}return o;};
a.prototype._createLine=function(c,d,b){var L={draw:b.draw,type:b.type,state:b.state};if(c.flowLine.indexOf(d)>=0){L.draw=true;if(c.targetNodeState===l.ProcessFlowNodeState.Neutral||c.targetNodeState===l.ProcessFlowNodeState.Positive||c.targetNodeState===l.ProcessFlowNodeState.Negative||c.targetNodeState===l.ProcessFlowNodeState.Critical){L.type=l.ProcessFlowConnectionType.Normal;}else if(c.targetNodeState===l.ProcessFlowNodeState.Planned||c.targetNodeState===l.ProcessFlowNodeState.PlannedNegative){if(L.type!==l.ProcessFlowConnectionType.Normal){L.type=l.ProcessFlowConnectionType.Planned;}}if(c.displayState===l.ProcessFlowDisplayState.Selected||c.displayState===l.ProcessFlowDisplayState.SelectedHighlighted||c.displayState===l.ProcessFlowDisplayState.SelectedHighlightedFocused||c.displayState===l.ProcessFlowDisplayState.SelectedFocused){L.state=l.ProcessFlowConnectionState.Selected;}else if(c.displayState===l.ProcessFlowDisplayState.Highlighted||c.displayState===l.ProcessFlowDisplayState.HighlightedFocused){if(L.state!==l.ProcessFlowConnectionState.Selected){L.state=l.ProcessFlowConnectionState.Highlighted;}}else if(c.displayState===l.ProcessFlowDisplayState.Regular||c.displayState===l.ProcessFlowDisplayState.RegularFocused){if(L.state!==l.ProcessFlowConnectionState.Highlighted&&L.state!==l.ProcessFlowConnectionState.Selected){L.state=l.ProcessFlowConnectionState.Regular;}}else if(c.displayState===l.ProcessFlowDisplayState.Dimmed||c.displayState===l.ProcessFlowDisplayState.DimmedFocused){if(L.state!==l.ProcessFlowConnectionState.Highlighted&&L.state!==l.ProcessFlowConnectionState.Regular&&L.state!==l.ProcessFlowConnectionState.Selected){L.state=l.ProcessFlowConnectionState.Dimmed;}}}return L;};
a.prototype.addConnectionData=function(s){var t=this.getDrawData();if(!t){t=[];}t.push(s);this.setDrawData(t);return t;};
a.prototype.destroyAggregation=function(A,s){this.removeAllAggregation("_labels",true);};
return a;});
sap.ui.predefine('sap/suite/ui/commons/ProcessFlowConnectionLabel',['sap/m/Button','./library','sap/ui/core/InvisibleText','./ProcessFlowConnectionLabelRenderer'],function(B,l,I,P){"use strict";
var a=B.extend("sap.suite.ui.commons.ProcessFlowConnectionLabel",{metadata:{library:"sap.suite.ui.commons",properties:{priority:{type:"int",group:"Misc",defaultValue:0},state:{type:"sap.suite.ui.commons.ProcessFlowConnectionLabelState",group:"Appearance",defaultValue:"Neutral"}}}});
a.prototype._bNavigationFocus=false;a.prototype._bSelected=false;a.prototype._bHighlighted=false;a.prototype.ACTIVE_CSS_CLASS="sapSuiteUiCommonsProcessFlowLabelActive";a.prototype.HOVER_CSS_CLASS="sapSuiteUiCommonsProcessFlowLabelHover";a.prototype.MOUSE_EVENTS="mouseenter mousedown mouseup mouseleave";a.prototype._oResBundle=null;a.prototype._bDimmed=false;
a.prototype.init=function(){if(B.prototype.init){B.prototype.init.apply(this,arguments);}this.addStyleClass("sapSuiteUiCommonsProcessFlowConnectionLabel");if(!this._oResBundle){this._oResBundle=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");}};
a.prototype.exit=function(){this.$().unbind(this.MOUSE_EVENTS,this._handleEvents);};
a.prototype.onBeforeRendering=function(){this.$().unbind(this.MOUSE_EVENTS,this._handleEvents);this._configureStateClasses();this._setLabelWidth();this._setAriaDetails();};
a.prototype.onAfterRendering=function(){if(!this.getText()){if(this.$().children().hasClass("sapMBtnIconFirst")){this.$().children().removeClass("sapMBtnIconFirst");}}this.$().bind(this.MOUSE_EVENTS,this._handleEvents.bind(this));document.getElementById(this.getId()).setAttribute("aria-haspopup","dialog");};
a.prototype._handleEvents=function(e){var p=sap.ui.require("sap/suite/ui/commons/ProcessFlow");if(!p){return;}switch(e.type){case p._mouseEvents.mouseEnter:this.$().find("*").addClass(this.HOVER_CSS_CLASS);break;case p._mouseEvents.mouseDown:this.$().find("*").removeClass(this.HOVER_CSS_CLASS);this.$().find("*").addClass(this.ACTIVE_CSS_CLASS);break;case p._mouseEvents.mouseUp:this.$().find("*").removeClass(this.ACTIVE_CSS_CLASS);this.$().find("*").addClass(this.HOVER_CSS_CLASS);break;case p._mouseEvents.mouseLeave:this.$().find("*").removeClass(this.ACTIVE_CSS_CLASS);this.$().find("*").removeClass(this.HOVER_CSS_CLASS);break;default:}};
a.prototype._getNavigationFocus=function(){return this._bNavigationFocus;};
a.prototype._setNavigationFocus=function(n){this._bNavigationFocus=n;};
a.prototype._setSelected=function(s){this._bSelected=s;};
a.prototype._getSelected=function(){return this._bSelected;};
a.prototype._setHighlighted=function(h){this._bHighlighted=h;};
a.prototype._getHighlighted=function(){return this._bHighlighted;};
a.prototype._setDimmed=function(d){this._bDimmed=d;};
a.prototype._getDimmed=function(){return this._bDimmed;};
a.prototype.setWidth=function(){return this;};
a.prototype.setIconFirst=function(){return this;};
a.prototype._setLabelWidth=function(){if(this.getIcon()){if(this.getText()){this.setProperty("width","4.5rem",false);}else{this.setProperty("width","2rem",false);}}else if(this.getText()&&this.getText().length>2){this.setProperty("width","4.5rem",false);}else{this.setProperty("width","2rem",false);}};
a.prototype._configureStateClasses=function(){switch(this.getState()){case l.ProcessFlowConnectionLabelState.Positive:this.addStyleClass("sapSuiteUiCommonsLabelStatePositive");break;case l.ProcessFlowConnectionLabelState.Critical:this.addStyleClass("sapSuiteUiCommonsLabelStateCritical");break;case l.ProcessFlowConnectionLabelState.Negative:this.addStyleClass("sapSuiteUiCommonsLabelStateNegative");break;default:this.addStyleClass("sapSuiteUiCommonsLabelStateNeutral");}if(this._getDimmed()&&this.getEnabled()){this.addStyleClass("sapSuiteUiCommonsLabelDimmed");}else{this.removeStyleClass("sapSuiteUiCommonsLabelDimmed");}if(this._getSelected()){this.addStyleClass("sapSuiteUiCommonsLabelSelected");}else{this.removeStyleClass("sapSuiteUiCommonsLabelSelected");}if(this._getHighlighted()){this.addStyleClass("sapSuiteUiCommonsLabelHighlighted");}else{this.removeStyleClass("sapSuiteUiCommonsLabelHighlighted");}};
a.prototype._setAriaDetails=function(){var i=new I();i.setText(this._oResBundle.getText('PF_CONNECTIONLABEL'));i.toStatic();var o=new I();o.setText(this.getText());o.toStatic();if(this.getAriaLabelledBy().length===0){this.addAriaLabelledBy(i);this.addAriaLabelledBy(o);}};
return a;});
sap.ui.predefine('sap/suite/ui/commons/ProcessFlowConnectionLabelRenderer',['sap/m/ButtonRenderer','sap/ui/core/Renderer'],function(B,R){"use strict";var P=R.extend(B);return P;},true);
sap.ui.predefine('sap/suite/ui/commons/ProcessFlowConnectionRenderer',['./library'],function(l){"use strict";var P={};
P.render=function(r,c){var C=c._traverseConnectionData();var z=c.getZoomLevel();r.write("<div");r.writeAttribute("id",c.getId());r.writeAttribute("role","presentation");r.writeAttributeEscaped("aria-label",c._getAriaText(C));r.write(">");if(c._isHorizontalLine(C)){this._writeHorizontalLine(r,C,z,c);}else if(c._isVerticalLine(C)){this._writeVerticalLine(r,C,z,c._getShowLabels());}else{this._writeSpecialLine(r,C,z,c);}r.write("</div>");};
P._writeVerticalLine=function(r,c,z,s){r.write("<div");r.addClass("sapSuiteUiCommonsFloatLeft");if(s){r.addClass("sapSuiteUiCommonsPFWithLabel");}switch(z){case l.ProcessFlowZoomLevel.One:r.addClass("sapSuiteUiCommonsBoxZoom1Width");r.addClass("sapSuiteUiCommonsBoxWideZoom1Height");break;case l.ProcessFlowZoomLevel.Three:r.addClass("sapSuiteUiCommonsBoxZoom3Width");r.addClass("sapSuiteUiCommonsBoxWideZoom3Height");break;case l.ProcessFlowZoomLevel.Four:r.addClass("sapSuiteUiCommonsBoxZoom4Width");r.addClass("sapSuiteUiCommonsBoxWideZoom4Height");break;default:r.addClass("sapSuiteUiCommonsBoxZoom2Width");r.addClass("sapSuiteUiCommonsBoxWideZoom2Height");}r.writeClasses();r.write(">");r.write("</div>");r.write("<div");r.addClass("sapSuiteUiCommonsFloatLeft");r.addClass("sapSuiteUiCommonsBoxMiddleBorderWidth");switch(z){case l.ProcessFlowZoomLevel.One:r.addClass("sapSuiteUiCommonsBoxWideZoom1Height");break;case l.ProcessFlowZoomLevel.Three:r.addClass("sapSuiteUiCommonsBoxWideZoom3Height");break;case l.ProcessFlowZoomLevel.Four:r.addClass("sapSuiteUiCommonsBoxWideZoom4Height");break;default:r.addClass("sapSuiteUiCommonsBoxWideZoom2Height");}r.addClass("sapSuiteUiCommonsBorderLeft");if(c.top.type===l.ProcessFlowConnectionType.Planned){r.addClass("sapSuiteUiCommonsBorderLeftTypePlanned");}else{r.addClass("sapSuiteUiCommonsBorderLeftTypeNormal");}if(c.top.state===l.ProcessFlowConnectionState.Highlighted){r.addClass("sapSuiteUiCommonsBorderLeftStateHighlighted");r.addClass("sapSuiteUiCommonsStateHighlighted");}else if(c.top.state===l.ProcessFlowConnectionState.Dimmed){r.addClass("sapSuiteUiCommonsBorderLeftStateDimmed");}else if(c.top.state===l.ProcessFlowConnectionState.Selected){r.addClass("sapSuiteUiCommonsBorderLeftStateSelected");r.addClass("sapSuiteUiCommonsStateSelected");}else{r.addClass("sapSuiteUiCommonsBorderLeftStateRegular");r.addClass("sapSuiteUiCommonsStateRegular");}r.writeClasses();r.write(">");r.write("</div>");P._resetFloat(r);};
P._writeHorizontalLine=function(r,c,z,C){r.write("<div");r.addClass("sapSuiteUiCommonsBoxWideWidth");switch(z){case l.ProcessFlowZoomLevel.One:r.addClass("sapSuiteUiCommonsBoxTopZoom1Height");break;case l.ProcessFlowZoomLevel.Three:r.addClass("sapSuiteUiCommonsBoxTopZoom3Height");break;case l.ProcessFlowZoomLevel.Four:r.addClass("sapSuiteUiCommonsBoxTopZoom4Height");break;default:r.addClass("sapSuiteUiCommonsBoxTopZoom2Height");}r.writeClasses();r.write(">");r.write("</div>");r.write("<div");if(c.arrow){r.addClass("sapSuiteUiCommonsParentPosition");if(C._getShowLabels()){r.addClass("sapSuiteUiCommonsPFWithLabel");}switch(z){case l.ProcessFlowZoomLevel.One:r.addClass("sapSuiteUiCommonsBoxWideArrowZoom1Width");break;case l.ProcessFlowZoomLevel.Three:r.addClass("sapSuiteUiCommonsBoxWideArrowZoom3Width");break;case l.ProcessFlowZoomLevel.Four:r.addClass("sapSuiteUiCommonsBoxWideArrowZoom4Width");break;default:r.addClass("sapSuiteUiCommonsBoxWideArrowZoom2Width");}}else{r.addClass("sapSuiteUiCommonsBoxWideWidth");}r.addClass("sapSuiteUiCommonsBoxMiddleBorderHeight");r.addClass("sapSuiteUiCommonsBorderBottom");if(c.right.type===l.ProcessFlowConnectionType.Planned){r.addClass("sapSuiteUiCommonsBorderBottomTypePlanned");}else{r.addClass("sapSuiteUiCommonsBorderBottomTypeNormal");}if(c.right.state===l.ProcessFlowConnectionState.Highlighted){r.addClass("sapSuiteUiCommonsBorderBottomStateHighlighted");r.addClass("sapSuiteUiCommonsStateHighlighted");}else if(c.right.state===l.ProcessFlowConnectionState.Dimmed){r.addClass("sapSuiteUiCommonsBorderBottomStateDimmed");}else if(c.right.state===l.ProcessFlowConnectionState.Selected){r.addClass("sapSuiteUiCommonsBorderBottomStateSelected");r.addClass("sapSuiteUiCommonsStateSelected");}else{r.addClass("sapSuiteUiCommonsBorderBottomStateRegular");r.addClass("sapSuiteUiCommonsStateRegular");}r.writeClasses();r.write(">");if(c.labels&&C._showLabels){P._renderLabel(r,C,c);}if(c.arrow){r.write("<div");r.addClass("sapSuiteUiCommonsArrowRight");if(c.right.state===l.ProcessFlowConnectionState.Highlighted){r.addClass("sapSuiteUiCommonsBorderLeftStateHighlighted");}else if(c.right.state===l.ProcessFlowConnectionState.Dimmed){r.addClass("sapSuiteUiCommonsBorderLeftStateDimmed");}else if(c.right.state===l.ProcessFlowConnectionState.Selected){r.addClass("sapSuiteUiCommonsBorderLeftStateSelected");}else{r.addClass("sapSuiteUiCommonsBorderLeftStateRegular");}r.writeClasses();r.write(">");r.write("</div>");}r.write("</div>");};
P._writeSpecialLine=function(r,c,z,C){P._writeFirstRowOfSpecialLine(r,c,z,C);P._writeSecondRowOfSpecialLine(r,c,z,C);P._writeThirdRowOfSpecialLine(r,c,z,C);P._resetFloat(r);};
P._writeFirstRowOfSpecialLine=function(r,c,z,C){r.write("<div");r.addClass("sapSuiteUiCommonsFloatLeft");if(C._getShowLabels()){r.addClass("sapSuiteUiCommonsPFWithLabel");}switch(z){case l.ProcessFlowZoomLevel.One:r.addClass("sapSuiteUiCommonsBoxZoom1Width");r.addClass("sapSuiteUiCommonsBoxTopZoom1Height");break;case l.ProcessFlowZoomLevel.Three:r.addClass("sapSuiteUiCommonsBoxZoom3Width");r.addClass("sapSuiteUiCommonsBoxTopZoom3Height");break;case l.ProcessFlowZoomLevel.Four:r.addClass("sapSuiteUiCommonsBoxZoom4Width");r.addClass("sapSuiteUiCommonsBoxTopZoom4Height");break;default:r.addClass("sapSuiteUiCommonsBoxZoom2Width");r.addClass("sapSuiteUiCommonsBoxTopZoom2Height");}r.writeClasses();r.write(">");r.write("</div>");r.write("<div");if(C._getShowLabels()){r.addClass("sapSuiteUiCommonsPFWithLabel");}r.addClass("sapSuiteUiCommonsFloatLeft");switch(z){case l.ProcessFlowZoomLevel.One:r.addClass("sapSuiteUiCommonsBoxTopZoom1Height");break;case l.ProcessFlowZoomLevel.Three:r.addClass("sapSuiteUiCommonsBoxTopZoom3Height");break;case l.ProcessFlowZoomLevel.Four:r.addClass("sapSuiteUiCommonsBoxTopZoom4Height");break;default:r.addClass("sapSuiteUiCommonsBoxTopZoom2Height");}if(c.hasOwnProperty("top")&&c.top.draw){r.addClass("sapSuiteUiCommonsBoxMiddleBorderWidth");r.addClass("sapSuiteUiCommonsBorderLeft");if(c.top.type===l.ProcessFlowConnectionType.Planned){r.addClass("sapSuiteUiCommonsBorderLeftTypePlanned");}else{r.addClass("sapSuiteUiCommonsBorderLeftTypeNormal");}if(c.top.state===l.ProcessFlowConnectionState.Highlighted){r.addClass("sapSuiteUiCommonsBorderLeftStateHighlighted");r.addClass("sapSuiteUiCommonsStateHighlighted");}else if(c.top.state===l.ProcessFlowConnectionState.Dimmed){r.addClass("sapSuiteUiCommonsBorderLeftStateDimmed");}else if(c.top.state===l.ProcessFlowConnectionState.Selected){r.addClass("sapSuiteUiCommonsBorderLeftStateSelected");r.addClass("sapSuiteUiCommonsStateSelected");}else{r.addClass("sapSuiteUiCommonsBorderLeftStateRegular");r.addClass("sapSuiteUiCommonsStateRegular");}}else{r.addClass("sapSuiteUiCommonsBoxMiddleWidth");}r.writeClasses();r.write(">");r.write("</div>");};
P._writeSecondRowOfSpecialLine=function(r,c,z,C){P._resetFloat(r);r.write("<div");r.addClass("sapSuiteUiCommonsFloatLeft");if(C._getShowLabels()){r.addClass("sapSuiteUiCommonsPFWithLabel");}switch(z){case l.ProcessFlowZoomLevel.One:r.addClass("sapSuiteUiCommonsBoxZoom1Width");break;case l.ProcessFlowZoomLevel.Three:r.addClass("sapSuiteUiCommonsBoxZoom3Width");break;case l.ProcessFlowZoomLevel.Four:r.addClass("sapSuiteUiCommonsBoxZoom4Width");break;default:r.addClass("sapSuiteUiCommonsBoxZoom2Width");}if(c.hasOwnProperty("left")&&c.left.draw){r.addClass("sapSuiteUiCommonsBoxMiddleBorderHeight");r.addClass("sapSuiteUiCommonsBorderBottom");if(c.left.type===l.ProcessFlowConnectionType.Planned){r.addClass("sapSuiteUiCommonsBorderBottomTypePlanned");}else{r.addClass("sapSuiteUiCommonsBorderBottomTypeNormal");}if(c.left.state===l.ProcessFlowConnectionState.Highlighted){r.addClass("sapSuiteUiCommonsBorderBottomStateHighlighted");r.addClass("sapSuiteUiCommonsStateHighlighted");}else if(c.left.state===l.ProcessFlowConnectionState.Dimmed){r.addClass("sapSuiteUiCommonsBorderBottomStateDimmed");}else if(c.left.state===l.ProcessFlowConnectionState.Selected){r.addClass("sapSuiteUiCommonsBorderBottomStateSelected");r.addClass("sapSuiteUiCommonsStateSelected");}else{r.addClass("sapSuiteUiCommonsBorderBottomStateRegular");r.addClass("sapSuiteUiCommonsStateRegular");}}else{r.addClass("sapSuiteUiCommonsBoxMiddleHeight");}r.writeClasses();r.write(">");r.write("</div>");r.write("<div");r.addClass("sapSuiteUiCommonsFloatLeft");if(C._getShowLabels()){r.addClass("sapSuiteUiCommonsPFWithLabel");}r.addClass("sapSuiteUiCommonsBoxMiddleWidth");r.addClass("sapSuiteUiCommonsBoxMiddleBorderHeight");if((c.hasOwnProperty("left")&&c.left.draw)||(c.hasOwnProperty("right")&&c.right.draw)||(c.hasOwnProperty("top")&&c.top.draw)||(c.hasOwnProperty("bottom")&&c.bottom.draw)){r.addClass("sapSuiteUiCommonsBorderBottom");r.addClass("sapSuiteUiCommonsBorderBottomTypeNormal");if(c.right.state===l.ProcessFlowConnectionState.Highlighted||c.top.state===l.ProcessFlowConnectionState.Highlighted||c.left.state===l.ProcessFlowConnectionState.Highlighted||c.bottom.state===l.ProcessFlowConnectionState.Highlighted){r.addClass("sapSuiteUiCommonsBorderBottomStateHighlighted");r.addClass("sapSuiteUiCommonsStateHighlighted");}else if(c.right.state===l.ProcessFlowConnectionState.Selected||c.top.state===l.ProcessFlowConnectionState.Selected||c.left.state===l.ProcessFlowConnectionState.Selected||c.bottom.state===l.ProcessFlowConnectionState.Selected){r.addClass("sapSuiteUiCommonsBorderBottomStateSelected");r.addClass("sapSuiteUiCommonsStateSelected");}else if(c.right.state===l.ProcessFlowConnectionState.Dimmed||c.top.state===l.ProcessFlowConnectionState.Dimmed||c.left.state===l.ProcessFlowConnectionState.Dimmed||c.bottom.state===l.ProcessFlowConnectionState.Dimmed){r.addClass("sapSuiteUiCommonsBorderBottomStateDimmed");}else{r.addClass("sapSuiteUiCommonsBorderBottomStateRegular");r.addClass("sapSuiteUiCommonsStateRegular");}}r.writeClasses();r.write(">");r.write("</div>");r.write("<div");r.addClass("sapSuiteUiCommonsFloatLeft");if(C._getShowLabels()){r.addClass("sapSuiteUiCommonsPFWithLabel");}if(c.arrow){r.addClass("sapSuiteUiCommonsParentPosition");switch(z){case l.ProcessFlowZoomLevel.One:r.addClass("sapSuiteUiCommonsBoxArrowZoom1Width");break;case l.ProcessFlowZoomLevel.Three:r.addClass("sapSuiteUiCommonsBoxArrowZoom3Width");break;case l.ProcessFlowZoomLevel.Four:r.addClass("sapSuiteUiCommonsBoxArrowZoom4Width");break;default:r.addClass("sapSuiteUiCommonsBoxArrowZoom2Width");}}else if(C._getShowLabels()){switch(z){case l.ProcessFlowZoomLevel.One:r.addClass("sapSuiteUiCommonsBoxZoom1WidthWithLabel");break;case l.ProcessFlowZoomLevel.Three:r.addClass("sapSuiteUiCommonsBoxZoom3WidthWithLabel");break;case l.ProcessFlowZoomLevel.Four:r.addClass("sapSuiteUiCommonsBoxZoom4WidthWithLabel");break;default:r.addClass("sapSuiteUiCommonsBoxZoom2WidthWithLabel");}}else{switch(z){case l.ProcessFlowZoomLevel.One:r.addClass("sapSuiteUiCommonsBoxZoom1Width");break;case l.ProcessFlowZoomLevel.Three:r.addClass("sapSuiteUiCommonsBoxZoom3Width");break;case l.ProcessFlowZoomLevel.Four:r.addClass("sapSuiteUiCommonsBoxZoom4Width");break;default:r.addClass("sapSuiteUiCommonsBoxZoom2Width");}}if(c.hasOwnProperty("right")&&c.right.draw){r.addClass("sapSuiteUiCommonsBoxMiddleBorderHeight");r.addClass("sapSuiteUiCommonsBorderBottom");if(c.right.type===l.ProcessFlowConnectionType.Planned){r.addClass("sapSuiteUiCommonsBorderBottomTypePlanned");}else{r.addClass("sapSuiteUiCommonsBorderBottomTypeNormal");}if(c.right.state===l.ProcessFlowConnectionState.Highlighted){r.addClass("sapSuiteUiCommonsBorderBottomStateHighlighted");r.addClass("sapSuiteUiCommonsStateHighlighted");}else if(c.right.state===l.ProcessFlowConnectionState.Dimmed){r.addClass("sapSuiteUiCommonsBorderBottomStateDimmed");}else if(c.right.state===l.ProcessFlowConnectionState.Selected){r.addClass("sapSuiteUiCommonsBorderBottomStateSelected");r.addClass("sapSuiteUiCommonsStateSelected");}else{r.addClass("sapSuiteUiCommonsBorderBottomStateRegular");r.addClass("sapSuiteUiCommonsStateRegular");}}else{r.addClass("sapSuiteUiCommonsBoxMiddleHeight");}r.writeClasses();r.write(">");if(c.labels&&C._showLabels){P._renderLabel(r,C,c);}if(c.arrow){r.write("<div");r.addClass("sapSuiteUiCommonsArrowRight");if(c.hasOwnProperty("right")){if(c.right.state===l.ProcessFlowConnectionState.Highlighted){r.addClass("sapSuiteUiCommonsBorderLeftStateHighlighted");}else if(c.right.state===l.ProcessFlowConnectionState.Dimmed){r.addClass("sapSuiteUiCommonsBorderLeftStateDimmed");}else if(c.right.state===l.ProcessFlowConnectionState.Selected){r.addClass("sapSuiteUiCommonsBorderLeftStateSelected");}else{r.addClass("sapSuiteUiCommonsBorderLeftStateRegular");}}r.writeClasses();r.write(">");r.write("</div>");}r.write("</div>");};
P._writeThirdRowOfSpecialLine=function(r,c,z,C){P._resetFloat(r);r.write("<div");r.addClass("sapSuiteUiCommonsFloatLeft");if(C._getShowLabels()){r.addClass("sapSuiteUiCommonsPFWithLabel");}switch(z){case l.ProcessFlowZoomLevel.One:r.addClass("sapSuiteUiCommonsBoxZoom1Width");r.addClass("sapSuiteUiCommonsBoxBottomZoom1Height");break;case l.ProcessFlowZoomLevel.Three:r.addClass("sapSuiteUiCommonsBoxZoom3Width");r.addClass("sapSuiteUiCommonsBoxBottomZoom3Height");break;case l.ProcessFlowZoomLevel.Four:r.addClass("sapSuiteUiCommonsBoxZoom4Width");r.addClass("sapSuiteUiCommonsBoxBottomZoom4Height");break;default:r.addClass("sapSuiteUiCommonsBoxZoom2Width");r.addClass("sapSuiteUiCommonsBoxBottomZoom2Height");}r.writeClasses();r.write(">");r.write("</div>");r.write("<div");if(C._getShowLabels()){r.addClass("sapSuiteUiCommonsPFWithLabel");}r.addClass("sapSuiteUiCommonsFloatLeft");switch(z){case l.ProcessFlowZoomLevel.One:r.addClass("sapSuiteUiCommonsBoxBottomZoom1Height");break;case l.ProcessFlowZoomLevel.Three:r.addClass("sapSuiteUiCommonsBoxBottomZoom3Height");break;case l.ProcessFlowZoomLevel.Four:r.addClass("sapSuiteUiCommonsBoxBottomZoom4Height");break;default:r.addClass("sapSuiteUiCommonsBoxBottomZoom2Height");}if(c.hasOwnProperty("bottom")&&c.bottom.draw){r.addClass("sapSuiteUiCommonsBoxMiddleBorderWidth");r.addClass("sapSuiteUiCommonsBorderLeft");if(c.bottom.type===l.ProcessFlowConnectionType.Planned){r.addClass("sapSuiteUiCommonsBorderLeftTypePlanned");}else{r.addClass("sapSuiteUiCommonsBorderLeftTypeNormal");}if(c.bottom.state===l.ProcessFlowConnectionState.Highlighted){r.addClass("sapSuiteUiCommonsBorderLeftStateHighlighted");r.addClass("sapSuiteUiCommonsStateHighlighted");}else if(c.bottom.state===l.ProcessFlowConnectionState.Dimmed){r.addClass("sapSuiteUiCommonsBorderLeftStateDimmed");}else if(c.bottom.state===l.ProcessFlowConnectionState.Selected){r.addClass("sapSuiteUiCommonsBorderLeftStateSelected");r.addClass("sapSuiteUiCommonsStateSelected");}else{r.addClass("sapSuiteUiCommonsBorderLeftStateRegular");r.addClass("sapSuiteUiCommonsStateRegular");}}else{r.addClass("sapSuiteUiCommonsBoxMiddleWidth");}r.writeClasses();r.write(">");r.write("</div>");};
P._resetFloat=function(r){r.write("<div");r.addClass("sapSuiteUiCommonsFloatClear");r.writeClasses();r.write(">");r.write("</div>");};
P._renderLabel=function(r,c){var L=c._getVisibleLabel();if(c.getAggregation("_labels")){var a=c.getAggregation("_labels");for(var i=0;i<a.length;i++){if(a[i]._getSelected()){L._setDimmed(false);if(a[i].getId()!==L.getId()){L._setSelected(true);a[i]._setSelected(false);}}}}if(L){r.renderControl(L);}};
return P;},true);
sap.ui.predefine('sap/suite/ui/commons/ProcessFlowLaneHeader',["sap/ui/thirdparty/jquery",'sap/m/Image','./library','sap/ui/core/Control','sap/ui/core/IconPool','sap/ui/Device','sap/ui/core/Icon',"./ProcessFlowLaneHeaderRenderer"],function(q,I,l,C,a,D,b,P){"use strict";
var c=C.extend("sap.suite.ui.commons.ProcessFlowLaneHeader",{metadata:{library:"sap.suite.ui.commons",properties:{text:{type:"string",group:"Misc",defaultValue:null},iconSrc:{type:"sap.ui.core.URI",group:"Misc",defaultValue:null},position:{type:"int",group:"Misc",defaultValue:null},laneId:{type:"string",group:"Misc",defaultValue:null},state:{type:"object",group:"Misc",defaultValue:null},zoomLevel:{type:"sap.suite.ui.commons.ProcessFlowZoomLevel",group:"Misc",defaultValue:null}},events:{press:{parameters:{oEvent:{type:"object"}}}}}});
c.prototype._oResBundle=null;c.prototype._mergedLanePosition=null;c.symbolType={startSymbol:"startSymbol",endSymbol:"endSymbol",processSymbol:"processSymbol",standardType:"standardType"};c._constants={halfGapSize:0.0241,minPercentage:0.025,ringThickness:5,ringInnerRadius:23,positionX:32,positionY:32,outerCircleRadius:31,outerCircleStrokeColor:"OuterCircleStrikeColor",outerCircleStrokeWidth:1,sectorPositiveColor:"suiteUiCommonsProcessFlowHeaderPositiveColor",sectorNegativeColor:"suiteUiCommonsProcessFlowHeaderNegativeColor",sectorNeutralColor:"suiteUiCommonsProcessFlowHeaderNeutralColor",sectorCriticalColor:"suiteUiCommonsProcessFlowHeaderCriticalColor",sectorPlannedColor:"suiteUiCommonsProcessFlowHeaderPlannedColor",ellipsis:'...',ellipsisLength:3};
c.prototype.init=function(){this._virtualTableSpan=1;if(!this._oResBundle){this._oResBundle=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");}};
c.prototype.exit=function(){this._destroyImage();this.$().unbind("click",this.ontouchend);};
c.prototype.onBeforeRendering=function(){this.$("lh-icon").off('click',q.proxy(this.ontouchend,this));this.$().unbind("click",this.ontouchend);};
c.prototype.onAfterRendering=function(){var t=this.$();var $=this.$("lh-icon");var s='click';if(D.support.touch){s='touchend';}if($.length>0){$.on(s,q.proxy(this.ontouchend,this));$.css("cursor","inherit");}this.$().bind("click",q.proxy(this.ontouchend,this));if(this._isHeaderMode()){t.addClass("suiteUiProcessFlowLaneHeaderPointer");}else{t.removeClass("suiteUiProcessFlowLaneHeaderPointer");}if(D.browser.msie||D.browser.mozilla){this.$("lh-text").css("word-break","break-all");}if(!this._ellipsisDisabled&&!c._hasNativeLineClamp){this._clampText();}};
c.prototype.ontouchend=function(e){if(e&&!e.isDefaultPrevented()){e.preventDefault();}if(this){this.firePress(this);}if(e&&!e.isPropagationStopped()){e.stopPropagation();}if(e&&!e.isImmediatePropagationStopped()){e.stopImmediatePropagation();}};
c.prototype._setMergedPosition=function(p){this._mergedLanePosition=p;};
c.prototype._getSymbolType=function(){return this._oSymbolType?this._oSymbolType:c.symbolType.standardType;};
c.prototype._setSymbolType=function(s,d){d._oSymbolType=s;};
c.prototype._getImage=function(i,s){this._destroyImage();if(this._oImageControl){this._oImageControl.setSrc(s);}else{this._oImageControl=a.createControlByURI(s,I);this._oImageControl.sId=i;this._oImageControl.setParent(this,null,true);}if(this._oImageControl instanceof b){this._oImageControl.setUseIconTooltip(false);}return this._oImageControl;};
c.prototype._setHeaderMode=function(i){this._bHeaderMode=i;};
c._setVirtualTableSpan=function(e){this._virtualTableSpan=e;};
c._getVirtualTableSpan=function(){return this._virtualTableSpan;};
c.prototype._isHeaderMode=function(){return this._bHeaderMode;};
c.prototype._clampValues=function(d,m,e){var i=d.length-1,f=false,v;while(i>=0){v=d[i];if(v<m){d[i]=e;f=true;}i--;}return f;};
c.prototype._rescaleToUnit=function(r,m){var R,i,v,V,d,e;if(!m){m=0;}i=r.length-1;R=0;v=V=0;while(i>=0){d=r[i];if(d>0){if(d<=m){V++;}else{R+=r[i];}v++;}i--;}R-=(v-V)*m;e=(1-v*m)/R;i=r.length-1;while(i>=0){d=r[i];if(d>0){if(d<=m){r[i]=m;}else{r[i]=(d-m)*e+m;}}i--;}};
c.prototype._countGaps=function(d){var i=d.length-1,g=0;while(i>=0){if(d[i]>0){g++;}i--;}if(g===1){g=0;}return g;};
c.prototype._rescaleByFactor=function(r,f){var i=r.length-1;while(i>=0){r[i]*=f;i--;}};
c.prototype._colorMap=[c._constants.sectorPositiveColor,c._constants.sectorNegativeColor,c._constants.sectorNeutralColor,c._constants.sectorPlannedColor,c._constants.sectorCriticalColor];
c.prototype._calculateSectorRangeDefinitions=function(d,f){var e=[],g=-Math.PI/2,h,j=d.length,i=0;while(i<j){if(d[i]>0){h=g+2*Math.PI*d[i];e.push({start:g,end:h,color:this._colorMap[i]});g=h+f;}i++;}return e;};
c.prototype._renderDonutPercentages=function(r){var s=this.getState(),g=0,S,p=[0,0,0,0],f,d,h=c._constants.halfGapSize,R=c._constants.ringInnerRadius,i=c._constants.ringThickness,e=c._constants.ringInnerRadius+i,o=c._constants.outerCircleStrokeColor,O=c._constants.outerCircleStrokeWidth,j=c._constants.outerCircleRadius,k=c._constants.positionX,m=c._constants.positionY,M=c._constants.minPercentage;if(s&&Object.prototype.toString.call(s)==='[object Array]'&&(s.length>0)){s.forEach(function(n){switch(n.state){case l.ProcessFlowNodeState.Positive:p[0]=n.value;break;case l.ProcessFlowNodeState.Negative:p[1]=n.value;break;case l.ProcessFlowNodeState.Neutral:p[2]=n.value;break;case l.ProcessFlowNodeState.Planned:p[3]=n.value;break;case l.ProcessFlowNodeState.Critical:p[4]=n.value;break;default:p[3]=n.value;}});this._clampValues(p,0,0);this._rescaleToUnit(p);this._rescaleToUnit(p,M);g=this._countGaps(p);f=(1-g*h/Math.PI);this._rescaleByFactor(p,f);this._renderCircle(r,o,O,k,m,j);if(g>0){S=this._calculateSectorRangeDefinitions(p,2*h);this._renderDonutSectors(r,S,k,m,R,e);}else{d=this._selectColor(p);this._renderCircle(r,d,i,k,m,R+i/2,true);}}else{this._renderCircle(r,o,O,k,m,j);}};
c.prototype._renderCircle=function(r,s,d,p,e,f,i){r.write("<circle");var g=i?this.getId()+"-donut-circle-inner":this.getId()+"-donut-circle";r.writeAttribute("id",g);if(s!==c._constants.outerCircleStrokeColor){r.writeAttributeEscaped("class","suiteUiCommonsProcessFlowHeaderIconFill "+s);}else{r.writeAttribute("class","suiteUiCommonsProcessFlowHeaderIconFill");}r.writeAttributeEscaped("stroke-width",d);r.writeAttributeEscaped("cx",p);r.writeAttributeEscaped("cy",e);r.writeAttributeEscaped("r",f);r.write("></circle>");};
c.prototype._renderDonutSectors=function(r,s,p,d,e,f){var i=0,g=s.length,S,h;while(i<g){S=s[i];h=this._getDonutSectorPath(p,d,S.start,S.end,e,f);r.write("<path");r.writeAttribute("id",this.getId()+"-donut-segment-"+i);r.writeAttributeEscaped("d",h);r.writeAttributeEscaped("class",S.color);r.writeAttribute("opacity","1");r.write("></path>");i++;}};
c.prototype._selectColor=function(p){var s;if(p[0]){s=c._constants.sectorPositiveColor;}else if(p[1]){s=c._constants.sectorNegativeColor;}else if(p[2]){s=c._constants.sectorNeutralColor;}else if(p[3]){s=c._constants.sectorPlannedColor;}else if(p[4]){s=c._constants.sectorCriticalColor;}else{s=c._constants.sectorNeutralColor;}return s;};
c.prototype._getDonutSectorPath=function(p,d,s,e,r,f){var o=0,g,h,i,j,S,k,E,m,n;if((e-s)%(Math.PI*2)>Math.PI){o=1;}k=Math.cos(s);E=Math.cos(e);m=Math.sin(s);n=Math.sin(e);g=(p+r*k).toFixed(3)+','+(d+r*m).toFixed(3);h=(p+f*k).toFixed(3)+','+(d+f*m).toFixed(3);i=(p+f*E).toFixed(3)+','+(d+f*n).toFixed(3);j=(p+r*E).toFixed(3)+','+(d+r*n).toFixed(3);S="M"+g+"L"+h+"A"+f+','+f+" 0 "+o+" 1 "+i+"L"+j+"A"+r+','+r+" 0 "+o+" 0 "+g+"z";return S;};
c.prototype._destroyImage=function(){if(this._oImageControl){this._oImageControl.destroy();}this._oImageControl=null;};
c.prototype._clampText=function(){var $=this.$("lh-text").length?this.$("lh-text"):null,t=this.getText(),L="",e=c._constants.ellipsis,E=c._constants.ellipsisLength,s=E+1,m,i=t.length,M,v;if($){M=parseInt($.css("height").slice(0,-2),10);if($[0].scrollHeight>M){v=$.css("visibility");$.css("visibility","hidden");L=t;do{m=(s+i)>>1;$.textContent=t.slice(0,m-E)+e;if($.scrollHeight>M){i=m;}else{s=m;L=$.textContent;}}while(i-s>1);$.css("visibility",v);}if($.scrollHeight>M){$.textContent=L;}}};
c._hasNativeLineClamp=(function(){return document.documentElement.style.webkitLineClamp!==undefined;}());
c.prototype._getAriaTextForStatusValue=function(s){switch(s){case l.ProcessFlowNodeState.Positive:return this._oResBundle.getText('PF_ARIA_STATUS_POSITIVE');case l.ProcessFlowNodeState.Negative:return this._oResBundle.getText('PF_ARIA_STATUS_NEGATIVE');case l.ProcessFlowNodeState.Critical:return this._oResBundle.getText('PF_ARIA_STATUS_CRITICAL');case l.ProcessFlowNodeState.Planned:return this._oResBundle.getText('PF_ARIA_STATUS_PLANNED');case l.ProcessFlowNodeState.PlannedNegative:return this._oResBundle.getText('PF_ARIA_STATUS_PLNNEGATIVE');case l.ProcessFlowNodeState.Neutral:default:return this._oResBundle.getText('PF_ARIA_STATUS_NEUTRAL');}};
c.prototype._getAriaText=function(){var A=this.getText();var s=this.getState();if(s){var d=[];for(var i in s){d.push(s[i].value);}this._clampValues(d,0,0);this._rescaleToUnit(d);var e=this._oResBundle.getText('PF_ARIA_STATUS');var S=false;for(var j in s){if(s[j].value!==0){var f=this._getAriaTextForStatusValue(s[j].state);var v=" "+Math.round(d[j]*100)+"% "+f+",";e=e.concat(v);S=true;}}if(S){if(A==""){A=e.slice(0,-1);}else{A=A+", "+e.slice(0,-1);}}}return A;};
c.prototype._getSymbolAriaText=function(){var A="";switch(this._getSymbolType()){case c.symbolType.startSymbol:A=this._oResBundle.getText('PF_ARIA_SYMBOL_LANE_START');break;case c.symbolType.endSymbol:A=this._oResBundle.getText('PF_ARIA_SYMBOL_LANE_END');break;case c.symbolType.processSymbol:A=this._oResBundle.getText('PF_ARIA_SYMBOL_LANE_PROCESS');break;default:}return A;};
c.createNewStartSymbol=function(i){var s=new c({laneId:"processFlowLaneStart"});s._setSymbolType(c.symbolType.startSymbol,s);s._setHeaderMode(i);return s;};
c.createNewEndSymbol=function(i){var e=new c({laneId:"processFlowLaneEnd"});e._setSymbolType(c.symbolType.endSymbol,e);e._setHeaderMode(i);return e;};
c.createNewProcessSymbol=function(i){var p=new c({laneId:"processFlowLaneProcess",iconSrc:"sap-icon://process"});p._setSymbolType(c.symbolType.processSymbol,p);p._setHeaderMode(i);return p;};
c.enableEllipsisSupportForText=function(i){this._ellipsisDisabled=!i;};
c.prototype.getPosition=function(){if(this._mergedLanePosition){return this._mergedLanePosition;}else{return this.getProperty("position");}};
return c;});
sap.ui.predefine('sap/suite/ui/commons/ProcessFlowLaneHeaderRenderer',["sap/base/security/encodeXML"],function(e){"use strict";var P;var a={};
a.render=function(r,c){P=P||sap.ui.require("sap/suite/ui/commons/ProcessFlowLaneHeader");switch(c._getSymbolType()){case P.symbolType.startSymbol:this._writeSymbolNodeType(r,c,"-start",["suiteUiProcessFlowLaneHeaderStartEndSymbol","suiteUiProcessFlowLaneHeaderStartSymbol"],["suiteUiProcessFlowLaneHeaderStartEndSymbolContainer","suiteUiProcessFlowLaneHeaderNoSelection"],false,c._isHeaderMode());break;case P.symbolType.endSymbol:this._writeSymbolNodeType(r,c,"-end",["suiteUiProcessFlowLaneHeaderStartEndSymbol","suiteUiProcessFlowLaneHeaderEndSymbol"],["suiteUiProcessFlowLaneHeaderStartEndSymbolContainer","suiteUiProcessFlowLaneHeaderNoSelection"],false,c._isHeaderMode());break;case P.symbolType.processSymbol:this._writeSymbolNodeType(r,c,"-process",["suiteUiProcessFlowLaneHeaderProcessSymbol"],["suiteUiProcessFlowLaneHeaderProcessSymbolContainer","suiteUiProcessFlowLaneHeaderNoSelection"],true,c._isHeaderMode());break;default:this._writeDefaultNodeType(r,c);}};
a._writeSymbolNodeType=function(r,c,s,b,d,i){r.write("<div");r.writeControlData(c);d.forEach(function(f){r.addClass(e(f));});r.writeClasses();r.writeAttribute("role","separator");r.writeAttributeEscaped("aria-label",c._getSymbolAriaText());r.write(">");r.write("<div");r.writeAttributeEscaped("id",c.getId()+s);b.forEach(function(f){r.addClass(e(f));});r.writeClasses();r.write(">");if(i){var I=c.getIconSrc();if(I){var o=c._getImage(c.getId()+"-lh-icon",I);r.renderControl(o);}}r.write("</div>");r.write("</div>");};
a._writeDefaultNodeType=function(r,c){r.write("<div");r.writeControlData(c);r.addClass("suiteUiProcessFlowLaneHeaderContainer");r.addClass("suiteUiProcessFlowLaneHeaderNoSelection");r.writeClasses();r.write(">");r.write("<div");r.writeAttribute("id",c.getId()+"-standard");r.writeAttribute("role","img");var s=c._getAriaText();r.writeAttributeEscaped("aria-label",s);var l=c.getTooltip()?c.getTooltip():s;r.writeAttributeEscaped("title",l);r.addClass("suiteUiProcessFlowLaneHeaderBodyContainer");r.writeClasses();r.write(">");r.write("<div");r.writeAttribute("id",c.getId()+"-horizontal-line");r.addClass("suiteUiProcessFlowLaneHeaderHorizontalLine");r.writeClasses();r.write("></div>");r.write("<svg");r.writeAttribute("id",c.getId()+"-donut-chart");r.addClass("suiteUiProcessFlowLaneHeaderDonutSvg");r.writeClasses();r.write(">");c._renderDonutPercentages(r);r.write("</svg>");r.write("<div");r.writeAttribute("id",c.getId()+"-lh-icon-container");r.addClass("suiteUiProcessFlowLaneHeaderIconContainer");r.writeClasses();r.write(">");var i=c.getIconSrc();if(i){var I=c._getImage(c.getId()+"-lh-icon",i);I.addStyleClass("suiteUiProcessFlowLaneHeaderProcessSymbolIcon");r.renderControl(I);}r.write("</div>");r.write("</div>");r.write("<div");r.writeAttribute("id",c.getId()+"-lh-text-container");r.addClass("suiteUiProcessFlowLaneHeaderTextContainer");r.writeClasses();r.write(">");r.write("<span");r.writeAttribute("id",c.getId()+"-lh-text");r.addClass("suiteUiProcessFlowLaneHeaderText");r.writeClasses();r.writeAttribute("aria-hidden",true);r.write(">");r.writeEscaped(c.getText());r.write("</span>");r.write("</div>");r.write("</div>");};
return a;},true);
sap.ui.predefine('sap/suite/ui/commons/ProcessFlowNode',["sap/ui/thirdparty/jquery",'sap/m/Text','./library','sap/ui/core/Control','sap/ui/core/IconPool','sap/ui/Device','sap/ui/core/Icon',"sap/base/Log","./ProcessFlowNodeRenderer"],function(q,T,l,C,I,D,a,L,P){"use strict";
var b=C.extend("sap.suite.ui.commons.ProcessFlowNode",{metadata:{library:"sap.suite.ui.commons",properties:{title:{type:"string",group:"Misc",defaultValue:null},isTitleClickable:{type:"boolean",group:"Behavior",defaultValue:false,deprecated:true},laneId:{type:"string",group:"Misc",defaultValue:null},nodeId:{type:"string",group:"Misc",defaultValue:null},state:{type:"sap.suite.ui.commons.ProcessFlowNodeState",group:"Appearance",defaultValue:"Neutral"},type:{type:"sap.suite.ui.commons.ProcessFlowNodeType",group:"Appearance",defaultValue:"Single"},children:{type:"any[]",group:"Misc",defaultValue:null},titleAbbreviation:{type:"string",group:"Data",defaultValue:null},stateText:{type:"string",group:"Data",defaultValue:null},texts:{type:"string[]",group:"Misc",defaultValue:null},highlighted:{type:"boolean",group:"Appearance",defaultValue:false},focused:{type:"boolean",group:"Appearance",defaultValue:false},tag:{type:"object",group:"Misc",defaultValue:null},selected:{type:"boolean",group:"Appearance",defaultValue:false}},aggregations:{zoomLevelOneContent:{type:"sap.ui.core.Control",multiple:false,group:"Misc"},zoomLevelTwoContent:{type:"sap.ui.core.Control",multiple:false,group:"Misc"},zoomLevelThreeContent:{type:"sap.ui.core.Control",multiple:false,group:"Misc"},zoomLevelFourContent:{type:"sap.ui.core.Control",multiple:false,group:"Misc"},ariaProperties:{type:"sap.suite.ui.commons.AriaProperties",multiple:false,group:"Misc"}},associations:{parents:{type:"sap.suite.ui.commons.ProcessFlowNode",multiple:true,singularName:"parent"}},events:{titlePress:{deprecated:true,parameters:{oEvent:{type:"object"}}},press:{parameters:{oEvent:{type:"object"}}}}}});
b.prototype._zoomLevel=l.ProcessFlowZoomLevel.Two;b.prototype._tag=null;b.prototype._displayState=l.ProcessFlowDisplayState.Regular;b.prototype._oResBundle=null;b.prototype._mergedLaneId=null;b.prototype._foldedCorner=false;b.prototype._foldedCornerControl=null;b.prototype._parent=null;b.prototype._headerControl=null;b.prototype._stateTextControl=null;b.prototype._iconControl=null;b.prototype._text1Control=null;b.prototype._text2Control=null;b.prototype._navigationFocus=false;b.prototype._sMouseEvents=" mousedown mouseup mouseenter mouseleave ";b.prototype._sMouseTouchEvents=D.support.touch?'saptouchstart saptouchcancel touchstart touchend':'';if(D.browser.msie){b.prototype._grabCursorClass="sapSuiteUiGrabCursorIEPF";b.prototype._grabbingCursorClass="sapSuiteUiGrabbingCursorIEPF";}else{b.prototype._grabCursorClass="sapSuiteUiGrabCursorPF";b.prototype._grabbingCursorClass="sapSuiteUiGrabbingCursorPF";}b.prototype._nodeHoverClass="sapSuiteUiCommonsProcessFlowNodeHover";b.prototype._nodeActiveClass="sapSuiteUiCommonsProcessFlowNodeActive";b.prototype._nodePlannedClass="sapSuiteUiCommonsProcessFlowNodeStatePlanned";b.prototype._nodePlannedClassIdentifier="."+b.prototype._nodePlannedClass;b.prototype._nodeFCHoverClass="sapSuiteUiCommonsProcessFlowFoldedCornerNodeHover";b.prototype._nodeFCActiveClass="sapSuiteUiCommonsProcessFlowFoldedCornerNodeActive";b.prototype._nodeFCIconHoverClass="sapSuiteUiCommonsProcessFlowFoldedCornerNodeIconHover";b.prototype._nodeAggregatedClass="sapSuiteUiCommonsProcessFlowNodeAggregated";b.prototype._nodeAggregatedHoveredClass="sapSuiteUiCommonsProcessFlowNodeAggregatedHovered";b.prototype._nodeAggregatedDimmedClass="sapSuiteUiCommonsProcessFlowNodeAggregatedDimmed";b.prototype._nodeAggregatedFocusedClass="sapSuiteUiCommonsProcessFlowNodeAggregatedFocused";b.prototype._nodeAggregatedPressedClass="sapSuiteUiCommonsProcessFlowNodeAggregatedPressed";b.prototype._nodeAggregatedDimmedPressedClass="sapSuiteUiCommonsProcessFlowNodeAggregatedDimmedPressed";b.prototype._nodeAggregatedDimmedHoveredClass="sapSuiteUiCommonsProcessFlowNodeAggregatedDimmedHovered";b.prototype._nodeAggregatedClassZoomLevel4="sapSuiteUiCommonsProcessFlowNodeAggregatedZoomLevel4";b.prototype._nodeAggregatedHoveredClassZoomLevel4="sapSuiteUiCommonsProcessFlowNodeAggregatedHoveredZoomLevel4";b.prototype._nodeAggregatedPressedClassZoomLevel4="sapSuiteUiCommonsProcessFlowNodeAggregatedPressedZoomLevel4";b.prototype._nodeAggregatedDimmedClassZoomLevel4="sapSuiteUiCommonsProcessFlowNodeAggregatedDimmedZoomLevel4";b.prototype._nodeAggregatedFocusedClassZoomLevel4="sapSuiteUiCommonsProcessFlowNodeAggregatedFocusedZoomLevel4";b.prototype._nodeAggregatedDimmedPressedClassZoomLevel4="sapSuiteUiCommonsProcessFlowNodeAggregatedDimmedPressedZoomLevel4";b.prototype._nodeAggregatedDimmedHoveredClassZoomLevel4="sapSuiteUiCommonsProcessFlowNodeAggregatedDimmedHoveredZoomLevel4";
b.prototype.init=function(){I.addIcon("context-menu","businessSuite","PFBusinessSuiteInAppSymbols","e02b",true);if(!this._oResBundle){this._oResBundle=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");}};
b.prototype.exit=function(){if(this._foldedCornerControl){this._foldedCornerControl.destroy();this._foldedCornerControl=null;}if(this._headerControl){this._headerControl.destroy();this._headerControl=null;}if(this._stateTextControl){this._stateTextControl.destroy();this._stateTextControl=null;}if(this._iconControl){this._iconControl.destroy();this._iconControl=null;}if(this._text1Control){this._text1Control.destroy();this._text1Control=null;}if(this._text2Control){this._text2Control.destroy();this._text2Control=null;}this.$().unbind(this._sMouseEvents,this._handleEvents);if(D.support.touch){this.$().unbind(this._sMouseTouchEvents,this._handleEvents);}};
b.prototype.onBeforeRendering=function(){this.$().unbind(this._sMouseEvents,this._handleEvents);if(D.support.touch){this.$().unbind(this._sMouseTouchEvents,this._handleEvents);}};
b.prototype.onAfterRendering=function(){this._sMouseEvents=this._sMouseEvents.concat(' ',this._sMouseTouchEvents);this.$().bind(this._sMouseEvents,q.proxy(this._handleEvents,this));};
b.prototype._handleClick=function(e){if(this._parent&&this._parent._bHighlightedMode&&this._getDisplayState()===l.ProcessFlowDisplayState.Dimmed||this._getDisplayState()===l.ProcessFlowDisplayState.DimmedFocused){L.info("Event ignored, node in dimmed state.");}else if(this._parent){this.getParent()._changeNavigationFocus(this.getParent()._getLastNavigationFocusElement(),this);if(e.target.id.indexOf("title")>=0&&this.getIsTitleClickable()){this._parent.fireNodeTitlePress(this);}else{this._parent.fireNodePress(this);}}if(e&&!e.isPropagationStopped()){e.stopPropagation();}if(e&&!e.isImmediatePropagationStopped()){e.stopImmediatePropagation();}};
b.prototype.onclick=function(e){if(e&&!e.isDefaultPrevented()){e.preventDefault();}this._handleClick(e);};
b.prototype._handleEvents=function(e){var t=this.$().find('*');var $=this.$().attr('id');var i=this._getFoldedCorner();var s=this.getParent();if(e&&!e.isDefaultPrevented()){e.preventDefault();}if(this._parent&&this._parent._bHighlightedMode&&this._getDimmed()){return;}if(this.getType()===l.ProcessFlowNodeType.Aggregated){this._adjustClassesForAggregation(e);}var p=sap.ui.require("sap/suite/ui/commons/ProcessFlow");if(!p){return;}function c(d){return d.replace(/([:.\[\],=@])/g,"\\$1");}switch(e.type){case p._mouseEvents.mouseDown:case"keydown":this.$().removeClass(this._nodeHoverClass).addClass(this._nodeActiveClass);t.removeClass(this._nodeHoverClass).addClass(this._nodeActiveClass);if(i){q(document.getElementById($)).removeClass(this._nodeFCHoverClass+' '+this._nodeActiveClass).addClass(this._nodeFCActiveClass);q('div[id^='+c($)+'][id$=-corner-container]').removeClass(this._nodeFCIconHoverClass+' '+this._nodeActiveClass).addClass(this._nodeFCActiveClass);q('span[id^='+c($)+'][id$=-corner-icon]').removeClass(this._nodeFCIconHoverClass+' '+this._nodeActiveClass).addClass(this._nodeFCActiveClass);}break;case p._mouseEvents.mouseUp:if(s.$().hasClass(this._grabbingCursorClass)){s.$().removeClass(this._grabbingCursorClass);}this.$().removeClass(this._nodeActiveClass).addClass(this._nodeHoverClass);t.removeClass(this._nodeActiveClass).addClass(this._nodeHoverClass);if(i){q(document.getElementById($)).removeClass(this._nodeHoverClass+' '+this._nodeFCActiveClass).addClass(this._nodeFCHoverClass);q('div[id^='+c($)+'][id$=-corner-container]').removeClass(this._nodeHoverClass+' '+this._nodeFCActiveClass).addClass(this._nodeFCIconHoverClass);q('span[id^='+c($)+'][id$=-corner-icon]').removeClass(this._nodeHoverClass+' '+this._nodeFCActiveClass).addClass(this._nodeFCIconHoverClass);}break;case p._mouseEvents.mouseEnter:if(!s.$().hasClass(this._grabbingCursorClass)){this.$().addClass(this._nodeHoverClass);t.addClass(this._nodeHoverClass);this.$().find(this._nodePlannedClassIdentifier).find("*").addClass(this._nodePlannedClass);if(i){q(document.getElementById($)).removeClass(this._nodeHoverClass).addClass(this._nodeFCHoverClass);q('div[id^='+c($)+'][id$=-corner-container]').removeClass(this._nodeHoverClass).addClass(this._nodeFCIconHoverClass);q('span[id^='+c($)+'][id$=-corner-icon]').removeClass(this._nodeHoverClass).addClass(this._nodeFCIconHoverClass);}}break;case p._mouseEvents.mouseLeave:case"keyup":this.$().removeClass(this._nodeActiveClass+' '+this._nodeHoverClass);t.removeClass(this._nodeActiveClass+' '+this._nodeHoverClass);if(i){q(document.getElementById($)).removeClass(this._nodeFCActiveClass+' '+this._nodeFCHoverClass);q('div[id^='+c($)+'][id$=-corner-container]').removeClass(this._nodeFCActiveClass+' '+this._nodeFCIconHoverClass);q('span[id^='+c($)+'][id$=-corner-icon]').removeClass(this._nodeFCActiveClass+' '+this._nodeFCIconHoverClass);}if(!s.$().hasClass(this._grabbingCursorClass)){s.$().addClass(this._grabCursorClass);}break;case p._mouseEvents.touchStart:if(D.support.touch){this.$().addClass(this._nodeActiveClass);t.addClass(this._nodeActiveClass);if(i){q(document.getElementById($)).removeClass(this._nodeActiveClass).addClass(this._nodeFCActiveClass);q('div[id^='+c($)+'][id$=-corner-container]').removeClass(this._nodeActiveClass).addClass(this._nodeFCActiveClass);q('span[id^='+c($)+'][id$=-corner-icon]').removeClass(this._nodeActiveClass).addClass(this._nodeFCActiveClass);}}break;case p._mouseEvents.sapTouchStart:this.$().removeClass(this._nodeHoverClass).addClass(this._nodeActiveClass);t.removeClass(this._nodeHoverClass).addClass(this._nodeActiveClass);if(i){q(document.getElementById($)).removeClass(this._nodeFCHoverClass+' '+this._nodeActiveClass).addClass(this._nodeFCActiveClass);q('div[id^='+c($)+'][id$=-corner-container]').removeClass(this._nodeFCIconHoverClass+' '+this._nodeActiveClass).addClass(this._nodeFCActiveClass);q('span[id^='+c($)+'][id$=-corner-icon]').removeClass(this._nodeFCIconHoverClass+' '+this._nodeActiveClass).addClass(this._nodeFCActiveClass);}break;case p._mouseEvents.touchEnd:if(D.support.touch){this.$().removeClass(this._nodeActiveClass+' '+this._nodeHoverClass);t.removeClass(this._nodeActiveClass+' '+this._nodeHoverClass);if(i){q(document.getElementById($)).removeClass(this._nodeFCActiveClass+' '+this._nodeFCHoverClass);q('div[id^='+c($)+'][id$=-corner-container]').removeClass(this._nodeFCActiveClass+' '+this._nodeFCIconHoverClass);q('span[id^='+c($)+'][id$=-corner-icon]').removeClass(this._nodeFCActiveClass+' '+this._nodeFCIconHoverClass);}}this._handleClick(e);break;case p._mouseEvents.sapTouchCancel:this.$().removeClass(this._nodeActiveClass).addClass(this._nodeHoverClass);t.removeClass(this._nodeActiveClass).addClass(this._nodeHoverClass);if(i){q(document.getElementById($)).removeClass(this._nodeFCActiveClass+' '+this._nodeHoverClass).addClass(this._nodeFCHoverClass);q('div[id^='+c($)+'][id$=-corner-container]').removeClass(this._nodeFCActiveClass+' '+this._nodeHoverClass).addClass(this._nodeFCIconHoverClass);q('span[id^='+c($)+'][id$=-corner-icon]').removeClass(this._nodeFCActiveClass+' '+this._nodeHoverClass).addClass(this._nodeFCIconHoverClass);}break;default:break;}};
b.prototype._setMergedLaneId=function(c){this._mergedLaneId=c;};
b.prototype._setParentFlow=function(c){this._parent=c;};
b.prototype._getFoldedCornerControl=function(){if(this._foldedCornerControl){this._foldedCornerControl.destroy();}this._foldedCornerControl=new a({id:this.getId()+"-corner-icon",src:I.getIconURI("context-menu","businessSuite"),visible:true});if(this._parent&&!this._parent._bHighlightedMode||!this._getDimmed()){this._foldedCornerControl.addStyleClass("sapUiIconPointer");}switch(this._getZoomLevel()){case l.ProcessFlowZoomLevel.One:this._foldedCornerControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode1ZoomLevel1");break;case l.ProcessFlowZoomLevel.Two:this._foldedCornerControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode1ZoomLevel2");break;case l.ProcessFlowZoomLevel.Three:this._foldedCornerControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode1ZoomLevel3");break;case l.ProcessFlowZoomLevel.Four:this._foldedCornerControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode1ZoomLevel4");break;default:break;}this._foldedCornerControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode1");return this._foldedCornerControl;};
b.prototype._getHeaderControl=function(){if(this._headerControl){this._headerControl.destroy();}var i=0;var w="";var v=true;var t=this.getTitle();switch(this._getZoomLevel()){case l.ProcessFlowZoomLevel.One:i=3;break;case l.ProcessFlowZoomLevel.Two:i=3;break;case l.ProcessFlowZoomLevel.Three:i=2;t=this.getTitleAbbreviation();break;case l.ProcessFlowZoomLevel.Four:t="";i=0;w="0px";v=false;break;default:break;}this._headerControl=new T({id:this.getId()+"-nodeid-anchor-title",text:t,visible:v,wrapping:true,wrappingType:sap.m.WrappingType.Hyphenated,width:w,maxLines:i});if(this.getIsTitleClickable()){this._headerControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TitleClickable");}switch(this._getZoomLevel()){case l.ProcessFlowZoomLevel.One:this._headerControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TitleZoomLevel1");break;case l.ProcessFlowZoomLevel.Two:this._headerControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TitleZoomLevel2");break;case l.ProcessFlowZoomLevel.Three:this._headerControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TitleZoomLevel3");break;case l.ProcessFlowZoomLevel.Four:this._headerControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TitleZoomLevel4");break;default:break;}this._headerControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3Title");return this._headerControl;};
b.prototype._getIconControl=function(){if(this._iconControl){this._iconControl.destroy();}var s=null;var v=true;switch(this.getState()){case l.ProcessFlowNodeState.Positive:s="sap-icon://message-success";break;case l.ProcessFlowNodeState.Negative:case l.ProcessFlowNodeState.PlannedNegative:s="sap-icon://message-error";break;case l.ProcessFlowNodeState.Planned:s=null;break;case l.ProcessFlowNodeState.Neutral:s="sap-icon://process";break;case l.ProcessFlowNodeState.Critical:s="sap-icon://message-warning";break;default:break;}this._iconControl=new a({id:this.getId()+"-icon",src:s,visible:v});if(this._parent&&!this._parent._bHighlightedMode||!this._getDimmed()){this._iconControl.addStyleClass("sapUiIconPointer");}var r=sap.ui.getCore().getConfiguration().getRTL();if(r){this._iconControl.addStyleClass("sapUiIconSuppressMirrorInRTL");}switch(this._getZoomLevel()){case l.ProcessFlowZoomLevel.One:case l.ProcessFlowZoomLevel.Two:var i="sapSuiteUiCommonsProcessFlowNode3StateIconLeft";if(r){i="sapSuiteUiCommonsProcessFlowNode3StateIconRight";}this._iconControl.addStyleClass(i);break;case l.ProcessFlowZoomLevel.Three:case l.ProcessFlowZoomLevel.Four:this._iconControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateIconCenter");break;default:break;}switch(this._getZoomLevel()){case l.ProcessFlowZoomLevel.One:this._iconControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateIconZoomLevel1");break;case l.ProcessFlowZoomLevel.Two:this._iconControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateIconZoomLevel2");break;case l.ProcessFlowZoomLevel.Three:this._iconControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateIconZoomLevel3");break;case l.ProcessFlowZoomLevel.Four:this._iconControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateIconZoomLevel4");break;default:break;}this._iconControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateIcon");return this._iconControl;};
b.prototype._getStateTextControl=function(){if(this._stateTextControl){this._stateTextControl.destroy();}var i=2;var w="";var v=true;var s=this.getState();var t=(s===l.ProcessFlowNodeState.Planned)?"":this.getStateText();if(s===l.ProcessFlowNodeState.PlannedNegative&&t.length===0){t="Planned Negative";}switch(this._getZoomLevel()){case l.ProcessFlowZoomLevel.One:case l.ProcessFlowZoomLevel.Two:case l.ProcessFlowZoomLevel.Three:i=2;break;case l.ProcessFlowZoomLevel.Four:t="";i=0;w="0px";v=false;break;default:break;}this._stateTextControl=new T({id:this.getId()+"-stateText",text:t,visible:v,wrapping:true,wrappingType:sap.m.WrappingType.Hyphenated,width:w,maxLines:i});switch(s){case l.ProcessFlowNodeState.Positive:this._stateTextControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StatePositive");break;case l.ProcessFlowNodeState.Negative:this._stateTextControl.addStyleClass("sapSuiteUiCommonsProcessFlowNodeStateNegative");break;case l.ProcessFlowNodeState.Planned:this._stateTextControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StatePlanned");break;case l.ProcessFlowNodeState.Neutral:this._stateTextControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateNeutral");break;case l.ProcessFlowNodeState.PlannedNegative:this._stateTextControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StatePlanned");break;case l.ProcessFlowNodeState.Critical:this._stateTextControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateCritical");break;default:break;}switch(this._getZoomLevel()){case l.ProcessFlowZoomLevel.One:this._stateTextControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateTextZoomLevel1");break;case l.ProcessFlowZoomLevel.Two:this._stateTextControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateTextZoomLevel2");break;case l.ProcessFlowZoomLevel.Three:this._stateTextControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateTextZoomLevel3");break;case l.ProcessFlowZoomLevel.Four:this._stateTextControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateTextZoomLevel4");break;default:break;}this._stateTextControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateText");return this._stateTextControl;};
b.prototype._getZoomLevel=function(){return this._zoomLevel;};
b.prototype._setZoomLevel=function(z){this._zoomLevel=z;};
b.prototype._setNavigationFocus=function(n){this._navigationFocus=n;};
b.prototype._getNavigationFocus=function(){return this._navigationFocus;};
b.prototype._setFoldedCorner=function(f){this._foldedCorner=f;};
b.prototype._getFoldedCorner=function(){return this._foldedCorner;};
b.prototype._setTag=function(n){this._tag=n;};
b.prototype._getTag=function(){return this._tag;};
b.prototype._setDimmedState=function(){var i=this.getFocused();var c=this.getHighlighted();var d=this.getSelected();if(c||d){throw new Error("Cannot set highlighed or selected node to dimmed state"+this.getNodeId());}this._displayState=l.ProcessFlowDisplayState.Dimmed;if(i){this._displayState=l.ProcessFlowDisplayState.DimmedFocused;}};
b.prototype._setRegularState=function(){this._displayState=l.ProcessFlowDisplayState.Regular;};
b.prototype._getLane=function(){var p=this.getParent();var o=null;if(p){o=p._getLane(this.getLaneId());}return o;};
b.prototype._getDimmed=function(){return this._displayState===l.ProcessFlowDisplayState.Dimmed||this._displayState===l.ProcessFlowDisplayState.DimmedFocused;};
b.prototype._getAriaText=function(){var p=this.getParents().length;var c=this._getCurrentZoomLevelContent();var d=0;if(this._hasChildren()){d=this.getChildren().length;}var s="";var o=this._getLane();if(o){s=o.getText();if(!s){s=this._oResBundle.getText('PF_VALUE_UNDEFINED');}}var e="";var f=this.getTexts();if(f){for(var i in f){if(f[i]){var v=f[i].concat(", ");e=e.concat(v);}}e=e.slice(0,-1);}var t=this.getTitle();if(!t&&!c){t=this._oResBundle.getText('PF_VALUE_UNDEFINED');}var S=this.getState();if(!S){S=this._oResBundle.getText('PF_VALUE_UNDEFINED');}var g=this.getStateText();if(this.getState()===l.ProcessFlowNodeState.Planned){g="";}var A="";if(this.getType()===l.ProcessFlowNodeType.Aggregated){A=this._oResBundle.getText("PF_ARIA_TYPE");}return this._oResBundle.getText('PF_ARIA_NODE',[t,S,g,s,e,p,d,A]);};
b.prototype._getDisplayState=function(){var i=this.getFocused();var c=this.getHighlighted();var d=this.getSelected();if(this._displayState===l.ProcessFlowDisplayState.Dimmed||this._displayState===l.ProcessFlowDisplayState.DimmedFocused){return this._displayState;}if(d){if(c){if(i){this._displayState=l.ProcessFlowDisplayState.SelectedHighlightedFocused;}else{this._displayState=l.ProcessFlowDisplayState.SelectedHighlighted;}}else if(i){this._displayState=l.ProcessFlowDisplayState.SelectedFocused;}else{this._displayState=l.ProcessFlowDisplayState.Selected;}}else if(i&&c){this._displayState=l.ProcessFlowDisplayState.HighlightedFocused;}else if(i){this._displayState=l.ProcessFlowDisplayState.RegularFocused;}else if(c){this._displayState=l.ProcessFlowDisplayState.Highlighted;}else if(this._displayState===l.ProcessFlowDisplayState.HighlightedFocused||this._displayState===l.ProcessFlowDisplayState.RegularFocused||this._displayState===l.ProcessFlowDisplayState.Highlighted||this._displayState===l.ProcessFlowDisplayState.Selected){this._setRegularState();}return this._displayState;};
b.prototype._createTextControlInternal=function(t,c,o){if(o){o.destroy();}var i=2;var w="";var v=true;var s=c;switch(this._getZoomLevel()){case l.ProcessFlowZoomLevel.One:case l.ProcessFlowZoomLevel.Two:i=2;break;case l.ProcessFlowZoomLevel.Three:i=0;w="0px";v=false;break;case l.ProcessFlowZoomLevel.Four:s="";i=0;w="0px";v=false;break;default:break;}if(this.getState){o=new T({id:this.getId()+t,text:s,visible:v,wrapping:true,wrappingType:sap.m.WrappingType.Hyphenated,width:w,maxLines:i});}return o;};
b.prototype._createText1Control=function(){var t=this.getTexts();if(t&&t.length>0){t=t[0];}this._text1Control=this._createTextControlInternal("-text1-control",t,this._text1Control);switch(this._getZoomLevel()){case l.ProcessFlowZoomLevel.One:this._text1Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TextWithGapZoomLevel1");this._text1Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel1");break;case l.ProcessFlowZoomLevel.Two:this._text1Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TextWithGapZoomLevel2");this._text1Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel2");break;case l.ProcessFlowZoomLevel.Three:this._text1Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel3");break;case l.ProcessFlowZoomLevel.Four:this._text1Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel4");break;default:break;}this._text1Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3Text");return this._text1Control;};
b.prototype._createText2Control=function(){var t=this.getTexts();if(t&&t.length>1){t=t[1];}else{t="";}this._text2Control=this._createTextControlInternal("-text2-control",t,this._text2Control);switch(this._getZoomLevel()){case l.ProcessFlowZoomLevel.One:this._text2Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel1");break;case l.ProcessFlowZoomLevel.Two:this._text2Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel2");break;case l.ProcessFlowZoomLevel.Three:this._text2Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel3");break;case l.ProcessFlowZoomLevel.Four:this._text2Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel4");break;default:break;}this._text2Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3Text");return this._text2Control;};
b.prototype._adjustClassesForAggregation=function(e){var f=[l.ProcessFlowDisplayState.RegularFocused,l.ProcessFlowDisplayState.HighlightedFocused,l.ProcessFlowDisplayState.DimmedFocused];var d=[l.ProcessFlowDisplayState.DimmedFocused,l.ProcessFlowDisplayState.Dimmed];var p=sap.ui.require("sap/suite/ui/commons/ProcessFlow");if(!p){return;}switch(e.type){case p._mouseEvents.mouseDown:case p._mouseEvents.touchStart:case p._mouseEvents.sapTouchStart:c(this);break;case p._mouseEvents.mouseUp:r(this);break;case p._mouseEvents.sapTouchCancel:case p._mouseEvents.touchEnd:r(this);h(this);break;case p._mouseEvents.mouseEnter:g(this);break;case p._mouseEvents.mouseLeave:r(this);h(this);break;default:break;}function c(t){if(t._getZoomLevel()===l.ProcessFlowZoomLevel.Four){if(d&&(Array.prototype.indexOf.call(d,t._getDisplayState()))>=0){t.$().removeClass(t._nodeAggregatedDimmedHoveredClassZoomLevel4).addClass(t._nodeAggregatedDimmedPressedClassZoomLevel4);}else{t.$().removeClass(t._nodeAggregatedClassZoomLevel4).removeClass(t._nodeAggregatedHoveredClassZoomLevel4).addClass(t._nodeAggregatedPressedClassZoomLevel4);}}else if(d&&(Array.prototype.indexOf.call(d,t._getDisplayState()))>=0){t.$().removeClass(t._nodeAggregatedDimmedHoveredClass).addClass(t._nodeAggregatedDimmedPressedClass);}else{t.$().removeClass(t._nodeAggregatedClass).removeClass(t._nodeAggregatedHoveredClass).addClass(t._nodeAggregatedPressedClass);}}function r(t){if(f&&(Array.prototype.indexOf.call(f,t._getDisplayState()))>=0&&(t.$().hasClass(t._nodeAggregatedPressedClass)||t.$().hasClass(t._nodeAggregatedPressedClassZoomLevel4))){if(t._getZoomLevel()===l.ProcessFlowZoomLevel.Four){t.$().removeClass(t._nodeAggregatedPressedClassZoomLevel4).addClass(t._nodeAggregatedFocusedClassZoomLevel4);}else{t.$().removeClass(t._nodeAggregatedPressedClass).addClass(t._nodeAggregatedFocusedClass);}}else if(t.$().hasClass(t._nodeAggregatedDimmedPressedClass)||t.$().hasClass(t._nodeAggregatedDimmedPressedClassZoomLevel4)){if(t._getZoomLevel()===l.ProcessFlowZoomLevel.Four){t.$().removeClass(t._nodeAggregatedDimmedPressedClassZoomLevel4).addClass(t._nodeAggregatedDimmedHoveredClassZoomLevel4);}else{t.$().removeClass(t._nodeAggregatedDimmedPressedClass).addClass(t._nodeAggregatedDimmedHoveredClass);}}else if(t.$().hasClass(t._nodeAggregatedPressedClass)||t.$().hasClass(t._nodeAggregatedPressedClassZoomLevel4)){if(t._getZoomLevel()===l.ProcessFlowZoomLevel.Four){t.$().removeClass(t._nodeAggregatedPressedClassZoomLevel4).addClass(t._nodeAggregatedClassZoomLevel4);}else{t.$().removeClass(t._nodeAggregatedPressedClass).addClass(t._nodeAggregatedClass);}}}function g(t){if(d&&(Array.prototype.indexOf.call(d,t._getDisplayState()))>=0){if(t._getZoomLevel()===l.ProcessFlowZoomLevel.Four){t.$().removeClass(t._nodeAggregatedDimmedClassZoomLevel4).addClass(t._nodeAggregatedDimmedHoveredClassZoomLevel4);}else{t.$().removeClass(t._nodeAggregatedDimmedClass).addClass(t._nodeAggregatedDimmedHoveredClass);}}else if(t._getZoomLevel()===l.ProcessFlowZoomLevel.Four){t.$().addClass(t._nodeAggregatedHoveredClassZoomLevel4);}else{t.$().addClass(t._nodeAggregatedHoveredClass);}}function h(t){if(d&&(Array.prototype.indexOf.call(d,t._getDisplayState()))>=0){if(t._getZoomLevel()===l.ProcessFlowZoomLevel.Four){t.$().removeClass(t._nodeAggregatedDimmedHoveredClassZoomLevel4).addClass(t._nodeAggregatedDimmedClassZoomLevel4);}else{t.$().removeClass(t._nodeAggregatedDimmedHoveredClass).addClass(t._nodeAggregatedDimmedClass);}}else if(t._getZoomLevel()===l.ProcessFlowZoomLevel.Four){t.$().removeClass(t._nodeAggregatedHoveredClassZoomLevel4);}else{t.$().removeClass(t._nodeAggregatedHoveredClass);}}};
b.prototype._hasChildren=function(){var c=this.getChildren();return c&&c.length>0;};
b.prototype._hasChildrenWithNodeId=function(c){var d=this.getChildren();if(d&&d.length>0){for(var i=0;i<d.length;i++){if((typeof d[i]==='object'&&d[i].nodeId===c)||d[i]===c){return true;}}}return false;};
b.prototype.getLaneId=function(){if(this._mergedLaneId){return this._mergedLaneId;}else{return this.getProperty("laneId");}};
b.prototype._getCurrentZoomLevelContent=function(){var p=this.getParent();if(!p||p.getMetadata().getName()!=="sap.suite.ui.commons.ProcessFlow"){return null;}return this["getZoomLevel"+p.getZoomLevel()+"Content"]();};
return b;});
sap.ui.predefine('sap/suite/ui/commons/ProcessFlowNodeRenderer',['./library','sap/ui/Device',"sap/base/security/encodeXML"],function(l,D,e){"use strict";var P={};P._constants={top:"top",right:"right",bottom:"bottom",left:"left",corner:"corner"};P._nodeLevels={iLevel0:0,iLevel1:1,iLevel2:2,iLevel3:3};
P.render=function(r,c){var f=null;var C=c._getCurrentZoomLevelContent();if(c._getFoldedCorner()){f=c._getFoldedCornerControl();}var h=c._getHeaderControl();var i=c._getIconControl();var s=c._getStateTextControl();var t=c._createText1Control();var T=c._createText2Control();r.write("<div");r.writeControlData(c);if(C){r.addClass("sapSuiteUiCommonsProcessFlowNodeCustom");}P._assignNodeClasses(r,c,0);r.write(">");switch(c._getDisplayState()){case l.ProcessFlowDisplayState.Highlighted:case l.ProcessFlowDisplayState.HighlightedFocused:case l.ProcessFlowDisplayState.SelectedHighlighted:case l.ProcessFlowDisplayState.SelectedHighlightedFocused:r.write("<div");P._assignShadowClasses(r,c,"top");r.write("></div>");r.write("<div");P._assignShadowClasses(r,c,"right");r.write("></div>");r.write("<div");P._assignShadowClasses(r,c,"bottom");r.write("></div>");r.write("<div");P._assignShadowClasses(r,c,"left");r.write("></div>");if(c._getFoldedCorner()){r.write("<div");P._assignShadowClasses(r,c,"corner");r.write("></div>");}break;default:}r.write("<div");P._assignNodeClasses(r,c,1);r.write(">");if(c._getFoldedCorner()){r.renderControl(f);}r.write("</div>");r.write("<div");P._assignNodeClasses(r,c,2);r.write(">");r.write("</div>");r.write("<div");P._assignNodeClasses(r,c,3);r.write(">");if(C){r.write("<div");r.addClass("sapSuiteUiCommonsProcessFlowNode3ContentPadding");r.writeClasses();r.write(">");r.renderControl(C);r.write("</div>");}else{r.write("<div");P._assignNodeTitleClasses(r,c);r.write(">");r.renderControl(h);r.write("</div>");r.write("<div");P._assignNodeStateClasses(r,c);r.write(">");r.write("<div");P._assignNodeIconClasses(r,c);r.write(">");r.renderControl(i);r.write("</div>");r.write("<div");P._assignNodeStateTextClasses(r,c);r.write(">");r.renderControl(s);r.write("</div>");r.write("</div>");r.write("<div");P._assignNodeText1Classes(r,c);r.write(">");r.renderControl(t);r.write("</div>");r.write("<div");P._assignNodeText2Classes(r,c);r.write(">");r.renderControl(T);r.write("</div>");r.write("</div>");}r.write("</div>");};
P._assignNodeClasses=function(r,c,n){switch(n){case P._nodeLevels.iLevel0:break;case P._nodeLevels.iLevel1:r.writeAttribute("id",c.getId()+"-corner-container");break;case P._nodeLevels.iLevel2:r.writeAttribute("id",c.getId()+"-top-container");break;case P._nodeLevels.iLevel3:r.writeAttribute("id",c.getId()+"-content-container");break;default:}if(n>P._nodeLevels.iLevel0){switch(c.getState()){case l.ProcessFlowNodeState.Planned:if((n===P._nodeLevels.iLevel1)&&(c._getFoldedCorner())){r.addClass("sapSuiteUiCommonsProcessFlowFoldedCornerPlanned");}else{r.addClass("sapSuiteUiCommonsProcessFlowNodeStatePlanned");r.addClass("sapSuiteUiCommonsProcessFlowNodeStatePlannedDashedBorder");}break;case l.ProcessFlowNodeState.PlannedNegative:if((n===P._nodeLevels.iLevel1)&&(c._getFoldedCorner())){r.addClass("sapSuiteUiCommonsProcessFlowFoldedCornerPlanned");}else{r.addClass("sapSuiteUiCommonsProcessFlowNodeStatePlanned");r.addClass("sapSuiteUiCommonsProcessFlowNodeStatePlannedDashedBorder");}break;default:}if(c._getNavigationFocus()){r.addClass("sapSuiteUiCommonsProcessFlowFoldedCornerDisplayStateNavigation");}switch(c._getDisplayState()){case l.ProcessFlowDisplayState.RegularFocused:case l.ProcessFlowDisplayState.HighlightedFocused:case l.ProcessFlowDisplayState.DimmedFocused:case l.ProcessFlowDisplayState.SelectedHighlightedFocused:case l.ProcessFlowDisplayState.SelectedFocused:if((n===P._nodeLevels.iLevel1)&&(c._getFoldedCorner())){r.addClass("sapSuiteUiCommonsProcessFlowFoldedCornerDisplayStateFocused");}else{r.addClass("sapSuiteUiCommonsProcessFlowNodeDisplayStateFocused");}break;default:}switch(c._getDisplayState()){case l.ProcessFlowDisplayState.Regular:case l.ProcessFlowDisplayState.RegularFocused:case l.ProcessFlowDisplayState.Selected:if((n===P._nodeLevels.iLevel1)&&(c._getFoldedCorner())){r.addClass("sapSuiteUiCommonsProcessFlowFoldedCornerDisplayStateRegular");}else{r.addClass("sapSuiteUiCommonsProcessFlowNodeDisplayStateRegular");}break;case l.ProcessFlowDisplayState.Highlighted:case l.ProcessFlowDisplayState.HighlightedFocused:case l.ProcessFlowDisplayState.SelectedHighlighted:case l.ProcessFlowDisplayState.SelectedHighlightedFocused:if(n===P._nodeLevels.iLevel1&&c._getFoldedCorner()){r.addClass("sapSuiteUiCommonsProcessFlowFoldedCornerDisplayStateHighlighted");}else{r.addClass("sapSuiteUiCommonsProcessFlowNodeDisplayStateHighlighted");}break;case l.ProcessFlowDisplayState.Dimmed:case l.ProcessFlowDisplayState.DimmedFocused:if(n===P._nodeLevels.iLevel1&&c._getFoldedCorner()){r.addClass("sapSuiteUiCommonsProcessFlowFoldedCornerDisplayStateDimmed");}else{r.addClass("sapSuiteUiCommonsProcessFlowNodeDisplayStateDimmed");}break;default:}}if(n===P._nodeLevels.iLevel0){if(c._getNavigationFocus()){r.addClass("sapSuiteUiCommonsProcessFlowFoldedCornerDisplayStateNavigation");}if(c._getDisplayState()===l.ProcessFlowDisplayState.Highlighted){r.addClass("sapSuiteUiCommonsProcessFlowNodeDisplayStateHighlighted");}if(c.getType()===l.ProcessFlowNodeType.Aggregated){P._assignAggregatedNodeClasses(r,c);}}switch(c._getZoomLevel()){case l.ProcessFlowZoomLevel.One:r.addClass(e("sapSuiteUiCommonsProcessFlowNode"+n+"ZoomLevel1"));break;case l.ProcessFlowZoomLevel.Two:r.addClass(e("sapSuiteUiCommonsProcessFlowNode"+n+"ZoomLevel2"));break;case l.ProcessFlowZoomLevel.Three:r.addClass(e("sapSuiteUiCommonsProcessFlowNode"+n+"ZoomLevel3"));break;case l.ProcessFlowZoomLevel.Four:r.addClass(e("sapSuiteUiCommonsProcessFlowNode"+n+"ZoomLevel4"));break;default:}if(n===P._nodeLevels.iLevel1){if(c._getFoldedCorner()){r.addClass("sapSuiteUiCommonsProcessFlowNode1FoldedBorderStyle");}else{r.addClass("sapSuiteUiCommonsProcessFlowNode1BorderStyle");r.addClass("sapSuiteUiCommonsProcessFlowNodeBorderStandard");}}else if(n>P._nodeLevels.iLevel1){r.addClass(e("sapSuiteUiCommonsProcessFlowNode"+n+"BorderStyle"));r.addClass("sapSuiteUiCommonsProcessFlowNodeBorderStandard");}if(((n===P._nodeLevels.iLevel1)&&(c._getFoldedCorner()))){r.addClass("sapSuiteUiCommonsProcessFlowFoldedCornerNode1");}else{r.addClass(e("sapSuiteUiCommonsProcessFlowNode"+n));}if(((n===P._nodeLevels.iLevel0)&&(c._getFoldedCorner()))){r.addClass("sapSuiteUiCommonsProcessFlowFoldedCornerIndication");}r.writeClasses();};
P._assignAggregatedNodeClasses=function(r,c){switch(c._getDisplayState()){case l.ProcessFlowDisplayState.Highlighted:case l.ProcessFlowDisplayState.Regular:case l.ProcessFlowDisplayState.Selected:if(c._getZoomLevel()===l.ProcessFlowZoomLevel.Four){r.addClass("sapSuiteUiCommonsProcessFlowNodeAggregatedZoomLevel4");}else{r.addClass("sapSuiteUiCommonsProcessFlowNodeAggregated");}break;case l.ProcessFlowDisplayState.Dimmed:if(c._getZoomLevel()===l.ProcessFlowZoomLevel.Four){r.addClass("sapSuiteUiCommonsProcessFlowNodeAggregatedDimmedZoomLevel4");}else{r.addClass("sapSuiteUiCommonsProcessFlowNodeAggregatedDimmed");}break;default:if(c._getZoomLevel()===l.ProcessFlowZoomLevel.Four){r.addClass("sapSuiteUiCommonsProcessFlowNodeAggregatedFocusedZoomLevel4");}else{r.addClass("sapSuiteUiCommonsProcessFlowNodeAggregatedFocused");}break;}};
P._assignShadowClasses=function(r,c,b){r.addClass("sapSuiteUiCommonsShadowedDivCommon");switch(b){case P._constants.top:if(c._getFoldedCorner()){r.addClass("sapSuiteUiCommonsShadowedDivFoldedCornerBorderTop");}else{r.addClass("sapSuiteUiCommonsShadowedDivBorderTop");}break;case P._constants.right:r.addClass("sapSuiteUiCommonsShadowedDivBorderRight");break;case P._constants.bottom:r.addClass("sapSuiteUiCommonsShadowedDivBorderBottom");break;case P._constants.left:if(c._getFoldedCorner()){r.addClass("sapSuiteUiCommonsShadowedDivFoldedCornerBorderLeft");}else{r.addClass("sapSuiteUiCommonsShadowedDivBorderLeft");}break;case P._constants.corner:if(D.browser.safari){r.addClass("sapSuiteUiCommonsShadowedDivFoldedCornerSafari");}else{r.addClass("sapSuiteUiCommonsShadowedDivFoldedCorner");}break;default:}r.writeClasses();};
P._assignNodeTitleClasses=function(r,c){r.writeAttribute("id",c.getId()+"-title");switch(c._getZoomLevel()){case l.ProcessFlowZoomLevel.One:r.addClass("sapSuiteUiCommonsProcessFlowNode3TitleZoomLevel1");break;case l.ProcessFlowZoomLevel.Two:r.addClass("sapSuiteUiCommonsProcessFlowNode3TitleZoomLevel2");break;case l.ProcessFlowZoomLevel.Three:r.addClass("sapSuiteUiCommonsProcessFlowNode3TitleZoomLevel3");break;case l.ProcessFlowZoomLevel.Four:r.addClass("sapSuiteUiCommonsProcessFlowNode3TitleZoomLevel4");break;default:}r.addClass("sapSuiteUiCommonsProcessFlowNode3Title");r.writeClasses();};
P._assignNodeStateClasses=function(r,c){r.writeAttribute("id",c.getId()+"-state");switch(c._getZoomLevel()){case l.ProcessFlowZoomLevel.One:r.addClass("sapSuiteUiCommonsProcessFlowNode3StateZoomLevel1");break;case l.ProcessFlowZoomLevel.Two:r.addClass("sapSuiteUiCommonsProcessFlowNode3StateZoomLevel2");break;case l.ProcessFlowZoomLevel.Three:r.addClass("sapSuiteUiCommonsProcessFlowNode3StateZoomLevel3");break;case l.ProcessFlowZoomLevel.Four:r.addClass("sapSuiteUiCommonsProcessFlowNode3StateZoomLevel4");break;default:}r.addClass("sapSuiteUiCommonsProcessFlowNode3State");r.writeClasses();};
P._assignNodeIconClasses=function(r,c){r.writeAttribute("id",c.getId()+"-icon-container");switch(c.getState()){case l.ProcessFlowNodeState.Positive:r.addClass("sapSuiteUiCommonsProcessFlowNodeStatePositive");break;case l.ProcessFlowNodeState.Negative:r.addClass("sapSuiteUiCommonsProcessFlowNodeStateNegative");break;case l.ProcessFlowNodeState.Planned:r.addClass("sapSuiteUiCommonsProcessFlowNodeStatePlanned");break;case l.ProcessFlowNodeState.Neutral:r.addClass("sapSuiteUiCommonsProcessFlowNodeStateNeutral");break;case l.ProcessFlowNodeState.PlannedNegative:r.addClass("sapSuiteUiCommonsProcessFlowNodeStateNegative");break;case l.ProcessFlowNodeState.Critical:r.addClass("sapSuiteUiCommonsProcessFlowNodeStateCritical");break;default:}switch(c._getZoomLevel()){case l.ProcessFlowZoomLevel.One:r.addClass("sapSuiteUiCommonsProcessFlowNode3StateIconZoomLevel1");break;case l.ProcessFlowZoomLevel.Two:r.addClass("sapSuiteUiCommonsProcessFlowNode3StateIconZoomLevel2");break;case l.ProcessFlowZoomLevel.Three:r.addClass("sapSuiteUiCommonsProcessFlowNode3StateIconZoomLevel3");break;case l.ProcessFlowZoomLevel.Four:r.addClass("sapSuiteUiCommonsProcessFlowNode3StateIconZoomLevel4");break;default:}r.addClass("sapSuiteUiCommonsProcessFlowNode3StateIcon");r.writeClasses();};
P._assignNodeStateTextClasses=function(r,c){r.writeAttribute("id",c.getId()+"-state-text");switch(c.getState()){case l.ProcessFlowNodeState.Positive:r.addClass("sapSuiteUiCommonsProcessFlowNodeStatePositive");break;case l.ProcessFlowNodeState.Negative:r.addClass("sapSuiteUiCommonsProcessFlowNodeStateNegative");break;case l.ProcessFlowNodeState.Planned:r.addClass("sapSuiteUiCommonsProcessFlowNodeStatePlanned");break;case l.ProcessFlowNodeState.Neutral:r.addClass("sapSuiteUiCommonsProcessFlowNodeStateNeutral");break;case l.ProcessFlowNodeState.PlannedNegative:r.addClass("sapSuiteUiCommonsProcessFlowNodeStateNegative");break;case l.ProcessFlowNodeState.Critical:r.addClass("sapSuiteUiCommonsProcessFlowNodeStateCritical");break;default:}switch(c._getZoomLevel()){case l.ProcessFlowZoomLevel.One:r.addClass("sapSuiteUiCommonsProcessFlowNode3StateTextZoomLevel1");break;case l.ProcessFlowZoomLevel.Two:r.addClass("sapSuiteUiCommonsProcessFlowNode3StateTextZoomLevel2");break;case l.ProcessFlowZoomLevel.Three:r.addClass("sapSuiteUiCommonsProcessFlowNode3StateTextZoomLevel3");break;case l.ProcessFlowZoomLevel.Four:r.addClass("sapSuiteUiCommonsProcessFlowNode3StateTextZoomLevel4");break;default:}r.addClass("sapSuiteUiCommonsProcessFlowNode3StateText");r.writeClasses();};
P._assignNodeText1Classes=function(r,c){r.writeAttribute("id",c.getId()+"-text1");switch(c._getZoomLevel()){case l.ProcessFlowZoomLevel.One:r.addClass("sapSuiteUiCommonsProcessFlowNode3TextWithGapZoomLevel1");r.addClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel1");break;case l.ProcessFlowZoomLevel.Two:r.addClass("sapSuiteUiCommonsProcessFlowNode3TextWithGapZoomLevel2");r.addClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel2");break;case l.ProcessFlowZoomLevel.Three:r.addClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel3");break;case l.ProcessFlowZoomLevel.Four:r.addClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel4");break;default:}r.addClass("sapSuiteUiCommonsProcessFlowNode3Text");r.writeClasses();};
P._assignNodeText2Classes=function(r,c){r.writeAttribute("id",c.getId()+"-text2");switch(c._getZoomLevel()){case l.ProcessFlowZoomLevel.One:r.addClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel1");break;case l.ProcessFlowZoomLevel.Two:r.addClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel2");break;case l.ProcessFlowZoomLevel.Three:r.addClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel3");break;case l.ProcessFlowZoomLevel.Four:r.addClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel4");break;default:}r.addClass("sapSuiteUiCommonsProcessFlowNode3Text");r.writeClasses();};
return P;},true);
sap.ui.predefine('sap/suite/ui/commons/ProcessFlowRenderer',["sap/ui/thirdparty/jquery",'./library','./ProcessFlowLaneHeader','./AriaProperties','sap/ui/Device',"sap/base/security/encodeXML"],function(q,l,P,A,D,e){"use strict";var a=l.ProcessFlowZoomLevel;var b={};
b.render=function(r,c){var s=this._getZoomStyleClass(c),C,L,i,p=b,d,o;o=p._renderBasicStructure(r,c);if(o){return;}try{C=c._getOrCreateProcessFlow();L=c._getOrCreateLaneMap();d=c._getConnectionsMap();}catch(f){c._handleException(f);return;}r.write("<table");r.writeAttribute("id",c.getId()+"-table");r.writeAttributeEscaped("aria-label",c._getAriaText());r.addClass("sapSuiteUiCommonsPF");r.addClass(e(s));r.writeClasses();r.write(">");i=Object.keys(L).length;p._renderTableHeader(r,c,L,i);p._renderTableBody(r,c,i,C,d);r.write("</table>");r.write("</div>");r.write("</div>");this._writeCounter(r,c,"Right");r.renderControl(c._getScrollingArrow("right"));r.write("</div>");};
b._renderNormalNodeHeader=function(r,c,n,d,f){r.write("<th scope='colgroup' colspan=\"3\">");r.renderControl(n);r.write("</th>");if(d<f-1){r.write("<th scope='colgroup' colspan=\"2\">");var L=P.createNewProcessSymbol(c._isHeaderMode());L.attachPress(q.proxy(c.ontouchend,c));r.renderControl(L);r.write("</th>");}};
b._renderMergedNodeHeader=function(r,c,n,d,f,g){var N=c._mergeLaneIdNodeStates(f);n.setState(N);d++;var h=d*3+(d-1)*2;r.write("<th scope='colgroup' colspan=\""+h+"\">");r.renderControl(n);r.write("</th>");if(g){r.write("<th scope='colgroup' colspan=\"2\">");var L=P.createNewProcessSymbol(c._isHeaderMode());L.attachPress(q.proxy(c.ontouchend,c));r.renderControl(L);r.write("</th>");}};
b._renderNode=function(r,c,n,i){if(i){var N=n.getId()+"-node";var C=n._getCurrentZoomLevelContent();r.writeAttribute("id",N);r.writeAttribute("tabindex",0);var o={};o.label=n._getAriaText();if(C){o.labelledBy=N+" "+C.getId();}A.writeAriaProperties(r,o,n.getAriaProperties());r.write(">");i=false;}n._setParentFlow(c);n._setZoomLevel(c.getZoomLevel());n._setFoldedCorner(c.getFoldedCorners());r.renderControl(n);return i;};
b._renderConnection=function(r,c,d,i){if(i){if(d.getAggregation("_labels")&&d.getAggregation("_labels").length>0){r.writeAttribute("tabindex",0);}r.write(">");i=false;}d.setZoomLevel(c.getZoomLevel());c.addAggregation("_connections",d);r.renderControl(d);return i;};
b._renderTableHeader=function(r,c,d,f){var L,n=null,N=null,o,g;r.write("<thead");r.writeAttribute("id",c.getId()+"-thead");r.write(">");r.write("<tr");r.addClass("sapSuiteUiCommonsPFHeader");r.addClass("sapSuiteUiCommonsPFHeaderHidden");if(c.getShowLabels()){r.addClass("sapSuiteUiPFWithLabel");}r.writeClasses();r.write(">");r.write("<th></th>");L=0;while(L<f-1){r.write("<th></th><th></th><th></th><th></th><th></th>");L++;}r.write("<th></th><th></th><th></th>");r.write("<th></th>");r.write("</tr>");r.write("<tr");r.addClass("sapSuiteUiCommonsPFHeaderRow");r.writeClasses();r.write(">");r.write("<th scope='col'>");o=P.createNewStartSymbol(c._isHeaderMode());r.renderControl(o);r.write("</th>");L=0;var i=0;var h=[];var s="1";g=false;while(L<(f-1)){n=d[L];N=d[L+1];if(n.getLaneId()+s===N.getLaneId()){i=i+1;h.push(n.getState());}else if(i===0){this._renderNormalNodeHeader(r,c,n,L,f);}else{h.push(n.getState());g=true;this._renderMergedNodeHeader(r,c,n,i,h,g);h=[];i=0;}L++;}if(i===0){if(!N){N=d[0];}this._renderNormalNodeHeader(r,c,N,L,f);}else{h.push(N.getState());g=false;this._renderMergedNodeHeader(r,c,n,i,h,g);i=0;}r.write("<th scope='col'>");o=P.createNewEndSymbol(c._isHeaderMode());r.renderControl(o);r.write("</th>");r.write("</tr>");r.write("</thead>");};
b._renderTableBody=function(r,c,d,f,g){var i,j,m,M,n;var s=b._checkIfHighlightedOrSelectedNodesExists(g);r.write("<tbody>");m=f.length;if(m>0){r.write("<tr>");r.write("<td");r.writeAttributeEscaped("colspan",(d*5).toString());r.write(">");r.write("</tr>");}i=0;while(i<m){r.write("<tr>");r.write("<td></td>");M=f[i].length;j=0;while(j<M-1){n=f[i][j];var h=true;if((j==0)||(j%2)){r.write("<td");}else{r.write("<td colspan=\"4\"");if(D.browser.chrome){r.addClass("sapSuiteUiCommonsProcessFlowZIndexForConnectors");r.writeClasses();}}if(n){if(n.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){h=b._renderNode(r,c,n,h);}else{n._setShowLabels(c.getShowLabels());b._setLabelsInConnection(f,g,n,{row:i,column:j},c,s);h=b._renderConnection(r,c,n,h);}}if(h){r.write(">");}r.write("</td>");j++;}r.write("<td></td>");r.write("<td></td>");r.write("</tr>");i++;}r.write("</tbody>");};
b._renderBasicStructure=function(r,c){r.write("<div");var o={};o.label=c._getAriaText();A.writeAriaProperties(r,o,c.getAriaProperties());r.writeControlData(c);r.addClass("sapSuiteUiPFContainer");if(c._arrowScrollable){r.addClass("sapPFHScrollable");if(c._bPreviousScrollForward){r.addClass("sapPFHScrollForward");}else{r.addClass("sapPFHNoScrollForward");}if(c._bPreviousScrollBack){r.addClass("sapPFHScrollBack");}else{r.addClass("sapPFHNoScrollBack");}}else{r.addClass("sapPFHNotScrollable");}r.writeClasses();r.write(">");this._writeCounter(r,c,"Left");r.renderControl(c._getScrollingArrow("left"));r.write("<div");r.writeAttribute("id",c.getId()+"-scrollContainer");r.addClass("sapSuiteUiScrollContainerPF");r.addClass("sapSuiteUiDefaultCursorPF");r.writeClasses();r.write(">");r.write("<div");r.writeAttribute("id",c.getId()+"-scroll-content");r.writeAttribute("tabindex",0);r.write(">");if(!c.getLanes()||c.getLanes().length==0){r.write("</div>");r.write("</div>");r.write("</div>");return true;}return false;};
b._getZoomStyleClass=function(c){switch(c.getZoomLevel()){case a.One:return"sapSuiteUiCommonsPFZoomLevel1";case a.Two:return"sapSuiteUiCommonsPFZoomLevel2";case a.Three:return"sapSuiteUiCommonsPFZoomLevel3";case a.Four:return"sapSuiteUiCommonsPFZoomLevel4";default:break;}};
b._setLabelsInConnection=function(c,d,f,p,C,s){for(var i=0;i<d.length;i++){var o=d[i];if(o&&o.label){for(var j=0;j<o.connectionParts.length;j++){var g=o.connectionParts[j];if(g.x===p.column&&g.y===p.row){if(c[p.row][p.column+1]&&c[p.row][p.column+1].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"&&c[p.row][p.column+1].getNodeId()===o.targetNode.getNodeId()){b._setLineTypeInLabel(o,s);if(C._bHighlightedMode&&!o.label._getHighlighted()){o.label.setEnabled(false);}if(o.label.getEnabled()){if(o.label.hasListeners("press")){o.label.detachEvent("press",C._handleLabelClick,C);}o.label.attachPress(C._handleLabelClick,C);}f.addAggregation("_labels",o.label,true);}}}}}};
b._setLineTypeInLabel=function(c,s){var C=false,t,L=false,d=false;if(c.sourceNode.getSelected()&&c.targetNode.getSelected()){C=true;c.label._setSelected(true);}else{c.label._setSelected(false);}t=c.targetNode;if(t.getHighlighted()){var p=t.getParents(),S;for(var i=0;i<p.length;i++){S=sap.ui.getCore().byId(p[i]);if(S.getHighlighted()){L=true;break;}}}if(L){d=true;c.label._setHighlighted(true);}else{c.label._setHighlighted(false);}if(s&&!C&&!d){c.label._setDimmed(true);}else{c.label._setDimmed(false);}};
b._checkIfHighlightedOrSelectedNodesExists=function(c){var s=false;for(var i=0;i<c.length;i++){var C=c[i];if(C.label){if(C.sourceNode.getSelected()&&C.targetNode.getSelected()||C.sourceNode.getHighlighted()&&C.targetNode.getHighlighted()){s=true;}}}return s;};
b._writeCounter=function(r,c,d){r.write("<span");r.writeAttributeEscaped("id",c.getId()+"-counter"+d);r.addClass("suiteUiPFHCounter");r.addClass(e("suiteUiPFHCounter"+d));r.writeClasses();r.write(">");r.writeEscaped("0");r.write("</span>");};
return b;},true);
sap.ui.predefine('sap/suite/ui/commons/ThreePanelThingViewer',["sap/ui/thirdparty/jquery",'./library','sap/ui/ux3/library','sap/ui/commons/library','./VerticalNavigationBar','sap/ui/ux3/ThingViewer','sap/ui/commons/Button','sap/suite/ui/commons/ThreePanelThingViewerRenderer',"sap/ui/events/ControlEvents","sap/ui/dom/containsOrEquals"],function(q,l,U,C,V,T,B,a,b,c){"use strict";
var d=T.extend("sap.suite.ui.commons.ThreePanelThingViewer",{metadata:{deprecated:true,library:"sap.suite.ui.commons",properties:{logo:{type:"sap.ui.core.URI",group:"Misc",defaultValue:null},showHeader:{type:"boolean",group:"Misc",defaultValue:null},sidebarWidth:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:'244px'}},aggregations:{menuContent:{type:"sap.ui.commons.Link",multiple:true,singularName:"menuContent"}}}});
d.prototype.init=function(){this._rb=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");this._oNavBar=new V();this.setAggregation("navBar",this._oNavBar);this._oNavBar.attachSelect(function(o){var i=o.getParameters().item;if(this.fireFacetSelected({id:i.getId(),key:i.getKey(),item:i})){this.setSelectedFacet(i);}else{o.preventDefault();}},this);this._iSelectedMenuItem=0;this._oMenuButton=new B({id:this.getId()+"-menu-button",tooltip:this._rb.getText("THREEPANELTHINGVIEWER_BUTTON_MENU_TOOLTIP"),lite:true,press:[this._toggleMenuPopup,this]});this._oMenuButton.addStyleClass("sapSuiteTvTitleMb");this.fAnyEventHandlerProxy=q.proxy(this.onAnyEvent,this);};
d.prototype.exit=function(){this._oMenuButton.destroy();b.unbindAnyEvent(this.fAnyEventHandlerProxy);};
d.prototype.onAfterRendering=function(){this._bMenuOpened=false;this._updateMenuPopup();this._toggleHeaderContent();};
d.prototype.selectDefaultFacet=function(){this._selectDefault();return this;};
d.prototype._toggleMenuPopup=function(){q(document.getElementById(this.getId()+"-menu-popup")).toggle();this._bMenuOpened=!this._bMenuOpened;if(this._bMenuOpened){b.bindAnyEvent(this.fAnyEventHandlerProxy);this.getMenuContent()[0].focus();this._iSelectedMenuItem=0;}else{b.unbindAnyEvent(this.fAnyEventHandlerProxy);}};
d.prototype._updateMenuPopup=function(){var h=q(document.getElementById(this.getId()+"-header")).width();var m=q(document.getElementById(this.getId()+"-menu-popup"));var s=sap.ui.getCore().getConfiguration().getRTL()?"right":"left";var S=this.getMenuContent().length;m.css(s,(h-22)+"px");m.children().each(function(i){var $=q(this);$.attr("tabindex","-1");$.attr("role","menuitem");$.attr("aria-posinset",i+1);$.attr("aria-setsize",S);});};
d.prototype._rerenderFacetContent=function(){var $=q(document.getElementById(this.getId()+"-facetContent"));if($.length>0){var r=sap.ui.getCore().createRenderManager();a.renderFacetContent(r,this);r.flush($[0]);r.destroy();this._resize=false;this._setTriggerValue();this._onresize();}};
d.prototype._rerenderHeader=function(){var $=q(document.getElementById(this.getId()+"-header"));if($.length>0){var r=sap.ui.getCore().createRenderManager();a.renderHeader(r,this);r.flush($[0]);r.destroy();}};
d.prototype._rerenderHeaderContent=function(){var $=q(document.getElementById(this.getId()+"-headerContent"));if($.length>0){var r=sap.ui.getCore().createRenderManager();a.renderHeaderContent(r,this);r.flush($[0]);r.destroy();}};
d.prototype._toggleHeaderContent=function(){var o=q(document.getElementById(this.getId()+"-headerContent"));if(this.getShowHeader()){o.show();}else{o.hide();}};
d.prototype.onAnyEvent=function(e){if(this._bMenuOpened&&(e.type==="mousedown"||e.type==="focusin")){var s=e.target;var D=this.getId()+"-menu-popup"?window.document.getElementById(this.getId()+"-menu-popup"):null;if(!c(D,s)||s.tagName==="BODY"){this._toggleMenuPopup();}}};
d.prototype.onsapescape=function(){if(this._bMenuOpened){this._toggleMenuPopup();this._oMenuButton.focus();}};
d.prototype.onsapnext=function(e){if(this._bMenuOpened){var m=this.getMenuContent();this._iSelectedMenuItem++;if(this._iSelectedMenuItem>=m.length){this._iSelectedMenuItem=0;}m[this._iSelectedMenuItem].focus();e.preventDefault();e.stopPropagation();}};
d.prototype.onsapprevious=function(e){if(this._bMenuOpened){var m=this.getMenuContent();this._iSelectedMenuItem--;if(this._iSelectedMenuItem<0){this._iSelectedMenuItem=m.length-1;}m[this._iSelectedMenuItem].focus();e.preventDefault();e.stopPropagation();}};
d.prototype.setShowHeader=function(s){this.setProperty("showHeader",s,true);this._toggleHeaderContent();return this;};
return d;});
sap.ui.predefine('sap/suite/ui/commons/ThreePanelThingViewerRenderer',['sap/ui/core/Renderer','sap/ui/ux3/ThingViewerRenderer'],function(R,T){"use strict";var a=R.extend(T);
a.renderContent=function(r,c){r.write("<div");r.addClass("sapSuiteTvMinHeight");r.writeClasses();r.write(">");r.write("<header");r.writeAttribute("id",c.getId()+"-header");r.addClass("sapSuiteTvTitle");r.writeClasses();r.addStyle("width",c.getSidebarWidth());r.writeStyles();r.write(">");this.renderHeader(r,c);r.write("</header>");r.write("<nav");r.writeAttribute("id",c.getId()+"-navigation");r.addClass("sapSuiteTvNav");if(!c.getLogo()){r.addClass("sapSuiteTvNavNoLogo");}r.writeClasses();r.addStyle("width",c.getSidebarWidth());r.writeStyles();r.write(">");r.renderControl(c._getNavBar());r.write("</nav>");r.write("<aside");r.writeAttribute("id",c.getId()+"-headerContent");r.addClass("sapSuiteTvHeader");r.writeClasses();r.write(">");this.renderHeaderContent(r,c);r.write("</aside>");r.write("<div");r.writeAttribute("id",c.getId()+"-facetContent");r.addClass("sapSuiteTvFacet");r.writeClasses();r.write(">");this.renderFacetContent(r,c);r.write("</div>");if(c.getLogo()){r.write("<footer");r.writeAttribute("id",c.getId()+"-footer");r.addClass("sapSuiteTvLogo");r.writeClasses();r.addStyle("width",c.getSidebarWidth());r.writeStyles();r.write(">");r.write("<img");r.writeAttribute("id",c.getId()+"-logo");r.writeAttribute("role","presentation");r.writeAttributeEscaped("src",c.getLogo());r.addClass("sapSuiteTvLogoIcon");r.writeClasses();r.write("/>");r.write("</footer>");}r.write("</div>");};
a.renderHeader=function(r,c){var m=c.getMenuContent().length;r.write("<div");r.addClass("sapSuiteTvTitleBar");r.writeClasses();r.write(">");if(c.getIcon()){r.write("<img");r.writeAttribute("id",c.getId()+"-swatch");r.writeAttribute("role","presentation");r.writeAttributeEscaped("src",c.getIcon());r.addClass("sapSuiteTvTitleIcon");r.writeClasses();r.write("/>");}if(m>0){r.renderControl(c._oMenuButton);}r.write("<div");r.writeAttribute("role","heading");r.writeAttribute("aria-level",1);r.writeAttributeEscaped("title",c.getType());r.addClass("sapSuiteTvTitleType");r.addClass("sapSuiteTvTextCrop");r.writeClasses();r.write(">");r.writeEscaped(c.getType());r.write("</div>");r.write("<div");r.writeAttribute("role","heading");r.writeAttribute("aria-level",2);r.writeAttributeEscaped("title",c.getTitle());r.addClass("sapSuiteTvTitleFirst");r.writeClasses();r.write(">");r.writeEscaped(c.getTitle());r.write("</div>");r.write("<div");r.writeAttribute("role","heading");r.writeAttribute("aria-level",3);r.writeAttributeEscaped("title",c.getSubtitle());r.addClass("sapSuiteTvTitleSecond");r.addClass("sapSuiteTvTextCrop");r.writeClasses();r.write(">");r.writeEscaped(c.getSubtitle());r.write("</div>");r.write("</div>");this.renderFlyOutMenu(r,c);};
a.renderFacetContent=function(r,c){var f=c.getFacetContent();for(var i=0;i<f.length;i++){var g=f[i];r.write("<div");r.writeAttribute("role","form");if(g.getColspan()){r.addClass("sapUiUx3TVFacetThingGroupSpan");}else{r.addClass("sapUiUx3TVFacetThingGroup");}r.writeClasses();r.write(">");r.write("<div");r.writeAttributeEscaped("title",g.getTitle());r.addClass("sapUiUx3TVFacetThingGroupContentTitle");r.writeClasses();r.write(">");r.write("<span>");r.writeEscaped(g.getTitle());r.write("</span>");r.write("</div>");r.write("<div");r.addClass("sapUiUx3TVFacetThingGroupContent");r.writeClasses();r.write(">");var G=g.getContent();for(var j=0;j<G.length;j++){r.renderControl(G[j]);}r.write("</div>");r.write("</div>");}};
a.renderFlyOutMenu=function(r,c){r.write("<div");r.writeAttribute("id",c.getId()+"-menu-popup");r.writeAttribute("role","menu");r.addClass("sapSuiteTvPopupMenu");r.writeClasses();r.write(">");var m=c.getMenuContent();for(var i=0;i<m.length;i++){var M=m[i];M.addStyleClass("sapSuiteTvPopupMenuLink");r.renderControl(M);}r.write("</div>");};
return a;},true);
sap.ui.predefine('sap/suite/ui/commons/Timeline',["sap/ui/thirdparty/jquery","./library","sap/ui/core/Control","sap/ui/core/ResizeHandler","sap/ui/core/format/DateFormat","sap/ui/model/ClientListBinding","sap/ui/model/FilterType","sap/suite/ui/commons/TimelineNavigator","sap/suite/ui/commons/util/DateUtils","sap/suite/ui/commons/util/ManagedObjectRegister","sap/ui/model/json/JSONModel","sap/ui/model/Sorter","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/base/ManagedObject","sap/suite/ui/commons/TimelineItem","sap/suite/ui/commons/TimelineRenderManager","sap/ui/core/delegate/ScrollEnablement","sap/ui/base/Object","sap/base/assert","sap/base/Log","./TimelineRenderer"],function(q,l,C,R,D,c,F,T,d,M,J,S,e,f,g,h,j,m,B,n,L,o){"use strict";var p=l.TimelineScrollingFadeout,r=l.TimelineAlignment,s=l.TimelineGroupType,t=l.TimelineFilterType,u=l.TimelineAxisOrientation;
var v=C.extend("sap.suite.ui.commons.Timeline",{metadata:{library:"sap.suite.ui.commons",properties:{alignment:{type:"sap.suite.ui.commons.TimelineAlignment",group:"Misc",defaultValue:"Right"},axisOrientation:{type:"sap.suite.ui.commons.TimelineAxisOrientation",group:"Misc",defaultValue:"Vertical"},data:{type:"object",group:"Misc",defaultValue:null,deprecated:true},enableAllInFilterItem:{type:"boolean",group:"Behavior",defaultValue:true,deprecated:true},enableBackendFilter:{type:"boolean",group:"Misc",defaultValue:true,deprecated:true},enableBusyIndicator:{type:"boolean",group:"Misc",defaultValue:true},enableDoubleSided:{type:"boolean",group:"Misc",defaultValue:false},enableModelFilter:{type:"boolean",group:"Misc",defaultValue:true},enableScroll:{type:"boolean",group:"Misc",defaultValue:true},enableSocial:{type:"boolean",group:"Misc",defaultValue:false},filterTitle:{type:"string",group:"Misc",defaultValue:null},forceGrowing:{type:"boolean",group:"Misc",defaultValue:false},group:{type:"boolean",group:"Misc",defaultValue:false,deprecated:true},groupBy:{type:"string",group:"Misc",defaultValue:null},groupByType:{type:"sap.suite.ui.commons.TimelineGroupType",group:"Misc",defaultValue:"None"},growing:{type:"boolean",group:"Misc",defaultValue:true,deprecated:true},growingThreshold:{type:"int",group:"Misc",defaultValue:5},height:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:''},lazyLoading:{type:"boolean",group:"Dimension",defaultValue:false},noDataText:{type:"string",group:"Misc",defaultValue:null},scrollingFadeout:{type:"sap.suite.ui.commons.TimelineScrollingFadeout",group:"Misc",defaultValue:"None"},showFilterBar:{type:"boolean",group:"Misc",defaultValue:true,deprecated:true},showHeaderBar:{type:"boolean",group:"Misc",defaultValue:true},showIcons:{type:"boolean",group:"Misc",defaultValue:true},showItemFilter:{type:"boolean",group:"Misc",defaultValue:true},showSearch:{type:"boolean",group:"Misc",defaultValue:true},showSort:{type:"boolean",group:"Misc",defaultValue:true},showSuggestion:{type:"boolean",group:"Behavior",defaultValue:true,deprecated:true},showTimeFilter:{type:"boolean",group:"Misc",defaultValue:true},sort:{type:"boolean",group:"Misc",defaultValue:true},dateTimePath:{type:"string",group:"Misc",defaultValue:""},sortOldestFirst:{type:"boolean",group:"Misc",defaultValue:false},textHeight:{type:"string",group:"Misc",defaultValue:''},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:'100%'}},defaultAggregation:"content",aggregations:{content:{type:"sap.suite.ui.commons.TimelineItem",multiple:true,singularName:"content"},customFilter:{type:"sap.ui.core.Control",multiple:false},filterList:{type:"sap.suite.ui.commons.TimelineFilterListItem",multiple:true,singularName:"filterList"},suggestionItems:{type:"sap.m.StandardListItem",multiple:true,singularName:"suggestionItem",deprecated:true}},events:{addPost:{deprecated:true,parameters:{value:{type:"string"}}},customMessageClosed:{},filterOpen:{},filterSelectionChange:{parameters:{type:{type:"sap.suite.ui.commons.TimelineFilterType"},searchTerm:{type:"string"},selectedItem:{type:"string"},selectedItems:{type:"object"},timeKeys:{type:"object"},clear:{type:"boolean"}}},grow:{},itemFiltering:{parameters:{item:{type:"sap.suite.ui.commons.TimelineItem"},reasons:{type:"object"},dataKeys:{type:"object"},timeKeys:{type:"object"},searchTerm:{type:"string"}}},select:{parameters:{selectedItem:{type:"sap.suite.ui.commons.TimelineItem"},userAction:{type:"boolean"}}},suggest:{deprecated:true,parameters:{suggestValue:{type:"string"}}},suggestionItemSelected:{deprecated:true,parameters:{selectedItem:{type:"sap.ui.core.Item"}}}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},designTime:true}});
function w(a,b){var _;Object.defineProperty(a,b,{get:function(){return typeof _==="function"?_():_;},set:function(i){_=i;}});}
var x=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons"),y=Object.freeze({ASCENDING:"ASCENDING",DESCENDING:"DESCENDING"}),z=Object.freeze({UP:"UP",DOWN:"DOWN",NONE:"NONE"}),A={Year:D.getDateInstance({pattern:"yyyy"}),Quarter:D.getDateInstance({pattern:"QQQQ yyyy"}),Month:D.getDateInstance({format:"yyyyMMMM"}),Week:D.getDateInstance({pattern:"w"}),Day:D.getDateInstance({style:"long"}),MonthDay:D.getDateInstance({style:"medium"})};
function E(a,b){var i;n(Array.isArray(a),"aArray must be an array.");if(typeof a.findIndex==="function"){return a.findIndex(b);}for(i=0;i<a.length;i++){if(b(a[i],i,a)){return i;}}return-1;}
v.prototype.init=function(){this._objects=new M();this.reset();w(this,"_endDate");w(this,"_startDate");this._initControls();this.setBusyIndicatorDelay(0);};
v.prototype.resetTimeLimits=function(){this._maxDate=null;this._minDate=null;};
v.prototype.setCustomModelFilter=function(a,b){var i=this.getBinding("content");if(i){var k=i.aFilters||[];var G=E(k,function(b){return b._customTimelineId===a;});if(G!==-1){k.splice(G,1);}if(b!==null){b._customTimelineId=a;k.push(b);}i.filter(k,F.Control);}};
v.prototype.setCustomGrouping=function(G){var b=this.getBindingInfo("content");this._fnCustomGroupBy=G;if(b){this._bindGroupingAndSorting(b);this.updateAggregation("content");}};
v.prototype.setCurrentTimeFilter=function(a){this._startDate=a.from;this._endDate=a.to;this._rangeFilterType=a.type;};
v.prototype.setCurrentSearch=function(a){this._objects.getSearchField().setValue(a);};
v.prototype.setCurrentFilter=function(a){var b=this,H=function(V){for(var i=0;i<a.length;i++){if(a[i]===V){return true;}}return false;};if(!a){return;}if(!Array.isArray(a)){a=[a];}if(this._aFilterList.length===0){this._setFilterList();}b._currentFilterKeys=[];this._aFilterList.forEach(function(i){var k=i.key;if(H(k)){b._currentFilterKeys.push({key:k,text:i.text?i.text:i.key});}});};
v.prototype.getGroups=function(){return this._useBinding()?this.getContent().filter(function(i){return i._isGroupHeader;}):this._aGroups;};
v.prototype.exit=function(){this._objects.destroyAll();if(this.oItemNavigation){this.removeDelegate(this.oItemNavigation);this.oItemNavigation.destroy();this.oItemNavigation=null;}if(this._oScroller){this._oScroller.destroy();this._oScroller=null;}if(this.oResizeListener){R.deregister(this.oResizeListener);this.oResizeListener=null;}};
v.prototype.adjustUI=function(){this._performUiChanges(true);};
v.prototype.setModelFilterMessage=function(a,b){if(a===t.Data){this._dataMessage=b;}if(a===t.Time){this._rangeMessage=b;}};
v.prototype.setCustomFilterMessage=function(a){this._customFilterMessage=a;};
v.prototype.setModelFilter=function(a){switch(a.type){case t.Data:this._dataFilter=a.filter;break;case t.Time:this._rangeDataFilter=a.filter;break;case t.Search:this._searchFilter=a.filter;break;default:}if(a.refresh!==false){this.recreateFilter();}};
v.prototype.getAggregation=function(a){switch(a){case"headerBar":return this.getHeaderBar();case"searchField":return this._objects.getSearchField();case"sortIcon":return this._objects.getSortIcon();case"filterIcon":return this._objects.getFilterIcon();default:return C.prototype.getAggregation.apply(this,arguments);}};
v.prototype._formatGroupBy=function(a,b){if(this._fnCustomGroupBy){return this._fnCustomGroupBy(a);}var k=a,i=a;if(a instanceof Date){switch(b){case s.Year:k=a.getFullYear();i=A.Year.format(a);break;case s.Quarter:k=a.getFullYear()+"/"+Math.floor(a.getMonth()/4);i=A.Quarter.format(a);break;case s.Month:k=a.getFullYear()+"/"+a.getMonth();i=A.Month.format(a);break;case s.Week:var G=new Date(a),H=new Date(a),I=a.getFullYear(),K=A.Week.format(a),N=a.getDate()-a.getDay(),O=N+6,P=new Date(G.setDate(N)),Q=new Date(H.setDate(O));k=I+"/"+K;i=A.MonthDay.format(P)+" \u2013 "+A.MonthDay.format(Q);break;case s.Day:k=a.getFullYear()+"/"+a.getMonth()+"/"+a.getDate();i=A.Day.format(a);break;default:}}return{key:k,title:i,date:a};};
v.prototype._fnDateDiff=function(a,b,i){var k,Y,G,H,I=0;b=b||this._minDate;i=i||this._maxDate;switch(a){case s.Year:I=i.getFullYear()-b.getFullYear();break;case s.Month:k=(i.getFullYear()-b.getFullYear())*12;k+=i.getMonth()-b.getMonth();I=k<=0?0:k;break;case s.Quarter:Y=(i.getFullYear()-b.getFullYear())*4;G=Math.floor(b.getMonth()/3);H=Math.floor(i.getMonth()/3);I=Y+(H-G);break;case s.Day:var K=24*60*60*1000;I=Math.round(Math.abs((b.getTime()-i.getTime())/(K)));break;default:}return I;};
v.prototype._fnAddDate=function(V,a){var N,b,i,k=function(H,I,K){this.setHours(H);this.setMinutes(I);this.setSeconds(K);},G=function(H,b,i){if(a===z.UP){k.call(i,23,59,59);return new Date(Math.min.apply(null,[this._maxDate,i]));}if(a===z.DOWN){k.call(b,0,0,0);return new Date(Math.max.apply(null,[this._minDate,b]));}return H;};switch(this._rangeFilterType){case s.Year:N=new Date(new Date(this._minDate).setFullYear(this._minDate.getFullYear()+V));b=new Date(N.getFullYear(),0,1);i=new Date(N.getFullYear(),11,31);break;case s.Month:N=new Date(new Date(this._minDate).setMonth(this._minDate.getMonth()+V));b=new Date(N.getFullYear(),N.getMonth(),1);i=new Date(N.getFullYear(),N.getMonth()+1,0);break;case s.Quarter:N=new Date(new Date(this._minDate).setMonth(this._minDate.getMonth()+(V*3)));var Q=N.getMonth()%3;b=new Date(N.getFullYear(),N.getMonth()-Q,1);i=new Date(N.getFullYear(),N.getMonth()+(2-Q)+1,0);break;case s.Day:N=b=i=new Date(new Date(this._minDate).setDate(this._minDate.getDate()+V));break;default:}return G.call(this,N,b,i);};
v.prototype._calculateRangeTypeFilter=function(){var a=this._fnDateDiff(s.Day);if(a>500){return s.Year;}else if(a>200){return s.Quarter;}else if(a>62){return s.Month;}return s.Day;};
v.prototype._setRangeFilter=function(){var a=this._fnDateDiff(this._rangeFilterType);this._objects.getTimeRangeSlider().setMin(0);this._objects.getTimeRangeSlider().setMax(a);this._objects.getTimeRangeSlider().setRange([0,a]);this._objects.getTimeRangeSlider().invalidate();var b=this._objects.getTimeRangeSlider().getRange();if((b[1]-b[0])===0){this._objects.getTimeRangeSlider().addStyleClass("sapTimelineRangeFilterNoDiff");}else{this._objects.getTimeRangeSlider().removeStyleClass("sapTimelineRangeFilterNoDiff");}};
v.prototype._sortClick=function(){var b,P;this._sortOrder=this._sortOrder===y.ASCENDING?y.DESCENDING:y.ASCENDING;this._objects.getSortIcon().setIcon(this._sortOrder===y.ASCENDING?"sap-icon://arrow-bottom":"sap-icon://arrow-top");this._objects.getSortIcon().setTooltip(this._sortOrder===y.ASCENDING?x.getText("TIMELINE_SORT_ASCENDING"):x.getText("TIMELINE_SORT_DESCENDING"));if(this._useModelFilter()){b=this.getBinding("content");P=this._findDateTimeBindingPath();b.sort(this._getDefaultSorter(P,this._sortOrder===y.ASCENDING));}else{this.invalidate();}};
v.prototype._sort=function(a,b){var i=b||this._sortOrder;a.sort(function(k,G){var H=k.getDateTime(),I=G.getDateTime(),K=(i===y.ASCENDING)?-1:1;return H<I?1*K:-1*K;});return a;};
v.prototype._loadMore=function(){var b,a,i=function(){var k=this._displayShowMore()?this.getGrowingThreshold():this._calculateItemCountToLoad(this.$());this._iItemCount+=k;this._iItemCount=Math.min(this._getMaxItemsCount(),this._iItemCount);}.bind(this);this._lastScrollPosition.more=this._isVertical()?this._$content.get(0).scrollTop:this._$content.get(0).scrollLeft;this._setBusy(true);this.fireGrow();if(this._useBinding()){if(this._isMaxed()){this._setBusy(false);return;}i();b=this.getBindingInfo("content");b.startIndex=0;if(!this._loadAllData()){b.length=this._iItemCount;}a=this.getBinding("content").getContexts(0,b.length);if(a&&a.dataRequested){return;}this.updateAggregation("content");}else{i();this.invalidate();}this.oItemNavigation.refocusOnNextUpdate();};
v.prototype.recreateFilter=function(b){var a=this.getBinding("content"),i=this,k=[],G=[];if(a){if(!b){k=a.aFilters||[];}if(this._dataFilter){G.push(this._dataFilter);}if(this._rangeDataFilter){G.push(this._rangeDataFilter);}if(this._searchFilter){G.push(this._searchFilter);}if(this._filter&&!b){var H=E(k,function(I){return I===i._filter;});if(H!==-1){k.splice(H,1);}}if(G.length>0){this._filter=new e(G,true);k.push(this._filter);}a.filter(k,F.Control);}else{this.invalidate();}};
v.prototype._getRangeMessage=function(){var a=this._rangeMessage;if(!a){var b=this._formatGroupBy(this._startDate,this._rangeFilterType).title,i=this._formatGroupBy(this._endDate,this._rangeFilterType).title;a=x.getText("TIMELINE_RANGE_SELECTION")+" (";a+=b+" - "+i+")";}return a;};
v.prototype._getFilterMessage=function(){var a="",b=null;if(this._dataMessage){a=this._dataMessage;}else if(this._currentFilterKeys.length>0){a=this._currentFilterKeys.map(function(i){return i.text?i.text:i.key;}).join(", ");a=this._getFilterTitle()+" ("+a+")";}if(this._rangeDataFilter||this._rangeMessage||(this._startDate&&this._endDate)){a=a?a+", ":"";a+=this._getRangeMessage();}if(this._customFilterMessage){a=a?a+", "+this._customFilterMessage:this._customFilterMessage;}if(a){b=x.getText("TIMELINE_FILTER_INFO_BY",a);}return b;};
v.prototype.refreshContent=function(){var b=this.getBinding("content"),a=this.getBindingInfo("content"),G=this.getGrowingThreshold();this._setBusy(true);if(b&&a){this._iItemCount=b.sOperationMode==="Default"?0:this._iItemCount;b.getContexts(0,G);a.length=G;b.attachEventOnce("dataReceived",q.proxy(function(){this.updateAggregation("content");},this));}else{this.updateAggregation("content");}};
v.prototype.updateContent=function(){this._setBusy(false);this.updateAggregation("content");var a=this._objects.getSortIcon();if(this.getAggregation("content").length<=1){a.setEnabled(false);}else{a.setEnabled(true);}this.invalidate();};
v.prototype.destroyContent=function(){var $=this.$("line"),a=this.$().find(".sapSuiteUiCommonsTimelineItemGetMoreButton");if($.get(0)){$.remove();}if(a.get(0)){a.remove();}this.destroyAggregation("content");return this;};
v.prototype._search=function(a){var b=this,i,k,G,U,H=[];this._searchValue=a;if(this._useModelFilter()){i=this._fireSelectionChange({searchTerm:this._searchValue,type:t.Search});if(i){this._searchFilter=null;if(this._searchValue){k=this._findBindingPaths("text");G=this._findBindingPaths("title");U=this._findBindingPaths("userName");if(k.length>0){H.push(k);}if(G.length>0){H.push(G);}if(U.length>0){H.push(U);}if(H.length>0){this._searchFilter=new e(H.map(function(I){return new e(I.map(function(K){return new e(K,f.Contains,b._searchValue);}),false);}));}}this.recreateFilter();}}else{this.invalidate();}};
v.prototype._filterData=function(b){var a,P;this._dataMessage="";if(this._useModelFilter()){this._dataFilter=null;a=this._fireSelectionChange({selectedItem:this._currentFilterKeys[0]?this._currentFilterKeys[0].key:"",selectedItems:this._currentFilterKeys,type:t.Data});if(a){if(this._currentFilterKeys.length>0){P=this._findBindingPath("filterValue");if(P){this._dataFilter=new e(this._currentFilterKeys.map(function(i){return new e(P,f.EQ,i.key);}),false);}}}this._rangeDataFilter=null;if(b){a=this._fireSelectionChange({type:t.Time,timeKeys:{from:this._startDate,to:this._endDate}});if(a){P=this._findDateTimeBindingPath();if(P){this._rangeDataFilter=new e({path:P,operator:f.BT,value1:this._startDate,value2:this._endDate});}}}this._setBusy(true);this.recreateFilter();}else{this.invalidate();}};
v.prototype._filterRangeData=function(){var b,P;this._rangeMessage="";if(this._useModelFilter()){b=this._fireSelectionChange({from:this._startDate,to:this._endDate,type:t.Time});if(b){P=this._findDateTimeBindingPath();this._rangeDataFilter=null;if(P){this._rangeDataFilter=new e({path:P,operator:f.BT,value1:this._startDate,value2:this._endDate});}this._setBusy(true);this.recreateFilter();}}else{this.invalidate();}};
v.prototype.applySettings=function(a,b){g.prototype.applySettings.apply(this,[a,b]);this._settingsApplied=true;if(this._bindOptions){this.bindAggregation("content",this._bindOptions);this._bindOptions=null;}};
v.prototype._setFilterList=function(){var k=false,G,I,K,H={},N,O;this._aFilterList=[];if(this._useModelFilter()){this._aFilterList=this.getFilterList().map(function(a){return{key:a.getProperty("key"),text:a.getProperty("text")};});if(this._aFilterList.length===0){O=this._findBindingData("filterValue");N=this.getBinding("content");if(O&&N){G=N.getDistinctValues(O.path);if(Array.isArray(G)){this._aFilterList=G.map(function(a){return{key:a,text:O.formatter?O.formatter(a):a};});this._aFilterList=this._aFilterList.filter(function(a){return a.key;});}k=true;}}}else{I=this.getContent();k=true;for(var i=0;i<I.length;i++){K=I[i].getFilterValue();if(!K){continue;}if(!(K in H)){H[K]=1;this._aFilterList.push({key:K,text:K});}}}if(k){this._aFilterList.sort(function(a,b){if(a.text.toLowerCase){return a.text.toLowerCase().localeCompare(b.text.toLowerCase());}else{return a.text>b.text;}});}};
v.prototype._clearFilter=function(){var a=function(){var G,H=this._objects.getTimeRangeSlider();this._startDate=null;this._endDate=null;this._rangeMessage=null;H.setRange([H.getMin(),H.getMax()]);if(this._useModelFilter()){G=this._fireSelectionChange({clear:true,timeKeys:{from:null,to:null},type:t.Range});}return G;}.bind(this),b=function(){var G;this._currentFilterKeys=[];if(this._useModelFilter()){G=this._fireSelectionChange({clear:true,selectedItems:[],selectedItem:"",type:t.Data});}return G;}.bind(this);var i=b(),k=a();this._customFilterMessage="";if(i||k){if(i){this._dataFilter=null;}if(k){this._rangeDataFilter=null;}this.recreateFilter(true);}else{this.invalidate();}this._objects.destroyObject("FilterContent");this._setupFilterDialog();};
v.prototype._getTimeFilterData=function(){var a=this,I,b,k,G,H=function(i,Q){return N(i,a[Q]).then(function(U){if(U){if(!a._objects.getTimeFilterSelect().getEnabled()){a._objects.getTimeFilterSelect().setEnabled(true);}var V=d.parseDate(U);if(V instanceof Date){a[Q]=V;}}}).catch(function(){a._objects.getTimeFilterSelect().setEnabled(false);});},K=function(i){var Q,U,V,W,X,Y="sap_suite_ui_commons_Timeline";Q=this.getBinding("content").getModel();if(!Q){return Promise.reject();}U=this._findDateTimeBindingPath();if(!U){return;}V=new S(U,i);W=this.getBinding("content");if(!W){return Promise.reject();}if(Q.submitBatch){X={$$groupId:Y};}var Z=Q.bindList(W.getPath(),W.getContext(),V,undefined,X);Z.initialize();var $=Z.getContexts(0,1);if(B.isA(Z,"sap.ui.model.json.JSONListBinding")&&$.length===0){return Promise.reject();}else if($.length>0){return Promise.resolve(d.parseDate($[0].getProperty(U)));}else if(B.isA(Z,"sap.ui.model.odata.v4.ODataListBinding")){a._setBusy(true);return new Promise(function(_,a1){Q.submitBatch(Y).then(function(){a._setBusy(false);P(Z,U,_,a1);});});}else if(Z&&Z.attachDataReceived){a._setBusy(true);return new Promise(function(_,a1){Z.attachDataReceived(function(){a._setBusy(false);P(Z,U,_,a1);});});}return Promise.reject();}.bind(this),N=function(i,G){if(G){return Promise.resolve(G);}return K(i==="max");},O=function(){I=this.getContent();if(I.length>0){this._minDate=I[0].getDateTime();this._maxDate=I[0].getDateTime();for(var i=1;i<I.length;i++){G=I[i].getDateTime();if(G<this._minDate){this._minDate=G;}if(G>this._maxDate){this._maxDate=G;}}}},P=function(i,Q,U,V){var W=i.getContexts(0,1);if(W.length>0){U(d.parseDate(W[0].getProperty(Q)));}else{V();}};return new Promise(function(i,Q){if(!a._maxDate||!a._minDate){if(a._useModelFilter()){b=H("min","_minDate",b);k=H("max","_maxDate",k);Promise.all([b,k]).then(function(){i();}).catch(function(){Q();});}else{O.call(a);i();}}else{i();}});};
v.prototype._openFilterDialog=function(){var a=this.getCustomFilter();if(a){if(typeof a.openBy==="function"){a.openBy(this._objects.getFilterIcon());}else if(typeof a.open==="function"){a.open();}else{L.error("CustomFilter is expected to have an openBy or open function. The provided instance doesn't have either.");}this.fireFilterOpen();return;}this._filterState={data:false,range:false};this._objects.getFilterContent().open();this._objects.getTimestampFilterPicker().resizeDialog(this._objects);this.fireFilterOpen();};
v.prototype._createGroupHeader=function(a,b){var i=this.getId()+"-timelinegroupheader-"+this._groupId,k=a.key,G=new h(i,{text:"GroupHeader",dateTime:a.date,userName:k,title:a.title,icon:"sap-icon://arrow-down"});G._isGroupHeader=true;if(b){G.setParent(this,"content");this._aGroups.push(G);}else{this.addAggregation("content",G,false);}this._groupId++;return G;};
v.prototype._getDefaultSorter=function(P,a){var b=this;if(P){return new S(P,!a,function(i){var V=i.getProperty(P),k=d.parseDate(V);return k instanceof Date?b._formatGroupBy(k,b.getGroupByType()):{date:k};});}};
v.prototype._findBindingInfoFromTemplate=function(P,a){if(!a){var b=this.getBindingInfo("content");if(b){a=b.template;}}if(a){var i=a.getBindingInfo(P);if(i&&i.parts&&i.parts[0]){return i;}}return null;};
v.prototype._findBindingPaths=function(P,a){var i=this._findBindingInfoFromTemplate(P,a);if(i&&i.parts){return i.parts.map(function(I){return I.path;});}return[];};
v.prototype._findDateTimeBindingPath=function(b){var a=this.getDateTimePath();if(a){return a;}var i=this._findBindingInfoFromTemplate("dateTime",b);if(i){return i.parts[0].path;}return null;};
v.prototype._findBindingPath=function(P,a){var i=this._findBindingInfoFromTemplate(P,a);if(i){return i.parts[0].path;}return null;};
v.prototype._findBindingData=function(P,a){var i=this._findBindingInfoFromTemplate(P,a);if(i){return{path:i.parts[0].path,formatter:i.formatter};}return null;};
v.prototype._bindGroupingAndSorting=function(b){if(!this._isGrouped()&&this.getSort()){var a=this._findDateTimeBindingPath(b.template);if(a){b.sorter=this._getDefaultSorter(a,this.getSortOldestFirst());}}b.groupHeaderFactory=null;if(this._isGrouped()){b.sorter=this._getDefaultSorter(this.getGroupBy(),this.getSortOldestFirst());b.groupHeaderFactory=q.proxy(this._createGroupHeader,this);}};
v.prototype.updateBindingContext=function(){this.reset();return g.prototype.updateBindingContext.apply(this,arguments);};
v.prototype.bindAggregation=function(N,O){if(N==="content"){if(!this._settingsApplied){this._bindOptions=O;return null;}this._bindGroupingAndSorting(O);if(this._lazyLoading()){this._iItemCount=this._calculateItemCountToLoad(q(window));if(!this._loadAllData(true)){O.length=this._iItemCount;}}else if(this._displayShowMore()&&!this._loadAllData(O.template||O.factory)){this._iItemCount=this.getGrowingThreshold();O.length=this._iItemCount;}this._oOptions=O;}return g.prototype.bindAggregation.apply(this,[N,O]);};
v.prototype._calculateItemCountToLoad=function($){var i=u.Vertical===this.getAxisOrientation(),a=i?$.height():$.width(),b=this.getEnableDoubleSided(),k=b?0.6:1,G=i?1200:2000,I=i?120:280,H=(13*k),K;if(!a){a=G;}K=(a/(I*k))*1.5;return Math.floor(Math.max(K,H));};
v.prototype.onBeforeRendering=function(){var G=this.getGrowingThreshold(),a;this._bRtlMode=sap.ui.getCore().getConfiguration().getRTL();this._objects.getSortIcon().setIcon(this._sortOrder===y.ASCENDING?"sap-icon://arrow-bottom":"sap-icon://arrow-top");this._objects.getSortIcon().setTooltip(this._sortOrder===y.ASCENDING?x.getText("TIMELINE_SORT_ASCENDING"):x.getText("TIMELINE_SORT_DESCENDING"));this._aGroups=[];this._bRendered=false;a=this.getContent();if(!this._iItemCount&&!this._useBinding()&&this._lazyLoading()){this._iItemCount=this._calculateItemCountToLoad(q(window));}if(!this._iItemCount){if(G!==0){this._iItemCount=G;}}if(!this._iItemCount||!this._useGrowing()){this._iItemCount=a.filter(function(i){return!i._isGroupHeader;}).length;}this._setOutput(a);};
v.prototype.addContentGroup=function(a){};
v.prototype._performScroll=function(a){var b=this,i=this._isVertical()?this._$content.get(0).scrollTop+a:this._$content.get(0).scrollLeft+a;i=Math.max(i,0);if(this._isVertical()){this._$content.get(0).scrollTop=i;}else{this._$content.get(0).scrollLeft=i;}if(this._manualScrolling){setTimeout(b._performScroll.bind(b,a),50);}};
v.prototype._moveScrollBar=function(U){if(this._lastScrollPosition.more||this._lastScrollPosition.backup){if(U){this._lastScrollPosition.more=this._lastScrollPosition.backup;}if(!U){this._lastScrollPosition.backup=this._lastScrollPosition.more;}this._lastScrollPosition.more=0;}};
v.prototype.onAfterRendering=function(){var $=this.$();if(this._isVertical()){this._$content=this.$("content");this._$scroll=this.$("scroll");}else{this._$content=this.$("contentH");this._$scroll=this.$("scrollH");}this.setBusy(false);if(!this._oScroller){this._oScroller=new m(this,this._$scroll.attr('id'),{});}this._oScroller._$Container=this._$scroll.parent();this._oScroller.setVertical(this._isVertical());this._oScroller.setHorizontal(!this._isVertical());this._startItemNavigation();this._scrollersSet=false;this._scrollMoreEvent=true;this._lastStateDblSided=null;this._showCustomMessage();this._setupScrollEvent();this._performUiChanges();this._moveScrollBar();this._bRendered=true;$.css("opacity",1);};
v.prototype._clientFilter=function(I){var a=[],b,k,G,H,K,N,O,P,U,Q;function V(W){return W.key===b.getProperty("filterValue");}for(var i=0;i<I.length;i++){b=I[i];k=false;G={};if(this._currentFilterKeys.length>0){H=E(this._currentFilterKeys,V);if(H===-1){k=true;G[t.Data]=1;}}if(this._startDate&&this._endDate){K=b.getDateTime();if(K<this._startDate||K>this._endDate){k=true;G[t.Time]=1;}}if(this._searchValue){N=this._searchValue.toLowerCase();O=b.getProperty("text")||"";P=b.getProperty("title")||"";U=b.getProperty("userName")||"";if(!((O.toLowerCase().indexOf(N)!==-1)||(P.toLowerCase().indexOf(N)!==-1)||(U.toLowerCase().indexOf(N)!==-1))){k=true;G[t.Search]=1;}}Q=!this.fireEvent("itemFiltering",{item:b,reasons:G,dataKeys:this._currentFilterKeys,timeKeys:{from:this._startDate,to:this._endDate},searchTerm:this._searchValue},true);if(Q){k=!k;}if(!k){a.push(b);}}return a;};
v.prototype._setOutput=function(I){var a;var b=function(){var V=0,W=[],i=0;if(this._iItemCount!==a.length){for(;i<a.length;i++){if(!a[i]._isGroupHeader){V++;}if(V>this._iItemCount){break;}W.push(a[i]);}a=W;}},G=function(){var V=[],W,X,Y={key:""};for(var i=0;i<a.length;i++){W=a[i];X=this._formatGroupBy(W.getDateTime(),this.getGroupByType());if(X.key!=Y.key){V.push(this._createGroupHeader(X,true));Y=X;}V.push(W);}return V;},H=function(){var V;if(!this._maxDate&&!this._minDate){if(this.getSort()||this._isGrouped()){for(var i=0;i<I.length;i++){V=I[i];if(!V._isGroupHeader){this._sortOrder===y.ASCENDING?this._minDate=V.getDateTime():this._maxDate=V.getDateTime();break;}}}}},K,N,O,P;H.call(this);if((!this._useBinding()||!this._useModelFilter())&&this.getSort()){I=this._sort(I);}a=this._useModelFilter()?I:this._clientFilter(I);a=a.filter(function(U){return!U._isGroupHeader;});this._showMore=this.getForceGrowing();if(!this._showMore&&this._displayShowMore()){this._showMore=a.length>this._iItemCount;if(!this._showMore&&this._useModelFilter()){this._showMore=a.length===this._iItemCount&&this._iItemCount<this._getMaxItemsCount();}}a=a.filter(function(U){return U.getVisible();});b.call(this);this._outputItem=[];if(this._isGrouped()){if(!this._useBinding()){I=G.call(this);}var Q=I.filter(function(V){return V._isGroupHeader;});this._groupCount=Q.length;for(var i=0;i<Q.length;i++){K=Q[i];O=K.getUserName();P=true;K._groupID=O;for(var k=0;k<a.length;k++){var U=a[k];N=this._formatGroupBy(U.getDateTime(),this.getGroupByType());if(N.key==O&&!U._isGroupHeader){if(P){this._outputItem.push(K);P=false;}U._groupID=O;this._outputItem.push(U);}}}}else{this._outputItem=q.extend(true,[],a);}};
v.prototype._getMaxItemsCount=function(){var b=this.getBinding("content"),a,i,k;if(b){k=b.getLength()||0;a=b.getModel();i=a&&a.iSizeLimit;return Math.min(k,i||k);}return this.getContent().length;};
v.prototype._showCustomMessage=function(){var b=!!this._customMessage,$=this._objects.getMessageStrip().$();this._objects.getMessageStrip().setVisible(b);this._objects.getMessageStrip().setText(this._customMessage);if(b){$.show();}else{$.hide();}};
v.prototype._performExpandCollapse=function(G,b){var a=this,$,i=this.$(),k=b?"slideDown":"slideUp",H=250;i.find('li[groupid="'+G+'"][nodeType="GroupHeaderBar"]').each(function(I,K){var N=q(K);if(!b){N.addClass("sapSuiteUiCommonsTimelineItemGroupCollapsedBar");}else{N.removeClass("sapSuiteUiCommonsTimelineItemGroupCollapsedBar");}});$=i.find('li[groupid="'+G+'"][nodeType!="GroupHeader"][nodeType!="GroupHeaderBar"]');return new Promise(function(I,K){if(a._noAnimation){if(b){$.show();}else{$.hide();}I();}else{if(a._isVertical()){$[k](H);}else{$.animate({width:'toggle'},350);}$.promise().done(function(){I();});}});};
v.prototype._itemRendered=function(){if(this._bRendered){this.adjustUI();}};
v.prototype._startItemNavigation=function(a){var i=this._getItemsForNavigation(),$=this.$("content").get(0)||this.$("contentH").get(0),G=function(b,O){return O.filter(function(I){return I.getFocusDomRef()===b;});};if(!this.oItemNavigation){this.oItemNavigation=new T($,i.items,false,i.rows);this.oItemNavigation.setPageSize(10);this.oItemNavigation.attachEvent("AfterFocus",function(a){var b=this.oItemNavigation.getItemDomRefs()[a.getParameter("index")],k=G(b,this._outputItem);if(k[0]){this.fireSelect({selectedItem:k[0],userAction:a.mParameters.event&&a.mParameters.event.type==="mousedown"});}},this);this.oItemNavigation.attachEvent("Enter",function(a){var b=G(a.getParameter("domRef"),this._outputItem);if(b[0]){this.fireSelect({selectedItem:b[0],userAction:true});}},this);this.addDelegate(this.oItemNavigation);}else{this.oItemNavigation.updateReferences($,i.items,i.rows);}if(i.columns){this.oItemNavigation.setColumns(i.columns,false);}};
v.prototype._getItemsForNavigation=function(){var I={},a,b,k,G,H;if(this._renderDblSided){if(this._isVertical()){I.items=this._outputItem;I.rows=[];G=[];I.items.forEach(function(i){var $=i.$(),K=$.hasClass("sapSuiteUiCommonsTimelineItemWrapperVLeft")||$.hasClass("sapSuiteUiCommonsTimelineItemOdd");if(K&&G.length===1){G.push(null);}else if(!K&&G.length===0){G.push(null);}if(G.length>1){I.rows.push(G);G=[];}G.push(i);});if(G.length>0){I.rows.push(G);}}else{b=[];k=[];this._outputItem.forEach(function(i){if(i._placementLine==="top"){b.push(i);}else{while(k.length+1<b.length){k.push(null);}k.push(i);}});I.items=this._outputItem;I.rows=[b,k];}}else{I.items=this._outputItem;}I.items=I.items.map(function(i){return i.getFocusDomRef();});if(I.rows){H=0;I.rows=I.rows.map(function(i){if(i.length>H){H=i.length;}return i.map(function(K){return K===null?null:K.getFocusDomRef();});});I.rows.forEach(function(i){while(i.length<H){i.push(null);}});}if(this._showMore){a=this._objects.getMoreButton().getFocusDomRef();I.items.push(a);if(I.rows){if(this._isVertical()){if(I.rows.length>0){I.rows.push(I.rows[0].map(function(V,i,K){if(i===K.length-1){return a;}else{return null;}}));}else{I.rows.push([a]);}}else{I.rows.forEach(function(K,i,N){if(i===N.length-1){K.push(a);}else{K.push(null);}});}}}return I;};
v.prototype.setShowItemFilter=function(b){this.setProperty("showItemFilter",b,true);if(this._objects.isObjectInitialized("FilterContent")){this._setupFilterFirstPage(this._objects.getFilterContent());}this._objects.getFilterIcon().setVisible(b||this.getShowTimeFilter());return this;};
v.prototype.setShowTimeFilter=function(b){this.setProperty("showTimeFilter",b,true);if(this._objects.isObjectInitialized("FilterContent")){this._setupFilterFirstPage(this._objects.getFilterContent());}this._objects.getFilterIcon().setVisible(b||this.getShowItemFilter());return this;};
v.prototype._getFilterTitle=function(){var V=this.getFilterTitle();if(!V){V=x.getText("TIMELINE_FILTER_ITEMS");}return V;};
v.prototype.getNoDataText=function(){var a=this.getProperty("noDataText");if(!a){a=x.getText('TIMELINE_NO_DATA');}return a;};
v.prototype.setSortOldestFirst=function(O){this._sortOrder=O?y.ASCENDING:y.DESCENDING;this._objects.getSortIcon().setIcon(this._sortOrder===y.ASCENDING?"sap-icon://arrow-bottom":"sap-icon://arrow-top");this._objects.getSortIcon().setTooltip(this._sortOrder===y.ASCENDING?x.getText("TIMELINE_SORT_ASCENDING"):x.getText("TIMELINE_SORT_DESCENDING"));this.setProperty("sortOldestFirst",O);return this;};
v.prototype.setGrowingThreshold=function(a){this.setProperty("growingThreshold",a,true);this._iItemCount=a;return this;};
v.prototype.setShowHeaderBar=function(a){this.setProperty("showHeaderBar",a,true);this._objects.getHeaderBar().setVisible(a);return this;};
v.prototype.setSort=function(b){this.setProperty("sort",b);this._objects.getSortIcon().setVisible(b&&this.getShowSort());return this;};
v.prototype.setAxisOrientation=function(a){this.setProperty("axisOrientation",a);if(this._oScroller){this._oScroller.destroy();this._oScroller=null;}return this;};
v.prototype.setEnableDoubleSided=function(a){this.setProperty("enableDoubleSided",a);this._renderDblSided=a;return this;};
v.prototype.getCurrentFilter=function(){return this._currentFilterKeys.map(function(i){return{key:i.key,text:i.text||i.key};});};
v.prototype.reset=function(){this._iItemCount=0;this._aFilterList=[];this._collapsedGroups={};this._renderDblSided=null;this._groupId=0;this._lastScrollPosition={x:0,y:0,more:0};this._sortOrder=this.getSortOldestFirst()?y.ASCENDING:y.DESCENDING;this._scrollersSet=false;this._currentFilterKeys=[];this._bRendered=false;this._noAnimation=true;};
v.prototype.setShowFilterBar=function(a){this.setProperty("showFilterBar",a,true);this.setShowHeaderBar(a);return this;};
v.prototype.setShowSearch=function(a){this.setProperty("showSearch",a,true);this._objects.getSearchField().setVisible(!!a);return this;};
v.prototype.setShowSort=function(b){this.setProperty("showSort",b,true);this._objects.getSortIcon().setVisible(this.getSort()&&b);return this;};
v.prototype.setCustomMessage=function(a){this._customMessage=a;this._showCustomMessage();return this;};
v.prototype.getHeaderBar=function(){return this._objects.getHeaderBar();};
v.prototype.getMessageStrip=function(){return this._objects.getMessageStrip();};
v.prototype.setContent=function(a){this.removeAllContent();var b=0;for(var i=0;i<a.length;i++){var I=a[i];if(I instanceof h){if(this._isGrouped()){var G=this._formatGroupBy(I.getDateTime(),this.getGroupByType());if(G.key!==b.key){this._createGroupHeader(G);b=G;}}this.addContent(I);}}this._iItemCount=0;return this;};
v.prototype.setData=function(a){var I="sapsuiteuicommonsTimelineInternalModel",i=new J(),P,b,k=function(H,K){var N=new h({dateTime:K.getProperty("dateTime"),icon:K.getProperty("icon"),userName:K.getProperty("userName"),title:K.getProperty("title"),text:K.getProperty("text"),filterValue:K.getProperty("filterValue")});if(K.getProperty("content")){N.setEmbeddedControl(K.getProperty("content"));}return N;},G=function(P,H){var K=P;if(H){K=H+">"+P;}return K;};if(typeof a==="undefined"){return this;}P=G("/",I);i.setData(a);this.setModel(i,I);this.setProperty("data",a,true);b={path:P,sorter:this._getDefaultSorter('dateTime',this.getSortOldestFirst()),factory:q.proxy(k,this)};if(this._isGrouped()){b.groupHeaderFactory=q.proxy(this._getGroupHeader,this);}this.bindAggregation("content",b);return this;};
v.prototype.getSuspendSocialFeature=function(){return this._suspenseSocial;};
v.prototype.setSuspendSocialFeature=function(b){this._suspenseSocial=b;if(!this.getEnableSocial()){return;}var I=this.getContent();for(var i=0;i<I.length;i++){I[i]._objects.getReplyLink().setEnabled(!b);}this.invalidate();return this;};
v.prototype.updateFilterList=function(){this.updateAggregation("filterList");this._setFilterList();};
v.prototype.setGroupByType=function(a){var b=this.getBindingInfo("content");this.setProperty("groupByType",a);if(b){this._bindGroupingAndSorting(b);this.updateAggregation("content");}return this;};
v.prototype.getGroup=function(){return this.getGroupByType()!=="None";};
v.prototype.setGroup=function(G){if(G&&this.getGroupByType()===s.None){this.setGroupByType(s.Year);}if(!G){this.setGroupByType(s.None);}return this;};
v.prototype.setGrowing=function(G){if(!G){this.setGrowingThreshold(0);}return this;};
v.prototype.getGrowing=function(G){return this.getGrowingThreshold()!==0;};
v.prototype.setEnableBackendFilter=function(b){this.setProperty("enableModelFilter",b);return this;};
v.prototype.getEnableBackendFilter=function(){return this.getProperty("enableModelFilter");};
v.prototype._isGrouped=function(){return(this.getGroupByType()!==s.None||this._fnCustomGroupBy)&&(this.getGroupBy()!=="");};
v.prototype._lazyLoading=function(){return this.getEnableScroll()&&this.getLazyLoading();};
v.prototype._loadAllData=function(a){return!this._useModelFilter(a);};
v.prototype._isVertical=function(){return u.Vertical===this.getAxisOrientation();};
v.prototype._displayShowMore=function(){return this.getForceGrowing()||(this.getGrowingThreshold()!==0&&!this._lazyLoading());};
v.prototype._useGrowing=function(){return this.getForceGrowing()||this.getGrowingThreshold()!==0||this._lazyLoading();};
v.prototype._isMaxed=function(){return this._iItemCount>=this._getMaxItemsCount();};
v.prototype._useModelFilter=function(a){return this.getEnableModelFilter()&&(a||this._useTemplateBinding()||this._useFactoryBinding());};
v.prototype._scrollingFadeout=function(a){return this.getScrollingFadeout()!==p.None&&this.getEnableScroll();};
v.prototype._setBusy=function(b){if(this.getEnableBusyIndicator()){this.setBusy(b);}};
v.prototype._fireSelectionChange=function(P){return this.fireEvent("filterSelectionChange",P,true);};
v.prototype._isLeftAlignment=function(){return this.getAlignment()===r.Left||this.getAlignment()===r.Top;};
v.prototype._useBinding=function(b){return this.getBindingInfo("content")!=null;};
v.prototype._useTemplateBinding=function(){var a=this.getBindingInfo("content");return a&&a.template!=null;};
v.prototype._useFactoryBinding=function(){var a=this.getBindingInfo("content");return a&&a.factory!=null;};
v.prototype._useAutomaticHeight=function(){return this.getTextHeight().toLowerCase()==="automatic"&&!this._isVertical();};
v.prototype._getItemsCount=function(){return this._outputItem?this._outputItem.length:0;};
j.extendTimeline(v);return v;});
sap.ui.predefine('sap/suite/ui/commons/TimelineFilterListItem',['./library','sap/ui/core/Control'],function(l,C){"use strict";
var T=C.extend("sap.suite.ui.commons.TimelineFilterListItem",{metadata:{library:"sap.suite.ui.commons",properties:{key:{type:"string",group:"Data",defaultValue:null},text:{type:"string",group:"Misc",defaultValue:null}}}});
return T;});
sap.ui.predefine('sap/suite/ui/commons/TimelineItem',["sap/ui/thirdparty/jquery","sap/ui/core/Control","sap/m/Text","sap/m/Toolbar","sap/m/Link","sap/m/TextArea","sap/m/Popover","sap/m/ToolbarSpacer","sap/m/Button","sap/ui/Device","sap/suite/ui/commons/util/ManagedObjectRegister","sap/suite/ui/commons/util/DateUtils","sap/ui/core/Icon","sap/m/library","sap/ui/core/format/DateFormat","sap/ui/base/Object","sap/ui/dom/containsOrEquals","sap/base/security/encodeXML","./TimelineItemRenderer"],function(q,C,T,a,L,b,P,c,B,D,M,d,I,l,e,f,g,h,j){"use strict";var k=l.PlacementType;var m=l.ToolbarDesign;var A=l.Avatar;var n=l.AvatarShape;var o=l.AvatarSize;
var p=C.extend("sap.suite.ui.commons.TimelineItem",{metadata:{library:"sap.suite.ui.commons",properties:{dateTime:{type:"any",group:"Misc",defaultValue:null},filterValue:{type:"string",group:"Misc",defaultValue:null},icon:{type:"string",group:"Misc",defaultValue:null},iconDisplayShape:{type:"sap.m.AvatarShape",defaultValue:n.Circle},iconInitials:{type:"string",defaultValue:""},iconSize:{type:"sap.m.AvatarSize",defaultValue:o.XS},iconTooltip:{type:"string",group:"Misc",defaultValue:null},useIconTooltip:{type:"boolean",group:"Accessibility",defaultValue:true},maxCharacters:{type:"int",group:"Behavior",defaultValue:null},replyCount:{type:"int",group:"Misc",defaultValue:null},status:{type:"string",group:"Misc",defaultValue:null},title:{type:"string",group:"Misc",defaultValue:null},text:{type:"string",group:"Misc",defaultValue:null},userName:{type:"string",group:"Misc",defaultValue:null},userNameClickable:{type:"boolean",group:"Misc",defaultValue:false},userPicture:{type:"sap.ui.core.URI",group:"Misc",defaultValue:null}},defaultAggregation:"embeddedControl",aggregations:{customAction:{type:"sap.ui.core.CustomData",multiple:true,singularName:"customAction"},customReply:{type:"sap.ui.core.Control",multiple:false},embeddedControl:{type:"sap.ui.core.Control",multiple:false},replyList:{type:"sap.m.List",multiple:false},suggestionItems:{type:"sap.m.StandardListItem",multiple:true,singularName:"suggestionItem",deprecated:true}},events:{userNameClicked:{parameters:{uiElement:{type:"sap.ui.core.Control"}}},replyPost:{parameters:{value:{type:"string"}}},replyListOpen:{},customActionClicked:{parameters:{value:{type:"string"},key:{type:"string"},linkObj:{type:"sap.m.Link"}}},suggest:{deprecated:true,parameters:{suggestValue:{type:"string"}}},suggestionItemSelected:{deprecated:true,parameters:{selectedItem:{type:"sap.ui.core.Item"}}}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}}}});
var r=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons"),S={"Warning":"sapSuiteUiCommonsTimelineStatusWarning","Error":"sapSuiteUiCommonsTimelineStatusError","Success":"sapSuiteUiCommonsTimelineStatusSuccess","Information":"sapSuiteUiCommonsTimelineStatusInformation"};
p.prototype.init=function(){this._customReply=false;this._objects=new M();this._nMaxCharactersMobile=500;this._nMaxCharactersDesktop=800;this._sTextShowMore=r.getText("TIMELINE_TEXT_SHOW_MORE");this._registerControls();this._registerPopup();this._orientation="V";};
p.prototype.setCustomMessage=function(i){this._objects.getInfoText().setText(i);this._objects.getInfoBar().setVisible(i&&i.length>0);this.invalidate();};
p.prototype.setDateTime=function(i){i=d.parseDate(i);this.setProperty("dateTime",i);return this;};
p.prototype.applyFocusInfo=function(){this.focus();this.getParent()._moveScrollBar(true);};
p.prototype.getFocusDomRef=function(){return this.$("outline")[0];};
p.prototype._replyPost=function(){var i=this._objects.getReplyInputArea().getValue();this.fireReplyPost({value:i});};
p.prototype._registerPopup=function(){var t=this;this._objects.register("fullText",function(){var i=new T(t.getId()+"-fullText",{text:t.getText()});i.addStyleClass("sapSuiteUiCommonsTimelineItemPopoverText");return i;});this._objects.register("fullTextPopover",function(){var i=new P({placement:k.Bottom,showArrow:false,showHeader:false,contentMinWidth:'300px',contentWidth:'450px',resizable:true,content:[t._objects.getFullText()]});i.addStyleClass("sapSuiteUiCommonsTimelineItemShowMorePopover");return i;});};
p.prototype._openReplyDialog=function(){if(this._customReply){this.getCustomReply().openBy(this._objects.getReplyLink());this.fireReplyListOpen();}else{this.fireReplyListOpen();this._objects.getReplyInputArea().setValue('');this._oldReplyInputArea='';this._list=this.getReplyList();if(this._list!==null){this.setAggregation("replyList",null,true);this._objects.getReplyPop().addContent(this._list);}this._objects.getReplyPop().addContent(this._objects.getReplyInputArea());this._objects.getReplyPop().openBy(this._objects.getReplyLink());}};
p.prototype._callParentFn=function(){var i=Array.prototype.slice.call(arguments),N=i.shift(),s=this.getParent();if(s&&(typeof s[N]==="function")){return s[N].apply(s,i);}};
p.prototype._getCorrectGroupIcon=function(){var i="",s=function(){return this.getParent()&&this.getParent()._renderDblSided;}.bind(this),t=this._isGroupCollapsed();if(this._orientation==="H"){i="sap-icon://navigation-right-arrow";if(!t){i=this._callParentFn("_isLeftAlignment")||s()?"sap-icon://navigation-down-arrow":"sap-icon://navigation-up-arrow";}}else{i="sap-icon://navigation-down-arrow";if(t){i=this._callParentFn("_isLeftAlignment")||s()?"sap-icon://navigation-right-arrow":"sap-icon://navigation-left-arrow";}}return i;};
p.prototype.onclick=function(E){var t=this;if(g(this.$("outline").get(0),E.target)){if(this._isGroupHeader){t._performExpandCollapse(t._groupID);}}};
p.prototype._performExpandCollapse=function(G){var i=false,E=this._isGroupCollapsed(G);var s=function(K,N){var O=K.find(".sapSuiteUiCommonsTimelineItemBarV"),Q,R;if(N.get(0)){Q=N.attr("groupId");R=!this._isGroupCollapsed(Q);if(R){O.addClass("sapSuiteUiCommonsTimelineGroupNextExpanded");}else{O.removeClass("sapSuiteUiCommonsTimelineGroupNextExpanded");}}}.bind(this),t=function(){var K,N,O;if(!i){K=this._objects.getGroupCollapseIcon&&this._objects.getGroupCollapseIcon();N=this.$();O=this._isGroupCollapsed();if(!O){N.removeClass("sapSuiteUiCommonsTimelineGroupCollapsed");N.addClass("sapSuiteUiCommonsTimelineGroupExpanded");}else{N.addClass("sapSuiteUiCommonsTimelineGroupCollapsed");N.removeClass("sapSuiteUiCommonsTimelineGroupExpanded");}K.setSrc(this._getCorrectGroupIcon());i=true;}}.bind(this),u=function(){if(this.getParent()){this.getParent()._collapsedGroups[G]=!E;}}.bind(this),$=this.$(),v=this,w=$.parent(),x,y,z,F,H,J;u();if(this._orientation==="H"){x=this.$("line");}else{x=$.find(".sapSuiteUiCommonsTimelineGroupHeaderBarWrapper");y=w.next().children("li").first();z=w.prev().children(":visible:last");if(z.get(0)){s(z,$);}if(E){F=w.children().last();s(F,y);}else{s($,y);}}if(E){x.hide();}else{x.show();}J=$.find(".sapSuiteUiCommonsTimelineGroupHeaderMainWrapper");J.attr("aria-expanded",!!E);if(E){J.attr("aria-label",r.getText("TIMELINE_ACCESSIBILITY_GROUP_HEADER")+": "+J.prevObject[0].outerText+" "+r.getText("TIMELINE_ACCESSIBILITY_GROUP_EXPAND"),true);}else{J.attr("aria-label",r.getText("TIMELINE_ACCESSIBILITY_GROUP_HEADER")+": "+J.prevObject[0].outerText+" "+r.getText("TIMELINE_ACCESSIBILITY_GROUP_COLLAPSE"),true);}if(this._orientation!=="H"||E){t();}H=this._callParentFn("_performExpandCollapse",G,E,this);if(H){return new Promise(function(K,N){H.then(function(){t();v._callParentFn("_performUiChanges");K();});});}};
p.prototype._getStatusColorClass=function(){var s=this.getStatus();return S[s]||"";};
p.prototype._getLineIcon=function(){var t=this,i;this._objects.register("lineIcon",function(){var s="sap-icon://circle-task",u=t.getText()==="GroupHeader";if(!u){s=t.getIcon()?t.getIcon():"sap-icon://activity-items";}i=new I(t.getId()+'-icon',{src:s,tooltip:t.getIconTooltip(),useIconTooltip:t.getUseIconTooltip()});i.addStyleClass("sapSuiteUiCommonsTimelineBarIcon");return i;});return this._objects.getLineIcon();};
p.prototype._isGroupCollapsed=function(i){var s=this.getParent();i=i||this._groupID;return s&&s._collapsedGroups&&s._collapsedGroups[i];};
p.prototype._getCollapsedText=function(){var s=this.getText().substring(0,this._nMaxCollapsedLength);var i=s.lastIndexOf(" ");if(i>0){this._sShortText=s.substr(0,i);}else{this._sShortText=s;}return this._sShortText;};
p.prototype._toggleTextExpanded=function(E){var t=this,i=E.getSource(),$=i.$(),s=this.$("realtext"),u=$.height(),v=$.position().top,w=s.parent().position().top,x=$.parent().prev(),y,z,N=this.getParent()&&this.getParent()._noAnimation,O=8,F=function(){return t.getParent()&&t.getParent()._renderDblSided;},G=function(V,Q,R){x.css("-webkit-line-clamp",R);if(F()||N){x.css("height",V);t._callParentFn("_performUiChanges");}else{x.animate({height:Q},250,t._callParentFn("_performUiChanges"));}};if(this._orientation==="V"){z=this.$("threeDots");y=x.children().first();if(!this._expanded){this._textProperties={height:x.css("height"),clamp:x.css("-webkit-line-clamp"),text:y.html()};x.attr("expanded",true);z.hide();y.html(this._encodeHTMLAndLineBreak(this.getText()));var H=r.getText("TIMELINE_TEXT_SHOW_LESS");i.setText(H);i.rerender();G("",y.height(),"");}else{x.attr("expanded",false);i.setText(this._sTextShowMore);i.rerender();z.show();y.html(this._textProperties.text);G(this._textProperties.height,this._textProperties.height,this._textProperties.clamp);}t._expanded=!t._expanded;}else{var J=w-v-u-O,W=q(window).height()-$.offset().top,K=200;if(W<K){J-=(K-W);}this._objects.getFullText().setText(this.getText());this._objects.getFullTextPopover().setOffsetY(Math.floor(J));this._objects.getFullTextPopover().openBy(this._objects.getExpandButton());}};
p.prototype._getButtonExpandCollapse=function(){var t=this;this._objects.register("expandButton",function(){return new L(t.getId()+"-fullTextBtn",{text:t._sTextShowMore,press:t._toggleTextExpanded.bind(t)});});return this._objects.getExpandButton();};
p.prototype._checkTextIsExpandable=function(){this._nMaxCollapsedLength=this.getMaxCharacters();if(this._nMaxCollapsedLength===0){this._nMaxCollapsedLength=D.system.phone?this._nMaxCharactersMobile:this._nMaxCharactersDesktop;}return this.getText().length>this._nMaxCollapsedLength;};
p.prototype.onBeforeRendering=function(){var t=this;if(!this._list){this._list=this.getReplyList();}if(this.getReplyCount()>0){this._objects.getReplyLink().setText(r.getText("TIMELINE_REPLY")+" ("+this.getReplyCount()+")");}else if(this._list&&this._list.getItems().length>0){this._objects.getReplyLink().setText(r.getText("TIMELINE_REPLY")+" ("+this._list.getItems().length+")");}this._objects.getSocialBar().removeAllContent();if(this._callParentFn("getEnableSocial")){this._objects.getSocialBar().addContent(this._objects.getReplyLink());}this._actionList=this.getCustomAction();function F(E,w){t.fireCustomActionClicked({"value":w.value,"key":w.key,"linkObj":this});}for(var i=0;i<this._actionList.length;i++){var s=this._actionList[i].getKey();var v=this._actionList[i].getValue();var u=new L({text:v,tooltip:s});u.addStyleClass("sapSuiteUiCommonsTimelineItemActionLink");u.attachPress({"value":v,"key":s},F);this._objects.getSocialBar().addContent(u);}};
p.prototype._encodeHTMLAndLineBreak=function(t){return h(t).replace(/&#xa;/g,"<br>");};
p.prototype._getUserPictureControl=function(){var u=this.getUserPicture(),i=this.getIconInitials(),s=this.getIconDisplayShape(),t=this.getIconSize();if(!u){return null;}this._objects.register("userPictureControl",function(){var v=new A({src:u,initials:i,displayShape:s,displaySize:t,tooltip:r.getText("TIMELINE_USER_PICTURE")});return v;});return this._objects.getUserPictureControl();};
p.prototype._getUserNameLinkControl=function(){var t=this;if(this.getUserNameClickable()){this._objects.register("userNameLink",function(){var i=new L(t.getId()+"-userNameLink",{text:t.getUserName(),press:function(E){t.fireUserNameClicked({uiElement:this});}});i.addStyleClass("sapUiSelectable");return i;});return this._objects.getUserNameLink();}};
p.prototype.onAfterRendering=function(){this._expanded=false;this._callParentFn("_itemRendered");};
p.prototype._registerControls=function(){var t=this;this._objects.register("infoText",new T(this.getId()+"-infoText",{maxLines:1,width:"100%"}));this._objects.register("infoBar",new a(this.getId()+"-infoBar",{id:this.getId()+"-customMessageInfoBar",content:[this._objects.getInfoText()],design:m.Info,visible:false}));this._objects.register("replyLink",function(){var i=new L(t.getId()+"-replyLink",{text:r.getText("TIMELINE_REPLY"),press:[t._openReplyDialog,t]});i.addStyleClass("sapSuiteUiCommonsTimelineItemActionLink");return i;});this._objects.register("socialBar",function(){var s=new a(t.getId()+"-socialBar",{});s.data("sap-ui-fastnavgroup",null);return s;});this._objects.register("replyInputArea",new b(this.getId()+"-replyInputArea",{height:"4rem",width:"100%"}));this._objects.register("replyPop",function(){return new P(t.getId()+"-replyPop",{initialFocus:t._objects.getReplyInputArea(),title:r.getText("TIMELINE_REPLIES"),placement:k.Vertical,footer:new a({content:[new c(),new B(t.getId()+"-replyButton",{text:r.getText("TIMELINE_REPLY"),press:function(){t._replyPost();t._objects.getReplyPop().close();}})]}),contentHeight:"15rem",contentWidth:"20rem"});});};
p.prototype.exit=function(){this._objects.destroyAll();};
p.prototype.getDateTimeWithoutStringParse=function(){var i=this.getProperty("dateTime");return d.parseDate(i,false)||"";};
p.prototype.setCustomReply=function(R){if(R){this._customReply=true;this.setAggregation("customReply",R,true);}else{this._customReply=false;}return this;};
p.prototype.setReplyList=function(i){if(i===null){return this;}this.setAggregation("replyList",i,true);var t=this;this.getReplyList().attachUpdateFinished(function(E){var F=t._objects.getReplyInputArea().getDomRef("inner");if(F){q(F.id).focus();}});return this;};
p.prototype.getDateTime=function(){var i=this.getProperty("dateTime");i=d.parseDate(i);if(typeof(i)==="string"&&this instanceof sap.suite.ui.commons.TimelineItem&&this.getBindingPath("dateTime")&&this.getBindingContext()){var s=this.getBindingPath("dateTime");var t=this.getBindingContext().getProperty(s);if(t instanceof Date){return t;}else{return i;}}else{return i;}};
return p;});
sap.ui.predefine('sap/suite/ui/commons/TimelineItemRenderer',["./library","sap/suite/ui/commons/util/HtmlElement","sap/ui/core/format/DateFormat","sap/ui/core/Icon","sap/base/security/encodeXML","sap/base/security/encodeCSS"],function(l,H,D,I,e,a){"use strict";var T=l.TimelineAlignment;var b={};var r=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons"),M=24*60*60*1000;
b.render=function(R,t){this._getTimelineItemElement(t).getRenderer().render(R);};
b._getTimelineItemElement=function(t){if(t._orientation==="V"){return this._getVerticalTimelineItemElement(t);}else{return this._getHorizontalTimelineItemElement(t);}};
b._getFormatedDateTime=function(t,A){A=A||{};var R=A.resBundle||r,d=A.dateFormat||D.getDateInstance({style:"short"}),o=A.timeFormat||D.getTimeInstance({style:"short"}),c=t.getDateTimeWithoutStringParse(),f,g,i,C;if(!(c instanceof Date)||(isNaN(c.getTime()))){return c;}f=Date.UTC(c.getFullYear(),c.getMonth(),c.getDate());g=new Date();g=Date.UTC(g.getFullYear(),g.getMonth(),g.getDate());i=Math.floor((g-f)/M);switch(i){case 0:C=R.getText("TIMELINE_TODAY");break;case 1:C=R.getText("TIMELINE_YESTERDAY");break;default:C=d.format(c);}return C+" "+R.getText("TIMELINE_AT")+" "+o.format(c);};
b._getHorizontalTimelineItemElement=function(t){var i=(t._placementLine==="top"),s=i?"sapSuiteUiCommonsTimelineItemHTop":"sapSuiteUiCommonsTimelineItemHBottom",c=t.getText()==="GroupHeader",g=t._groupID,A,o;if(c){return this._getGroupHeaderElement(t);}var d=new H("li"),f=new H("div"),h=new H("div"),j=new H("div"),k=new H("div"),m=new H("div"),n=new H("div"),p=this._getTimelineItemShell(t);if(g){d.setAttribute("groupid",t._groupID,true);}if(t._isFirstGroupEvenItem){d.setAttribute("firstgroupevenitem",t._isFirstGroupEvenItem);}d.addControlData(t);d.addClass("sapSuiteUiCommonsTimelineItemLiWrapperV");d.addClass(e(s));f.addClass("sapSuiteUiCommonsTimelineItemWrapperH sapSuiteUiCommonsTimelineItemBaseLength");d.addChild(f);h.addClass("sapSuiteUiCommonsTimelineItemBubbleSpacer");f.addChild(h);j.addClass("sapSuiteUiCommonsTimelineItemBubble");h.addChild(j);k.addClass("sapSuiteUiCommonsTimelineItemOutline");k.setId(t.getId()+"-outline");k.setAttribute("tabindex","0");this._addAccessibilityTags(k,t);m.addClass("sapSuiteUiCommonsTimelineItemBox");k.addChild(m);n.addClass("sapSuiteUiCommonsTimelineItemArrow");if(i){j.addChild(k);j.addChild(n);}else{j.addChild(n);j.addChild(k);}if(!t._callParentFn("_isGrouped")&&t._callParentFn("getEnableDoubleSided")&&t._index===1){o=t.getParent();A="margin-left";if(o&&o._bRtlMode){A="margin-right";}d.addStyle(a(A),"100px");}m.addChild(p);if(t._isGroupCollapsed()){d.addStyle("display","none");}return d;};
b._getGroupHeaderElement=function(t){var c=new H("li"),d=new H("div"),f=new H("div"),g=new H("div"),h=new H("div"),i=new H("div"),j=new H("span"),k=new H("div"),m=new H("div"),n=new H("div"),o=t._orientation==="V"?f:g,p=new H("div"),q=new H("div"),s=new H("div");var u=t._isGroupCollapsed(),S=t._callParentFn("getShowIcons"),v;if(t._groupID){c.setAttribute("groupid",t._groupID,true);}if(t._isLastGroup){c.addClass("sapSuiteUiCommonsTimelineLastItem");}c.addControlData(t);c.addClass("sapSuiteUiCommonsTimelineGroupHeader");c.setAttribute("role","presentation");c.addChild(d);d.addChild(f);d.addClass("sapSuiteUiCommonsTimelineGroupHeaderDirectChild");f.addClass("sapSuiteUiCommonsTimelineGroupHeaderMainWrapper");f.setId(t.getId()+"-outline");f.setAttribute("tabindex","0");this._addAccessibilityTags(f,t,true);f.setAttribute("data-sap-ui-fastnavgroup",true);f.addChild(g);c.addChild(n);c.setAttribute("nodeType","GroupHeader");h.addClass("sapSuiteUiCommonsTimelineGroupHeaderSpanWrapper");if(t._orientation==="V"){c.addClass(t._position===T.Left?"sapSuiteUiCommonsTimelineItemWrapperVLeft":"sapSuiteUiCommonsTimelineItemWrapperVRight");}g.addClass("sapSuiteUiCommonsTimelineGroupHeaderWrapper");g.addClass("sapSuiteUiCommonsTimelineGroupHeaderPointer");o.addChild(i);g.addChild(m);g.addChild(h);c.addClass(u?"sapSuiteUiCommonsTimelineGroupCollapsed":"sapSuiteUiCommonsTimelineGroupExpanded");m.addClass("sapSuiteUiCommonsTimelineGroupHeaderIconWrapper");v=t._getCorrectGroupIcon();t._objects.register("groupCollapseIcon",function(){var w=new I(t.getId()+"-groupCollapseIcon",{src:v,decorative:true});w.addStyleClass("sapSuiteUiCommonsTimelineGroupHeaderPointer");w.setParent(t);return w;});m.addChild(t._objects.getGroupCollapseIcon());i.addClass("sapSuiteUiCommonsTimelineItemArrow");n.addClass("sapSuiteUiCommonsTimelineGroupHeaderLineWrapper");k.addClass("sapSuiteUiCommonsTimelineGroupHeaderLine");n.addChild(k);h.addChild(j);j.addClass("sapSuiteUiCommonsTimelineGroupHeaderSpan");j.addChildEscaped(" "+t.getTitle());if(t._orientation==="V"){c.addChild(p);q.addChild(t._getLineIcon());p.addChild(q);q.addClass("sapSuiteUiCommonsTimelineItemBarIconWrapperV");p.addClass("sapSuiteUiCommonsTimelineGroupHeaderBarWrapper");if(!t._isGroupCollapsed()){p.addStyle("display","none");}s.addClass("sapSuiteUiCommonsTimelineItemBarV");if(!S){s.addClass("sapSuiteUiCommonsTimelineItemBarNoIcon");}p.addChild(s);if(t._additionalBarClass){s.addClass(e(t._additionalBarClass));}}return c;};
b._getVerticalTimelineItemElement=function(t){var c=new H("li"),d=new H("div"),f=new H("div"),g=new H("div"),h=new H("div"),i=new H("div"),j=new H("div"),k=new H("div"),m=new H("div"),n=new H("div"),o=new H("div"),p;var s=t._callParentFn("getShowIcons"),G=t._groupID,q=t.getText()==="GroupHeader",S=t._getStatusColorClass();if(q){return this._getGroupHeaderElement(t);}if(G){c.setAttribute("groupID",G,true);}c.addControlData(t);c.addClass("sapSuiteUiCommonsTimelineItem");c.setAttribute("aria-labelledby",t.getAriaLabelledBy().join(" "),true);c.setAttribute("role","presentation");if(t._isLast){c.addClass("sapSuiteUiCommonsTimelineLastItem");}d.addClass(q?"sapSuiteUiCommonsTimelineItemWrapperGrp":"sapSuiteUiCommonsTimelineItemWrapperV");c.addChild(d);d.addClass(t._position===T.Left?"sapSuiteUiCommonsTimelineItemWrapperVLeft":"sapSuiteUiCommonsTimelineItemWrapperVRight");d.addChild(h);d.addChild(f);f.addClass("sapSuiteUiCommonsTimelineItemBarWrapperV");g.addClass("sapSuiteUiCommonsTimelineItemBarIconWrapperV");if(S){g.addClass(e(S));}else{g.addClass("sapSuiteUiCommonsTimelineNoStatus");}if(s){f.addChild(g);g.addChild(t._getLineIcon('',G));}else{o.addChild(n);o.addClass("sapSuiteUiCommonsTimelineItemNoIconWrapper");n.addClass("sapSuiteUiCommonsTimelineItemNoIcon");f.addChild(o);if(S){n.addClass(e(S));}i.addClass("sapSuiteUiCommonsTimelineItemBarNoIcon");}i.addClass("sapSuiteUiCommonsTimelineItemBarV");f.addChild(i);if(t._additionalBarClass){i.addClass(e(t._additionalBarClass));}h.addClass("sapSuiteUiCommonsTimelineItemBubble");m.addClass("sapSuiteUiCommonsTimelineItemArrow");h.addChild(m);h.addChild(k);k.addClass("sapSuiteUiCommonsTimelineItemOutline");k.setId(t.getId()+"-outline");k.setAttribute("tabindex","0");this._addAccessibilityTags(k,t);j.addClass("sapSuiteUiCommonsTimelineItemBox");k.addChild(j);p=this._getTimelineItemShell(t);j.addChild(p);if(t._isGroupCollapsed()){c.addStyle("display","none");}return c;};
b._getTimelineItemShell=function(t){var c=new H("div"),d=new H("div"),f=new H("div"),g=new H("span"),u,U,h=new H("span"),i=new H("div"),j=new H("div"),k=new H("div"),m=new H("span"),n=new H("div"),o=new H("span"),p=new H("div"),q;var E=t.getEmbeddedControl();c.setId(t.getId()+"-shell");c.addClass("sapSuiteUiCommonsTimelineItemShell");c.addChild(t._objects.getInfoBar());c.addChild(d);d.addClass("sapSuiteUiCommonsTimelineItemHeaderWrapper");u=t._getUserPictureControl();if(u){u.addStyleClass("sapSuiteUiCommonsTimelineItemUserPicture");d.addChild(u);}f.setId(t.getId()+"-header");f.addClass("sapSuiteUiCommonsTimelineItemHeader");f.addClass("sapSuiteUiCommonsTimelineItemTextLineClamp");g.setId(t.getId()+"-username");g.addClass("sapSuiteUiCommonsTimelineItemShellUser");f.addChild(g);U=t._getUserNameLinkControl();if(U){g.addChild(U);}else{g.addChildEscaped(t.getUserName());g.addClass("sapUiSelectable");}d.addChild(f);h.addClass("sapSuiteUiCommonsTimelineItemShellHdr");h.addClass("sapUiSelectable");h.addChildEscaped(" "+t.getTitle());f.addChild(h);i.addClass("sapSuiteUiCommonsTimelineItemShellDateTime");i.addClass("sapUiSelectable");i.addChildEscaped(this._getFormatedDateTime(t));f.addChild(i);j.addClass("sapSuiteUiCommonsTimelineItemShellBody");c.addChild(j);if(E!==null){j.addChild(E);}else if(t.getText()){k.addChild(m);k.addClass("sapSuiteUiCommonsTimelineItemTextWrapper");m.setId(t.getId()+"-realtext");m.addClass("sapUiSelectable");j.addChild(k);q=t._checkTextIsExpandable();if(q){o.setId(t.getId()+"-threeDots");o.addClass("sapMFeedListItemTextString");o.addChildEscaped(" ");k.addChild(o);m.addChildEscaped(t._getCollapsedText(),true);o.addChildEscaped("... ");k.setAttribute("expandable",true);}else{m.addChildEscaped(t.getText(),true);n.addStyle("display","none");}j.addChild(n);n.addClass("sapSuiteUiCommonsTimelineItemShowMore");n.addChild(t._getButtonExpandCollapse());}if(t.getParent()&&t.getParent()._aFilterList&&(t._callParentFn("getEnableSocial")||t.getCustomAction().length>0)){p.addClass("sapSuiteUiCommonsTimelineItemShellBottom");p.addChild(t._objects.getSocialBar());c.addChild(p);}return c;};
b._addAccessibilityTags=function(c,t,i){var g;c.setAttribute("role","option");if(typeof t._index==="number"){c.setAttribute("aria-posinset",t._index+1);c.setAttribute("aria-setsize",t._callParentFn("_getItemsCount"));}c.setAttribute("aria-live","polite");if(i){c.setAttribute("aria-expanded",!t._isGroupCollapsed());if(!t._isGroupCollapsed()){g=r.getText("TIMELINE_ACCESSIBILITY_GROUP_HEADER")+": "+t.getTitle()+" "+r.getText("TIMELINE_ACCESSIBILITY_GROUP_EXPAND");}else{g=r.getText("TIMELINE_ACCESSIBILITY_GROUP_HEADER")+": "+t.getTitle()+" "+r.getText("TIMELINE_ACCESSIBILITY_GROUP_COLLAPSE");}c.setAttribute("aria-label",g,true);}};
return b;},true);
sap.ui.predefine('sap/suite/ui/commons/TimelineNavigator',["sap/ui/thirdparty/jquery","sap/ui/core/delegate/ItemNavigation","sap/base/assert","sap/ui/dom/containsOrEquals","sap/ui/events/KeyCodes"],function(q,I,a,c,K){"use strict";
function s(S,p){var d=S.length-p.length;return d>=0&&S.lastIndexOf(p)===d;}
var T=I.extend("sap.suite.ui.commons.TimelineNavigator",{constructor:function(d,i,n,r){I.apply(this,arguments);this.setCycling(false);this._aRows=r;this.iActiveTabIndex=0;this.iTabIndex=0;this.bRefocusOnNextUpdate=false;this.oLastFocused=null;}});
T.prototype.updateReferences=function(d,i,r){this.oDomRef=d;this.setItemDomRefs(i);this._aRows=r;if(this.bRefocusOnNextUpdate){this._refocusItem();this.bRefocusOnNextUpdate=false;}this.setBeforeAfterTabIndex();};
T.prototype.refocusOnNextUpdate=function(){this.bRefocusOnNextUpdate=true;};
T.prototype._refocusItem=function(){var i=this.iFocusedIndex;if(i<0){return;}while(!q(this.aItemDomRefs[i]).is(":visible")){i++;if(i>=this.aItemDomRefs.length){i=0;}if(i===this.iFocusedIndex){break;}}setTimeout(function(){if(this.aItemDomRefs){this.focusItem(i);}}.bind(this),0);};
T.prototype.setItemDomRefs=function(b){a(Array.isArray(b),"aItemDomRefs must be an array of DOM elements");this.aItemDomRefs=b;if(this.iFocusedIndex>b.length-1){this.iFocusedIndex=b.length-1;}for(var i=0;i<this.aItemDomRefs.length;i++){if(this.aItemDomRefs[i]){var $=q(this.aItemDomRefs[i]);if(i==this.iFocusedIndex&&!$.data("sap.INRoot")){$.attr("tabIndex",this.iActiveTabIndex);}else if($.attr("tabindex")=="0"){$.attr("tabIndex",this.iTabIndex);}$.data("sap.INItem",true);$.data("sap.InNavArea",true);if($.data("sap.INRoot")&&i!=this.iFocusedIndex){$.data("sap.INRoot").setNestedItemsTabindex();}}}return this;};
T.prototype.setItemsTabindex=function(){for(var i=0;i<this.aItemDomRefs.length;i++){if(this.aItemDomRefs[i]){var $=q(this.aItemDomRefs[i]);if($.is(":sapFocusable")){if(i==this.iFocusedIndex&&!$.data("sap.INRoot")){$.attr("tabIndex",this.iActiveTabIndex);}else{$.attr("tabIndex",this.iTabIndex);}}}}return this;};
T.prototype.setBeforeAfterTabIndex=function(){if(this.oDomRef){var e=this.oDomRef.id+"-after";q(window.document.getElementById(e)).attr("tabindex",-1);e=this.oDomRef.id+"-before";q(window.document.getElementById(e)).attr("tabindex",-1);q(this.oDomRef).attr("tabindex",-1);}};
T.prototype.setFocusedIndex=function(i){var $;if(this.aItemDomRefs.length<0){this.iFocusedIndex=-1;return this;}if(i<0){i=0;}if(i>this.aItemDomRefs.length-1){i=this.aItemDomRefs.length-1;}if(this.iFocusedIndex!==-1&&this.aItemDomRefs.length>this.iFocusedIndex){q(this.aItemDomRefs[this.iFocusedIndex]).attr("tabIndex",this.iTabIndex);$=q(this.aItemDomRefs[this.iFocusedIndex]);if($.data("sap.INRoot")&&i!=this.iFocusedIndex){q($.data("sap.INRoot").aItemDomRefs[$.data("sap.INRoot").iFocusedIndex]).attr("tabIndex",this.iTabIndex);}}this.iFocusedIndex=i;var f=this.aItemDomRefs[this.iFocusedIndex];$=q(this.aItemDomRefs[this.iFocusedIndex]);if(!$.data("sap.INRoot")){q(f).attr("tabIndex",this.iActiveTabIndex);}return this;};
T.prototype._callParent=function(f,A){if(typeof I.prototype[f]==="function"){I.prototype[f].apply(this,A);}};
T.prototype._onF7=function(e){if(!c(this.oDomRef,e.target)){return;}var f=this.getFocusedIndex();if(f>=0){this.focusItem(f,e);e.preventDefault();e.stopPropagation();}};
T.prototype.onsapspace=function(e){this.onsapenter(e);};
T.prototype.onsapenter=function(e){var i,$;if(this._skipNavigation(e,false,true)){return;}$=q(this.getFocusedDomRef());i=$.attr("id");if(s(i,"-outline")){if($.hasClass("sapSuiteUiCommonsTimelineGroupHeaderMainWrapper")){i=i.substr(0,i.length-"outline".length)+"groupCollapseIcon";$.find("#"+i).mousedown().mouseup().click();}else{$.find("div[role='toolbar']").children().first().mousedown().mouseup().click();this.fireEvent("Enter",{domRef:$.get(0)});}e.preventDefault();e.stopPropagation();}};
T.prototype.onsaphome=function(e){if(this.aItemDomRefs.length===0){return;}if(this._skipNavigation(e,false,false)){return;}this._callParent("onsaphome",arguments);};
T.prototype.onkeydown=function(e){this._callParent("onkeydown",arguments);if(e.keyCode===K.F7){this._onF7(e);}};
T.prototype.onmousedown=function(e){var S=e.target;var b=function(d,o){var f=false;var C=q(d);while(!C.is(":sapFocusable")&&C.get(0)!=o){C=C.parent();}if(C.get(0)!=o){f=true;}return f;};if(c(this.oDomRef,S)){for(var i=0;i<this.aItemDomRefs.length;i++){var o=this.aItemDomRefs[i];if(c(o,S)){if(o===S||!b(S,o)){this.focusItem(i,e);}return;}}this._bMouseDownHappened=true;setTimeout(function(){this._bMouseDownHappened=false;}.bind(this),20);}};
T.prototype.onsapnext=function(e){var i,f=true,C,n,o;if(!this._aRows){this._callParent("onsapnext",arguments);return;}if(this._skipNavigation(e,true,false)){return;}e.preventDefault();e.stopPropagation();if(this.getFocusedIndex()<0){return;}C=this._findPosition(this.iFocusedIndex);if(C===null){throw new Error("TimelineNavigation cannot obtain a position of focused item and hance it cannot senect next.");}n=Object.assign({},C);do{if(e.keyCode===K.ARROW_DOWN){n.iY++;if(n.iY>=this._aRows.length){if(n.iX+1>=this._aRows[this._aRows.length-1].length){return;}n.iY=0;n.iX++;}}else{n.iX++;if(n.iX>=this._aRows[n.iY].length){if(n.iY+1>=this._aRows.length){return;}n.iX=0;n.iY++;}}if(n.iX===C.iX&&n.iY===C.iY){if(f){f=false;}else{return;}}o=this._aRows[n.iY][n.iX];}while(!o||!q(o).is(":sapFocusable"));i=this._findIndex(n);this.focusItem(i,e);};
T.prototype.onsapprevious=function(e){var i,f=true,C,n,o;if(!this._aRows){this._callParent("onsapprevious",arguments);return;}if(this._skipNavigation(e,true,false)){return;}e.preventDefault();e.stopPropagation();if(this.getFocusedIndex()<0){return;}C=this._findPosition(this.iFocusedIndex);if(C===null){throw new Error("TimelineNavigation cannot obtain a position of focused item and hance it cannot senect next.");}n=Object.assign({},C);do{if(e.keyCode===K.ARROW_UP){n.iY--;if(n.iY<0){if(n.iX<=0){return;}n.iY=this._aRows.length-1;n.iX--;}}else{n.iX--;if(n.iX<0){if(n.iY<=0){return;}n.iX=this._aRows[n.iY].length-1;n.iY--;}}if(n.iX===C.iX&&n.iY===C.iY){if(f){f=false;}else{return;}}o=this._aRows[n.iY][n.iX];}while(!o||!q(o).is(":sapFocusable"));i=this._findIndex(n);this.focusItem(i,e);};
T.prototype._isInDomRefs=function(e){return this.aItemDomRefs.indexOf(e)>-1;};
T.prototype._isInTimeline=function(e){while(e){if(this._isInDomRefs(e)){return true;}e=e.parentElement;}return false;};
T.prototype._hasTabbableChildren=function(e){if(e&&e.tabIndex>=0){return true;}var t=this;if(e&&e.childElementCount>0){e.childNodes.forEach(function(C){return t._hasTabbableChildren(C);});}return false;};
T.prototype._isLastChildInTimeline=function(e){return this._isInTimeline(e.target)&&!this._hasTabbableChildren(e.target);};
T.prototype.onsaptabnext=function(e){if(e.target.id&&this._isLastChildInTimeline(e)){var E=this.oDomRef.id+"-after";q(window.document.getElementById(E)).focus();}};
T.prototype.onsaptabprevious=function(e){if(this._isInDomRefs(e.target)){var E=this.oDomRef.id+"-before";q(window.document.getElementById(E)).focus();}};
T.prototype.onfocusin=function(e){if(this._isInTimeline(e.target)){this.oLastFocused=e.target;}if(!e.relatedTarget||!this._isInTimeline(e.relatedTarget)){if(this._isInTimeline(e.target)&&this.oLastFocused&&this.oLastFocused!==e.target){q(this.oLastFocused).focus();}}};
T.prototype._findPosition=function(i){var x,y,o=this.aItemDomRefs[i];for(y=0;y<this._aRows.length;y++){for(x=0;x<this._aRows[y].length;x++){if(o===this._aRows[y][x]){return{iX:x,iY:y};}}}return null;};
T.prototype._findIndex=function(p){var o=this._aRows[p.iY][p.iX],i;for(i=0;i<this.aItemDomRefs.length;i++){if(o===this.aItemDomRefs[i]){return i;}}return null;};
T.prototype._skipNavigation=function(e,C,b){return!c(this.oDomRef,e.target)||(this.getFocusedIndex()<0&&b)||this.aItemDomRefs&&Array.prototype.indexOf.call(this.aItemDomRefs,e.target)===-1||(q(this.oDomRef).data("sap.InNavArea")&&C);};
return T;});
sap.ui.predefine("sap/suite/ui/commons/TimelineRenderManager",["sap/ui/thirdparty/jquery","./library","sap/m/Text","sap/ui/core/Icon","sap/m/ViewSettingsDialog","sap/ui/core/ResizeHandler","sap/ui/core/Item","sap/m/ToolbarSpacer","sap/m/SearchField","sap/m/OverflowToolbar","sap/m/Select","sap/m/RangeSlider","sap/m/Label","sap/m/Panel","sap/m/FlexBox","sap/m/OverflowToolbarButton","sap/m/MessageStrip","sap/m/ViewSettingsFilterItem","sap/m/ViewSettingsCustomItem","sap/m/OverflowToolbarLayoutData","sap/m/library","sap/m/MessageToast","sap/ui/core/InvisibleText","sap/m/SliderTooltip","sap/suite/ui/commons/TimelineRenderManagerTimestamp","sap/suite/ui/commons/util/StringSliderTooltip","sap/m/ResponsiveScale","sap/ui/core/library"],function(q,l,T,I,V,R,a,b,S,O,c,d,L,P,F,e,M,f,g,h,m,k,n,o,p,r,s,t){"use strict";var C=t.CSSSize;var B=m.ButtonType;var u=m.OverflowToolbarPriority;var v=l.TimelineGroupType;var w=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var x=680;var D=Object.freeze({UP:"UP",DOWN:"DOWN",NONE:"NONE"});
function y($,i,j){$.removeClass(i).addClass(j);}
function _($,A){return parseInt($.css(A).replace("px",""),10);}
var z={extendTimeline:function(A){A.prototype._initControls=function(){this._setupMessageStrip();this._setupFilterDialog();this._setupHeaderToolbar();this._setupAccessibilityItems();};A.prototype._registerResizeListener=function(){var i=this.$().parent().get(0);if(i){this.oResizeListener=R.register(i,q.proxy(this._performResizeChanges,this));}};A.prototype._deregisterResizeListener=function(){if(this.oResizeListener){R.deregister(this.oResizeListener);}};A.prototype._performUiChanges=function(i){this._deregisterResizeListener();if(!this.getDomRef()){return;}if(this._isVertical()){this._performUiChangesV(i);}else{this._performUiChangesH();}this._setupScrollers();this._startItemNavigation();this._registerResizeListener();};A.prototype._performDoubleSidedChangesLi=function($,i){var j=$.children().first(),E=this._isLeftAlignment()?"sapSuiteUiCommonsTimelineItemWrapperVLeft":"sapSuiteUiCommonsTimelineItemWrapperVRight";if(this._renderDblSided){if($.hasClass('sapSuiteUiCommonsTimelineItem')){$.removeClass('sapSuiteUiCommonsTimelineItem').addClass(i?"sapSuiteUiCommonsTimelineItemOdd":"sapSuiteUiCommonsTimelineItemEven");if(!i){y(j,"sapSuiteUiCommonsTimelineItemWrapperVLeft","sapSuiteUiCommonsTimelineItemWrapperVRight");}else{y(j,"sapSuiteUiCommonsTimelineItemWrapperVRight","sapSuiteUiCommonsTimelineItemWrapperVLeft");}}}else{$.removeClass("sapSuiteUiCommonsTimelineItemOdd").removeClass("sapSuiteUiCommonsTimelineItemEven").addClass("sapSuiteUiCommonsTimelineItem");j.removeClass("sapSuiteUiCommonsTimelineItemWrapperVLeft").removeClass("sapSuiteUiCommonsTimelineItemWrapperVRight").addClass(E);}};A.prototype._performDoubleSidedChanges=function(){var $=this.$(),E=$.find('.sapSuiteUiCommonsTimelineItemUlWrapper').not(".sapSuiteUiCommonsTimelineShowMoreWrapper"),G=$.find(".sapSuiteUiCommonsTimelineScrollV .sapSuiteUiCommonsTimelineGroupHeader"),H;if(this._renderDblSided){this._$content.addClass("sapSuiteUiCommonsTimelineDblSided");G.addClass("sapSuiteUiCommonsTimelineGroupHeaderDblSided");G.addClass("sapSuiteUiCommonsTimelineItemWrapperVLeft").removeClass("sapSuiteUiCommonsTimelineItemWrapperVRight");}else{this._$content.removeClass("sapSuiteUiCommonsTimelineDblSided");G.removeClass("sapSuiteUiCommonsTimelineGroupHeaderDblSided sapSuiteUiCommonsTimelineItemWrapperVLeft");G.addClass(this._isLeftAlignment()?"sapSuiteUiCommonsTimelineItemWrapperVLeft":"sapSuiteUiCommonsTimelineItemWrapperVRight");}for(var j=0;j<E.length;j++){var J=q(E[j]),K=J.find('> li').not(".sapSuiteUiCommonsTimelineGroupHeader");K.eq(1).css("margin-top",this._renderDblSided?"40px":"auto");for(var i=0;i<K.length;i++){H=q(K[i]);this._performDoubleSidedChangesLi(H,(i%2)===0);}}$.find(".sapSuiteUiCommonsTimelineItemBarV").css("height","");$.find(".sapSuiteUiCommonsTimelineItem").css("margin-bottom","");};A.prototype._performUiChangesH=function(){var $=this.$(),i,j;var E=function(G){return($.width()-(G.position().left+G.outerWidth()));};if(this.getEnableDoubleSided()&&this._isGrouped()){j=$.find(".sapSuiteUiCommonsTimelineHorizontalBottomLine ul");$.find("[firstgroupevenitem = true]:visible").each(function(G,H){var J=function(Z){return Z+"-"+(this._bRtlMode?"right":"left");}.bind(this),K=q("#"+H.id+"-line"),N=this._bRtlMode?E(K):K.position().left,Q=30,U=q(H),W=_(j,J("padding")),X,Y;if(G===0){X=N-Q-W;}else{i=U.prevAll(".sapSuiteUiCommonsTimelineItemLiWrapperV:visible:first");Y=this._bRtlMode?E(i):(i.position().left+_(i,J("margin")));X=(N-Q)-(Y+i.outerWidth());}U.css(J("margin"),X+"px");}.bind(this));}if(!this.getEnableScroll()){$.find(".sapSuiteUiCommonsTimelineContentsH").css("overflow-x","hidden");}this._calculateTextHeight();};A.prototype._performUiChangesV=function(i){var $=this.$(),j=$.outerWidth()+50;if(this.getEnableDoubleSided()){this._renderDblSided=j>=x;if(this._renderDblSided!==this._lastStateDblSided||i){this._performDoubleSidedChanges();}this._lastStateDblSided=this._renderDblSided;}this._calculateTextHeight();this._calculateHeightV();};A.prototype._calculateHeightV=function(){var $=this.$(),j=this.$("headerBar").outerHeight()||0,E=this.$("filterMessage").outerHeight()||0,G=this.$("messageStrip").outerHeight()||0,H=G+E+j,J=function(X,W){var Y,Z,a1,b1,c1,d1,e1,f1=X.length,g1=this.getShowIcons()?".sapSuiteUiCommonsTimelineItemBarIconWrapperV:visible":".sapSuiteUiCommonsTimelineItemNoIcon:visible",h1=W.length>0?W.find(g1+", .sapSuiteUiCommonsTimelineItemBarIconWrapperV:visible").eq(0):q(),i1=8;for(var i=0;i<f1;i++){Y=q(X[i+1]);Z=q(X[i]);a1=i<f1-1?Y.find(g1):h1;c1=Z.find(g1);if(a1.length>0&&c1.length>0){d1=a1.offset().top;e1=c1.offset().top+c1.height();b1=Z.find(".sapSuiteUiCommonsTimelineItemBarV");i1=8;b1.height(d1-e1-i1);}}},K=function(X){var Y,Z,a1,b1,c1,d1=40,e1=100,f1=function(){var g1=_(a1,"margin-top")+a1.position().top+a1.height()-Y.position().top;Z.css("margin-bottom",g1+d1+"px");};for(var i=2;i<X.length;i++){Y=q(X[i]);Z=q(X[i-1]);a1=q(X[i-2]);b1=this._bRtlMode?!Y.hasClass("sapSuiteUiCommonsTimelineItemOdd"):Y.hasClass("sapSuiteUiCommonsTimelineItemOdd");c1=Y.position().left;if(!b1&&c1<e1||b1&&c1>e1){f1();}else{var g1=Y.position().top-Z.position().top,h1=_(a1,"margin-bottom");if(g1<d1){a1.css("margin-bottom",h1+d1-g1);}}}},N=function(){var Y=5,Z=$.position().top,a1=$.parent().height(),b1=_(this._$content,"padding-bottom"),c1=_(this._$content,"padding-top"),d1=a1-Z-H-c1-b1-Y;this._$content.height(d1);}.bind(this),U,Q,W,X;if(this.getEnableScroll()){N();}if(this._renderDblSided){U=$.find(".sapSuiteUiCommonsTimelineItemUlWrapper");for(var i=0;i<U.length;i++){Q=q(U[i]);W=q(U[i+1]);X=Q.find(" > li:not(.sapSuiteUiCommonsTimelineGroupHeader):visible");X.css("margin-bottom","");K.call(this,X,Q);J.call(this,X,W);}}};A.prototype._performResizeChanges=function(){this._performUiChanges();};A.prototype._calculateTextHeight=function(){var $=this.$(),E=this.getTextHeight(),G,H,J=function(U,W){$.find(".sapSuiteUiCommonsTimelineItemTextWrapper:visible").each(function(X,Y){var Z=q(Y),a1=Z.children().first(),b1=a1.get(0).getClientRects(),c1=0,d1=0,e1,f1=-100000,g1=0,h1=w.getText("TIMELINE_TEXT_SHOW_MORE"),i1=Z.attr("expanded");i1=(i1=="true");Z.height("auto");Z.css("-webkit-line-clamp","");if(b1&&b1.length>0){e1=b1[0].top;g1=0;for(var i=0;i<b1.length-1;i++){if(f1!==b1[i].bottom){f1=b1[i].bottom;g1++;}if(U>0&&(b1[i+1].bottom-e1>U)){d1=g1;c1=b1[i].bottom-e1;break;}if(W>0&&g1===W){c1=b1[i].bottom-b1[0].top;d1=W;break;}}}if(!i1){if(c1>0){Z.height(c1);Z.css("-webkit-line-clamp",d1.toString());Z.next().show();}else if(!Z.attr("expandable")){Z.next().hide();}}else{for(var j=i;j<b1.length-1;j++){if(f1!==b1[j].bottom){f1=b1[j].bottom;g1++;}}if(W>0&&g1<=W){Z.attr("expanded",false);Z.next().children()[0].text=h1;Z.next().hide();}}});},K=function(i){J(0,parseInt(i,10));},N=function(i){J(i,0);},Q=function(){var i=$.find(".sapSuiteUiCommonsTimelineItemTextWrapper");i.css("height","");i.css("-webkit-line-clamp","");$.css("height","100%");var j=this._$content.height(),U=_(this._$content,"padding-bottom"),W=this._$content.get(0).scrollHeight,X=W-j-U,Y={height:0},Z,a1=20;$.find(".sapSuiteUiCommonsTimelineItemTextWrapper").each(function(b1,c1){var d1=q(c1).height();if(d1>Y.height){Y.height=d1;Y.item=q(this);}});if(Y.item){Z=Y.item.parent().find(".sapSuiteUiCommonsTimelineItemShowMore:hidden").height();return Y.height-X-Z-a1;}return 1;};if(E){if(this._useAutomaticHeight()){N(Q.call(this));}else if(q.isNumeric(E)){K(E);}else{G=/([0-9]*\.?[0-9]+)(px)+/i;H=G.exec(E);if(H&&H.length>1){N(H[1]);}else if(C.isValid(E)){$.find(".sapSuiteUiCommonsTimelineItemTextWrapper").height(E);}}}};A.prototype._fixScrollerPositionH=function(){var $=this.$(),i=$.find(".sapSuiteUiCommonsTimelineHorizontalMiddleLine"),j=$.find(".sapSuiteUiCommonsTimelineHorizontalScroller"),E,G=this._$content.position().top;if(i.get(0)){E=i.position().top;$.find(".sapSuiteUiCommonsTimelineScrollerIconWrapper").css("top",E-5);j.css("top",G+"px");j.height(this._$content.outerHeight()-15);}};A.prototype._setupScrollers=function(){var $=this.$(),i=450,N='rgba(0, 0, 0, 0)',j,E,G,H,J,K,Q,U,W,X,Y,Z,a1,b1=function(c1){var d1=N;c1.parents().each(function(e1,f1){var E=q(f1).css("background-color"),g1=q(f1).css("background-image");if(g1!=="none"){d1=N;return;}if(E!==N&&E!=="transparent"){d1=E;}});return d1;};if(this._scrollingFadeout()){j=this._isVertical()?$.height():$.width();if(j<i){$.find(".sapSuiteUiCommonsTimelineVerticalScroller",".sapSuiteUiCommonsTimelineHorizontalScroller").hide();this._scrollersSet=false;return;}if(!this._scrollersSet){E=b1(this.$());if(E&&E!==N){G=E.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);if(G&&G.length>=4){H=parseInt(G[1],10);J=parseInt(G[2],10);K=parseInt(G[3],10);Q="rgba("+H+","+J+","+K+", 0)";W="rgba("+H+","+J+","+K+", 0.7)";U="rgba("+H+","+J+","+K+", 1)";X=$.find(".sapSuiteUiCommonsTimelineHorizontalLeftScroller, .sapSuiteUiCommonsTimelineTopScroller ");Y=$.find(".sapSuiteUiCommonsTimelineHorizontalRightScroller, .sapSuiteUiCommonsTimelineBottomScroller");Z=this._isVertical()?"top":"left";a1=this._isVertical()?"bottom":"right";X.css("background-image","linear-gradient(to "+Z+", "+Q+", "+U+")");Y.css("background-image","linear-gradient(to "+a1+", "+Q+", "+U+")");X.css("background-image","-webkit-linear-gradient("+a1+", "+Q+", "+W+" 30%,"+U+")");Y.css("background-image","-webkit-linear-gradient("+Z+", "+Q+", "+W+" 30%,"+U+")");this._scrollersSet=true;if(this.getContent().length>0){if((!this._isVertical()&&this._$content.get(0).scrollWidth>this._$content.outerWidth())||(this._isVertical()&&this._$content.get(0).scrollHeight>this._$content.outerHeight())){Y.show();}}}}else{$.find(".sapSuiteUiCommonsTimelineHorizontalScroller").hide();}}if(!this._isVertical()){this._fixScrollerPositionH();}}};A.prototype._setupScrollEvent=function(){var $=this.$(),i=$.find(".sapSuiteUiCommonsTimelineHorizontalLeftScroller .sapSuiteUiCommonsTimelineScrollerIconWrapper, .sapSuiteUiCommonsTimelineTopScroller .sapSuiteUiCommonsTimelineScrollerIconWrapper"),j=$.find(".sapSuiteUiCommonsTimelineHorizontalRightScroller .sapSuiteUiCommonsTimelineScrollerIconWrapper, .sapSuiteUiCommonsTimelineBottomScroller .sapSuiteUiCommonsTimelineScrollerIconWrapper"),E=$.find(".sapSuiteUiCommonsTimelineHorizontalLeftScroller, .sapSuiteUiCommonsTimelineTopScroller"),G=$.find(".sapSuiteUiCommonsTimelineHorizontalRightScroller, .sapSuiteUiCommonsTimelineBottomScroller"),H=this._$content,J=this;if(J._lazyLoading()||J._scrollingFadeout()){H.on("scroll",function(K){var N=q(K.currentTarget),Q=N.get(0).scrollLeft,U=N.get(0).scrollTop,W=false,X=200,Y=5,Z=false,a1,b1,c1,d1,H;if(J._isVertical()){a1=N.outerHeight();b1=N.get(0).scrollHeight;Z=U+a1>b1-X;W=U+a1>=b1-Y;}else{c1=N.width();d1=N.get(0).scrollWidth;Z=Q+c1>d1-X;W=Q+c1>=d1-Y-185;}if(J._lazyLoading()&&J._scrollMoreEvent){if(Z&&!J._isMaxed()){J._scrollMoreEvent=false;J._loadMore();}}if(J._scrollersSet){if(Q>50||U>50){E.show();}else{E.hide();J._manualScrolling=false;}if(W){G.hide();}else{G.show();}var e1;if(J._isVertical()){e1=N.get(0).scrollTop;H=e1>J._lastScrollPosition.y?j:i;J._lastScrollPosition.y=e1;}else{e1=N.get(0).scrollLeft;H=e1>J._lastScrollPosition.x?j:i;J._lastScrollPosition.x=e1;}H.addClass("sapSuiteUiCommonsTimelineScrolling");clearTimeout(q.data(this,'scrollTimer'));q.data(this,'scrollTimer',setTimeout(function(){i.removeClass("sapSuiteUiCommonsTimelineScrolling");j.removeClass("sapSuiteUiCommonsTimelineScrolling");},350));}});this.$().find(".sapSuiteUiCommonsTimelineScrollerIconWrapper").mousedown(function(K){var N=90,Q=(q(this).hasClass("sapSuiteUiCommonsTimelineScrollerIconWrapperLeft")||q(this).hasClass("sapSuiteUiCommonsTimelineScrollerIconWrapperTop"))?-N:N;J._manualScrolling=true;J._performScroll(Q);});this.$().find(".sapSuiteUiCommonsTimelineScrollerIconWrapper").mouseup(function(){J._manualScrolling=false;}).mouseout(function(){J._manualScrolling=false;});}if(this.getEnableScroll()&&!J._isVertical()){this._$content.on("wheel",function(K){if(K.originalEvent.deltaX){return;}var N=K.originalEvent.deltaY,Q=30;if(N<Q&&N>Q*-1){N=N>0?Q:Q*-1;}this.scrollLeft+=N*2;});$.find(".sapSuiteUiCommonsTimelineHorizontalScroller, .sapSuiteUiCommonsTimelineVerticalScroller").on("wheel",function(K){var N=K.originalEvent.deltaY;if(J._isVertical()){J._$content.get(0).scrollTop+=N*2;}else{J._$content.get(0).scrollLeft+=N*2;}});}};A.prototype._setupMessageStrip=function(){var i=this;this._objects.register("messageStrip",function(){return new M(i.getId()+"-messageStrip",{close:function(){i.setCustomMessage("");i.fireCustomMessageClosed();},showCloseButton:true});});this._objects.register("filterMessageText",function(){return new T(i.getId()+"-filterMessageText",{});});this._objects.register("filterMessage",function(){var j=i._objects.getFilterMessageText(),E,G;G=new I(i.getId()+"filterMessageIcon",{src:"sap-icon://decline",press:[i._clearFilter,i]});G.setTooltip(w.getText('TIMELINE_CLEAR_ICN_TOOLTIP'));E=new O(i.getId()+"-filterMessage",{design:"Info",content:[j,new b(),G]});E.addStyleClass("sapSuiteUiCommonsTimelineFilterInfoBar");E.setHeight("auto");return E;});};A.prototype._setMessageBars=function(i){var j=this._getFilterMessage();if(j){i.addChild(this._objects.getFilterMessage());this._objects.getFilterMessageText().setText(j);}};A.prototype._setupRangeFilterPage=function(){var i=this;this._rangeFilterType=null;this._objects.register("timestampFilterPicker",function(){return new p(i.getId(),{dateChanged:function(E){var j=E.getSource(),G=j.getStartDate()||i._minDate,H=j.getEndDate()||i._maxDate;i._filterDialogRangePage.setFilterCount(+(G!==i._minDate||H!==i._maxDate));}},undefined,w);});this._objects.register("timeFilterSelect",function(){var j=new c(i.getId()+"-timeFilterSelect",{ariaLabelledBy:i._objects.getRangeTypeLbl().getId(),change:function(E){i._rangeFilterType=E.getParameter("selectedItem").getProperty("key");i.toggleGroupTypeSelector(i._rangeFilterType);i._setRangeFilter();},items:[new a({text:w.getText("TIMELINE_YEAR"),key:v.Year}),new a({text:w.getText("TIMELINE_QUARTER"),key:v.Quarter}),new a({text:w.getText("TIMELINE_MONTH"),key:v.Month}),new a({text:w.getText("TIMELINE_DAY"),key:v.Day}),new a({text:w.getText("TIMELINE_CUSTOM_RANGE"),key:v.None})]});j.addStyleClass("sapSuiteUiCommonsTimelineRangeSelect");return j;});this._objects.register("timeRangeSlider",function(){var j=function(H){if(typeof H==="string"){H=Number(H);}var J=i._fnAddDate(H);return i._formatGroupBy(J,i._rangeFilterType).title;};var E=new s();E.getLabel=j;var G=new d(i.getId()+"-timeRangeSlider",{enableTickmarks:true,visible:false,showAdvancedTooltip:true,step:1,change:function(H){var J=G.getMin(),K=G.getMax(),N=G.getRange();i._filterDialogRangePage.setFilterCount(+(N[0]!==J||N[1]!==K));},customTooltips:[new r({mapFunction:j}),new r({mapFunction:j,fetchValue2:true})],scale:E});G.addStyleClass("sapSuiteUiCommonsTimelineRangeFilter");return G;});this._objects.register("rangeTypeLbl",function(){return new L(i.getId()+"-rangeTypeLbl",{text:w.getText("TIMELINE_GROUP_BY_PERIOD")+":"});});this._objects.register("rangeTypePanel",function(){var j=new P(i.getId()+"-rangeTypePanel",{content:[i._objects.getRangeTypeLbl(),i._objects.getTimeFilterSelect()]});j.addStyleClass("sapSuiteUiCommonsTimelineRangeFilterPanel");j.addStyleClass("sapSuiteUiCommonsTimelineRangeFilterPanelShadowed");return j;});this._objects.register("rangePanel",function(){return new F(i.getId()+"rangePanel",{direction:"Column",items:[i._objects.getRangeTypePanel(),i._objects.getTimeRangeSlider(),i._objects.getTimestampFilterPicker().getTimestampPanelRadio(),i._objects.getTimestampFilterPicker().getTimestampPanelPicker()]});});};A.prototype._setupFilterFirstPage=function(i){if(i){i.removeAllAggregation("filterItems");if(this.getShowItemFilter()){i.addAggregation("filterItems",new f({key:"items",text:this._getFilterTitle()}));}if(this.getShowTimeFilter()){this._filterDialogRangePage=new g({key:"range",text:w.getText("TIMELINE_RANGE_SELECTION"),customControl:[this._objects.getRangePanel()]});i.addAggregation("filterItems",this._filterDialogRangePage);}}};A.prototype._setupFilterDialog=function(){var i=this;this._setupRangeFilterPage();this._objects.register("filterContent",function(){var j,E,G=function(N){if(!i._filterState.data){i._setFilterList();N.removeAllItems();i._aFilterList.forEach(function(Q){var U=q.grep(i._currentFilterKeys,function(W){return Q.key===W.key;}).length>0;N.addItem(new f({key:Q.key,text:Q.text,selected:U}));});}i._filterState.data=true;},H=function(){k.show(w.getText("TIMELINE_NO_LIMIT_DATA"));},J=function(){if(!i._filterState.range){K.setBusy(true);i._getTimeFilterData().then(function(){K.setBusy(false);if((!i._minDate||!i._maxDate)||(!(i._minDate instanceof Date)||!(i._maxDate instanceof Date))){H();return;}if(!i._rangeFilterType){i._rangeFilterType=i._calculateRangeTypeFilter();}if(!i._startDate&&!i._endDate){i._setRangeFilter();}else{var N=i._objects.getTimeRangeSlider(),Q=i._fnDateDiff(i._rangeFilterType),U=N.getMin(),W=N.getMax();if(W-U!==Q){i._setRangeFilter();}j=i._fnDateDiff(i._rangeFilterType,i._minDate,i._startDate);E=i._fnDateDiff(i._rangeFilterType,i._minDate,i._endDate);N.setRange([j,E]);}i.toggleGroupTypeSelector(i._rangeFilterType);i._objects.getTimeFilterSelect().setSelectedKey(i._rangeFilterType);}).catch(function(){K.setBusy(false);H();});i._filterState.range=true;}},K=new V(i.getId()+"-filterContent",{confirm:function(N){var Q=N.getParameter("filterItems"),U,W,X,Y,Z;i._currentFilterKeys=Q.map(function(b1){return{key:b1.getProperty("key"),text:b1.getProperty("text")};});i._startDate=null;i._endDate=null;if(i._objects.getTimestampFilterPicker().getVisible()){var $=i._objects.getTimestampFilterPicker().getStartDate()||i._minDate,a1=i._objects.getTimestampFilterPicker().getEndDate()||i._maxDate;if($!==i._minDate||a1!==i._maxDate){i._startDate=$;i._endDate=a1;Z=true;}}else{U=i._objects.getTimeRangeSlider();Y=U.getRange();W=U.getMin();X=U.getMax();if(Y[0]!==W||Y[1]!==X){i._startDate=i._fnAddDate(Math.min.apply(null,Y),D.DOWN);i._endDate=i._fnAddDate(Math.max.apply(null,Y),D.UP);Z=true;}}i._filterData(Z);},resetFilters:function(N){var Q=i._objects.getTimeRangeSlider();Q.setValue(Q.getMin());Q.setValue2(Q.getMax());i._filterDialogRangePage.setFilterCount(0);i._objects.getTimestampFilterPicker().clearDates();},filterDetailPageOpened:function(N){var Q=N.getParameter("parentFilterItem").getProperty("key");if(Q==="items"){G(N.getParameter("parentFilterItem"));}if(Q==="range"){J();}}});i._setupFilterFirstPage(K);return K;});};A.prototype._setupHeaderToolbar=function(){var i=this,j=function(G){i._objects.register(G.name,function(){var H=new e(i.getId()+"-"+G.name,{type:B.Transparent,icon:G.icon,tooltip:G.tooltip,press:G.fnPress});H.setLayoutData(new h({priority:G.priority}));return H;});};j({name:"filterIcon",icon:"sap-icon://add-filter",tooltip:w.getText("TIMELINE_FILTER_BY"),fnPress:[i._openFilterDialog,i],priority:u.NeverOverflow,visible:i.getShowItemFilter()||i.getShowTimeFilter()});j({name:"sortIcon",icon:"sap-icon://arrow-bottom",tooltip:w.getText("TIMELINE_SORT"),fnPress:[i._sortClick,i],priority:u.High,visible:i.getSort()&&i.getShowSort()});var E=new b();this._objects.register("searchFieldLabel",function(){return new n(i.getId()+"-searchFieldLabel",{text:w.getText("TIMELINE_ACCESSIBILITY_SEARCH")});});this._objects.register("searchField",function(){var G=new S(i.getId()+"-searchField",{width:"14rem",ariaLabelledBy:i._objects.getSearchFieldLabel().getId(),search:function(H){i._search(H.getSource().getValue());},visible:i.getShowSearch()});G.setLayoutData(new h({priority:u.Low}));return G;});this._objects.register("headerBar",function(){var G=[E,i._objects.getSearchFieldLabel(),i._objects.getSearchField(),i._objects.getSortIcon(),i._objects.getFilterIcon()];var H=new O(i.getId()+"-headerBar",{content:G,visible:i.getShowHeaderBar()});H.addStyleClass("sapSuiteUiCommonsTimelineHeaderBar");H.setParent(i);return H;});};A.prototype._setupAccessibilityItems=function(){var i=this;this._objects.register("accessibilityTitle",function(){return new n(i.getId()+"-accessibilityTitle",{text:w.getText("TIMELINE_ACCESSIBILITY_TITLE")});});};A.prototype.toggleGroupTypeSelector=function(i){var j=i!==v.None;this._objects.getTimestampFilterPicker().setVisible(!j);this._objects.getTimeRangeSlider().setVisible(j);};}};return z;},true);
sap.ui.predefine("sap/suite/ui/commons/TimelineRenderManagerTimestamp",["sap/ui/base/ManagedObject","sap/m/RadioButtonGroup","sap/m/RadioButton","sap/m/Panel","sap/m/DateTimePicker","sap/m/Label"],function(P,R,a,b,D,L){"use strict";var c={"RANGE":0,"START":1,"END":2};
var T=P.extend("sap.suite.ui.commons.TimelineRenderManagerTimestamp",{
"constructor":function(i,s,S,r){var t;var o;this.getText=r.getText.bind(r);this.getTimestampPanelPicker=function(){if(!t){t=this._createTimestampPanelPicker();}return t;};this.getTimestampPanelRadio=function(){if(!o){o=this._createTimestampPanelRadio();}return o;};P.call(this,i,s,S);this.setVisible(false);},
metadata:{events:{dateChanged:{}}}
});
T.prototype._createTimestampPanelPicker=function(){var i=this.getId()+"-timestamp-panel-picker";var C;var f=new L({text:this.getText("TIMELINE_FROM")+":"});var t=new L({text:this.getText("TIMELINE_TO")+":"});var p=new b({id:i,content:[f,new L({text:this.getText("TIMELINE_NOW"),visible:false}),new D({width:"auto",ariaLabelledBy:[f],change:this._handlerTimePickerRange.bind(this)}),t,new L({text:this.getText("TIMELINE_NOW"),visible:false}),new D({width:"auto",ariaLabelledBy:[t],change:this._handlerTimePickerRange.bind(this)})]});p.addStyleClass("sapSuiteUiCommonsTimelineRangeFilterPanel");C=p.getContent();C[1].addStyleClass("sapSuiteUiCommonsTimelineRangeLabelNow");C[2].addStyleClass("sapSuiteUiCommonsTimelineRangeDatePicker");C[4].addStyleClass("sapSuiteUiCommonsTimelineRangeLabelNow");C[5].addStyleClass("sapSuiteUiCommonsTimelineRangeDatePicker");return p;};
T.prototype._createTimestampPanelRadio=function(){var i=this.getId()+"-timestamp-panel-radio";return new b({"id":i,"content":[new R({columns:3,select:this.handlerSelectRadioButton.bind(this),buttons:[new a({id:i+"-range-of-dates",text:this.getText("TIMELINE_TIMESTAMP_RANGE_OF_DATES")}),new a({id:i+"-starting-date",text:this.getText("TIMELINE_TIMESTAMP_STARTING_DATE")}),new a({id:i+"-ending-date",text:this.getText("TIMELINE_TIMESTAMP_ENDING_DATE")})]})]});};
T.prototype.resizeDialog=function(o){o.getFilterContent()._getDialog().setContentWidth("50em");};
T.prototype.setVisible=function(v){this.getTimestampPanelPicker().setVisible(v);this.getTimestampPanelRadio().setVisible(v);};
T.prototype.setPickerView=function(p,d){d.getContent()[1].setVisible(p===c.END);d.getContent()[2].setVisible(p===c.START||p===c.RANGE);d.getContent()[4].setVisible(p===c.START);d.getContent()[5].setVisible(p===c.END||p===c.RANGE);};
T.prototype.handlerSelectRadioButton=function(e){this.setPickerView(e.getParameter("selectedIndex"),this.getTimestampPanelPicker());};
T.prototype.getVisible=function(){return this.getTimestampPanelPicker().getVisible()&&this.getTimestampPanelRadio().getVisible();};
T.prototype.getStartDate=function(){var s;var p=this.getTimestampPanelPicker().getContent()[2];if(p.getVisible()){s=p.getDateValue();}else{s=function(){return new Date();};}return s;};
T.prototype.clearDates=function(){var p=this.getTimestampPanelPicker().getContent()[2],o=this.getTimestampPanelPicker().getContent()[5];p.setDateValue();o.setDateValue();};
T.prototype.getEndDate=function(){var e;var p=this.getTimestampPanelPicker().getContent()[5];if(p.getVisible()){e=p.getDateValue();}else{e=function(){return new Date();};}return e;};
T.prototype.destroy=function(){this.getTimestampPanelPicker().destroy();this.getTimestampPanelRadio().destroy();P.prototype.destroy.call(this);};
T.prototype._handlerTimePickerRange=function(e){var p=this.getTimestampPanelPicker().getContent()[2],o=this.getTimestampPanelPicker().getContent()[5];var d=e.getSource();var f=d.getDateValue();if(d===p){if(o.getDateValue()<f){o.setInitialFocusedDateValue(f);}o.setMinDate(f);}else if(d===o){if(p.getDateValue()>f){p.setInitialFocusedDateValue(f);}p.setMaxDate(f);}};
return T;});
sap.ui.predefine('sap/suite/ui/commons/TimelineRenderer',["./library","sap/suite/ui/commons/util/HtmlElement","sap/ui/core/Icon","sap/m/Button","sap/base/security/encodeXML"],function(l,H,I,B,e){"use strict";var T=l.TimelineAxisOrientation,S=l.TimelineScrollingFadeout;var a={},r=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");
a.render=function(R,t){var m=this._getHtmlModel(t);m.getRenderer().render(R);};
a._getHtmlModel=function(t){if(t.getAxisOrientation()===T.Horizontal){return this._getHorizontalTimelineElement(t);}else{return this._getVerticalTimelineElement(t);}};
a._getScrollerIcon=function(t,i,d){var b=new H("div"),n="scrollerIcon"+d,g="getScrollerIcon"+d;b.addClass(e("sapSuiteUiCommonsTimelineScrollerIconWrapper sapSuiteUiCommonsTimelineScrollerIconWrapper"+d));t._objects.register(n,function(){return new I({src:"sap-icon://step"});});b.addChild(t._objects[g]());return b;};
a._setWidthAndHeight=function(t,b){var h=t.getHeight(),w=t.getWidth();if(h&&!t._isVertical()){b.addStyle("height",h);}if(w&&(t._isVertical()||t.getEnableScroll())){b.addStyle("width",w);}};
a._getHorizontalTimelineElement=function(t){var b=t.getEnableDoubleSided(),c=t._isLeftAlignment(),C=t._outputItem,g=0,d=true,o,p,f,h,n,j,m=t._isMaxed(),L,q=function(){var N=new H("ul");N.setAttribute("role","listbox");return N;};var s=new H("div"),u=new H("div"),v=new H("div"),w=new H("div"),x=new H("div"),y=q(),z=new H("div"),A=q(),D=new H("div"),E=q(),F=new H("div"),G=new H("div"),J=new H("div"),K=new H("div");s.addControlData(t);s.addClass("sapSuiteUiCommonsTimelineH");if(!t.getEnableScroll()){s.addClass("sapSuiteUiCommonsTimelineNoScroll");}if(t._useAutomaticHeight()){s.addClass("sapSuiteUiCommonsTimelineAutomaticLineHeight");}this._addAccessibilityTags(s,t);this._setWidthAndHeight(t,s);if(b){s.addClass("sapSuiteUiCommonsTimelineDblSidedH");}else{s.addClass(c?"sapSuiteUiCommonsTimelineRight":"sapSuiteUiCommonsTimelineLeft");}if(t._isGrouped()){s.addClass("sapSuiteUiCommonsTimelineGrouped");}s.addChild(t._objects.getHeaderBar());t._setMessageBars(s);J.setId(t.getId()+"-contentH-before");s.addChild(J);u.setId(t.getId()+"-contentH");u.addClass("sapSuiteUiCommonsTimelineContentsH");s.addChild(u);K.setId(t.getId()+"-contentH-after");s.addChild(K);v.setId(t.getId()+"-scrollH");v.addClass("sapSuiteUiCommonsTimelineScrollH");u.addChild(v);x.addClass("sapSuiteUiCommonsTimelineHorizontalTopLine");z.addClass("sapSuiteUiCommonsTimelineHorizontalMiddleLine");z.addChild(A);D.addClass("sapSuiteUiCommonsTimelineHorizontalBottomLine");if(b||c){x.addChild(y);}if(b||!c){D.addChild(E);}y.addClass("sapSuiteUiCommonsTimelineHorizontalScrollingLine");E.addClass("sapSuiteUiCommonsTimelineHorizontalScrollingLine");A.addClass("sapSuiteUiCommonsTimelineHorizontalScrollingLine");if(C.length>0){if(t._scrollingFadeout()){s.addChild(F);s.addChild(G);F.addClass("sapSuiteUiCommonsTimelineHorizontalLeftScroller sapSuiteUiCommonsTimelineHorizontalScroller");G.addClass("sapSuiteUiCommonsTimelineHorizontalRightScroller sapSuiteUiCommonsTimelineHorizontalScroller");if(t.getScrollingFadeout()===S.AreaWithButtons){F.addChild(this._getScrollerIcon(t,"_scollerIconLeft","Left"));G.addChild(this._getScrollerIcon(t,"_scollerIconRight","Right"));}}w.addClass("sapSuiteUiCommonsTimelineHorizontalScrollContainer");v.addChild(w);w.addChild(x);w.addChild(z);w.addChild(D);A.addChild(this._getFirstHorizontalDelimiterLine(C[0]));for(var i=0;i<C.length;i++){L=m;o=C[i];p=c?"top":"bottom";f=(g%2);h=o.getText()==="GroupHeader";n=C[i+1];j=c?y:E;if(b){j=y;if(!h){j=f?E:y;}p=f?"bottom":"top";}if(h){g=0;d=true;p="top";if(L){for(var k=i+1;k<C.length;k++){if(C[k]._isGroupHeader){L=false;break;}}}}else if(f){o._isFirstGroupEvenItem=d;d=false;}o._index=i;o._orientation="H";o._placementLine=p;j.addChild(o);var M=this._getHorizontalDelimiterLine(t,o,g,n,m&&!n,L);if(M){A.addChild(M);}if(!h){g++;}}}else{v.addChild(this._getEmptyTimelineElement(t));}if(t._showMore){A.addChild(this._getShowMoreElement(t));}return s;};
a._getFirstHorizontalDelimiterLine=function(t){var b=new H("li"),c=new H("div"),d=new H("div"),f=new H("div"),i=t._isGroupHeader;f.addClass("sapSuiteUiCommonsTimelineItemBarH");d.addClass("sapSuiteUiCommonsTimelineItemBarWrapper");d.addChild(f);c.addChild(d);c.addClass("sapSuiteUiCommonsTimelineItemBarDivWrapper");b.addChild(c);b.addClass("sapSuiteUiCommonsTimelineItemFirstBar");if(i){b.addClass(t._isGroupCollapsed()?"sapSuiteUiCommonsTimelineGroupCollapsed":"sapSuiteUiCommonsTimelineGroupExpanded");}return b;};
a._getHorizontalDelimiterLine=function(t,o,i,n,L,b){var c=(i%2),d=o.getText()==="GroupHeader",s=d?"sapSuiteUiCommonsTimelineItemGroupHeaderH":"sapSuiteUiCommonsTimelineItemBaseLength",f="sapSuiteUiCommonsTimelineItemBarH",g=n!=null&&n._isGroupHeader,h=n===null,j=o._getStatusColorClass(),k=new H("li"),m=new H("div"),p=new H("div"),q=new H("div"),u=new H("div"),v=new H("div"),w=new H("div");k.setId(o.getId()+"-line");if(d&&!o._isGroupCollapsed()){k.addStyle("display","none");}if(o._groupID){k.setAttribute("groupid",o._groupID,true);}if(d){f="sapSuiteUiCommonsTimelineItemGroupHeaderBar";k.setAttribute("nodeType","GroupHeaderBar");}else if(t.getEnableDoubleSided()){if((!g||c)&&!h){s=c?"sapSuiteUiCommonsTimelineItemHOdd":"sapSuiteUiCommonsTimelineItemHEven";}}if((!d&&L)||(d&&b)){k.addClass("sapSuiteUiCommonsTimelineLastItem");}k.addClass(e(s));q.addClass("sapSuiteUiCommonsTimelineItemBarWrapper");p.addClass("sapSuiteUiCommonsTimelineItemBarH");p.addClass(e(f));m.addStyle("display","flex");m.addStyle("height","100%");if(t.getShowIcons()||d){m.addChild(u);if(!d){if(j){u.addClass(e(j));}else{u.addClass("sapSuiteUiCommonsTimelineNoStatus");}u.addClass("sapSuiteUiCommonsTimelineItemIconWrapper");}else{u.addClass("sapSuiteUiCommonsTimelineItemGroupBarIconWrapper");}u.addChild(o._getLineIcon());}else{w.addChild(v);w.addClass("sapSuiteUiCommonsTimelineItemNoIconWrapper");v.addClass("sapSuiteUiCommonsTimelineItemNoIcon");if(j){v.addClass(e(j));}else{v.addClass("sapSuiteUiCommonsTimelineNoStatus");}m.addClass("sapSuiteUiCommonsTimelineItemWrapper");m.addChild(w);}m.addChild(q);q.addChild(p);if(t._collapsedGroups[o._groupID]){if(d){k.addClass("sapSuiteUiCommonsTimelineItemGroupCollapsedBar");}else{k.addStyle("display","none");}}k.addChild(m);return k;};
a._getVerticalTimelineElement=function(t){var b=new H("div"),c=new H("div"),d=new H("div"),f=new H("div"),g=new H("div"),h=new H("div"),j=new H("div"),m=new H("div"),n=new H("div"),o,p,N,q,s,L,C=function(){var o=new H("ul");o.addClass("sapSuiteUiCommonsTimelineItemUlWrapper");o.setAttribute("role","listbox");o.setAttribute("aria-labelledby",t.getAriaLabelledBy().join(" "),true);return o;};b.addControlData(t);b.addClass("sapSuiteUiCommonsTimeline");this._addAccessibilityTags(b,t);h.addClass("sapSuiteUiCommonsTimelineContentWrapper");if(t._isGrouped()){b.addClass("sapSuiteUiCommonsTimelineGrouped");}if(t._scrollingFadeout()){h.addChild(c);h.addChild(d);c.addClass("sapSuiteUiCommonsTimelineTopScroller sapSuiteUiCommonsTimelineVerticalScroller");d.addClass("sapSuiteUiCommonsTimelineBottomScroller sapSuiteUiCommonsTimelineVerticalScroller");if(t.getScrollingFadeout()===S.AreaWithButtons){c.addChild(this._getScrollerIcon(t,"_scollerIconTop","Top"));d.addChild(this._getScrollerIcon(t,"_scrollerIconBottom","Bottom"));}}this._setWidthAndHeight(t,b);b.addChild(t._objects.getHeaderBar());t._setMessageBars(b);if((t.getMessageStrip()!==null)&&(t.getMessageStrip()!==undefined)&&t.getMessageStrip().getText()!==""){b.addChild(t._objects.getMessageStrip());}m.setId(t.getId()+"-content-before");m.setAttribute("tabindex",0);b.addChild(m);b.addChild(h);h.addChild(f);f.setId(t.getId()+"-content");f.setAttribute("data-sap-ui-fastnavgroup","true");f.addClass("sapSuiteUiCommonsTimelineContents");f.addClass("sapSuiteUiCommonsTimelineScrollV");f.addClass("sapSuiteUiCommonsTimelineScroll");n.setId(t.getId()+"-content-after");n.setAttribute("tabindex",0);b.addChild(n);f.addChild(g);g.setId(t.getId()+"-scroll");g.addClass("sapSuiteUiCommonsTimelineScroll");o=C();var u=t._outputItem,v=t._isMaxed();if(u.length>0){g.addChild(o);for(var i=0;i<u.length;i++){L=v;p=u[i];N=u[i+1];q=p._isGroupHeader;p._orientation="V";p._position=t.getAlignment();p._additionalBarClass="";p._index=i;p._isLast=v&&u.length-1===i;if(q){o.setAttribute("groupId",p._groupID,true);}if(q){for(var k=i+1;k<u.length;k++){s=u[k];if(s._isGroupHeader){if(!s._isGroupCollapsed()&&p._isGroupCollapsed()){p._additionalBarClass="sapSuiteUiCommonsTimelineGroupNextExpanded";}L=false;break;}}}p._isLastGroup=L;if(N&&N._isGroupHeader&&!N._isGroupCollapsed()){p._additionalBarClass="sapSuiteUiCommonsTimelineGroupNextExpanded";}if(q&&(i!=0)){o=C();g.addChild(o);}o.addChild(p);}}else{g.addChild(this._getEmptyTimelineElement(t));}if(t._showMore){j.addClass("sapSuiteUiCommonsTimelineShowMoreWrapper");j.addChild(this._getShowMoreElement(t));g.addChild(j);}return b;};
a._getEmptyTimelineElement=function(t){var b=new H("div"),c=new H("span");b.addClass("sapSuiteUiCommonsTimelineNoTextWrapper");b.addChild(c);c.addChildEscaped(t.getNoDataText());return b;};
a._getShowMoreElement=function(t){var b=t._isVertical()?new H("div"):new H("li"),c="sapSuiteUiCommonsTimelineItemGetMoreButtonV",i="sap-icon://drill-down";if(t.getAxisOrientation()===T.Horizontal){i="sap-icon://process";c="sapSuiteUiCommonsTimelineItemGetMoreButtonH";}t._objects.register("moreButton",function(){var m=new B({icon:i,tooltip:r.getText("TIMELINE_MORE"),press:function(){t._loadMore();}});m.addEventDelegate({onAfterRendering:function(){this.$().attr("tabindex",-1);}},m);return m;});b.addClass("sapSuiteUiCommonsTimelineItemGetMoreButton");b.addClass(e(c));b.addChild(t._objects.getMoreButton());return b;};
a._addAccessibilityTags=function(b,t){var L=[t._objects.getAccessibilityTitle().getId()];if(t._getFilterMessage()){L.push(t._objects.getFilterMessageText().getId());}b.setAttribute("role","presentation");b.addChild(t._objects.getAccessibilityTitle());b.setAttribute("aria-labelledby",L.join(" "),true);b.setAttribute("aria-live","assertive");};
return a;},true);
sap.ui.predefine('sap/suite/ui/commons/Utils',[],function(){"use strict";var U={};
U._setupMobileDraggable=function($){if(sap.ui.getCore().isMobile()){var s=function(e,a){if(e.originalEvent.touches.length>1){return;}e.preventDefault();var b=e.originalEvent.changedTouches[0],c=document.createEvent('MouseEvents');c.initMouseEvent(a,true,true,window,1,b.screenX,b.screenY,b.clientX,b.clientY,false,false,false,false,0,null);e.target.dispatchEvent(c);};var t=false;$.bind({touchstart:function(e){if(t){return;}t=true;s(e,'mouseover');s(e,'mousemove');s(e,'mousedown');},touchmove:function(e){if(!t){return;}s(e,'mousemove');},touchend:function(e){if(!t){return;}s(e,'mouseup');s(e,'mouseout');s(e,'click');t=false;}});}};
return U;},true);
sap.ui.predefine('sap/suite/ui/commons/flexibility/Timeline.flexibility',["./changeHandler/PropertyChangeMapper","sap/base/Log"],function(P,L){"use strict";var I=Object.freeze({"-sortIcon":"showSort","-filterIcon":["showItemFilter","showTimeFilter"],"-searchField":"showSearch","-headerBar":"showHeaderBar"});
function g(i){var k;for(k in I){if(typeof k=="string"&&k.length>0&&i.endsWith(k)){return I[k];}}L.fatal("Unkonw id of an inner component: "+i);return null;}
return{"hideToolbarItem":new P(function(s){var i=s.removedElement.id;return g(i);},false),"unhideToolbarItem":new P(function(s){var i=s.revealedElementId;return g(i);},true),"hideControl":"default","unhideControl":"default","moveControls":"default"};},true);
sap.ui.predefine('sap/suite/ui/commons/flexibility/changeHandler/PropertyChangeMapper',["sap/ui/base/Object","sap/ui/fl/changeHandler/PropertyChange","sap/base/Log"],function(B,P,L){
var a=B.extend("sap.suite.ui.commons.flexibility.changeHandler.PropertyChangeMapper",{constructor:function(p,v){if(typeof p==="function"){this._fnProperty=p;}else if(typeof p==="string"){this._fnProperty=function(){return p;};}else{L.fatal("Incorrect type of property: "+typeof p);}if(typeof v==="function"){this._fnValue=v;}else{this._fnValue=function(){return v;};}}});
a.prototype.applyChange=function(c,C,p){var o=c.getDefinition().content,b=o.property;if(Array.isArray(b)){b.forEach(function(s){o.property=s;P.applyChange(c,C,p);});}else{P.applyChange(c,C,p);}};
a.prototype.completeChangeContent=function(c,s){var p=this._fnProperty(s),m=Object.assign(s,{content:{property:p,newValue:this._fnValue(p)}});P.completeChangeContent(c,m);};
a.revertChange=function(c,C,p){var o=c.getDefinition().content,b=o.property;if(Array.isArray(b)){b.forEach(function(s){o.property=s;P.revertChange(c,C,p);});}else{P.revertChange(c,C,p);}};
return a;});
sap.ui.predefine('sap/suite/ui/commons/library',["sap/ui/core/Core","sap/ui/core/library","sap/m/library"],function(){"use strict";sap.ui.getCore().initLibrary({name:"sap.suite.ui.commons",dependencies:["sap.ui.core","sap.m"],types:["sap.suite.ui.commons.BulletChartMode","sap.suite.ui.commons.CalculationBuilderComparisonOperatorType","sap.suite.ui.commons.CalculationBuilderFunctionType","sap.suite.ui.commons.CalculationBuilderItemType","sap.suite.ui.commons.CalculationBuilderLayoutType","sap.suite.ui.commons.CalculationBuilderLogicalOperatorType","sap.suite.ui.commons.CalculationBuilderOperatorType","sap.suite.ui.commons.CalculationBuilderValidationType","sap.suite.ui.commons.CommonBackground","sap.suite.ui.commons.ComparisonChartView","sap.suite.ui.commons.DeviationIndicator","sap.suite.ui.commons.FacetOverviewHeight","sap.suite.ui.commons.FrameType","sap.suite.ui.commons.HeaderContainerView","sap.suite.ui.commons.ImageEditorContainerMode","sap.suite.ui.commons.ImageEditorMode","sap.suite.ui.commons.ImageFormat","sap.suite.ui.commons.InfoTileSize","sap.suite.ui.commons.InfoTileTextColor","sap.suite.ui.commons.InfoTileValueColor","sap.suite.ui.commons.LoadState","sap.suite.ui.commons.MicroAreaChartView","sap.suite.ui.commons.MicroProcessFlowRenderType","sap.suite.ui.commons.networkgraph.ActionButtonPosition","sap.suite.ui.commons.networkgraph.BackgroundColor","sap.suite.ui.commons.networkgraph.ElementStatus","sap.suite.ui.commons.networkgraph.LayoutAlgorithmType","sap.suite.ui.commons.networkgraph.LayoutRenderType","sap.suite.ui.commons.networkgraph.LineArrowOrientation","sap.suite.ui.commons.networkgraph.LineArrowPosition","sap.suite.ui.commons.networkgraph.LineType","sap.suite.ui.commons.networkgraph.HeaderCheckboxState","sap.suite.ui.commons.networkgraph.NodePlacement","sap.suite.ui.commons.networkgraph.NodeShape","sap.suite.ui.commons.networkgraph.NodeSize","sap.suite.ui.commons.networkgraph.Orientation","sap.suite.ui.commons.networkgraph.RenderType","sap.suite.ui.commons.ProcessFlowConnectionLabelState","sap.suite.ui.commons.ProcessFlowConnectionState","sap.suite.ui.commons.ProcessFlowConnectionType","sap.suite.ui.commons.ProcessFlowDisplayState","sap.suite.ui.commons.ProcessFlowLaneState","sap.suite.ui.commons.ProcessFlowNodeState","sap.suite.ui.commons.ProcessFlowNodeType","sap.suite.ui.commons.ProcessFlowZoomLevel","sap.suite.ui.commons.SelectionState","sap.suite.ui.commons.statusindicator.FillingType","sap.suite.ui.commons.statusindicator.FillingDirectionType","sap.suite.ui.commons.taccount.TAccountPanelState","sap.suite.ui.commons.ThingGroupDesign","sap.suite.ui.commons.TimelineAlignment","sap.suite.ui.commons.TimelineAxisOrientation","sap.suite.ui.commons.TimelineFilterType","sap.suite.ui.commons.TimelineGroupType","sap.suite.ui.commons.TimelineScrollingFadeout","sap.suite.ui.commons.ValueStatus"],interfaces:[],controls:["sap.suite.ui.commons.BulletChart","sap.suite.ui.commons.BusinessCard","sap.suite.ui.commons.CalculationBuilder","sap.suite.ui.commons.CalculationBuilderExpression","sap.suite.ui.commons.CalculationBuilderFunction","sap.suite.ui.commons.CalculationBuilderInput","sap.suite.ui.commons.CalculationBuilderItem","sap.suite.ui.commons.CalculationBuilderValidationResult","sap.suite.ui.commons.CalculationBuilderVariable","sap.suite.ui.commons.ChartContainer","sap.suite.ui.commons.ChartContainerContent","sap.suite.ui.commons.ChartContainerToolbarPlaceholder","sap.suite.ui.commons.ChartTile","sap.suite.ui.commons.ColumnMicroChart","sap.suite.ui.commons.ComparisonChart","sap.suite.ui.commons.DateRangeScroller","sap.suite.ui.commons.DateRangeSlider","sap.suite.ui.commons.DateRangeSliderInternal","sap.suite.ui.commons.DeltaMicroChart","sap.suite.ui.commons.DynamicContainer","sap.suite.ui.commons.FacetOverview","sap.suite.ui.commons.FeedItemHeader","sap.suite.ui.commons.FeedTile","sap.suite.ui.commons.GenericTile","sap.suite.ui.commons.GenericTile2X2","sap.suite.ui.commons.HarveyBallMicroChart","sap.suite.ui.commons.HeaderCell","sap.suite.ui.commons.HeaderContainer","sap.suite.ui.commons.imageeditor.ImageEditor","sap.suite.ui.commons.imageeditor.ImageEditorContainer","sap.suite.ui.commons.InfoTile","sap.suite.ui.commons.JamContent","sap.suite.ui.commons.KpiTile","sap.suite.ui.commons.LaunchTile","sap.suite.ui.commons.LinkActionSheet","sap.suite.ui.commons.MicroAreaChart","sap.suite.ui.commons.MonitoringContent","sap.suite.ui.commons.MonitoringTile","sap.suite.ui.commons.networkgraph.Graph","sap.suite.ui.commons.networkgraph.Node","sap.suite.ui.commons.NewsContent","sap.suite.ui.commons.NoteTaker","sap.suite.ui.commons.NoteTakerCard","sap.suite.ui.commons.NoteTakerFeeder","sap.suite.ui.commons.NumericContent","sap.suite.ui.commons.NumericTile","sap.suite.ui.commons.PictureZoomIn","sap.suite.ui.commons.ProcessFlow","sap.suite.ui.commons.ProcessFlowConnection","sap.suite.ui.commons.ProcessFlowConnectionLabel","sap.suite.ui.commons.ProcessFlowLaneHeader","sap.suite.ui.commons.ProcessFlowNode","sap.suite.ui.commons.RepeaterViewConfiguration","sap.suite.ui.commons.SplitButton","sap.suite.ui.commons.statusindicator.StatusIndicator","sap.suite.ui.commons.statusindicator.ShapeGroup","sap.suite.ui.commons.statusindicator.Shape","sap.suite.ui.commons.statusindicator.Rectangle","sap.suite.ui.commons.statusindicator.Circle","sap.suite.ui.commons.statusindicator.CustomShape","sap.suite.ui.commons.statusindicator.PropertyThreshold","sap.suite.ui.commons.statusindicator.DiscreteThreshold","sap.suite.ui.commons.statusindicator.LibraryShape","sap.suite.ui.commons.taccount.TAccount","sap.suite.ui.commons.TargetFilter","sap.suite.ui.commons.ThingCollection","sap.suite.ui.commons.ThreePanelThingInspector","sap.suite.ui.commons.ThreePanelThingViewer","sap.suite.ui.commons.TileContent","sap.suite.ui.commons.TileContent2X2","sap.suite.ui.commons.Timeline","sap.suite.ui.commons.TimelineFilterListItem","sap.suite.ui.commons.TimelineItem","sap.suite.ui.commons.UnifiedThingGroup","sap.suite.ui.commons.UnifiedThingInspector","sap.suite.ui.commons.VerticalNavigationBar","sap.suite.ui.commons.ViewRepeater"],elements:["sap.suite.ui.commons.BulletChartData","sap.suite.ui.commons.ColumnData","sap.suite.ui.commons.ColumnMicroChartLabel","sap.suite.ui.commons.ComparisonData","sap.suite.ui.commons.CountingNavigationItem","sap.suite.ui.commons.FeedItem","sap.suite.ui.commons.HarveyBallMicroChartItem","sap.suite.ui.commons.HeaderCellItem","sap.suite.ui.commons.imageeditor.CustomSizeItem","sap.suite.ui.commons.MicroAreaChartItem","sap.suite.ui.commons.MicroAreaChartLabel","sap.suite.ui.commons.MicroAreaChartPoint","sap.suite.ui.commons.TargetFilterColumn","sap.suite.ui.commons.TargetFilterMeasureColumn","sap.suite.ui.commons.AriaProperties"],version:"1.88.0",extensions:{flChangeHandlers:{"sap.suite.ui.commons.Timeline":"sap/suite/ui/commons/flexibility/Timeline"}}});sap.suite.ui.commons.BulletChartMode={Actual:"Actual",Delta:"Delta"};sap.suite.ui.commons.CommonBackground={Lightest:"Lightest",ExtraLight:"ExtraLight",Light:"Light",MediumLight:"MediumLight",Medium:"Medium",Dark:"Dark",ExtraDark:"ExtraDark",Darkest:"Darkest"};sap.suite.ui.commons.ComparisonChartView={Normal:"Normal",Wide:"Wide"};sap.suite.ui.commons.CalculationBuilderComparisonOperatorType={"<":"<",">":">","<=":"<=",">=":">=","=":"=","!=":"!="};sap.suite.ui.commons.CalculationBuilderFunctionType={ABS:"ABS",Round:"ROUND",RoundUp:"RoundUp",RoundDown:"RoundDown",Case:"CASE",SQRT:"SQRT",NDIV0:"NDIV0",NODIM:"NODIM",SUMCT:"SUMCT",SUMGT:"SUMGT",SUMRT:"SUMRT"};sap.suite.ui.commons.CalculationBuilderItemType={Operator:"Operator",CustomOperator:"CustomOperator",Variable:"Variable",Constant:"Constant",Literal:"Literal",Function:"Function",CustomFunction:"CustomFunction",Empty:"Empty",Error:"Error"};sap.suite.ui.commons.CalculationBuilderLogicalOperatorType={AND:"AND",OR:"OR",XOR:"XOR",NOT:"NOT"};sap.suite.ui.commons.CalculationBuilderLayoutType={Default:"Default",VisualTextualReadOnly:"VisualTextualReadOnly",VisualOnly:"VisualOnly",TextualOnly:"TextualOnly"};sap.suite.ui.commons.CalculationBuilderOperatorType={"+":"+","-":"-","/":"/","*":"*","(":"(",")":")",",":","};sap.suite.ui.commons.CalculationBuilderValidationMode={FocusOut:"FocusOut",LiveChange:"LiveChange"};sap.suite.ui.commons.DeviationIndicator={Up:"Up",Down:"Down",None:"None"};sap.suite.ui.commons.FacetOverviewHeight={XS:"XS",S:"S",M:"M",L:"L",XL:"XL",XXL:"XXL",Auto:"Auto",None:"None"};sap.suite.ui.commons.FrameType={OneByOne:"OneByOne",TwoByOne:"TwoByOne",TwoThirds:"TwoThirds",Auto:"Auto"};sap.suite.ui.commons.HeaderContainerView={Horizontal:"Horizontal",Vertical:"Vertical"};sap.suite.ui.commons.InfoTileSize={XS:"XS",S:"S",M:"M",L:"L",Auto:"Auto"};sap.suite.ui.commons.InfoTileTextColor={Positive:"Positive",Critical:"Critical",Negative:"Negative"};sap.suite.ui.commons.InfoTileValueColor={Neutral:"Neutral",Good:"Good",Critical:"Critical",Error:"Error"};sap.suite.ui.commons.LoadState={Loading:"Loading",Loaded:"Loaded",Failed:"Failed",Disabled:"Disabled"};sap.suite.ui.commons.MicroAreaChartView={Normal:"Normal",Wide:"Wide"};sap.suite.ui.commons.MicroProcessFlowRenderType={Wrap:"Wrap",NoWrap:"NoWrap",Scrolling:"Scrolling",ScrollingWithResizer:"ScrollingWithResizer"};sap.suite.ui.commons.networkgraph.BackgroundColor={Default:"Default",White:"White"};sap.suite.ui.commons.networkgraph.ActionButtonPosition={Left:"Left",Right:"Right"};sap.suite.ui.commons.networkgraph.NodeShape={Circle:"Circle",Box:"Box",Custom:"Custom"};sap.suite.ui.commons.networkgraph.LineType={Solid:"Solid",Dashed:"Dashed",Dotted:"Dotted"};sap.suite.ui.commons.networkgraph.NodePlacement={BrandesKoepf:"BrandesKoepf",LinearSegments:"LinearSegments",Simple:"Simple"};sap.suite.ui.commons.networkgraph.ElementStatus={Standard:"Standard",Success:"Success",Warning:"Warning",Error:"Error",Information:"Information"};sap.suite.ui.commons.networkgraph.Orientation={LeftRight:"LeftRight",RightLeft:"RightLeft",TopBottom:"TopBottom",BottomTop:"BottomTop"};sap.suite.ui.commons.networkgraph.RenderType={Html:"Html",Svg:"Svg"};sap.suite.ui.commons.networkgraph.LineArrowOrientation={ParentOf:"ParentOf",ChildOf:"ChildOf",None:"None",Both:"Both"};sap.suite.ui.commons.networkgraph.LineArrowPosition={Start:"Start",Middle:"Middle",End:"End"};sap.suite.ui.commons.networkgraph.LayoutRenderType={LayeredWithGroups:"LayeredWithGroups",SwimLanes:"SwimLanes",Forces:"Forces",TwoColumns:"TwoColumns"};sap.suite.ui.commons.networkgraph.HeaderCheckboxState={Hidden:"Hidden",Checked:"Checked",Unchecked:"Unchecked"};sap.suite.ui.commons.ProcessFlowConnectionLabelState={Neutral:"Neutral",Positive:"Positive",Critical:"Critical",Negative:"Negative"};sap.suite.ui.commons.ProcessFlowConnectionState={Highlighted:"Highlighted",Dimmed:"Dimmed",Regular:"Regular",Selected:"Selected"};sap.suite.ui.commons.ProcessFlowConnectionType={Planned:"Planned",Normal:"Normal"};sap.suite.ui.commons.ProcessFlowDisplayState={Regular:"Regular",RegularFocused:"RegularFocused",Highlighted:"Highlighted",HighlightedFocused:"HighlightedFocused",Dimmed:"Dimmed",DimmedFocused:"DimmedFocused",Selected:"Selected",SelectedHighlighted:"SelectedHighlighted",SelectedHighlightedFocused:"SelectedHighlightedFocused",SelectedFocused:"SelectedFocused"};sap.suite.ui.commons.ProcessFlowLaneState={value:"value",state:"state"};sap.suite.ui.commons.ProcessFlowNodeState={Positive:"Positive",Negative:"Negative",Critical:"Critical",Planned:"Planned",Neutral:"Neutral",PlannedNegative:"PlannedNegative"};sap.suite.ui.commons.ProcessFlowNodeType={Single:"Single",Aggregated:"Aggregated"};sap.suite.ui.commons.ProcessFlowZoomLevel={One:"One",Two:"Two",Three:"Three",Four:"Four"};sap.suite.ui.commons.SelectionState={Selected:"Selected",NotSelected:"NotSelected",Semantic:"Semantic"};sap.suite.ui.commons.statusindicator.FillingDirectionType={Up:"Up",Down:"Down",Left:"Left",Right:"Right",Clockwise:"Clockwise",CounterClockwise:"CounterClockwise"};sap.suite.ui.commons.taccount.TAccountPanelState={Default:"Default",Table:"Table"};sap.suite.ui.commons.statusindicator.HorizontalAlignmentType={Left:"Left",Middle:"Middle",Right:"Right"};sap.suite.ui.commons.statusindicator.VerticalAlignmentType={Top:"Top",Middle:"Middle",Bottom:"Bottom"};sap.suite.ui.commons.statusindicator.SizeType={None:"None",Small:"Small",Medium:"Medium",Large:"Large",ExtraLarge:"ExtraLarge"};sap.suite.ui.commons.statusindicator.LabelPositionType={Top:"Top",Right:"Right",Bottom:"Bottom",Left:"Left"};sap.suite.ui.commons.statusindicator.FillingType={Linear:"Linear",Radial:"Radial",Circular:"Circular",None:"None"};sap.suite.ui.commons.ThingGroupDesign={ZeroIndent:"ZeroIndent",TopIndent:"TopIndent"};sap.suite.ui.commons.TimelineAlignment={Right:"Right",Left:"Left",Top:"Top",Bottom:"Bottom"};sap.suite.ui.commons.TimelineAxisOrientation={Vertical:"Vertical",Horizontal:"Horizontal"};sap.suite.ui.commons.TimelineFilterType={Data:"Data",Time:"Time",Search:"Search"};sap.suite.ui.commons.TimelineGroupType={None:"None",Year:"Year",Month:"Month",Quarter:"Quarter",Week:"Week",Day:"Day"};sap.suite.ui.commons.TimelineScrollingFadeout={None:"None",Area:"Area",AreaWithButtons:"AreaWithButtons"};sap.suite.ui.commons.ValueStatus={Good:"Good",Neutral:"Neutral",Critical:"Critical",Bad:"Bad"};sap.suite.ui.commons.ImageEditorMode={Resize:"Resize",CropRectangle:"CropRectangle",CropEllipse:"CropEllipse",CropCustomShape:"CropCustomShape",Default:"Default"};sap.suite.ui.commons.ImageEditorContainerMode={Transform:"Transform",Crop:"Crop",Filter:"Filter"};sap.suite.ui.commons.ImageFormat={Png:"Png",Jpeg:"Jpeg"};sap.suite.ui.commons.ImageEditorContainerButton={Transform:"Transform",Crop:"Crop",Filter:"Filter"};return sap.suite.ui.commons;});
sap.ui.predefine('sap/suite/ui/commons/networkgraph/ActionButton',["sap/ui/core/Element"],function(E){"use strict";
var A=E.extend("sap.suite.ui.commons.networkgraph.ActionButton",{metadata:{library:"sap.suite.ui.commons",properties:{icon:{type:"string",group:"Appearance",defaultValue:null},title:{type:"string",group:"Appearance",defaultValue:null},enabled:{type:"boolean",group:"Appearance",defaultValue:true},position:{type:"sap.suite.ui.commons.networkgraph.ActionButtonPosition",group:"Appearance",defaultValue:"Right"}},events:{press:{parameters:{buttonElement:{type:"object"}}}}}});
A.prototype.invalidate=function(){var p=this.getParent();if(p&&p._bActionButtonsRendered&&!this._bTimeoutRunning){this._bTimeoutRunning=true;setTimeout(function(){this._bTimeoutRunning=false;p._bActionButtonsRendered=false;p.showActionButtons(true);}.bind(this),0);}};
return A;});
sap.ui.predefine('sap/suite/ui/commons/networkgraph/Coordinate',["sap/ui/core/Element"],function(E){"use strict";
var C=E.extend("sap.suite.ui.commons.networkgraph.Coordinate",{metadata:{library:"sap.suite.ui.commons",properties:{x:{type:"float",group:"Misc",defaultValue:undefined},y:{type:"float",group:"Misc",defaultValue:undefined}}}});
C.prototype.setX=function(x){this.setProperty("x",x,true);return this;};
C.prototype.setY=function(y){this.setProperty("y",y,true);return this;};
return C;});
sap.ui.predefine('sap/suite/ui/commons/networkgraph/ElementAttribute',["sap/ui/core/Control","sap/m/Text","sap/suite/ui/commons/networkgraph/ElementBase"],function(C,T,E){"use strict";
var a=C.extend("sap.suite.ui.commons.networkgraph.ElementAttribute",{
metadata:{library:"sap.suite.ui.commons",properties:{label:{type:"string",group:"Misc",defaultValue:null},value:{type:"string",group:"Misc",defaultValue:null},labelStatus:{type:"string",group:"Misc",defaultValue:null},valueStatus:{type:"string",group:"Misc",defaultValue:null},visible:{type:"boolean",group:"Misc",defaultValue:true},icon:{type:"string",group:"Misc",defaultValue:""}}},
renderer:{apiVersion:2,render:function(r,c){var i=c.getId();r.openStart("div",i);r.attr("data-sap-ui",i);r.class("sapSuiteUiCommonsNetworkGraphDivNodeAttributesRow").openEnd();if(c.getVisible()){r.openStart("div").class("sapSuiteUiCommonsNetworkGraphDivNodeAttributesIcons").openEnd();if(c.getIcon()){r.openStart("div",c.getId()+"-icon");r.class("sapSuiteUiCommonsNetworkGraphDivNodeText").class("sapSuiteUiCommonsNetworkGraphDivAttributeIcon").openEnd();r.unsafeHtml(c.getParent()._renderHtmlIcon(c.getIcon()));r.close("div");}r.close("div");r.openStart("div").class("sapSuiteUiCommonsNetworkGraphDivNodeLabels").openEnd();r.renderControl(c._getLabelControl());r.close("div");r.openStart("div").class("sapSuiteUiCommonsNetworkGraphDivNodeValues").openEnd();r.renderControl(c._getValueControl());r.close("div");}r.close("div");}},
onAfterRendering:function(){var p=this.getParent(),l=this.getLabelStatus()||p.getStatus(),v=this.getValueStatus()||p.getStatus();if(l){var c=p._getColor(E.ColorType.Content,l);if(c){this.$("label").css("color",c);this.$("icon").css("color",c);}}if(v){var c=p._getColor(E.ColorType.Content,v);if(c){this.$("value").css("color",c);}}}
});
a.prototype._getLabelControl=function(r){if(!this._oLabel){this._oLabel=new T(this.getId()+"-label",{textAlign:"Left",wrappingType:"Hyphenated"}).addStyleClass("sapSuiteUiCommonsNetworkGraphDivNodeText");}this._oLabel.setText(this.getLabel());return this._oLabel;};
a.prototype._getValueControl=function(r){if(!this._oValue){this._oValue=new T(this.getId()+"-value",{textAlign:"Right",wrappingType:"Hyphenated"}).addStyleClass("sapSuiteUiCommonsNetworkGraphDivNodeText");}this._oValue.setText(this.getValue());return this._oValue;};
a.prototype.exit=function(){if(this._oValue){this._oValue.destroy();this._oValue=null;}if(this._oLabel){this._oLabel.destroy();this._oLabel=null;}};
a.Type=Object.freeze({Label:"Label",Value:"Value"});return a;});
sap.ui.predefine('sap/suite/ui/commons/networkgraph/ElementBase',["sap/ui/thirdparty/jquery","sap/suite/ui/commons/library","./SvgBase","sap/ui/base/ManagedObject","sap/ui/core/theming/Parameters","sap/m/CheckBox","sap/m/library"],function(q,l,S,M,P,C,a){"use strict";var V=a.ValueCSSColor,b=l.networkgraph.ElementStatus,H=l.networkgraph.HeaderCheckboxState;
var E=S.extend("sap.suite.ui.commons.networkgraph.ElementBase",{
metadata:{properties:{title:{type:"string",group:"Misc",defaultValue:null},description:{type:"string",group:"Misc",defaultValue:null},status:{type:"string",group:"Appearance",defaultValue:b.Standard}},aggregations:{attributes:{type:"sap.suite.ui.commons.networkgraph.ElementAttribute",multiple:true,singularName:"attribute"}}},
renderer:{}
});
E.prototype.scrollToElement=function(){var p=this.getParent();if(p){p._scrollToElement(this);}};
E.prototype._afterRenderingBase=function(){var p=this.getParent(),$,s;var i=p&&p._isUseNodeHtml()&&this.isA("sap.suite.ui.commons.networkgraph.Node"),I=this.isA("sap.suite.ui.commons.networkgraph.Group");if(!i&&!I){if(this._cannotAppendInnerHtml()){$=this.$().parent();s=this._convertToSvg(q.parseHTML(this._render()));$[0].replaceChild(s,this.$()[0]);}else{this.$()[0].outerHTML=this._render();}}this._afterRendering();};
E.prototype._removeFromInvalidatedControls=function(){try{this.getUIArea()._onControlRendered(this);}catch(e){}};
E.prototype._setFocus=function(f){var n=f?"addClass":"removeClass";this.$()[n](this.FOCUS_CLASS);};
E.prototype._replaceId=function($,s){if($.attr("id")){$.attr("id",$.attr("id")+s);}$.removeAttr("data-sap-ui");var c=$.children();if(c.length===0){return;}c.each(function(i,o){this._replaceId(q(o),s);}.bind(this));};
E.prototype._useInLayout=function(){return true;};
E.prototype._hasFocus=function(){return this.$().hasClass(this.FOCUS_CLASS);};
E.prototype._hasDefaultStatus=function(s){s=s||this.getStatus();return s===b.Error||s===b.Information||s===b.Warning||s===b.Success;};
E.prototype._hasCustomStatus=function(s){s=s||this.getStatus();if(s===b.Standard||this._hasDefaultStatus(s)){return false;}return!!s;};
E.prototype._isCustomStatusColor=function(s){return s!==E.ColorType.BorderWidth&&s!==E.ColorType.BorderStyle;};
E.prototype._getElementId=function(s){return s?this.getId()+s:this.getId();};
E.prototype._getColor=function(t,s){var p=this.getParent(),f,o,c="";var d=function(){if(typeof this.getSelected==="function"&&this.getSelected()){if(t===E.ColorType.Background||t===E.ColorType.Content||t===E.ColorType.Border){t="Selected"+t;}if(t==E.ColorType.HeaderContent&&this._isBox()){t=E.ColorType.Content;}}}.bind(this);s=s||this.getStatus();if(!this._hasCustomStatus(s)){return"";}if(!p||!t){return"";}o=p._oStatuses[s];if(o){if(t.indexOf("Focus")!==-1){if(!o.getUseFocusColorAsContentColor()){return"";}t=t.replace("Focus","Content");}d();f="get"+t+"Color";var n=o[f]();if(n){var c=P.get(n);if(!c&&n&&V.isValid(n)){c=n;}}}return c?c:"";};
E.prototype._getStatusValue=function(t,s){var p=this.getParent(),o;s=s||this.getStatus();if(!this._hasCustomStatus(s)){return"";}if(!p||!t){return"";}o=p._oStatuses[s];if(o){return o["get"+t]();}return"";};
E.prototype._getStatusStyle=function(p,c){var s="";if(!this._hasCustomStatus()){return"";}Object.keys(p).forEach(function(k){var v=this._isCustomStatusColor(p[k])?this._getColor(p[k]):this._getStatusValue(p[k]);if(v){if(s){s+=";";}s+=k+":"+v;}},this);if(c&&s){s="style=\""+s+"\"";}return s;};
E.prototype._checkForProcessData=function(){var p=this.getParent();if(p&&p._bRequiresDataProcessing){p._processData();}};
E.prototype.getStyleObject=function(s){var r={};if(s){var c=s.split(';');for(var i=0;i<c.length;i++){if(c[i]){var e=c[i].split(':');r[e.splice(0,1)[0]]=e.join(':');}}}return r;};
E.prototype.applyStyles=function(r,s){Object.keys(s).forEach(function(A){r.style(A,s[A]);});};
E.prototype.getVisibleAttributes=function(){return this.getAttributes().filter(function(A){return A.getVisible();});};
E.prototype.setProperty=function(p,v,s){var c=Object.getPrototypeOf(this).aProcessRequiredProperties;M.prototype.setProperty.call(this,p,v,s);if(c&&(c.indexOf(p)!==-1)&&this.getParent()){this.getParent()._bRequiresDataProcessing=true;}};
E.prototype.toString=function(){return this.getMetadata()._sClassName+" - "+this.getTitle();};
E.prototype._correctTitle=function(c){if(this.getTitle()){var $=this.$().find("."+c);if($[0]){var t=$[0].getBBox().width,m=parseInt($.attr("maxwidth"),10);if(t>m){this._createText($[0],{text:this.getTitle(),hCenter:true});}}}};
E.prototype._renderTitle=function(A){var c=10;var h=this._renderControl("g",{"clip-path":"url(#"+this.getId()+"-title-clip)"},false);h+=this._renderText({attributes:{"style":A.style,"class":A.class,x:A.x,y:A.y,maxWidth:A.maxWidth},text:A.title,height:c});h+="</g>";return h;};
E.prototype._renderClipPath=function(A){var h=this._renderControl("clipPath",{id:A.id},false);h+=this._renderControl("rect",{x:A.x,y:A.y,width:A.width||this._iWidth,height:A.height||this._iHeight,direction:A.direction||""});h+="</clipPath>";return h;};
E.prototype._renderClonedControl=function(o,c){if(o.mapRender){var $=c.$().clone();this._replaceId($,o.idSufix);o.renderManager.unsafeHtml($[0].outerHTML);}else{o.renderManager.renderControl(c);}};
E.prototype._appendActionButton=function(A,$){var i=A.id?"id=\""+A.id+"\"":"";var B="<div "+i+" title=\""+A.title+"\"class=\"sapSuiteUiCommonsNetworkGraphDivActionButtonBackground\">";B+="<div class=\"sapSuiteUiCommonsNetworkGraphDivActionButton ";if(!A.enable){B+="sapSuiteUiCommonsNetworkGraphDivActionButtonDisabled\"";B+="style = \" display: none";}B+="\">";B+=this._renderHtmlIcon(A.icon,(A.class||""));B+="</div>";B+="<div class=\"sapSuiteUiCommonsNetworkActionButtonFocusCircle\"></div>";B+="</div>";var c=q(B);if(A.enable&&A.click){c.click(A.click);c.click(function(e){if(this.getParent()){this.getParent().setFocus({item:this,button:c[0]});}}.bind(this));}$.append(c);};
E._isRectOnScreen=function(x,X,y,Y,L,r,t,B){return(Math.max(x,X)>L)&&(Math.min(x,X)<r)&&(Math.max(y,Y)>t)&&(Math.min(y,Y)<B);};
E.prototype._isOnScreen=function(L,r,t,B){return false;};
E.prototype._setHeaderCheckBoxState=function(v){if(v!==H.Hidden){this._getHeaderCheckbox().setSelected(v===H.Checked);this._getHeaderCheckbox().setVisible(true);}else if(this.getAggregation("_checkBox")){this._getHeaderCheckbox().setVisible(false);}this.setProperty("headerCheckBoxState",v);};
E.prototype.setVisible=function(v){var g=this.getParent();this.setProperty("visible",v);if(g){g.setFocus(null);g._setupKeyboardNavigation();}return this;};
E.prototype.setStatus=function(s){var g=this.getParent();this.setProperty("status",s);if(g&&g._bIsLayedOut){g.updateLegend();}return this;};
E.ColorType=Object.freeze({BorderStyle:"BorderStyle",BorderWidth:"BorderWidth",Background:"Background",Border:"Border",Content:"Content",HeaderContent:"HeaderContent",SelectedBorder:"SelectedBorder",SelectedBackground:"SelectedBackground",SelectedContent:"SelectedContent",HoverBackground:"HoverBackground",HoverBorder:"HoverBorder",HoverContent:"HoverContent",Focus:"Focus",HoverFocus:"HoverFocus",SelectedFocus:"SelectedFocus"});return E;});
sap.ui.predefine('sap/suite/ui/commons/networkgraph/Graph',["sap/suite/ui/commons/library","sap/ui/thirdparty/jquery","sap/ui/core/Control","./SvgBase","./Node","./Line","./Group","./layout/LayeredLayout","./Tooltip","sap/ui/core/Popup","sap/ui/model/json/JSONModel","sap/m/SuggestionItem","./Utils","sap/m/Label","sap/m/OverflowToolbar","sap/m/OverflowToolbarButton","sap/m/SearchField","sap/m/ToolbarSpacer","sap/ui/core/CustomData","sap/ui/model/Filter","sap/m/OverflowToolbarLayoutData","./KeyboardNavigator","sap/ui/core/theming/Parameters","sap/base/Log","sap/ui/performance/Measurement","sap/base/util/uid","sap/base/security/encodeXML","./GraphRenderer","sap/m/ToggleButton","sap/ui/core/routing/HashChanger","sap/m/library"],function(l,q,C,S,N,L,G,c,T,P,J,d,U,e,O,f,g,h,j,F,k,K,m,n,M,u,o,p,r,H,s){"use strict";var B=s.ButtonType,t=l.networkgraph.Orientation,v=l.networkgraph.LayoutRenderType,R=l.networkgraph.RenderType;var A="nodes",w="lines",x="groups";var Z=[0.05,0.1,0.25,0.33,0.50,0.67,0.75,0.80,0.90,1,1.1,1.25,1.5,1.75,2,2.5,3,4,5],D=1,y=0.4,z=100000;var E={Group:"group",Node:"node",Line:"line",IsLastKey:"islast",TypeKey:"type"};var I=Object.freeze({Node:"Node",Line:"Line",Group:"Group"});var Q=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var V=0,W=100;
var X=d.extend("sap.suite.ui.commons.networkgraph.LimitedSuggestionItem",{render:function(a,i,b,$){if(V++<W){d.prototype.render.call(this,a,i,b,$);}}});
var Y=S.extend("sap.suite.ui.commons.networkgraph.Graph",{metadata:{library:"sap.suite.ui.commons",properties:{height:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:"100%"},width:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:"100%"},orientation:{type:"sap.suite.ui.commons.networkgraph.Orientation",group:"Behavior",defaultValue:t.LeftRight},enableZoom:{type:"boolean",group:"Behavior",defaultValue:true},enableWheelZoom:{type:"boolean",group:"Behavior",defaultValue:true},backgroundImage:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},backgroundColor:{type:"sap.suite.ui.commons.networkgraph.BackgroundColor",group:"Appearance",defaultValue:"White"},renderType:{type:"sap.suite.ui.commons.networkgraph.RenderType",group:"Appearance",defaultValue:R.Html},noData:{type:"boolean",group:"Behavior",defaultValue:false},noDataText:{type:"string",group:"Behavior",defaultValue:""}},aggregations:{lines:{type:"sap.suite.ui.commons.networkgraph.Line",multiple:true,singularName:"line"},nodes:{type:"sap.suite.ui.commons.networkgraph.Node",multiple:true,singularName:"node"},groups:{type:"sap.suite.ui.commons.networkgraph.Group",multiple:true,singularName:"group"},legend:{type:"sap.ui.core.Control",multiple:false},layoutAlgorithm:{type:"sap.suite.ui.commons.networkgraph.layout.LayoutAlgorithm",multiple:false},statuses:{type:"sap.suite.ui.commons.networkgraph.Status",multiple:true,singularName:"status"}},associations:{ariaDescribedBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaDescribedBy"},ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},events:{graphReady:{},afterLayouting:{},beforeLayouting:{},zoomChanged:{},failure:{parameters:{type:"string",message:"string"}},selectionChange:{parameters:{items:{type:"sap.suite.ui.commons.networkgraph.ElementBase[]"}}},searchSuggest:{parameters:{term:{type:"string"}}},search:{parameters:{term:{type:"string"},key:{type:"string"}}}}}});
Y.FAILURE_TYPE={INCONSISTENT_MODEL:"Inconsistent model",LAYOUT_FAILURE:"Layout failure"};Y.prototype.ZOOM_100=D;
Y.prototype.init=function(){this._fZoomLevel=1;this._mSelectedNodes={};this._mSelectedLines={};this._bIsLayedOut=false;this._bIsFullScreen=false;this._mNodes={};this._bNeedNodeProcessing=true;this._oFullScreenContainer=null;this._bRequiresDataProcessing=true;this._oPanning={};this._oLegendLabels={};this._iRunningLayouts=0;this._oLastLayout=null;this._bIsRtl=sap.ui.getCore().getConfiguration().getRTL();this._oFocus=null;this._tooltip=this._createTooltip();this._bIsInvalid=false;this._oStatuses={};this._aShadedNodes=[];this._createToolbar();this.oHashChanger=new H();this.oHashChanger.init();};
Y.prototype.onBeforeRendering=function(){this._bIsRtl=sap.ui.getCore().getConfiguration().getRTL();this.setBusy(false);this.setBusyIndicatorDelay(0);this._iNodeMaxWidth=0;this.getNodes().forEach(function(a){a._resetDimensions();var i=a.getMaxWidth();if(i>this._iNodeMaxWidth){this._iNodeMaxWidth=i;}}.bind(this));this.getLines().forEach(function(a){a._resetLayoutData();});if(!this.getNoData()){this._loadData();}};
Y.prototype.onAfterRendering=function(){var a="",b=this.getNodes(),i=this._bIsRtl?"direction="+"\"rtl\"":"",$="<rect class=\"sapSuiteFlickerFreeRect\" x=\"0\" y=\"0\"></rect>";this.$divnodes=this.$("divnodes");this.$divgroups=this.$("divgroups");this.$background=this.$("background");this.$tooltips=this.$("tooltiplayer");this.$scroller=this.$("scroller");this._$innerscroller=this.$("innerscroller");this.$legend=this.$("legend");if(this._oFullScreenContainer&&this._bIsFullScreen){this._oFullScreenContainer.$content=this.$();this.$().addClass("sapSuiteUiCommonsNetworkGraphFullScreen");}if(b.length===0||this._bIsInvalid||this.getNoData()){if(this._bIsInvalid){this.$scroller.html("<span class=\"sapSuiteNetworkGraphErrorText\">"+Q.getText("NETWORK_GRAPH_WRONGDATA")+"</span>");}if(this._oSuggestionItemsModel){this._oSuggestionItemsModel.setData("");}this.fireGraphReady();return;}this.setBusy(true);b.forEach(function(a1){a1.bOutput=true;});if(this._isDelayedLayouting()){if(!this._isUseNodeHtml()){b.forEach(function(a1){a1._setupWidthAndHeight();a+=a1._render({sizeDetermination:true});a+="</g>";});}var _=function(){if(this._iNodeMaxWidth){this.$divnodes.css("width",this._iNodeMaxWidth+50);}this._isUseNodeHtml()?this._createDivNodes():this._$innerscroller.append("<svg id=\""+this.getId()+"-sizesvg\""+i+" class=\"sapSuiteUiCommonsNetworkGraphSvg\">"+a+$+"</svg>");b.forEach(function(a1){if(this._isUseNodeHtml()){a1._setupDivDimensions();}else{a1.calculateSizes();a1._setupWidthAndHeight();}}.bind(this));this._preprocessData();sap.ui.getCore().detachThemeChanged(_);}.bind(this);if(!sap.ui.getCore().isThemeApplied()){sap.ui.getCore().attachThemeChanged(_);}else{_();}}this.oHashChanger.attachEvent("hashChanged",function(){if(this._bIsFullScreen){this.toggleFullScreen();}}.bind(this));};
Y.prototype.exit=function(){if(this.oHashChanger){this.oHashChanger.destroy();}};
Y.prototype._beforeRender=function(){this.fireEvent("afterLayouting");};
Y.prototype._fireFailure=function(a,b){var i=b;if(typeof b==="object"&&b.text){i=b.text;}var $="Graph failure: "+a+": "+i;if(a===Y.FAILURE_TYPE.INCONSISTENT_MODEL){$+=" This may be due to the model size limitation. For its increase use model's 'setSizeLimit' method.";}this.fireFailure([a.toString(),i]);n.error($);};
Y.prototype.isFullScreen=function(){return this._bIsFullScreen;};
Y.prototype.toggleFullScreen=function(){this._toggleFullScreen();};
Y.prototype.preventInvalidation=function(b){this._bPreventInvalidation=b;};
Y.prototype.scrollToElement=function(a){this._scrollToElement(a);};
Y.prototype.setSearchSuggestionItems=function(i){var a=[];if(i){i.forEach(function(b){a.push({text:b.getText(),icon:b.getIcon(),key:b.getKey(),description:b.getDescription()});});}this._oSuggestionItemsModel.setData({items:a});};
Y.prototype.destroyAllElements=function(){this.destroyAggregation(A,false);this.destroyAggregation(x,false);this.destroyAggregation(w,false);};
Y.prototype.deselect=function(b){var i=[],$=this.$(),a=function(_){Object.keys(_).forEach(function(a1){i.push(_[a1]);_[a1].setSelected(false);},this);}.bind(this);$.find("."+this.HIGHLIGHT_CLASS).removeClass(this.HIGHLIGHT_CLASS);$.find("."+this.SELECT_CLASS).removeClass(this.SELECT_CLASS);$.find("."+this.VISIBLE_ACTIONS_BUTTONS_CLASS).removeClass(this.VISIBLE_ACTIONS_BUTTONS_CLASS);a(this._mSelectedNodes);a(this._mSelectedLines);this._aShadedNodes.forEach(function(_){_._setNodeOpacity(false);});this._aShadedNodes=[];this.$(this.LINEBUTTONSID).hide();if(!b&&i.length){this.fireSelectionChange({items:i});}return i;};
Y.prototype.getFocus=function(){return this._oFocus;};
Y.prototype.getToolbar=function(){return this._toolbar;};
Y.prototype.getNodeByKey=function(a){if(this._bRequiresDataProcessing){this._processData();}return this._mNodes[a];};
Y.prototype.setCustomLegendLabel=function(a){var b;if(a.isGroup===true){b=I.Group;}else if(a.isLine===true){b=I.Line;}else{b=a.isNode===false?I.Line:I.Node;}if(a.status){this._oLegendLabels[b+a.status]=a.label;this._createLegend();}};
Y.prototype.updateLegend=function(){this._createLegend();};
Y.prototype.zoom=function(a){a=a||{};a.deltaY=(a.zoomin!==false)?1:-1;if(a.x&&a.y){a.point={x:a.x,y:a.y};}this._zoom(a);};
Y.prototype.getZoomLevelMilestones=function(){return Z;};
Y.prototype.getCurrentZoomLevel=function(){return this._fZoomLevel;};
Y.prototype.setCurrentZoomLevel=function(a){this._fZoomLevel=a;this._zoomLabel.setText(this._getZoomText());};
Y.prototype.getCorrectMousePosition=function(a){var b=this.$svg.offset(),i=1,$=1;if(this._iWidth!==this.$svg.width()||this._iHeight!==this.$svg.height()){i=this._iWidth/this.$svg.width();$=this._iHeight/this.$svg.height();}return{x:parseInt((a.x-b.left)*i,10),y:parseInt((a.y-b.top)*$,10)};};
Y.prototype._createTooltip=function(){var a=new T(this.getId()+"-tooltip");this.addDependent(a);a.create(this);a.attachEvent("afterClose",function(){this.setFocus(this.getFocus());}.bind(this));return a;};
Y.prototype.defocus=function(){this.$().find("."+this.FOCUS_CLASS).removeClass(this.FOCUS_CLASS);};
Y.prototype.setFocus=function(a){if(!a&&!this._oFocus||a&&this._oFocus&&a.item===this._oFocus.item&&a.button===this._oFocus.button){return;}this.defocus();if(this.getFocusDomRef()){this.getFocusDomRef().focus();}if(a){if(a.button){if(a.item instanceof N||a.item instanceof L){a.item._setActionButtonFocus(a.button,true);}else if(a.item instanceof G){if(a.button===G.BUTTONS.MENU){a.item._setMenuButtonFocus(true);}else if(a.button===G.BUTTONS.COLLAPSE){a.item._setCollapseButtonFocus(true);}}}else if(a.item){a.item._setFocus(true);if(a.item instanceof G){a.button=G.BUTTONS.MENU;}}}this._oFocus=a;this._ensureOnScreen(a?a.item:null);this._updateAccessibility(a);};
Y.prototype._updateAccessibility=function(a){var b=function(){this._setAccessibilityTitle(Q.getText("NETWORK_GRAPH_ACCESSIBILITY_CONTENT"));}.bind(this),i=function($){return Q.getText("NETWORK_GRAPH_ACCESSIBILITY_ACTION_BUTTON")+" "+$;};if(a){if(a.button){if(a.item instanceof N){this._setAccessibilityTitle(a.item._getActionButtonTitle(a.button));}else if(a.item instanceof G){if(a.button===G.BUTTONS.MENU){this._setAccessibilityTitle(i(Q.getText("NETWORK_GRAPH_GROUP_DETAIL")));}else if(a.button===G.BUTTONS.COLLAPSE){this._setAccessibilityTitle(i(Q.getText("NETWORK_GRAPH_EXPAND_COLLAPSE")));}else{b();}}else{b();}}else if(a.item){this._setAccessibilityTitle(a.item._getAccessibilityLabel());}}else{b();}};
Y.prototype._processProperties=function(){if(this._bNeedNodeProcessing){this._mSelectedNodes={};this._mSelectedLines={};this.getNodes().forEach(function(a){if(a.getSelected()){this._mSelectedNodes[a.getKey()]=a;}if(a.getCollapsed()){a.setCollapsed(true);}},this);this.getLines().forEach(function(a){if(a.getSelected()){this._mSelectedLines[a._getLineId()]=a;}},this);this._bNeedNodeProcessing=false;}};
Y.prototype._loadData=function(){if(this.getNodes().length>0){if(!this._processData()){return;}if(!this._isDelayedLayouting()){setTimeout(this._preprocessData.bind(this),0);}}};
Y.prototype._preprocessData=function(){this._bIsLayedOut=false;this._bImageLoaded=false;this.fireBeforeLayouting();this._applyLayout().then(this._render.bind(this));};
Y.prototype._getAllElements=function(){return this.getNodes().concat(this.getGroups());};
Y.prototype._render=function(){this._beforeRender();this._iRunningLayouts--;if(this._iRunningLayouts>0){return;}this._oLastLayout=null;this._createSearchSuggestItems();this._innerRender();this._createLegend();this._processProperties();if(this._fZoomLevel!==1){this.$svg[0].setAttribute("viewBox","0 0 "+this.$svg.width()+" "+this.$svg.height());this.$svg.width(this.$svg.width()*this._fZoomLevel);this.$svg.height(this.$svg.height()*this._fZoomLevel);this.$background.width(this.$svg.width()*this._fZoomLevel);this.$background.height(this.$svg.height()*this._fZoomLevel);if(this._isUseNodeHtml()){var a="scale("+this._fZoomLevel+")";this.$("divnodes").css("transform",a);}this.$("tooltiplayer").css("transform",a);this.$("divgroups").css("transform",a);}this._setLineClasses();if(this._selectElementAfterScroll){this._scrollToElement(this._selectElementAfterScroll);this._selectElementAfterScroll=null;}this._bIsLayedOut=true;this._setupEvents();this._setupKeyboardNavigation();this.setFocus(this.getFocus());if(!this.getBackgroundImage()||this._bImageLoaded){this.setBusy(false);this.fireGraphReady();}if(!this._isSwimLane()&&!this._isTwoColumnsLayout()){this.$("innerscroller").addClass(" sapSuiteUiCommonsNetworkGraphInnerScrollerCenter ");}};
Y.prototype._createDivNodes=function(){var a=sap.ui.getCore().createRenderManager();this.getNodes().forEach(function(i){i._bMainRender=true;a.renderControl(i);i._bMainRender=false;});a.flush(this.$divnodes[0]);a.destroy();};
Y.prototype._innerRender=function(a){var b=function(f1){var g1="";f1.forEach(function(h1){g1+=h1._render();h1.bOutput=true;});return g1;};var i=function(){this.$svg.find(".sapSuiteFlickerFreeRect").remove();this._bImageLoaded=true;if(this._bIsLayedOut){this.setBusy(false);this.fireGraphReady();}}.bind(this);var $=function(){var f1=sap.ui.getCore().createRenderManager();this.getGroups().forEach(function(g1){f1.renderControl(g1);});f1.flush(this.$("divgroups")[0],false,true);f1.destroy();}.bind(this);var _=20,a1=50,b1=function(){var f1=0,g1=0;var h1=function(k1,l1){if(k1>f1){f1=k1;}if(l1>g1){g1=l1;}};this._iWidth=0;this._iHeight=0;this._getAllElements().forEach(function(k1){if(!k1._isIgnored()){h1(k1._iWidth+k1.getX(),k1._iHeight+k1.getY());}},this);this.getLines().forEach(function(k1){if(!k1._isIgnored()){k1.getCoordinates().forEach(function(l1){h1(l1.getX(),l1.getY());});}},this);if(this.getBackgroundImage()){var i1=new Image();i1.onload=function(){this._iWidth=Math.max(this._iWidth,i1.width);this._iHeight=Math.max(this._iHeight,i1.height);this.$svg.width(this._iWidth);this.$svg.height(this._iHeight);this.$background.width(this._iWidth);this.$background.height(this._iHeight);this.$svg.css("background-image","url("+this.getBackgroundImage()+")");this.$svg.css("background-size","cover");i();}.bind(this);i1.onerror=function(){n.warning("Unable to load background image.");i();};i1.src=this.getBackgroundImage();}this._iWidth=Math.round(f1+(this._isTwoColumnsLayout()?0:a1));this._iHeight=Math.round(g1+_);if(this.getWidth()==="auto"){this.$().width(this._iWidth);}if(this.getHeight()==="auto"){this.$("wrapper").height(this._iHeight);}if(this._isTwoColumnsLayout()){var j1=this._$innerscroller.width();if(this._iWidth<j1){this._iWidth=j1;}}this.$svg.width(this._iWidth);this.$svg.height(this._iHeight);this.$background.width(this._iWidth);this.$background.height(this._iHeight);if(this._isUseNodeHtml()){this.$divnodes.width(this._iWidth);this.$divnodes.height(this._iHeight);this.$divnodes.css("opacity",1);}this.$divgroups.width(this._iWidth);this.$divgroups.height(this._iHeight);this.$tooltips.width(this._iWidth);this.$tooltips.height(this._iHeight);}.bind(this);var c1=function(f1){f1.forEach(function(g1){g1.forEach(function(h1){h1._afterRendering();});});};var d1=this.getNodes(),e1=this.getLines();M.start(this.getId(),"Rendering of a network graph");if(!this._isUseNodeHtml()){this.$("sizesvg").remove();}$();this._$innerscroller.append(this._renderSvg(this._isUseNodeHtml()?[]:b(d1),b(e1)));this.$svg=this.$("networkGraphSvg");this.$background=this.$("background");b1();if(this._isUseNodeHtml()){d1.forEach(function(f1){var g1=f1.$();if(f1._isInCollapsedGroup()){g1.hide();}g1.css("top",f1.getY());g1.css("left",f1.getX());});}c1([this._isUseNodeHtml()?[]:d1,e1]);M.end(this.getId());};
Y.prototype._renderSvg=function(a,b){var i="",$="sapSuiteUiCommonsNetworkGraphSvg sapSuiteUiCommonsNetworkGraphNoSelect "+(this._fZoomLevel<y?" sapSuiteUiCommonsNetworkGraphZoomedOut ":"");var _=function(a1,b1,$){i+="<g id=\""+this._getDomId(a1)+"\" class=\""+($||"")+"\">";i+=b1?b1:"";i+="</g>";}.bind(this);i+="<svg id=\""+this.getId()+"-networkGraphSvg\"";if(this._bIsRtl){i+="direction="+"\"rtl\"";}i+=" style=\"margin:auto;";if(!this._isUseNodeHtml()){i+="position:relative";}i+="\"";i+=" class=\""+$+"\" preserveAspectRatio=\"none\" ";i+=">";i+="<g id=\""+this.getId()+"-svgbody\">";_("lines",b,"sapSuiteUiCommonsNetworkLines");if(!this._isUseNodeHtml()){_("nodes",a,"sapSuiteUiCommonsNetworkNodes");}i+="</g>";if(this.getBackgroundImage()){i+="<rect class=\"sapSuiteFlickerFreeRect\" x=\"0\" y=\"0\" height=\"100%\" width=\"100%\"></rect>";}i+="</svg>";if(this._isUseNodeHtml()){i+="<div id=\""+this.getId()+"-background\"></div>";}return i;};
Y.prototype._isProperKey=function(a){return a||(a==="0");};
Y.prototype._processData=function(){var i=this._isSwimLane();var a=function(){var a1=0,b1;this.mGroups={};b1=this.getGroups().some(function(c1){var d1=c1.getKey();c1._iNestedLevel=0;if(!this._isProperKey(d1)){this._fireFailure(Y.FAILURE_TYPE.INCONSISTENT_MODEL,"Group without a proper key [index: "+a1+"] found.");return true;}c1._bIsSwimLane=i;c1._resetSize();c1._clearChildren();if(this.mGroups[d1]){this._fireFailure(Y.FAILURE_TYPE.INCONSISTENT_MODEL,"Group with a duplicit key "+d1+" found.");return true;}this.mGroups[d1]=c1;a1++;return false;},this);return b1||this.getGroups().some(function(c1){if(c1.getParentGroupKey()&&!this.mGroups[c1.getParentGroupKey()]){this._fireFailure(Y.FAILURE_TYPE.INCONSISTENT_MODEL,"Group '"+c1.getKey()+"' reffers to a nonexistent parent group '"+c1.getParentGroupKey()+"'.");return true;}return false;},this);}.bind(this);var b=function(){var a1=0;this._mNodes={};return this.getNodes().some(function(b1){if(!this._isProperKey(b1.getKey())){this._fireFailure(Y.FAILURE_TYPE.INCONSISTENT_MODEL,"Node without a proper ID [index: "+a1+"] found.");return true;}var c1=b1.getGroup(),d1;b1._oGroup=null;if(c1){d1=this.mGroups[c1];if(d1){b1._oGroup=d1;d1.aNodes.push(b1);}else{this._fireFailure(Y.FAILURE_TYPE.INCONSISTENT_MODEL,"Node belonging to a nonexistent group with key "+c1+" found.");return true;}}this._isUseNodeHtml()?b1._resetDimensions():b1._setupWidthAndHeight();b1._clearChildren();b1._rendered=false;if(this._mNodes[b1.getKey()]){this._fireFailure(Y.FAILURE_TYPE.INCONSISTENT_MODEL,"Node with a duplicit key "+b1.getKey()+" found.");return true;}this._mNodes[b1.getKey()]=b1;a1++;return false;},this);}.bind(this);var $=function(){return this.getLines().some(function(a1,b1){var c1=this.getNodeByKey(a1.getFrom()),d1=this.getNodeByKey(a1.getTo());if(!c1){this._fireFailure(Y.FAILURE_TYPE.INCONSISTENT_MODEL,"Line going from a nonexistent node with key "+a1.getFrom()+" found.");return true;}if(!d1){this._fireFailure(Y.FAILURE_TYPE.INCONSISTENT_MODEL,"Line going to a nonexistent node with key "+a1.getTo()+" found.");return true;}a1._rendered=false;a1._initialized=false;if(c1&&d1){c1.aChildren.push(d1);c1.aLines.push(a1);d1.aParents.push(c1);d1.aParentLines.push(a1);a1._oFrom=c1;a1._oTo=d1;a1._sKey="line_"+c1.getKey()+"-"+d1.getKey()+"["+b1+"]";}if(c1._oGroup){c1._oGroup.aLines.push(a1);c1._oGroup.aChildren.push(d1);}if(d1._oGroup){d1._oGroup.aParentLines.push(a1);d1._oGroup.aParents.push(c1);}return false;},this);}.bind(this);var _=function(){this.getGroups().forEach(function(a1){var b1=a1.getParentGroupKey();if(b1){var c1=this.mGroups[b1];if(c1){a1._oParentGroup=c1;c1.aChildGroups.push(a1);}}}.bind(this));this.getGroups().forEach(function(a1){var b1=0,c1=a1._oParentGroup,d1=false,e1=a1;while(c1){if(c1.getCollapsed()&&!d1){a1._oCollapsedByParent=c1;d1=true;}e1=c1;c1=c1._oParentGroup;b1++;}a1._iNestedLevel=b1;a1._oTopParentGroup=e1;});}.bind(this);this._bRequiresDataProcessing=false;if(a()||b()||$()){this._bIsInvalid=true;return false;}_();this._oStatuses={};this.getStatuses().forEach(function(a1){var b1=a1.getKey();if(b1){this._oStatuses[b1]=a1;}},this);this._bIsInvalid=false;return true;};
Y.prototype._validateLayout=function(){var b,a,i,$="";b=this.getNodes().some(function(_){if(_._isIgnored()){return false;}$="Missing coordinates: Node("+_.getKey()+")";return!((_._oGroup&&_._oGroup.getCollapsed())||(isFinite(_.getX())&&isFinite(_.getY())));});if(b){this._fireFailure(Y.FAILURE_TYPE.LAYOUT_FAILURE,$);return false;}if(this._isLayered()){a=this.getGroups().some(function(_){if(_._isIgnored()){return false;}$="Missing coordinates: Group("+_.getKey()+")";return!_._isEmpty()&&(!isFinite(_.getX())||!isFinite(_.getY()));});if(a){this._fireFailure(Y.FAILURE_TYPE.LAYOUT_FAILURE,$);return false;}}i=this.getLines().some(function(_){if(_._isIgnored()){return false;}$="Missing coordinates: Line("+_.getKey()+")";return!_._validateLayout();});if(i){this._fireFailure(Y.FAILURE_TYPE.LAYOUT_FAILURE,$);return false;}return true;};
Y.prototype._suggest=function(a){var b=function(i){i.addCustomData(new j({key:E.IsLastKey,value:"true",writeToDom:true}));};var $=function(i){var d1=U.find(i.getCustomData(),function(e1){return e1.getKey()===E.IsLastKey;});if(d1){i.removeCustomData(d1);}};var _=function(i){var d1=U.find(i.getCustomData(),function(e1){return e1.getKey()===E.TypeKey;});return d1&&d1.getValue();};var a1=function(){var d1=this._searchField.getSuggestionItems(),e1,f1,g1;for(var i=0;i<d1.length;i++){e1=d1[i];$(e1);if(i<d1.length-1){f1=_(e1);g1=_(d1[i+1]);if(f1&&g1){if((f1===E.Node&&g1===E.Line)||(f1===E.Line&&g1===E.Group)){b(e1);}}}}}.bind(this);var b1=[],c1=this.fireEvent("searchSuggest",{term:a},true);V=0;if(c1){if(a){b1=[new F([new F("text",function(i){return(i.toLowerCase()||"").indexOf(a.toLowerCase())>-1;}),new F("description",function(i){return(i.toLowerCase()||"").indexOf(a.toLowerCase())>-1;})],false)];}this._searchField.getBinding("suggestionItems").filter(b1);a1();}this._searchField.suggest();};
Y.prototype._getElementSelectFunctionName=function(a){var b="";if(a instanceof N){b="_selectNode";}if(a instanceof L){b="_selectLine";}if(a instanceof G){b="_selectGroup";}return b;};
Y.prototype._search=function(a,b){var i,$,_;$=this.fireEvent("search",{term:a,key:b},true);if(!$){return;}if(a){_=U.find(this.getNodes(),function(_){return b?_.getKey()===b:_.getTitle()===a;});if(!_){_=U.find(this.getLines(),function(a1){if(a1._isLoop()){return false;}return b?a1._getLineId()===b:a1._createSuggestionHelpText()===a;});}if(!_){_=U.find(this.getGroups(),function(a1){return a1.aNodes.length>0&&(b?a1.getKey()===b:a1.getTitle()===a);});}if(_){i=this._getElementSelectFunctionName(_);if(i){this[i]({element:_,scroll:true,alwaysSelect:true});}}}else{this.deselect(false);this.setFocus(null);}};
Y.prototype._createToolbar=function(){var a=this;this._toolbar=new O(this.getId()+"-toolbar",{content:[new h()]}).addStyleClass("sapSuiteUiCommonsNetworkGraphToolbar");this.addDependent(this._toolbar);this._searchField=new g({layoutData:new k({priority:sap.m.OverflowToolbarPriority.NeverOverflow,shrinkable:true}),enableSuggestions:true,suggest:function(b){a._suggest(b.getParameter("suggestValue"));},search:function(b){var i=b.getParameter("query"),$=b.getParameter("suggestionItem"),_;if($){_=$.getProperty("key");}a._search(i,_);}}).addStyleClass("sapSuiteUiCommonsNetworkGraphSearchField");this._toolbar.addContent(this._searchField);this._toolbar.addContent(new r({id:this.getId()+"-legendButton",type:B.Transparent,icon:"sap-icon://legend",tooltip:Q.getText("NETWORK_GRAPH_LEGEND"),press:function(b){if(a.$legend.is(":visible")){a.$legend.hide();}else{a.$legend.show();}}}));if(this.getEnableZoom()){this._zoomLabel=new e({layoutData:new k({group:1,priority:sap.m.OverflowToolbarPriority.Disappear}),text:"100%"});this._zoomIn=new f({layoutData:new k({group:1}),type:B.Transparent,ariaDescribedBy:[this._zoomLabel],text:Q.getText("CHARTCONTAINER_ZOOMIN"),icon:"sap-icon://zoom-in",tooltip:Q.getText("CHARTCONTAINER_ZOOMIN"),press:function(b){a._zoom({deltaY:1});}});this._toolbar.addContent(this._zoomIn);this._toolbar.addContent(this._zoomLabel);this._zoomOut=new f({layoutData:new k({group:1}),type:B.Transparent,ariaDescribedBy:[this._zoomLabel],text:Q.getText("CHARTCONTAINER_ZOOMOUT"),icon:"sap-icon://zoom-out",tooltip:Q.getText("CHARTCONTAINER_ZOOMOUT"),press:function(b){a._zoom({deltaY:-1});}});this._toolbar.addContent(this._zoomOut);}this._toolbar.addContent(new f({type:B.Transparent,icon:"sap-icon://popup-window",tooltip:Q.getText("NETWORK_GRAPH_ZOOMTOFIT"),text:Q.getText("NETWORK_GRAPH_ZOOMTOFIT"),press:this._fitToScreen.bind(this)}));this._oFullScreenButton=new f({type:B.Transparent,text:Q.getText("CALCULATION_BUILDER_ENTER_FULL_SCREEN_BUTTON"),icon:"sap-icon://full-screen",tooltip:Q.getText("CALCULATION_BUILDER_ENTER_FULL_SCREEN_BUTTON"),press:this._toggleFullScreen.bind(this)});this._toolbar.addContent(this._oFullScreenButton);this._oPopup=new P({modal:true,shadow:false,autoClose:false});};
Y.prototype._fitToScreen=function(){var a=this.$scroller.height()/this._iHeight,b=this.$scroller.width()/this._iWidth,$=Math.min(a,b),_=Z.slice(-1);for(var i=1;i<Z.length;i++){if($<Z[i]){_=Z[i-1];break;}}this._zoom({zoomLevel:_});};
Y.prototype._getZoomText=function(){return Math.floor((this._fZoomLevel*100))+"%";};
Y.prototype._toggleFullScreen=function(){var a=function(){this._oFullScreenContainer={};this._oFullScreenContainer.$content=this.$();if(this._oFullScreenContainer.$content){this.$().addClass("sapSuiteUiCommonsNetworkGraphFullScreen");this._oFullScreenContainer.$tempNode=q("<div></div>");this._oFullScreenContainer.$content.before(this._oFullScreenContainer.$tempNode);this._oFullScreenContainer.$overlay=q("<div id='"+u()+"'></div>");this._oFullScreenContainer.$overlay.addClass("sapSuiteUiCommonsNetworkGraphContainerOverlay");this._oFullScreenContainer.$overlay.append(this._oFullScreenContainer.$content);this._oPopup.setContent(this._oFullScreenContainer.$overlay);}this._oPopup.open(200,P.Dock.BeginTop,P.Dock.BeginTop,q("body"));}.bind(this);var b=function(){this.$().removeClass("sapSuiteUiCommonsNetworkGraphFullScreen");this._oFullScreenContainer.$tempNode.replaceWith(this._oFullScreenContainer.$content);this._oPopup.close();this._oFullScreenContainer.$overlay.remove();}.bind(this);var i=function($,_){this._oFullScreenButton.setIcon($);this._oFullScreenButton.setText(_);this._oFullScreenButton.setTooltip(_);}.bind(this);if(this._bIsFullScreen){i("sap-icon://full-screen",Q.getText("CALCULATION_BUILDER_ENTER_FULL_SCREEN_BUTTON"));b();}else{i("sap-icon://exit-full-screen",Q.getText("CALCULATION_BUILDER_EXIT_FULL_SCREEN_BUTTON"));a();}this._bIsFullScreen=!this._bIsFullScreen;};
Y.prototype._setupKeyboardNavigation=function(){var $=[],_=[[]],a1,b1;if(!this._isLayedOut()){return;}this.getNodes().forEach(function(a){if(a.isHidden()||a._isIgnored()||!a.getVisible()){return;}$.push({item:a,x:a.getX(),y:a.getY()});});this.getLines().forEach(function(a){if(a.isHidden()||a._isIgnored()||!a.getVisible()||a.getCoordinates().length<2){return;}var b=a.getCoordinates()[0],i=b.getX(),iY=b.getY();a.getCoordinates().forEach(function(b){if(i>b.getX()){i=b.getX();}if(iY>b.getY()){iY=b.getY();}});$.push({item:a,x:i,y:iY});});this.getGroups().forEach(function(a){if(a.isHidden()||a._isEmpty()||!a.getVisible()){return;}$.push({item:a,x:a.getX(),y:a.getY()});});$.sort(function(a,b){if(a.y<b.y){return-1;}else if(a.y>b.y){return 1;}else if(a.x<b.x){return-1;}else if(a.x>b.x){return 1;}else{return 0;}});if($.length>0){b1=[$[0]];_=[b1];a1=$[0];$.forEach(function(a,i){if(i===0){return;}if(a.y===a1.y){b1.push(a);}else{b1=[a];_.push(b1);}a1=a;});}_=this._normalizeGrid(_,$);if(!this._oKeyboardNavigator){this._oKeyboardNavigator=new K(this);this.addDelegate(this._oKeyboardNavigator);}this._oKeyboardNavigator.setItems(_);this._oKeyboardNavigator.setWrapperDom(this.getFocusDomRef());};
Y.prototype._normalizeGrid=function(a,b){if(b.length===0){return a;}var $=b[0],_=$.x,a1=$.x,b1=1,c1,d1,e1=[],i;b.forEach(function(f1){if(f1.x<_){_=f1.x;}if(f1.x>a1){a1=f1.x;}});a.forEach(function(f1){if(f1.length>b1){b1=f1.length;}});c1=Math.abs(a1-_)/b1;d1=_;for(i=0;i<b1;i++){d1+=c1;e1.push(d1);}return a.map(function(f1){var g1,h1;if(f1.length===b1){g1=f1;}else{g1=[];h1=0;while(h1<(b1-f1.length)&&e1[h1]<f1[0].x){h1++;g1.push(null);}f1.forEach(function(i1){g1.push(i1);h1++;});while(h1<b1){g1.push(null);h1++;}}return g1.map(function(i1){return i1?i1.item:null;});});};
Y.prototype.getFocusDomRef=function(){return this.getDomRef("wrapper");};
Y.prototype._setupEvents=function(){var a=5;var i=0,b={},$=this.$("ctrlalert"),_=this.$scroller;var a1=function(o1,o2){return Math.sqrt(Math.pow(o1.clientX-o2.clientX,2)+Math.pow(o1.clientY-o2.clientY,2));};var b1=function(e1){if(e1.touches&&e1.touches.length===2){b={t1:e1.touches[0],t2:e1.touches[1],diff:a1(e1.touches[0],e1.touches[1])};}};var c1=function(e1){if(e1.touches&&e1.touches.length===2){if(++i===a){var f1=e1.touches[0],g1=e1.touches[1],h1=a1(f1,g1);this._zoom({point:{x:(f1.clientX+g1.clientX)/2,y:(f1.clientY+g1.clientY)/2},deltaY:h1-b.diff});i=0;b={t1:f1,t2:g1,diff:h1};}}}.bind(this);_.mousemove(function(e1){this._mouseMove(e1.clientX,e1.clientY);}.bind(this));var d1=this._isSwimLane()?this.$svg:this.$divgroups;d1.mousedown(function(e1){this._mouseDown(e1.clientX,e1.clientY);e1.preventDefault();}.bind(this));_.mouseleave(this._endDragging.bind(this));_.mouseup(this._mouseUp.bind(this));if(this.getEnableZoom()){_.bind("wheel",function(e1){if(this._wheel({x:e1.originalEvent.clientX,y:e1.originalEvent.clientY,deltaY:e1.originalEvent.deltaY,div:$,ctrl:e1.ctrlKey})){e1.preventDefault();}}.bind(this));}_.bind("touchstart",function(e1){b1(e1);});_.bind("touchmove",function(e1){c1(e1);});};
Y.prototype._wheel=function(a){if(this.getEnableWheelZoom()||a.ctrl){a.div.css("opacity","0");this._zoom({point:{x:a.x,y:a.y},deltaY:-a.deltaY});this._zoomLabel.setText(this._getZoomText());return true;}};
Y.prototype._endDragging=function(){this._oPanning.dragging=false;this.$scroller.removeClass("sapSuiteUiCommonsNetworkGraphPanning");};
Y.prototype._mouseMove=function(i,a){var b=this.$scroller[0];if(this._oPanning.dragging){if(!this.$scroller.hasClass("sapSuiteUiCommonsNetworkGraphPanning")){this.$scroller.addClass("sapSuiteUiCommonsNetworkGraphPanning");}b.scrollTop=b.scrollTop-(a-this._oPanning.lastY);b.scrollLeft=b.scrollLeft-(i-this._oPanning.lastX);this._oPanning.lastX=i;this._oPanning.lastY=a;}};
Y.prototype._mouseDown=function(i,a){this.deselect(false);this.setFocus(null);this._oPanning.lastX=i;this._oPanning.lastY=a;this._oPanning.dragging=true;this._tooltip.instantClose();};
Y.prototype._mouseUp=function(){this._endDragging();};
Y.prototype._preventZoomToChangeLineWidth=function(){return this._isLayered()&&(this._fZoomLevel>=0.5&&this._fZoomLevel<2);};
Y.prototype._setLineClasses=function(){var $=this.$(),a=this._preventZoomToChangeLineWidth()?"addClass":"removeClass",b=(this._fZoomLevel<0.5)?"removeClass":"addClass";$[a]("sapSuiteUiCommonsNetworkGraphDefaultLineWidth");$[b]("sapSuiteUiCommonsNetworkGraphCrispEdges");};
Y.prototype._zoom=function(a){var b=this.$svg[0].getAttribute("viewBox"),i=a.deltaY<0?-1:1,$,_,a1,b1;var c1=function(d1){var e1=0,f1;Z.forEach(function(g1,h1){var i1=Math.abs(d1-g1);if(i1<f1||f1===undefined){e1=h1;f1=i1;}});return e1;};if(!a.point){a.point={x:this.$scroller.width()/2,y:this.$scroller.height()/2};}$=this.getCorrectMousePosition({x:a.point.x,y:a.point.y});if(a.zoomLevel||a.zoomLevel===0){this._fZoomLevel=a.zoomLevel;}else{a1=c1(this._fZoomLevel);if(Z.indexOf(this._fZoomLevel)<0){if(this._fZoomLevel>Z[a1]){a1=i<0?a1:a1+i;}else{a1=i>0?a1:a1+i;}}else{a1+=i;}if(a1<0){a1=0;}else if(a1>Z.length-1){a1=Z.length-1;}this._fZoomLevel=Z[a1];}if(this._fZoomLevel<0){this._fZoomLevel=0;}if(!b){b1="0 0 "+Math.round(this.$svg.width())+" "+Math.round(this.$svg.height());this.$svg[0].setAttribute("viewBox",b1);}this.$svg.width(Math.round(this._iWidth*this._fZoomLevel));this.$svg.height(Math.round(this._iHeight*this._fZoomLevel));this.$background.width(Math.round(this._iWidth*this._fZoomLevel));this.$background.height(Math.round(this._iHeight*this._fZoomLevel));_=this.getCorrectMousePosition({x:a.point.x,y:a.point.y});this.$scroller[0].scrollLeft+=($.x-_.x)*this._fZoomLevel;this.$scroller[0].scrollTop+=($.y-_.y)*this._fZoomLevel;this._zoomLabel.setText(this._getZoomText());if(this._fZoomLevel<y){this.$svg.addClass("sapSuiteUiCommonsNetworkGraphZoomedOut");}else{this.$svg.removeClass("sapSuiteUiCommonsNetworkGraphZoomedOut");}if(this._isUseNodeHtml()){this.$("divnodes").css("transform","scale("+this._fZoomLevel+")");}this.$("divgroups").css("transform","scale("+this._fZoomLevel+")");this.$tooltips.css("transform","scale("+this._fZoomLevel+")");this._setLineClasses();this.fireEvent("zoomChanged");};
Y.prototype._createSearchSuggestItems=function(){var a=50;var b={items:[]},i=this.getNodes().sort(function(a1,b1){return a1.getTitle().localeCompare(b1.getTitle());}),$=this.getLines().sort(function(a1,b1){var c1=a1.getTitle(),d1=b1.getTitle();if(c1===d1){return a1.getFromNode().getTitle().localeCompare(b1.getFromNode().getTitle());}return c1.localeCompare(d1);}),_=this.getGroups().sort(function(a1,b1){return a1.getTitle().localeCompare(b1.getTitle());});this._oSuggestionItemsModel=new J();this._oSuggestionItemsModel.setSizeLimit(z);i.forEach(function(a1){var b1=U.trimText(a1.getTitle(),a);b.items.push({text:b1?b1:a1.getKey(),type:E.Node,icon:a1.getIcon(),key:a1.getKey(),description:"("+Q.getText("NETWORK_GRAPH_NODE")+")"});});$.forEach(function(a1){if(a1._isLoop()){return;}if(a1.getTitle()||a1.getFromNode().getTitle()||a1.getToNode().getTitle()){b.items.push({text:a1._createSuggestionHelpText(),type:E.Line,key:a1._getLineId(),description:"("+Q.getText("NETWORK_GRAPH_LINE")+")"});}});_.forEach(function(a1){var b1=U.trimText(a1.getTitle(),a);if(a1.aNodes.length>0){b.items.push({text:b1?b1:a1.getKey(),key:a1.getKey(),type:E.Group,description:"("+Q.getText("NETWORK_GRAPH_GROUP")+")"});}});this._oSuggestionItemsModel.setData(b);this._searchField.setModel(this._oSuggestionItemsModel);this._searchField.bindAggregation("suggestionItems",{path:"/items",template:new X({text:"{text}",icon:"{icon}",key:"{key}",description:"{description}",customData:new j({key:"type",value:"{type}"})})});};
Y.prototype._scrollToElement=function(i){var b=i._oGroup&&i._oGroup.getCollapsed(),a,$,_,a1,b1,c1;if(b){i=i._oGroup;}if(i instanceof L){b1=i.getSource();c1=i.getTarget();_=Math.abs(c1.getX()-b1.getX());a1=Math.abs(c1.getY()-b1.getY());a=Math.min(b1.getX(),c1.getX());$=Math.max(b1.getY(),c1.getY());}else{a=i.getX();$=i.getY();_=i._iWidth;a1=i._iHeight;}this.$scroller.get(0).scrollLeft=((a+(_?_:0)/2)*this._fZoomLevel)-(this.$scroller.width()/2);this.$scroller.get(0).scrollTop=(($+(a1?a1:0)/2)*this._fZoomLevel)-(this.$scroller.height()/2);};
Y.prototype._ensureOnScreen=function(i){if(!i||!this.$scroller){return;}var a,b,$,_=this.$scroller[0],a1=_.scrollLeft/this._fZoomLevel,b1=_.scrollTop/this._fZoomLevel,c1=a1+this.$scroller.width()/this._fZoomLevel,d1=b1+this.$scroller.height()/this._fZoomLevel;if(!i._isOnScreen(a1,c1,b1,d1)){if(i instanceof N){b=i.getX()+i._iWidth/2;$=i.getY()+i._iHeight/2;}else if(i instanceof L){a=i._getArrowFragmentVector();b=(a.center.x+a.apex.x)/2;$=(a.center.y+a.apex.y)/2;}else if(i instanceof G){b=i.getX();$=i.getY();}if(b<a1||b>c1){_.scrollLeft=b*this._fZoomLevel-this.$scroller.width()/2;}if($<b1||$>d1){_.scrollTop=$*this._fZoomLevel-this.$scroller.height()/2;}}};
Y.prototype._createLegend=function(){var $=this.$("legend"),i="",_=this,a1={},b1={},c1={};var d1=function(a,b){var h1=o(a.getStatus());if(h1){if(b[h1]){b[h1].push(a);}else{b[h1]=[a];}}};var e1=function(a){return Object.keys(a).length>0;};var f1=function(a,b,h1){var i1=this._oStatuses[a],j1=i1&&i1._getLegendColor(),k1=j1?"background-color:"+j1:"";i+=this._renderControl("div",{status:a,elementtype:h1,"class":"sapSuiteUiCommonsNetworkGraphLegendLine"},false);i+=this._renderControl("div",{"class":"sapSuiteUiCommonsNetworkGraphLegendColorLine "+this._getStatusClass(a),"style":k1});i+=this._renderControl("label",{"class":"sapSuiteUiCommonsNetworkGraphLegendLineLabel"},false);i+=o(this._oLegendLabels[h1+a]?this._oLegendLabels[h1+a]:b);i+="</label>";i+="</div>";}.bind(this);var g1=function(h1,i1,j1,k1,l1){h1.forEach(function(a){d1(a,i1);});if(e1(i1)){i+="<div class=\""+j1+"\"><label class=\"sapSuiteUiCommonsNetworkGraphLegendTitle\">"+o(Q.getText(k1))+"</label></div>";var m1=Object.keys(i1).reduce(function(a,b){var n1;if(this._oLegendLabels[l1+b]){n1=this._oLegendLabels[l1+b];}else{var o1=this._oStatuses[b];n1=o1?(o1.getTitle()||b):Q.getText("NETWORK_GRAPH_"+b.toUpperCase());}a[b]=n1;return a;}.bind(this),{});Object.keys(i1).sort(function(a,b){return(m1[a]||"").localeCompare(m1[b]);}).forEach(function(a){f1(a,m1[a],l1);});}}.bind(this);if(this.getLegend()){return;}if(!$[0]){return;}g1(this.getNodes(),a1,"sapSuiteUiCommonsNetworkGraphLegendTitleNode","NETWORK_GRAPH_NODES",I.Node);g1(this.getLines(),b1,"sapSuiteUiCommonsNetworkGraphLegendTitleLine","NETWORK_GRAPH_LINES",I.Line);g1(this.getGroups(),c1,"sapSuiteUiCommonsNetworkGraphLegendTitleLine","NETWORK_GRAPH_GROUPS",I.Group);$.html(i);if(sap.ui.getCore().byId(this.getId()+"-legendButton").getPressed()){this.getDomRef("legend").style.display="block";}this.$().find(".sapSuiteUiCommonsNetworkGraphLegendLine").click(function(a){var b=q(this).attr("status"),h1=q(this).attr("elementtype"),i1;if(h1===I.Node){i1=a1;}if(h1===I.Line){i1=b1;}if(!a.ctrlKey){_.deselect(false);_.setFocus(null);}if(h1!==I.Group&&i1[b]){i1[b].forEach(function(j1){j1.setSelected(true);});}});};
Y.prototype._selectElement=function(a){var i=a.element&&!a.element.getSelected(),b=[];var $=function(_){a.element.setSelected(_);if(a.setFocus!==false){this.setFocus({item:a.element});}}.bind(this);this.$("svg").find("."+this.VISIBLE_ACTIONS_BUTTONS_CLASS).removeClass(this.VISIBLE_ACTIONS_BUTTONS_CLASS);if(!a.preventDeselect){b=this.deselect(true);if(a.setFocus){this.setFocus(null);}if(i||a.alwaysSelect){$(true);}}else{$(i);}if(!a.element._hasFocus()&&a.forceFocus){this.setFocus({item:a.element});}if(!b.some(function(_){return _===a.element;})){b.push(a.element);}this.fireSelectionChange({items:b});};
Y.prototype._selectLine=function(a){var b=a.element.getFromNode(),i=a.element.getToNode(),$=(b._isInCollapsedGroup()&&(b._oGroup===i._oGroup))?i._oGroup:null;if(a.scroll){this._scrollToElement($||a.element);}if(!$){this._selectElement(a);}};
Y.prototype._selectNode=function(a){var b=a.element._isInCollapsedGroup()?a.element._oGroup:null;if(a.scroll){this._scrollToElement(b||a.element);}if(!b){this._selectElement(a);if(a.renderActionButtons!==false){a.element.showActionButtons(true);}}};
Y.prototype._selectGroup=function(a){if(a.scroll){this._scrollToElement(a.element);}this.setFocus({item:a.element});};
Y.prototype._applyLayout=function(){var a;this._iRunningLayouts++;a=this._getLayoutAlgorithm().layout().catch(function(b){this._fireFailure(Y.FAILURE_TYPE.LAYOUT_FAILURE,b);return Promise.reject();}.bind(this)).then(function(){return new Promise(function(b,i){if(a.isTerminated()){b();return;}if(this._validateLayout()){b();}else{i();}}.bind(this));}.bind(this));if(this._oLastLayout&&this._iRunningLayouts>1){this._oLastLayout.terminate();}this._oLastLayout=a;return a;};
Y.prototype._setAccessibilityTitle=function(i){var a,b=this.$("accessibility");if(i===null){a=Q.getText("NETWORK_GRAPH_ACCESSIBILITY_CONTENT");}else if(typeof i==="string"){a=i;}else{a=i._getAccessibilityLabel();}if(b){b.html(o(a));}};
Y.prototype._isTopBottom=function(){return this.getOrientation()===t.TopBottom||this.getOrientation()===t.BottomTop;};
Y.prototype._getLayoutAlgorithm=function(){return this.getLayoutAlgorithm()||this._getDefalutLayout();};
Y.prototype._isUseNodeHtml=function(){return this.getRenderType()===R.Html;};
Y.prototype._getDefalutLayout=function(){if(!this._oDefalutLayout){this._oDefaultLayout=new c();this._oDefaultLayout.setParent(this,null,true);}return this._oDefaultLayout;};
Y.prototype._isLayered=function(){var a=this._getLayoutAlgorithm().getLayoutRenderType();return a===v.SwimLanes||a===v.LayeredWithGroups||a===v.TwoColumns;};
Y.prototype._isSwimLane=function(){return this._getLayoutAlgorithm().getLayoutRenderType()===v.SwimLanes;};
Y.prototype._isTwoColumnsLayout=function(){return this._getLayoutAlgorithm().getLayoutRenderType()===v.TwoColumns;};
Y.prototype._isDelayedLayouting=function(){if(this._isUseNodeHtml()){return true;}return this.getNodes().some(function(a){var b=a.hasListeners("computeSizes");return b||a._useAutomaticSize()||a.getTitleLineSize()!==1||a._displayDescription();});};
Y.prototype._isLayedOut=function(){return this._bIsLayedOut;};
Y.prototype.setEnableZoom=function(b){if(this._toolbar){this._zoomLabel.setVisible(b);this._zoomIn.setVisible(b);this._zoomOut.setVisible(b);}this.setProperty("enableZoom",b);return this;};
Y.prototype.destroyAggregation=function(a,b){this._bRequiresDataProcessing=true;C.prototype.destroyAggregation.call(this,a,b);};
Y.prototype.insertAggregation=function(a,b,i,$){this._bRequiresDataProcessing=true;C.prototype.insertAggregation.call(this,a,b,i,$);};
Y.prototype.removeAggregation=function(a,b,i){this._bRequiresDataProcessing=true;C.prototype.removeAggregation.call(this,a,b,i);};
Y.prototype.addAggregation=function(a,b,i){this._bRequiresDataProcessing=true;C.prototype.addAggregation.call(this,a,b,i);};
Y.prototype.removeAllAggregation=function(a,b){this._bRequiresDataProcessing=true;C.prototype.removeAllAggregation.call(this,a,b);};
Y.prototype.updateAggregation=function(a){this._bNeedNodeProcessing=true;C.prototype.updateAggregation.call(this,a);};
Y.prototype.invalidate=function(){if(this._bPreventInvalidation!==true){C.prototype.invalidate.call(this);}};
return Y;});
sap.ui.predefine('sap/suite/ui/commons/networkgraph/GraphMap',["sap/ui/thirdparty/jquery","./SvgBase","sap/ui/core/ResizeHandler","./GraphMapRenderer"],function(q,S,R,G){"use strict";var N=4;var r=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");
var a=S.extend("sap.suite.ui.commons.networkgraph.GraphMap",{metadata:{library:"sap.suite.ui.commons",properties:{height:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:""},width:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:""},directRenderNodeLimit:{type:"int",group:"Behavior",defaultValue:250},title:{type:"string",group:"Misc",defaultValue:""}},associations:{graph:{type:"sap.suite.ui.commons.networkgraph.Graph",multiple:false,singularName:"graph"}},events:{mapReady:{}}}});
a.prototype.init=function(){this._oResizeListener=null;this.setBusyIndicatorDelay(0);};
a.prototype.onAfterRendering=function(){var g=this.getGraph();if(g&&g._bIsLayedOut){this._renderMap();}else{this.setBusy(true);}};
a.prototype._renderMap=function(){var g=this.getGraph();if(!g){return;}var v,i,b,s,$,c,d,t=this,z=g._fZoomLevel,I=g.getNodes().length===0,u=g._isUseNodeHtml();var f=function(j){var k="";j.forEach(function(o){k+=o._render({mapRender:true,idSufix:t.getId()});});return k;};var C=function(n,w){var o=sap.ui.getCore().createRenderManager();n.forEach(function(j){j._render({mapRender:true,renderManager:o,idSufix:t.getId()});});o.flush(w);o.destroy();};var e=function(){var o=sap.ui.getCore().createRenderManager();g.getGroups().forEach(function(j){j._render({mapRender:true,renderManager:o,idSufix:t.getId()});});o.flush(this.getDomRef("divgroups"));o.destroy();}.bind(this);var h=function(j){s+=this._renderControl("rect",{x:N/2,y:N/2,width:Math.min((g.$scroller.width()-N/2)/z,(g.$svg.width()-N/2)/z),height:Math.min((g.$scroller.height()-N/2)/z,(g.$svg.height()-N/2)/z),"class":j,id:this._getDomId("mapNavigator")});}.bind(this);if(!g._iWidth||!g._iHeight||I){if(g._bIsInvalid||I){this.setBusy(false);this.$().find(".sapSuiteUiCommonsNetworkGraphMapContent").html("");this.fireMapReady();}return;}v=g.$("networkGraphSvg").attr("viewBox");if(!v){v="0 0 "+g._iWidth+" "+g._iHeight;}s="<svg class=\"sapSuiteUiCommonsNetworkGraphMapSvg\" width=\"100%\" height=\"100%\" aria-hidden=\"true\" viewBox=\""+v+"\" "+"id=\""+this._getDomId("svg")+"\"";if(g._bIsRtl){s+=" direction =\"rtl\"";}s+=" >";if(this._useGraphClone()){s+=this._renderControl("use",{"xlink:href":"#"+g._getDomId("svgbody")});}else{s+=f(g.getLines());if(!u){s+=f(g.getNodes());}}s+=this._renderControl("rect",{x:0,y:0,width:g._iWidth,height:g._iHeight,"class":"sapSuiteUiCommonsNetworkGraphMapBoundary","pointer-events":"fill"});if(!u){h("sapSuiteUiCommonsNetworkGraphMapNavigator");}s+="</svg>";s+="<div id=\""+this._getDomId("divgroups")+"\" class=\"sapSuiteUiCommonsNetworkGraphMapDivGroups\"";if(sap.ui.getCore().getConfiguration().getRTL()){s+="style=\"left:0\"";}s+="></div>";if(u){s+="<div id=\""+this._getDomId("divnodes")+"\" class=\"sapSuiteUiCommonsNetworkGraphMapDivNodes\"";if(sap.ui.getCore().getConfiguration().getRTL()){s+="style=\"left:0\"";}s+=">";s+="</div>";s+="<svg class=\"sapSuiteUiCommonsNetworkGraphSvgNavigator\" width=\"100%\" height=\"100%\" viewBox=\""+v+"\">";h("sapSuiteUiCommonsNetworkGraphMapNavigator");s+="</svg>";}this.$().find(".sapSuiteUiCommonsNetworkGraphMapContent").html(s);e();if(u){var D=this.getDomRef("divnodes");C(g.getNodes(),D);}$=this.$("svg");i=g._iWidth;b=g._iHeight;c=Math.max(i/$.width(),b/$.height());this._setHtmlNodesPosition(c);d=Math.ceil(c/5);this._iStrokeWidth=d;this._correctLineWidth();this.$("svg").find("circle").css("stroke-width",d);this._setupEvents();this._correctPosition();this.setBusy(false);this.fireMapReady();};
a.prototype._setHtmlNodesPosition=function(i){var g=this.getGraph(),$=this.$("svg"),c=1/i,t,T;t=Math.floor(($.width()/2)-((g._iWidth/2)*c));T=Math.floor(($.height()/2)-((g._iHeight/2)*c));this.$("divgroups").css("transform","matrix("+c+", 0, 0, "+c+", "+t+", "+T+")");if(g._isUseNodeHtml){this.$("divnodes").css("transform","matrix("+c+", 0, 0, "+c+", "+t+", "+T+")");}};
a.prototype._useGraphClone=function(){var l=this.getDirectRenderNodeLimit(),g=this.getGraph();if(g){return l>g.getNodes().length&&!g._isUseNodeHtml();}return false;};
a.prototype._correctLineWidth=function(g){var g=this.getGraph(),c=this._isMSBrowser()||(!this._useGraphClone()||g._preventZoomToChangeLineWidth());this.$("svg").css("stroke-width",c?this._iStrokeWidth:"1");};
a.prototype._correctMapNavigator=function(){var $=this.$("mapNavigator"),w=parseFloat($.attr("width")),h=parseFloat($.attr("height")),x=parseFloat($.attr("x")),y=parseFloat($.attr("y")),g=this.getGraph(),i=g._iWidth,b=g._iHeight;if(w+x>i){$.attr("width",i-x);}if(h+y>b){$.attr("height",b-y);}};
a.prototype._resize=function(){var g=this.getGraph(),$=g.$scroller,b=this.$("mapNavigator");b.attr("x",Math.max(N/2,$[0].scrollLeft/g._fZoomLevel));b.attr("y",Math.max(N/2,$[0].scrollTop/g._fZoomLevel));b.attr("width",$.width()/g._fZoomLevel);b.attr("height",$.height()/g._fZoomLevel);this._correctLineWidth();this._correctMapNavigator();};
a.prototype._resizeHandler=function(){this._resize();var g=this.getGraph();if(g._isUseNodeHtml()){var $=this.$("svg"),b=this.getGraph().$svg;if(b){var i=Math.max(b.width()/$.width(),b.height()/$.height())*(1/g._fZoomLevel);this._setHtmlNodesPosition(i);}}};
a.prototype._correctPosition=function(){var g=this.getGraph(),$=g&&g.$scroller,b=this.$("mapNavigator");if(g&&$[0]){b.attr("x",Math.max(N/2,$[0].scrollLeft/g._fZoomLevel));b.attr("y",Math.max(N/2,$[0].scrollTop/g._fZoomLevel));this._correctMapNavigator();}};
a.prototype._setupEvents=function(){var d=false,g=this.getGraph(),$=this.$("svg"),b=g.$scroller;var s=function(o){var c=g.$svg,i=Math.max(c.width()/$.width(),c.height()/$.height()),f=$.find(".sapSuiteUiCommonsNetworkGraphMapBoundary"),h=b[0],j=f.offset().left,k=f.offset().top;h.scrollLeft=(o.pageX-j)*i-(b.width()/2);h.scrollTop=(o.pageY-k)*i-(b.height()/2);};var e=function(){$.removeClass("sapSuiteUiCommonsNetworkGraphPanning");d=false;};b.scroll(function(){this._correctPosition();}.bind(this));$.off();$.mousedown(function(E){d=true;s(E);E.preventDefault();});$.mousemove(function(E){if(d){if(!$.hasClass("sapSuiteUiCommonsNetworkGraphPanning")){$.addClass("sapSuiteUiCommonsNetworkGraphPanning");}s(E);}});$.mouseleave(function(E){e();});$.mouseup(function(E){e();});};
a.prototype._onBeforeDataProcess=function(){if(this.getDomRef("svg")){this.$("svg").html("");this.setBusy(true);}};
a.prototype._onGraphReady=function(){setTimeout(this._renderMap.bind(this),0);if(this._oResizeListener){R.deregister(this._oResizeListener);}this._oResizeListener=R.register(this.getGraph().$("wrapper")[0],q.proxy(this._resizeHandler,this));};
a.prototype._removeListeners=function(){var g=this.getGraph();if(g){g.detachBeforeLayouting(this._onBeforeDataProcess,this);g.detachGraphReady(this._onGraphReady,this);g.detachZoomChanged(this._resize,this);}};
a.prototype.destroy=function(){this._removeListeners();S.prototype.destroy.apply(this,arguments);};
a.prototype.exit=function(){if(this._oResizeListener){R.deregister(this._oResizeListener);this._oResizeListener=null;}};
a.prototype.getTitle=function(){var t=this.getProperty("title");return t?t:r.getText("NETWORK_GRAPH_MAP_TITLE");};
a.prototype.getGraph=function(){var i=this.getAssociation("graph");return i?sap.ui.getCore().byId(i):null||null;};
a.prototype.setGraph=function(g){this._removeListeners();this.setAssociation("graph",g);var o=this.getGraph();if(o){o.attachBeforeLayouting(this._onBeforeDataProcess,this);o.attachGraphReady(this._onGraphReady,this);o.attachZoomChanged(this._resize,this);if(o._isLayedOut()){this._onGraphReady();}}return this;};
return a;});
sap.ui.predefine('sap/suite/ui/commons/networkgraph/GraphMapRenderer',['sap/ui/core/Renderer','sap/ui/Device'],function(R,D){"use strict";return{_appendHeightAndWidth:function(n,r){r.style("height",n.getHeight());r.style("width",n.getWidth());},apiVersion:2,render:function(r,n){r.openStart("div",n);r.class("sapSuiteUiCommonsNetworkGraphMap");this._appendHeightAndWidth(n,r);r.openEnd();r.openStart("div");r.class("sapSuiteUiCommonsNetworkGraphMapTitle");r.openEnd();r.openStart("span");r.class("sapSuiteUiCommonsNetworkGraphMapTitleText");r.openEnd();r.text(n.getTitle());r.close("span");r.close("div");r.openStart("div");r.class("sapSuiteUiCommonsNetworkGraphMapContent");if(D.browser.msie){if(n.getHeight()){r.style("flex-direction","row-reverse");r.style("height","100%");}else{r.style("flex-direction","row-reverse");}}else{if(n.getHeight()){r.style("height","100%");}}r.openEnd();r.close("div");r.close("div");}};},true);
sap.ui.predefine('sap/suite/ui/commons/networkgraph/GraphRenderer',["sap/suite/ui/commons/library","sap/base/security/encodeXML"],function(l,e){"use strict";var r=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var B=l.networkgraph.BackgroundColor;return{_appendHeightAndWidth:function(n,R){R.style("height",n.getHeight());R.style("width",n.getWidth());},apiVersion:2,render:function(R,n){var L=n._isLayered()?"sapSuiteUiCommonsNetworkGraphLayered":"sapSuiteUiCommonsNetworkGraphNotLayered",s=n._isSwimLane()?"sapSuiteUiCommonsNetworkGraphSwimLane":"";R.openStart("div",n);R.class("sapSuiteUiCommonsNetworkGraph");R.class(s);R.class(L);R.attr("tabindex","0");this._appendHeightAndWidth(n,R);this._writeAriaTags(R,n);R.openEnd();R.renderControl(n._toolbar);R.openStart("div",n.getId()+"-wrapper");R.class("sapSuiteUiCommonsNetworkGraphContentWrapper");R.attr("tabindex","0");R.attr("aria-live","assertive");R.attr("aria-label",r.getText("NETWORK_GRAPH_ACCESSIBILITY_LABEL"));R.attr("role","application");R.openEnd();R.openStart("div",n.getId()+"-accessibility");R.class("sapSuiteUiCommonsNetworkGraphContentWrapperAccessibility");R.openEnd();R.text(r.getText("NETWORK_GRAPH_ACCESSIBILITY_CONTENT"));R.close("div");R.openStart("div",n.getId()+"-scroller");R.class("sapSuiteUiCommonsNetworkGraphScroller");if(n.getBackgroundColor()===B.White){R.class("sapSuiteUiCommonsNetworkGraphBackgroundWhite");}else{R.class("sapSuiteUiCommonsNetworkGraphBackgroundDefault");}R.openEnd();if(n.getNoData()){this._renderNoData(R,n);R.close("div");R.close("div");R.close("div");return;}R.openStart("div",n.getId()+"-innerscroller");R.class("sapSuiteUiCommonsNetworkGraphInnerScroller");if(n._isTwoColumnsLayout()){R.style("width","100%");}R.openEnd();R.openStart("div",n.getId()+"-tooltiplayer");R.class("sapSuiteUiCommonsNetworkGraphTooltips");R.openEnd();R.openStart("div",n.getId()+"-divlinebuttons");R.style("display","none");R.class("sapSuiteUiCommonsNetworkGraphLineButtons");R.openEnd();R.openStart("div",n.getId()+"-linetooltip");R.class("sapSuiteUiCommonsNetworkGraphLineTooltip");R.openEnd();R.close("div");R.openStart("div",n.getId()+"-linetooltipbuttons");R.class("sapSuiteUiCommonsNetworkGraphLineActionButtons");R.openEnd();R.close("div");R.close("div");R.close("div");R.openStart("div",n.getId()+"-divgroups");R.class("sapSuiteUiCommonsNetworkGraphDivGroups");R.attr("aria-hidden","true");R.openEnd();R.close("div");if(n._isUseNodeHtml()){R.openStart("div",n.getId()+"-divnodes");R.class("sapSuiteUiCommonsNetworkGraphDivNodes");R.style("opacity","0");R.attr("aria-hidden","true");R.openEnd();R.close("div");}R.close("div");R.close("div");R.openStart("div",n.getId()+"-ctrlalert");R.class("sapSuiteUiCommonsNetworkAlertWrapper");R.openEnd();R.openStart("p");R.class("sapSuiteUiCommonsNetworkAlertText");R.openEnd();R.text(r.getText("NETWORK_GRAPH_ZOOMCTRL"));R.close("p");R.close("div");R.openStart("div",n.getId()+"-legend");R.style("display","none");R.class("sapSuiteUiCommonsNetworkGraphLegend");R.attr("tabindex","0");R.openEnd();if(n.getLegend()){R.renderControl(n.getLegend());}R.close("div");R.close("div");R.close("div");},_writeAriaTags:function(R,n){var a=n.getAriaLabelledBy(),A=n.getAriaDescribedBy();R.attr("role","graphics-document");if(a.length>0){R.attr("aria-labelledby",a.join(" "));}else{R.attr("aria-label",r.getText("NETWORK_GRAPH_ACCESSIBILITY_LABEL"));}if(A.length>0){R.attr("aria-describedby",A.join(" "));}},_renderNoData:function(R,n){R.openStart("div");R.class("sapSuiteUiCommonsNetworkGraphNoDataWrapper");R.openEnd();R.unsafeHtml(n._renderHtmlIcon("sap-icon://document","sapSuiteUiCommonsNetworkGraphNoDataIcon"));var t=n.getNoDataText(),T=t?t:r.getText("NETWORK_GRAPH_NO_DATA");R.openStart("div");R.class("sapSuiteUiCommonsNetworkGraphNoDataLabel");R.openEnd();R.text(T);R.close("div");R.close("div");}};},true);
sap.ui.predefine('sap/suite/ui/commons/networkgraph/Group',["sap/suite/ui/commons/library","sap/ui/thirdparty/jquery","./ElementBase","sap/ui/core/IconPool","sap/m/CheckBox","sap/base/security/encodeXML"],function(l,q,E,I,C,e){"use strict";var a=l.networkgraph.ElementStatus,H=l.networkgraph.HeaderCheckboxState;var S={COLLAPSED_HEIGHT:32,COLLAPSED_WIDTH:160,ROUNDING:6,ICON_OFFSET:8,ICON_SIZE:15,HEADER_SIZE:32};var b="expand-all",c="collapse-all",M="horizontal-grip";var r=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");
var G=E.extend("sap.suite.ui.commons.networkgraph.Group",{
metadata:{library:"sap.suite.ui.commons",properties:{headerCheckBoxState:{type:"sap.suite.ui.commons.networkgraph.HeaderCheckboxState",group:"Misc",defaultValue:H.Hidden},key:{type:"string",group:"Misc",defaultValue:null},collapsed:{type:"boolean",group:"Misc",defaultValue:false},icon:{type:"string",group:"Appearance",defaultValue:null},minWidth:{type:"float",defaultValue:undefined},parentGroupKey:{type:"string",group:"Misc",defaultValue:null}},events:{headerCheckBoxPress:{parameters:{checked:"boolean"}},collapseExpand:{},showDetail:{}},aggregations:{_checkBox:{type:"sap.m.CheckBox",multiple:false,visibility:"hidden"}}},
renderer:{apiVersion:2,render:function(R,o){o._render({renderManager:R});}},
onAfterRendering:function(){this._afterRenderingBase();}
});
G.prototype.aProcessRequiredProperties=["key","parentGroupKey"];G.BUTTONS={MENU:"menu",COLLAPSE:"collapse"};
G.prototype.init=function(){this._iWidth=S.COLLAPSED_WIDTH;this._iHeight=S.COLLAPSED_HEIGHT;this._oActionButtons={};this._clearChildren();this._bIsHidden=false;};
G.prototype._afterRendering=function(){this._setupEvents();if(!this._isVisible()){this.$().hide();}this._removeFromInvalidatedControls();};
G.prototype._renderTopGroup=function(o){var h="",i=this._getElementId(o.idSufix),d=this._iTopGroupIndex===0;var s=this.getIcon(),t=this.getTitle();var x=this._iTopGroupIndex*50;if(this.getParent()._bIsRtl){d=!d;x=d?0:50;}if(d){h+="<div class=\"sapSuiteUiCommonsNetworkTopGroupDelimiter\"></div>";}h+=this._renderHtmlElement("div",{top:0,left:x+"%",width:"50%",height:"32px"},{id:i,"data-sap-ui":i,"class":"sapSuiteUiCommonsNetworkTopGroup "+(!d?"sapSuiteUiCommonsNetworkTopGroupRight":"")});h+="<div class=\"sapSuiteUiCommonsNetworkTopGroupHeader\">";if(s){h+=this._renderHtmlIcon(s);}if(t){h+="<div class=\"sapSuiteUiCommonsNetworkGroupHeaderTitle\">"+e(t)+" </div>";}h+="</div>";h+="</div>";return h;};
G.prototype._render=function(o){var p=this.getParent(),h=!this.getCollapsed()||this._isCollapsedSwimLane()?this._iHeight:S.HEADER_SIZE,i;o=o||{};if(this._iNestedLevel===0&&p._isTwoColumnsLayout()){o.renderManager.unsafeHtml(this._renderTopGroup(o));return"";}if(this._isIgnored()||!this.getVisible()){return"";}if(this.getParent()._isLayered()){i=this._getElementId(o.idSufix);var s=this._convertToStyle({top:this.getY()+"px",left:this.getX()+"px",width:this._iWidth+"px",height:h+"px"},this._getStatusStyle({"border-color":E.ColorType.Border,"border-width":E.ColorType.BorderWidth,"border-style":E.ColorType.BorderStyle}),true);this._renderHtmlElement("div",{},{id:i,"data-sap-ui":i,"class":this._getGroupClass(),"style":s},o.renderManager);this._renderHeader(o);o.renderManager.close("div");}};
G.prototype._renderHeader=function(o){var i=this.getIcon(),t=this.getTitle();var s="",B="",d="",f;if(this.getStatus()&&this.getStatus()!==a.Standard){d=this._getStatusStyle({"color":E.ColorType.Content},true);f=this._getStatusStyle({"color":E.ColorType.Content},false);if(this._bIsSwimLane){s=this._getStatusStyle({"background-color":E.ColorType.Background},false);}else{B=this._getStatusStyle({"background-color":E.ColorType.Background,"border-color":E.ColorType.Background},false);}}o.renderManager.openStart("div");this.applyStyles(o.renderManager,this.getStyleObject(B));o.renderManager.class("sapSuiteUiCommonsNetworkGroupHeader").openEnd();if(this._bIsSwimLane&&(s||this._hasDefaultStatus())){o.renderManager.openStart("div").class("sapSuiteUiCommonsNetworkGroupHeaderStatus").openEnd();this.applyStyles(o.renderManager,this.getStyleObject(s));o.renderManager.close("div");}o.renderManager.openStart("div").class("sapSuiteUiCommonsNetworkGroupHeaderInner").class("sapSuiteUiCommonsNetworkGroupHeaderInnerText").openEnd();if(this._showHeaderCheckBox()){this._renderClonedControl(o,this._getHeaderCheckbox());}if(i){o.renderManager.unsafeHtml(this._renderHtmlIcon(i,"sapSuiteUiCommonsNetworkGroupHeaderIcon",null,d));}if(t){o.renderManager.openStart("div").class("sapSuiteUiCommonsNetworkGroupHeaderTitle");this.applyStyles(o.renderManager,this.getStyleObject(f));o.renderManager.openEnd();o.renderManager.text(t);o.renderManager.close("div");}o.renderManager.close("div");o.renderManager.openStart("div").class("sapSuiteUiCommonsNetworkGroupHeaderInner").class("sapSuiteUiCommonsNetworkGroupHeaderInnerIcons").openEnd();o.renderManager.unsafeHtml(this._renderHtmlIcon(this.getCollapsed()?b:c,"sapSuiteUiCommonsNetworkGroupHeaderMenuIcon","collapse",d,r.getText("NETWORK_GRAPH_EXPAND_COLLAPSE")));o.renderManager.unsafeHtml(this._renderHtmlIcon(M,"sapSuiteUiCommonsNetworkGroupHeaderMenuIcon","menu",d,r.getText("NETWORK_GRAPH_GROUP_DETAILS")));o.renderManager.close("div");o.renderManager.close("div");};
G.prototype._getGroupClass=function(){return"sapSuiteUiCommonsNetworkGroup "+this._getStatusClass()+(this.getCollapsed()?"sapSuiteUiCommonsNetworkGroupCollapsed":"sapSuiteUiCommonsNetworkGroupExpanded")+(this._bIsSwimLane?" sapSuiteUiCommonsNetworkGroupSwimLane":" sapSuiteUiCommonsNetworkGroupClassic")+(this._isVerticalSwimLane()?" sapSuiteUiCommonsNetworkGroupVerticalSwimLane":"")+(this._isTopBottom()?" sapSuiteUiCommonsNetworkGroupTopBottom ":"");};
G.prototype.getChildNodes=function(){this._checkForProcessData();return this.aChildren;};
G.prototype.getChildLines=function(){this._checkForProcessData();return this.aLines;};
G.prototype.getParentNodes=function(){this._checkForProcessData();return this.aParents;};
G.prototype.getParentLines=function(){this._checkForProcessData();return this.aParentLines;};
G.prototype.getNodes=function(){this._checkForProcessData();return this.aNodes;};
G.prototype.isHidden=function(){return this._bIsHidden;};
G.prototype.setHidden=function(v){this.$()[v?"hide":"show"]();this._bIsHidden=v;};
G.prototype.getHeaderCheckbox=function(){return this._getHeaderCheckbox();};
G.prototype._getHeaderCheckbox=function(){var o=this.getAggregation("_checkBox"),t=this;if(!o){o=new C(this.getId()+"-checkbox",{select:function(d){var s=o.getSelected();t.fireHeaderCheckBoxPress({checked:s});}}).addStyleClass("sapSuiteUiCommonsNetworkGraphHeaderCheckboxInner");this.setAggregation("_checkBox",o,true);}return o;};
G.prototype._isCollapsedSwimLane=function(){return this._bIsSwimLane&&this.getCollapsed();};
G.prototype._clearChildren=function(){this.aNodes=[];this.aLines=[];this.aChildren=[];this.aParentLines=[];this.aParents=[];this.aChildGroups=[];};
G.prototype._hasVisibleNodes=function(g){var v=this.aNodes.some(function(n){return!n._bIsHidden;});if(!v){for(var i=0;i<this.aChildGroups.length;i++){if(this.aChildGroups[i]._hasVisibleNodes()){return true;}}}return v;};
G.prototype._hasNodes=function(){var n=this.aNodes.some(function(N){return N._useInLayout();});if(!n){n=this.aChildGroups.some(function(g){return g._hasNodes();});}return n;};
G.prototype._hideShow=function(d){this.$()[d?"hide":"show"]();this._bIsHidden=d;var p=this._oParentGroup;while(p){var h=p._hasVisibleNodes();if((h&&!d)||(!h&&d)){p._hideShow(d);}else{break;}p=p._oParentGroup;}};
G.prototype._setButtonFocus=function($,f){var F=f?"addClass":"removeClass";$[F]("sapSuiteUiCommonsNetworkElementFocus");};
G.prototype._setMenuButtonFocus=function(f){this._setButtonFocus(q(this._oActionButtons.menu),f);};
G.prototype._setCollapseButtonFocus=function(f){this._setButtonFocus(q(this._oActionButtons.collapse),f);};
G.prototype._setupEvents=function(){var $=this.$("menu"),d=this.$("header"),f=this.$("collapse"),g=this.$().find(".sapSuiteUiCommonsNetworkGroupHeaderMenuIcon");this._oActionButtons.menu=$[0];this._oActionButtons.collapse=f[0];f.unbind("click");$.unbind("click");d.unbind("click");g.unbind("mouseover");g.unbind("mouseout");$.click(function(o){this._setMenuButtonFocus(true);var h=this.fireEvent("showDetail",{},true);if(h){this._openDetail();}if(this.getParent()){this.getParent().setFocus({item:this,button:G.BUTTONS.MENU});}}.bind(this));f.click(function(o){this._collapse();if(this.getParent()){this.getParent().setFocus({item:this,button:G.BUTTONS.COLLAPSE});}}.bind(this));d.click(function(o){if(this.getParent()){this.getParent().setFocus({item:this});}this.firePress();}.bind(this));var p=function(h,B,s){if(!this._bIsSwimLane){h.css("background-color",this._getColor(B));}h.css("color",this._getColor(s));}.bind(this);g.mouseover(function(o){p(q(o.currentTarget),E.ColorType.HoverBackground,E.ColorType.HoverContent);});g.mouseout(function(o){p(q(o.currentTarget),E.ColorType.Background,E.ColorType.Content);});};
G.prototype._collapse=function(){this.getParent()._selectElementAfterScroll=this;this.fireEvent("collapseExpand",{},true);this.setCollapsed(!this.getCollapsed());};
G.prototype._openDetail=function(){var $=this.$("menu");this.getParent()._tooltip.openDetail({item:this,opener:$[0]});};
G.prototype._isEmpty=function(){return this.aNodes.length===0;};
G.prototype._isIgnored=function(){if(!this._useInLayout()){return true;}return!this._hasNodes();};
G.prototype._isVisible=function(){var d=this._bIsSwimLane||this.aNodes.some(function(n){return!n.isHidden();});if(!d){d=this.aChildGroups.some(function(g){return g._isVisible();});}return d;};
G.prototype._useInLayout=function(){return!this._oCollapsedByParent;};
G.prototype._resetSize=function(){if(this.getCollapsed()){this._iHeight=S.COLLAPSED_HEIGHT;this._iWidth=S.COLLAPSED_WIDTH;}};
G.prototype._getAccessibilityLabel=function(){return r.getText("NETWORK_GRAPH_GROUP")+" "+this.getTitle();};
G.prototype._isTopBottom=function(){var p=this.getParent();return p&&p._isTopBottom();};
G.prototype._isVerticalSwimLane=function(){if(this._bIsSwimLane){var t=this._isTopBottom();return(t&&!this.getCollapsed())||(!t&&this.getCollapsed());}return false;};
G.prototype._isCollapsed=function(){return this.getCollapsed()||!!this._oCollapsedByParent;};
E.prototype._showHeaderCheckBox=function(){return this.getHeaderCheckBoxState()!==H.Hidden;};
G.prototype._getBorderSize=function(){return 1;};
G.prototype._setFocus=function(f){this._setMenuButtonFocus(f);};
G.prototype._isOnScreen=function(L,R,t,B){var x=this.getX(),y=this.getY();return E._isRectOnScreen(x,x+this._iWidth,y,y+this._iHeight,L,R,t,B);};
G.prototype.getHeaderCheckBoxState=function(){if(this.getProperty("headerCheckBoxState")===H.Hidden){return H.Hidden;}return this.getHeaderCheckbox().getSelected()?H.Checked:H.Unchecked;};
G.prototype.setHeaderCheckBoxState=function(v){this._setHeaderCheckBoxState(v);return this;};
G.prototype.setX=function(x){this.fX=x;return this;};
G.prototype.getX=function(){return this.fX;};
G.prototype.setY=function(y){this.fY=y;return this;};
G.prototype.getY=function(){return this.fY;};
G.prototype._setCollapsed=function(d,f){var t=this;var p=this.getParent(),i=[];var g=function(o){o.aChildGroups.forEach(function(h){g(h);});if(t!==o){if(!o._oCollapsedByParent||o._oCollapsedByParent===t){o._oCollapsedByParent=d?t:null;}}};var P=function(o){if(d){this.getNodes().forEach(function(n){if(n.getSelected()){n.setSelected(false);i.push(n);}});this.getChildLines().forEach(function(L){if(L.getSelected()&&L._isInCollapsedGroup()){L.setSelected(false);i.push(L);}});}}.bind(this);if(d!==this.getCollapsed()||f){this.setProperty("collapsed",d,true);if(d){this.getNodes().forEach(function(n){if(n.getSelected()){n.setSelected(false);i.push(n);}});this.getChildLines().forEach(function(L){if(L.getSelected()&&L._isInCollapsedGroup()){L.setSelected(false);i.push(L);}});}this.aChildGroups.forEach(function(o){P(o);});g(this);if(p&&i.length>0){p.fireSelectionChange({items:i});}if(p&&p._bIsLayedOut){p.invalidate();}}};
G.prototype.setCollapsed=function(d){this._setCollapsed(d,false);return this;};
G.prototype.setVisible=function(v){this.setProperty("visible",v);var p=this.getParent();if(p&&p._bIsLayedOut&&!this.getCollapsed()){this.aNodes.forEach(function(n){if(!v){n.$().hide();}else if(!n._bIsHidden){n.$().show();}});}return this;};
return G;});
sap.ui.predefine('sap/suite/ui/commons/networkgraph/KeyboardNavigator',["sap/ui/thirdparty/jquery","sap/ui/base/Object","./Group","./Node","./Line","sap/ui/events/KeyCodes","sap/ui/dom/containsOrEquals","sap/base/Log"],function(q,B,G,N,L,K,c,b){"use strict";var d={LEFT:"left",RIGHT:"right",UP:"up",DOWN:"down"};var r=/^on.*|setFocus|setItems$/;
function w(k){var s,p=k.prototype;for(s in p){if(p.hasOwnProperty(s)&&(typeof p[s]==="function")&&r.test(s)){p[s]=e(p[s]);}}}
function e(o){return function(){try{return o.apply(this,arguments);}catch(E){this._handleError(E);}return undefined;};}
var f=B.extend("sap.suite.ui.commons.networkgraph.KeyboardNavigator",{constructor:function(g){B.apply(this,arguments);this._oGraph=g;this._aItems=[[]];this._iRows=0;this._iColumns=0;this._iPageSize=5;this._oFocus=null;this._oFocusPosition=null;this._oWrapperDom=null;}});
f.prototype.getFocus=function(){var g=this._oGraph.getFocus();if(this._oFocus!==g){this._oFocus=g?{item:g.item,button:g.button}:null;this._oFocusPosition=null;}return this._oFocus?{item:this._oFocus.item,button:this._oFocus.button}:null;};
f.prototype.getFocusPosition=function(){var F=this.getFocus();if(!this._oFocusPosition){var x,y;this._oFocusPosition={iX:null,iY:null};if(!F){return this._oFocusPosition;}for(y=0;y<this._aItems.length;y++){for(x=0;x<this._aItems[y].length;x++){if(this._aItems[y][x]===F.item){this._oFocusPosition={iX:x,iY:y};return this._oFocusPosition;}}}}return this._oFocusPosition;};
f.prototype.setItems=function(i){this._aItems=i;this._iRows=i.length;this._iColumns=0;i.forEach(function(R){if(this._iColumns<R.length){this._iColumns=R.length;}},this);};
f.prototype.setWrapperDom=function(D){this._oWrapperDom=D;};
f.prototype.setPageSize=function(s){this._iPageSize=s;};
f.prototype.onsapend=function(E){this._moveThroughMatrix(E,true,true);};
f.prototype.onsaphome=function(E){this._moveThroughMatrix(E,true,false);};
f.prototype.onsapendmodifiers=function(E){if(E.ctrlKey){this._moveThroughMatrix(E,false,true);}};
f.prototype.onsaphomemodifiers=function(E){if(E.ctrlKey){this._moveThroughMatrix(E,false,false);}};
f.prototype.onsappagedown=function(E){this._moveThroughMatrix(E,false,true,this._iPageSize);};
f.prototype.onsappageup=function(E){this._moveThroughMatrix(E,false,false,this._iPageSize);};
f.prototype.onsappagedownmodifiers=function(E){if(E.altKey){this._moveThroughMatrix(E,true,true,this._iPageSize);}};
f.prototype.onsappageupmodifiers=function(E){if(E.altKey){this._moveThroughMatrix(E,true,false,this._iPageSize);}};
f.prototype.onsapspace=function(E){if(this._oGraph.getFocusDomRef()===document.activeElement){this._selectElement(false);E.stopPropagation();E.preventDefault();}};
f.prototype.onsapspacemodifiers=function(E){if(E.ctrlKey&&this._oGraph.getFocusDomRef()===document.activeElement){this._selectElement(true);E.stopPropagation();E.preventDefault();}};
f.prototype.onsapenter=function(E){this._handleEnter();};
f.prototype.onsaptabnext=function(E){this._handleTab(E,d.RIGHT);};
f.prototype.onsaptabprevious=function(E){this._handleTab(E,d.LEFT);};
f.prototype.onsapleft=function(E){this._handleArrow(E,d.LEFT);};
f.prototype.onsapright=function(E){this._handleArrow(E,d.RIGHT);};
f.prototype.onsapup=function(E){this._handleArrow(E,d.UP);};
f.prototype.onsapdown=function(E){this._handleArrow(E,d.DOWN);};
f.prototype.onkeydown=function(E){var i,o,F=this.getFocus();if(!F){return;}i=F.item;o=F.button;if(E.ctrlKey&&E.keyCode===K.A){this._onCtrlA(E);}else if(E.keyCode===K.F2){if(i instanceof N){if(i.hasVisibleActionButtons()){i._detailClick();}}else if(i instanceof L){i.getParent()._tooltip.openDetail({item:i,point:i._getArrowFragmentVector().apex});}else if(i instanceof G){i._openDetail();}E.stopPropagation();}else if(E.keyCode===K.F6){if(i&&o){F.button=null;this._oGraph.setFocus(F);}this._handleArrow(E,E.shiftKey?d.LEFT:d.RIGHT);}else if(E.keyCode===K.F7&&!E.shiftKey){if(i&&o){F.button=null;this._oGraph.setFocus(F);}}else if(E.ctrlKey&&(E.keyCode===K.DIGIT_0||E.keyCode===K.NUMPAD_0)){this._onCtrl0(E);}else if(E.ctrlKey&&(E.keyCode===K.PLUS||E.keyCode===K.NUMPAD_PLUS)){this._onCtrlPlus(E);}else if(E.ctrlKey&&(E.keyCode===K.SLASH||E.keyCode===K.NUMPAD_MINUS)){this._onCtrlMinus(E);}};
f.prototype._handleEnter=function(){var i,o,F=this.getFocus();if(!F){return;}i=F.item;o=F.button;if(i instanceof N){if(o){this._oGraph._isUseNodeHtml()?q(o).trigger("click"):q(o).children().first().trigger("click");}else{i._mouseDown(false);if(!i.getSelected()){i.$().removeClass(i.HIGHLIGHT_CLASS);i._setStatusColors("");}}}else if(i instanceof L){var C=i._getArrowFragmentVector();i._click({ctrlKey:false,clientX:C.apex.x,clientY:C.apex.y,skipConversion:true});}else if(i instanceof G){if(o===G.BUTTONS.MENU){i._openDetail();}else if(o===G.BUTTONS.COLLAPSE){i._collapse();}else{i._openDetail();}}};
f.prototype._handleTab=function(E,D){if(this._ignoreEvent(E)){this._oWrapperDom.classList.remove("sapSuiteUiCommonsNetworkGraphContentFocusHidden");return;}else{this._oWrapperDom.classList.add("sapSuiteUiCommonsNetworkGraphContentFocusHidden");}if(this._handleTabOverNodeWithButtons(E,D)||this._handleTabOverGroupWithButtons(E,D)){E.preventDefault();E.stopPropagation();return;}this._moveItemFocus(E,D);};
f.prototype._handleTabOverNodeWithButtons=function(E,D){var F=this.getFocus(),I,$,a,A=false,g;if(!F){return false;}I=F.item;$=F.button;a=I&&I.getEnabledActionButtons?I.getEnabledActionButtons():[];if(!(I instanceof N)||!I.hasVisibleActionButtons()||a.length===0){return false;}if($){g=0;for(var i=0;i<a.length;i++){if(a[i].isEqualNode($)){g=i;break;}}if(D===d.RIGHT){if(g===(a.length-1)){return false;}else{this._setActionButtonFocus(a[g+1]);}A=true;}else if(D===d.LEFT){if(g===0){this._moveItemFocus(E,this.getFocusPosition());}else{this._setActionButtonFocus(a[g-1]);}A=true;}}else if(D===d.RIGHT){this._setActionButtonFocus(a[0]);A=true;}return A;};
f.prototype._handleTabOverGroupWithButtons=function(E,D){var F=this.getFocus(),i,o;if(!F){return false;}i=F.item;o=F.button;if(i instanceof G){if(!o){o=G.BUTTONS.MENU;}if(o){if(o===G.BUTTONS.MENU){if(D===d.RIGHT){F.button=G.BUTTONS.COLLAPSE;this._oGraph.setFocus(F);return true;}else if(D===d.LEFT){return false;}}else if(o===G.BUTTONS.COLLAPSE){if(D===d.RIGHT){return false;}else if(D===d.LEFT){F.button=G.BUTTONS.MENU;this._oGraph.setFocus(F);return true;}}}}return false;};
f.prototype._setActionButtonFocus=function(a){var F=this.getFocus();if(!F){return;}F.button=a;this._oGraph.setFocus(F);};
f.prototype._selectElement=function(C){var F=this.getFocus(),i;if(!F){return;}i=F.item;if(i instanceof N){i.getParent()._selectNode({element:i,setFocus:false,renderActionButtons:false,preventDeselect:C});}else if(i instanceof L){i.getParent()._selectLine({element:i,setFocus:false,preventDeselect:C});}};
f.prototype._moveThroughMatrix=function(E,R,t,T){var F=this.getFocus(),I,C,a,n,A=this.getFocusPosition().iX,g=this.getFocusPosition().iY;if(this._ignoreEvent(E)||!F){return;}I=F.item;a=0;T=T||Number.POSITIVE_INFINITY;do{for(var i=(R?A:g)+(t?1:-1);(t&&i<(R?this._iColumns:this._iRows))||(!t&&i>=0);i+=(t?1:-1)){C=(R&&g>=0&&g<this._iRows)||(!R&&A>=0&&A<this._iColumns)?this._aItems[R?g:i][R?i:A]:null;if(C&&a<T){n=C;a++;if(a>=T){break;}}}if(T<Number.POSITIVE_INFINITY&&a<T){if(R){if(t){A=-1;g++;}else{A=this._iColumns;g--;}}else if(t){A++;g=-1;}else{A--;g=this._iRows;}}}while(T<Number.POSITIVE_INFINITY&&a<T&&g>=-1&&g<=this._iRows&&A>=-1&&A<=this._iColumns);if(n&&n!==I){F.item=n;F.button=null;this._oGraph.setFocus(F);E.stopPropagation();}};
f.prototype._handleArrow=function(E,D){if(this._ignoreEvent(E)||!this.getFocus()){return;}this._moveItemFocus(E,D,true);};
f.prototype._moveItemFocus=function(E,D,s){var F,a=(D===d.LEFT&&E.key==="Tab"),p,n,g;if(typeof D==="string"){p=this._findNextPosition(D);}else{p=D;}n=this._getItemAtPosition(p);F={item:n,button:null};if(a&&n!==null){if(n instanceof N&&n.hasVisibleActionButtons()){g=n.getEnabledActionButtons();if(g.length>0){F.button=g[g.length-1];}}else if(n instanceof G){F.button=G.BUTTONS.COLLAPSE;}}if(n||!s){this._oGraph.setFocus(F);}if(E&&n){E.preventDefault();E.stopPropagation();}};
f.prototype._getItemAtPosition=function(p){var a;if(!p||p.iX===null){return null;}else{a=this._aItems[p.iY];return a?a[p.iX]:null;}};
f.prototype._findNextPosition=function(D){var x,y;if(this.getFocusPosition().iX===null){if(D===d.LEFT){x=this._iColumns-1;y=this._iRows-1;}else{x=0;y=0;}if(this._aItems[y][x]!==null){return{iX:x,iY:y};}}else{x=this.getFocusPosition().iX;y=this.getFocusPosition().iY;}do{switch(D){case d.RIGHT:x+=1;if(x>=this._iColumns){y+=1;x=0;}break;case d.LEFT:x-=1;if(x<0){y-=1;x=this._iColumns-1;}break;case d.UP:y-=1;if(y<0&&x>0){x-=1;y=this._iRows-1;}break;case d.DOWN:y+=1;if(y>=this._iRows&&x<this._iColumns-1){x+=1;y=0;}break;default:throw new Error("Unexpected direction: "+D);}}while(y>=0&&y<this._iRows&&this._aItems[y][x]===null);if(y<0||y>=this._iRows){return null;}else{return{iX:x,iY:y};}};
f.prototype._onCtrlA=function(E){if(this._ignoreEvent(E)){return;}var a=true;this._forEach(function(i){if(i instanceof G){return false;}if(!i.getSelected()){a=false;return true;}return false;});a=!a;this._forEach(function(i){if(!(i instanceof G)){i.setSelected(a);}});E.preventDefault();E.stopPropagation();};
f.prototype._forEach=function(C){var x,y,i,a;for(y=0;y<this._iRows;y++){for(x=0;x<this._iColumns;x++){i=this._aItems[y][x];if(i){a=C.call(this,i,x,y);if(a){return;}}}}};
f.prototype._onCtrl0=function(E){this._oGraph._zoom({zoomLevel:this._oGraph.ZOOM_100});E.preventDefault();E.stopPropagation();};
f.prototype._onCtrlPlus=function(E){this._oGraph._zoom({deltaY:1});E.preventDefault();E.stopPropagation();};
f.prototype._onCtrlMinus=function(E){this._oGraph._zoom({deltaY:-1});E.preventDefault();E.stopPropagation();};
f.prototype._ignoreEvent=function(E){return!c(this._oWrapperDom,E.target);};
f.prototype._handleError=function(E){b.error("An error in KeyboardNavigator: "+E);};
w(f);return f;});
sap.ui.predefine('sap/suite/ui/commons/networkgraph/Line',["sap/suite/ui/commons/library","./ElementBase","./layout/Geometry","./Coordinate","./Utils"],function(l,E,G,C,U){"use strict";var A=l.networkgraph.LineArrowPosition,L=l.networkgraph.LineType,a=l.networkgraph.LineArrowOrientation,S=l.networkgraph.NodeShape,O=l.networkgraph.Orientation;var B=6,F=5,R=0.45,c=15,Z={Apex:{x:5.5,y:0},Second:{x:-5.5,y:-7.5},Third:{x:-5.5,y:7.5}},d={Apex:{x:16,y:0},Second:{x:5,y:-7.5},Third:{x:5,y:7.5}},e={Apex:{x:-12,y:0},Second:{x:-1,y:-7.5},Third:{x:-1,y:7.5}},N=5;var r=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");
var f=E.extend("sap.suite.ui.commons.networkgraph.Line",{
metadata:{library:"sap.suite.ui.commons",properties:{selected:{type:"boolean",group:"Misc",defaultValue:false},from:{type:"string",group:"Misc",defaultValue:null},to:{type:"string",group:"Misc",defaultValue:null},lineType:{type:"sap.suite.ui.commons.networkgraph.LineType",group:"Appearance",defaultValue:L.Solid},arrowPosition:{type:"sap.suite.ui.commons.networkgraph.LineArrowPosition",group:"Appearance",defaultValue:A.End},arrowOrientation:{type:"sap.suite.ui.commons.networkgraph.LineArrowOrientation",group:"Appearance",defaultValue:a.ParentOf},stretchToCenter:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{coordinates:{type:"sap.suite.ui.commons.networkgraph.Coordinate",multiple:true,singularName:"coordinate"},actionButtons:{type:"sap.suite.ui.commons.networkgraph.ActionButton",multiple:true,singularName:"actionButton"}},events:{hover:{},press:{parameters:{point:"Object",opener:"Object"}}}},
renderer:function(o,b){o.write(b._render());},
onAfterRendering:function(){this._afterRenderingBase();},
init:function(){this._oFrom=null;this._oTo=null;this._bFocusRendered=false;this._sKey="";this._bIsHidden=false;}
});
f.prototype.aProcessRequiredProperties=["from","to"];
f.prototype._afterRendering=function(){this._setupEvents();if(this.getFromNode()._bIsHidden||this.getToNode()._bIsHidden){this.$().hide();}this._removeFromInvalidatedControls();};
f.prototype._render=function(o){var s="",b=this.getSelected()?" "+this.SELECT_CLASS+" ":"",i=this._getElementId(o&&o.idSufix),g;var h=this._getStatusStyle({"stroke":E.ColorType.Border,"stroke-width":E.ColorType.BorderWidth,"stroke-dasharray":E.ColorType.BorderStyle});var j=this._getStatusStyle({fill:E.ColorType.Background,stroke:E.ColorType.Border});var k=function(t,P,I){return this._renderControl("path",{d:g,"class":t||this._getLineClass(),style:I?"":h,from:this.getFromNode().getKey(),to:this.getToNode().getKey(),id:i?i+"-"+P:""});}.bind(this);var m=function(I,P,t){return{id:i+"-"+t,"class":"sapSuiteUiCommonsNetworkLineArrow",style:j,d:"M "+P[I+0].x+","+P[I+0].y+" L "+P[I+1].x+","+P[I+1].y+" L "+P[I+2].x+","+P[I+2].y+" Z"};};var n=function(t,P,u){var v=this._getArrowPoints(t,P),H=this._renderControl("path",m(0,v,u||"arrow"));if(this._isBothMiddleArrow()){H+=this._renderControl("path",m(3,v,"arrow1"));}return H;}.bind(this);var p=function(x,y,t){var u=x,v=y,w=" 0 0 0 ";if(t===O.LeftRight||t===O.RightLeft){y-=N;v+=N;}if(t===O.TopBottom||t===O.BottomTop){x-=N;u+=N;}if(t===O.BottomTop||t===O.LeftRight){w=" 0 0 1 ";}return"M"+x+" "+y+"A"+N+" "+N+w+" "+u+" "+v;};this._bFocusRendered=false;if(this._isIgnored()){return"";}if(!this.getVisible()){return"<g style=\"display:none\" id=\""+i+"\" data-sap-ui=\""+i+"\"></g>";}g=this._createPath();s+=this._renderControl("g",{"class":"sapSuiteUiCommonsNetworkLine "+this._getStatusClass()+b,id:i,"data-sap-ui":i},false);s+=k("sapSuiteUiCommonsNetworkLineInvisibleWrapper","invisibleWrapper",true);s+=k("","path");if(this.getArrowOrientation()!==a.None&&this.getCoordinates().length>=2){if(this.getArrowOrientation()===a.Both){if(this.getArrowPosition()===A.Middle){s+=n(a.ParentOf,A.Middle);}else{s+=n(a.ChildOf,A.Start,"arrow");s+=n(a.ParentOf,A.End,"arrow1");}}else{s+=n();}}if(this._aNipples){var q=j?"style=\""+j+"\"":"";this._aNipples.forEach(function(t){s+="<path "+q+" class=\"sapSuiteUiCommonsNetworkLineNipple\" d=\""+p(t.x,t.y,t.orientation)+"\" />";});}s+="</g>";return s;};
f.prototype._renderFocusWrapper=function(){var b=function(s){var p=this._createElement("path",{d:this._createPath(s),"class":"sapSuiteUiCommonsNetworkLineFocus"});this.$()[0].appendChild(p);}.bind(this);if(!this._bFocusRendered){b(F);b(-F);this._bFocusRendered=true;}};
f.prototype._resetLayoutData=function(){this._aNipples=null;};
f.prototype._createPath=function(s){if(!this.getSource()||!this.getTarget()){return;}var p=[{x:this.getSource().getX(),y:this.getSource().getY()}],P="M"+this.getSource().getX()+","+this.getSource().getY(),b,n,I=this._isTopBottom(),g=I?"x":"y",h=I?"getX":"getY",k=this.getBends().concat([this.getTarget()]);for(var i=0;i<k.length;i++){b=p[i-1]?p[i-1][g]:NaN;n=k[i][h]();if(Math.abs(b-k[i][h]())<2){p.pop();n=b;}p.push({x:I?n:k[i].getX(),y:!I?n:k[i].getY()});}for(var j=1;j<p.length;j++){P+=" L"+p[j].x+","+p[j].y;}return G.getBezierPathCorners(P,B,s);};
f.prototype._getLineClass=function(){var g=function(){switch(this.getLineType()){case L.Dashed:return"sapSuiteUiCommonsNetworkDashedLine";case L.Dotted:return"sapSuiteUiCommonsNetworkDottedLine";default:return"";}}.bind(this);return"sapSuiteUiCommonsNetworkLinePath "+g();};
f.prototype._getArrowFragmentVector=function(p){var o=this.getCoordinates(),b=o.length-1,h=0,g=function(i){return Math.abs(o[i].getX()-o[i+1].getX())+Math.abs(o[i].getY()-o[i+1].getY());};p=p||this.getArrowPosition();if(this.getBends().length===0){h=0;}else if(p===A.Start){while(h<(b-1)&&this._doesLineFragmentCrossCollapsedGroup(h)){h++;}if(g(h)<c){h++;}if(this._doesLineFragmentCrossCollapsedGroup(h)){h=0;}}else if(p===A.End){h=b-1;while(h>0&&this._doesLineFragmentCrossCollapsedGroup(h)){h--;}if(g(h)<c){h--;}}else{var j=[],D=0;for(var i=0;i<b;i++){if(o[i].getX()===o[i+1].getX()){D+=Math.abs(o[i+1].getY()-o[i].getY());}else if(o[i].getY()===o[i+1].getY()){D+=Math.abs(o[i+1].getX()-o[i].getX());}else{D+=G.getPointsDistance({x:o[i].getX(),y:o[i].getY()},{x:o[i+1].getX(),y:o[i+1].getY()});}j.push(D);}D=D/2;for(i=0;i<b&&h===0;i++){if(j[i]>=D&&!this._doesLineFragmentCrossCollapsedGroup(i)){h=i;}}}if(h<0||h>(b-1)){h=0;}return{center:{x:o[h].getX(),y:o[h].getY()},apex:{x:o[h+1].getX(),y:o[h+1].getY()}};};
f.prototype._doesLineFragmentCrossCollapsedGroup=function(s){var g=this.getParent(),b=this.getCoordinates()[s],o=this.getCoordinates()[s+1];return g.getGroups().some(function(h){return h.getCollapsed()&&G.doLineRectangleIntersect({p1:{x:Math.min(b.getX(),o.getX())+1,y:Math.min(b.getY(),o.getY())+1},p2:{x:Math.max(b.getX(),o.getX())-1,y:Math.max(b.getY(),o.getY())-1}},{p1:{x:h.getX(),y:h.getY()},p2:{x:h.getX()+h._iWidth,y:h.getY()+h._iHeight}});});};
f.prototype._getArrowPoints=function(o,p){var P,b,g,h,i=[];o=o||this.getArrowOrientation();p=p||this.getArrowPosition();var j=function(k){var m=c;if(p===A.Middle){g={x:(b.apex.x-b.center.x)*R+b.center.x,y:(b.apex.y-b.center.y)*R+b.center.y};}else{if(!(this.getToNode()._oGroup&&this.getToNode()._oGroup.getCollapsed())&&this.getToNode().getShape()===S.Circle&&p===A.End){m+=this.getToNode()._getCircleSize()/2;}else if(!(this.getFromNode()._oGroup&&this.getFromNode()._oGroup.getCollapsed())&&this.getFromNode().getShape()===S.Circle&&p===A.Start){m+=this.getFromNode()._getCircleSize()/2;}P=G.getNormalizedVector(b,m);if(p===A.Start){g=b.center;}else if(p===A.End){P=G.getRotatedVector(P,Math.PI);g=b.apex;}g=G.getPointSum(g,P.apex);}h=G.getAngleOfVector(b);if(o===a.ChildOf){h+=Math.PI;}i.push(G.getPointSum(g,G.getRotatedPoint(k,h)));}.bind(this);b=this._getArrowFragmentVector(p);if(this._isBothMiddleArrow()){j(d.Apex);j(d.Second);j(d.Third);j(e.Apex);j(e.Second);j(e.Third);}else{j(Z.Apex);j(Z.Second);j(Z.Third);}return i;};
f.prototype._getAccessibilityLabel=function(){return r.getText("NETWORK_GRAPH_ACCESSIBILITY_LINE_LABEL",[this.getFromNode().getTitle(),this.getToNode().getTitle()])+" "+this.getTitle();};
f.prototype.getFromNode=function(){this._checkForProcessData();if(!this._oFrom&&this.getParent()){this._oFrom=this.getParent().getNodeByKey(this.getFrom());}return this._oFrom;};
f.prototype.getToNode=function(){this._checkForProcessData();if(!this._oTo&&this.getParent()){this._oTo=this.getParent().getNodeByKey(this.getTo());}return this._oTo;};
f.prototype.setSource=function(m){var o;if(this.getCoordinates().length===0){o=new C();this.addAggregation("coordinates",o,true);}o=this.getCoordinates()[0];if(m.x||m.x===0){o.setX(m.x);}if(m.y||m.y===0){o.setY(m.y);}};
f.prototype.getSource=function(){return this.getCoordinates()[0];};
f.prototype.getTarget=function(){return this.getCoordinates().length>0?this.getCoordinates()[this.getCoordinates().length-1]:null;};
f.prototype.setTarget=function(m){var o;if(this.getCoordinates().length<2){o=new C();this.addAggregation("coordinates",o,true);}o=this.getCoordinates()[this.getCoordinates().length-1];if(m.x||m.x===0){o.setX(m.x);}if(m.y||m.y===0){o.setY(m.y);}};
f.prototype.getBends=function(){return this.getCoordinates().filter(function(o,i){return(i>0)&&(i<(this.getCoordinates().length-1));},this);};
f.prototype.clearBends=function(){this.getBends().forEach(function(b){this.removeAggregation("coordinates",b,true);},this);};
f.prototype.addBend=function(p){var n=new C();n.setX(p.x);n.setY(p.y);this.insertAggregation("coordinates",n,this.getCoordinates().length-1,true);return n;};
f.prototype.isHidden=function(){return this._bIsHidden;};
f.prototype.getKey=function(){return this._getLineId();};
f.prototype.setHidden=function(v){this.$()[v?"hide":"show"]();};
f.prototype._isIgnored=function(){var o=this.getFromNode(),t=this.getToNode(),i=o._oGroup&&o._oGroup.getCollapsed()&&t._oGroup&&t._oGroup.getCollapsed()&&o._oGroup===t._oGroup,n=!o._useInLayout()||!t._useInLayout();return!this._useInLayout||i||this._isLoop()||n;};
f.prototype._isLoop=function(){return this.getFromNode().getId()===this.getToNode().getId();};
f.prototype._getLineId=function(){return this._sKey?this._sKey:"line_"+this.getFrom()+"-"+this.getTo();};
f.prototype._setupEvents=function(){var $=this.$().find(".sapSuiteUiCommonsNetworkLineInvisibleWrapper");$.click(function(o){this._click({ctrlKey:o.ctrlKey,clientX:o.clientX,clientY:o.clientY});}.bind(this));$.mouseover(function(o){this._mouseOver();}.bind(this));$.mouseout(function(o){this._mouseOut();}.bind(this));};
f.prototype._mouseOut=function(){this.$().removeClass(this.HIGHLIGHT_CLASS);if(!this.getSelected()){this._setStatusColors("");}};
f.prototype._mouseOver=function(){var b=this.fireEvent("hover",{},true);if(!this.getSelected()&&b){this._setStatusColors("Hover");this.$().addClass(this.HIGHLIGHT_CLASS);}};
f.prototype._setStatusColors=function(t){var $=this.$().find(".sapSuiteUiCommonsNetworkLineArrow"),b=this._getColor(E.ColorType[t+"Border"]),s=this._getColor(E.ColorType[t+"Background"]);$.css("fill",s);$.css("stroke",b);this.$("path").css("stroke",b);if(this.getParent()&&this.getParent()._isSwimLane()){var g=this.$().find(".sapSuiteUiCommonsNetworkLineNipple");g.css("fill",s);g.css("stroke",b);}};
f.prototype._showActionButtons=function(p){var b=function(Y,v,w){var _=g(Y,v,w);if(_){Y._setNodeOpacity(true);P._aShadedNodes.push(Y);}return _;};var g=function(Y,v,w){return G.hasRectangleRectangleIntersection({p1:{x:u,y:s},p2:{x:w,y:v}},Y._getContentRect());};var h=function(o,t){return{p1:{x:o.x,y:o.y},p2:{x:t.x,y:t.y}};};var j=0;var k=function(Y,_){if(j<2){var a1=jQuery('<div></div>',{"class":Y,css:{top:_.top,left:_.left,right:_.right,bottom:_.bottom}});m.append(a1);j++;}};var P=this.getParent(),$=P.$("divlinebuttons"),m=P.$("linetooltip"),n=P.$("linetooltipbuttons");var o=this.getFromNode(),t=this.getToNode();var q=10;P._aShadedNodes=[];var T="<span class=\"sapSuiteUiCommonsNetworkGraphLineTooltipText\">"+o.getTitle()+"</span>";if(this._isBothArrow()){T+="<span class=\"sapSuiteUiCommonsNetworkGraphLineTooltipArrow sapSuiteUiCommonsNetworkGraphLineTooltipDualArrow\"></span>";}T+="<span class=\"sapSuiteUiCommonsNetworkGraphLineTooltipArrow\"></span>"+"</br>"+"<span class=\"sapSuiteUiCommonsNetworkGraphLineTooltipText\">"+t.getTitle()+"</span>";m.html(T);n.html("");this.getActionButtons().forEach(function(Y){this._appendActionButton({icon:Y.getIcon(),enable:Y.getEnabled(),title:Y.getTitle(),id:Y.getId(),click:function(_){Y.firePress({buttonElement:_.target});}},n);}.bind(this));$.show();var s=p.y-m.outerHeight()/2,u=p.x-m.outerWidth()/2,v=s+m.outerHeight(),w=u+m.outerWidth();b(t,v,u+$.width());var x=b(o,s+m.height(),u),y=b(t,v,u+m.outerWidth()+q);if(P._isLayered()){var z={x:u,y:s};var D={x:w,y:s};var H={x:w,y:v};var I={x:u,y:v};var J=this.getCoordinates();for(var i=0;i<J.length-1&&j<2;i++){var K=J[i],M=J[i+1];var Q={x:K.getX(),y:K.getY()};var V={x:M.getX(),y:M.getY()};var W=h(Q,V);var X=G.getSegmentsIntersection(W,h(z,I));if(X&&!x){k("sapSuiteUiCommonsNetworkGraphTooltipLeftArrow",{top:(X.y-s)-q});}X=G.getSegmentsIntersection(W,h(D,H));if(X&&!y){k("sapSuiteUiCommonsNetworkGraphTooltipRightArrow",{top:(X.y-s)-q});}X=G.getSegmentsIntersection(W,h(I,H));if(X){k("sapSuiteUiCommonsNetworkGraphTooltipBottomArrow",{left:X.x-u-q});}X=G.getSegmentsIntersection(W,h(z,D));if(X){k("sapSuiteUiCommonsNetworkGraphTooltipTopArrow",{left:X.x-u-q});}}$.css("top",s);$.css("left",u);}};
f.prototype._setActionButtonFocus=function(i,b){var $=this.getParent().$("divlinebuttons");$.removeClass(this.FOCUS_CLASS);$.find("."+this.FOCUS_CLASS).removeClass(this.FOCUS_CLASS);jQuery(i).toggleClass(this.FOCUS_CLASS,b);};
f.prototype._click=function(m){var p=this.getParent(),P=p.getCorrectMousePosition({x:m.clientX,y:m.clientY}),o=p._tooltip._getOpener(this,P),b;p._selectLine({element:this,forceFocus:true,preventDeselect:m.ctrlKey});b=this.fireEvent("press",{opener:o,point:P},true);if(this.getSelected()&&b){(this.getActionButtons().length===0)?p._tooltip.openDetail({item:this,opener:o,point:P}):this._showActionButtons(P);}};
f.prototype._setFocus=function(b){E.prototype._setFocus.call(this,b);if(b){this._renderFocusWrapper();}};
f.prototype._isEndPosition=function(){return((this.getArrowPosition()===A.End&&this.getArrowOrientation()===a.ParentOf)||(this.getArrowPosition()===A.Start&&this.getArrowOrientation()===a.ChildOf));};
f.prototype._moveToEnd=function(){return this._isEndPosition()||(this.getArrowPosition()===A.Middle&&this.getArrowOrientation()===a.ParentOf);};
f.prototype._hideShow=function(b){if(b){this.$().hide();this._bIsHidden=true;}else if(!this.getToNode()._bIsHidden&&!this.getFromNode()._bIsHidden){this.$().show();this._bIsHidden=false;}};
f.prototype._shift=function(p){this.getBends().forEach(function(b){b.setX(b.getX()+p.x);b.setY(b.getY()+p.y);});if(this.getSource()){this.setSource({x:this.getSource().getX()+p.x,y:this.getSource().getY()+p.y});}if(this.getTarget()){this.setTarget({x:this.getTarget().getX()+p.x,y:this.getTarget().getY()+p.y});}if(this._aNipples){this._aNipples.forEach(function(n){n.x+=p.x;n.y+=p.y;});}};
f.prototype._normalizePath=function(){var o,t;o=this.getFromNode().getCenterPosition();this.setSource({x:o.x,y:o.y});t=this.getToNode().getCenterPosition();this.setTarget({x:t.x,y:t.y});this.clearBends();};
f.prototype._validateLayout=function(){return(!this.getSource()||(isFinite(this.getSource().getX())&&isFinite(this.getSource().getY())))&&(!this.getTarget()||(isFinite(this.getTarget().getX())&&isFinite(this.getTarget().getY())))&&!this.getBends().some(function(b){return!isFinite(b.getX())||!isFinite(b.getY());});};
f.prototype.setSelected=function(s){var p=this.getParent(),b=s?"addClass":"removeClass";this._setStatusColors(s?"Selected":"");this.setProperty("selected",s,true);this.$()[b](this.SELECT_CLASS);if(p){if(s){p._mSelectedLines[this._getLineId()]=this;}else{this._setStatusColors("");delete p._mSelectedLines[this._getLineId()];}}return this;};
f.prototype.setFrom=function(s){var p=this.getParent();this.setProperty("from",s,true);if(p){p.invalidate();}return this;};
f.prototype.setTo=function(t){var p=this.getParent();this.setProperty("to",t,true);if(p){p.invalidate();}return this;};
f.prototype._isTopBottom=function(){var p=this.getParent();return p&&p._isTopBottom();};
f.prototype.getFocusDomRef=function(){return this.getDomRef("invisibleWrapper");};
f.prototype._createSuggestionHelpText=function(){var b=25;var t=this.getTitle()?(this.getTitle()+" "):"";return t+"("+U.trimText(this.getFromNode().getTitle(),b)+" -> "+U.trimText(this.getToNode().getTitle(),b)+")";};
f.prototype._isInCollapsedGroup=function(){var o=this.getFromNode(),t=this.getToNode();return(o._oGroup===t._oGroup)&&o._isInCollapsedGroup();};
f.prototype._isBothMiddleArrow=function(){return this.getArrowOrientation()===a.Both&&this.getArrowPosition()===A.Middle;};
f.prototype._isBothArrow=function(){return this.getArrowOrientation()===a.Both;};
f.prototype._isOnScreen=function(b,g,t,h){var j=this.getCoordinates(),i,o;for(i=1;i<j.length;i++){o=E._isRectOnScreen(j[i-1].getX(),j[i].getX(),j[i-1].getY(),j[i].getY(),b,g,t,h);if(o){return true;}}return false;};
return f;});
sap.ui.predefine('sap/suite/ui/commons/networkgraph/Node',["sap/ui/thirdparty/jquery","sap/suite/ui/commons/library","./ElementBase","./ElementAttribute","sap/ui/core/IconPool","sap/ui/Device","sap/base/security/encodeXML","sap/base/security/sanitizeHTML","sap/m/CheckBox","sap/m/Text","./NodeRenderer"],function(q,l,E,a,I,D,b,s,C,T,N){"use strict";var S=l.networkgraph.NodeShape,A=l.networkgraph.ActionButtonPosition,H=l.networkgraph.HeaderCheckboxState;var c=32,d=5,M=80,f=4;var g={Circle:{WIDTH:96,HEIGHT:64},Box:{WIDTH:160,HEIGHT:32},Attributes:{LINE:16,OFFSET:8},ActionButtons:{RADIUS:13,MARGIN:8,OFFSET:4},Title:{LINESIZE:15,OFFSET:8,ICON_SIZE:16,INFO_BOX_SIZE:20,ICON_X_OFFSET:6,IMAGE_OFFSET_Y:6},Description:{LINESIZE:15},Image:{Box:16,Circle:32}};var h={EXPANDED:"Expanded",COLLAPSED:"Collapsed",PARTIAL:"Partial"};var j={EXPAND:"sys-add",COLLAPSE:"sys-minus",PARTIAL:"overlay"};var k=I.getIconInfo(j.EXPAND),m=I.getIconInfo(j.COLLAPSE),n=I.getIconInfo(j.PARTIAL);k=k&&k.content;m=m&&m.content;n=n&&n.content;var r=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");
var o=E.extend("sap.suite.ui.commons.networkgraph.Node",{
metadata:{library:"sap.suite.ui.commons",properties:{headerCheckBoxState:{type:"sap.suite.ui.commons.networkgraph.HeaderCheckboxState",group:"Misc",defaultValue:H.Hidden},collapsed:{type:"boolean",group:"Misc",defaultValue:false},selected:{type:"boolean",group:"Misc",defaultValue:false},group:{type:"string",group:"Misc",defaultValue:null},key:{type:"string",group:"Misc",defaultValue:null},shape:{type:"sap.suite.ui.commons.networkgraph.NodeShape",groups:"Behavior",defaultValue:S.Circle},icon:{type:"string",group:"Appearance",defaultValue:null},statusIcon:{type:"string",group:"Appearance",defaultValue:null},width:{type:"int",group:"Misc",defaultValue:undefined},height:{type:"int",group:"Misc",defaultValue:undefined},maxWidth:{type:"int",group:"Misc",defaultValue:undefined},x:{type:"float",group:"Misc",defaultValue:0},y:{type:"float",group:"Misc",defaultValue:0},showExpandButton:{type:"boolean",defaultValue:true},showActionLinksButton:{type:"boolean",defaultValue:true},showDetailButton:{type:"boolean",defaultValue:true},titleLineSize:{type:"int",defaultValue:1},descriptionLineSize:{type:"int",defaultValue:-1},iconSize:{type:"int",group:"Appearance",defaultValue:undefined},coreNodeSize:{type:"int",group:"Appearance",defaultValue:0},visible:{type:"boolean",group:"Appearance",defaultValue:true}},aggregations:{actionLinks:{type:"sap.ui.core.Control",multiple:true,singularName:"actionLink"},actionButtons:{type:"sap.suite.ui.commons.networkgraph.ActionButton",multiple:true,singularName:"actionButton"},image:{type:"sap.suite.ui.commons.networkgraph.NodeImage",multiple:false,singularName:"nodeImage"},content:{type:"sap.ui.core.Control",multiple:false},_checkBox:{type:"sap.m.CheckBox",multiple:false,visibility:"hidden"}},events:{headerCheckBoxPress:{parameters:{checked:"boolean"}},press:{},hover:{},collapseExpand:{}}},
onAfterRendering:function(){this._afterRenderingBase();}
});
o.prototype.aProcessRequiredProperties=["key","group"];
o.prototype.init=function(O){this._oExpandState=h.EXPANDED;this._oGroup=null;this._iWidth=0;this._iHeight=0;this._iLabelAttrWidth=0;this._iValueAttrWidth=0;this._aTitleLines=[[]];this._aDescriptionLines=[[]];this._bIsHidden=false;this._bActionButtonsRendered=false;this._iCircleSize=0;this._iGroupIndex=-1;this._clearChildren();};
o.prototype._clearChildren=function(){this.aChildren=[];this.aParents=[];this.aLines=[];this.aParentLines=[];};
o.prototype._afterRendering=function(){var $=this.$();if(this._isInCollapsedGroup()){return;}this._correctTitle("sapSuiteUiCommonsNetworkNodeTitle");this._setupEvents();if(this._bIsHidden){$.hide();}if(!this.getVisible()||(this._oGroup&&!this._oGroup.getVisible())){$.hide();}if(this._oExpandState===h.COLLAPSED){$.addClass("sapSuiteUiCommonsNetworkNodeCollapsed");}if(this._oExpandState===h.PARTIAL){$.addClass("sapSuiteUiCommonsNetworkNodePartialCollapsed");}this.$(this.getId()+"actionbuttons").detach();this._bActionButtonsRendered=false;this._removeFromInvalidatedControls();if(this._isHtml()&&!o.hasNativeLineClamp){this._setTextHeight($.find(".sapSuiteUiCommonsNetworkGraphDivNodeTitle"),this.getTitleLineSize());this._setTextHeight($.find(".sapSuiteUiCommonsNetworkGraphDivNodeDescription"),this.getDescriptionLineSize());}if(this.getSelected()){this.showActionButtons(true);}};
o.prototype._render=function(O){var p=this.getParent(),u=p&&p._isUseNodeHtml();if(this._isIgnored()){return"";}O=O||{};if(O.mapRender){if((this._oGroup&&!this._oGroup.getVisible())||!this.getVisible()){return"";}}return u?this._renderHtml(O):this._renderSvg(O);};
o.prototype._renderHtmlInfoIcon=function(e,O){e=e||{};O=O||{};var i="",p=this.getStatusIcon(),t=this._convertToStyle(e);i+="<div title=\""+r.getText("NETWORK_GRAPH_COLLAPSED")+"\" id=\""+this._getElementId(O.idSufix)+"-statusiconwrapper"+"\" "+t+" class=\"sapSuiteUiCommonsNetworkNodeDivInfoWrapper sapSuiteUiCommonsNetworkNodeInfoWrapper\" >";i+="<div class=\"sapSuiteUiCommonsNetworkNodeDivInfoIcon sapSuiteUiCommonsNetworkGraphDivNodeIcon\" >";i+=this._renderHtmlIcon(p||"sap-icon://hint");i+="</div>";i+="</div>";return i;};
o.prototype._renderHtmlText=function(t,i,e,p){var u=this._renderHtmlElement("div",{"-webkit-line-clamp":i===0?"":i,"color":p},{"class":"sapSuiteUiCommonsNetworkGraphDivNodeText "+(e||"")+((i===1)?" sapSuiteUiCommonsNetworkGraphDivTextBreakAll ":"")});u+=b(t);u+="</div>";return u;};
o.prototype._renderHtmlTitle=function(e){var t=this.getTitle(),i="";if(t){i+=this._renderHtmlText(t,this.getTitleLineSize(),"sapSuiteUiCommonsNetworkGraphDivNodeTitleText sapSuiteUiCommonsNetworkGraphDivNodeTitle",e);i+="<div style=\"clear:both\"></div>";}return i;};
o.prototype._renderHtmlDescription=function(e){var i=this.getDescriptionLineSize(),p=this.getDescription();if(p&&i!=-1){return this._renderHtmlText(p,i,"sapSuiteUiCommonsNetworkGraphDivNodeDescription",e);}return"";};
o.prototype._renderHtmlTitleAndDescription=function(t){return this._renderHtmlTitle()+this._renderHtmlDescription();};
o.prototype._renderHtmlAttributes=function(O){var e=this.getVisibleAttributes();if(!O.renderManager){return;}if(e.length>0){O.renderManager.openStart("div").class("sapSuiteUiCommonsNetworkGraphDivNodeAttributes").openEnd();e.forEach(function(i){this._renderClonedControl(O,i);}.bind(this));O.renderManager.close("div");}};
o.prototype._showDivActionButtons=function(e){var t=this,$=this.$("rightdivbuttons"),p=this.$("leftdivbuttons");if(e&&!this._bActionButtonsRendered){$.html("");p.html("");var B=0,u=0;if(this.getShowExpandButton()){this._appendActionButton({"class":"sapSuiteUiCommonsNetworkNodeActionCollapseIcon",icon:this._getExpandIcon(true),enable:this._hasVisibleChildren(),title:r.getText("NETWORK_GRAPH_EXPAND_COLLAPSE"),id:this._getDomId("actionCollapse"),click:this._expandClick.bind(this)},$);B++;}if(this.getShowDetailButton()){this._appendActionButton({icon:"sap-icon://menu",enable:this._hasDetailData()||this.getTitle(),id:this._getDomId("actionDetail"),title:r.getText("NETWORK_GRAPH_NODE_DETAILS"),click:function(v){this._detailClick(v.target);}.bind(this)},$);if(document.getElementById(this._getDomId("actionDetail"))){document.getElementById(this._getDomId("actionDetail")).setAttribute("aria-haspopup","dialog");}B++;}if(this.getShowActionLinksButton()){this._appendActionButton({icon:"sap-icon://chain-link",enable:this._hasActionLinks(),title:r.getText("NETWORK_GRAPH_NODE_LINKS"),id:this._getDomId("actionLinks"),click:function(v){this._linksClick(v.target);}.bind(this)},$);if(document.getElementById(this._getDomId("actionLinks"))){document.getElementById(this._getDomId("actionLinks")).setAttribute("aria-haspopup","dialog");}B++;}for(var i=0;(B+u)<(f*2)&&i<this.getActionButtons().length;i++){(function(v){var P=v.getPosition(),w=P===A.Right?B:u;if(w>=f){P=P===A.Left?A.Right:A.Left;}var x=P===A.Right?$:p;t._appendActionButton({icon:v.getIcon(),enable:v.getEnabled(),title:v.getTitle(),id:v.getId(),click:function(y){v.firePress({buttonElement:y.target});}},x);})(this.getActionButtons()[i]);}this._bActionButtonsRendered=true;}var F=e?"addClass":"removeClass";this.$().find(".sapSuiteUiCommonsNetworkGraphDivActionButtons")[F](this.VISIBLE_ACTIONS_BUTTONS_CLASS);};
o.prototype._getCorrectWidth=function(){var w=(this._iWidth||this.getWidth()),i="";if(!w){if(this.getMaxWidth()){i=this.getMaxWidth()+"px";w="";}else{w=g.Box.WIDTH;}}if(w!==""){w+="px";}return{width:w,maxWidth:i};};
o.prototype._renderHtml=function(O){var i=this._getElementId(O.idSufix),e=this._isCircle(),w=this._getCorrectWidth();this._renderHtmlElement("div",{width:e?w.width:"","max-width":e?w.maxWidth:"",top:!this._bMainRender&&this.getY()?(this.getY()+"px"):"",left:!this._bMainRender&&this.getX()?(this.getX()+"px"):"","min-width":M+"px"},{id:i,"data-sap-ui":i,"class":this._getNodeClass()},O.renderManager);this._processRenderManager(O.renderManager,this.renderContent(O));O.renderManager.close("div");};
o.prototype._renderHtmlContent=function(O){O=O||{};var i=this._getElementId(O.idSufix),e=this._iHeight||this.getHeight()||g.Circle.HEIGHT,p=this._isCircle();var P=function(){var x=this.getContent();if(x){O.renderManager.openStart("div",this.getId()+"-contentwrapper");O.renderManager.openEnd();this._renderClonedControl(O,x);O.renderManager.close("div");}else{this._processRenderManager(O.renderManager,this.renderItemContent(O));}}.bind(this);var F=this._getStatusStyle({"border-color":E.ColorType.Focus},false);if(p){this._iCircleSize=this._iCircleSize||e;var t=this._convertToStyle({width:this._iCircleSize+"px",height:this._iCircleSize+"px"},this._getStatusStyle({"border-color":E.ColorType.Border}),true);var u=this._getStatusStyle({"border-color":E.ColorType.Background},false);var B=this._getStatusStyle({"border-color":E.ColorType.Border,"background-color":this.getSelected()?E.ColorType.SelectedBackground:"","border-width":E.ColorType.BorderWidth,"border-style":E.ColorType.BorderStyle},false);O.renderManager.openStart("div",i+"-wrapperwithbuttons");O.renderManager.class("sapSuiteUiCommonsNetworkGraphDivInnerWrapper");this.applyStyles(O.renderManager,this.getStyleObject(t));O.renderManager.openEnd();O.renderManager.unsafeHtml(this.renderHtmlActionButtons(O));O.renderManager.openStart("div",i+"-wrapper");this.applyStyles(O.renderManager,this.getStyleObject(B));O.renderManager.class("sapSuiteUiCommonsNetworkGraphDivInner");O.renderManager.openEnd();O.renderManager.openStart("div");O.renderManager.class("sapSuiteUiCommonsNetworkDivCircleWrapper");O.renderManager.openEnd();O.renderManager.unsafeHtml(this._renderHtmlInfoIcon({},O));O.renderManager.openStart("div",i+"-focus");this.applyStyles(O.renderManager,this.getStyleObject(F));O.renderManager.class("sapSuiteUiCommonsNetworkDivFocus");O.renderManager.openEnd();O.renderManager.openStart("div",i+"-status");this.applyStyles(O.renderManager,this.getStyleObject(u));O.renderManager.class("sapSuiteUiCommonsNetworkDivCircleStatus");O.renderManager.openEnd();this._processRenderManager(O.renderManager,this.renderItemContent(O));O.renderManager.close("div");O.renderManager.close("div");O.renderManager.close("div");O.renderManager.close("div");O.renderManager.close("div");O.renderManager.unsafeHtml(this._renderHtmlTitleAndDescription());}else{var w=this._getCorrectWidth();var t=this._convertToStyle({width:w.width,"max-width":w.maxWidth?w.maxWidth:"inherit"},this._getStatusStyle({"border-color":E.ColorType.Border,"background-color":this.getSelected()?E.ColorType.SelectedBackground:"","border-width":E.ColorType.BorderWidth,"border-style":E.ColorType.BorderStyle}),true);O.renderManager.unsafeHtml(this.renderHtmlActionButtons(O));O.renderManager.openStart("div",i+"-wrapper");this.applyStyles(O.renderManager,this.getStyleObject(t));O.renderManager.class("sapSuiteUiCommonsNetworkGraphDivInner").openEnd();O.renderManager.openStart("div",i+"-focus");this.applyStyles(O.renderManager,this.getStyleObject(F));O.renderManager.class("sapSuiteUiCommonsNetworkDivFocus").openEnd();O.renderManager.close("div");var u=this._getStatusStyle({"background-color":E.ColorType.Background},false);var v=this._getColor(this.getSelected()?E.ColorType.Content:E.ColorType.HeaderContent);O.renderManager.openStart("div",i+"-header");this.applyStyles(O.renderManager,this.getStyleObject(u));O.renderManager.class("sapSuiteUiCommonsNetworkGraphDivHeader").class("sapSuiteUiCommonsNetworkGraphDivHeaderColor");if(!this._hasAdditionalContent()){O.renderManager.class("sapSuiteUiCommonsNetworkGraphDivHeaderOnly");}O.renderManager.openEnd();if(this._showHeaderCheckBox()){this._renderClonedControl(O,this._getHeaderCheckbox());}O.renderManager.unsafeHtml(this._renderHtmlTitleIcon("sapSuiteUiCommonsNetworkGraphDivNodeIconTitle"));O.renderManager.unsafeHtml(this._renderHtmlTitle(v));O.renderManager.close("div");P();O.renderManager.close("div");O.renderManager.unsafeHtml(this._renderHtmlInfoIcon({},O));}};
o.prototype._getHeaderCheckbox=function(){var e=this.getAggregation("_checkBox"),t=this;if(!e){e=new C(this.getId()+"-checkbox").addStyleClass("sapSuiteUiCommonsNetworkGraphHeaderCheckboxInner");e.addEventDelegate({"onAfterRendering":function(){e.$().mousedown(function(i){var p=!e.getSelected();e.setSelected(p);t.fireHeaderCheckBoxPress({checked:p});i.stopPropagation();});}});this.setAggregation("_checkBox",e,true);}return e;};
o.prototype._renderHtmlTitleIcon=function(e){var i=this.getIcon(),p=this.getImage(),t=this._getStatusStyle({"color":this._isBox()?E.ColorType.HeaderContent:E.ColorType.Content},true),F=this.getIconSize()?"style=\"font-size:"+this.getIconSize()+"px\"":"";var u="";e=(e||"")+" sapSuiteUiCommonsNetworkGraphDivNodeTitleText sapSuiteUiCommonsNetworkGraphDivNodeIcon";if(p){var v=this._getImageSize();u=this._renderHtmlElement("img",{width:v.width+"px",height:v.height+"px"},{"src":b(p.getSrc()),"class":"sapSuiteUiCommonsNetworkGraphDivNodeImage"});}else if(i){u="<div "+t+" class=\""+e+"\">"+this._renderHtmlIcon(i,"","",F)+"</div>";}return u;};
o.prototype._renderHtmlBoxContent=function(O){var e="",i=this._hasAdditionalContent(),p=this._getElementId(O.idSufix);if(i){O.renderManager.openStart("div",p+"-additionalwarpper");O.renderManager.class("sapSuiteUiCommonsNetworkGraphDivAdditionalContent").openEnd();var t=this._getColor(E.ColorType.Content);e+=this._renderHtmlDescription(t);this._processRenderManager(O.renderManager,e);e="";this._renderHtmlAttributes(O);O.renderManager.close("div");}return e;};
o.prototype._renderHtmlCircleContent=function(O){return this._renderHtmlTitleIcon("sapSuiteUiCommonsNetworkGraphDivNodeCircleIcon");};
o.prototype._renderSvg=function(O){var i=this._getElementId(O.idSufix);var e=this._renderControl("g",{id:i,"data-sap-ui":i,nodeid:b(this.getKey()),"class":this._getNodeClass()},false);e+=this._renderControl("g",{id:i+"-wrapper","class":"sapSuiteUiCommonsNetworkNodeShape"},false);e+=this._renderContent(O);e+="</g>";e+="</g>";return e;};
o.prototype._renderSvgContent=function(O){var e=this._isBox()?this._renderBox(O):this._renderCircle(O);var i=this.getParent()._bIsRtl,x,y;if(this._isCircle()){var p=this._iCircleSize/8,t=this._iCircleSize/5.3;x=i?this._getCirclePosition().x+this._iCircleSize-p:this._getCirclePosition().x+p;y=this.getY()+t;}else{x=this.getX();y=this.getY();}e+=this.renderStatusIcon({x:x-this.getX(),y:y-this.getY()});return e;};
o.prototype._renderContent=function(O){return this.renderContent(O);};
o.prototype._renderCircleContent=function(){var i=this._iCircleSize,e=this.getParent()._bIsRtl,p=this.getImage(),t,x=this.getX(),y=this.getY(),u="";if(this._displayImage(p)){t=this._getImageSize();u+=this._renderControl("image",{"xlink:href":b(p.getSrc()),x:x+this._iWidth/2-t.width/2,y:y+i/2-t.height/2,width:t.width,height:t.height});}else if(this.getIcon()){u+=this._renderIcon({attributes:{"class":"sapSuiteUiCommonsNetworkGraphIcon sapSuiteUiCommonsNetworkCircleNodeIcon sapSuiteUiCommonsNetworkStatusText",style:(this.getIconSize()?("font-size:"+this.getIconSize()+"px;"):"")+this._getStatusStyle({fill:E.ColorType.Content}),x:x+this._iWidth/2,y:y+i/2},icon:this.getIcon(),height:this.getIconSize()?this.getIconSize()-2:22});}if(this.getTitle()){if(!this._aTitleLines||this._aTitleLines.length===1){u+=this._renderClipPath({id:this.getId()+"-title-clip",x:x,y:y+i+g.Title.OFFSET-10,height:g.Title.LINESIZE*2});u+=this._renderTitle({"class":"sapSuiteUiCommonsNetworkNodeTitle sapSuiteUiCommonsNetworkNodeText",x:x+this._iWidth/2,y:y+i+g.Title.OFFSET,title:s(this.getTitle()),maxWidth:this._iWidth-5});}else{u+=this._renderMultilineTitle({x:x+this._iWidth/2,y:y+i+g.Title.OFFSET*2});}}if(this._displayDescription()){u+=this._renderDescription({x:e?x+this._iWidth-g.Title.OFFSET:x+g.Title.OFFSET,y:y+this._getTitleHeight()+i+g.Title.OFFSET*2+g.Title.OFFSET/2});}return u;};
o.prototype._renderCircle=function(){var e="",x=this.getX(),y=this.getY(),i=6,F=2,p=this._iCircleSize;e+=this._renderControl("circle",{id:this.getId()+"-innerBox",cx:x+this._iWidth/2,cy:y+p/2,style:this._getStatusStyle({stroke:E.ColorType.Border}),r:p/2,"class":"sapSuiteUiCommonsNetworkInnerCircle"});e+=this._renderControl("circle",{id:this.getId()+"-statusCircle",cx:x+this._iWidth/2,cy:y+p/2,style:this._getStatusStyle({stroke:E.ColorType.Background}),r:p/2-i,"class":"sapSuiteUiCommonsNetworkInnerCircleStatus"});e+=this._renderControl("circle",{id:this.getId()+"-focusCircle",cx:x+this._iWidth/2,cy:y+p/2,style:this._getStatusStyle({stroke:E.ColorType.Focus}),r:p/2-F,"class":"sapSuiteUiCommonsNetworkCircleFocus"});e+=this.renderItemContent();return e;};
o.prototype._renderBoxContent=function(O){var e=c/2,t=g.Title.ICON_X_OFFSET,i=this.getParent()._bIsRtl,p=this.getImage(),y=this.getY(),x=this.getX(),u,v=this._getImageSize(),w="";if(this._displayImage(p)){v=this._getImageSize();w+=this._renderControl("image",{"xlink:href":b(p.getSrc()),x:i?x+this._iWidth-g.Title.ICON_X_OFFSET-v.width:x+g.Title.ICON_X_OFFSET,y:y+g.Title.IMAGE_OFFSET_Y,width:v.width,height:v.height});t+=v.width+g.Title.ICON_X_OFFSET;}else if(this.getIcon()){w+=this._renderIcon({attributes:{style:this._getStatusStyle({fill:E.ColorType.Content}),"class":"sapSuiteUiCommonsNetworkGraphIcon sapSuiteUiCommonsNetworkNodeTitleIcon sapSuiteUiCommonsNetworkStatusText",x:i?x+this._iWidth-g.Title.ICON_X_OFFSET:x+g.Title.ICON_X_OFFSET,y:y+e},icon:this.getIcon(),height:g.Title.LINESIZE});t+=g.Title.ICON_SIZE+g.Title.ICON_X_OFFSET;}if(this.getTitle()){u=this._iWidth-t-d;if(u>0){if(!this._aTitleLines||this._aTitleLines.length===1){w+=this._renderClipPath({id:this.getId()+"-title-clip",x:x,y:y,height:c});w+=this._renderTitle({"class":"sapSuiteUiCommonsNetworkNodeTitle sapSuiteUiCommonsNetworkNodeText sapSuiteUiCommonsNetworkStatusText",style:this._getStatusStyle({fill:E.ColorType.Content}),x:i?x+this._iWidth-t:x+t,y:y+e,maxWidth:u,title:s(this.getTitle())});}else{w+=this._renderMultilineTitle({x:i?x+this._iWidth-t:x+t,y:y+g.Title.OFFSET*2});}}}if(this._displayDescription()){w+=this._renderDescription({x:i?x+this._iWidth-g.Title.OFFSET:x+g.Title.OFFSET-g.Title.OFFSET/3,y:y+this._getTitleHeight()+(this._hasMultiLineTitle()?(g.Title.OFFSET*2+g.Title.OFFSET/2):g.Title.OFFSET*4)});}if(this._displayAttributes()){w+=O.sizeDetermination?this._renderAttributesForSize():this._renderAttributes({y:this.getY()+this._getDescriptionHeight()+this._getTitleHeight()+g.Title.OFFSET+(!this._hasMultiLineTitle()?g.Attributes.OFFSET:0)});}return w;};
o.prototype._renderBox=function(O){var d=6,F=4,t=(this._iTitleHeight||this._getTitleHeight())+d,R=3;var y=this.getY(),x=this.getX();var e=this._renderControl("rect",{id:this.getId()+"-innerBox",x:x,y:y,style:this._getStatusStyle({stroke:E.ColorType.Border}),"class":"sapSuiteUiCommonsNetworkInnerRect",rx:R,ry:R,width:this._iWidth,height:this._iHeight,"pointer-events":"fill"});var i=this._iHeight===c;e+=this._renderRoundRect({id:this.getId()+"-innerStatusBox",x:x,y:y,style:this._getStatusStyle({fill:E.ColorType.Background}),"class":"sapSuiteUiCommonsNetworkNodeBoxStatus",topRight:R,topLeft:R,bottomRight:i?R:0,bottomLeft:i?R:0,width:this._iWidth,height:Math.max(t,c),"pointer-events":"fill"});e+=this._renderControl("rect",{id:this.getId()+"-focusCircle",x:x+F,y:y+F,"class":"sapSuiteUiCommonsNetworkBoxFocus",style:this._getStatusStyle({stroke:E.ColorType.Focus}),rx:5,ry:5,width:this._iWidth-F*2,height:this._iHeight-F*2});e+=this.renderItemContent(O);return e;};
o.prototype._renderInfoIcon=function(x,y,i,F){var e=this.getStatusIcon(),p=e?"sapSuiteUiCommonsNetworkNodeInfoWrapperCustomIcon":"",t="<g id=\""+this.getId()+"-statusiconwrapper"+"\" class=\"sapSuiteUiCommonsNetworkNodeInfoWrapper "+p+"\">";t+=this._renderControl("circle",{"class":"sapSuiteUiCommonsNetworkNodeInfoBox",cx:x,cy:y,r:i||g.Title.INFO_BOX_SIZE/2},false);t+="<title>"+r.getText("NETWORK_GRAPH_COLLAPSED")+"</title>";t+="</circle>";t+=this._renderIcon({attributes:{id:this.getId()+"-statusicon","class":"sapSuiteUiCommonsNetworkNodeInfoIcon sapSuiteUiCommonsNetworkGraphIcon",x:x+g.Title.INFO_BOX_SIZE/2-10,y:y,style:F?("font-size:"+F):""},icon:e||"sap-icon://hint",height:g.Title.INFO_BOX_SIZE/2+2.5});t+="</g>";return t;};
o.prototype._getNodeClass=function(){var e=this.getSelected()?this.SELECT_CLASS:"",i=this._hasCustomStatus()?" sapSuiteUiCommonsNetworkNodeCustomStatus ":"",p="";if(this.aCustomStyleClasses){p=this.aCustomStyleClasses.join(" ");}return(this.getParent()._isUseNodeHtml()?"sapSuiteUiCommonsNetworkGraphDivNode ":"sapSuiteUiCommonsNetworkNode ")+e+i+(this._isBox()?" sapSuiteUiCommonsNetworkBox ":" sapSuiteUiCommonsNetworkNodeCircle ")+this._getStatusClass()+p;};
o.prototype._renderAttributesForSize=function(){var L="",v="";this.getVisibleAttributes().forEach(function(i){L+=this._renderText({attributes:{"class":"sapSuiteUiCommonsNetworkGraphAttribute",x:this.getX(),y:this.getY()},text:i.getLabel()});v+=this._renderText({attributes:{"class":"sapSuiteUiCommonsNetworkGraphAttribute",x:this.getX(),y:this.getY()},text:i.getValue()});},this);L="<g id=\""+this.getId()+"-attrLabel\">"+L+"</g>";v="<g id=\""+this.getId()+"-attrValue\">"+v+"</g>";return L+v;};
o.prototype._getAttributeColor=function(i,e,t){var p=e+"Status",u=i["get"+p]()||this.getStatus();return this._getColor(t,u);};
o.prototype._getAttributeColorString=function(i,e,t){var p=this._getAttributeColor(i,e,t);return p?"fill:"+p:"";};
o.prototype._renderAttributes=function(p){p=p||{};var P=2,B=6,e=12;var t=this.getParent()._bIsRtl,L=t?this.getX()+this._iWidth-B:this.getX()+B,u=this._iLabelAttrWidth?this._iLabelAttrWidth:this._iWidth/2-e,v=t?L-u-e:L+u+e,V=t?v-this.getX()-B:(this.getX()+this._iWidth)-v-B;var w=this._renderControl("g",{"clip-path":"url(#"+this.getId()+"-clip-attr-value)",id:this.getId()+"-attrValue"},false),x=this._renderControl("g",{"clip-path":"url(#"+this.getId()+"-clip-attr-label)",id:this.getId()+"-attrLabel"},false),y=p.y,z=this._renderClipPath({id:this.getId()+"-clip-attr-label",x:t?L-u-B+P:L-P,y:y,width:P*2+(t?u+B:u)});z+=this._renderClipPath({id:this.getId()+"-clip-attr-value",x:t?this.getX()+B+P:v-P,y:y,width:P*2+(t?V+B:V)});this.getVisibleAttributes().forEach(function(F,i){var Y=y+g.Attributes.LINE*(i+1);x+=this._renderText({attributes:{style:this._getAttributeColorString(F,a.Type.Label,E.ColorType.Content),"class":"sapSuiteUiCommonsNetworkGraphAttribute sapSuiteUiCommonsNetworkStatusText",x:L,id:F.getId()+"-label",y:Y},text:F.getLabel()});w+=this._renderText({attributes:{style:this._getAttributeColorString(F,a.Type.Value,E.ColorType.Content),"class":"sapSuiteUiCommonsNetworkGraphAttribute sapSuiteUiCommonsNetworkGraphAttributeValue sapSuiteUiCommonsNetworkStatusText",x:v,y:Y,id:F.getId()+"-value"},text:F.getValue()});},this);w+="</g>";x+="</g>";return z+x+w;};
o.prototype._detailClick=function(O){O=O||this;O.useClientRect=true;this.getParent()._tooltip.openDetail({item:this,opener:O});};
o.prototype._linksClick=function(O){O=O||this;this.getParent()._tooltip.openLink({item:this,opener:O});};
o.prototype._expandClick=function(){var e=this.fireEvent("collapseExpand",{},true);if(e){this.setCollapsed(this._oExpandState!==h.COLLAPSED);}};
o.prototype._setupMaxWidth=function(){var i=this.getMaxWidth();if(i){this._iWidth=i;}};
o.prototype._setTextHeight=function($,i){if($[0]&&i>0){var e=this.$().find(".sapSuiteUiCommonsNetworkGraphDivNodeIcon.sapSuiteUiCommonsNetworkGraphDivNodeIconTitle");e.hide();var p=$.height();$.css("white-space","nowrap");var t=$.height();if(t!==0&&p!==0){$.height(Math.min(p,i*t));}$.css("white-space","");e.show();}};
o.prototype._applyMaxWidth=function(){var O=30,d=10;var i,$,e,v=0,L=0,p=0,t,u=this.getMaxWidth();if(this._oGroup&&this._oGroup.getCollapsed()){return;}if(!this.getWidth()&&this.getMaxWidth()){$=this.$("attrLabel");e=this.$("attrValue");if($[0]){L=$[0].getBBox().width;}if(e[0]){v=e[0].getBBox().width;}p=v+L+O;i=Math.max(this.$()[0].getBBox().width+d,p);this._iWidth=Math.max(Math.min(i,u),80);if((v&&L)){t=Math.max(L,v);if(t*2+O/2<this._iWidth){return;}if(p>this._iWidth){if(v<u/2){this._iLabelAttrWidth=this._iWidth-v-O;}if(L<this._iWidth/2){this._iLabelAttrWidth=L+O/4;}}else{this._iLabelAttrWidth=this._iWidth-v-O;}}}};
o.prototype._resetDimensions=function(){this._iWidth=0;this._iHeight=0;this._iCircleSize=0;this._iTitleHeight=0;};
o.prototype._setupDivDimensions=function(){var $=this.$();this._iWidth=$.width();this._iHeight=$.height();};
o.prototype._setupWidthAndHeight=function(R){var t=this._isBox()?"Box":"Circle",i=this._getTitleHeight(),e=this.getTitle()||this._hasDetailData()?g.Title.LINESIZE:0,p=this._getDescriptionHeight();p=p?p+5:0;var G=function(){var v=this._iHeight||this.getHeight();if(this._isBox()&&!v){v=p+(this._hasMultiLineTitle()?i+g.Title.OFFSET:Math.max(i+e,g.Box.HEIGHT));if(this._displayAttributes()){v+=this.getVisibleAttributes().length*g.Attributes.LINE+g.Attributes.OFFSET;}}if(this._isCircle()&&!this._iHeight){v=v?v:g[t].HEIGHT;this._iCircleSize=v;v+=i+p;}return Math.max(v,30);}.bind(this);var u=function(){var w=Math.max(this._iWidth||this.getWidth()||g[t].WIDTH,30);if(this._isCircle()&&w<this._iCircleSize){w=this._iCircleSize;}return w;}.bind(this);this._iHeight=G();this._iWidth=u();};
o.prototype._getTitleHeight=function(){var i=0,e=this._getImageSize();if(this._hasMultiLineTitle()){i=(((this.getTitleLineSize()>0)?Math.min(this._aTitleLines.length,this.getTitleLineSize()):this._aTitleLines.length))*g.Title.LINESIZE;}else{i=(this._isBox()||this.getTitle())?g.Title.LINESIZE:0;}return Math.max(e.height,i);};
o.prototype._getDescriptionHeight=function(){var i=this.getDescriptionLineSize();if(i===-1||!this._aDescriptionLines||!this.getDescription()){return 0;}return(i>0?Math.min(i,this._aDescriptionLines.length):this._aDescriptionLines.length)*g.Description.LINESIZE;};
o.prototype._setupEvents=function(){var $=this.$("wrapper");$.unbind("mousedown");$.unbind("mouseover");$.unbind("mouseout");$.mousedown(function(e){this._mouseDown(e.ctrlKey);e.preventDefault();}.bind(this));$.mouseover(function(e){this._mouseOver();}.bind(this));$.mouseout(function(e){this._mouseOut();}.bind(this));};
o.prototype._mouseOut=function(){this.$().removeClass(this.HIGHLIGHT_CLASS);if(!this.getSelected()){this._setStatusColors("");}};
o.prototype._mouseOver=function(){var e=this.fireEvent("hover",{},true);if(e){if(!this.getSelected()){this._setStatusColors("Hover");}this.$().addClass(this.HIGHLIGHT_CLASS);}};
o.prototype._mouseDown=function(i){var e=this.fireEvent("press",{},true);this.getParent()._selectNode({element:this,forceFocus:true,renderActionButtons:e&&!this.getSelected(),preventDeselect:i});if(!this.getSelected()){this.$().addClass(this.HIGHLIGHT_CLASS);this._setStatusColors("Hover");}};
o.prototype._deselect=function(){var $=this.$("innerBox");$.css("stroke",this._getColor(E.ColorType.Border));$.css("fill",this._getColor(E.ColorType.Background));};
o.prototype._getExpandIcon=function(R){switch(this._oExpandState){case h.PARTIAL:return R?j.PARTIAL:n;case h.EXPANDED:return R?j.COLLAPSE:m;case h.COLLAPSED:return R?j.EXPAND:k;default:return R?j.EXPAND:k;}};
o.prototype._createLineText=function(t,w,e,i){var L=[[]],p=0,R,W,u,v,x,y,z=this._createElement("tspan");if(!t||w<0){return L;}v=t.split(/\s+/).reverse();e.appendChild(z);while(v.length>0){W=v.pop();if(W){u=L[p];u.push(W);z.textContent=L[p].join(" ");if(z.getComputedTextLength()>w){if(u.length>1&&i!==1){v.push(u.pop());}if(u.length===1){y=this._createText(e,{text:u[0],width:w,dots:false});if(y){x=z.textContent;u.pop();u.push(x);R=W.substring(x.length);v.push(R);}}p++;if(i>0&&p>=i){break;}L[p]=[];}}}if(i>0&&v.length>0){L[L.length-1].push("...");}if(L.length>0){y=this._createText(e,{text:L[L.length-1].join(" "),width:w,dots:true});if(y){L[i-1]=[z.textContent];}}return L;};
o.prototype._createDescription=function(){var t,w=this._iWidth-g.Title.OFFSET,$=this.$();if(this._displayDescription()&&$[0]){t=this._createElement("text");t.setAttribute("class","sapSuiteUiCommonsNetworkNodeDescription");$[0].appendChild(t);this._aDescriptionLines=this._createLineText(this.getDescription(),w,t,this.getDescriptionLineSize());}};
o.prototype._createMultilineTitle=function(){var G=function(){if(this._isBox()){if(this._displayImage()){return this._iWidth-this._getImageSize().width-g.Title.ICON_X_OFFSET*2;}if(this.getIcon()){return this._iWidth-g.Title.ICON_SIZE-g.Title.ICON_X_OFFSET*2;}return this._iWidth-g.Title.OFFSET*2;}return this._iWidth;}.bind(this);var t,w=G(),$=this.$();if(this.getTitleLineSize()!==1&&$[0]&&w>0){t=this._createElement("text");t.setAttribute("class","sapSuiteUiCommonsNetworkNodeTitle sapSuiteUiCommonsNetworkNodeMultipleLineTitle");$[0].appendChild(t);this._aTitleLines=this._createLineText(this.getTitle(),w,t,this.getTitleLineSize());}};
o.prototype.getFocusDomRef=function(){return this.getDomRef("wrapper");};
o.prototype._renderMultilineText=function(e){var p="",u=this._isBox()&&e.useCustomstyle;if(!e.lines){return"";}for(var i=0;i<e.lines.length;i++){p+=this._renderText({attributes:{style:u?this._getStatusStyle({fill:E.ColorType.Content}):"","class":e.class+(u?" sapSuiteUiCommonsNetworkStatusText ":""),x:e.x,y:e.y+(i*e.lineSize)},close:false});p+=e.lines[i].join(" ");p+="</text>";}return p;};
o.prototype._renderDescription=function(e){e.class=" sapSuiteUiCommonsNetworkNodeTitle sapSuiteUiCommonsNetworkNodeMultipleLineTitle";return this._renderMultilineText({lines:this._aDescriptionLines,maxLineSize:this.getDescriptionLineSize(),lineSize:g.Description.LINESIZE,"class":" sapSuiteUiCommonsNetworkNodeDescription ",x:e.x,y:e.y});};
o.prototype._sanitizeTitleLines=function(L){for(var i=0;i<L.length;i++){L[i]=s(L[i]);}return L;};
o.prototype._renderMultilineTitle=function(e){var i=this._sanitizeTitleLines(this._aTitleLines);return this._renderMultilineText({useCustomStyle:true,lines:i,maxLineSize:this.getTitleLineSize(),lineSize:g.Title.LINESIZE,"class":" sapSuiteUiCommonsNetworkNodeTitle sapSuiteUiCommonsNetworkNodeMultipleLineTitle",x:e.x,y:e.y,trim:this._aTitleLines.length>this.getTitleLineSize()&&this.getTitleLineSize()!==0});};
o.prototype._processHideShowParents=function(e,R,i){var p=this._oGroup&&this._oGroup.getCollapsed();var t=function(u){if(u._bIsHidden){return;}var v=false,w;if(u.getKey()!==R){if(u.aChildren.length>0){w=u.aChildren[0]._bIsHidden;u.aChildren.forEach(function(x){if(w!==x._bIsHidden){v=true;}});u._oExpandState=v?h.PARTIAL:w?h.COLLAPSED:h.EXPANDED;if(u._oExpandState===h.COLLAPSED){u.$().addClass("sapSuiteUiCommonsNetworkNodeCollapsed");}else{u.$().removeClass("sapSuiteUiCommonsNetworkNodeCollapsed");}if(u._oExpandState===h.PARTIAL){u.$().addClass("sapSuiteUiCommonsNetworkNodePartialCollapsed");}else{u.$().removeClass("sapSuiteUiCommonsNetworkNodePartialCollapsed");}}}};t(this);this.aParents.forEach(function(u){if(!i[u.getKey()]){t(u);}});if(p){if(this._oGroup._bNeedParentProcessing){this._oGroup.aNodes.forEach(function(G){G.aParents.forEach(function(P){if(!i[P.getKey()]){t(P);}});});this._oGroup._bNeedParentProcessing=false;}}};
o.prototype._getAllChildren=function(e,R,i){var p=function(K){if(!i[K]){i[K]=this;return true;}return false;}.bind(this);if(R===this.getKey()){return;}if(this._bIsHidden===e){return;}if(!p(this.getKey())){return;}if(this._oGroup&&this._oGroup.getCollapsed()){this._oGroup.aNodes.forEach(function(t){t._getAllChildren(e,R,i);});}if(this._oExpandState!==h.COLLAPSED){this.aChildren.forEach(function(t){t._getAllChildren(e,R,i);});}};
o.prototype._hideShow=function(e){var F=e?"hide":"show",i;this._bIsHidden=e;this.aLines.forEach(function(L){L._hideShow(e);});this.aParentLines.forEach(function(L){L._hideShow(e);});if(this._oGroup&&!this._oGroup._bIsSwimLane){if(this._oGroup.getCollapsed()){this._oGroup._hideShow(e);}else{i=this._oGroup._hasVisibleNodes();if((i&&!e)||(!i&&e)){this._oGroup._hideShow(e);}}}if(this._isInCollapsedGroup()&&this._isHtml()){return;}if(this.$()){this.$()[F]();}};
o.prototype._setActionButtonFocus=function(i,F){this.$().removeClass(this.FOCUS_CLASS);this.$().find("."+this.FOCUS_CLASS).removeClass(this.FOCUS_CLASS);var e=F?"addClass":"removeClass";q(i)[e](this.FOCUS_CLASS);};
o.prototype._getActionButtonTitle=function(i){if(this.getParent().getRenderType()==="Html"){var F=q(i).attr("title");return r.getText("NETWORK_GRAPH_ACCESSIBILITY_ACTION_BUTTON")+(F?" "+F:"");}else{var e=q(i).find("title")[0];return r.getText("NETWORK_GRAPH_ACCESSIBILITY_ACTION_BUTTON")+(e?" "+e.textContent:"");}};
o.prototype._getAccessibilityLabel=function(){var L=r.getText("NETWORK_GRAPH_NODE")+" "+this.getTitle();if(this._isBox()){this.getVisibleAttributes().forEach(function(e){L+=" "+e.getLabel()+" "+e.getValue();});}return L;};
o.prototype._setStatusColors=function(t){var e=function(F,G){if(G&&F){var J=this._getColor(E.ColorType[t+"Content"],G),K=u?"color":"fill";q(F).css(K,J||i);}}.bind(this);var u=this.getParent()&&this.getParent()._isUseNodeHtml();if(this._hasCustomStatus()){var i=this._getColor(E.ColorType[t+"Content"]),B=this._getColor(E.ColorType[t+"Background"]),p=this._getColor(E.ColorType[t+"Border"]);var v=(t==="Selected"||t==="Hover");if(!u){var $=this.$("innerBox"),w=x?this.$("statusCircle"):this.$("innerStatusBox"),x=this._isCircle();w.css(x?"stroke":"fill",v?"none":B);$.css("fill",v?B:"");$.css("stroke",p);this.$().find(".sapSuiteUiCommonsNetworkStatusText").css("fill",i);this.$("focusCircle").css("stroke",this._getColor(E.ColorType[t+"Focus"]));}else{var y=this.$("wrapper"),z=this.$().find(".sapSuiteUiCommonsNetworkGraphDivNodeTitleText");y.css("border-color",p);this.$("focus").css("border-color",this._getColor(E.ColorType[t+"Focus"]));if(this._isBox()){this.$().find(".sapSuiteUiCommonsNetworkGraphDivNodeText").css("color",i);this.$("header").css("background-color",v&&!B?"":B);z.css("color",v?i:this._getColor(E.ColorType.HeaderContent));y.css("background-color",v&&B?B:"");}else{this.$("status").css("border-color",B);y.css("background-color",v&&B?B:"");this.$().find(".sapSuiteUiCommonsNetworkGraphDivNodeCircleIcon").css("color",i);}}}this.getAttributes().forEach(function(F){if(F&&F.getVisible()){var L=F.getLabelStatus(),V=F.getValueStatus();if(L){e(F.$("icon"),L);e(F.$("label"),L);}if(V){e(F.$("value"),V);}}});};
o.prototype._setNodeOpacity=function(e){if(this._isCircle()){this.$("wrapper").css("opacity",e?0.3:"");this.$().find(".sapSuiteUiCommonsNetworkGraphDivNodeTitleText").css("opacity",e?0.3:"");if(e){this.$("wrapperwithbuttons").append(q('<div></div>',{"class":"sapSuiteUiCommonsNetworkGraphDivInnerCloned sapSuiteUiCommonsNetworkGraphDivInner"}));}else{this.$("wrapperwithbuttons").find(".sapSuiteUiCommonsNetworkGraphDivInnerCloned").detach();}return;}this.$().css("opacity",e?0.3:"");};
o.prototype._getContentRect=function(){var e=this._getCirclePosition(),i=this._isCircle();var x=i?e.x:this.getX(),y=i?e.y:this.getY(),p=i?this._iCircleSize:this._iHeight,w=i?this._iCircleSize:this._iWidth;return{p1:{x:x,y:y},p2:{x:x+w,y:y+p}};};
o.prototype._setFocus=function(F){E.prototype._setFocus.apply(this,arguments);var t=F?"Selected":"";this.$("focus").css("border-color",this._getColor(E.ColorType[t+"Focus"]));};
o.prototype.getHeaderCheckbox=function(){return this._getHeaderCheckbox();};
o.prototype.computeTextDimensions=function(i){var p=this.getDomRef(),t,u,v;if(p){t=this._createElement("text",i.attributes);p.appendChild(t);try{u=this._createLineText(i.text,i.width,t,i.maxLines);v=t.getBBox().height;}catch(e){}q(t).detach();return{text:u,lineHeight:v};}};
o.prototype.renderText=function(e){var p=16;var t="",L=e.lines;if(!L){if(e.text){L=[e.text.split(" ")];}else{return"";}}for(var i=0;i<L.length;i++){t+=this._renderText({attributes:Object.assign({x:e.x+this.getX(),y:this.getY()+e.y+(i*(e.lineSize||p))},e.attributes),close:false});t+=L[i].join(" ");t+="</text>";}return t;};
o.prototype.renderIcon=function(e){e.attributes=e.attributes||{};Object.assign(e.attributes,{"font-family":"SAP-icons"});e.attributes.x=this.getX()+(e.x||0);e.attributes.y=this.getY()+(e.y||0);return this._renderIcon({attributes:e.attributes,icon:e.icon});};
o.prototype.renderHtmlIcon=function(i){return this._renderHtmlIcon(i,"sapSuiteUiCommonsNetworkGraphDivNodeIcon");};
o.prototype.renderHtmlActionButtons=function(O){O=O||{};var R=this._getElementId(O.idSufix)+"-rightdivbuttons",L=this._getElementId(O.idSufix)+"-leftdivbuttons";var e="<div id=\""+R+"\" class=\"sapSuiteUiCommonsNetworkGraphDivActionButtons sapSuiteUiCommonsNetworkGraphDivActionButtonsRight\"></div>",i="<div id=\""+L+"\" class=\"sapSuiteUiCommonsNetworkGraphDivActionButtons sapSuiteUiCommonsNetworkGraphDivActionButtonsLeft\"></div>";return i+e;};
o.prototype.renderHtmlInfoIcon=function(e){return this._renderHtmlInfoIcon(e);};
o.prototype.renderContent=function(O){return this._isHtml()?this._renderHtmlContent(O):this._renderSvgContent(O);};
o.prototype.renderItemContent=function(O){if(this._isHtml()){return this._isBox()?this._renderHtmlBoxContent(O):this._renderHtmlCircleContent(O);}return this._isBox()?this._renderBoxContent(O):this._renderCircleContent(O);};
o.prototype.calculateSizes=function(){this._setupMaxWidth();this._createMultilineTitle();this._createDescription();this._resetDimensions();this._applyMaxWidth();};
o.prototype.renderElement=function(e,i,p){return this._renderControl(e,i,p);};
o.prototype.renderStatusIcon=function(p){return this._renderInfoIcon(this.getX()+p.x,this.getY()+p.y,p.size,p.iconSize);};
o.prototype.setSize=function(e){if(e){if(e.width){this._iWidth=e.width;}if(e.height){this._iHeight=e.height;}if(e.titleHeight){this._iTitleHeight=e.titleHeight;}}};
o.prototype.hasVisibleActionButtons=function(){return this.$("actionButtons").hasClass(this.VISIBLE_ACTIONS_BUTTONS_CLASS)||this.$().find(".sapSuiteUiCommonsNetworkGraphDivActionButtons").hasClass(this.VISIBLE_ACTIONS_BUTTONS_CLASS);};
o.prototype.getEnabledActionButtons=function(){return this.$().find(".sapSuiteUiCommonsNetworkNodeActionButton, .sapSuiteUiCommonsNetworkGraphDivActionButton:not(.sapSuiteUiCommonsNetworkGraphDivActionButtonDisabled)").parent().toArray();};
o.prototype.showActionButtons=function(e){var R,p,t=this,B=0,u=0,v=this.getParent()._bIsRtl,w,x,y,z,F,G,L;if(this._isHtml()){this._showDivActionButtons(e);return;}var J=function(){var y=this.getParent()._bIsRtl?-g.ActionButtons.RADIUS-g.ActionButtons.MARGIN:g.ActionButtons.RADIUS+g.ActionButtons.MARGIN,F=g.ActionButtons.RADIUS,Q=[[y,F]];for(var i=1;i<R;i++){Q.push([y,F+g.ActionButtons.RADIUS*2*i+g.ActionButtons.OFFSET*i]);}return Q;}.bind(this);var K=function(){var Q=this.getActionButtons().length;if(this.getShowExpandButton()){Q++;}if(this.getShowDetailButton()){Q++;}if(this.getShowActionLinksButton()){Q++;}return Q;}.bind(this);var O=function(Q){var U=13,V=2,W=Q.position&&Q.position===A.Left,X=(W&&!v)||(!W&&v);Q.x=Q.x+(X?z:y);var Y={cx:Q.x,cy:Q.y,id:Q.id+"-circle","class":"sapSuiteUiCommonsNetworkNodeActionButton",r:g.ActionButtons.RADIUS},Z={"class":"sapSuiteUiCommonsNetworkGraphIcon sapSuiteUiCommonsNetworkNodeActionIcon "+(Q.class?Q.class:""),x:Q.x,y:Q.y},$,_,a1,b1,c1,d1;if(!Q.enable){Y.class="sapSuiteUiCommonsNetworkNodeActionButtonDisabledBackground";w.appendChild(this._createElement("circle",Y));Y.class="sapSuiteUiCommonsNetworkNodeActionButtonDisabled";Z.class+=" sapSuiteUiCommonsNetworkNodeActionButtonDisabled";}c1=this._createElement("g",{id:Q.id});$=this._createElement("circle",{id:Q.id+"-circle",cx:Q.x,cy:Q.y,r:g.ActionButtons.RADIUS-V,"class":"sapSuiteUiCommonsNetworkActionButtonFocusCircle"});a1=this._createElement("circle",Y);b1=this._createIcon(Z,Q.icon,U);if(Q.title){_=this._createElement("title");_.textContent=Q.title;a1.appendChild(_);}c1.appendChild(a1);c1.appendChild(b1);c1.appendChild($);w.appendChild(c1);d1=q(a1);if(Q.enable){d1.click(function(){this._setActionButtonFocus(c1,true);this._setFocus(false);if(this.getParent()){this.getParent().setFocus({item:this,button:c1});}}.bind(this));q(a1).click(Q.click);}W?u++:B++;return{icon:b1,wrapper:a1};}.bind(this);R=K();p=J();if(R===0){return;}if(e&&!this._bActionButtonsRendered){F=this.getY();if(this._isCircle()){y=this.getX()+(this._iWidth/2+this._iCircleSize/2);z=this.getX()+(this._iWidth/2-this._iCircleSize/2);}else{y=this.getX()+this._iWidth;z=this.getX();}var w=this.$("actionButtons")[0];if(!w){w=this._createElement("g",{"class":"sapSuiteUiCommonsNetworkNodeActionButtonWrapper",id:this._getDomId("actionButtons")});}else{q(w).children().remove();}if(this.getParent()._isUseNodeHtml()){this.getParent().$("actiionbuttons")[0].appendChild(w);}else{this.$()[0].appendChild(w);}if(this.getShowExpandButton()){x=O({x:p[B][0],y:F+p[B][1],icon:this._getExpandIcon(true),"class":"sapSuiteUiCommonsNetworkNodeActionCollapseIcon",enable:this._hasVisibleChildren(),title:r.getText("NETWORK_GRAPH_EXPAND_COLLAPSE"),id:this._getDomId("actionCollapse"),click:this._expandClick.bind(this)});this._expandIcon=x.icon;}if(this.getShowDetailButton()){G=O({x:p[B][0],y:F+p[B][1],icon:"sap-icon://menu",enable:this._hasDetailData()||this.getTitle(),id:this._getDomId("actionDetail"),title:r.getText("NETWORK_GRAPH_NODE_DETAILS"),click:function(){this._detailClick(G.wrapper);}.bind(this)});}if(this.getShowActionLinksButton()){L=O({x:p[B][0],y:F+p[B][1],icon:"sap-icon://chain-link",enable:this._hasActionLinks(),title:r.getText("NETWORK_GRAPH_NODE_LINKS"),id:this._getDomId("actionLinks"),click:function(){this._linksClick(L.wrapper);}.bind(this)});}for(var i=0;(B+u)<(f*2)&&i<this.getActionButtons().length;i++){(function(Q){var U=Q.getPosition(),V=U===A.Right?B:u;if(V>=f){U=U===A.Left?A.Right:A.Left;V=U===A.Right?B:u;}var W=O({x:p[V][0],y:F+p[V][1],icon:Q.getIcon(),title:Q.getTitle(),id:Q.getId(),click:function(X){Q.firePress({buttonElement:W.wrapper});},enable:Q.getEnabled(),position:U});})(this.getActionButtons()[i]);}this._bActionButtonsRendered=true;}else if(this._expandIcon){this._expandIcon.textContent=t._getExpandIcon();this.$().find("."+this.FOCUS_CLASS).removeClass(this.FOCUS_CLASS);}var P=e?"addClass":"removeClass";this.$("actionButtons")[P](this.VISIBLE_ACTIONS_BUTTONS_CLASS);};
o.prototype.getChildNodes=function(){this._checkForProcessData();return this.aChildren;};
o.prototype.getChildLines=function(){this._checkForProcessData();return this.aLines;};
o.prototype.getParentNodes=function(){this._checkForProcessData();return this.aParents;};
o.prototype.getParentLines=function(){this._checkForProcessData();return this.aParentLines;};
o.prototype.isHidden=function(){return this._bIsHidden;};
o.prototype.setHidden=function(v){var t=this;var p=function(L){L.forEach(function(e){var i=e.getFromNode()===t?e.getToNode():e.getFromNode();e.setHidden(v||i.isHidden());});};p(this.getChildLines());p(this.getParentLines());this.$()[v?"hide":"show"]();this._bIsHidden=v;if(this._oGroup){this._oGroup.setHidden(!this._oGroup._hasVisibleNodes());}};
o.prototype.getCenterPosition=function(){var e,i;if(this._isBox()){return{x:this.getX()+this._iWidth/2,y:this.getY()+this._iHeight/2};}e=this._getCirclePosition();i=this._getCircleSize()/2;return{x:e.x+i,y:e.y+i};};
o.prototype.setHeaderCheckBoxState=function(v){this._setHeaderCheckBoxState(v);return this;};
o.prototype.setX=function(x){this.setProperty("x",x,true);return this;};
o.prototype.setY=function(y){this.setProperty("y",y,true);return this;};
o.prototype.setSelected=function(e){var p=this.getParent(),F=e?"addClass":"removeClass",K=this.getKey();this.setProperty("selected",e,true);if(p){this._setStatusColors(e?"Selected":"");this.$()[F](this.SELECT_CLASS);if(e){p._mSelectedNodes[K]=this;}else{delete p._mSelectedNodes[K];}}return this;};
o.prototype.setCollapsed=function(e){var i={},p,P,F=e?"addClass":"removeClass",$=this.$().find(".sapSuiteUiCommonsNetworkGraphDivActionButtons, .sapSuiteUiCommonsNetworkNodeActionButtonWrapper").find(".sapSuiteUiCommonsNetworkNodeActionCollapseIcon");this.setProperty("collapsed",e,true);this._oExpandState=e?h.COLLAPSED:h.EXPANDED;this.aChildren.forEach(function(t){t._getAllChildren(e,this.getKey(),i);},this);p=Object.keys(i);p.forEach(function(K){i[K]._hideShow(e,this.getKey());},this);p.forEach(function(K){i[K]._processHideShowParents(e,this.getKey(),i);},this);this.aLines.forEach(function(L){L._hideShow(e);});if($[0]){$[0].textContent=this._getExpandIcon();}this.$().removeClass("sapSuiteUiCommonsNetworkNodePartialCollapsed");this.$()[F]("sapSuiteUiCommonsNetworkNodeCollapsed");P=this.getParent();if(P){P._setupKeyboardNavigation();if(e&&!(P.getFocus()&&P.getFocus().item===this)){P.setFocus({item:this});}}return this;};
o.prototype.setGroup=function(G){this.setProperty("group",G,true);this._invalidateParent();return this;};
o.prototype.setShape=function(e){this.setProperty("shape",e,true);this._invalidateParent();return this;};
o.prototype.setWidth=function(w){this.setProperty("width",w,true);if(this.getParent()&&this.getParent()._bPreventInvalidation){this._iWidth=w;}else{this._iWidth=0;}this._invalidateParent();return this;};
o.prototype.setHeight=function(i){this.setProperty("height",i,true);if(this.getParent()&&this.getParent()._bPreventInvalidation){this._iHeight=i;}else{this._iHeight=0;}this._invalidateParent();return this;};
o.prototype.setMaxWidth=function(i){this.setProperty("maxWidth",i,true);this._invalidateParent();return this;};
o.prototype.setTitleLineSize=function(t){this.setProperty("titleLineSize",t,true);this._invalidateParent();return this;};
o.prototype.addAttribute=function(){E.prototype.addAttribute.apply(this,arguments);this._invalidateParent();return this;};
o.prototype.insertAttribute=function(){E.prototype.insertAttribute.apply(this,arguments);this._invalidateParent();return this;};
o.prototype.removeAllAttributes=function(){E.prototype.removeAllAttributes.apply(this,arguments);this._invalidateParent();return this;};
o.prototype.removeAttribute=function(){E.prototype.removeAttribute.apply(this,arguments);this._invalidateParent();return this;};
o.prototype.addAttribute=function(){E.prototype.addAttribute.apply(this,arguments);this._invalidateParent();return this;};
o.prototype.insertAttribute=function(){E.prototype.insertAttribute.apply(this,arguments);this._invalidateParent();return this;};
o.prototype.removeAllAttributes=function(){E.prototype.removeAllAttributes.apply(this,arguments);this._invalidateParent();};
o.prototype.removeAttribute=function(){E.prototype.removeAttribute.apply(this,arguments);this._invalidateParent();};
o.prototype.getHeaderCheckBoxState=function(){if(this.getProperty("headerCheckBoxState")===H.Hidden){return H.Hidden;}return this.getHeaderCheckbox().getSelected()?H.Checked:H.Unchecked;};
o.prototype._processRenderManager=function(R,e){if(R&&e){R.unsafeHtml(e);}return"";};
o.prototype._hasAdditionalContent=function(){return this._displayAttributes()||this._displayDescription()||this.getContent();};
o.hasNativeLineClamp=typeof document.documentElement.style.webkitLineClamp!="undefined"&&D.browser.chrome;
o.prototype._invalidateParent=function(){var p=this.getParent();if(p){p.invalidate();}};
o.prototype._isIgnored=function(){var p=this.getParent(),e=p&&p._isSwimLane(),i=this._isInCollapsedGroup();if(e&&this._isHtml()){i=false;}return i||this._isInIgnoredGroup()||!this._useInLayout();};
o.prototype._getImageSize=function(){var R=function(w,e){return{width:w?parseInt(w,10):0,height:e?parseInt(e,10):0};};var t=this._isBox()?"Box":"Circle",i=this.getImage();if(!this._displayImage(i)){return R();}return R(i.getWidth()?i.getWidth():g.Image[t],i.getHeight()?i.getHeight():g.Image[t]);};
o.prototype._displayImage=function(i){i=i||this.getImage();return i&&i.getSrc();};
o.prototype._isHtml=function(){return this.getParent()&&this.getParent()._isUseNodeHtml();};
o.prototype._isInCollapsedGroup=function(){return this._oGroup&&this._oGroup._isCollapsed();};
o.prototype._isInIgnoredGroup=function(){return this._oGroup&&this._oGroup._isIgnored();};
o.prototype._displayAttributes=function(){return this.getVisibleAttributes().length!==0&&this._isBox();};
o.prototype._displayDescription=function(){return this.getDescriptionLineSize()!==-1&&this.getDescription();};
o.prototype._hasTitle=function(){return this.getTitle()||this.getIcon();};
o.prototype._isBox=function(){return this.getShape()===S.Box&&this.getParent()._isLayered();};
o.prototype._isCircle=function(){return this.getShape()===S.Circle;};
o.prototype._isCustom=function(){return this.getShape()===S.Custom;};
o.prototype._hasChildren=function(){return this.aChildren.length>0;};
o.prototype._showHeaderCheckBox=function(){return this.getHeaderCheckBoxState()!==H.Hidden&&this._isBox();};
o.prototype._hasVisibleChildren=function(){return this.aChildren.some(function(e){return!(e._oGroup&&!e._oGroup.getVisible())&&e.getVisible();});};
o.prototype._hasDetailData=function(){return this.getDescription()||this.getAttributes().length>0;};
o.prototype._hasActionLinks=function(){return this.getActionLinks().some(function(L){return L.getVisible();});};
o.prototype._useAutomaticSize=function(){return!this.getWidth()&&this.getMaxWidth()>0;};
o.prototype._getShapeSize=function(e){if(this._isCircle()){return this._getCircleSize();}var i=this._isCustom()?this.getCoreNodeSize():0;return i||(e?this._iWidth:this._iHeight);};
o.prototype._getCircleSize=function(){return this._isBox()?undefined:this._iCircleSize;};
o.prototype._hasMultiLineTitle=function(){return this._aTitleLines&&this._aTitleLines.length>1;};
o.prototype._getCirclePosition=function(){return this._isBox()?undefined:{x:this.getX()+(this._iWidth-this._getCircleSize())/2,y:this.getY()};};
o.prototype._isOnScreen=function(L,R,t,B){var x=this.getX(),y=this.getY();return E._isRectOnScreen(x,x+this._iWidth,y,y+this._iHeight,L,R,t,B);};
o.prototype.getFocusDomRef=function(){return this.getDomRef("wrapper");};
o.prototype.setVisible=function(v){this.setProperty("visible",v);var p=this.getParent();if(p&&p._bIsLayedOut){this.getParentNodes().forEach(function(e){e._bActionButtonsRendered=false;});}return this;};
o.prototype.setStatusIcon=function(i){var e=this.$("statusicon")[0],p=I.getIconInfo(i),t=p&&p.content;this.$("statusiconwrapper")[i?"addClass":"removeClass"]("sapSuiteUiCommonsNetworkNodeInfoWrapperCustomIcon");e&&(e.textContent=t);this.setProperty("statusIcon",i,true);return this;};
return o;});
sap.ui.predefine('sap/suite/ui/commons/networkgraph/NodeImage',["sap/ui/core/Element"],function(E){"use strict";
var N=E.extend("sap.suite.ui.commons.networkgraph.NodeImage",{metadata:{library:"sap.suite.ui.commons",properties:{src:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},width:{type:"int",group:"Appearance",defaultValue:null},height:{type:"int",group:"Appearance",defaultValue:null}}}});
return N;});
sap.ui.predefine('sap/suite/ui/commons/networkgraph/NodeRenderer',['sap/ui/core/Renderer'],function(){"use strict";return{apiVersion:2,render:function(r,n){var h=n._render({renderManager:r});if(h){r.write(h);}}};},true);
sap.ui.predefine('sap/suite/ui/commons/networkgraph/Status',["sap/ui/core/Element","sap/ui/core/theming/Parameters","sap/m/library"],function(E,P,M){"use strict";var V=M.ValueCSSColor;
var S=E.extend("sap.suite.ui.commons.networkgraph.Status",{metadata:{library:"sap.suite.ui.commons",properties:{key:{type:"string",group:"Appearance",defaultValue:null},title:{type:"string",group:"Appearance",defaultValue:null},borderColor:{type:"string",group:"Appearance",defaultValue:null},backgroundColor:{type:"string",group:"Appearance",defaultValue:null},contentColor:{type:"string",group:"Appearance",defaultValue:null},headerContentColor:{type:"string",group:"Appearance",defaultValue:null},hoverBackgroundColor:{type:"string",group:"Appearance",defaultValue:null},hoverBorderColor:{type:"string",group:"Appearance",defaultValue:null},hoverContentColor:{type:"string",group:"Appearance",defaultValue:null},selectedBackgroundColor:{type:"string",group:"Appearance",defaultValue:null},selectedBorderColor:{type:"string",group:"Appearance",defaultValue:null},selectedContentColor:{type:"string",group:"Appearance",defaultValue:null},legendColor:{type:"string",group:"Appearance",defaultValue:null},useFocusColorAsContentColor:{type:"boolean",group:"Appearance",defaultValue:false},borderWidth:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:null},borderStyle:{type:"string",group:"Appearance",defaultValue:null}}}});
S.prototype._getLegendColor=function(){var l=this.getLegendColor()||this.getBackgroundColor();if(l){var c=P.get(l);if(!c&&V.isValid(l)){c=l;}return c;}return null;};
return S;});
sap.ui.predefine('sap/suite/ui/commons/networkgraph/SvgBase',["sap/suite/ui/commons/library","sap/ui/core/Control","sap/ui/core/IconPool","sap/ui/Device","sap/base/security/encodeXML"],function(l,C,I,D,e){"use strict";var E=l.networkgraph.ElementStatus;var S='http://www.w3.org/2000/svg';
var a=C.extend("sap.suite.ui.commons.networkgraph.SvgBase",{renderer:{}});
a.prototype.HIGHLIGHT_CLASS="sapSuiteUiCommonsNetworkElementHighlight";a.prototype.SELECT_CLASS="sapSuiteUiCommonsNetworkElementSelected";a.prototype.VISIBLE_ACTIONS_BUTTONS_CLASS="sapSuiteUiCommonsNetworkNodeActionButtonsVisible";a.prototype.FOCUS_CLASS="sapSuiteUiCommonsNetworkElementFocus";a.prototype.LINEBUTTONSID="divlinebuttons";
a.prototype._createElement=function(t,A){var o=document.createElementNS(S,t);return this._setAttributes(o,A);};
a.prototype._setAttributes=function(o,A){A=A||{};Object.keys(A).forEach(function(s){o.setAttribute(s,A[s]);});return o;};
a.prototype._getStatusClass=function(s){var c=s||this.getStatus();switch(c){case E.Warning:return" sapSuiteUiCommonsNetworkElementWarning ";case E.Error:return" sapSuiteUiCommonsNetworkElementError ";case E.Success:return" sapSuiteUiCommonsNetworkElementSuccess ";case E.Information:return" sapSuiteUiCommonsNetworkElementInformation ";default:return"";}};
a.prototype._getAccessibilityLabel=function(){throw new Error("To be implemented by an extending class.");};
a.prototype._renderRoundRect=function(A){return this._renderControl("path",{d:this._renderRoundRectPath(A),style:A.style,"class":A.class,id:A.id});};
a.prototype._renderRoundRectPath=function(A){A.topRight=A.topRight||0;A.topLeft=A.topLeft||0;A.bottomRight=A.bottomRight||0;A.bottomLeft=A.bottomLeft||0;var r=A.x+A.width,b=A.y+A.height,p="",f=function(R,x,y){p+=" A"+R+","+R+" 0 0,1 "+x+","+y;},c=function(x,y){p+=" L"+x+","+y;};p="M"+(A.x+A.topLeft)+","+A.y;c(r-A.topRight,A.y);if(A.topRight){f(A.topRight,r,A.y+A.topRight);}c(r,b-A.bottomRight);if(A.bottomRight){f(A.bottomRight,r-A.bottomRight,b);}c(A.x+A.bottomLeft,b);if(A.bottomLeft){f(A.bottomLeft,A.x,b-A.bottomLeft);}c(A.x,A.y+A.topLeft);if(A.topLeft){f(A.topLeft,A.x+A.topLeft,A.y);}return p;};
a.prototype._appendTextAnchor=function(A){var i=sap.ui.getCore().getConfiguration().getRTL();if(i&&this._isMSBrowser()){A["text-anchor"]="end";}};
a.prototype._renderText=function(A){var h;if(A.height&&this._isMSBrowser()){A.attributes.dy=A.height/2;}this._appendTextAnchor(A.attributes);h=this._renderControl("text",A.attributes,false);h+=A.text?e(A.text):"";if(A.close!==false){h+="</text>";}return h;};
a.prototype._renderSpanText=function(A,t,h){var H;if(h&&this._isMSBrowser()){A.dy=h/2;}H=this._renderControl("text",A,false);H+=this._renderControl("tspan",{},false);H+=e(t);H+="</tspan></text>";return H;};
a.prototype._cannotAppendInnerHtml=function(){return this._isMSBrowser()||D.browser.safari;};
a.prototype._isMSBrowser=function(){return D.browser.edge||D.browser.msie;};
a.prototype._renderIcon=function(A){var i=I.getIconInfo(A.icon);if(i){return this._renderText({attributes:A.attributes,text:i.content,height:A.height});}return"";};
a.prototype._renderControl=function(n,A,c){var h="<"+n+" ";A=A||{};Object.keys(A).forEach(function(s){if(typeof A[s]!=="undefined"){h+=s;h+="=";h+="\""+A[s]+"\"";}});h+=">";c=(c!==false);if(c){h+="</"+n+">";}return h;};
a.prototype._createText=function(t,A){var s=t.firstChild,c=A.text.length,b=A.dots!==false,T=A.text,i=true,n=false,w=parseInt(t.getAttribute("maxwidth"),10)||A.width,L=parseFloat(t.getAttribute("x")),d=A.suffix?A.suffix:"",f=A.centerWidth?A.centerWidth:w,g="..."+d,N,h;A.trim=(A.trim!==false);s.textContent=A.text+d;if(A.trim&&w>0){h=t.getBBox().width;if(h>w){n=true;while(true){c/=2;N=T.length+(i?-1:1)*Math.ceil(c);T=A.text.substring(0,N);s.textContent=T+(b?g:"");h=t.getBBox().width;i=(h>w);if(c<0.5&&!i){if(h>w){T=A.text.substring(0,T.length-Math.ceil(c*2));s.textContent=T+ +(b?g:"");}break;}}}}if(A.hCenter&&!n){t.setAttribute("text-anchor","middle");t.setAttribute("x",L+f/2);}return n;};
a.prototype._createIcon=function(A,i,h){var o=I.getIconInfo(i),b;if(o){if(h&&this._isMSBrowser()){A.dy=h/2;}b=this._createElement("text",A);b.textContent=o.content;return b;}return null;};
a.prototype._getDomId=function(s){var i=this.getId();if(s){i+="-"+s;}return i;};
a.prototype._convertToSvg=function(r){var R;var c=function(n){var p={},A;if(n.attributes){for(var i=0;i<n.attributes.length;i++){A=n.attributes[i];p[A.name]=A.value;}}return p;};var f=function(n,s){var o,b,N="";if(n.childNodes.length===1&&!n.childNodes[0].localName){s.textContent=n.childNodes[0].textContent;return;}for(var i=0;i<n.childNodes.length;i++){o=n.childNodes[i];N=o.localName;if(N==="clippath"){N="clipPath";}b=this._createElement(N,c(o));s.appendChild(b);if(o.childNodes){f(o,b);}}}.bind(this);R=this._createElement(r[0].localName,c(r[0]));f(r[0],R);return R;};
a.prototype._convertToStyle=function(s,A,b){var c="";if(s){Object.keys(s).forEach(function(d){var v=s[d];if(typeof v!=="undefined"&&v!==""){c+=d;c+=":";c+=s[d]+";";}});c=c+(A||"");if(!b&&c){c="style=\""+c+"\"";}}return c;};
a.prototype._renderHtmlElement=function(s,m,A,r){if(!r){var h="";h+="<"+s+" ";h+=this._convertToStyle(m);if(A){Object.keys(A).forEach(function(c){var v=A[c];if(typeof v!=="undefined"&&v!==""){h+=c;h+="=";h+="\""+v+"\"";}});}h+=">";return h;}else{r.openStart(s);var b=this._convertToStyle(m,undefined,true);this.applyStyles(r,this.getStyleObject(b));if(A){Object.keys(A).forEach(function(c){var v=A[c];if(typeof v!=="undefined"&&v!==""){if(c==="class"){v.split(" ").forEach(function(d){if(d){r.class(d);}});}else{r.attr(c,v);}}});}r.openEnd();}};
a.prototype._renderHtmlIcon=function(i,c,s,A,t){var o=I.getIconInfo(i),f="";s=s?"id=\""+this.getId()+"-"+s+"\"":"";c=c||"";if(o){if(o.fontFamily){f="style=\"font-family:"+e(o.fontFamily)+"\"";}var b=t?" aria-label=\""+e(t)+"\" ":"";t=t?" title=\""+e(t)+"\" ":"";return"<div "+s+t+b+" "+(A||"")+"class=\"sapSuiteUiCommonsNetworkGraphIcon "+c+"\"><span "+f+">"+e(o.content)+"</span></div>";}return"";};
return a;});
sap.ui.predefine('sap/suite/ui/commons/networkgraph/Tooltip',["sap/ui/thirdparty/jquery","./SvgBase","./Line","./Node","./Group","sap/m/ResponsivePopover","sap/m/Popover","sap/m/List","sap/m/OverflowToolbar","sap/m/Button","sap/m/CustomListItem","sap/m/FlexBox","sap/m/HBox","sap/m/IconTabBar","sap/m/IconTabFilter","sap/m/Panel","sap/m/StandardListItem","sap/m/Text","sap/m/ToolbarSpacer","sap/ui/core/Icon","sap/m/FlexItemData","sap/ui/core/library","sap/m/library"],function(q,S,L,N,G,R,P,a,O,B,C,F,H,I,b,c,d,T,e,f,g,h,M){"use strict";var i=M.PlacementType;var r=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");
var j=S.extend("sap.suite.ui.commons.networkgraph.Tooltip",{metadata:{library:"sap.suite.ui.commons",events:{afterOpen:{},afterClose:{}}}});
j.prototype.init=function(){this._oPopover=null;this._oElement=null;};
j.prototype.create=function(p){var o;this._oPopover=new R(this.getId()+"-tooltip",{showHeader:false,placement:this.getParent()._bIsRtl?i.PreferredLeftOrFlip:i.PreferredRightOrFlip,afterOpen:function(){this.fireAfterOpen();}.bind(this),afterClose:function(){this.fireAfterClose();}.bind(this),beforeOpen:function(){this._fnCreate();}.bind(this),contentWidth:"350px"}).addStyleClass("sapSuiteUiCommonsNetworkTooltip");this._oSimpleTooltip=new P({contentMinWidth:"350px",showHeader:false});this.addDependent(this._oPopover);o=this._oPopover.getAggregation("_popup");if(o){o._afterAdjustPositionAndArrowHook=function(){var $=this.$("arrow"),t=this.$().position().top,A=$.position().top,k=15,w=q(window).height(),n=t+A-k;if(w>n+this.$().height()){$.css("top",k);this.$().css("top",n);}};}};
j.prototype.instantClose=function(){var p=this._oPopover.getAggregation("_popup");if(p&&p.oPopup&&p.oPopup.close){p.oPopup.close(0);}if(this._oSimpleTooltip.oPopup&&this._oSimpleTooltip.oPopup.close){this._oSimpleTooltip.oPopup.close(0);}};
j.prototype.close=function(){this._oPopover.close();};
j.prototype.openDetail=function(A){var o=A.opener||this._getOpener(A.item,A.point);if(A.item instanceof N&&!A.item._hasDetailData()){this._oSimpleTooltip.removeAllContent();this._appendHeader(A.item.getTitle(),this._oSimpleTooltip);this._oSimpleTooltip.openBy(o);return;}this._fnCreate=this._createDetail;this._oElement=A.item;this._oPopover.openBy(o);};
j.prototype._createDetail=function(){var k=this._getTooltipCreateFunction(this._oElement);this._oPopover.removeAllContent();this._appendFooter();k(this._oElement);};
j.prototype.openLink=function(A){this._oElement=A.item;this._fnCreate=this._createLink;this._oPopover.openBy(A.opener);};
j.prototype._createLink=function(A){var l=new a(),D=this._oElement;this._oPopover.removeAllContent();this._appendHeader(r.getText("NETWORK_GRAPH_TOOLTIP_EXTERNAL_LINKS"));D.getActionLinks().forEach(function(o){l.addItem(new C({content:[new H({renderType:"Bare",items:o.clone(null,null,{cloneChildren:true,cloneBindings:false}).addStyleClass("sapUiTinyMargin")})]}));});this._oPopover.addContent(l);this._appendFooter();};
j.prototype._getOpener=function(o,p){if(o instanceof L&&p){if(this._oElement===o&&this._tooltipRect){var x=parseInt(this._tooltipRect.getAttribute("x"),10),y=parseInt(this._tooltipRect.getAttribute("y"),10),k=10;if((Math.abs(x-p.x)<k)&&(Math.abs(y-p.y)<k)){return this._tooltipRect;}}this._cleanUpLineTooltip();this._tooltipRect=this._createElement("rect",{x:p.x,y:p.y,width:0,height:0});this.getParent().$svg.append(this._tooltipRect);return this._tooltipRect;}return o;};
j.prototype._getTooltipCreateFunction=function(o){if(o instanceof N){return this._createNodeTooltip.bind(this);}if(o instanceof L){return this._createLineTooltip.bind(this);}if(o instanceof G){return this._createGroupTooltip.bind(this);}return null;};
j.prototype._cleanUpLineTooltip=function(){if(this._tooltipRect){q(this._tooltipRect).remove();}};
j.prototype._appendDescription=function(o,w){if(o.getDescription()){w=w||this._oPopover;w.addContent(new c({content:new T({textAlign:"Initial",text:o.getDescription()}).addStyleClass("sapSuiteUiCommonsNetworkTooltipDescription")}).addStyleClass("sapSuiteUiCommonsNetworkTooltipArea"));}};
j.prototype._appendAttributes=function(A,w){var l=new a(),o=w||this._oPopover;if(A.length>0){A.forEach(function(k){l.addItem(new C({content:[new H({items:[new T({layoutData:[new g({baseSize:"50%"})],text:k.getLabel()}),new T({layoutData:[new g({baseSize:"50%"})],text:k.getValue(),width:"100%",textAlign:h.TextAlign.End})]}).addStyleClass("sapSuiteUiCommonsNetworkTooltipLine")]}));o.addContent(l);});}};
j.prototype._appendNodesList=function(o,w){var l=new a();o.aNodes.forEach(function(n){if(n.getTitle()){l.addItem(new d({title:n.getTitle(),icon:n.getIcon()}));}});w.addContent(l);};
j.prototype._appendFooter=function(){var t=this;this.oCloseButton=new B({text:r.getText("NETWORK_GRAPH_CLOSE"),press:function(){t._oPopover.close();}});this._oPopover.setEndButton(this.oCloseButton);this._oPopover.setInitialFocus(this.oCloseButton);};
j.prototype._appendHeader=function(t,p){p=p||this._oPopover;if(t){var o=new T({width:"100%",textAlign:h.TextAlign.Center,text:t});p.insertContent(new c({width:"100%",content:[o]}).addStyleClass("sapSuiteUiCommonsNetworkTooltipArea"),0);p.addAriaLabelledBy(o);}};
j.prototype._createGroupTooltip=function(o){var k=function(){return o.getAttributes().length>0||o.getDescription();};var D,n;this._appendHeader(o.getTitle());if(k()){n=new b({text:r.getText("NETWORK_GRAPH_TOOLTIP_LIST_OF_NODES")});D=new b({text:r.getText("NETWORK_GRAPH_TOOLTIP_INFORMATION")});this._oPopover.addContent(new I({items:[D,n]}));this._oPopover.addStyleClass("sapSuiteUiCommonsNetworkGroupTooltipTabBar");this._appendDescription(o,D);this._appendAttributes(o.getAttributes(),D);this._appendNodesList(o,n);}else{this._appendNodesList(o,this._oPopover);}};
j.prototype._createNodeTooltip=function(n){this._appendDescription(n);this._appendAttributes(n.getAttributes());this._appendHeader(n.getTitle());};
j.prototype._createLineTooltip=function(l,p){var k=function(){var s=new T({width:"50%",text:l.getFromNode().getTitle()}).addStyleClass("sapSuiteUiCommonsNetworkGraphNoPointerEvents sapSuiteUiCommonsNetworkLineTooltipLabel"),o=new f({src:"sap-icon://arrow-right"}).addStyleClass("sapUiTinyMarginEnd sapSuiteUiCommonsNetworkGraphNoPointerEvents sapSuiteUiCommonsNetworkLineTooltipFromToIcon"),n=new f({src:"sap-icon://arrow-left"}).addStyleClass("sapUiTinyMarginBegin sapSuiteUiCommonsNetworkGraphNoPointerEvents sapSuiteUiCommonsNetworkLineTooltipFromToIcon"),t=new T({textAlign:h.TextAlign.End,width:"50%",text:l.getToNode().getTitle()}).addStyleClass("sapSuiteUiCommonsNetworkGraphNoPointerEvents sapSuiteUiCommonsNetworkLineTooltipLabel"),u=new F({renderType:"Bare",width:"100%",justifyContent:"Center",items:[s]}).addStyleClass("sapSuiteUiCommonsNetworkLineTooltipFromTo");l._isBothArrow()?u.addItem(n):o.addStyleClass("sapUiTinyMarginBegin");u.addItem(o);u.addItem(t);return u;},m=function(){var t=l.getTitle();this._oPopover.addContent(k());if(t){this._appendHeader(t);}this._appendDescription(l);this._appendAttributes(l.getAttributes());}.bind(this);m(l);};
return j;});
sap.ui.predefine('sap/suite/ui/commons/networkgraph/Utils',[],function(){"use strict";var U={};
U.find=function(a,c,t){var i;if(typeof a.find==="function"){return a.find(c,t);}else{for(i=0;i<a.length;i++){if(c.call(t,a[i],i,a)){return a[i];}}return undefined;}};
U.trimText=function(t,c){if(t&&t.length>c){return t.substring(0,c)+" ... ";}return t;};
return U;},true);
sap.ui.predefine('sap/suite/ui/commons/networkgraph/layout/D3ForceWrapper',[],function(){"use strict";var D;var a={};a._d3Path=sap.ui.require.toUrl("sap/ui/thirdparty")+"/d3.js";
a.run=function(p,r){a.getD3().then(function(D){var g=p.graph;var f=D.layout.force().nodes(g.nodes).links(g.links).alpha(p.alpha).friction(p.friction).charge(p.charge).start();setTimeout(f.stop,p.maximumDuration);f.on("end",function(){r(g);});});};
a.layout=function(p){return new Promise(function(r,b){a.run(p,r);});};
a.getD3=function(){if(D){return Promise.resolve(D);}else{return new Promise(function(r){sap.ui.require(["sap/ui/thirdparty/d3"],function(d){D=d;r(d);});});}};
return a;},true);
sap.ui.predefine('sap/suite/ui/commons/networkgraph/layout/ForceBasedLayout',["sap/suite/ui/commons/library","./LayoutAlgorithm","./Geometry","./D3ForceWrapper","./LayoutTask","sap/ui/performance/Measurement"],function(l,L,G,D,a,M){"use strict";var b=l.networkgraph.LayoutRenderType,S=12;
var F=L.extend("sap.suite.ui.commons.networkgraph.layout.ForceBasedLayout",{metadata:{properties:{alpha:{type:"float",group:"Behavior",defaultValue:0.3},charge:{type:"float",group:"Behavior",defaultValue:-30},friction:{type:"float",group:"Behavior",defaultValue:0.9},maximumDuration:{type:"int",group:"Behaviour",defaultValue:1000}}}});
F.prototype.getLayoutRenderType=function(){return b.Forces;};
F.prototype.isLayered=function(){return false;};
F.prototype.layout=function(){return new a(function(r,R,o){var g={nodes:[],links:[]},c=this.getParent();if(!c){R("The algorithm must be associated with a graph.");return;}M.start("NetworkGraph - ForceBasedLayout","Layouting of a graph "+c.getId());c.getNodes().forEach(function(n,i){g.nodes.push({id:n.getKey()});n.iIndex=i;});c.getNodes().forEach(function(n){n.aChildren.forEach(function(C){g.links.push({source:n.iIndex,target:C.iIndex,value:1});});});D.layout({graph:g,alpha:this.getAlpha(),friction:this.getFriction(),charge:this.getCharge(),maximumDuration:this.getMaximumDuration()}).then(function(d){if(o.isTerminated()){r();return;}var g=d.graph||d;var B=G.getBoundingBox(g.nodes),x=(B.p1.x)*-S+100,y=(B.p1.y)*-S+100;g.nodes.forEach(function(e){var n=c.getNodeByKey(e.id);n.setX(e.x*S+x);n.setY(e.y*S+y);});this._normalizeLines();this._alignCoordinatesWithView();r();}.bind(this),R);}.bind(this));};
return F;});
sap.ui.predefine('sap/suite/ui/commons/networkgraph/layout/ForceDirectedLayout',["sap/suite/ui/commons/library","./LayoutAlgorithm","./Geometry","./LayoutTask","sap/ui/performance/Measurement"],function(l,L,G,a,M){"use strict";
var F=L.extend("sap.suite.ui.commons.networkgraph.layout.ForceDirectedLayout",{metadata:{properties:{optimalDistanceConstant:{type:"float",defaultValue:0.2},maxIterations:{type:"int",defaultValue:200},maxTime:{type:"int",defaultValue:2000},initialTemperature:{type:"float",defaultValue:200},coolDownStep:{type:"float",defaultValue:1},staticNodes:{type:"string[]",defaultValue:[]}}}});
var b=l.networkgraph.LayoutRenderType,S=200,c=2.39996322972865332;
F.prototype.getLayoutRenderType=function(){return b.Forces;};
F.prototype.isLayered=function(){return false;};
F.prototype.layout=function(){return new a(function(r,R,o){var g=this.getParent();if(!g){R("The algorithm must be associated with a graph.");return;}this.oGraph=g;M.start("NetworkGraph - ForceDirectedLayout","Layouting of a graph "+g.getId());this._initPhyllotaxisPattern();this._runSimulation();this._normalizeLines();this._alignCoordinatesWithView();r();}.bind(this));};
F.prototype._initPhyllotaxisPattern=function(){var s=S*Math.sqrt(this.oGraph.getNodes().length),A=0,v={center:{x:0,y:0},apex:{x:0,y:0}};this.aCenters=[];this.oGraph.getNodes().forEach(function(n,i){if(this.getStaticNodes().indexOf(n.getKey())>-1){n.center={x:n.getCenterPosition().x,y:n.getCenterPosition().y};}else{v.apex.x=Math.sqrt(i+1)*S;v.apex.y=0;A+=c;v=G.getRotatedVector(v,A);n.center={x:v.apex.x+s,y:v.apex.y+s};}this.aCenters.push(n.center);}.bind(this));};
F.prototype._runSimulation=function(){var m=this.getMaxIterations(),t=this.getInitialTemperature(),C=this.getCoolDownStep(),T=(this.getMaxTime()>0)?(this.getMaxTime()+Date.now()):0,i=0,d,D,f,o,e,x,y;var B=G.getBoundingBox(this.aCenters),A=(B.p2.x-B.p1.x)*(B.p2.y-B.p1.y),O=this.getOptimalDistanceConstant()*Math.sqrt(A/this.oGraph.getNodes().length);var g=function(p){return Math.sqrt(p.x*p.x+p.y*p.y);},h=function(D){return(D*D)/O;},r=function(D){return(O*O)/(D);};while(t>0&&i<m&&(T===0||Date.now()<T)){this.oGraph.getNodes().forEach(function(n){n.disp={x:0,y:0};});this.oGraph.getNodes().forEach(function(n){this.oGraph.getNodes().forEach(function(j){if(n.getKey()===j.getKey()){return;}d=G.getPointDif(n.center,j.center);D=Math.max(1,g(d)-(n._getCircleSize()/2+j._getCircleSize()/2));n.disp.x+=(d.x/D)*r(D);n.disp.y+=(d.y/D)*r(D);});}.bind(this));this.oGraph.getLines().forEach(function(j){o=j.getFromNode();e=j.getToNode();if(o.getKey()===e.getKey()){return;}d=G.getPointDif(o.center,e.center);D=g(d);x=(d.x/D)*h(D);y=(d.y/D)*h(D);o.disp.x-=x;o.disp.y-=y;e.disp.x+=x;e.disp.y+=y;});this.oGraph.getNodes().forEach(function(n){if(this.getStaticNodes().indexOf(n.getKey())>-1){return;}D=g(n.disp);f=Math.min(D,t)/D;n.center.x+=n.disp.x*f;n.center.y+=n.disp.y*f;}.bind(this));t-=C;i++;}this.oGraph.getNodes().forEach(function(n){n.setX(n.center.x-n._iWidth/2);n.setY(n.center.y-n._iHeight/2);});};
F.prototype.destroy=function(){this.aCenters=null;this.oGraph=null;L.prototype.destroy.apply(this);};
return F;});
sap.ui.predefine('sap/suite/ui/commons/networkgraph/layout/Geometry',[],function(){"use strict";var G={};var F=1e-10;
G.getPointsDistance=function(p,P){return Math.sqrt(Math.pow(p.x-P.x,2)+Math.pow(p.y-P.y,2));};
G.getLineEquation=function(l){var s=(l.p1.y-l.p2.y)/(l.p1.x-l.p2.x),i=l.p1.y-s*l.p1.x;return{slope:s,intercept:i,verticalX:l.p1.x};};
G.isPointUnderLine=function(p,l){if(!isFinite(l.slope)){if(p.x===l.verticalX){return 0;}else if(p.x>l.verticalX){return 1;}else{return-1;}}var P=p.y-l.slope*p.x;if(Math.abs(P-l.intercept)<(Number.EPSILON*1000)){return 0;}else if(P<l.intercept){return 1;}else{return-1;}};
G.doLinesIntersect=function(l,L){var e=G.getLineEquation(l),E=G.getLineEquation(L);return G.isPointUnderLine(l.p1,E)!=G.isPointUnderLine(l.p2,E)&&G.isPointUnderLine(L.p1,e)!=G.isPointUnderLine(L.p2,e);};
G.getLinesIntersection=function(l,L){var x=l.p1.x,y=l.p1.y,a=l.p2.x,b=l.p2.y,c=L.p1.x,d=L.p1.y,e=L.p2.x,f=L.p2.y,C=(x-a)*(d-f)-(y-b)*(c-e);if(C===0){var E=G.getLineEquation(l),o=G.getLineEquation(L);if(E.slope===o.slope&&E.intercept===o.intercept){return{x:Infinity,y:Infinity};}else{return undefined;}}return{x:((x*b-y*a)*(c-e)-(x-a)*(c*f-d*e))/C,y:((x*b-y*a)*(d-f)-(y-b)*(c*f-d*e))/C};};
G.doLineRectangleIntersect=function(l,r){return G.getLineRectangleIntersections(l,r).length>=2;};
G.getLineRectangleIntersections=function(l,r){var i=[];if((l.p1.x<r.p1.x&&l.p2.x<r.p1.x)||(l.p1.x>r.p2.x&&l.p2.x>r.p2.x)||(l.p1.y<r.p1.y&&l.p2.y<r.p1.y)||(l.p1.y>r.p2.y&&l.p2.y>r.p2.y)){return i;}var I,e=F;[{p1:r.p1,p2:{x:r.p1.x,y:r.p2.y}},{p1:{x:r.p1.x,y:r.p2.y},p2:r.p2},{p1:{x:r.p2.x,y:r.p1.y},p2:r.p2},{p1:r.p1,p2:{x:r.p2.x,y:r.p1.y}}].forEach(function(R){I=G.getLinesIntersection(l,R);if(I&&I.x>=(R.p1.x-e)&&I.x<=(R.p2.x+e)&&I.y>=(R.p1.y-e)&&I.y<=(R.p2.y+e)){i.push(I);}});return i;};
G.getPolygonCentroid=function(p){var a=0,b,c,t,C=0,d=0;if(p.points.length<3){throw new Error("Polygon must have three or more points.");}for(var i=0;i<p.points.length;i++){b=p.points[i];c=(i<(p.points.length-1))?p.points[i+1]:p.points[0];a+=b.x*c.y-c.x*b.y;}a=a/2;for(var j=0;j<p.points.length;j++){b=p.points[j];c=(j<(p.points.length-1))?p.points[j+1]:p.points[0];t=b.x*c.y-c.x*b.y;C+=(b.x+c.x)*t;d+=(b.y+c.y)*t;}C=C/(6*a);d=d/(6*a);return{x:C,y:d};};
G.getAngleOfVector=function(v){var d=v.apex.x-v.center.x,D=v.apex.y-v.center.y,a=Math.atan(D/d);if(D>0){return(d>=0)?a:a+Math.PI;}else{return(d>=0)?a+2*Math.PI:a+Math.PI;}};
G.getLengthOfVector=function(v){return Math.sqrt(Math.pow(v.apex.x-v.center.x,2)+Math.pow(v.apex.y-v.center.y,2));};
G.getRotatedPoint=function(p,s){return G.getRotatedVector({center:{x:0,y:0},apex:p},s).apex;};
G.getPointSum=function(p,P){return{x:p.x+P.x,y:p.y+P.y};};
G.getPointDif=function(p,P){return{x:p.x-P.x,y:p.y-P.y};};
G.getRotatedVector=function(v,s){var a=G.getAngleOfVector(v),l=G.getLengthOfVector(v);a+=s;var n={x:Math.cos(a)*l+v.center.x,y:Math.sin(a)*l+v.center.y};return{center:v.center,apex:n};};
G.getBoundingBox=function(p){var m=Infinity,M=Infinity,f=-Infinity,a=-Infinity;p.forEach(function(P){if(P.x<m){m=P.x;}if(P.x>f){f=P.x;}if(P.y<M){M=P.y;}if(P.y>a){a=P.y;}});return{p1:{x:m,y:M},p2:{x:f,y:a}};};
G.enlargeBox=function(r,m){r.p1.x=r.p1.x-m;r.p1.y=r.p1.y-m;r.p2.x+=m;r.p2.y+=m;};
G.getNormalizedVector=function(v,n){var r=n/G.getLengthOfVector(v),s=(v.apex.x-v.center.x)*r,S=(v.apex.y-v.center.y)*r;return{center:{x:0,y:0},apex:{x:s,y:S}};};
G.hasRectangleRectangleIntersection=function(r,a){return!(a.p1.x>r.p2.x||a.p2.x<r.p1.x||a.p1.y>r.p2.y||a.p2.y<r.p1.y);};
G.getSegmentsIntersection=function(l,L){var e=0.0000001;var B=function(a,b,c){return a-e<=b&&b<=c+e;};var d=l.p1.x,f=l.p1.y,g=l.p2.x,h=l.p2.y,i=L.p1.x,j=L.p1.y,k=L.p2.x,m=L.p2.y;var x=((d*h-f*g)*(i-k)-(d-g)*(i*m-j*k))/((d-g)*(j-m)-(f-h)*(i-k));var y=((d*h-f*g)*(j-m)-(f-h)*(i*m-j*k))/((d-g)*(j-m)-(f-h)*(i-k));if(isNaN(x)||isNaN(y)){return false;}else{if(d>=g){if(!B(g,x,d)){return false;}}else if(!B(d,x,g)){return false;}if(f>=h){if(!B(h,y,f)){return false;}}else if(!B(f,y,h)){return false;}if(i>=k){if(!B(k,x,i)){return false;}}else if(!B(i,x,k)){return false;}if(j>=m){if(!B(m,y,j)){return false;}}else if(!B(j,y,m)){return false;}}return{x:x,y:y};};
G.getBezierPathCorners=function(p,r,P){var R=[],B=[],d;var e=p.split(/[,\s]/).reduce(function(b,s){var a=s.match("([a-zA-Z])(.+)");if(a){b.push(a[1]);b.push(a[2]);}else{b.push(s);}return b;},[]);var S=e.reduce(function(S,a){if(parseFloat(a)==a&&S.length){S[S.length-1].push(a);}else{S.push([a]);}return S;},[]);function f(a,b,c){var i=(b.x-a.x);var s=(b.y-a.y);var O=Math.sqrt(i*i+s*s);return g(a,b,Math.min(1,c/O));}function g(a,b,c){return{x:a.x+(b.x-a.x)*c,y:a.y+(b.y-a.y)*c};}function A(s,a){if(s.length>2){s[s.length-2]=a.x;s[s.length-1]=a.y;}}function h(s){return{x:parseFloat(s[s.length-2]),y:parseFloat(s[s.length-1])};}function j(i){return{x:parseFloat(S[i][1]),y:parseFloat(S[i][2])};}function E(a,b){return Math.abs(a-b)<F;}function l(a,b){return(b-a)>F;}function m(a,b){return(a-b)>F;}function k(s){var a,c,b,O,Q=(s>0)?1:-1,T=[],i,U,V,W;if(s===0){return;}s=Math.abs(s);c=j(0);b=j(1);O=G.getNormalizedVector({center:c,apex:b},s);O=G.getRotatedVector(O,-Q*Math.PI/2).apex;c.x+=O.x;c.y+=O.y;T.push(c);for(i=1;i<S.length-1;i++){a=j(i-1);c=j(i);b=j(i+1);U=E(a.x,c.x)&&l(a.y,c.y)||E(c.x,b.x)&&l(c.y,b.y);V=E(a.y,c.y)&&m(a.x,c.x)||E(c.y,b.y)&&m(c.x,b.x);W=E(a.y,c.y)&&l(a.x,c.x)&&E(c.x,b.x)&&m(c.y,b.y)||E(a.y,c.y)&&m(a.x,c.x)&&E(c.x,b.x)&&l(c.y,b.y)||E(a.x,c.x)&&l(a.y,c.y)&&E(c.y,b.y)&&l(c.x,b.x)||E(a.x,c.x)&&m(a.y,c.y)&&E(c.y,b.y)&&m(c.x,b.x);if(Q<0){W=!W;}O.x=(U?s:-s)*Q;O.y=(V?s:-s)*Q;c.x+=O.x;c.y+=O.y;c.inner=W;T.push(c);}c=j(S.length-1);a=j(S.length-2);O=G.getNormalizedVector({center:c,apex:a},s);O=G.getRotatedVector(O,Q*Math.PI/2).apex;c.x+=O.x;c.y+=O.y;T.push(c);for(i=0;i<S.length;i++){S[i][1]=T[i].x.toFixed(0).toString();S[i][2]=T[i].y.toFixed(0).toString();B[i]=T[i].inner;}}if(P){k(P);}if(S.length>1){var o=h(S[0]),C=null;if(S[S.length-1][0]=="Z"&&S[0].length>2){C=["L",o.x,o.y];S[S.length-1]=C;}R.push(S[0]);for(var n=1;n<S.length;n++){var q=R[R.length-1],t=S[n],N=(t==C)?S[1]:S[n+1],u;if(B[n]===true){u=r*0.65;}else if(B[n]===false){u=r*1.35;}else{u=r;}if(N&&q&&(q.length>2)&&t[0]=="L"&&N.length>2&&N[0]=="L"){var v=h(q),w=h(t),x=h(N),y,z,D=Math.abs(v.x-w.x)+Math.abs(v.y-w.y),H=Math.abs(x.x-w.x)+Math.abs(x.y-w.y),I=Math.max(Math.min(u,D,H/2),1);y=f(w,v,I);z=f(w,x,I);A(t,y);t.origPoint=w;R.push(t);var J=g(y,w,0.5),K=g(w,z,0.5),L=["C",J.x,J.y,K.x,K.y,z.x,z.y];L.origPoint=w;R.push(L);}else{R.push(t);}}if(C){var M=h(R[R.length-1]);R.push(["Z"]);A(R[0],M);}}else{R=S;}d=R.reduce(function(s,c){return s+c.join(" ")+" ";},"");return d;};
return G;},true);
sap.ui.predefine('sap/suite/ui/commons/networkgraph/layout/KlayWrapper',["sap/ui/base/ObjectPool","sap/ui/Device"],function(O,D){"use strict";var k="sap.ui.thirdparty";
function P(){var p=sap.ui.require.toUrl((k).replace(/\./g,"/"))+"/klay.js";this._worker=new Worker(p);}
P.prototype.getWorker=function(){return this._worker;};
P.prototype.init=function(){};
P.prototype.reset=function(){this._worker.onmessage=null;this._worker.onerror=null;};
var K={},u=!D.browser.firefox;K._pool=new O(P);
K.layout=function(p){if(typeof(Worker)!=="undefined"&&u){try{var o=K._pool.borrowObject(),w=o.getWorker();w.postMessage({graph:p.graph,options:p.options});w.onmessage=function(d){if(d.data.stacktrace){p.error(d.data);}else{p.success(d.data);}K._pool.returnObject(o);};w.onerror=function(){K._pool.returnObject(o);K.run(p);};}catch(e){K.run(p);}}else{K.run(p);}};
K.run=function(p){K.getKlay().then(function(o){o.layout(p);});};
K.getKlay=function(){if(typeof($klay)==="undefined"){return new Promise(function(r){var m=k.replace(/\./g,"/")+"/klay";sap.ui.require([m],function(){r($klay);});});}else{return Promise.resolve($klay);}};
return K;},true);
sap.ui.predefine('sap/suite/ui/commons/networkgraph/layout/LayeredLayout',["sap/suite/ui/commons/library","./LayoutAlgorithm","./Geometry","./KlayWrapper","./LayoutTask","sap/ui/performance/Measurement"],function(l,L,G,K,a,M){"use strict";var O=l.networkgraph.Orientation,N=l.networkgraph.NodePlacement,b=l.networkgraph.LayoutRenderType;var c=34,d=25,e=17,f=4,g="N_",h="G_",i=2;var n=(function(){var m={};m[N.BrandesKoepf]="BRANDES_KOEPF";m[N.LinearSegments]="LINEAR_SEGMENTS";m[N.Simple]="SIMPLE";return Object.freeze(m);})();
var j=L.extend("sap.suite.ui.commons.networkgraph.layout.LayeredLayout",{metadata:{library:"sap.suite.ui.commons",properties:{nodeSpacing:{type:"float",defaultValue:55},lineSpacingFactor:{type:"float",defaultValue:0.25},nodePlacement:{type:"sap.suite.ui.commons.networkgraph.NodePlacement",defaultValue:N.BrandesKoepf},mergeEdges:{type:"boolean",defaultValue:false}}}});
j.prototype.getLayoutRenderType=function(){return b.LayeredWithGroups;};
j.prototype.layout=function(){return new a(function(r,R,o){var k=this.getParent();if(!k){R("The algorithm must be associated with a graph.");return;}if(this._hasHierarchicalGroups()){R("Layered layout algorithm doesn't support hierarchical groups.");return;}this.oGraph=k;this.oKGraph={children:[],edges:[]};this.mLineMap={};M.start("NetworkGraph - LayeredLayout","Layouting of a graph "+k.getId());k.getGroups().forEach(this._addGroupToKlay,this);k.getNodes().forEach(this._addNodeToKlay,this);k.getLines().forEach(this._addLineToKlay,this);K.layout({graph:this.oKGraph,options:this._getOptions(),success:function(m){if(o.isTerminated()){r();return;}this._copyStuffWithoutPrefixes(m);m.children.forEach(function(p){this._extractNodeFromKlay(p);},this);m.edges.forEach(function(p){this._extractLineFromKlay(p);},this);this._dealWithOrientation();this._makeExpandedGroupsBoxesAroundNodes();this._shrinkGroupsDownward();this._stretchLinesToCircleNodeAxes();this._alignCoordinatesWithView();M.end("NetworkGraph - LayeredLayout");r();}.bind(this),error:function(m){R(m);}});}.bind(this));};
j.prototype._buildNodeForKlay=function(o){var p={},I=o._isCircle();if(I||(o.getCoreNodeSize()&&o._isCustom())){var k=I?o._getCircleSize():o.getCoreNodeSize();if(this.oGraph.getOrientation()!==O.TopBottom&&this.oGraph.getOrientation()!==O.BottomTop){var B=o._iHeight-k+f;p={additionalPortSpace:"top="+f+", bottom="+B};}else{var s=(o._iWidth-k)/2+f;p={additionalPortSpace:"top="+s+", bottom="+s};}}return{id:g+o.getKey(),width:o._iWidth,height:o._iHeight,properties:p};};
j.prototype._addGroupToKlay=function(o){if(o._isIgnored()){return;}var B=2*o._getBorderSize(),k={id:h+o.getKey(),width:o._iWidth+B,height:o._iHeight+B};this.oKGraph.children.push(k);if(!o.getCollapsed()){o.aNodes.forEach(function(m){if(!m._isIgnored()){if(!k.children){k.children=[];}k.children.push(this._buildNodeForKlay(m));}},this);}};
j.prototype._addNodeToKlay=function(o){if(!o._oGroup&&!o._isIgnored()){this.oKGraph.children.push(this._buildNodeForKlay(o));}};
j.prototype._addLineToKlay=function(o){var s,t,k;if(!o._isIgnored()){s=o.getFromNode()._oGroup&&o.getFromNode()._oGroup.getCollapsed()?h+o.getFromNode()._oGroup.getKey():g+o.getFrom();t=o.getToNode()._oGroup&&o.getToNode()._oGroup.getCollapsed()?h+o.getToNode()._oGroup.getKey():g+o.getTo();k=s+"->"+t+"["+this.oKGraph.edges.length+"]";this.oKGraph.edges.push({id:k,source:s,target:t});this.mLineMap[k]=o;}};
j.prototype._getOptions=function(){var o=this.oGraph.getOrientation(),D;switch(o){case O.LeftRight:case O.RightLeft:D="RIGHT";break;case O.TopBottom:case O.BottomTop:D="DOWN";break;default:D="RIGHT";}return{direction:D,spacing:this.getNodeSpacing(),nodePlace:n[this.getNodePlacement()],edgeSpacingFactor:this.getLineSpacingFactor(),mergeEdges:this.getMergeEdges()};};
j.prototype._extractNodeFromKlay=function(k){var I=k.id.substring(0,i)===g?this.oGraph.getNodeByKey(k.originalId):undefined,o;if(!I){I=this.oGraph.mGroups[k.originalId];if(I&&!I.getCollapsed()&&k.children){k.children.forEach(function(m){o=this.oGraph.getNodeByKey(m.originalId);if(o){o.setX(Math.round(m.x+k.x));o.setY(Math.round(m.y+k.y));}},this);}}if(I){I.setX(Math.round(k.x));I.setY(Math.round(k.y));}};
j.prototype._extractLineFromKlay=function(k){var o=this.mLineMap[k.id];o.setSource({x:Math.round(k.sourcePoint.x),y:Math.round(k.sourcePoint.y)});o.setTarget({x:Math.round(k.targetPoint.x),y:Math.round(k.targetPoint.y)});o.clearBends();if(k.bendPoints){k.bendPoints.forEach(function(m){o.addBend({x:Math.round(m.x),y:Math.round(m.y)});});}if(o.getFromNode()._oGroup&&!o.getFromNode()._oGroup.getCollapsed()){o._shift({x:o.getFromNode()._oGroup.getX(),y:o.getFromNode()._oGroup.getY()});}};
j.prototype._dealWithOrientation=function(){if((!this.oGraph._bIsRtl&&this.oGraph.getOrientation()===O.RightLeft)||(this.oGraph._bIsRtl&&this.oGraph.getOrientation()!==O.RightLeft)){this._verticalMirror(true);}if(this.oGraph.getOrientation()===O.BottomTop){this._horizontalMirror(true);}};
j.prototype._makeExpandedGroupsBoxesAroundNodes=function(){var p=[],B;this.oGraph.getGroups().forEach(function(o){if(o.getCollapsed()||o.aNodes.length===0){return;}p=this._getNodesPoints(o.aNodes);B=G.getBoundingBox(p);G.enlargeBox(B,d);o.setX(Math.round(B.p1.x));o.setY(Math.round(B.p1.y-c));o._iWidth=B.p2.x-B.p1.x;o._iHeight=B.p2.y-B.p1.y+c;},this);};
j.prototype._shrinkGroupsDownward=function(){var k;this.oGraph.getGroups().forEach(function(o){if(o.getCollapsed()){return;}o.aNodes.forEach(function(m){k=(o.getY()+o._iHeight-m.getY())/o._iHeight;m.setY(m.getY()+k);});o.setY(o.getY()+e);o._iHeight-=e;});};
j.prototype._copyStuffWithoutPrefixes=function(k){k.children.forEach(function(o){o.originalId=o.id.substring(i);if(o.children){o.children.forEach(function(m){m.originalId=m.id.substring(i);});}});k.edges.forEach(function(o){o.originalSource=o.source.substring(i);o.originalTarget=o.target.substring(i);});};
return j;});
sap.ui.predefine('sap/suite/ui/commons/networkgraph/layout/LayoutAlgorithm',["sap/suite/ui/commons/library","sap/ui/core/Element","./Geometry"],function(l,E,G){"use strict";
var L=E.extend("sap.suite.ui.commons.networkgraph.layout.LayoutAlgorithm",{metadata:{"abstract":true,publicMethods:["getType","isLayered","layout"]}});
var a=50,N=0.2;var O=l.networkgraph.Orientation,S=l.networkgraph.NodeShape;
L.prototype._normalizeLines=function(){var g=this.getParent(),p={},k,P,i,c,n,s,f,b,d;g.getLines().forEach(function(o){k=o.getFrom()<o.getTo()?o.getFrom()+"-"+o.getTo():o.getTo()+"-"+o.getFrom();if(!p[k]){p[k]={from:o.getFromNode(),to:o.getToNode(),lines:[]};}p[k].lines.push(o);});Object.keys(p).forEach(function(K){P=p[K];if(P.lines.length===1){P.lines[0]._normalizePath();return;}n=Math.min(P.from._getCircleSize(),P.to._getCircleSize())/2;f=2*(1-N)/(P.lines.length-1);i=-1;P.lines.forEach(function(o){i++;c={center:o.getFromNode().getCenterPosition(),apex:o.getToNode().getCenterPosition()};s=G.getNormalizedVector(c,n);s=G.getRotatedVector(s,Math.PI/2);b=((N-1)+i*f)*s.apex.x;d=((N-1)+i*f)*s.apex.y;o.setSource({x:o.getFromNode().getCenterPosition().x+b,y:o.getFromNode().getCenterPosition().y+d});o.setTarget({x:o.getToNode().getCenterPosition().x+b,y:o.getToNode().getCenterPosition().y+d});});});};
L.prototype._stretchLinesToCircleNodeAxes=function(){var g=this.getParent(),h=g.getOrientation()!=O.TopBottom&&g.getOrientation()!=O.BottomTop,f,t;g.getLines().forEach(function(o){if(o._isIgnored()){return;}var s=o.getStretchToCenter();var b=function(n){return((s&&n._isCustom())||n._isCircle())&&!n._isIgnored();};f=o.getFromNode();t=o.getToNode();if(h){if(b(f)){o.getSource().setX(Math.round(f.getX()+f._iWidth/2));}if(b(t)){o.getTarget().setX(Math.round(t.getX()+t._iWidth/2));}}else{if(b(f)){o.getSource().setY(Math.round(f.getY()+f._getShapeSize(h)/2));}if(b(t)){o.getTarget().setY(Math.round(t.getY()+t._getShapeSize(h)/2));}}});};
L.prototype._cutLinesAtBoxNodeBorders=function(){var g=this.getParent(),c,p,b,n,x,i;g.getLines().forEach(function(o){c=o.getCoordinates();if(o.getFromNode().getShape()===S.Box){p={x:c[0].getX(),y:c[0].getY()};b={x:c[1].getX(),y:c[1].getY()};n=this._getNodePoints(o.getFromNode());x=G.getLineRectangleIntersections({p1:p,p2:b},{p1:n[0],p2:n[1]});if(x.length>1){if(G.getPointsDistance(x[0],b)<G.getPointsDistance(x[1],b)){o.setSource(x[0]);}else{o.setSource(x[1]);}}}if(o.getToNode().getShape()===S.Box){i=c.length-1;p={x:c[i-1].getX(),y:c[i-1].getY()};b={x:c[i].getX(),y:c[i].getY()};n=this._getNodePoints(o.getToNode());x=G.getLineRectangleIntersections({p1:p,p2:b},{p1:n[0],p2:n[1]});if(x.length>1){if(G.getPointsDistance(x[0],p)<G.getPointsDistance(x[1],p)){o.setTarget(x[0]);}else{o.setTarget(x[1]);}}}}.bind(this));};
L.prototype._getNodePoints=function(n){return[{x:n.getX(),y:n.getY()},{x:n.getX()+n._iWidth,y:n.getY()+n._iHeight}];};
L.prototype._getNodesPoints=function(e){var p=[];e.forEach(function(o){if(o._isIgnored&&!o._isIgnored()&&(!o._isInCollapsedGroup||!o._isInCollapsedGroup())){p.push({x:o.getX(),y:o.getY()});p.push({x:o.getX()+o._iWidth,y:o.getY()+o._iHeight});}});return p;};
L.prototype._getLinesPoints=function(){var g=this.getParent(),p=[];g.getLines().forEach(function(o){if(o._isIgnored()){return;}if(o.getSource()){p.push({x:o.getSource().getX(),y:o.getSource().getY()});}if(o.getTarget()){p.push({x:o.getTarget().getX(),y:o.getTarget().getY()});}o.getBends().forEach(function(b){p.push({x:b.getX(),y:b.getY()});});});return p;};
L.prototype._verticalMirror=function(u){var g=this.getParent(),b=this._getGraphBoundingBox(),A=(b.p1.x+b.p2.x),f;g.getNodes().forEach(function(n){n.setX(A-(n.getX()+n._iWidth));});g.getGroups().forEach(function(o){f=u?2*o._getBorderSize():0;o.setX(A-(o.getX()+o._iWidth+f));});g.getLines().forEach(function(o){if(o._isIgnored()){return;}if(o.getSource()){o.setSource({x:A-o.getSource().getX()});}if(o.getTarget()){o.setTarget({x:A-o.getTarget().getX()});}o.getBends().forEach(function(B){B.setX(A-B.getX());});if(o._aNipples){o._aNipples.forEach(function(n){n.x=A-n.x;if(n.orientation===O.LeftRight){n.orientation=O.RightLeft;}else if(n.orientation===O.RightLeft){n.orientation=O.LeftRight;}});}});};
L.prototype._horizontalMirror=function(u){var g=this.getParent(),b=this._getGraphBoundingBox(),A=(b.p1.y+b.p2.y),f;g.getNodes().forEach(function(n){n.setY(A-(n.getY()+n._iHeight));});g.getGroups().forEach(function(o){f=u?2*o._getBorderSize():0;o.setY(A-(o.getY()+o._iHeight+f));});g.getLines().forEach(function(o){if(o._isIgnored()){return;}if(o.getSource()){o.setSource({y:A-o.getSource().getY()});}if(o.getTarget()){o.setTarget({y:A-o.getTarget().getY()});}o.getBends().forEach(function(B){B.setY(A-B.getY());});if(o._aNipples){o._aNipples.forEach(function(n){n.y=A-n.y;if(n.orientation===O.TopBottom){n.orientation=O.BottomTop;}else if(n.orientation===O.BottomTop){n.orientation=O.TopBottom;}});}});};
L.prototype._shiftGraph=function(x,y,s){var g=this.getParent();if(!s){g.getGroups().forEach(function(o){o.setX(o.getX()+x);o.setY(o.getY()+y);});}g.getNodes().forEach(function(n){n.setX(n.getX()+x);n.setY(n.getY()+y);n.aLines.forEach(function(o){o._shift({x:x,y:y});});});};
L.prototype._getGraphBoundingBox=function(){var g=this.getParent(),p=this._getNodesPoints(g.getNodes()).concat(this._getNodesPoints(g.getGroups())).concat(this._getLinesPoints());return G.getBoundingBox(p);};
L.prototype._alignCoordinatesWithView=function(){var b=this._getGraphBoundingBox(),x=a-b.p1.x,y=a-b.p1.y;this._shiftGraph(x,y);};
L.prototype._hasHierarchicalGroups=function(){return this.getParent().getGroups().some(function(g){return g.getParentGroupKey();});};
L.prototype.getType=function(){throw new Error("To be overridden in implementing class.");};
L.prototype.isLayered=function(){throw new Error("To be overridden in implementing class.");};
L.prototype.layout=function(){throw new Error("To be overridden in implementing class.");};
return L;});
sap.ui.predefine('sap/suite/ui/commons/networkgraph/layout/LayoutTask',["sap/ui/base/Object"],function(B){"use strict";
var L=B.extend("sap.suite.ui.commons.networkgraph.layout.LayoutTask",{constructor:function(p){B.apply(this,arguments);this._bTerminated=false;this._oPromise=new Promise(function(r,a){p(r,a,this);}.bind(this));}});
L.prototype.then=function(o,O){this._oPromise=this._oPromise.then(o,O);return this;};
L.prototype.catch=function(o){this._oPromise=this._oPromise.catch(o);return this;};
L.prototype.terminate=function(){this._bTerminated=true;return this;};
L.prototype.isTerminated=function(){return this._bTerminated;};
return L;});
sap.ui.predefine('sap/suite/ui/commons/networkgraph/layout/NoopLayout',["sap/suite/ui/commons/library","./LayoutAlgorithm","./LayoutTask"],function(l,L,a){"use strict";var b=l.networkgraph.LayoutRenderType;
var N=L.extend("sap.suite.ui.commons.networkgraph.layout.NoopLayout");
N.prototype.getLayoutRenderType=function(){return b.LayeredWithGroups;};
N.prototype.layout=function(){return new a(function(r,R,o){var g=this.getParent();if(o.isTerminated()){r();return;}if(!g){R("The algorithm must be associated with a graph.");return;}this._normalizeLines();r();}.bind(this));};
return N;});
sap.ui.predefine('sap/suite/ui/commons/networkgraph/util/Dijkstra',[],function(){"use strict";
function D(g,s,S){this.oGraph=g;this.oSourceNode=s;this.oSettings=Object.assign({fnLineValue:function(){return 1;},bIgnoreDirections:false,bIgnoreCollapsed:false},S);this._compute();}
D.prototype._compute=function(){var c,l,i,s=[this.oSourceNode],v={},d={},p={},L=this.oSettings.fnLineValue,I=this.oSettings.bIgnoreDirections,b=this.oSettings.bIgnoreCollapsed;function a(n,f){for(var i=0;i<s.length;i++){if(f>d[s[i].getKey()]){s.splice(i,0,n);return;}}s.push(n);}function e(o,r){var t=r?o.getFromNode():o.getToNode(),T=t.getKey(),f=d[c.getKey()]+L(o);if(f<d[T]){d[T]=f;p[T]={line:o,reverse:r};a(t,f);}}this.oGraph.getNodes().forEach(function(n){d[n.getKey()]=Number.MAX_VALUE;});d[this.oSourceNode.getKey()]=0;while(s.length>0){c=s.shift();if(v[c.getKey()]){continue;}if(b&&(c.isHidden()||c.getVisible()===false||c._isIgnored())){continue;}v[c.getKey()]=true;l=c.getChildLines();for(i=0;i<l.length;i++){e(l[i],false);}if(I){l=c.getParentLines();for(i=0;i<l.length;i++){e(l[i],true);}}}this.mDist=d;this.mPath=p;};
D.prototype.getShortestPathTo=function(t){var c=this.mPath[t.getKey()],p=[],T,f;if(c){T=c.reverse?c.line.getFromNode():c.line.getToNode();}while(c&&T!==this.oSourceNode){p.push(c.line);f=c.reverse?c.line.getToNode():c.line.getFromNode();c=this.mPath[f.getKey()];if(c){T=c.reverse?c.line.getFromNode():c.line.getToNode();}}return p;};
return D;},true);
sap.ui.predefine('sap/suite/ui/commons/statusindicator/Circle',["sap/suite/ui/commons/statusindicator/Shape","sap/suite/ui/commons/util/HtmlElement","sap/suite/ui/commons/statusindicator/SimpleShape","sap/suite/ui/commons/statusindicator/SimpleShapeRenderer"],function(S,H,a,b){"use strict";
var C=a.extend("sap.suite.ui.commons.statusindicator.Circle",{
metadata:{library:"sap.suite.ui.commons",properties:{cx:{type:"float",defaultValue:0},cy:{type:"float",defaultValue:0},r:{type:"float",defaultValue:0}}},
renderer:b
});
C.prototype._getSimpleShapeElement=function(c){var o=new H("circle");o.setId(this._buildIdString(c));o.setAttribute("cx",this.getCx());o.setAttribute("cy",this.getCy());o.setAttribute("r",this.getR());o.setAttribute("stroke-width",this.getStrokeWidth());o.setAttribute("stroke",this._getCssStrokeColor());return o;};
return C;});
sap.ui.predefine('sap/suite/ui/commons/statusindicator/CustomShape',["sap/ui/thirdparty/jquery","../library","sap/suite/ui/commons/statusindicator/ShapeGroup","sap/suite/ui/commons/statusindicator/Shape","sap/suite/ui/commons/statusindicator/Path","sap/suite/ui/commons/statusindicator/Circle","sap/suite/ui/commons/statusindicator/Rectangle","sap/suite/ui/commons/util/HtmlElement","sap/base/Log","./CustomShapeRenderer"],function(q,l,S,a,P,C,R,H,L,b){"use strict";var F=l.statusindicator.FillingType;
var c=a.extend("sap.suite.ui.commons.statusindicator.CustomShape",{metadata:{library:"sap.suite.ui.commons",properties:{x:{type:"int",defaultValue:0},y:{type:"int",defaultValue:0},width:{type:"sap.ui.core.CSSSize",defaultValue:"100%"},height:{type:"sap.ui.core.CSSSize",defaultValue:"100%"},strokeColor:{type:"sap.m.ValueCSSColor",defaultValue:"Neutral"},strokeWidth:{type:"float",defaultValue:0.25},definition:{type:"string",defaultValue:null}},defaultAggregation:"shapes",aggregations:{shapes:{type:"sap.suite.ui.commons.statusindicator.SimpleShape",multiple:true,defaultValue:null},fillingOptions:{type:"sap.suite.ui.commons.statusindicator.FillingOption",multiple:true,defaultValue:null}}}});
c.prototype.init=function(){if(a.prototype.init){a.prototype.init.apply(this,arguments);}this._iDisplayedValue=0;this._initShapeState();};
c.prototype.onBeforeRendering=function(){this._refreshInternalStructure();};
c.prototype.onAfterRendering=function(){this._updateDom(this.getDisplayedValue());};
c.prototype.addFillingOption=function(n){var f=typeof n.getOrder()==="undefined";if(f){L.fatal("The passed FillingOption has to have set its order property.");return this;}var h=this.getFillingOptions().length>0&&this.getFillingOptions().filter(function(o){return o.getOrder()===n.getOrder();}).length>0;if(h){L.fatal("The property 'order' has to be unique within the FillingOptions aggregation, but option"+" with order: "+n.getOrder()+" is already inserted. No FillingOption added.");return this;}return this.addAggregation("fillingOptions",n,true);};
c.prototype._initShapeState=function(){this._aFillableSubShapes=[];this.oDefinition=[];this._sViewBox=null;this.destroyShapes();};
c.prototype._refreshInternalStructure=function(){this._initShapeState();this._aFillableSubShapes.forEach(function(i){if(i.fillingOption){i.fillingOption.destroy();}i.shape.destroy();});if(!this.getDefinition()){if(!this.isA("sap.suite.ui.commons.statusindicator.LibraryShape")){L.fatal("Definition has to be specified.");}return;}var $=q(this.getDefinition());this._sViewBox=$[0].getAttribute("viewBox");q.map($.children(),this._preprocessNode.bind(this));};
c.prototype._preprocessNode=function(n){var $=q(n),t=$.prop("tagName"),d=this;switch(t){case"g":q.map($.children(),function(o){return d._preprocessLeafNode.call(d,q(o));});break;default:this._preprocessLeafNode($);}};
c.prototype._preprocessLeafNode=function($){var t=$.prop("tagName");switch(t){case"path":this._preprocessPathNode($);break;case"circle":this._preprocessCircleNode($);break;case"rect":this._preprocessRectangleNode($);break;case"defs":this._preprocessDefinitionsNode($[0]);break;default:L.fatal("Unsupported node tag name ('"+t+"')");}};
c.prototype._preprocessPathNode=function($){var p=new P({d:$.attr("d")});this._prepareShape(p,$);};
c.prototype._preprocessCircleNode=function($){var o=new C({cx:Number($.attr("cx")),cy:Number($.attr("cy")),r:Number($.attr("r"))});this._prepareShape(o,$);};
c.prototype._preprocessRectangleNode=function($){var r=new R({x:Number($.attr("x")),y:Number($.attr("y")),width:Number($.attr("width")),height:Number($.attr("height"))});this._prepareShape(r,$);};
c.prototype._preprocessDefinitionsNode=function(d){var D=new H("defs");D.addChild(d.innerHTML);return D;};
c.prototype._setInitialValue=function(i){this._iDisplayedValue=i;};
c.prototype.getDisplayedValue=function(){return this._iDisplayedValue;};
c.prototype._prepareShape=function(s,$){s.setFillingAngle(this.getFillingAngle());s.setStrokeWidth(this.getStrokeWidth());s.setStrokeColor(this.getStrokeColor());this.addShape(s);s._injectAnimationPropertiesResolver(this._oAnimationPropertiesResolver);var d=$.attr("style");if(!d){s.setFillingDirection(this.getFillingDirection());s.setFillColor(this.getFillColor());s.setFillingType(this.getFillingType());var e=$.data("shape-id");var f={shape:s,fillingOption:e?this._getFillingOptionById(e):null};this._aFillableSubShapes.push(f);if(f.fillingOption){this._aFillableSubShapes.sort(function(A,B){var o=A.fillingOption;var g=B.fillingOption;if(!o){return-1;}if(!g){return 1;}return o.getOrder()-g.getOrder();});}}else{s.setFillingType(F.None);s._setStyle(d);}};
c.prototype._updateDom=function(d,D){function g(s){var f=s.fillingOption;return f&&f.getWeight()!==0?f.getWeight():1;}L.debug("Updating to "+d,null,this);if(this._aFillableSubShapes.length===0){L.info("Update of DOM skipped. No shape for update found");return;}var t=this._aFillableSubShapes.reduce(function(f,s){return f+g(s);},0);try{var e=this;var v=(D)?d:this._oAnimationPropertiesResolver.getValue(this,d);this._aFillableSubShapes.forEach(function(f){var s=g(f);var G=s/t;var i;if(v===0){i=0;}else if(v>=100*G){i=100;}else{i=v/G;}v-=i*G;if(!D){var r=f.shape.getRenderer();var h=e.getDisplayedFillColor(d);L.debug("Updating color to '"+h+"'",null,f.shape);r._updateDomColor(f.shape,h);}f.shape._updateDom(i,true);});}catch(E){L.fatal("Update of DOM failed. Reason: "+E.message);return;}if(!D){this._oAnimationPropertiesResolver.propagateValueChange(this,d);this._oAnimationPropertiesResolver.propagateColorChange(this,d);}this._iDisplayedValue=d;};
c.prototype._getFillingOptionById=function(i){var r=null;this.getFillingOptions().some(function(f){if(f.getShapeId()===i){r=f;return true;}return false;});return r;};
c.prototype._getInternalViewBox=function(){return this._sViewBox;};
return c;});
sap.ui.predefine('sap/suite/ui/commons/statusindicator/CustomShapeRenderer',["../library","sap/suite/ui/commons/util/HtmlElement","sap/ui/core/Renderer"],function(l,H,R){"use strict";
var C=R.extend("sap.suite.ui.commons.statusindicator.CustomShapeRenderer");
C.render=function(r,c){var m=this._getHtmlModel(c);m.getRenderer().render(r);};
C._getHtmlModel=function(c){var s=new H("svg");s.addControlData(c);s.setAttribute("version","1.1");s.setAttribute("xlmns","http://www.w3.org/2000/svg");var i=c._getInternalViewBox();if(i){s.setAttribute("viewBox",i);}s.setAttribute("preserveAspectRatio",c._buildPreserveAspectRatioAttribute());s.setAttribute("x",c.getX());s.setAttribute("y",c.getY());s.setAttribute("width",c.getWidth());s.setAttribute("height",c.getHeight());c.getShapes().forEach(s.addChild.bind(s));return s;};
C._updateDomColor=function(c,f){c._aFillableSubShapes.forEach(function(s){var S=s.shape;var r=S.getRenderer();r._updateDomColor(S,f);});};
return C;},true);
sap.ui.predefine('sap/suite/ui/commons/statusindicator/DiscreteThreshold',["sap/ui/core/Control"],function(C){"use strict";
var D=C.extend("sap.suite.ui.commons.statusindicator.DiscreteThreshold",{metadata:{library:"sap.suite.ui.commons",properties:{value:{type:"int",defaultValue:0},ariaLabel:{type:"string",defaultValue:null}}}});
return D;});
sap.ui.predefine('sap/suite/ui/commons/statusindicator/FillingOption',["sap/ui/core/Control","sap/base/Log"],function(C,L){"use strict";
var F=C.extend("sap.suite.ui.commons.statusindicator.FillingOption",{metadata:{library:"sap.suite.ui.commons",properties:{shapeId:{type:"string",defaultValue:null},weight:{type:"int",defaultValue:1},order:{type:"int"}}}});
F.prototype.setWeight=function(w){if(w<=0){L.fatal("An invalid weight is passed. Weight should be a positive integer. Given: "+w);}this.setProperty("weight",w);};
return F;});
sap.ui.predefine('sap/suite/ui/commons/statusindicator/LibraryShape',["./CustomShape","./CustomShapeRenderer","./shapes/ShapeFactory"],function(C,a,S){"use strict";
var L=C.extend("sap.suite.ui.commons.statusindicator.LibraryShape",{
metadata:{properties:{shapeId:{type:"string",group:"Misc",defaultValue:null}},events:{"afterShapeLoaded":{}}},
renderer:a
});
L.prototype.setShapeId=function(s){s=this._getValidShapeId(s);this.setProperty("shapeId",s,true);new S().getShapeById(s).then(function(d){this.setDefinition(d);this.fireAfterShapeLoaded();}.bind(this));return this;};
L.prototype._getValidShapeId=function(s){return s.replace(/[\\\.\/]/g,"");};
return L;});
sap.ui.predefine('sap/suite/ui/commons/statusindicator/Path',["sap/suite/ui/commons/util/HtmlElement","sap/suite/ui/commons/statusindicator/SimpleShape","sap/suite/ui/commons/statusindicator/SimpleShapeRenderer"],function(H,S,a){"use strict";
var P=S.extend("sap.suite.ui.commons.statusindicator.Path",{
metadata:{library:"sap.suite.ui.commons",properties:{d:{type:"string",defaultValue:null}}},
renderer:a
});
P.prototype._getSimpleShapeElement=function(p){var o=new H("path");o.setId(this._buildIdString(p));o.setAttribute("d",this.getD(),true);o.setAttribute("stroke-width",this.getStrokeWidth());o.setAttribute("stroke",this._getCssStrokeColor());if(this.aCustomStyleClasses){this.aCustomStyleClasses.forEach(o.addClass.bind(o));}return o;};
return P;});
sap.ui.predefine('sap/suite/ui/commons/statusindicator/PropertyThreshold',["sap/ui/core/Control","sap/suite/ui/commons/statusindicator/util/ThemingUtil"],function(C,T){"use strict";
var P=C.extend("sap.suite.ui.commons.statusindicator.PropertyThreshold",{metadata:{library:"sap.suite.ui.commons",properties:{fillColor:{type:"sap.m.ValueCSSColor",defaultValue:"Neutral"},toValue:{type:"int",defaultValue:0},ariaLabel:{type:"string",defaultValue:null}}}});
P.prototype._getCssFillColor=function(){if(!this._cssFillColor){this._cssFillColor=T.resolveColor(this.getFillColor());}return this._cssFillColor;};
return P;});
sap.ui.predefine('sap/suite/ui/commons/statusindicator/Shape',["sap/ui/thirdparty/jquery","../library","sap/ui/core/Control","sap/suite/ui/commons/util/HtmlElement","sap/suite/ui/commons/statusindicator/util/ThemingUtil","sap/base/Log"],function(q,l,C,H,T,L){"use strict";var F=l.statusindicator.FillingType;var a=l.statusindicator.FillingDirectionType;var V=l.statusindicator.VerticalAlignmentType;var b=l.statusindicator.HorizontalAlignmentType;
var S=C.extend("sap.suite.ui.commons.statusindicator.Shape",{
metadata:{"abstract":true,library:"sap.suite.ui.commons",properties:{fullAnimationDuration:{type:"int",defaultValue:0},fillColor:{type:"sap.m.ValueCSSColor",defaultValue:"Neutral"},animationOnStartup:{type:"boolean",defaultValue:false},animationOnChange:{type:"boolean",defaultValue:true},animationOnStartupDelay:{type:"int",defaultValue:0},fillingDirection:{type:"sap.suite.ui.commons.statusindicator.FillingDirectionType",defaultValue:a.Up},fillingType:{type:"sap.suite.ui.commons.statusindicator.FillingType",defaultValue:F.Linear},fillingAngle:{type:"int",defaultValue:undefined},verticalAlignment:{type:"sap.suite.ui.commons.statusindicator.VerticalAlignmentType",defaultValue:V.Middle},horizontalAlignment:{type:"sap.suite.ui.commons.statusindicator.HorizontalAlignmentType",defaultValue:b.Middle}}},
renderer:null
});
S.prototype.GRADIENT_ID="gradient";S.prototype.STOP_ID="stop";
S.prototype.getDisplayedValue=function(){L.fatal("Must be overridden!");};
S.prototype._setInitialValue=function(i){L.fatal("Must be overridden!");};
S.prototype._updateDom=function(d,D){L.fatal("Must be overridden!");};
S.prototype.init=function(){if(C.prototype.init){C.prototype.init.apply(this,arguments);}this._oAnimationPropertiesResolver=null;};
S.prototype.onBeforeRendering=function(){if(C.prototype.onBeforeRendering){C.prototype.onBeforeRendering.apply(this,arguments);}this._clearBoundingBox();};
S.prototype._getCssFillColor=function(){return T.resolveColor(this.getFillColor());};
S.prototype._resolveFillColor=function(){return this._oAnimationPropertiesResolver.getColor(this,this.getDisplayedValue());};
S.prototype._injectAnimationPropertiesResolver=function(A){this._oAnimationPropertiesResolver=A;};
S.prototype.getDisplayedFillColor=function(d){return this._oAnimationPropertiesResolver.getColor(this,d);};
S.prototype.getFullAnimationDuration=function(){return 250;};
S.prototype._buildPreserveAspectRatioAttribute=function(){var r="x";switch(this.getHorizontalAlignment()){case b.Left:r+="Min";break;case b.Middle:r+="Mid";break;case b.Right:r+="Max";break;}r+="Y";switch(this.getVerticalAlignment()){case V.Top:r+="Min";break;case V.Middle:r+="Mid";break;case V.Bottom:r+="Max";break;}r+=" meet";return r;};
S.prototype._getGradientElement=function(d){var g=new H(this.getFillingType()===F.Linear?"linearGradient":"radialGradient");g.setId(this._buildIdString(this.getId(),this.GRADIENT_ID));if(this.getFillingType()===F.Linear){var i=this.computeLinearFillingAngle();g.setAttribute("x1",i===90?1:0);g.setAttribute("y1",i===0?1:0);g.setAttribute("x2",i===270?1:0);g.setAttribute("y2",i===180?1:0);}var o=this._getDisplayedGradientOffset(d);var s=new H(this.STOP_ID);s.setAttribute("offset",o);s.setAttribute("stop-color","white");g.addChild(s);var e=new H(this.STOP_ID);e.setAttribute("offset",o);e.setAttribute("stop-color","transparent");g.addChild(e);return g;};
S.prototype.getPolygonElement=function(d){var p=new H("polygon");p.setId(this._buildIdString(this.getId(),"polygon"));p.setAttribute("fill","white");return p;};
S.prototype.computeLinearFillingAngle=function(){if(this.getFillingAngle()!==undefined){return this._getNormalizedFillingAngle();}switch(this.getFillingDirection()){case a.Up:return 0;case a.Down:return 180;case a.Left:return 90;case a.Right:return 270;default:L.error("Unknown FillingDirection '"+this.getFillingDirection()+"'");return 0;}};
S.prototype._useGradientForAnimation=function(){var n=this._getNormalizedFillingAngle();var f=this.getFillingType();return f===F.Radial||(f===F.Linear&&(n===undefined||[0,90,180,270].indexOf(n)>-1));};
S.prototype._getPolygonPoints=function(v){var r;switch(this.getFillingType()){case F.Linear:r=this._getPolygonPointsForLinearFilling(v);break;case F.Circular:r=this._getPolygonPointsForCircularFilling(v);break;default:L.error("Unknown FillingType '"+this.getFillingType()+"' given.");r=this._getPolygonPointsForLinearFilling(v);}r=r.map(function(p){p.x=Number(p.x.toFixed(3));p.y=Number(p.y.toFixed(3));return p;});return r;};
S.prototype._getPolygonPointsForLinearFilling=function(v){var n=180-this._getNormalizedFillingAngle();var t=Math.tan(n*Math.PI/180);var B=this._getBoundingPoints();var s=B.start;var e=B.end;var d=s.y-(t*s.x);var f=e.y-(t*e.x);var k=d+((f-d)/100)*v;var x=s.x;var y=x*t+k;var g=s.y;var h=(g-k)/t;var r=[s,{x:x,y:y},{x:h,y:g}];return r;};
S.prototype._getPolygonPointsForCircularFilling=function(v){var t=this,A=3.6*v,B=this._getBoundingBox(),p=[];var x,y,P;var s=c(B.x+B.width/2,B.y);var o=c(B.x+B.width/2,B.y+B.height/2);function d(f){var r=Object.assign({},f);if(t.getFillingDirection()===a.CounterClockwise){var X=f.x-o.x;r.x=o.x-X;}return r;}function e(A,i,f){var g=Math.tan((i-A)*Math.PI/180);return g*f/2;}p.push(s);if(0<A&&A<45){x=e(A,0,B.height);P=c(s.x-x,s.y);p.push(d(P));}if(45<=A){p.push(d(c(B.x+B.width,B.y)));}if(45<A&&A<135){y=e(A,90,B.width);P=c(B.x+B.width,B.y+B.height/2-y);p.push(d(P));}if(135<=A){p.push(d(c(B.x+B.width,B.y+B.height)));}if(135<A&&A<225){x=e(A,180,B.height);P=c(B.x+B.width/2+x,B.y+B.height);p.push(d(P));}if(225<=A){p.push(d(c(B.x,B.y+B.height)));}if(225<A&&A<315){y=e(A,270,B.width);P=c(B.x,B.y+B.height/2+y);p.push(d(P));}if(315<=A){p.push(d(c(B.x,B.y)));}if(315<A&&A<=360){x=e(A,360,B.height);P=c(B.x+B.width/2-x,B.y);p.push(d(P));}p.push(o);return p;};
S.prototype._isFillingAngleInFirstQuadrant=function(){var A=this._getNormalizedFillingAngle();return 0<A&&A<90;};
S.prototype._isFillingAngleInSecondQuadrant=function(){var A=this._getNormalizedFillingAngle();return 90<A&&A<180;};
S.prototype._isFillingAngleInThirdQuadrant=function(){var A=this._getNormalizedFillingAngle();return 180<A&&A<270;};
S.prototype._isFillingAngleInForthQuadrant=function(){var A=this._getNormalizedFillingAngle();return 270<A&&A<360;};
S.prototype._getBoundingPoints=function(){var B=this._getBoundingBox();var s=B.x+B.width;var o=B.y+B.height;var e=B.x;var E=B.y;if(this._isFillingAngleInFirstQuadrant()){}else if(this._isFillingAngleInSecondQuadrant()){s=B.x+B.width;o=B.y;e=B.x;E=B.y+B.height;}else if(this._isFillingAngleInThirdQuadrant()){s=B.x;o=B.y;e=B.x+B.width;E=B.y+B.height;}else if(this._isFillingAngleInForthQuadrant()){s=B.x;o=B.y+B.height;e=B.x+B.width;E=B.y;}else{L.error("Invalid call of _getBoundingPoints. FillingAngle '"+this.getFillingAngle()+"' is not in any quadrant");}return{start:c(s,o),end:c(e,E)};};
S.prototype._getBoundingBox=function(){if(!this._oBoundingBox){this._oBoundingBox=this.$()[0].getBBox();}return this._oBoundingBox;};
S.prototype._clearBoundingBox=function(){this._oBoundingBox=null;};
S.prototype._getNormalizedFillingAngle=function(){if(this.getFillingAngle()===undefined){return this.getFillingAngle();}var r=this.getFillingAngle()%360;if(r<0){r+=360;}return r;};
S.prototype.isFillable=function(){return this.getFillingType()!==F.None;};
S.prototype._getDisplayedGradientOffset=function(d){if(this.isFillable()){var r=d/100;return r;}else{return 1;}};
S.prototype._getMaskElement=function(m){var M=new H("mask");M.setId(m);if(this._useGradientForAnimation()){var o=this._getSimpleShapeElement(this._buildIdString(this.getId(),"mask-shape"));o.setAttribute("stroke-width",0);o.setAttribute("stroke","white");o.setAttribute("fill",this._buildSvgUrlString(this.getId(),this.GRADIENT_ID));M.addChild(o);}else{M.addChild(this.getPolygonElement(this._iDisplayedValue));}return M;};
S.prototype._buildSvgUrlString=function(){return"url(#"+this._buildIdString.apply(this,arguments)+")";};
S.prototype._buildIdString=function(){var s=q.makeArray(arguments).join("-");return s;};
function c(x,y){return{x:x,y:y};}
return S;});
sap.ui.predefine('sap/suite/ui/commons/statusindicator/ShapeGroup',["sap/ui/core/Control","sap/ui/core/Core","sap/ui/core/Configuration","sap/suite/ui/commons/statusindicator/util/ProgressHandler","sap/base/Log"],function(C,a,b,P,L){"use strict";
var S=C.extend("sap.suite.ui.commons.statusindicator.ShapeGroup",{metadata:{library:"sap.suite.ui.commons",properties:{weight:{type:"int",defaultValue:10}},defaultAggregation:"shapes",aggregations:{shapes:{type:"sap.suite.ui.commons.statusindicator.Shape",multiple:true}}}});
S.prototype.init=function(){this._iTargetValue=0;this._oAnimationPropertiesResolver=null;this._iLastDirectValueUpdate=0;};
S.prototype.discreteThresholdsChangeHandler=function(c){var n=this._oAnimationPropertiesResolver._getGroupValue(this,c);if(n!==this._iLastDirectValueUpdate){this.getShapes().forEach(function(s){s._updateDom(n,true);});this._iLastDirectValueUpdate=n;}};
S.prototype.propertyThresholdsChangeHandler=function(n){this.getShapes().forEach(function(s){if(s.getDisplayedValue()!==0){s.getRenderer()._updateDomColor(s,n);}});};
S.prototype._injectAnimationPropertiesResolver=function(A){this._oAnimationPropertiesResolver=A;this._oAnimationPropertiesResolver.addDiscreteThresholdChange(this.discreteThresholdsChangeHandler.bind(this));this._oAnimationPropertiesResolver.addPropertyThresholdChange(this.propertyThresholdsChangeHandler.bind(this));this.getShapes().forEach(function(s){s._injectAnimationPropertiesResolver(A);});};
S.prototype.addShape=function(s){this.addAggregation("shapes",s,true);s._injectAnimationPropertiesResolver(this._oAnimationPropertiesResolver);return this;};
S.prototype._setValue=function(v,n){var t=this;n=n||false;this._iTargetValue=v;if(!this._isAnimationAllowed()||n){this.getShapes().forEach(function(s){s._updateDom(t._iTargetValue);});return Promise.resolve();}this.getShapes().forEach(function(s){if(!s.getAnimationOnChange()){s._updateDom(t._iTargetValue);}});if(this.oCurrentProgressHandler&&this.oCurrentProgressHandler.isInProgress()){this.oCurrentProgressHandler.cancel();}this.oCurrentProgressHandler=new P(function(p){var N=performance.now();t._animationStep(N,p,N);});return this.oCurrentProgressHandler.start();};
S.prototype._animationStep=function(l,p,c){L.debug("AnimationStep at time: "+c.toString(10),null,this);c=Math.max(c,l);if(p.isCanceled()){p.stop({cancelled:true});return;}var A=true;var t=this._iTargetValue;this.getShapes().forEach(function(s){var d=s.getDisplayedValue();if(d===t){return;}var T=l+s.getFullAnimationDuration()*Math.abs(t-d)/100;var v=t;if(c<T){var D=t-d;var i=T-l;var e=(c-l)/i;v=D*e+d;A=false;}s._updateDom(v);});if(A){p.finish();}else{window.requestAnimationFrame(this._animationStep.bind(this,c,p));}};
S.prototype._showsFullProgress=function(){return!this.getShapes().some(function(s){return s.getDisplayedValue()!==100;});};
S.prototype._setInitialValue=function(i){this._iTargetValue=i;this._iLastDirectValueUpdate=i;this.getShapes().forEach(function(s){s._setInitialValue(i);});};
S.prototype._isAnimationAllowed=function(){var A=a.getConfiguration();var s=A.getAnimationMode();return s!==b.AnimationMode.none;};
return S;});
sap.ui.predefine('sap/suite/ui/commons/statusindicator/SimpleShape',["../library","sap/ui/core/Control","sap/suite/ui/commons/statusindicator/Shape","sap/suite/ui/commons/statusindicator/util/ThemingUtil","sap/base/Log","./SimpleShapeRenderer"],function(l,C,S,T,L,a){"use strict";
var b=S.extend("sap.suite.ui.commons.statusindicator.SimpleShape",{metadata:{"abstract":true,library:"sap.suite.ui.commons",properties:{strokeWidth:{type:"float",defaultValue:0.25},strokeColor:{type:"sap.m.ValueCSSColor",defaultValue:"Neutral"}}}});
b.prototype._getSimpleShapeElement=function(){L.fatal("Must be overriden!");};
b.prototype.init=function(){if(S.prototype.init){S.prototype.init.apply(this,arguments);}this._iDisplayedValue=0;this._sViewBox=null;};
b.prototype.onBeforeRendering=function(){if(S.prototype.onBeforeRendering){S.prototype.onBeforeRendering.apply(this,arguments);}this.getRenderer()._clearDomReferences(this);};
b.prototype._updateDom=function(d,D){L.debug("Updating to "+d,null,this);var r=this.getRenderer();if(!D){var n=this.getDisplayedFillColor(d);r._updateDomColor(this,n);this._oAnimationPropertiesResolver.propagateColorChange(this,d);}var R=(D)?d:this._oAnimationPropertiesResolver.getValue(this,d);if(this._useGradientForAnimation()){r._updateDomGradient(this,R);}else{r._updateDomPolygon(this,R);}if(!D){this._oAnimationPropertiesResolver.propagateValueChange(this,d);this._iDisplayedValue=d;}};
b.prototype.getDisplayedValue=function(){return this._iDisplayedValue;};
b.prototype._setInitialValue=function(i){this._iDisplayedValue=i;};
b.prototype._setStyle=function(s){this._sStyleAttribute=s;};
b.prototype._setInternalViewBox=function(v){this._sViewBox=v;};
b.prototype._getInternalViewBox=function(){return this._sViewBox;};
b.prototype._getCssStrokeColor=function(){return T.resolveColor(this.getStrokeColor());};
return b;});
sap.ui.predefine('sap/suite/ui/commons/statusindicator/SimpleShapeRenderer',["../library","sap/suite/ui/commons/util/HtmlElement","sap/ui/core/Renderer"],function(l,H,R){"use strict";var F=l.statusindicator.FillingType;
var S=R.extend("sap.suite.ui.commons.statusindicator.SimpleShapeRenderer");
S.render=function(r,c){var m=this._getHtmlModel(c);m.getRenderer().render(r);};
S._getHtmlModel=function(c){var m=c._buildIdString(c.getId(),"mask");var s=new H("svg");s.setAttribute("xlmns","http://www.w3.org/2000/svg");var i=c._getInternalViewBox();if(i){s.setAttribute("viewBox",i);}s.setAttribute("preserveAspectRatio",c._buildPreserveAspectRatioAttribute());s.setAttribute("overflow","visible");s.addControlData(c);var d=new H("defs");if(c.getFillingType()!==F.None){if(c._useGradientForAnimation()){d.addChild(c._getGradientElement(c._iDisplayedValue));}var M=c._getMaskElement(m);d.addChild(M);s.addChild(d);}var a=c._buildIdString(c.getId(),"shape");var o=c._getSimpleShapeElement(a);o.setAttribute("fill",c._resolveFillColor());o.setAttribute("mask",c._buildSvgUrlString(m));if(c._sStyleAttribute){o.setAttribute("style",c._sStyleAttribute);}o.setAttribute("stroke-width",0);s.addChild(o);var b=c._getSimpleShapeElement(c._buildIdString(a,"border"));b.setAttribute("fill","transparent");s.addChild(b);return s;};
S._updateDomColor=function(c,n){c.$("shape").attr("fill",n);};
S._updateDomGradient=function(c,v){if(!c.$stopNodes){c.$stopNodes=c.$(c.GRADIENT_ID).find(c.STOP_ID);}c.$stopNodes.attr("offset",c._getDisplayedGradientOffset(v));};
S._updateDomPolygon=function(c,v){if(!c.$polygon){c.$polygon=c.$("polygon");}var p=c._getPolygonPoints(v).reduce(function(a,i){return a+i.x+","+i.y+" ";},"");c.$polygon.attr("points",p);};
S._clearDomReferences=function(c){c.$polygon=null;c.$stopNodes=null;};
return S;},true);
sap.ui.predefine('sap/suite/ui/commons/statusindicator/StatusIndicator',["../library","sap/m/library","sap/ui/core/Control","sap/ui/core/Core","sap/suite/ui/commons/statusindicator/util/AnimationPropertiesResolver","sap/suite/ui/commons/statusindicator/util/ThemingUtil","sap/m/Text","sap/base/Log","./StatusIndicatorRenderer"],function(l,s,C,c,A,T,d,L,S){"use strict";var f=l.statusindicator.SizeType;var g=l.statusindicator.LabelPositionType;var V=s.ValueColor;
var h=C.extend("sap.suite.ui.commons.statusindicator.StatusIndicator",{metadata:{library:"sap.suite.ui.commons",properties:{width:{type:"sap.ui.core.CSSSize",group:"Dimension"},height:{type:"sap.ui.core.CSSSize",group:"Dimension"},value:{type:"int",defaultValue:0},viewBox:{type:"string",defaultValue:null},ariaLabel:{type:"string",defaultValue:null},size:{type:"sap.suite.ui.commons.statusindicator.SizeType",defaultValue:f.None},labelPosition:{type:"sap.suite.ui.commons.statusindicator.LabelPositionType",defaultValue:g.Left},showLabel:{type:"boolean",defaultValue:false}},defaultAggregation:"groups",aggregations:{groups:{type:"sap.suite.ui.commons.statusindicator.ShapeGroup",multiple:true},propertyThresholds:{type:"sap.suite.ui.commons.statusindicator.PropertyThreshold",multiple:true},discreteThresholds:{type:"sap.suite.ui.commons.statusindicator.DiscreteThreshold",multiple:true},label:{type:"sap.m.Text",multiple:false}},associations:{ariaDescribedBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaDescribedBy"},ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},events:{press:{}}}});
h.prototype.init=function(){if(C.prototype.init){C.prototype.init.apply(this,arguments);}this._sortedPropertyThresholds=[];this._sortedDiscreteThresholds=[];this._bStarted=false;this._oCurrentAnimationPromise=null;this._oAnimationPropertiesResolver=new A(this);this._oDefaultLabel=null;if(!sap.ui.getCore().isInitialized()){sap.ui.getCore().attachInit(this._handleCoreInitialized.bind(this));}else{this._handleCoreInitialized();}};
h.prototype._handleCoreInitialized=function(){sap.ui.getCore().attachThemeChanged(this._handleThemeApplied,this);};
h.prototype._handleThemeApplied=function(){this.invalidate();};
h.prototype._internalIds=Object.freeze({svgNodeId:"svg"});
h.prototype.getLabel=function(){var o=this.getAggregation("label");if(o!==null){return o;}if(this._oDefaultLabel!==null){return this._oDefaultLabel;}this._oDefaultLabel=new d(this.getId()+"-label");this.addDependent(this._oDefaultLabel);return this._oDefaultLabel;};
h.prototype.addPropertyThreshold=function(t){this.addAggregation("propertyThresholds",t,true);if(this._sortedPropertyThresholds.filter(function(e){return e.getToValue()===t.getToValue();}).length>0){L.fatal("There are two or more property thresholds with the same toValue in thresholds "+"aggregation. The last threshold from them has the highest priority");}this._sortedPropertyThresholds.push(t);this._sortedPropertyThresholds.sort(function(a,b){return a.getToValue()-b.getToValue();});return this;};
h.prototype.addDiscreteThreshold=function(t){this.addAggregation("discreteThresholds",t,true);if(this._sortedDiscreteThresholds.filter(function(e){return e.getValue()===t.getValue();}).length>0){L.fatal("There are two or more discrete thresholds with the same value in thresholds "+"aggregation. The last threshold from them has the highest priority");}this._sortedDiscreteThresholds.push(t);this._sortedDiscreteThresholds.sort(function(a,b){return a.getValue()-b.getValue();});return this;};
h.prototype._discreteThresholdsEnabled=function(){return this._sortedDiscreteThresholds.length>0;};
h.prototype._getDiscreteThresholdForValue=function(v){var r=null;this._sortedDiscreteThresholds.every(function(t){if(v>=t.getValue()){r=t;return true;}return false;});return r;};
h.prototype._propertyThresholdsEnabled=function(){return this._sortedPropertyThresholds.length>0;};
h.prototype._getPropertyThresholdForValue=function(v){var r=null;this._sortedPropertyThresholds.some(function(t){if(v<=t.getToValue()){r=t;return true;}return false;});return r;};
h.prototype._getFullId=function(i){return this.getId()+"-"+i;};
h.prototype.onBeforeRendering=function(){var t=this;this.getGroups().forEach(function(G){G._injectAnimationPropertiesResolver(t._oAnimationPropertiesResolver);});};
h.prototype.onAfterRendering=function(){this._setValueToLabel(this.getValue());this._start();};
h.prototype._start=function(){this._bStarted=true;this._propagateValueToGroups();};
h.prototype._shouldInvertGroupUpdateOrder=function(G){var t;G.some(function(o,I){t=I;return o.newValue!==100;});var i;this.getGroups().some(function(o,I){i=I;return!o._showsFullProgress();});return(t<i);};
h.prototype._propagateValueToGroups=function(){var n=this.getSize()===f.Small;var G=this._computeGroupValueDistribution();var i=this._shouldInvertGroupUpdateOrder(G);if(i){G=G.reverse();}this._updateAccessibilityDOM();this._oCurrentAnimationPromise=G.reduce(function(a,o){return a.then(function(r){if(r&&r.cancelled){L.debug("Group animation cancelled.");return r;}else{return o.group._setValue(o.newValue,n);}});},Promise.resolve());return this._oCurrentAnimationPromise;};
h.prototype._computeGroupValueDistribution=function(){var v=this.getValue();var t=this._getTotalWeight();return this.getGroups().map(function(G){var a=G.getWeight()/t;var n;if(v===0){n=0;}else if(v>=100*a){n=100;}else{n=v/a;}v-=n*a;return{group:G,newValue:Number(n.toFixed(3))};});};
h.prototype.setValue=function(v){v=Math.round(v);if(v>100){v=100;}if(v<0){v=0;}this.setProperty("value",v,true);this._setValueToLabel(v);if(this._bStarted){this._propagateValueToGroups();}return this;};
h.prototype._setValueToLabel=function(v){var o=this.getLabel();var a;o.setText(Math.floor(v)+"%");a=T.resolveColor(V.Neutral);if(this._propertyThresholdsEnabled()){var p=this._getPropertyThresholdForValue(v);if(p){a=p._getCssFillColor();}}var $=o.$();if($){$.css("color",a);}};
h.prototype._getTotalWeight=function(){return this.getGroups().reduce(function(a,G){return a+G.getWeight();},0);};
h.prototype.ontap=h.prototype.firePress;h.prototype.onsapenter=h.prototype.firePress;h.prototype.onsapspace=h.prototype.firePress;
h.prototype._getGroupShapes=function(){return this.getGroups().reduce(function(a,G){return a.concat(G.getShapes());},[]);};
h.prototype._updateAccessibilityDOM=function(){var v=this.getValue();this.$().attr("aria-valuenow",v);this.$().attr("aria-valuetext",this._createValueTextMessage(v));};
h.prototype._createValueTextMessage=function(v){var D=null;var a=null;var p=null;var r=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");if(this._discreteThresholdsEnabled()){var o=this._getDiscreteThresholdForValue(v);if(o){D=o.getAriaLabel();a=true;}else{D=this._sortedDiscreteThresholds[0].getAriaLabel();a=false;}}if(this._propertyThresholdsEnabled()){var P=this._getPropertyThresholdForValue(v);if(P){p=P.getAriaLabel();}}var b;if(D){if(p){if(a){b=r.getText("STATUS_INDICATOR_VALUE_ABOVE_THRESHOLD_COLOR",[v,D,p]);}else{b=r.getText("STATUS_INDICATOR_VALUE_BELOW_THRESHOLD_COLOR",[v,D,p]);}}else{if(a){b=r.getText("STATUS_INDICATOR_VALUE_ABOVE_THRESHOLD",[v,D]);}else{b=r.getText("STATUS_INDICATOR_VALUE_BELOW_THRESHOLD",[v,D]);}}}else if(p){b=r.getText("STATUS_INDICATOR_VALUE_COLOR",[v,p]);}else{b=r.getText("STATUS_INDICATOR_VALUE",[v]);}return b;};
return h;});
sap.ui.predefine('sap/suite/ui/commons/statusindicator/StatusIndicatorRenderer',["../library","sap/ui/core/library","sap/suite/ui/commons/util/HtmlElement","sap/ui/core/Renderer","sap/base/Log"],function(l,c,H,R,L){"use strict";var s=l.statusindicator.SizeType;var o=l.statusindicator.LabelPositionType;var t=c.TextAlign;var r=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");
function g(b,p){var d;p=typeof p==="string"?p:"";switch(b.getSize()){case s.Small:d="sapSuiteUiCommonsStatusIndicatorSmall";break;case s.Medium:d="sapSuiteUiCommonsStatusIndicatorMedium";break;case s.Large:d="sapSuiteUiCommonsStatusIndicatorLarge";break;case s.ExtraLarge:d="sapSuiteUiCommonsStatusIndicatorExtraLarge";break;case s.None:break;default:L.error("Unknown size. Expecting size defined in sap.suite.ui.commons.statusindicator.SizeType,"+" but '"+b.getSize()+"' given.");d="sapSuiteUiCommonsStatusIndicatorSmall";}return d+p;}
function a(b){var p=b.getLabelPosition();var d=b.getSize();return"sapSuiteUiCommonsStatusIndicator"+d+p+"Label";}
var S=R.extend("sap.suite.ui.commons.StatusIndicatorRenderer");
S.render=function(b,C){var m=this._getHtmlModel(C);m.getRenderer().render(b);};
S._getHtmlModel=function(b){var d=b.getLabelPosition();var i=d===o.Left||d===o.Right,I=d===o.Left||d===o.Top;var e=new H("div");e.addControlData(b);e.addClass("sapSuiteUiCommonsStatusIndicator");e.setAttribute("role","progressbar");e.setAttribute("aria-roledescription",r.getText("STATUS_INDICATOR_ARIA_ROLE_DESCRIPTION"));e.setAttribute("aria-readonly",true);var A=b.getAriaLabel();e.setAttribute("aria-label",A?A:r.getText("STATUS_INDICATOR_ARIA_LABEL"),true);var f=b.getAriaLabelledBy();if(f&&f.length>0){e.setAttribute("aria-labelledby",f.join(" "),true);}var h=b.getAriaDescribedBy();if(h&&h.length>0){e.setAttribute("aria-describedby",h.join(" "),true);}e.setAttribute("tabindex","0");e.setAttribute("aria-valuemin",0);e.setAttribute("aria-valuemax",100);if(i){e.addClass("sapSuiteUiCommonsStatusIndicatorHorizontal");}else{e.addClass("sapSuiteUiCommonsStatusIndicatorVertical");}if(b.getShowLabel()){var j=new H("div");if(I){j.addClass("sapSuiteUiCommonsStatusIndicatorLabelBeforeSvg");}else{j.addClass("sapSuiteUiCommonsStatusIndicatorLabelAfterSvg");}var k=b.getLabel();k.addStyleClass("sapSuiteUiCommonsStatusIndicatorLabel");k.addStyleClass(g(b,"Label"));k.addStyleClass(a(b));k.setTextAlign(i?t.Left:t.Center);j.addChild(k);e.addChild(j);}var m=new H("div");m.setAttribute("focusable",false);m.addClass("sapSuiteUiCommonsStatusIndicatorSvg");m.addClass(g(b,"Svg"));m.addStyle("width",b.getWidth());m.addStyle("height",b.getHeight());m.addChild(this._getSvgElement(b));e.addChild(m);return e;};
S._getSvgElement=function(b){var d=new H("svg");d.setId(b._getFullId(b._internalIds.svgNodeId));d.setAttribute("version","1.1");d.setAttribute("xlmns","http://www.w3.org/2000/svg");d.setAttribute("preserveAspectRatio","xMidYMid meet");d.addStyle("width","100%");d.addStyle("height","100%");d.setAttribute("focusable",false);if(b.getViewBox()){d.setAttribute("viewBox",b.getViewBox(),true);}b._getGroupShapes().forEach(function(e){d.addChild(e);});return d;};
return S;},true);
sap.ui.predefine('sap/suite/ui/commons/statusindicator/shapes/ShapeFactory',["sap/ui/base/Object","sap/ui/thirdparty/jquery"],function(B,q){"use strict";var l={};
var S=B.extend("sap.suite.ui.commons.statusindicator.shapes.ShapeFactory");
S.prototype.getShapeById=function(i){var l=this._getLoadedShapes(),s=l[i]||null;if(!s){return new Promise(function(r,a){q.ajax({url:sap.ui.require.toUrl("sap/suite/ui/commons/statusindicator")+"/shapes/"+i+".svg",dataType:"text"}).done(function(d){l[i]=d;r(d);}).fail(function(e){a(e);});});}return Promise.resolve(s);};
S.prototype._getLoadedShapes=function(){return l;};
S.prototype._removeAllLoadedShapes=function(){l={};};
return S;});
sap.ui.predefine('sap/suite/ui/commons/taccount/TAccountPanelRenderer',["sap/ui/core/Renderer","sap/m/PanelRenderer"],function(R,P){"use strict";var T=R.extend(P),b;
T.renderContent=function(r,c){b=c;P.renderContent.apply(this,[r,c]);};
T.renderChildren=function(r,c){var i=b&&b.getId();if(b){var t=b.getTable();if(t){r.write("<div id=\""+i+"-table\" class=\"sapSuiteUiCommonsAccountPanelTable\">");r.renderControl(t);r.write("</div>");}}r.write("<div id=\""+i+"-datacontent\" class=\"sapSuiteUiCommonsAccountPanelContent\">");c.forEach(r.renderControl);r.write("</div>");var o=b&&b.getShowOverlay()?"sapSuiteUiCommonsAccountPanelOverlayVisible":"";r.write("<div id=\""+i+"-overlay\" class=\"sapSuiteUiCommonsAccountPanelOverlay "+o+" \">");r.write("</div>");};
return T;},true);
sap.ui.predefine('sap/suite/ui/commons/taccount/TAccountUtils',["sap/ui/core/format/NumberFormat","sap/ui/core/Core"],function(N,C){"use strict";var T={};T._oCurrencyFormatter=null;
T.formatCurrency=function(v,c){return T._getCurrencyFormatter().format(v,c)||"";};
T._getCurrencyFormatter=function(){if(!T._oCurrencyFormatter){T._oCurrencyFormatter=N.getCurrencyInstance({showMeasure:false},C.getConfiguration().getLocale());}return T._oCurrencyFormatter;};
return T;},true);
sap.ui.predefine('sap/suite/ui/commons/util/DateUtils',["sap/base/Log"],function(L){"use strict";var D=function(){throw new Error();};
D.resetDateToStartOfDay=function(d){if(D.isValidDate(d)){d.setHours(0);d.setMinutes(0);d.setSeconds(0);d.setMilliseconds(0);}};
D.resetDateToEndOfDay=function(d){if(D.isValidDate(d)){d.setHours(23);d.setMinutes(59);d.setSeconds(59);d.setMilliseconds(999);}};
D.resetDateToStartOfMonth=function(d){if(D.isValidDate(d)){d.setDate(1);D.resetDateToStartOfDay(d);}};
D.resetDateToEndOfMonth=function(d){if(D.isValidDate(d)){d.setDate(1);d.setMonth(d.getMonth()+1);d.setDate(0);D.resetDateToEndOfDay(d);}};
D.resetDateToStartOfYear=function(d){if(D.isValidDate(d)){d.setMonth(0);D.resetDateToStartOfMonth(d);}};
D.resetDateToEndOfYear=function(d){if(D.isValidDate(d)){d.setMonth(11);D.resetDateToEndOfMonth(d);}};
D.resetDateToStartOfWeek=function(d,f){if(D.isValidDate(d)){if(f===undefined){f=1;}else if(isNaN(f)||!isFinite(f)){L.error("DateUtils iFirstDayOfWeek value ='"+f+"' is invalid.");return;}d.setDate(d.getDate()-(d.getDay()-f+7)%7);D.resetDateToStartOfDay(d);}};
D.resetDateToEndOfWeek=function(d,s){if(D.isValidDate(d)){var a;if(s&&!(s instanceof Object)){L.error("DateUtils oSettings is not an object.");return;}if(!s){s={};}if(s.iDuration===undefined){a=7;}else{a=s.iDuration;if(isNaN(a)||!isFinite(a)){L.error("DateUtils duration value ='"+a+"' is invalid.");return;}}D.resetDateToStartOfWeek(d,s.iFirstDayOfWeek);d.setDate(d.getDate()+a-1);D.resetDateToEndOfDay(d);}};
D.isValidDate=function(d){if(Object.prototype.toString.call(d)!=="[object Date]"||isNaN(d.getTime())){L.error("DateUtils invalid date="+d);return false;}return true;};
D.dateDaysEqual=function(d,a){if(D.isValidDate(d)&&D.isValidDate(a)){return(d.getFullYear()===a.getFullYear()&&d.getMonth()===a.getMonth()&&d.getDate()===a.getDate());}return false;};
D.dateMonthsEqual=function(d,a){if(D.isValidDate(d)&&D.isValidDate(a)){return(d.getFullYear()===a.getFullYear()&&d.getMonth()===a.getMonth());}return false;};
D.incrementDateByIndex=function(s,i){var r=null;if(D.isValidDate(s)&&isFinite(i)){r=new Date(s);r.setDate(s.getDate()+parseInt(i,10));}return r;};
D.incrementMonthByIndex=function(s,i){var r=null;if(D.isValidDate(s)&&isFinite(i)){r=new Date(s);D.resetDateToStartOfMonth(r);r.setMonth(s.getMonth()+parseInt(i,10));}return r;};
D.numberOfMonthsApart=function(s,e){s=new Date(s);e=new Date(e);D.resetDateToStartOfMonth(s);D.resetDateToStartOfMonth(e);var f=s.getTime()<=e.getTime();var F=0,b=0,n=0;for(F=0,b=0;!(s.getDate()===e.getDate()&&s.getMonth()===e.getMonth()&&s.getFullYear()===e.getFullYear());F++,b--){if(f){s.setMonth(s.getMonth()+1);}else{s.setMonth(s.getMonth()-1);}}if(f){n=F;}else{n=b;}return n;};
D.numberOfDaysApart=function(s,e){s=new Date(s);e=new Date(e);D.resetDateToStartOfDay(s);D.resetDateToStartOfDay(e);var m=24*60*60*1000;var d=Math.round(Math.abs((s.getTime()-e.getTime())/m));if(s.getTime()>e.getTime()){return-d;}else{return d;}};
D.parseDate=function(d,p){if(d instanceof Date||d===null){return d;}p=(p!==false);if(typeof d==="string"){var r=/Date\((-*\d+)\)/.exec(d);if(r===null){if(p){var a=Date.parse(d);if(!isNaN(a)){d=new Date(a);}else if(!isNaN(d)){d=new Date(parseInt(d,10));}}}else{d=new Date(parseInt(r[1],10));}}else{d=new Date(parseInt(d,10));}return d;};
return D;},true);
sap.ui.predefine('sap/suite/ui/commons/util/HtmlElement',["sap/ui/base/Object","sap/ui/core/Control","./HtmlElementRenderer","sap/base/assert","sap/base/security/encodeXML","sap/base/Log"],function(B,C,H,a,e,L){"use strict";
var b=B.extend("sap.suite.ui.commons.util.HtmlElement",{constructor:function(n){B.apply(this,arguments);a(typeof n==="string","Element name must be a string.");this._sName=n;this._mAttributes={};this._aChildren=[];}});
b.prototype.getRenderer=function(){return new H(this);};
b.prototype.setId=function(i,A){a(typeof i==="string","Id must by a string.");this.setAttribute("id",i);if(A){this.setAttribute("data-sap-ui",i);}};
b.prototype.setAttribute=function(k,v,E){a(typeof k==="string","Key must by a string.");a(typeof v==="string"||typeof v==="number"||typeof v==="boolean","Value must be a string, number or boolean");var V=String(v);if(E){V=e(V);}if(k in this._mAttributes){L.warning("Replacing an already existing attribute.","Attribute key = "+k+", old value = "+this._mAttributes[k]+", new value = "+V,this);}this._mAttributes[k]=V;};
b.prototype.addClass=function(c){a(typeof c==="string","Class must be a string.");if(!this._mAttributes.class){this._mAttributes.class=[];}else{a(Array.isArray(this._mAttributes.class),"Cannot add class to customly added classes.");}this._mAttributes.class.push(c);};
b.prototype.addStyle=function(n,v){a(typeof n==="string","Name must be a string.");a(typeof v==="string"||typeof v==="number","Value must be a string or a number.");if(!this._mAttributes.style){this._mAttributes.style=[];}else{a(Array.isArray(this._mAttributes.style),"Cannot add style to customly added styles.");}this._mAttributes.style.push(n+":"+v);};
b.prototype.addControlData=function(c){a(c instanceof C,"Control must be a sapui5 control.");this.setId(c.getId(),true);var t=this;c.getCustomData().forEach(function(d){var o=d._checkWriteToDom(c);if(o){t.setAttribute(o.key,o.value,true);}});if(c.aCustomStyleClasses&&c.aCustomStyleClasses.length>0){c.aCustomStyleClasses.forEach(function(d){t.addClass(e(d));});}};
b.prototype.addChild=function(c){a(typeof c==="string"||c instanceof b||c instanceof C,"Child must be a string, HtmlElement or a Control.");this._aChildren.push(c);};
b.prototype.addChildEscaped=function(t,c){a(typeof t==="string","sText must be a string");t=e(t);if(c){t=t.replace(/&#xa;/g,"<br>");}this._aChildren.push(t);};
return b;});
sap.ui.predefine('sap/suite/ui/commons/util/HtmlElementRenderer',["sap/ui/base/Object","sap/ui/core/Control","sap/base/Log"],function(B,C,L){"use strict";var H;
var a=B.extend("sap.suite.ui.commons.util.HtmlElementRenderer",{constructor:function(h){B.apply(this,arguments);this._oHtmlElement=h;}});
a.prototype.render=function(r){r.write("<");r.writeEscaped(this._oHtmlElement._sName);this._renderAttributes(r);r.write(">");if(this._oHtmlElement._aChildren.length>0){this._renderChildren(r);}r.write("</");r.writeEscaped(this._oHtmlElement._sName);r.write(">");};
a.prototype._renderAttributes=function(r){var b=this._oHtmlElement._mAttributes;for(var c in b){if(!b.hasOwnProperty(c)){continue;}var v=b[c];if(Array.isArray(v)){var j="";if(c==="class"){j=" ";}else if(c==="style"){j=";";}v=v.join(j);}r.write(" ");r.write(c);r.write("=\"");r.write(v);r.write("\"");}};
a.prototype._renderChildren=function(r){if(typeof H==="undefined"){H=sap.ui.require("sap/suite/ui/commons/util/HtmlElement");}this._oHtmlElement._aChildren.forEach(function(c){if(typeof c==="string"){r.write(c);}else if(H&&c instanceof H){c.getRenderer().render(r);}else if(c instanceof C){r.renderControl(c);}else{L.error(typeof c+" cannot be a child of a HTML element. Skipping rendering for this child.");}});};
return a;});
sap.ui.predefine('sap/suite/ui/commons/util/ManagedObjectRegister',["sap/ui/base/Object","sap/ui/base/ManagedObject","sap/base/assert","sap/base/Log"],function(B,M,a,L){"use strict";
var b=B.extend("sap.suite.ui.commons.util.ManagedObjectRegister",{constructor:function(){B.apply(this,arguments);this._mRegister={};}});
b.prototype.register=function(k,f){a(typeof k==="string","Key must be a string.");k=k[0].toUpperCase()+k.substr(1);var g="get"+k;if(typeof this._mRegister[k]!=="undefined"){this.destroyObject(k);}if(typeof f==="function"){this._mRegister[k]={fFactory:f,oValue:undefined};}else if(f instanceof M){this._mRegister[k]={fFactory:undefined,oValue:f};}else{L.error("oFactoryFunction must be either a factory function or a managed object.");return;}if(g!=="getObject"){this[g]=function(){return this.getObject(k);};}};
b.prototype.getObject=function(k){var r;k=k||"Object";r=this._mRegister[k];if(r){if(typeof r.oValue==="undefined"){r.oValue=r.fFactory(k);a(r.oValue instanceof M,"Factory class must return a managed object.");}return r.oValue;}return null;};
b.prototype.isObjectInitialized=function(k){var r;r=this._mRegister[k];return(r&&typeof r.oValue!=="undefined");};
b.prototype.destroyObject=function(k){var r;a(typeof k==="string","Key must be a string.");r=this._mRegister[k];if(r){if(r.oValue){r.oValue.destroy();}if(k!=="Object"){delete this["get"+k];}delete this._mRegister[k];}};
b.prototype.destroyAll=function(){var k,r;for(k in this._mRegister){r=this._mRegister[k];if(r.oValue){r.oValue.destroy();}if(k!=="Object"){delete this["get"+k];}}this._mRegister={};};
return b;});
sap.ui.predefine('sap/suite/ui/commons/util/RenderUtils',['sap/ui/base/Object',"sap/base/security/encodeXML"],function(B,e){"use strict";var R=function(r){this._rm=r;};R.prototype=Object.create(B.prototype||null);
R.prototype._getRenderManager=function(){if(!this._rm){throw new Error("Render manager not defined");}return this._rm;};
R.prototype.writeOpeningTag=function(t,T){T=T||{};var r=this._getRenderManager();var a;r.write("<");r.writeEscaped(t);if(T.classes){for(var i=0;i<T.classes.length;i++){r.addClass(e(T.classes[i]));}r.writeClasses();}if(T.attributes){for(a in T.attributes){r.writeAttribute(a,T.attributes[a]);}}if(T.escapedAttributes){for(a in T.escapedAttributes){r.writeAttributeEscaped(a,T.escapedAttributes[a]);}}r.write(">");};
R.prototype.writeClosingTag=function(t){var r=this._getRenderManager();r.write("</");r.writeEscaped(t);r.write(">");};
return R;},true);
sap.ui.predefine('sap/suite/ui/commons/util/StringSliderTooltip',["sap/m/SliderTooltipBase"],function(S){"use strict";
var a=S.extend("sap.suite.ui.commons.util.StringSliderTooltip",{
metadata:{library:"sap.suite.ui.commons.util",properties:{mapFunction:{type:"any",group:"Misc"},fetchValue2:{type:"boolean",group:"Misc",defaultValue:false}}},
renderer:function(r,c){var v=c.getStringValue();if(!v){return;}r.write("<div");r.writeControlData(c);r.addClass("sapMSliderTooltip");r.addClass("sapSuiteUiCommonsStringSliderTooltip");r.writeClasses(c);r.write(">");r.writeEscaped(v);r.write("</div>");}
});
a.prototype.getStringValue=function(){var p=this.getParent();if(!p){return null;}var v=this.getFetchValue2()?p.getValue2():p.getValue();var m=this.getMapFunction()||String;return m(v);};
a.prototype.sliderValueChanged=function(v){var m=this.getMapFunction()||String,V=m(v);this.$().text(V);};
return a;});
sap.ui.require.preload({
	"sap/suite/ui/commons/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.suite.ui.commons","type":"library","embeds":[],"applicationVersion":{"version":"1.88.0"},"title":"SAP UI library: sap.suite.ui.commons","description":"SAP UI library: sap.suite.ui.commons","ach":"CA-UI5-SC","resources":"resources.json","offline":true},"sap.ui":{"technology":"UI5","supportedThemes":["base","sap_belize","sap_belize_hcb","sap_belize_hcw","sap_belize_plus","sap_bluecrystal","sap_fiori_3","sap_fiori_3_dark","sap_fiori_3_hcb","sap_fiori_3_hcw","sap_hcb"]},"sap.ui5":{"dependencies":{"minUI5Version":"1.88","libs":{"sap.ui.core":{"minVersion":"1.88.0"},"sap.m":{"minVersion":"1.88.0"},"sap.suite.ui.microchart":{"minVersion":"1.88.0","lazy":true},"sap.ui.ux3":{"minVersion":"1.88.0","lazy":true},"sap.ui.comp":{"minVersion":"1.88.0","lazy":true},"sap.viz":{"minVersion":"1.88.0","lazy":true},"sap.ui.commons":{"minVersion":"1.88.0","lazy":true}}},"library":{"i18n":{"bundleUrl":"messagebundle.properties","supportedLocales":["","ar","bg","ca","cs","cy","da","de","el","en","en-GB","en-US-sappsd","en-US-saprigi","en-US-saptrc","es","es-MX","et","fi","fr","fr-CA","hi","hr","hu","id","it","iw","ja","kk","ko","lt","lv","ms","nl","no","pl","pt","pt-PT","ro","ru","sh","sk","sl","sv","th","tr","uk","vi","zh-CN","zh-TW"]},"content":{"controls":["sap.suite.ui.commons.BulletChart","sap.suite.ui.commons.BusinessCard","sap.suite.ui.commons.CalculationBuilder","sap.suite.ui.commons.CalculationBuilderExpression","sap.suite.ui.commons.CalculationBuilderFunction","sap.suite.ui.commons.CalculationBuilderInput","sap.suite.ui.commons.CalculationBuilderItem","sap.suite.ui.commons.CalculationBuilderValidationResult","sap.suite.ui.commons.CalculationBuilderVariable","sap.suite.ui.commons.ChartContainer","sap.suite.ui.commons.ChartContainerContent","sap.suite.ui.commons.ChartContainerToolbarPlaceholder","sap.suite.ui.commons.ChartTile","sap.suite.ui.commons.ColumnMicroChart","sap.suite.ui.commons.ComparisonChart","sap.suite.ui.commons.DateRangeScroller","sap.suite.ui.commons.DateRangeSlider","sap.suite.ui.commons.DateRangeSliderInternal","sap.suite.ui.commons.DeltaMicroChart","sap.suite.ui.commons.DynamicContainer","sap.suite.ui.commons.FacetOverview","sap.suite.ui.commons.FeedItemHeader","sap.suite.ui.commons.FeedTile","sap.suite.ui.commons.GenericTile","sap.suite.ui.commons.GenericTile2X2","sap.suite.ui.commons.HarveyBallMicroChart","sap.suite.ui.commons.HeaderCell","sap.suite.ui.commons.HeaderContainer","sap.suite.ui.commons.imageeditor.ImageEditor","sap.suite.ui.commons.imageeditor.ImageEditorContainer","sap.suite.ui.commons.InfoTile","sap.suite.ui.commons.JamContent","sap.suite.ui.commons.KpiTile","sap.suite.ui.commons.LaunchTile","sap.suite.ui.commons.LinkActionSheet","sap.suite.ui.commons.MicroAreaChart","sap.suite.ui.commons.MonitoringContent","sap.suite.ui.commons.MonitoringTile","sap.suite.ui.commons.networkgraph.Graph","sap.suite.ui.commons.networkgraph.Node","sap.suite.ui.commons.NewsContent","sap.suite.ui.commons.NoteTaker","sap.suite.ui.commons.NoteTakerCard","sap.suite.ui.commons.NoteTakerFeeder","sap.suite.ui.commons.NumericContent","sap.suite.ui.commons.NumericTile","sap.suite.ui.commons.PictureZoomIn","sap.suite.ui.commons.ProcessFlow","sap.suite.ui.commons.ProcessFlowConnection","sap.suite.ui.commons.ProcessFlowConnectionLabel","sap.suite.ui.commons.ProcessFlowLaneHeader","sap.suite.ui.commons.ProcessFlowNode","sap.suite.ui.commons.RepeaterViewConfiguration","sap.suite.ui.commons.SplitButton","sap.suite.ui.commons.statusindicator.StatusIndicator","sap.suite.ui.commons.statusindicator.ShapeGroup","sap.suite.ui.commons.statusindicator.Shape","sap.suite.ui.commons.statusindicator.Rectangle","sap.suite.ui.commons.statusindicator.Circle","sap.suite.ui.commons.statusindicator.CustomShape","sap.suite.ui.commons.statusindicator.PropertyThreshold","sap.suite.ui.commons.statusindicator.DiscreteThreshold","sap.suite.ui.commons.statusindicator.LibraryShape","sap.suite.ui.commons.taccount.TAccount","sap.suite.ui.commons.TargetFilter","sap.suite.ui.commons.ThingCollection","sap.suite.ui.commons.ThreePanelThingInspector","sap.suite.ui.commons.ThreePanelThingViewer","sap.suite.ui.commons.TileContent","sap.suite.ui.commons.TileContent2X2","sap.suite.ui.commons.Timeline","sap.suite.ui.commons.TimelineFilterListItem","sap.suite.ui.commons.TimelineItem","sap.suite.ui.commons.UnifiedThingGroup","sap.suite.ui.commons.UnifiedThingInspector","sap.suite.ui.commons.VerticalNavigationBar","sap.suite.ui.commons.ViewRepeater"],"elements":["sap.suite.ui.commons.BulletChartData","sap.suite.ui.commons.ColumnData","sap.suite.ui.commons.ColumnMicroChartLabel","sap.suite.ui.commons.ComparisonData","sap.suite.ui.commons.CountingNavigationItem","sap.suite.ui.commons.FeedItem","sap.suite.ui.commons.HarveyBallMicroChartItem","sap.suite.ui.commons.HeaderCellItem","sap.suite.ui.commons.imageeditor.CustomSizeItem","sap.suite.ui.commons.MicroAreaChartItem","sap.suite.ui.commons.MicroAreaChartLabel","sap.suite.ui.commons.MicroAreaChartPoint","sap.suite.ui.commons.TargetFilterColumn","sap.suite.ui.commons.TargetFilterMeasureColumn","sap.suite.ui.commons.AriaProperties"],"types":["sap.suite.ui.commons.BulletChartMode","sap.suite.ui.commons.CalculationBuilderComparisonOperatorType","sap.suite.ui.commons.CalculationBuilderFunctionType","sap.suite.ui.commons.CalculationBuilderItemType","sap.suite.ui.commons.CalculationBuilderLayoutType","sap.suite.ui.commons.CalculationBuilderLogicalOperatorType","sap.suite.ui.commons.CalculationBuilderOperatorType","sap.suite.ui.commons.CalculationBuilderValidationType","sap.suite.ui.commons.CommonBackground","sap.suite.ui.commons.ComparisonChartView","sap.suite.ui.commons.DeviationIndicator","sap.suite.ui.commons.FacetOverviewHeight","sap.suite.ui.commons.FrameType","sap.suite.ui.commons.HeaderContainerView","sap.suite.ui.commons.ImageEditorContainerMode","sap.suite.ui.commons.ImageEditorMode","sap.suite.ui.commons.ImageFormat","sap.suite.ui.commons.InfoTileSize","sap.suite.ui.commons.InfoTileTextColor","sap.suite.ui.commons.InfoTileValueColor","sap.suite.ui.commons.LoadState","sap.suite.ui.commons.MicroAreaChartView","sap.suite.ui.commons.MicroProcessFlowRenderType","sap.suite.ui.commons.networkgraph.ActionButtonPosition","sap.suite.ui.commons.networkgraph.BackgroundColor","sap.suite.ui.commons.networkgraph.ElementStatus","sap.suite.ui.commons.networkgraph.LayoutAlgorithmType","sap.suite.ui.commons.networkgraph.LayoutRenderType","sap.suite.ui.commons.networkgraph.LineArrowOrientation","sap.suite.ui.commons.networkgraph.LineArrowPosition","sap.suite.ui.commons.networkgraph.LineType","sap.suite.ui.commons.networkgraph.HeaderCheckboxState","sap.suite.ui.commons.networkgraph.NodePlacement","sap.suite.ui.commons.networkgraph.NodeShape","sap.suite.ui.commons.networkgraph.NodeSize","sap.suite.ui.commons.networkgraph.Orientation","sap.suite.ui.commons.networkgraph.RenderType","sap.suite.ui.commons.ProcessFlowConnectionLabelState","sap.suite.ui.commons.ProcessFlowConnectionState","sap.suite.ui.commons.ProcessFlowConnectionType","sap.suite.ui.commons.ProcessFlowDisplayState","sap.suite.ui.commons.ProcessFlowLaneState","sap.suite.ui.commons.ProcessFlowNodeState","sap.suite.ui.commons.ProcessFlowNodeType","sap.suite.ui.commons.ProcessFlowZoomLevel","sap.suite.ui.commons.SelectionState","sap.suite.ui.commons.statusindicator.FillingType","sap.suite.ui.commons.statusindicator.FillingDirectionType","sap.suite.ui.commons.taccount.TAccountPanelState","sap.suite.ui.commons.ThingGroupDesign","sap.suite.ui.commons.TimelineAlignment","sap.suite.ui.commons.TimelineAxisOrientation","sap.suite.ui.commons.TimelineFilterType","sap.suite.ui.commons.TimelineGroupType","sap.suite.ui.commons.TimelineScrollingFadeout","sap.suite.ui.commons.ValueStatus"],"interfaces":[]}}}}'
},"sap/suite/ui/commons/library-preload"
);
//# sourceMappingURL=library-preload.js.map