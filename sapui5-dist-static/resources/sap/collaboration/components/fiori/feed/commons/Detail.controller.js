/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
sap.ui.define(['sap/collaboration/components/utils/JamUtil','sap/ui/core/mvc/Controller','sap/collaboration/library','jquery.sap.global'],function(J,C,l,q){"use strict";var F=l.FeedType;var A=l.AppType;sap.ui.controller("sap.collaboration.components.fiori.feed.commons.Detail",{onInit:function(){this.sJamToken=this.getView().getViewData().jamToken;this.sJamURL=this.getView().getViewData().jamURL;this.oLangBundle=this.getView().getViewData().langBundle;this.sPrefixId=this.getView().getViewData().controlId;this.oBusinessObject=this.getView().getViewData().businessObject;this.bJamWidgetInitialized=false;if(this.getView().getViewData().appType===A.split){this.sFeedType=F.follows;}else{this.sFeedType=this.getView().getViewData().feedType;this.getView().oDetailPage.setShowHeader(false);}this.oJamUtil=new J();},onBeforeRendering:function(){},onAfterRendering:function(){try{this.loadFeedWidget(this.sJamURL);}catch(e){q.sap.log.error(e,"","sap.collaboration.components.fiori.feed.commons.Detail.onInit()");throw e;}},loadFeedWidget:function(j){var s=this;try{var g=s.getView().getViewData().groupIds;var w=this.oJamUtil.prepareWidgetData(s.sJamToken,s.sFeedType,g,s.oBusinessObject);var L=function(r){q.sap.log.info("Jam Feed Widget Loaded Successfully","sap.collaboration.components.fiori.feed.commons.Detail.onInit()");s.oJamUtil.initializeJamWidget(s.sJamURL);s.bJamWidgetInitialized=true;s.oJamUtil.createJamWidget(s.sPrefixId+"widgetContainer",w);};var f=function(e){q.sap.log.error(e,"","sap.collaboration.components.fiori.feed.commons.Detail.loadFeedWidgetScript()");throw e;};if(this.bJamWidgetInitialized===false){this.oJamUtil.loadFeedWidgetScript(j,L,f);}else{this.oJamUtil.createJamWidget(s.sPrefixId+"widgetContainer",w);}}catch(e){q.sap.log.error(e,"","sap.collaboration.components.fiori.feed.commons.Detail.loadFeedWidgetScript()");throw e;}}});});
