// Copyright (c) 2009-2020 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/components/tiles/utils","sap/ushell/components/cards/ManifestPropertyHelper","sap/ushell/resources","sap/ui/model/json/JSONModel","sap/ui/core/mvc/XMLView"],function(u,m,r,J,X){"use strict";sap.ui.controller("sap.ushell.components.cards.Card",{onInit:function(){var v=this.getView(),c=this.getView().getViewData().chip,t=c.bag.getBag("tileProperties"),M,C;C=m.getTranslatablePropertiesFromBag(t);M=new J({data:C});v.setModel(M);v.setModel(r.i18nModel,"i18n");this._implementConfigurationUiContract(c,v);this._implementPreviewContract(c,C);},onPress:function(){var v=this.getView(),c=v.getViewData().chip,C=c.configuration.getParameterValueAsString("tileConfiguration"),o;if(c.configurationUi.isEnabled()){c.configurationUi.display();}else if(C){o=JSON.parse(C);sap.ushell.Container.getService("CrossApplicationNavigation").toExternal({target:{semanticObject:o.navigation_semantic_object,action:o.navigation_semantic_action},params:o.navigation_semantic_parameters_as_object});}},_implementPreviewContract:function(c,a){if(c.preview){c.preview.setPreviewTitle(a.display_title_text);if(c.preview.setPreviewSubtitle&&typeof c.preview.setPreviewSubtitle==="function"){c.preview.setPreviewSubtitle(a.display_subtitle_text);}}},_implementConfigurationUiContract:function(c,v){if(c.configurationUi&&c.configurationUi.isEnabled()){c.configurationUi.setUiProvider(function(){var C=this._getConfigurationUi(c);C.setModel(v.getModel(),"tileModel");return C;}.bind(this));v.getContent()[0].setTooltip(u.getResourceBundleModel().getResourceBundle().getText("edit_configuration.tooltip"));}},_getConfigurationUi:function(c){var C=new X({viewName:"sap.ushell.components.cards.Configuration",viewData:{chipInstance:c}});return C;}});});
