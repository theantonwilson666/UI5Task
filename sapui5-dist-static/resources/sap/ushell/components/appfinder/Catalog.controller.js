// Copyright (c) 2009-2020 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/components/_HomepageManager/PagingManager","sap/ui/core/UIComponent","sap/ui/thirdparty/jquery","sap/ushell/resources","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/library","sap/ui/Device","sap/ui/core/library","sap/ui/model/Context","sap/m/MessageToast","sap/ushell/Config","sap/ushell/services/AppType","sap/ushell/components/appfinder/VisualizationOrganizerHelper","sap/ushell/utils/WindowUtils"],function(P,U,q,r,F,a,m,D,c,C,M,b,A,V,W){"use strict";var d=c.mvc.ViewType;var S=m.SplitAppMode;sap.ui.controller("sap.ushell.components.appfinder.Catalog",{oPopover:null,onInit:function(){this.categoryFilter="";this.preCategoryFilter="";var v=this.getView();this.oMainModel=v.getModel();this.oSubHeaderModel=v.getModel("subHeaderModel");this.resetPage=false;this.bIsInProcess=false;this.oVisualizationOrganizerHelper=v.oVisualizationOrganizerHelper;this.oCatalogsContainer=v.oCatalogsContainer;sap.ui.getCore().byId("catalogSelect").addEventDelegate({onBeforeRendering:this.onBeforeSelectRendering},this);var R=U.getRouterFor(this);R.attachRouteMatched(this.onShow,this);this.timeoutId=0;document.subHeaderModel=this.oSubHeaderModel;document.mainModel=this.oMainModel;var t=this.oSubHeaderModel.bindProperty("/openCloseSplitAppButtonToggled");t.attachChange(this.handleToggleButtonModelChanged,this);v.oCatalogsContainer.setHandleSearchCallback(this.handleSearchModelChanged.bind(this));},onBeforeRendering:function(){sap.ui.getCore().getEventBus().publish("renderCatalog");},onAfterRendering:function(){this.wasRendered=true;if(!this.PagingManager){this._setPagingManager();}if(this.PagingManager.currentPageIndex===0){this.allocateNextPage();}q(window).resize(function(){var w=q(window).width();var e=q(window).height();this.PagingManager.setContainerSize(w,e);}.bind(this));this._handleAppFinderWithDocking();sap.ui.getCore().getEventBus().subscribe("launchpad","appFinderWithDocking",this._handleAppFinderWithDocking,this);sap.ui.getCore().getEventBus().subscribe("sap.ushell","appFinderAfterNavigate",this._handleAppFinderAfterNavigate,this);},_setPagingManager:function(){this.lastCatalogId=0;this.PagingManager=new P("catalogPaging",{supportedElements:{tile:{className:"sapUshellTile"}},containerHeight:window.innerHeight,containerWidth:window.innerWidth});this.oCatalogsContainer.setPagingManager(this.PagingManager);},_decodeUrlFilteringParameters:function(u){var o;try{o=JSON.parse(u);}catch(e){o=u;}var h=(o&&o.tagFilter&&o.tagFilter)||[];if(h){try{this.tagFilter=JSON.parse(h);}catch(e){this.tagFilter=[];}}else{this.tagFilter=[];}this.categoryFilter=(o&&o.catalogSelector&&o.catalogSelector)||this.categoryFilter;if(this.categoryFilter){this.categoryFilter=window.decodeURIComponent(this.categoryFilter);}this.searchFilter=(o&&o.tileFilter&&o.tileFilter)||null;if(this.searchFilter){this.searchFilter=window.decodeURIComponent(this.searchFilter);}},_applyFilters:function(w){var s=false;if(this.categoryFilter){this.categoryFilter=r.i18n.getText("all")===this.categoryFilter?"":this.categoryFilter;if(this.categoryFilter!==this.preCategoryFilter){s=true;}this.oView.setCategoryFilterSelection(this.categoryFilter,s);}else{s=true;this.oView.setCategoryFilterSelection("",s);}this.preCategoryFilter=this.categoryFilter;if(this.searchFilter&&this.searchFilter.length){this.searchFilter=this.searchFilter.replace(/\*/g,"");this.searchFilter=this.searchFilter.trim();this.oSubHeaderModel.setProperty("/search",{searchMode:true,searchTerm:this.searchFilter});}else if(w){this.oSubHeaderModel.setProperty("/search",{searchMode:false,searchTerm:""});this.resetPage=true;}if(this.tagFilter&&this.tagFilter.length){this.oSubHeaderModel.setProperty("/tag",{tagMode:true,selectedTags:this.tagFilter});}else if(w){this.oSubHeaderModel.setProperty("/tag",{tagMode:false,selectedTags:[]});this.resetPage=true;}this.handleSearchModelChanged();},_handleAppFinderAfterNavigate:function(){this.clearFilters();},clearFilters:function(){var s=false;if(this.categoryFilter!==this.preCategoryFilter){s=true;}var e=this.oSubHeaderModel.getProperty("/search/searchMode");var t=this.oSubHeaderModel.getProperty("/tag/tagMode");if(e){this.oSubHeaderModel.setProperty("/search",{searchMode:true,searchTerm:""});}if(t){this.oSubHeaderModel.setProperty("/tag",{tagMode:true,selectedTags:[]});}if(this.categoryFilter&&this.categoryFilter!==""){this.selectedCategoryId=undefined;this.categoryFilter=undefined;this.getView().getModel().setProperty("/categoryFilter","");this.oView.setCategoryFilterSelection("",s);}this.preCategoryFilter=this.categoryFilter;this.handleSearchModelChanged();},onShow:function(e){var u=e.getParameter("arguments").filters;q.extend(this.getView().getViewData(),e);this._decodeUrlFilteringParameters(u);if(this.wasRendered&&!u){this.clearFilters();}else{this._applyFilters(this.wasRendered);}},allocateNextPage:function(){if(!this.oCatalogsContainer.nAllocatedUnits||this.oCatalogsContainer.nAllocatedUnits===0){this.PagingManager.moveToNextPage();this.allocateTiles=this.PagingManager._calcElementsPerPage();this.oCatalogsContainer.applyPagingCategoryFilters(this.allocateTiles,this.categoryFilter);}},onBeforeSelectRendering:function(){var s=sap.ui.getCore().byId("catalogSelect");var i=q.grep(s.getItems(),function(I){return I.getBindingContext().getObject().title===this.categoryFilter;}.bind(this));if(!i.length&&s.getItems()[0]){i.push(s.getItems()[0]);}},setTagsFilter:function(f){var p={catalogSelector:this.categoryFilter?this.categoryFilter:"All",tileFilter:(this.searchFilter&&this.searchFilter.length)?encodeURIComponent(this.searchFilter):"",tagFilter:f.length?JSON.stringify(f):[]};this._addNavigationContextToFilter(p);this.getView().parentComponent.getRouter().navTo("catalog",{filters:JSON.stringify(p)});},setCategoryFilter:function(f){var p={catalogSelector:f,tileFilter:this.searchFilter?encodeURIComponent(this.searchFilter):"",tagFilter:this.tagFilter.length?JSON.stringify(this.tagFilter):[]};this._addNavigationContextToFilter(p);this.getView().parentComponent.getRouter().navTo("catalog",{filters:JSON.stringify(p)});},setSearchFilter:function(f){var p={catalogSelector:this.categoryFilter?this.categoryFilter:"All",tileFilter:f?encodeURIComponent(f):"",tagFilter:this.tagFilter.length?JSON.stringify(this.tagFilter):[]};this._addNavigationContextToFilter(p);this.getView().parentComponent.getRouter().navTo("catalog",{filters:JSON.stringify(p)});},_addNavigationContextToFilter:function(f){var o=this.oVisualizationOrganizerHelper.getNavigationContext.apply(this);if(o){Object.keys(o).forEach(function(k){f[k]=o[k];});}return f;},onSearch:function(s){var e=this.oSubHeaderModel.getProperty("/activeMenu");if(this.oView.getId().indexOf(e)!==-1){var f=s.searchTerm?s.searchTerm:"";this.setSearchFilter(f);}else{this._restoreSelectedMasterItem();}},onTag:function(t){var s=this.oSubHeaderModel.getProperty("/activeMenu");if(this.oView.getId().indexOf(s)!==-1){var e=t.selectedTags?t.selectedTags:[];this.setTagsFilter(e);}else{this._restoreSelectedMasterItem();}},getGroupContext:function(){var o=this.getView().getModel();var g=o.getProperty("/groupContext/path");return{targetGroup:encodeURIComponent(g||"")};},_isTagFilteringChanged:function(s){var e=s.length===this.tagFilter.length;var i=e;if(!i){return true;}s.some(function(t){i=this.tagFilter&&Array.prototype.indexOf.call(this.tagFilter,t)!==-1;return!i;}.bind(this));return i;},_setUrlWithTagsAndSearchTerm:function(s,e){var u={tileFilter:s&&s.length?encodeURIComponent(s):"",tagFilter:e.length?JSON.stringify(e):[]};this._addNavigationContextToFilter(u);this.getView().parentComponent.getRouter().navTo("catalog",{filters:JSON.stringify(u)});},handleSearchModelChanged:function(){var s=this.oSubHeaderModel.getProperty("/search/searchMode");var t=this.oSubHeaderModel.getProperty("/tag/tagMode");var e=this.oSubHeaderModel.getProperty("/search/searchTerm");var f=this.oSubHeaderModel.getProperty("/tag/selectedTags");var g=[];var T,o,h,p,i;if(!this.PagingManager){this._setPagingManager();}this.PagingManager.resetCurrentPageIndex();this.nAllocatedTiles=0;this.PagingManager.moveToNextPage();this.allocateTiles=this.PagingManager._calcElementsPerPage();this.oView.oCatalogsContainer.updateAllocatedUnits(this.allocateTiles);this.oView.oCatalogsContainer.resetCatalogPagination();var j=sap.ui.getCore().byId("catalogTilesDetailedPage");if(j){j.scrollTo(0,0);}if(s||t||this.resetPage){if(f&&f.length>0){T=new F("tags","EQ","v");T.fnTest=function(x){var y,z;if(f.length===0){return true;}for(y=0;y<f.length;y++){z=f[y];if(x.indexOf(z)===-1){return false;}}return true;};o=new F([T],true);}e=e?e.replace(/\*/g,""):e;if(e){var k=e.split(/[\s,]+/);var l=new F(q.map(k,function(x){return(x&&new F("keywords",a.Contains,x));}),true);var n=new F(q.map(k,function(x){return(x&&new F("title",a.Contains,x));}),true);var u=new F(q.map(k,function(x){return(x&&new F("subtitle",a.Contains,x));}),true);g.push(l);g.push(n);g.push(u);h=new F(g,false);}var v=this.oView.oCatalogsContainer.getCatalogs();this.oSearchResultsTotal=[];var w=this;if(o&&o.aFilters.length>0&&h){i=new F([h].concat([o]),true);}else if(o&&o.aFilters.length>0){i=new F([o],true);}else if(h&&h.aFilters.length>0){i=new F([h],true);}v.forEach(function(x){x.getBinding("customTilesContainer").filter(i);x.getBinding("appBoxesContainer").filter(i);});this.oView.oCatalogsContainer.bSearchResults=false;this.oView.oCatalogsContainer.applyPagingCategoryFilters(this.oView.oCatalogsContainer.nAllocatedUnits,this.categoryFilter);this.bSearchResults=this.oView.oCatalogsContainer.bSearchResults;this.oView.splitApp.toDetail(w.getView()._calculateDetailPageId());this.resetPage=false;}else{this.oView.oCatalogsContainer.applyPagingCategoryFilters(this.oView.oCatalogsContainer.nAllocatedUnits,this.categoryFilter);}p=this.getView()._calculateDetailPageId();this.oView.splitApp.toDetail(p);},_handleAppFinderWithDocking:function(){if(q(".sapUshellContainerDocked").length>0){if(q("#mainShell").width()<710){if(window.innerWidth<1024){this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonVisible",false);this.oView.splitApp.setMode(S.ShowHideMode);}else{this.oView.splitApp.setMode(S.HideMode);this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonVisible",true);}}else{this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonVisible",false);this.oView.splitApp.setMode(S.ShowHideMode);}}},_restoreSelectedMasterItem:function(){var o=this.oView.splitApp.getMasterPage("catalogSelect");var O=sap.ui.getCore().byId(this.selectedCategoryId);if(O){this.categoryFilter=O.getTitle();}o.setSelectedItem(O);},handleToggleButtonModelChanged:function(){var B=this.oSubHeaderModel.getProperty("/openCloseSplitAppButtonVisible");var e=this.oSubHeaderModel.getProperty("/openCloseSplitAppButtonToggled");if((e!==this.bCurrentButtonToggled)&&B){if(!D.system.phone){if(e&&!this.oView.splitApp.isMasterShown()){this.oView.splitApp.showMaster();}else if(this.oView.splitApp.isMasterShown()){this.oView.splitApp.hideMaster();}}else if(this.oView.splitApp.isMasterShown()){var o=sap.ui.getCore().byId(this.getView()._calculateDetailPageId());this.oView.splitApp.toDetail(o);}else if(e){var f=sap.ui.getCore().byId("catalogSelect");this.oView.splitApp.toMaster(f,"show");}}this.bCurrentButtonToggled=e;},_handleCatalogListItemPress:function(e){this.onCategoryFilter(e);if(this.oSubHeaderModel.getProperty("/search/searchTerm")!==""){this.oSubHeaderModel.setProperty("/search/searchMode",true);}if(D.system.phone||D.system.tablet){this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled",!this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled"));}},onCategoryFilter:function(e){var o=e.getSource();var s=o.getSelectedItem();var f=s.getBindingContext();var g=f.getModel();if(g.getProperty("static",f)){g.setProperty("/showCatalogHeaders",true);this.setCategoryFilter();this.selectedCategoryId=undefined;this.categoryFilter=undefined;}else{g.setProperty("/showCatalogHeaders",false);this.setCategoryFilter(window.encodeURIComponent(s.getBindingContext().getObject().title));this.categoryFilter=s.getTitle();this.selectedCategoryId=s.getId();}},onTileAfterRendering:function(e){var j=q(e.oSource.getDomRef());var f=j.find(".sapMGT");f.attr("tabindex","-1");},catalogTilePress:function(){sap.ui.getCore().getEventBus().publish("launchpad","catalogTileClick");},onAppBoxPressed:function(e){var o=e.getSource();var t=o.getBindingContext().getObject();var p;if(e.mParameters.srcControl.$().closest(".sapUshellPinButton").length){return;}p=sap.ushell.Container.getService("LaunchPage").getAppBoxPressHandler(t);if(p){p(t);}else{var u=o.getProperty("url");if(u&&u.indexOf("#")===0){hasher.setHash(u);}else{var l=b.last("/core/shell/enableRecentActivity")&&b.last("/core/shell/enableRecentActivityLogging");if(l){var R={title:o.getProperty("title"),appType:A.URL,url:u,appId:u};sap.ushell.Container.getRenderer("fiori2").logRecentActivity(R);}W.openURL(u,"_blank");}}},onTilePinButtonClick:function(e){var l=sap.ushell.Container.getService("LaunchPage");var o=l.getDefaultGroup();o.done(function(f){var B=e.getSource();var s=B.getBindingContext();var g=this.getView().getModel();var G=g.getProperty("/groupContext/path");if(G){this._handleTileFooterClickInGroupContext(s,G);}else{var h=g.getProperty("/groups");var i=this.getCatalogTileDataFromModel(s);var t=i.tileData.associatedGroups;var j=[];var R=h.map(function(k){var n,u;n=l.getGroupId(k.object);u=!((t&&Array.prototype.indexOf.call(t,n)===-1));j.push({id:n,title:this._getGroupTitle(f,k.object),selected:u});return{selected:u,initiallySelected:u,oGroup:k};}.bind(this));var p=sap.ui.getCore().byId("sapUshellGroupsPopover");var T;if(!p){T=l.getCatalogTilePreviewTitle(g.getProperty(s.sPath).src);if(!T){T=l.getCatalogTileTitle(g.getProperty(s.sPath).src);}p=new sap.ui.view("sapUshellGroupsPopover",{type:d.JS,viewName:"sap.ushell.components.appfinder.GroupListPopover",viewData:{groupData:R,title:T,enableHideGroups:g.getProperty("/enableHideGroups"),enableHelp:g.getProperty("/enableHelp"),sourceContext:s,catalogModel:this.getView().getModel(),catalogController:this}});p.getController().setSelectedStart(j);p.open(B).then(this._handlePopoverResponse.bind(this,s,i));}}}.bind(this));},_getGroupTitle:function(o,g){var l=sap.ushell.Container.getService("LaunchPage");var t;if(o&&(l.getGroupId(o)===l.getGroupId(g))){t=r.i18n.getText("my_group");}else{t=l.getGroupTitle(g);}return t;},_handlePopoverResponse:function(s,e,f){if(!f.addToGroups.length&&!f.newGroups.length&&!f.removeFromGroups.length){return;}var o=this.getView().getModel();var g=o.getProperty("/groups");var p=[];f.addToGroups.forEach(function(h){var i=g.indexOf(h);var G=new C(o,"/groups/"+i);p.push(this._addTile(s,G));}.bind(this));f.removeFromGroups.forEach(function(h){var t=s.getModel().getProperty(s.getPath()).id;var i=g.indexOf(h);p.push(this._removeTile(t,i));}.bind(this));f.newGroups.forEach(function(h){var n=(h.length>0)?h:r.i18n.getText("new_group_name");p.push(this._createGroupAndSaveTile(s,n));}.bind(this));q.when.apply(q,p).then(function(){var R=Array.prototype.slice.call(arguments);this._handlePopoverGroupsActionPromises(e,f,R);}.bind(this));},_handlePopoverGroupsActionPromises:function(e,p,f){var E=f.filter(function(v){return!v.status;});if(E.length){var o=this.prepareErrorMessage(E,e.tileData.title);var g=sap.ushell.components.getCatalogsManager();g.resetAssociationOnFailure(o.messageId,o.parameters);return;}var t=[];var l=sap.ushell.Container.getService("LaunchPage");p.allGroups.forEach(function(v){if(v.selected){var G=l.getGroupId(v.oGroup.object);t.push(G);}});var h=this.getView().getModel();if(p.newGroups.length){var i=h.getProperty("/groups");var n=i.slice(i.length-p.newGroups.length);n.forEach(function(v){var G=l.getGroupId(v.object);t.push(G);});}h.setProperty(e.bindingContextPath+"/associatedGroups",t);var s=p.addToGroups[0]?p.addToGroups[0].title:"";if(s.length===0&&p.newGroups.length){s=p.newGroups[0];}var j=p.removeFromGroups[0]?p.removeFromGroups[0].title:"";var k=p.addToGroups.length+p.newGroups.length;var R=p.removeFromGroups.length;var u=this.prepareDetailedMessage(e.tileData.title,k,R,s,j);M.show(u,{duration:3000,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"});},_getCatalogTileIndexInModel:function(s){var t=s.sPath;var T=t.split("/");var i=T[T.length-1];return i;},_handleTileFooterClickInGroupContext:function(s,g){var l=sap.ushell.Container.getService("LaunchPage");var o=this.getView().getModel();var e=this.getCatalogTileDataFromModel(s);var f=e.tileData.associatedGroups;var G=o.getProperty(g);var h=l.getGroupId(G.object);var i=f?Array.prototype.indexOf.call(f,h):-1;var t=e.bindingContextPath;if(e.isBeingProcessed){return;}o.setProperty(t+"/isBeingProcessed",true);var T;var j;if(i===-1){var k=new C(s.getModel(),g);T=this._addTile(s,k);j=true;}else{var n=s.getModel().getProperty(s.getPath("id"));var p=parseInt(g.split("/")[2],10);T=this._removeTile(n,p);j=false;}T.done(function(u){if(u.status){this._groupContextOperationSucceeded(s,e,G,j);}else{this._groupContextOperationFailed(e,G,j);}}.bind(this));T.always(function(){o.setProperty(t+"/isBeingProcessed",false);});},_groupContextOperationSucceeded:function(s,o,g,t){var l=sap.ushell.Container.getService("LaunchPage");var G=l.getGroupId(g.object);var e=o.tileData.associatedGroups;var f;if(t){e.push(G);s.getModel().setProperty(o.bindingContextPath+"/associatedGroups",e);f=this.prepareDetailedMessage(o.tileData.title,1,0,g.title,"");}else{for(var i=0;i<e.length;i++){if(e[i]===G){e.splice(i,1);break;}}s.getModel().setProperty(o.bindingContextPath+"/associatedGroups",e);f=this.prepareDetailedMessage(o.tileData.title,0,1,"",g.title);}M.show(f,{duration:3000,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"});},_groupContextOperationFailed:function(o,g,t){var e=sap.ushell.components.getCatalogsManager();var E;if(t){E=r.i18n.getText({messageId:"fail_tile_operation_add_to_group",parameters:[o.tileData.title,g.title]});}else{E=r.i18n.getText({messageId:"fail_tile_operation_remove_from_group",parameters:[o.tileData.title,g.title]});}e.notifyOnActionFailure(E.messageId,E.parameters);},prepareErrorMessage:function(e,t){var g,s,f,h,i;var n=0;var N=0;var j=false;for(var k in e){g=e[k].group;s=e[k].action;if(s==="add"){n++;if(n===1){f=g.title;}}else if(s==="remove"){N++;if(N===1){h=g.title;}}else if(s==="addTileToNewGroup"){n++;if(n===1){f=g.title;}}else{j=true;}}if(j){if(e.length===1){i=r.i18n.getText({messageId:"fail_tile_operation_create_new_group"});}else{i=r.i18n.getText({messageId:"fail_tile_operation_some_actions"});}}else if(e.length===1){if(n){i=r.i18n.getText({messageId:"fail_tile_operation_add_to_group",parameters:[t,f]});}else{i=r.i18n.getText({messageId:"fail_tile_operation_remove_from_group",parameters:[t,h]});}}else if(N===0){i=r.i18n.getText({messageId:"fail_tile_operation_add_to_several_groups",parameters:[t]});}else if(n===0){i=r.i18n.getText({messageId:"fail_tile_operation_remove_from_several_groups",parameters:[t]});}else{i=r.i18n.getText({messageId:"fail_tile_operation_some_actions"});}return i;},prepareDetailedMessage:function(t,n,e,f,g){var s;if(n===0){if(e===1){s=r.i18n.getText("tileRemovedFromSingleGroup",[t,g]);}else if(e>1){s=r.i18n.getText("tileRemovedFromSeveralGroups",[t,e]);}}else if(n===1){if(e===0){s=r.i18n.getText("tileAddedToSingleGroup",[t,f]);}else if(e===1){s=r.i18n.getText("tileAddedToSingleGroupAndRemovedFromSingleGroup",[t,f,g]);}else if(e>1){s=r.i18n.getText("tileAddedToSingleGroupAndRemovedFromSeveralGroups",[t,f,e]);}}else if(n>1){if(e===0){s=r.i18n.getText("tileAddedToSeveralGroups",[t,n]);}else if(e===1){s=r.i18n.getText("tileAddedToSeveralGroupsAndRemovedFromSingleGroup",[t,n,g]);}else if(e>1){s=r.i18n.getText("tileAddedToSeveralGroupsAndRemovedFromSeveralGroups",[t,n,e]);}}return s;},getCatalogTileDataFromModel:function(s){var B=s.getPath();var o=s.getModel();var t=o.getProperty(B);return{tileData:t,bindingContextPath:B,isBeingProcessed:t.isBeingProcessed};},_addTile:function(t,g){var o=sap.ushell.components.getCatalogsManager();var e=q.Deferred();var p=o.createTile({catalogTileContext:t,groupContext:g});p.done(function(f){e.resolve(f);});return e;},_removeTile:function(t,i){var o=sap.ushell.components.getCatalogsManager();var e=q.Deferred();var p=o.deleteCatalogTileFromGroup({tileId:t,groupIndex:i});p.done(function(f){e.resolve(f);});return e;},_createGroupAndSaveTile:function(t,n){var o=sap.ushell.components.getCatalogsManager();var e=q.Deferred();var p=o.createGroupAndSaveTile({catalogTileContext:t,newGroupName:n});p.done(function(f){e.resolve(f);});return e;},onExit:function(){V.destroy();sap.ui.getCore().getEventBus().unsubscribe("launchpad","appFinderWithDocking",this._handleAppFinderWithDocking,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad","appFinderAfterNavigate",this._handleAppFinderAfterNavigate,this);}});});
