// Copyright (c) 2009-2020 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/core/library","sap/ushell/ui/appfinder/AppBox","sap/ushell/ui/appfinder/PinButton","sap/ushell/resources","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/m/FlexBox","sap/m/library","sap/m/Page","sap/m/PageAccessibleLandmarkInfo","sap/m/MessagePage","sap/ui/model/json/JSONModel","sap/m/Link","sap/m/Breadcrumbs","sap/m/Text","sap/m/Title","sap/m/Button","sap/ushell/components/appfinder/VisualizationOrganizerHelper"],function(c,A,P,r,a,F,m,b,d,M,J,L,B,T,f,g,V){"use strict";var h=m.ButtonType;var i=m.FlexWrap;var j=c.TitleLevel;var k=c.AccessibleLandmarkRole;sap.ui.jsview("sap.ushell.components.appfinder.HierarchyApps",{oVisualizationOrganizerHelper:V.getInstance(),createContent:function(C){this.oController=C;var p=new P({icon:{path:"easyAccess>bookmarkCount",formatter:this.oVisualizationOrganizerHelper.formatBookmarkPinButtonIcon},type:{path:"easyAccess>bookmarkCount",formatter:this.oVisualizationOrganizerHelper.formatBookmarkPinButtonType},selected:{path:"easyAccess>bookmarkCount",formatter:this.oVisualizationOrganizerHelper.formatBookmarkPinButtonSelectState.bind(this)},tooltip:{parts:["associatedGroups","easyAccess>bookmarkCount","/groupContext/path","/groupContext/id","/groupContext/title"],formatter:this.oVisualizationOrganizerHelper.formatBookmarkPinButtonTooltip.bind(this)},press:C.showSaveAppPopover.bind(C)});p.addCustomData(new a({key:"tabindex",value:"-1",writeToDom:true}));p.addStyleClass("sapUshellPinButton");this.oItemTemplate=new A({title:"{easyAccess>text}",subtitle:"{easyAccess>subtitle}",url:"{easyAccess>url}",icon:"{easyAccess>icon}",pinButton:p,tabindex:{path:"easyAccess>text"},press:[C.onAppBoxPressed,C]});this.oItemTemplate.addCustomData(new a({key:"tabindex",value:"-1",writeToDom:true}));this.layout=new F(this.getId()+"_hierarchyAppsLayout",{items:{path:"easyAccess>/apps",template:this.oItemTemplate},wrap:i.Wrap});this.layout.addDelegate({onAfterRendering:function(){var e=this.getItems();var u=function(l){if(l.getKey()==="tabindex"){l.setValue("0");}};if(e.length){e[0].getCustomData().forEach(u);e[0].getPinButton().getCustomData().forEach(u);}}.bind(this.layout)});this.oMessagePage=new M({visible:false,showHeader:false,text:r.i18n.getText("EasyAccessMenu_NoAppsToDisplayMessagePage_Text"),description:""});var v=this.getViewData();var s=v.menuName==="USER_MENU"?"appFinderUserMenuTitle":"appFinderSapMenuTitle";var o=new b({showHeader:false,landmarkInfo:new d({contentLabel:r.i18n.getText(s),contentRole:k.Region})}).addStyleClass("sapUshellAppsView sapUiContentPadding");if(v&&v.navigateHierarchy){this.crumbsModel=new J({crumbs:[]});this.linkTemplate=new L({text:"{crumbs>text}",press:function(e){var l=e.oSource.getBinding("text").getContext().getObject();v.navigateHierarchy(l.path,false);}});this.breadcrumbs=new B({links:{path:"crumbs>/crumbs",template:this.linkTemplate},currentLocationText:"{/text}"});this.breadcrumbs.setModel(this.crumbsModel,"crumbs");o.addContent(this.breadcrumbs);}else{this.resultText=new f({text:{parts:[{path:"easyAccessSystemsModel>/systemSelected"},{path:"easyAccess>/total"}],formatter:C.resultTextFormatter.bind(C)},level:j.H3}).addStyleClass("sapUiTinyMarginTop sapUiSmallMarginBottom sapUshellEasyAccessSearchResultText");o.addContent(this.resultText);this.showMoreResultsLink=new g({text:{parts:[{path:"easyAccess>/apps"},{path:"easyAccess>/total"}],formatter:C.showMoreResultsTextFormatter.bind(C)},press:v.getMoreSearchResults,visible:{parts:[{path:"easyAccess>/apps"},{path:"easyAccess>/total"}],formatter:C.showMoreResultsVisibilityFormatter.bind(C)},type:h.Transparent});}o.addContent(this.oMessagePage);o.addContent(this.layout);if(this.showMoreResultsLink){o.addContent(this.showMoreResultsLink);}return o;},formatPinButtonTooltip:function(G,e,s,l,n){var R=r.i18n,t;if(s){var C=G?Array.prototype.indexOf.call(G,l):-1;var o=C!==-1?"removeAssociatedTileFromContextGroup":"addAssociatedTileToContextGroup";t=R.getText(o,n);}else{t=e?R.getText("EasyAccessMenu_PinButton_Toggled_Tooltip"):R.getText("EasyAccessMenu_PinButton_UnToggled_Tooltip");}return t;},updateResultSetMessage:function(I,e){var E;if(e){E="noFilteredItems";}else{E="EasyAccessMenu_NoAppsToDisplayMessagePage_Text";}if(I){if(e){this.resultText.updateProperty("text");this.resultText.setVisible(true);}this.layout.setVisible(true);this.oMessagePage.setVisible(false);}else{if(e){this.resultText.setVisible(false);}this.layout.setVisible(false);this.oMessagePage.setVisible(true);var s=r.i18n.getText(E);this.oMessagePage.setText(s);}},setShowMoreResultsBusy:function(e){if(this.showMoreResultsLink){this.showMoreResultsLink.setBusy(e);}},getControllerName:function(){return"sap.ushell.components.appfinder.HierarchyApps";}});},true);
