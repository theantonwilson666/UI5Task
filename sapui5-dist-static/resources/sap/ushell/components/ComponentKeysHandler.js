// Copyright (c) 2009-2020 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/Config","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ui/events/KeyCodes","sap/ui/thirdparty/jquery","sap/base/Log","sap/ushell/renderers/fiori2/AccessKeysHandler"],function(C,A,K,q,L,a){"use strict";var b=function(){};b.prototype={keyCodes:K,tileFocusCustomData:new A({key:"tabindex",value:"0",writeToDom:true}),goToTileContainer:function(){if(this.oModel.getProperty("/tileActionModeActive")){this.goToFirstVisibleTileContainer();}else{this.goToLastVisitedTile();}},goToFirstVisibleTileContainer:function(){var j=q("#dashboardGroups").find(".sapUshellTileContainer").filter(":visible"),t=this.oModel.getProperty("/topGroupInViewPortIndex");if(j.length){var d=q(j.get(t));if(d.length){this._setTileContainerSelectiveFocus(d);}}},goToLastVisitedTile:function(j,l){var d,e,f=q(".sapUshellTile, .sapMGTLineMode, .sapFCard");if(l){var g=q("#dashboardGroups").find(".sapUshellTileContainer").filter(":visible"),t=this.oModel.getProperty("/topGroupInViewPortIndex");var h=j||q(g.get(t));var i=h.find(".sapUshellTile, .sapMGTLineMode, .sapFCard");d=i.filter(":visible").eq(0);e=i.filter("[tabindex=0]:visible").eq(0);if(!d.length){d=f.filter(":visible").eq(0);}}else{d=f.filter(":visible").eq(0);e=f.filter("[tabindex=0]:visible").eq(0);}if(e.length){this.moveScrollDashboard(e);}else if(d.length){d.attr("tabindex","0");this.moveScrollDashboard(d);}else{a.sendFocusBackToShell();}},_goToFirstTileOfNextGroup:function(d,e){this._preventDefault(e);var i=this._getGroupAndTilesInfo();if(i){var n=this._getNextGroup(d,i.oGroup,false,true);if(n){this._goToTileOfGroup("first",n);}}},_goToTileOfGroup:function(p,g){if(g){var d=g.getTiles();if(this.oModel.getProperty("/tileActionModeActive")){d.push(g.oPlusTile);}d=d.concat(g.getLinks());p=p==="first"?0:p;p=p==="last"?d.length-1:p;var t=d[p];if(t&&t.getDomRef()){var j=q(t.getDomRef());if(j.length===1){this.moveScrollDashboard(j);return true;}}}return false;},_moveTile:function(d){var i=this._getGroupAndTilesInfo(),D=this._getNextTile(d,true,i);if(D){var o=D.getParent();if(C.last("/core/home/gridContainer")&&o.getParent().getId()!=="dashboardGroups"){o=o.getParent();}var s=D.getMode?D.getMode():"ContentMode",e=i.oCurTile.getMode?i.oCurTile.getMode():"ContentMode",f=s==="LineMode"?o.getLinks():o.getTiles(),n=0;if(i.oGroup===o){n=f.indexOf(D);if(e==="LineMode"&&s==="ContentMode"&&d==="left"){n=f.length;}}else if(d==="left"||d==="up"){n=f.length;}var E,g,t=this;if(e===s){var h=q(".sapUshellDashboardView").control(0);E="movetile";g={sTileId:h.getController()._getTileUuid(i.oCurTile),toGroupId:o.getGroupId?o.getGroupId():o.groupId,toIndex:n,sToItems:e==="LineMode"?"links":"tiles",sFromItems:e==="LineMode"?"links":"tiles",sTileType:e==="LineMode"?"link":"tile"};if(s==="LineMode"){g.callBack=function(){setTimeout(function(){f=s==="LineMode"?o.getLinks():o.getTiles();t.moveScrollDashboard(f[n].$());},10);};}else{setTimeout(function(){f=s==="LineMode"?o.getLinks():o.getTiles();t.moveScrollDashboard(f[n].$());},10);}}else{E="convertTile";g={toGroupId:o.getGroupId?o.getGroupId():o.groupId,srcGroupId:i.oGroup.getGroupId?i.oGroup.getGroupId():i.oGroup.groupId,toIndex:n,callBack:function(){setTimeout(function(){f=s==="LineMode"?o.getLinks():o.getTiles();t.moveScrollDashboard(f[n].$());},10);},tile:i.oCurTile,longDrop:false};}sap.ui.getCore().getEventBus().publish("launchpad",E,g);}},callbackSetFocus:function(t){var d=this;setTimeout(function(){if(t.oParent&&t.oParent instanceof sap.ushell.ui.launchpad.Tile){d.moveScrollDashboard(q(t.oParent.getDomRef()));}else{d.moveScrollDashboard(t.$());}});},_getTileCenter:function(d,t,T){if(!(T instanceof HTMLElement)){var j=T.$().find(".sapMGTLineStyleHelper");if(T.isLink&&j&&j.length>1){if(d==="down"){return t.right;}return t.left;}}return t.right-((t.right-t.left)/2);},_getTileRect:function(d,t){if(t instanceof HTMLElement){return t.getBoundingClientRect();}var j=t.$().find(".sapMGTLineStyleHelper");if(t.isLink&&j&&j.length){if(d==="down"){return j.get(j.length-1).getBoundingClientRect();}return j.get(0).getBoundingClientRect();}if(t.getDomRef()){return t.getDomRef().getBoundingClientRect();}},_findClosestTile:function(d,t,o){var e=this._getTileRect(d,o),n=this._getTileCenter(d,e,o);var f,g=Infinity,h=d==="down"?1:-1,i=t.indexOf(o)+h,j;for(;;i+=h){var T=t[i];if(!T){return f;}if(!f){if(d==="down"&&i===t.length-1){return T;}if(d==="up"&&i===0){return T;}}var k=this._getTileRect(d,T);if(!k){return f;}if(d==="down"&&e.bottom+5>=k.bottom){continue;}if(d==="up"&&e.top-5<=k.top){continue;}if(f&&j!==k.top){return f;}j=k.top;var l=Math.min(Math.abs(k.left-n),Math.abs(k.right-n));if(g>l){g=l;f=T;}else{return f;}}},_getNextTile:function(d,m,g){var i=g||this._getGroupAndTilesInfo(),l=true;var n;var N;var G;var e;if(!i||(m&&i.oGroup.getProperty("isGroupLocked"))){return null;}if(m){var t=i.oCurTile.getBindingContext().getObject().object;l=sap.ushell.Container.getService("LaunchPage").isLinkPersonalizationSupported(t);}if(d==="right"||d==="left"){var f=i.oCurTile.isLink?i.aLinks:i.aTiles,h=f.indexOf(i.oCurTile),j=d==="right"?h+1:h-1;if(f[j]&&f[j].getDomRef()){if(m&&f[j]===i.oGroup.oPlusTile){}else{return f[j];}}if(d==="right"&&!i.oCurTile.isLink&&i.aLinks.length&&l){return i.aLinks[0];}if(d==="left"&&i.oCurTile.isLink&&i.aTiles.length){return i.oGroup.getShowPlaceholder()?i.oGroup.oPlusTile:i.aTiles[i.aTiles.length-1];}}var o=this._getNextGroup(d,i.oGroup,m,l);if(o){n=o.getTiles();N=o.getLinks();if(d==="right"){if(n.length===0&&N.length===0){return o.oPlusTile;}else if(n.length===0){return N[0];}return n[0];}if(d==="left"){if(n.length===0&&N.length===0){return o.oPlusTile;}else if(N.length===0){return n[n.length-1];}return N[N.length-1];}}if(d==="down"||d==="up"){G=l?i.aTiles.concat(i.aLinks):i.aTiles;e=[];if(o){var k=o.getTiles(),p=o.getLinks();e=l?k.concat(p):k;if(e.length===0){e.push(o.oPlusTile);}}var J=(d==="down")?G.concat(e):e.concat(G);return this._findClosestTile(d,J,i.oCurTile);}},_getNextGroup:function(d,o,m,l){var n,g=o.getParent().getGroups(),e=g.indexOf(o),f=e;if(d==="down"||d==="right"){n=1;}else{n=-1;}f+=n;while(g[f]){var N=g[f],h=N.getTiles(),i=N.getLinks();var j=l?h.concat(i):h;var I=N.getVisible()&&!(N.getIsGroupLocked()&&m)&&!(N.getIsGroupLocked()&&j.length===0)&&!(j.length===0&&!(m||this.oModel.getProperty("/tileActionModeActive")));if(I){return N;}f+=n;}},_getGroupAndTilesInfo:function(){var j=this._getFocusOnTile(q(document.activeElement));if(!j||!j.length){return null;}var o=j.control(0);o.isLink=j.hasClass("sapUshellLinkTile")||j.hasClass("sapMGTLineMode");var g=j.closest(".sapUshellTileContainer").control(0);if(!g){return null;}var t=g.getTiles();if(g.getShowPlaceholder()){t.push(g.oPlusTile);}return{oCurTile:o,oGroup:g,aTiles:t,aLinks:g.getLinks()};},_goToSiblingElementInTileContainer:function(d,j){var e=j.closest(".sapUshellTileContainer"),f,g,h;f=j.closest(".sapUshellTileContainerBeforeContent");if(f.length){if(d==="up"||d==="left"){this._goToNextTileContainer(f,d);}else{h=e.find(".sapUshellTileContainerHeader").eq(0);this._setTabIndexOnTileContainerHeader(h);h.focus();}return;}f=j.closest(".sapUshellTileContainerHeader");if(f.length){if(d==="up"){this._setTabIndexOnTileContainerHeader(h);if(!this._goToTileContainerBeforeContent(e)){this._goToNextTileContainer(f,d);}}else if(d==="down"){g=e.find(".sapUshellTile, .sapUshellLinkTile, .sapFCard").eq(0);if(g.length){this.moveScrollDashboard(g);}else{this._goToNextTileContainer(f,d);}}else if(d==="left"){if(j.hasClass("sapUshellTileContainerHeader")){if(!this._goToTileContainerBeforeContent(e)){this._goToNextTileContainer(f,"left");}}else{h=j.closest(".sapUshellTileContainerHeader");h.focus();}}else if(d==="right"){var i=j.hasClass("sapMInputBaseInner");if(!i){g=e.find(".sapUshellTile, .sapUshellLinkTile, .sapFCard").eq(0);if(g.length){this.moveScrollDashboard(g);}else{this._goToNextTileContainer(f,"down");}}}return;}f=this._getFocusOnTile(j);if(f){this._goFromFocusedTile(d,f,true);return;}f=j.closest(".sapUshellTileContainerAfterContent");if(f.length){if(d==="up"||d==="left"){this._goToTileOfGroup("first",f.control(0));}else{this._goToNextTileContainer(f,d);}}},_goToNextTileContainer:function(j,d){var e=j.closest(".sapUshellTileContainer");if(e.length===1){var f=q(".sapUshellTileContainer").filter(":visible"),n=(d==="down")?1:-1,g=q(f[f.index(e)+n]);if(g.length===1){var h=g.find(".sapUshellTileContainerHeader");if(d==="down"){if(!this._goToTileContainerBeforeContent(g)){this._setTabIndexOnTileContainerHeader(h);this._setTileContainerSelectiveFocus(g);}}else if(!this._goToTileContainerAfterContent(g)){if(d==="up"||d==="left"){var s=d==="up"?"first":"last";if(!this._goToTileOfGroup(s,g.control(0))){this._setTabIndexOnTileContainerHeader(h);h.focus();}}}}}},_goToTileContainerBeforeContent:function(j){var d=j.hasClass("sapUshellTileContainer")?j:j.closest(".sapUshellTileContainer"),e=d.find(".sapUshellTileContainerBeforeContent button").filter(":visible");if(e.length){e.focus();return true;}return false;},_goToTileContainerAfterContent:function(j){var d=j.hasClass("sapUshellTileContainer")?j:j.closest(".sapUshellTileContainer"),e=d.find(".sapUshellTileContainerAfterContent button").filter(":visible");if(e.length){e.focus();return true;}return false;},_goFromFocusedTile:function(d,$,i){var n=this._getNextTile(d);if(n){var N=n.$(),e=$.closest(".sapUshellTileContainer"),f=N.closest(".sapUshellTileContainer");if(i&&(e.get(0).id!==f.get(0).id)){if(d==="down"||d==="right"){if(!this._goToTileContainerAfterContent(e)){this._setTabIndexOnTileContainerHeader(f.find(".sapUshellTileContainerHeader"));this._setTileContainerSelectiveFocus(f);}}else if(d==="up"||d==="left"){var g=e.find(".sapUshellTileContainerHeader");this._setTabIndexOnTileContainerHeader(g);g.focus();}}else{this.moveScrollDashboard(N);}}},_setTabIndexOnTileContainerHeader:function(j){q(".sapUshellTileContainerHeader").attr("tabindex",-1);q(".sapUshellTileContainerHeader .sapUshellContainerTitle").attr("tabindex",-1);q(".sapUshellTileContainerHeader .sapUshellContainerHeaderActions button").attr("tabindex",-1);if(j){var d=j.find(".sapUshellContainerTitle").eq(0),e=j.find(".sapUshellContainerHeaderActions").eq(0);j.attr("tabindex",0);d.attr("tabindex",0);e.find("button").attr("tabindex",0);}},_setTileContainerSelectiveFocus:function(j){var d=q("#dashboardGroups").find(".sapUshellTileContainer").filter(":visible"),e=j.find(".sapUshellTileContainerBeforeContent button"),f=j.find(".sapUshellTileContainerHeader").eq(0),B=e.length&&e.is(":visible");if(B){e.focus();}else if(j.get(0)===d.get(0)){this.goToLastVisitedTile();}else if(f.length){this._setTabIndexOnTileContainerHeader(f);f.focus();}},setTileFocus:function(j){if(!j.hasClass("sapUshellPlusTile")){if(j.parents("#catalogView").length>0){this.setFocusOnCatalogTile(j.find("[tabindex]").eq(0));}}var d=q(".sapUshellTile, .sapMGTLineMode, .sapUshellLinkTile, .sapMGT, .sapFCard").filter("[tabindex=0]").get();for(var i=0;i<d.length;i++){d[i].setAttribute("tabindex","-1");}if(j.length>0){j.attr("tabindex",0);if(j.prop("tagName")==="DIV"&&q(j).hasClass("sapUshellLinkTile")&&j.getMode===undefined){j=j.find("a").length?j.find("a")[0]:j;}j.focus();if(j[0]&&j[0].id){var t=sap.ui.getCore().byId(j[0].id);var e=this.tileFocusCustomData.getParent&&this.tileFocusCustomData.getParent();if(e){e.removeAggregation("customData",this.tileFocusCustomData,true);}if(t&&sap.ui.getCore().byId(t.getId())&&this.tileFocusCustomData&&sap.ui.getCore().byId(this.tileFocusCustomData.getId())){t.addAggregation("customData",this.tileFocusCustomData,true);}}}},setFocusOnCatalogTile:function(j){var p=q(".sapUshellTile[tabindex=0]"),d,v;if(p.length){q(".sapUshellTileContainerContent [tabindex=0]").get().forEach(function(h){q(h).attr("tabindex",-1);});d=p.find("[tabindex], a").andSelf().filter("[tabindex], a");d.attr("tabindex",-1);}if(!j){v=q(".sapUshellTile, .sapUshellAppBox").filter(":visible");if(v.length){j=q(v[0]);}else{return;}}j.attr("tabindex",0);j.find("button").attr("tabindex",0);j.focus();},moveScrollDashboard:function(t){if(!t.length){return;}var f=t[0].parentElement.firstChild;var d=document.getElementById("dashboardGroups");var y=f.getBoundingClientRect().top-d.getBoundingClientRect().top;document.getElementById("sapUshellDashboardPage-cont").scrollTop=y;this.setTileFocus(t);},_moveGroupFromDashboard:function(d,j){var e,t=q(".sapUshellDashboardGroupsContainerItem"),i,f;e=j.closest(".sapUshellDashboardGroupsContainerItem");i=t.index(e);f=d==="up"||d==="left"?i-1:i+1;this._moveGroup(i,f);},_moveGroup:function(f,t){if(t<0||t>=q(".sapUshellDashboardGroupsContainerItem").length||t<q(".sapUshellDisableDragAndDrop").length){return;}sap.ui.getCore().getEventBus().publish("launchpad","moveGroup",{fromIndex:f,toIndex:t});var d=this;setTimeout(function(){var e=q(".sapUshellTileContainerHeader")[t];d._setTabIndexOnTileContainerHeader(q(e));q(e).focus();},100);},_getFocusOnTile:function(j){var d;[".sapUshellTile",".sapUshellLinkTile",".sapFCard"].forEach(function(s){var e=j.closest(s);if(e.length){d=e;}});return d;},_renameGroup:function(j){if(j.closest(".sapUshellTileContainerHeader").length===1){j=j[0].tagName==="H2"?j:j.find("h2");j.click();}},_arrowsButtonsHandler:function(d,e,j){this._preventDefault(e);if(j.hasClass("sapUshellAnchorItem")){this._handleAnchorNavigationItemsArrowKeys(d,j);return;}var f=this._getFocusOnTile(j),i=this.oModel.getProperty("/tileActionModeActive");if(e.ctrlKey===true&&this.oModel.getProperty("/personalization")){var g=j.closest(".sapUshellTileContainerHeader");if(f){this._moveTile(d,f);}else if(g.length){var h=g.closest(".sapUshellTileContainerContent");if(!h.hasClass("sapUshellTileContainerDefault")||!h.hasClass("sapUshellTileContainerLocked")){this._moveGroupFromDashboard(d,g);}}}else if(i){this._goToSiblingElementInTileContainer(d,j);}else if(f){this._goFromFocusedTile(d,f,i);}else{this.goToLastVisitedTile();}},_handleAnchorNavigationItemsArrowKeys:function(d,j){var e=q(".sapUshellAnchorItem").filter(":visible"),n=e.index(j),N=j;if(d==="left"||d==="up"){if(n>0){N=e.get(n-1);}}else if(d==="right"||d==="down"){if(n<e.length-1){N=e.get(n+1);}}this._setAnchorItemFocus(q(N));},_setAnchorItemFocus:function(j){q(".sapUshellAnchorItem").get().forEach(function(h){q(h).attr("tabindex",-1);});j.attr("tabindex",0);j.focus();},_appFinderHomeEndButtonsHandler:function(d,e,j){var v=q(".sapUshellTile, .sapUshellAppBox").filter(":visible"),f;if(v.length){if(d==="home"){f=q(v.get(0));}if(d==="end"){f=q(v.get(v.length-1));}}if(f){this._preventDefault(e);this._appFinderFocusAppBox(j,f);}},_homeEndButtonsHandler:function(s,e,j){if(j.hasClass("sapUshellAnchorItem")){this._preventDefault(e);this._setAnchorItemFocus(q(".sapUshellAnchorItem").filter(":visible:"+s));}else if(e.ctrlKey===true){this._preventDefault(e);var d=q(".sapUshellTile, .sapFCard").filter(":visible")[s]();this.moveScrollDashboard(d);}else{var f=j.closest(".sapUshellTileContainer");if(f){var g=f.control(0);if(g){this._preventDefault(e);this._goToTileOfGroup(s,g);}}}},_deleteButtonHandler:function(j){if(this.oModel.getProperty("/personalization")&&this.oModel.getProperty("/tileActionModeActive")){var d=this._getFocusOnTile(j);if(d&&!d.hasClass("sapUshellLockedTile")&&!d.hasClass("sapUshellPlusTile")){var i=this._getGroupAndTilesInfo();if(i){var D=q(".sapUshellDashboardView").control(0),t=D.getController()._getTileUuid(i.oCurTile),e=this;setTimeout(function(){if(i.oCurTile.getDomRef()){e.moveScrollDashboard(i.oCurTile.$());}else{e.moveScrollDashboard(i.oGroup.oPlusTile.$());}},100);sap.ui.getCore().getEventBus().publish("launchpad","deleteTile",{tileId:t},this);}}}},_ctrlPlusArrowKeyButtonsHandler:function(d){var j=q(document.activeElement),e=j.closest(".sapUshellTileContainerHeader");if(this._getFocusOnTile(j)){this._moveTile(d);}else if(e.length){var f=e.closest(".sapUshellTileContainerContent");if(!f.hasClass("sapUshellTileContainerDefault")||!f.hasClass("sapUshellTileContainerLocked")){this._moveGroupFromDashboard(d,e);}}},_spaceButtonHandler:function(e,j){var d=this._getFocusOnTile(j);if(!d||!d.length){j.click();return;}e.preventDefault();if(d.hasClass("sapFCard")){d.control(0).getCardHeader().firePress();return;}var f=j.find("[role=button]");if(f.length){var B=f.control(0);if(B){B.firePress();return;}}d.control(0).firePress();},goToSelectedAnchorNavigationItem:function(){this._setAnchorItemFocus(q(".sapUshellAnchorItemSelected"));return q(document.activeElement).hasClass("sapUshellAnchorItemSelected");},handleFocusOnMe:function(e,f){var r=sap.ushell.Container.getRenderer("fiori2"),h=c;if(r){var s=r.getCurrentCoreView();if(s==="home"&&!C.last("/core/spaces/enabled")){var t=document.activeElement?document.activeElement.tagName:"";if(t==="INPUT"||t==="TEXTAREA"){if(e.keyCode===h.keyCodes.ENTER){var H=q(document.activeElement).closest(".sapUshellTileContainerHeader");if(H.length){setTimeout(function(){H=q("#"+H[0].id);h._setTabIndexOnTileContainerHeader(H);H.focus();},10);}}}else{h._dashboardKeydownHandler(e);}}if(s==="appFinder"){if(f){if(e.shiftKey){h.setFocusOnCatalogTile();}else{var o=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");if(o&&o.getVisible()){o.focus();}else{h.appFinderFocusMenuButtons(e);}}}else{h._appFinderKeydownHandler(e);}}}},_groupHeaderNavigation:function(j){var d;if(j.hasClass("sapUshellTileContainerHeader")){d=j.find(".sapUshellContainerTitle");d.focus();}else if(j.closest(".sapUshellTileContainerHeader")){d=j.closest(".sapUshellTileContainerHeader");d.focus();}},_appFinderFocusAppBox:function(j,d){if(j&&d){j.attr("tabindex","-1").find(".sapUshellPinButton").attr("tabindex","-1");d.attr("tabindex","0").focus();d.find(".sapUshellPinButton").attr("tabindex","0");}},_preventDefault:function(e){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();},_getNextCatalog:function(d,j){var e;if(d==="down"||d==="right"){e=j.next();}else if(d==="up"||d==="left"){e=j.prev();}else{L.error("Direction is unkown",d,"sap.ushell.components.ComponentKeysHandler");return null;}if(e.length>0){var n=e.find("li.sapUshellAppBox, li.sapUshellTile").get().length;if(n>0){return e;}return this._getNextCatalog(d,e);}},_getNextCatalogItem:function(d,j,p){var e=q(j.parents()[2]),f=e.find("li.sapUshellAppBox, li.sapUshellTile").get();if(d==="right"||d==="left"){var n=f.indexOf(j.get(0)),g=d==="right"?n+1:n-1;if(f[g]){return f[g];}}var h=this._getNextCatalog(d,e),N=h?h.find("li.sapUshellAppBox, li.sapUshellTile").get():[];if(N.length>0&&d==="right"){return N[0];}if(N.length>0&&d==="left"){return N[N.length-1];}if(d==="down"||d==="up"){if(N.length>0&&p){return N[0];}var J=(d==="down")?f.concat(N):N.concat(f);return this._findClosestTile(d,J,j.get(0));}},_appFinderKeysHandler:function(d,e,j,p){if(j.is(".sapUshellAppBox, .sapUshellTile")){this._preventDefault(e);var f=q(this._getNextCatalogItem(d,j,p));if(f){this._appFinderFocusAppBox(j,f);}}},appFinderFocusMenuButtons:function(e){var d=q("#catalog-button, #userMenu-button, #sapMenu-button").filter("[tabindex=0]");if(d.length){d.eq(0).focus();this._preventDefault(e);return true;}return false;},_appFinderKeydownHandler:function(e){var j=q(document.activeElement);if(e.srcElement.id!=="appFinderSearch-I"){var p=e.keyCode,i=sap.ui.getCore().getConfiguration().getRTL();if(i&&p===this.keyCodes.ARROW_RIGHT){p=this.keyCodes.ARROW_LEFT;}else if(i&&p===this.keyCodes.ARROW_LEFT){p=this.keyCodes.ARROW_RIGHT;}switch(p){case this.keyCodes.ARROW_UP:this._appFinderKeysHandler("up",e,j);break;case this.keyCodes.ARROW_DOWN:this._appFinderKeysHandler("down",e,j);break;case this.keyCodes.ARROW_RIGHT:this._appFinderKeysHandler("right",e,j);break;case this.keyCodes.ARROW_LEFT:this._appFinderKeysHandler("left",e,j);break;case this.keyCodes.PAGE_UP:this._appFinderKeysHandler("up",e,j,true);break;case this.keyCodes.PAGE_DOWN:this._appFinderKeysHandler("down",e,j,true);break;case this.keyCodes.HOME:this._appFinderHomeEndButtonsHandler("home",e,j);break;case this.keyCodes.END:this._appFinderHomeEndButtonsHandler("end",e,j);break;case this.keyCodes.SPACE:this._spaceButtonHandler(e,j);break;default:return;}}},_dashboardKeydownHandler:function(e){var t=document.activeElement&&document.activeElement.tagName;if(t==="INPUT"||t==="TEXTAREA"){return;}var p=e.keyCode,i=sap.ui.getCore().getConfiguration().getRTL(),j=q(document.activeElement);if(i){if(p===this.keyCodes.ARROW_RIGHT){p=this.keyCodes.ARROW_LEFT;}else if(p===this.keyCodes.ARROW_LEFT){p=this.keyCodes.ARROW_RIGHT;}}switch(p){case this.keyCodes.F2:this._renameGroup(j);break;case this.keyCodes.F7:this._groupHeaderNavigation(j);break;case this.keyCodes.DELETE:case this.keyCodes.BACKSPACE:this._deleteButtonHandler(j);break;case this.keyCodes.ARROW_UP:this._arrowsButtonsHandler("up",e,j);break;case this.keyCodes.ARROW_DOWN:this._arrowsButtonsHandler("down",e,j);break;case this.keyCodes.ARROW_RIGHT:this._arrowsButtonsHandler("right",e,j);break;case this.keyCodes.ARROW_LEFT:this._arrowsButtonsHandler("left",e,j);break;case this.keyCodes.PAGE_UP:this._goToFirstTileOfNextGroup("up",e);break;case this.keyCodes.PAGE_DOWN:this._goToFirstTileOfNextGroup("down",e);break;case this.keyCodes.HOME:this._homeEndButtonsHandler("first",e,j);break;case this.keyCodes.END:this._homeEndButtonsHandler("last",e,j);break;case this.keyCodes.SPACE:this._spaceButtonHandler(e,j);break;case this.keyCodes.ENTER:this._spaceButtonHandler(e,j);break;default:break;}return true;},init:function(m){this.oModel=m;}};var c=new b();return c;},true);
