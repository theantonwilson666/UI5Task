// Copyright (c) 2009-2020 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/core/mvc/Controller","sap/base/Log","sap/m/Title","sap/ushell/Config"],function(C,L,T,a){"use strict";return C.extend("sap.ushell.components.shell.Settings.userProfiling.UserProfiling",{onInit:function(){this._loadContent();},_loadContent:function(){var v=this.getView().byId("profilingContent"),p=a.last("/core/userPreferences/profiling");p.forEach(function(P){var c=P.contentFunc();c.then(function(r){var t=new T({text:P.title||""}).addStyleClass("sapUiSmallMarginTop");v.addItem(t);v.addItem(r);},function(e){L.warning("Failed to load "+P.title+" profiling",e,"sap.ushell.components.shell.Settings.userProfiling.UserProfiling");});});},onCancel:function(){var p=a.last("/core/userPreferences/profiling");p.forEach(function(P){if(P.onCancel){P.onCancel();}});},onSave:function(){var p=a.last("/core/userPreferences/profiling")||[],s=p.map(this._saveProfileEntry);return Promise.all(s).then(function(r){var h=r.some(function(R){return R&&R.error;});return h?Promise.reject("Can not save user profiling settings"):Promise.resolve();});},_saveProfileEntry:function(p){return new Promise(function(r){p.onSave().then(r,function(e){L.error("Failed to save "+p.title+" profiling",e,"sap.ushell.components.shell.Settings.userProfiling.UserProfiling");r({error:true});});});}});});
