// Copyright (c) 2009-2020 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ushell/Config","sap/ushell/resources"],function(C,J,a,r){"use strict";return C.extend("sap.ushell.components.shell.Settings.spaces.SpacesSetting",{onInit:function(){this.getView().setModel(new J({isSpacesEnabled:a.last("/core/spaces/enabled")}));this.getView().setModel(r.getTranslationModel(),"i18n");},onSave:function(){var m=this.getView().getModel(),s=m.getProperty("/isSpacesEnabled"),S=a.last("/core/spaces/enabled");if(s===S){return Promise.resolve();}return sap.ushell.Container.getServiceAsync("UserInfo").then(function(u){var U=u.getUser();U.setChangedProperties({propertyName:"spacesEnabled",name:"SPACES_ENABLEMENT"},S,s);return new Promise(function(b,c){u.updateUserPreferences(U).done(function(){U.resetChangedProperty("spacesEnabled");b({refresh:true});}).fail(function(e){m.setProperty("/isSpacesEnabled",S);U.resetChangedProperty("spacesEnabled");c(e);});});});},onCancel:function(){this.getView().getModel().setProperty("/isSpacesEnabled",a.last("/core/spaces/enabled"));}});});
