// Copyright (c) 2009-2020 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/Log","sap/ui/core/mvc/XMLView","sap/ui/model/json/JSONModel","sap/ushell/components/SharedComponentUtils","sap/ushell/Config","sap/ushell/resources"],function(L,X,J,S,C,r){"use strict";var d={"scroll":0,"tabs":1,getName:function(v){return Object.keys(this)[v];}};return{getEntry:function(){var v;return{id:"homepageEntry",entryHelpID:"homepageEntry",title:r.i18n.getText("FlpSettings_entry_title"),valueResult:null,contentResult:null,icon:"sap-icon://home",valueArgument:null,contentFunc:function(){return new Promise(function(a,b){S.getEffectiveHomepageSetting("/core/home/homePageGroupDisplay","/core/home/enableHomePageSettings").done(function(D){X.create({id:"UserSettingsHomepageSettingsView",viewName:"sap.ushell.components.shell.Settings.homepage.HomepageSetting"}).then(function(V){v=V;v.setModel(new J({displayMode:d[D]||d.scroll,personalisationEnabled:C.last("/core/shell/enablePersonalization")}));v.setModel(r.getTranslationModel(),"i18n");a(v);});}).fail(function(e){L.error("Failed to get effective hompage setting.",e,"sap.ushell.components.ushell.settings.homepage.HomepageEntry");b();});});},onSave:function(){if(v){var c=v.getModel().getProperty("/displayMode"),D=d.getName(c),R=sap.ushell.Container.getRenderer("fiori2");return new Promise(function(a,b){S.getPersonalizer("homePageGroupDisplay",R).setPersData(D).done(function(){C.emit("/core/home/homePageGroupDisplay",D);a();}).fail(function(e){L.error("Failed to save the anchor bar mode in personalization",e,"sap.ushell.components.ushell.settings.homepage.HomepageEntry");b();});});}L.warning("Save operation for user account settings was not executed, because the homepage view was not initialized");return Promise.resolve();},onCancel:function(){if(v){return;}L.warning("Cancel operation for user account settings was not executed, because the homepage view was not initialized");},provideEmptyWrapper:false};}};});
