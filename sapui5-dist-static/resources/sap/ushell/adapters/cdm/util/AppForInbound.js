// Copyright (c) 2009-2020 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/util/ObjectPath","sap/base/Log"],function(O,L){"use strict";var A={};A.get=function(i,a){var o={};switch(a.resolutionResult.applicationType){case"SAPUI5":o=this._getUI5App(i,a);break;case"TR":o=this._getTRApp(i,a);break;case"WDA":o=this._getWDAApp(i,a);break;case"URL":o=this._getURLApp(i,a);break;case"WCF":o=this._getWCFApp(i,a);break;default:L.error("Unable to get CDM app for inbound: Application type '"+a.resolutionResult.applicationType+"' of app '"+i+"' is unknown and not supported.");throw new Error("Unknown application type: "+a.applicationType);}if(a.resolutionResult.systemAlias){O.set(["sap.app","destination"],{name:a.resolutionResult.systemAlias,semantics:"applied"},o);}return o;};A._getURLApp=function(i,a){return{"sap.app":{"id":i,"crossNavigation":{"inbounds":{"Shell-launchURL":{"semanticObject":"Shell","action":"launchURL","signature":{"parameters":{"sap-external-url":{"required":true,"filter":{"value":a.resolutionResult.url,"format":"plain"}}}}}}}},"sap.ui":{"technology":"URL","deviceTypes":a.deviceTypes},"sap.url":{"uri":a.resolutionResult.url}};};A._getUI5App=function(i,a){return{"sap.app":{"id":i,"title":a.resolutionResult.text,"subTitle":a.resolutionResult.information,"crossNavigation":{"inbounds":this._getApplicationInbound(a)}},"sap.ui5":{"componentName":a.resolutionResult.ui5ComponentName},"sap.ui":{"technology":"UI5","deviceTypes":a.deviceTypes},"sap.platform.runtime":{"componentProperties":{"url":a.resolutionResult.url}}};};A._getApplicationInbound=function(i){var a={};a[i.id]={"semanticObject":i.semanticObject,"action":i.action,"signature":i.signature};return a;};A._getTRApp=function(i,a){var t,T=a.resolutionResult.url.match(/transaction=(.+?)[&?]/);if(T){t=T[1];}else{L.error("Unable to determine ABAP transaction from inbound URL of app '"+i+"': "+a.resolutionResult.url+".");}return{"sap.app":{"id":i,"title":a.resolutionResult.text,"subTitle":a.resolutionResult.information,"crossNavigation":{"inbounds":this._getApplicationInbound(a)}},"sap.ui":{"technology":"GUI","deviceTypes":a.deviceTypes},"sap.flp":{"type":"application"},"sap.gui":{"transaction":t}};};A._getWDAApp=function(i,a){return{"sap.app":{"id":i,"title":a.resolutionResult.text,"subTitle":a.resolutionResult.information,"crossNavigation":{"inbounds":this._getApplicationInbound(a)}},"sap.ui":{"technology":"URL","deviceTypes":a.deviceTypes},"sap.url":{"uri":a.resolutionResult.url}};};A._getWCFApp=function(i,a){return{"sap.app":{"id":i,"title":a.resolutionResult.text,"subTitle":a.resolutionResult.information,"crossNavigation":{"inbounds":this._getApplicationInbound(a)}},"sap.ui":{"technology":"URL","deviceTypes":a.deviceTypes},"sap.url":{"uri":a.resolutionResult.url}};};return A;});
