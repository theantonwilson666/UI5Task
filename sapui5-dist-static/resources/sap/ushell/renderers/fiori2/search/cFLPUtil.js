// Copyright (c) 2009-2020 SAP SE, All Rights Reserved
sap.ui.define([],function(){"use strict";return{readCFlpConfiguration:function(s){var c=false;if(!c){return Promise.resolve(s);}return sap.ushell.Container.getService("CommonDataModel").getApplications().then(function(a){var C=Object.keys(a).reduce(function(o,A){var d=a[A];var e=d["sap.app"]&&d["sap.app"].contentProviderId;if(e){o[e]=true;}return o;},{});var b=Object.keys(C);return b;}.bind(this)).then(function(a){var p=[];for(var i=0;i<a.length;++i){var b=a[i];p.push(this.createContentProviderSinaConfiguration(b));}return Promise.all(p);}.bind(this)).then(function(a){if(!a||a.length===0){return s;}else{return[{provider:'multi',subProviders:a,federationType:'advanced_round_robin'}];}}.bind(this));},createContentProviderSinaConfiguration:function(c){return sap.ushell.Container.getService("ClientSideTargetResolution").getSystemContext(c).then(function(s){var a=s.getProperty("esearch.provider");var r=s.getFullyQualifiedXhrUrl("sap/opu/odata/sap/ESH_SEARCH_SRV");return{provider:a.toLowerCase(),label:c,url:r};}.bind(this));}};});
