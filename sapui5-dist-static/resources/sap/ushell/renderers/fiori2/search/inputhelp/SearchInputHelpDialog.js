// Copyright (c) 2009-2020 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/library","sap/ushell/renderers/fiori2/search/controls/SearchFieldGroup"],function(u,S){"use strict";return sap.m.Dialog.extend("sap.ushell.renderers.fiori2.search.inputhelp.SearchInputHelpDialog",{metadata:{properties:{inputHelp:"object",displayAttribute:"string"}},constructor:function(o){var t=this;o=jQuery.extend({},{showHeader:false,horizontalScrolling:false,verticalScrolling:false,contentHeight:"50rem",contentWidth:"80rem",beginButton:new sap.m.Button({text:sap.ushell.resources.i18n.getText("okDialogBtn"),type:sap.m.ButtonType.Emphasized,press:function(e){t.onOkClick(e);t.close();t.destroy();}}),endButton:new sap.m.Button({text:sap.ushell.resources.i18n.getText("cancelDialogBtn"),press:function(e){t.onCancelClick(e);t.close();t.destroy();}}),content:[t.createContent()]},o);t.displayAttribute=o.displayAttribute;sap.m.Dialog.prototype.constructor.apply(this,[o]);t.addStyleClass("sapUshellSearchInputHelpDialog");},renderer:"sap.m.DialogRenderer",createContent:function(){var t=this;t.oSearchFieldGroup=new sap.ushell.renderers.fiori2.search.controls.SearchFieldGroup("searchInputHelpDialogSearchFieldGroup");t.oSearchFieldGroup.setCancelButtonActive(false);t.oSearchFieldGroup.addStyleClass("sapUshellSearchInputHelpDialogSearchFieldGroup");t.oSearchFieldGroup.input.setShowValueHelp(false);t.oSearchResults=sap.ui.view({id:"searchContainerResultsView",viewName:"sap.ushell.renderers.fiori2.search.container.Search",type:sap.ui.core.mvc.ViewType.JS});t.oSearchBar=new sap.m.Bar({visible:{parts:[{path:"/count"},{path:"/facetVisibility"}],formatter:function(c,f){if(f){return c!==0;}return c!==0;}},contentLeft:[t.oSearchResults.assembleFilterButton(),t.oSearchResults.assembleDataSourceTapStrips()],contentRight:t.oSearchResults.assembleSearchToolbar(true)});t.oSearchBar.addStyleClass("sapUshellSearchBar");t.oFilterBar=new sap.ushell.renderers.fiori2.search.controls.SearchFilterBar({visible:{parts:[{path:"/facetVisibility"},{path:"/uiFilter/rootCondition"}],formatter:function(f,r){if(!f&&r&&r.hasFilters()){return true;}return false;}}});t.oSearchPage=new sap.m.Page({id:"searchPage",customHeader:this.oSearchBar,subHeader:this.oFilterBar,content:[t.oSearchResults],enableScrolling:true,showFooter:{parts:["/errors/length"],formatter:function(n){return n>0;}},showHeader:true,showSubHeader:{parts:[{path:"/facetVisibility"},{path:"/uiFilter/rootCondition"}],formatter:function(f,r){if(!f&&r&&r.hasFilters()){return true;}return false;}}});t.oSearchPage.addStyleClass("sapUshellSearchInputHelpDialogSearchPage");return[t.oSearchFieldGroup,t.oSearchPage];},onOkClick:function(e){var t=this;var s=[];var r=t.getModel().getProperty("/results");for(var i=0;i<r.length;i++){var a=r[i];if(a.selected){s.push(a);}}var b=[];for(var j=0;j<s.length;j++){var c=s[j];c.value=t._getAttributeValue(c);b.push(new sap.m.Token({text:c.value,key:c.value}));}t.getInputHelp().setTokens(b);t.getModel().setProperty("/inputHelpSelectedItems",s);t.getInputHelp().fireChange();},onCancelClick:function(e){},_getAttributeValue:function(s){var t=this;var d=t.getDisplayAttribute();for(var i=0;i<s.itemattributes.length;i++){var a=s.itemattributes[i];if(a.key===d){return a.valueRaw;}}return s.title;}});});
