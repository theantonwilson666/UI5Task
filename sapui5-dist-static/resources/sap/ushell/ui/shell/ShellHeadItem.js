// Copyright (c) 2009-2020 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/util/ObjectPath","sap/ui/core/Control","sap/ui/core/IconPool","sap/ui/core/InvisibleText","sap/ushell/library","sap/ushell/resources"],function(O,C,I,a,u,r){"use strict";var S=C.extend("sap.ushell.ui.shell.ShellHeadItem",{metadata:{properties:{startsSection:{type:"boolean",group:"Appearance",defaultValue:false,deprecated:true},showSeparator:{type:"boolean",group:"Appearance",defaultValue:false,deprecated:true},enabled:{type:"boolean",group:"Appearance",defaultValue:true},selected:{type:"boolean",group:"Appearance",defaultValue:false},showMarker:{type:"boolean",group:"Appearance",defaultValue:false,deprecated:true},icon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},target:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},ariaLabel:{type:"string",group:"Accessibility",defaultValue:null},ariaHidden:{type:"boolean",group:"Accessibility",defaultValue:false},ariaHaspopup:{type:"string",group:"Accessibility",defaultValue:""},text:{type:"string",group:"Appearance",defaultValue:null},floatingNumber:{type:"int",group:"Appearance",defaultValue:null},floatingNumberMaxValue:{type:"int",group:"Appearance",defaultValue:999},floatingNumberType:{type:"string",group:"Appearance",defaultValue:"None"}},events:{press:{}}},renderer:{apiVersion:2,render:function(b,s){var t=s.getTarget()||"";b.openStart("a",s);b.attr("tabindex","0");if(t!==""){b.attr("href",s.getTarget());}b.accessibilityState({role:t?"link":"button",label:s.getAriaLabel()||undefined,hidden:s.getAriaHidden()||undefined,haspopup:s.getAriaHaspopup()||undefined,describedby:{value:s._oAriaDescribedbyText.getId(),append:true}});if(s.getFloatingNumber()>0){b.class("sapUshellShellHeadItmCounter");b.attr("data-counter-content",s.floatingNumberFormatter());}b.class("sapUshellShellHeadItm");if(!s.getEnabled()){b.class("sapUshellShellHeadItmDisabled");}if(!s.getVisible()){b.class("sapUshellShellHidden");}if(s.getSelected()){b.class("sapUshellShellHeadItmSel");}if(s.getTooltip_AsString()){b.attr("title",s.getTooltip_AsString());}b.openEnd();b.openStart("span");b.class("sapUshellShellHeadItmCntnt");var i=s.getIcon();var o=I.isIconURI(i)&&I.getIconInfo(i);if(o){b.style("font-family",o.fontFamily);b.openEnd();b.text(o.content);}else{b.openEnd();b.voidStart("img");b.attr("id",s.getId()+"-img-inner");b.attr("src",i);b.voidEnd();}b.close("span");b.close("a");}}});S.prototype.FloatingNumberType={None:"None",Notifications:"Notifications",OverflowButton:"OverflowButton"};S.prototype.init=function(){this._oAriaDescribedbyText=new a(this.getId()+"-describedby").toStatic();this.addDependent(this._oAriaDescribedbyText);};S.prototype.onBeforeRendering=function(){switch(this.getFloatingNumberType()){case this.FloatingNumberType.None:this._oAriaDescribedbyText.setText("");break;default:var c=this.getFloatingNumber();if(!c){this._oAriaDescribedbyText.setText("");}else{var m=this.getFloatingNumberMaxValue();this._oAriaDescribedbyText.setText((c>m)?r.i18n.getText("NotificationToggleButton.NewNotifications.MaxExceeded",m):r.i18n.getText("NotificationToggleButton.NewNotifications",c));}break;}};S.prototype.tooltipFormatter=function(f){var c=((typeof f!=="undefined")?f:this.getFloatingNumber());var m=this.getFloatingNumberMaxValue();switch(this.getFloatingNumberType()){default:case this.FloatingNumberType.None:return"";case this.FloatingNumberType.Notifications:if(!c){return r.i18n.getText("NotificationToggleButton.NoNewNotifications");}return(c>m?r.i18n.getText("NotificationToggleButton.NewNotifications.MaxExceeded",m):r.i18n.getText("NotificationToggleButton.NewNotifications",c));case this.FloatingNumberType.OverflowButton:var t=r.i18n.getText("shellHeaderOverflowBtn_tooltip");if(!c){return t;}t+=" ("+(c>m?r.i18n.getText("NotificationToggleButton.NewNotifications.MaxExceeded",m):r.i18n.getText("NotificationToggleButton.NewNotifications",c))+")";return t;}};S.prototype.floatingNumberFormatter=function(f){var c=((typeof f!=="undefined")?f:this.getFloatingNumber());var m=this.getFloatingNumberMaxValue();return(c>m?m+"+":c.toString());};S.prototype.onclick=function(e){if(this.getEnabled()){this.firePress();if(!this.getTarget()){e.preventDefault();}}};S.prototype.onsapspace=S.prototype.onclick;S.prototype.onsapenter=S.prototype.onclick;O.set("sap.ui.unified.ShellHeadItem",S);return S;},true);
