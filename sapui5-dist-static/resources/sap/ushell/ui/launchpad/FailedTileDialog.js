// Copyright (c) 2009-2020 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/core/Fragment","sap/ui/model/json/JSONModel"],function(F,J){"use strict";return function(){function _(s){if(!s){throw new Error("Could not find the Tile of the given control");}if(s.isA(["sap.ushell.ui.launchpad.Tile","sap.ushell.ui.launchpad.LinkTileWrapper"])){return s;}return _(s.getParent());}function a(s){if(!s){throw new Error("Could not find the Group of the given control");}if(s.isA("sap.ushell.ui.launchpad.TileContainer")){return s;}return a(s.getParent());}function b(s){var d={};var t=_(s);if(t.getDebugInfo){var D=t.getDebugInfo();if(D){d=JSON.parse(D);d.debugInfo=D;}}if(t.getTileCatalogId){var T=t.getTileCatalogId();if(T){d.chipId=decodeURIComponent(T);}}var g=a(s);var G=g.getBindingContext();if(G){var o=G.getProperty("object");if(o){d.groupId=o.getId();}}return d;}this.openFor=function(s){function g(c){if(!c){throw new Error("Could not find the View of the given control");}return(c.isA("sap.ui.core.mvc.View")?c:g(c.getParent()));}var v=g(s);if(!v.oFailedTileDialog){return F.load({id:v.createId("failedTileDialogFragment"),name:"sap.ushell.ui.launchpad.FailedTileDialog",controller:this}).then(function(f){f.setModel(new J({}));f.bindObject({path:"/"});v.oFailedTileDialog=f;v.addDependent(v.oFailedTileDialog);this.openFor(s);}.bind(this));}var d=v.oFailedTileDialog.getModel();d.setProperty("/",b(s));d.setProperty("/showDetails",false);v.oFailedTileDialog.open();return Promise.resolve();};this.onShowDetails=function(e){e.getSource().getModel().setProperty("/showDetails",true);};this.onClose=function(e){e.getSource().getParent().close();};};});
