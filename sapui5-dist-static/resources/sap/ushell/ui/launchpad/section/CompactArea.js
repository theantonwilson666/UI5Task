//Copyright (c) 2009-2020 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/core/Control","sap/ui/events/KeyCodes","sap/ushell/library","./CompactAreaRenderer"],function(C,K,u){"use strict";var a=C.extend("sap.ushell.ui.launchpad.section.CompactArea",{metadata:{library:"sap.ushell",properties:{showEmptyLinksArea:{type:"boolean",group:"Misc",defaultValue:false},showEmptyLinksAreaPlaceHolder:{type:"boolean",group:"Misc",defaultValue:false},enableLinkReordering:{type:"boolean",group:"Behavior",defaultValue:false}},dnd:{draggable:false,droppable:true},aggregations:{items:{type:"sap.ui.core.Control",singularName:"item",multiple:true,dnd:true}},events:{borderReached:{parameters:{event:{type:"jQuery.Event"}}},itemDrop:{parameters:{draggedControl:{type:"sap.ui.core.Control"},droppedControl:{type:"sap.ui.core.Control"},dropPosition:{type:"string"}}}}}});a.prototype.onBorderReached=this.fireBorderReached;a.prototype.onsapnext=function(e){e.stopImmediatePropagation(true);e.preventDefault();if(e.keyCode===K.ARROW_RIGHT){var i=this.getFocusedItemIndex();if(i>=0&&i<this.getItems().length-1){this.focusItem(i+1);return;}}this.fireBorderReached({event:e});};a.prototype.onsapprevious=function(e){e.stopImmediatePropagation(true);e.preventDefault();if(e.keyCode===K.ARROW_LEFT){var i=this.getFocusedItemIndex();if(i>0){this.focusItem(i-1);return;}}this.fireBorderReached({event:e});};a.prototype.onsapnextmodifiers=function(e){if(!this.getEnableLinkReordering()){return;}var i=this.getFocusedItemIndex();var I=this.getItems();e.stopImmediatePropagation(true);e.preventDefault();if(e.keyCode===K.ARROW_RIGHT&&i>-1&&i<I.length-1){this.fireItemDrop({draggedControl:I[i],droppedControl:I[i+1],dropPosition:"After",browserEvent:e});}if(e.keyCode===K.ARROW_DOWN&&i>-1){this.fireItemDrop({draggedControl:I[i],droppedControl:null,dropPosition:"After",browserEvent:e});}};a.prototype.onsappreviousmodifiers=function(e){if(!this.getEnableLinkReordering()){return;}var i=this.getFocusedItemIndex();var I=this.getItems();e.stopImmediatePropagation(true);e.preventDefault();if(e.keyCode===K.ARROW_LEFT&&i>0){this.fireItemDrop({draggedControl:I[i],droppedControl:I[i-1],dropPosition:"Before",browserEvent:e});}if(e.keyCode===K.ARROW_UP&&i>-1){this.fireItemDrop({draggedControl:I[i],droppedControl:null,dropPosition:"Before",browserEvent:e});}};a.prototype.focusItem=function(i){i=i||0;var I=this.getItems();if(i===-1||i>=I.length){i=I.length-1;}if(i>=0){var f=I[i].getFocusDomRef()||I[i].getDomRef();(f.querySelector("a")||f).focus();}else{this.focus();}};a.prototype.onmousedown=function(e){var i=this.getDOMItemIndex(e.srcControl.getDomRef());var f=this.getFocusedItemIndex();if(f<0){f=0;}if(i<0){window.setTimeout(function(){this.focusItem(f);}.bind(this),0);}};a.prototype.getDOMItemIndex=function(e){var i=-1;this.getItems().forEach(function(I,b){var d=I.getDomRef();if(d&&d.contains(e)){i=b;}});return i;};a.prototype.onfocusin=function(e){if(document.activeElement===this.getDomRef()){this.focusItem(0);}};a.prototype.getFocusedItemIndex=function(){return this.getDOMItemIndex(document.activeElement);};return a;});
