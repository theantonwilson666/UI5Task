//@ui5-bundle sap/ushell/bootstrap/core-min-0.js
sap.ui.predefine('sap/ushell/components/DestroyHelper',[],function(){"use strict";function d(t){var i;if(t&&t.content){for(i=0;i<t.content.length;i++){if(t.content[i].destroy){t.content[i].destroy();}}}}function a(t){var i;if(t){for(i=0;i<t.length;i++){d(t[i]);}}}function b(A){if(A){a(A.tiles);}}function c(A){var i;if(A){for(i=0;i<A.length;i++){b(A[i]);}}}return{destroyFLPAggregationModel:b,destroyFLPAggregationModels:c,destroyTileModel:d,destroyTileModels:a};});
sap.ui.predefine('sap/ushell/components/GroupsHelper',[],function(){'use strict';return{getIndexOfGroup:a,getModelPathOfGroup:g};function g(G,s){var i=a(G,s);if(i<0){return null;}return"/groups/"+i;}function a(G,s){for(var i=0;i<G.length;i++){if(G[i].groupId===s)return i;}return-1;}});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine('sap/ui/base/ManagedObjectObserver',['sap/ui/base/Object','sap/ui/base/ManagedObject','sap/ui/base/EventProvider',"sap/base/util/array/uniqueSort",'sap/base/util/deepExtend'],function(B,M,E,u,d){"use strict";var a=B.extend("sap.ui.base.ManagedObjectObserver",{constructor:function(C){if(!C&&typeof C!=="function"){throw new Error("Missing callback function in ManagedObjectObserver constructor");}this._fnCallback=C;}});a.prototype.observe=function(i,C){if(!(i instanceof M)){if(i==null){return;}throw new TypeError("ManagedObjectObserver can only handle ManagedObjects, but observe was called for "+i);}p(i,C);c(i,this,C);};a.prototype.unobserve=function(i,C){if(!(i instanceof M)){if(i==null){return;}throw new TypeError("ManagedObjectObserver can only handle ManagedObjects, but unobserve was called for "+i);}if(C){p(i,C);}r(i,this,C);};a.prototype.isObserved=function(i,C){if(!(i instanceof M)){if(i==null){return false;}throw new TypeError("ManagedObjectObserver can only handle ManagedObjects, but isObserved was called for "+i);}return e(i,this,C);};a.prototype.disconnect=function(){f(this);};a.prototype.getConfiguration=function(i){return g(i,this);};var O={},t=Object.create(null);O.propertyChange=function(i,n,v,N){h("properties",i,n,function(){return{type:"property",old:v,current:N};});};O.aggregationChange=function(i,n,s,v){h("aggregations",i,n,function(){return{type:"aggregation",mutation:s,children:Array.isArray(v)?v:null,child:!Array.isArray(v)?v:null};});};O.parentChange=function(i,n,s,P){h("parent",i,n,function(){return{type:"parent",mutation:s,parent:P};});var q=s==="unset"?"remove":"insert";O.aggregationChange(P,n,q,i);};O.associationChange=function(i,n,s,I){h("associations",i,n,function(){return{type:"association",mutation:s,ids:I};});};O.eventChange=function(i,n,s,L,F,D){h("events",i,n,function(){return{type:"event",mutation:s,listener:L,func:F,data:D};});};O.bindingChange=function(i,n,s,q,v){h("bindings",i,n,function(){return{type:"binding",mutation:s,bindingInfo:q,memberType:v};});};O.objectDestroyed=function(i){h("destroy",i,null,function(){return{type:"destroy"};});var I=i.getId();if(t[I]){i.detachEvent("EventHandlerChange",H);delete t[I];}delete i._observer;};function h(T,n,N,C){var I=n.getId(),q=t[I];if(q){var s;for(var i=0;i<q.listeners.length;i++){if(b(q.configurations[i],T,N)){if(!s){s=C();s.name=N;s.object=n;}var L=q.listeners[i];L._fnCallback(s);}}}}function b(C,T,n){if(C==null||!T){return false;}if(T!="destroy"&&T!="parent"&&!n){return false;}return C[T]===true||(Array.isArray(C[T])&&C[T].indexOf(n)>-1);}function c(T,L,C){j(T,L,C,false);}function g(T,L){var i=T.getId();var n=t[i];if(n&&n.listeners){var I=n.listeners.indexOf(L);if(I>=0){var C=d({},n.configurations[I]);return C;}}return null;}function r(T,L,C){C=C||g(T,L);j(T,L,C,true);}function e(T,L,C){var i=T.getId(),n=t[i];C=C||g(T,L);if(!n){return false;}var I=n.listeners.indexOf(L);if(I===-1){return false;}else{return m(n.configurations[I].properties,C.properties)&&m(n.configurations[I].aggregations,C.aggregations)&&m(n.configurations[I].associations,C.associations)&&m(n.configurations[I].bindings,C.bindings)&&m(n.configurations[I].events,C.events)&&o(n.configurations[I].destroy,C.destroy)&&o(n.configurations[I].parent,C.parent);}}function f(L){for(var n in t){var T=t[n];for(var i=0;i<T.listeners.length;i++){if(T.listeners[i]===L){T.listeners.splice(i,1);T.configurations.splice(i,1);}}if(T.listeners&&T.listeners.length===0){delete t[n];T.object._observer=undefined;}}}function j(T,L,C,R){var i=T.getId(),n=t[i],q,I;if(R){if(!n){return;}I=n.listeners.indexOf(L);if(I>=0){q=n.configurations[I];}}else{if(!n){n=t[i]={listeners:[],configurations:[],object:T};}I=n.listeners.indexOf(L);if(I===-1){n.listeners.push(L);n.configurations.push(C);}else{q=n.configurations[I];}}if(q){q.properties=q.properties||[];l(q.properties,C.properties,R);q.aggregations=q.aggregations||[];l(q.aggregations,C.aggregations,R);q.associations=q.associations||[];l(q.associations,C.associations,R);q.bindings=q.bindings||[];l(q.bindings,C.bindings,R);q.events=q.events||[];l(q.events,C.events,R);if(C.destroy!=null){if(R){delete q.destroy;}else{q.destroy=C.destroy;}}if(C.parent!=null){if(R){delete q.parent;}else{q.parent=C.parent;}}}var s=k(T,"events");if(T._observer&&R){if(!s&&E.hasListener(T,"EventHandlerChange",H)){T.detachEvent("EventHandlerChange",H);}if(!s&&!k(T,"properties")&&!k(T,"aggregations")&&!k(T,"associations")&&!k(T,"destroy")&&!k(T,"parent")&&!k(T,"bindings")){delete T._observer;delete t[i];}}else if(!T._observer&&!R){if(s&&!E.hasListener(T,"EventHandlerChange",H)){T.attachEvent("EventHandlerChange",H);}T._observer=O;}}function k(T,s){var i=T.getId(),n=t[i];if(n){var C=n.configurations.filter(function(q){return q.hasOwnProperty(s)&&q[s]&&(q[s]===true||q[s].length>0);});return C.length>0;}return false;}function H(i){var T=i.getSource(),s=i.mParameters.EventId;if(T.getMetadata().hasEvent(s)){if(i.mParameters.type==="listenerAttached"){O.eventChange(T,s,"insert",i.mParameters.listener,i.mParameters.func,i.mParameters.data);}else if(i.mParameters.type==="listenerDetached"){O.eventChange(T,s,"remove",i.mParameters.listener,i.mParameters.func,i.mParameters.data);}}}function l(n,A,R){if(!A){return;}for(var i=0;i<A.length;i++){var I=n.indexOf(A[i]);if(I>-1&&R){n.splice(I,1);}else if(I===-1&&!R){n.push(A[i]);}}}function m(F,s){if(!Array.isArray(s)||s.length==0){return true;}if(!Array.isArray(F)||F.length==0){return false;}var U=u(F.concat(s));return F.length===U.length;}function o(i,C){if(C==null){return true;}return i===C;}function p(i,C){var n=i.getMetadata(),P=Object.keys(n.getAllProperties()),A=Object.keys(n.getAllAggregations()),q=Object.keys(n.getAllAssociations()),s=u(P.concat(A)),v=Object.keys(n.getAllEvents());C.properties=C.properties===true?P:C.properties;C.aggregations=C.aggregations===true?A:C.aggregations;C.associations=C.associations===true?q:C.associations;C.bindings=C.bindings===true?s:C.bindings;C.events=C.events===true?v:C.events;C.destroy=(C.destroy==null)?false:C.destroy;C.parent=(C.parent==null)?false:C.parent;}return a;});
sap.ui.predefine('sap/ui/fl/Layer',[],function(){"use strict";return{USER:"USER",PUBLIC:"PUBLIC",CUSTOMER:"CUSTOMER",CUSTOMER_BASE:"CUSTOMER_BASE",PARTNER:"PARTNER",VENDOR:"VENDOR",BASE:"BASE"};});
sap.ui.predefine('sap/ui/fl/apply/_internal/appVariant/DescriptorChangeTypes',[],function(){"use strict";return{getChangeTypes:function(){return["appdescr_ovp_addNewCard","appdescr_ovp_removeCard","appdescr_ovp_changeCard","appdescr_app_addNewInbound","appdescr_app_changeInbound","appdescr_app_removeInbound","appdescr_app_removeAllInboundsExceptOne","appdescr_app_addNewOutbound","appdescr_app_changeOutbound","appdescr_app_removeOutbound","appdescr_app_addNewDataSource","appdescr_app_changeDataSource","appdescr_app_removeDataSource","appdescr_app_addAnnotationsToOData","appdescr_app_addTechnicalAttributes","appdescr_app_removeTechnicalAttributes","appdescr_app_setTitle","appdescr_app_setSubTitle","appdescr_app_setShortTitle","appdescr_app_setDescription","appdescr_app_setInfo","appdescr_app_setDestination","appdescr_app_setKeywords","appdescr_app_setAch","appdescr_app_addCdsViews","appdescr_app_removeCdsViews","appdescr_flp_setConfig","appdescr_ui5_addNewModelEnhanceWith","appdescr_ui5_removeModel","appdescr_ui5_replaceComponentUsage","appdescr_ui5_setMinUI5Version","appdescr_smb_addNamespace","appdescr_smb_changeNamespace","appdescr_ui_generic_app_setMainPage","appdescr_ui_setIcon","appdescr_ui_setDeviceTypes","appdescr_ui5_addLibraries","appdescr_ui5_addNewModel","appdescr_app_addAnnotationsToOData","appdescr_ui5_addComponentUsages","appdescr_ui5_setFlexExtensionPointEnabled","appdescr_url_setUri","appdescr_fiori_setRegistrationIds","appdescr_card","appdescr_card_designtime"];},getCondensableChangeTypes:function(){return["appdescr_app_setTitle","appdescr_app_setInfo","appdescr_app_setShortTitle","appdescr_app_setSubTitle","appdescr_app_setDescription","appdescr_app_setDestination","appdescr_app_setKeywords","appdescr_app_setAch","appdescr_ui_setIcon","appdescr_ui_setDeviceTypes","appdescr_ui_setIcon","appdescr_ui_setDeviceTypes","appdescr_fiori_setRegistrationIds","appdescr_smb_changeNamespace"];}};});
sap.ui.predefine('sap/ui/fl/apply/_internal/changes/Applier',["sap/base/Log","sap/ui/core/Element","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/fl/apply/_internal/changes/FlexCustomData","sap/ui/fl/apply/_internal/changes/Utils","sap/ui/fl/apply/_internal/flexState/changes/DependencyHandler","sap/ui/fl/Utils"],function(L,E,J,F,U,D,a){"use strict";var l=new a.FakePromise();function _(C,p){var s=C.getSelector&&C.getSelector();if(!s||(!s.id&&!s.name)){throw Error("No selector in change found or no selector ID.");}var o=p.modifier.bySelector(s,p.appComponent,p.view);if(!o){throw Error("A flexibility change tries to change a nonexistent control.");}var i=C.getDependentControlSelectorList();i.forEach(function(j){var k=p.modifier.bySelector(j,p.appComponent,p.view);if(!k){throw Error("A dependent selector control of the flexibility change is not available.");}});return o;}function b(C,o,m,i,p){var x=f(p);var j=U.getControlIfTemplateAffected(o,C,p);var I=F.hasChangeApplyFinishedCustomData(j.control,o,p.modifier);var k=o.isApplyProcessFinished();if(k&&!I){if(!x){var n=U.checkIfDependencyIsStillValid.bind(null,p.appComponent,p.modifier,m);m=i._oChangePersistence.copyDependenciesFromInitialChangesMap(o,n,p.appComponent);}o.setInitialApplyState();}else if(!k&&I){o.markFinished();}return m;}function c(C,p){var s;if(f(p)&&C.getDefinition().jsOnly){s="Change cannot be applied in XML. Retrying in JS.";}if(s){C.setInitialApplyState();throw Error(s);}}function d(C,m,i,p){if(i instanceof E){m.control=i;}if(m.control){p.modifier.updateAggregation(m.originalControl,C.getContent().boundAggregation);}F.addAppliedCustomData(m.control,C,p,f(p));var r={success:true};C.markFinished(r);return r;}function e(o,C,m,p){var x=f(p);var r={success:false,error:o};var s=C.getId();var i="Change ''{0}'' could not be applied.";var j=o instanceof Error;var k=F.getCustomDataIdentifier(false,j,x);switch(k){case F.notApplicableChangesCustomDataKey:a.formatAndLogMessage("info",[i,o.message],[s]);break;case F.failedChangesCustomDataKeyXml:a.formatAndLogMessage("warning",[i,"Merge error detected while processing the XML tree."],[s],o.stack);break;case F.failedChangesCustomDataKeyJs:a.formatAndLogMessage("error",[i,"Merge error detected while processing the JS control tree."],[s],o.stack);break;}F.addFailedCustomData(m.control,C,p,k);if(x){C.setInitialApplyState();}else{C.markFinished(r);}return r;}function f(p){return p.modifier.targets==="xmlTree";}function g(o,C){var i=C.getDefinition();var s=i.changeType;var t=i.selector.id;var j=i.namespace+i.fileName+"."+i.fileType;var w="A flexibility change could not be applied.";w+="\nThe displayed UI might not be displayed as intedend.";if(o.message){w+="\n   occurred error message: '"+o.message+"'";}w+="\n   type of change: '"+s+"'";w+="\n   LRep location of the change: "+j;w+="\n   id of targeted control: '"+t+"'.";L.warning(w,undefined,"sap.ui.fl.apply._internal.changes.Applier");}function h(C,o,i){var p={appComponent:i,modifier:J};var j=J.bySelector(C.originalSelectorToBeAdjusted,i);var k=o.getBindingInfo(C.getContent().boundAggregation).template;if(j.getParent()){var s=[];var t=j;do{s.push({aggregation:t.sParentAggregationName,index:t.getParent().getAggregation(t.sParentAggregationName).indexOf(t)});t=t.getParent();}while(t.getParent());s.reverse();s.forEach(function(I){k=k.getAggregation(I.aggregation)[I.index];});}C.addDependentControl(k,"originalSelector",p);}var A={addPreConditionForInitialChangeApplying:function(p){l=l.then(function(){return p;});},applyChangeOnControl:function(C,o,p){var m=U.getControlIfTemplateAffected(C,o,p);return U.getChangeHandler(C,m,p).then(function(i){c(C,p);return i;}).then(function(i){if(C.hasApplyProcessStarted()){return C.addPromiseForApplyProcessing().then(function(r){C.markFinished();return r;});}else if(!C.isApplyProcessFinished()){return new a.FakePromise().then(function(){C.startApplying();return i.applyChange(C,m.control,p);}).then(function(I){return d(C,m,I,p);}).catch(function(j){return e(j,C,m,p);});}var r={success:true};C.markFinished(r);return r;}).catch(function(i){return{success:false,error:i};});},applyAllChangesForControl:function(G,o,i,C){var m=G();var s=C.getId();var j=m.mChanges[s]||[];j.forEach(function(k){if(!k.isApplyProcessFinished()&&!k._ignoreOnce){k.setQueuedForApply();}});l=l.then(function(C){var p=[];var s=C.getId();var j=m.mChanges[s]||[];var P={modifier:J,appComponent:o,view:a.getViewForControl(C)};var k;if(m.mControlsWithDependencies[s]){D.removeControlsDependencies(m,s);k=true;}j.forEach(function(n){if(n.originalSelectorToBeAdjusted){h(n,C,o);delete n.originalSelectorToBeAdjusted;}m=b(C,n,m,i,P);if(n._ignoreOnce){delete n._ignoreOnce;}else if(n.isApplyProcessFinished()){D.resolveDependenciesForChange(m,n.getId(),s);}else if(!m.mDependencies[n.getId()]){p.push(function(){return A.applyChangeOnControl(n,C,P).then(function(){D.resolveDependenciesForChange(m,n.getId(),s);});});}else{var q=A.applyChangeOnControl.bind(A,n,C,P);D.addChangeApplyCallbackToDependency(m,n.getId(),q);}});if(j.length||k){return a.execPromiseQueueSequentially(p).then(function(){return D.processDependentQueue(m,o,s);});}}.bind(null,C));return l;},applyAllChangesForXMLView:function(p,C){if(!Array.isArray(C)){var s="No list of changes was passed for processing the flexibility on view: "+p.view+".";L.error(s,undefined,"sap.ui.fl.apply._internal.changes.Applier");C=[];}return C.reduce(function(P,o){return P.then(function(){var i=_(o,p);o.setQueuedForApply();b(i,o,undefined,undefined,p);if(!o.isApplyProcessFinished()){return A.applyChangeOnControl(o,i,p);}return{success:true};}).then(function(r){if(!r.success){throw Error(r.error);}}).catch(function(i){g(i,o);});},new a.FakePromise()).then(function(){return p.view;});}};return A;},true);
sap.ui.predefine('sap/ui/fl/apply/_internal/changes/Reverter',["sap/base/Log","sap/ui/fl/apply/_internal/changes/FlexCustomData","sap/ui/fl/apply/_internal/changes/Utils","sap/ui/fl/Utils"],function(L,F,U,a){"use strict";function _(c){if(!c.isApplyProcessFinished()&&c.hasApplyProcessStarted()){return c.addPromiseForApplyProcessing().then(function(r){if(r&&r.error){c.markRevertFinished(r.error);throw Error(r.error);}});}}var R={revertChangeOnControl:function(c,C,p){var m=U.getControlIfTemplateAffected(c,C,p);var o;return U.getChangeHandler(c,m,p).then(function(r){o=r;}).then(_.bind(null,c)).then(function(){if(c.isApplyProcessFinished()){if(!c.hasRevertData()){c.setRevertData(F.getParsedRevertDataFromCustomData(C,c,p.modifier));}c.startReverting();return o.revertChange(c,m.control,p);}throw Error("Change was never applied");}).then(function(){m.control=p.modifier.bySelector(c.getSelector(),p.appComponent,p.view);if(m.bTemplateAffected){p.modifier.updateAggregation(m.control,c.getContent().boundAggregation);}c.markRevertFinished();return m.control;}).catch(function(e){var E="Change could not be reverted: "+e.message;L.error(E);c.markRevertFinished(E);return false;});},revertMultipleChanges:function(c,p){var P=[];c.forEach(function(C){C.setQueuedForRevert();P.push(function(){var s=C.getSelector&&C.getSelector();var o=p.modifier.bySelector(s,p.appComponent);if(!o){L.warning("A flexibility change tries to revert changes on a nonexistent control with id "+s.id);return new a.FakePromise();}var r={modifier:p.modifier,appComponent:p.appComponent,view:a.getViewForControl(o)};return R.revertChangeOnControl(C,o,r).then(function(v){F.destroyAppliedCustomData(v||o,C,p.modifier);return!!v;}).then(function(S){if(S){p.flexController._oChangePersistence._deleteChangeInMap(C);}});});});return a.execPromiseQueueSequentially(P);}};return R;},true);
sap.ui.predefine('sap/ui/fl/apply/_internal/changes/Utils',["sap/ui/fl/apply/_internal/changes/FlexCustomData","sap/ui/fl/Utils","sap/ui/fl/registry/ChangeHandlerRegistration","sap/ui/fl/registry/ChangeRegistry"],function(F,a,C,b){"use strict";var U={getControlIfTemplateAffected:function(c,o,p){var m=p.modifier;var d=c.getDefinition();var e={originalControl:o};var O=d.dependentSelector&&d.dependentSelector.originalSelector;if(c.getContent().boundAggregation&&O){e.control=m.bySelector(O,p.appComponent,p.view);e.controlType=m.getControlType(e.control);e.bTemplateAffected=true;}else{e.control=o;e.controlType=m.getControlType(o);e.bTemplateAffected=false;}return e;},getChangeHandler:function(c,m,p){var l=p.modifier.getLibraryName(m.control);var w=new a.FakePromise();if(C.isChangeHandlerRegistrationInProgress(l)){w=C.waitForChangeHandlerRegistration(l);}return w.then(function(){var s=c.getChangeType();var L=c.getLayer();var o=b.getInstance();o.initSettings();return o.getChangeHandler(s,m.controlType,m.control,p.modifier,L);});},checkIfDependencyIsStillValid:function(A,m,c,s){var o=a.getChangeFromChangesMap(c.mChanges,s);var d=m.bySelector(o.getSelector(),A);if(F.hasChangeApplyFinishedCustomData(d,o,m)||o.hasApplyProcessStarted()){return false;}return true;}};return U;});
sap.ui.predefine('sap/ui/fl/apply/_internal/connectors/ObjectStorageConnector',["sap/ui/fl/apply/_internal/connectors/ObjectStorageUtils","sap/ui/fl/initial/_internal/StorageUtils"],function(O,S){"use strict";function l(p){var f=[];return O.forEachObjectInStorage(p,function(F){f.push(F.changeDefinition);}).then(function(){return f;});}var a={oStorage:undefined,layers:["ALL"],loadFlexData:function(p){return l({storage:this.oStorage,reference:p.reference}).then(function(f){var g=S.getGroupedFlexObjects(f);return S.filterAndSortResponses(g);});}};a.storage=a.oStorage;return a;});
sap.ui.predefine('sap/ui/fl/apply/_internal/connectors/ObjectStorageUtils',[],function(){"use strict";var F="sap.ui.fl";return{forEachObjectInStorage:function(p,P){var r=p.storage.getItems&&p.storage.getItems()||p.storage;return Promise.resolve(r).then(function(r){var a=Object.keys(r).map(function(k){var i=k.includes(F);if(!i){return;}var s=r[k];var f=p.storage._itemsStoredAsObjects?s:JSON.parse(s);var S=true;if(p.reference){S=f.reference===p.reference||f.reference+".Component"===p.reference;}var b=true;if(p.layer){b=f.layer===p.layer;}if(!S||!b){return;}return P({changeDefinition:f,key:k});});return Promise.all(a);});},getAllFlexObjects:function(p){var f=[];return this.forEachObjectInStorage(p,function(m){f.push(m);}).then(function(){return f;});},createFlexKey:function(i){if(i){return F+"."+i;}},createFlexObjectKey:function(f){return this.createFlexKey(f.fileName);}};});
sap.ui.predefine('sap/ui/fl/apply/_internal/controlVariants/URLHandler',["sap/ui/core/Component","sap/ui/fl/Utils","sap/base/Log","sap/base/util/merge","sap/base/util/ObjectPath","sap/base/util/isEmptyObject","sap/ui/base/ManagedObjectObserver","sap/ui/thirdparty/hasher","sap/base/util/includes","sap/ui/fl/apply/_internal/controlVariants/Utils","sap/ui/fl/apply/_internal/flexState/controlVariants/VariantManagementState"],function(C,U,L,m,O,i,M,h,a,V,b){"use strict";var _={};function c(n,o){var A=[];return n.reduce(function(r,v){var l=o.getVariantManagementReference(v).variantManagementReference;if(l){if(a(A,l)){r.updateRequired=true;return r;}A.push(l);}if(l&&o.oData[l].currentVariant!==v){r.updateRequired=true;if(o.oData[l].currentVariant!==o.oData[l].defaultVariant){r.parameters.push(o.oData[l].currentVariant);}}else{r.parameters.push(v);}return r;},{updateRequired:false,parameters:[]});}function d(p,o){var r=O.get(["params",V.VARIANT_TECHNICAL_PARAMETER],p);if(r){var u=c(r,o);if(u.updateRequired){k.update({updateURL:!o._bDesignTimeMode,parameters:u.parameters,updateHashEntry:true,model:o});}}}function e(o,S,n){try{var N=S[1].parseShellHash(n);d(N,o);}catch(E){L.error(E.message);}return S[0].NavigationFilterStatus.Continue;}function f(o){U.ifUShellContainerThen(function(S){if(!_[o.sFlexReference]){_[o.sFlexReference]=e.bind(null,o,S);S[0].registerNavigationFilter(_[o.sFlexReference]);}},["ShellNavigation","URLParsing"]);}function g(o){U.ifUShellContainerThen(function(S){if(_[o.sFlexReference]){S[0].unregisterNavigationFilter(_[o.sFlexReference]);delete _[o.sFlexReference];}},["ShellNavigation"]);}function s(p){var P=U.getParsedURLHash(V.VARIANT_TECHNICAL_PARAMETER);if(P.params){var t=U.getTechnicalParametersForComponent(p.model.oAppComponent);if(!t){L.warning("Component instance not provided, so technical parameters in component data and browser history remain unchanged");}if(p.parameters.length===0){delete P.params[V.VARIANT_TECHNICAL_PARAMETER];t&&delete t[V.VARIANT_TECHNICAL_PARAMETER];}else{P.params[V.VARIANT_TECHNICAL_PARAMETER]=p.parameters;t&&(t[V.VARIANT_TECHNICAL_PARAMETER]=p.parameters);}var u=U.getUshellContainer();if(p.silent){h.changed.active=false;h.replaceHash(u.getService("URLParsing").constructShellHash(P));h.changed.active=true;}else{var o=u.getService("CrossApplicationNavigation");o.toExternal({target:{semanticObject:P.semanticObject,action:P.action,context:P.contextRaw},params:P.params,appSpecificRoute:P.appSpecificRoute,writeHistory:false});}}}function j(p){var r={index:-1};var u=U.getParsedURLHash().params;if(u){r.parameters=[];if(p.model._bDesignTimeMode){u[V.VARIANT_TECHNICAL_PARAMETER]=k.getStoredHashParams(p);}if(Array.isArray(u[V.VARIANT_TECHNICAL_PARAMETER])){u[V.VARIANT_TECHNICAL_PARAMETER]=u[V.VARIANT_TECHNICAL_PARAMETER].map(decodeURIComponent);u[V.VARIANT_TECHNICAL_PARAMETER].some(function(P,I){var v=b.getVariant({vmReference:p.vmReference,vReference:P,reference:p.model.oChangePersistence.getComponentName()});if(v){r.index=I;return true;}});}}return m(r,u&&u[V.VARIANT_TECHNICAL_PARAMETER]&&{parameters:u[V.VARIANT_TECHNICAL_PARAMETER]});}var k={variantTechnicalParameterName:"sap-ui-fl-control-variant-id",initialize:function(p){var P=U.getParsedURLHash();var l=P.params&&P.params[V.VARIANT_TECHNICAL_PARAMETER];k.attachHandlers(p);k.update({model:p.model,parameters:l,updateHashEntry:Array.isArray(l)&&l.length>0});d(P,p.model);},updateVariantInURL:function(p){var u=k.removeURLParameterForVariantManagement(p);if(!u.parameters){return;}var P=u.parameters||[];var I=u.index;var l=p.newVReference===p.model.oData[p.vmReference].defaultVariant;if(!l){if(I===-1){P=P.concat([p.newVReference]);}else{P=P.slice(0,I).concat([p.newVReference],P.slice(I));}}if(!l||I>-1){k.update({parameters:P,updateURL:!p.model._bDesignTimeMode,updateHashEntry:true,model:p.model});}},removeURLParameterForVariantManagement:function(p){var v=j(p);if(v.index>-1){v.parameters.splice(v.index,1);}return v;},attachHandlers:function(p){function o(){return p.model._oVariantSwitchPromise.then(function(){p.model._oHashData.controlPropertyObservers.forEach(function(l){l.destroy();});g(p.model);p.model.resetMap(true).then(p.model.destroy.bind(p.model));p.model.oComponentDestroyObserver.unobserve(p.model.oAppComponent,{destroy:true});p.model.oComponentDestroyObserver.destroy();});}f(p.model);if(!p.model.oComponentDestroyObserver&&p.model.oAppComponent instanceof C){p.model.oComponentDestroyObserver=new M(o.bind(null));p.model.oComponentDestroyObserver.observe(p.model.oAppComponent,{destroy:true});}},registerControl:function(p){if(p.updateURL){p.model._oHashData.variantControlIds.push(p.vmReference);}},update:function(p){if(!p.model._oHashData){p.model._oHashData={hashParams:[],controlPropertyObservers:[],variantControlIds:[]};}if(!p||!Array.isArray(p.parameters)){L.info("Variant URL parameters could not be updated since invalid parameters were received");return;}if(p.updateURL){s(p);}if(p.updateHashEntry&&!i(p.model)){p.model._oHashData.hashParams=p.parameters;}},getStoredHashParams:function(p){return Array.prototype.slice.call(p.model._oHashData.hashParams);},handleModelContextChange:function(p){var l="modelContextChange";function n(E,P){var v=P.model.getVariantManagementReferenceForControl(E.getSource());var q=P.model._oHashData.variantControlIds;var I=q.indexOf(v);if(I>-1){q.slice(I).forEach(function(r){if(j({vmReference:r,model:p.model}).index===-1){P.model.switchToDefaultForVariantManagement(r);}});}}var o=new M(function(E){if(E.current===true&&E.old===false){E.object.attachEvent(l,{model:p.model},n);}else if(E.current===false&&E.old===true){E.object.detachEvent(l,n);}});o.observe(p.vmControl,{properties:["resetOnContextChange"]});p.model._oHashData.controlPropertyObservers.push(o);if(p.vmControl.getResetOnContextChange()!==false){p.vmControl.attachEvent(l,{model:p.model},n);}},clearAllVariantURLParameters:function(p){k.update({updateURL:true,parameters:[],updateHashEntry:false,model:p.model});}};return k;},true);
sap.ui.predefine('sap/ui/fl/apply/_internal/controlVariants/Utils',["sap/base/util/includes","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/fl/Variant"],function(i,J,V){"use strict";function g(A,c){if(!c){return undefined;}if(A.indexOf(c.getId())>-1){return c.getId();}return g(A,c.getParent());}var a={DEFAULT_AUTHOR:"SAP",VARIANT_TECHNICAL_PARAMETER:"sap-ui-fl-control-variant-id",compareVariants:function(v,o){if(v.content.content.title.toLowerCase()<o.content.content.title.toLowerCase()){return-1;}else if(v.content.content.title.toLowerCase()>o.content.content.title.toLowerCase()){return 1;}return 0;},getIndexToSortVariant:function(v,o){var s=v.length;v.some(function(e,b){if(a.compareVariants(o,e)<0){s=b;return true;}});return s;},createVariant:function(p){var v;var o;var s=p.variantSpecificData.content.variantManagementReference;if(s){var b=J.checkControlId(s,p.model.oAppComponent);if(!b){throw new Error("Generated ID attribute found - to offer flexibility a stable VariantManagement ID is needed to assign the changes to, but for this VariantManagement control the ID was generated by SAPUI5 "+s);}}p.variantSpecificData.content.reference=p.model.sFlexReference;p.variantSpecificData.content.packageName="$TMP";o=V.createInitialFileContent(p.variantSpecificData);v=new V(o);return v;},getRelevantVariantManagementControlId:function(c,v){var A={};var b=v.reduce(function(C,d){var o=sap.ui.getCore().byId(d);var f=o.getFor();f.forEach(function(e){A[e]=d;});return C.concat(f);},[]);var s=g(b,c);return A[s];}};return a;});
sap.ui.predefine('sap/ui/fl/apply/_internal/flexState/FlexState',["sap/base/util/each","sap/base/util/merge","sap/base/util/ObjectPath","sap/base/Log","sap/ui/core/Component","sap/ui/fl/apply/_internal/flexState/appDescriptorChanges/prepareAppDescriptorMap","sap/ui/fl/apply/_internal/flexState/changes/prepareChangesMap","sap/ui/fl/apply/_internal/flexState/compVariants/prepareCompVariantsMap","sap/ui/fl/apply/_internal/flexState/controlVariants/prepareVariantsMap","sap/ui/fl/apply/_internal/flexState/Loader","sap/ui/fl/apply/_internal/flexState/ManifestUtils","sap/ui/fl/initial/_internal/StorageUtils","sap/ui/fl/LayerUtils","sap/ui/fl/Utils"],function(e,m,O,L,C,p,a,b,c,d,M,S,f,U){"use strict";var F={};var _={};var g={};var h={};var i={appDescriptorChanges:{prepareFunction:p,pathInResponse:[]},changes:{prepareFunction:a,pathInResponse:["changes"]},variants:{prepareFunction:c,pathInResponse:["variants","variantChanges","variantDependentControlChanges","variantManagementChanges"]},compVariants:{prepareFunction:b,pathInResponse:["comp.variants","comp.standardVariants","comp.defaultVariants","comp.changes"]}};function u(P){var B=C.get(P.componentId);_[P.reference].componentData=B?B.getComponentData():P.componentData;}function j(P){var B=C.get(P.componentId);P.componentData=P.componentData||B.getComponentData()||{};P.manifest=P.manifest||P.rawManifest||B.getManifestObject();P.reference=P.reference||M.getFlexReference(P);}function k(R,B){if(!_[R]){throw new Error("State is not yet initialized");}if(!_[R].preparedMaps[B]){var P={unfilteredStorageResponse:_[R].unfilteredStorageResponse,storageResponse:_[R].storageResponse,componentId:_[R].componentId,componentData:_[R].componentData};_[R].preparedMaps[B]=F.callPrepareFunction(B,P);}return _[R].preparedMaps[B];}function l(R){return k(R,"appDescriptorChanges");}function n(R){return k(R,"changes");}function o(R){return k(R,"variants");}function q(R){return k(R,"compVariants");}function r(P){if(P.reference.endsWith(".Component")){var B=P.reference.split(".");B.pop();var R=B.join(".");_[R]=m({},{storageResponse:{changes:S.getEmptyFlexDataResponse()},unfilteredStorageResponse:{changes:S.getEmptyFlexDataResponse()},preparedMaps:{},componentId:P.componentId,partialFlexState:P.partialFlexState});h[R]=h[P.reference];}}function s(R){var B=m({},R);var D=B.changes;if(f.isLayerFilteringRequired()){e(i,function(I,E){E.pathInResponse.forEach(function(P){O.set(P,f.filterChangeDefinitionsByMaxLayer(O.get(P,D)),D);});});}return B;}function t(P){h[P.reference]=d.loadFlexData(P).then(function(R){_[P.reference]=m({},{unfilteredStorageResponse:R,preparedMaps:{},componentId:P.componentId,componentData:P.componentData,partialFlexState:P.partialFlexState});r(P);v(P.reference);return R;});return h[P.reference];}function v(R){U.ifUShellContainerThen(function(B){g[R]=x.bind(null,R);B[0].registerNavigationFilter(g[R]);},["ShellNavigation"]);}function w(R){U.ifUShellContainerThen(function(B){if(g[R]){B[0].unregisterNavigationFilter(g[R]);delete g[R];}},["ShellNavigation"]);}function x(R,N,B){return U.ifUShellContainerThen(function(D){try{var E=f.getMaxLayerTechnicalParameter(N);var P=f.getMaxLayerTechnicalParameter(B);if(E!==P){F.clearFilteredResponse(R);}}catch(G){L.error(G.message);}return D[0].NavigationFilterStatus.Continue;},["ShellNavigation"]);}function y(R){_[R].preparedMaps={};}function z(I){var B=_[I.reference];if(B.partialFlexState===true&&I.partialFlexState!==true){B.partialFlexState=false;I.partialFlexData=m({},B.unfilteredStorageResponse.changes);I.reInitialize=true;}return I;}function A(I){var B=_[I.reference].componentId;if(!I.reInitialize&&B!==I.componentId){I.reInitialize=true;}return I;}F.initialize=function(P){return Promise.resolve(P).then(function(I){j(I);var B=I.reference;if(h[B]){return h[B].then(z.bind(null,I)).then(A).then(function(E){return E.reInitialize?t(E):_[B].unfilteredStorageResponse;});}return t(I);}).then(function(P,R){if(!_[P.reference].storageResponse){_[P.reference].storageResponse=s(R);u(P);F.getVariantsState(P.reference);}}.bind(null,P));};F.clearAndInitialize=function(P){j(P);var V=!!O.get(["preparedMaps","variantsMap"],_[P.reference]);F.clearState(P.reference);F.clearState(U.normalizeReference(P.reference));return F.initialize(P).then(function(V,R){if(V){return F.getVariantsState(R);}}.bind(null,V,P.reference));};F.clearState=function(R){if(R){w(R);delete _[R];delete h[R];}else{Object.keys(_).forEach(function(R){w(R);});_={};h={};}};F.clearFilteredResponse=function(R){if(_[R]){y(R);delete _[R].storageResponse;}};F.getUIChanges=function(R){return n(R).changes;};F.getAppDescriptorChanges=function(R){return l(R).appDescriptorChanges;};F.getVariantsState=function(R){return o(R);};F.getUI2Personalization=function(R){return _[R].unfilteredStorageResponse.changes.ui2personalization;};F.getCompVariantsMap=function(R){return q(R).map;};F.getCompEntitiesByIdMap=function(R){return q(R).byId;};F.callPrepareFunction=function(B,P){return i[B].prepareFunction(P);};F.getStorageResponse=function(R){if(h[R]){return h[R].then(function(){return _[R].unfilteredStorageResponse;});}};F.getFlexObjectsFromStorageResponse=function(R){return _[R]&&_[R].unfilteredStorageResponse.changes;};return F;},true);
sap.ui.predefine('sap/ui/fl/apply/_internal/flexState/Loader',["sap/ui/fl/apply/_internal/flexState/ManifestUtils","sap/ui/fl/initial/_internal/Storage","sap/ui/fl/Utils"],function(M,A,U){"use strict";function _(f){return{changes:f,cacheKey:f.cacheKey};}return{loadFlexData:function(p){var c=M.getBaseComponentNameFromManifest(p.manifest);if(p.partialFlexData){return A.completeFlexData({reference:p.reference,componentName:c,partialFlexData:p.partialFlexData}).then(_);}var C=p.reInitialize?undefined:M.getCacheKeyFromAsyncHints(p.reference,p.asyncHints);return A.loadFlexData({reference:p.reference,componentName:c,cacheKey:C,siteId:U.getSiteIdByComponentData(p.componentData),appDescriptor:p.manifest.getRawJson?p.manifest.getRawJson():p.manifest,version:p.version}).then(_);}};});
sap.ui.predefine('sap/ui/fl/apply/_internal/flexState/appDescriptorChanges/prepareAppDescriptorMap',["sap/ui/fl/Change"],function(C){"use strict";return function(p){var c=p.storageResponse.changes.appDescriptorChanges||[];var a=c.map(function(o){return new C(o);});return{appDescriptorChanges:a};};});
sap.ui.predefine('sap/ui/fl/apply/_internal/flexState/changes/DependencyHandler',["sap/base/util/includes","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/fl/Utils"],function(i,J,U){"use strict";var P="sap.ui.fl:PendingChange";var D={};function g(s,A){return J.getControlIdBySelector(s,A);}function c(C){return{changeObject:C,dependencies:[],controlsDependencies:[],dependentIds:[]};}function a(s,C,o){d(o,C,s);b(o,C);}function b(C,o){if(!i(C.aChanges,o)){C.aChanges.push(o);}}function d(C,o,s){if(!C.mChanges[s]){C.mChanges[s]=[];}if(!i(C.mChanges[s],o)){C.mChanges[s].push(o);}}function e(C,A,o){var s=C.getSelector();if(s){if(s.id){a(g(s,A),C,o);}else{b(o,C);}}return o.aChanges;}function f(E,o){return E.some(function(p){return(p.id===o.id&&p.idIsLocal===o.idIsLocal);});}function h(t,o,E,C,A,p,q){var r=E.getDependentSelectorList();o.some(function(s){if(f(r,s)){var u=g(s,A);var I=C&&p.indexOf(t)<p.indexOf(E);if(I){l(E,t,u,q,true);}else{l(t,E,u,q);}return true;}});}function j(t,A,C,o){if(t.isValidForDependencyMap()){var p=t.getDependentSelectorList();k(t,p,A,o);var I=C.indexOf(t);var q=I<(C.length-1);var O=C.slice();O.splice(I,1);O.reverse().forEach(function(E){if(E.isValidForDependencyMap()){h(t,p,E,q,A,C,o);}});}}function k(o,p,A,C){if(p.length){var q=p.map(function(s){return g(s,A);});if(!C.mDependencies[o.getId()]){C.mDependencies[o.getId()]=c(o);}C.mDependencies[o.getId()].controlsDependencies=q;q.forEach(function(I){C.mControlsWithDependencies[I]=C.mControlsWithDependencies[I]||[];C.mControlsWithDependencies[I].push(o.getId());});}}function l(o,C,s,p,I){if(m(o,C,s,p,I)){p.mDependencies[o.getId()].dependencies.push(C.getId());if(!i(p.mDependencies[o.getId()].dependentIds,s)){p.mDependencies[o.getId()].dependentIds.push(s);}if(!p.mDependentChangesOnMe[C.getId()]){p.mDependentChangesOnMe[C.getId()]=[];}p.mDependentChangesOnMe[C.getId()].push(o.getId());}}function m(o,C,s,p,I){var S=!I&&i(p.mDependencies[o.getId()].dependentIds,s);var q=false;if(p.mDependentChangesOnMe[C.getId()]){p.mDependentChangesOnMe[C.getId()].some(function(r){q=i(p.mDependencies[o.getId()].dependencies,r);return q;});}return!S&&!q;}function n(C,s){var o=[];var p=[];var q=[];if(C.dependencyRemovedInLastBatch[s]){C.dependencyRemovedInLastBatch[s].forEach(function(r){var t=C.mDependencies[r];if(t&&t.dependencies.length===0&&!(t.controlsDependencies&&t.controlsDependencies.length)){p.push(r);o.push(t.changeObject.getId());if(t[P]){q.push(function(){return t[P]();});}}});}return U.execPromiseQueueSequentially(q).then(function(o,p,s){delete C.dependencyRemovedInLastBatch[s];p.forEach(function(r){delete C.mDependencies[r];});o.forEach(function(r){D.resolveDependenciesForChange(C,r,s);});return!!o.length;}.bind(undefined,o,p,s));}D.createEmptyDependencyMap=function(){return{aChanges:[],mChanges:{},mDependencies:{},mDependentChangesOnMe:{},mControlsWithDependencies:{},dependencyRemovedInLastBatch:{}};};D.addChangeAndUpdateDependencies=function(C,A,o){var p=e(C,A,o);j(C,A,p,o);};D.insertChange=function(C,o,r){var I=o&&o.aChanges&&o.aChanges.indexOf(r);if(I>-1){o.aChanges.splice(I+1,0,C);}};D.addRuntimeChangeAndUpdateDependencies=function(C,A,o,I){var p=e(C,A,o);j(C,A,p,I);};D.processDependentQueue=function(C,A,s){return n(C,s).then(function(s,o){if(o){return D.processDependentQueue(C,A,s);}}.bind(undefined,s));};D.addChangeApplyCallbackToDependency=function(C,s,o){C.mDependencies[s][P]=o;};D.removeControlsDependencies=function(C,s){var o=C.mControlsWithDependencies[s];if(o){o.forEach(function(p){var q=C.mDependencies[p];if(q&&q.controlsDependencies&&q.controlsDependencies.length){var I=q.controlsDependencies.indexOf(s);if(I>-1){q.controlsDependencies.splice(I,1);delete C.mControlsWithDependencies[s];C.dependencyRemovedInLastBatch[s]=C.dependencyRemovedInLastBatch[s]||[];if(!i(C.dependencyRemovedInLastBatch[s],p)){C.dependencyRemovedInLastBatch[s].push(p);}}}});delete C.mControlsWithDependencies[s];}};D.resolveDependenciesForChange=function(C,s,o){var p=C.mDependentChangesOnMe[s];if(p){p.forEach(function(K){var q=C.mDependencies[K];var I=q?q.dependencies.indexOf(s):-1;if(I>-1){q.dependencies.splice(I,1);C.dependencyRemovedInLastBatch[o]=C.dependencyRemovedInLastBatch[o]||[];if(!i(C.dependencyRemovedInLastBatch[o],K)){C.dependencyRemovedInLastBatch[o].push(K);}}});delete C.mDependentChangesOnMe[s];}};D.removeChangeFromMap=function(C,s){Object.keys(C.mChanges).some(function(o){var p=C.mChanges[o];var q=p.map(function(E){return E.getId();}).indexOf(s);if(q!==-1){p.splice(q,1);return true;}});var I=C.aChanges.map(function(E){return E.getId();}).indexOf(s);if(I!==-1){C.aChanges.splice(I,1);}};D.removeChangeFromDependencies=function(C,s,o){D.resolveDependenciesForChange(C,s,o);delete C.mDependencies[s];};D.checkForOpenDependenciesForControl=function(C,s,A){return Object.keys(C.mDependencies).some(function(K){return C.mDependencies[K].changeObject.getDependentSelectorList().some(function(o){return J.getControlIdBySelector(o,A)===s;});});};return D;});
sap.ui.predefine('sap/ui/fl/apply/_internal/flexState/changes/prepareChangesMap',["sap/ui/fl/Change"],function(C){"use strict";return function(p){var c=p.storageResponse.changes.changes;var a=c.map(function(o){return new C(o);});return{changes:a};};});
sap.ui.predefine('sap/ui/fl/apply/_internal/flexState/compVariants/prepareCompVariantsMap',["sap/ui/fl/Change","sap/ui/fl/apply/_internal/flexObjects/CompVariant"],function(C,a){"use strict";function g(m,k){m[k]=m[k]||{variants:[],changes:[],defaultVariant:undefined,standardVariant:undefined};return m[k];}function b(c,s,B,m){var o=s==="variants"?a:C;var f=c[s].map(function(d){var F=new o(d);F.setState(C.states.PERSISTED);return F;});f.forEach(function(F){B[F.getId()]=F;var p=F.getSelector().persistencyKey;switch(s){case"defaultVariants":g(m,p)["defaultVariant"]=F;break;case"standardVariants":g(m,p)["standardVariant"]=F;break;default:g(m,p)[s].push(F);}});}return function(p){var B={};var c={};c._getOrCreate=g.bind(undefined,c);if(p.storageResponse.changes.comp){["variants","changes","defaultVariants","standardVariants"].forEach(function(s){b(p.storageResponse.changes.comp,s,B,c);});}return{map:c,byId:B};};});
sap.ui.predefine('sap/ui/fl/apply/_internal/flexState/controlVariants/Switcher',["sap/base/util/includes","sap/base/util/restricted/_pick","sap/ui/fl/apply/_internal/flexState/controlVariants/VariantManagementState","sap/ui/fl/apply/_internal/changes/Reverter"],function(i,_,V,R){"use strict";function a(p){var c=V.getControlChangesForVariant(Object.assign(_(p,["vmReference","variantsMap","reference"]),{changeInstance:true,vReference:p.currentVReference}));var n=V.getControlChangesForVariant(Object.assign(_(p,["vmReference","variantsMap","reference"]),{changeInstance:true,vReference:p.newVReference}));var m=Object.keys(p.changesMap).reduce(function(b,d){return b.concat(p.changesMap[d]);},[]);var C=m.map(function(o){return o.getId();});var f=c.reduce(function(F,o){var M=C.indexOf(o.getId());if(M>-1){F=F.concat(m[M]);}return F;},[]);var r=[];if(n.length>0){r=f.slice();f.some(function(o){if(n[0]&&o.getId()===n[0].getId()){n.shift();r.shift();}else{return true;}});}else{r=f;}var s={changesToBeReverted:r.reverse(),changesToBeApplied:n};return s;}var S={switchVariant:function(p){return Promise.resolve().then(function(){p.changesMap=p.flexController._oChangePersistence.getChangesMapForComponent().mChanges;p.variantsMap=V.getContent(p.reference);var c=a(p);return R.revertMultipleChanges(c.changesToBeReverted,p).then(p.flexController.applyVariantChanges.bind(p.flexController,c.changesToBeApplied,p.appComponent)).then(V.setCurrentVariant.bind(null,p));});}};return S;},true);
sap.ui.predefine('sap/ui/fl/apply/_internal/flexState/controlVariants/VariantManagementState',["sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/fl/Variant","sap/ui/fl/Change","sap/ui/fl/Utils","sap/base/util/ObjectPath","sap/base/util/includes","sap/base/util/restricted/_omit","sap/base/Log","sap/ui/fl/LayerUtils","sap/ui/fl/apply/_internal/flexState/FlexState","sap/base/util/restricted/_pick","sap/ui/fl/apply/_internal/controlVariants/Utils","sap/base/util/isEmptyObject"],function(J,V,C,U,O,i,_,L,a,F,b,c,d){"use strict";var e={};function f(p){var r=[];if(p.variantData.content.variantReference){r=e.getControlChangesForVariant(Object.assign(p,{vReference:p.variantData.content.variantReference,changeInstance:true}));return r.filter(function(R){return a.compareAgainstCurrentLayer(R.getDefinition().layer,p.variantData.content.layer)===-1;});}return r;}function g(p){var v=e.getContent(p.reference);var m=O.get([p.vmReference,"variants"],v);return m||[];}function h(v,o,A){var s=o.changeType;if(!v){v={};}if(!v[s]){v[s]=[];}if(A){v[s].push(o);return true;}return v[s].some(function(E,I){if(E.fileName===o.fileName){v[s].splice(I,1);return true;}});}function j(o,m){var s=l(o);m[s].push(o);}function k(o,m){var s=l(o);var n=-1;m[s].some(function(E,I){if(E.fileName===o.fileName){n=I;return true;}});if(n>-1){m[s].splice(n,1);}}function l(o){switch(o.fileType){case"change":return"variantDependentControlChanges";case"ctrl_variant":return"variants";case"ctrl_variant_change":return"variantChanges";case"ctrl_variant_management_change":return"variantManagementChanges";default:}}e.getContent=function(r){return F.getVariantsState(r);};e.resetContent=function(r){F.clearFilteredResponse(r);};e.getControlChangesForVariant=function(p){var r=[];var v=e.getVariant(p);if(v){r=v.controlChanges;if(p.changeInstance){r=r.map(function(o,m){var n;if(!o.getDefinition){n=new C(o);v.controlChanges.splice(m,1,n);}else{n=o;}return n;});}}return r;};e.getVariantChangesForVariant=function(p){var v=e.getVariant(p);return v&&v.variantChanges||{};};e.getVariant=function(p){var v;var o=e.getContent(p.reference);p.vReference=p.vReference||o[p.vmReference].defaultVariant;var m=g(p);m.some(function(n){if(n.content.fileName===p.vReference){v=n;return true;}});return v;};e.getCurrentVariantReference=function(p){var v=e.getContent(p.reference);var o=v[p.vmReference];return o.currentVariant||o.defaultVariant;};e.getVariantManagementReferences=function(r){var v=e.getContent(r);return Object.keys(v);};e.addVariantToVariantManagement=function(p){var v=e.getContent(p.reference);var m=v[p.vmReference].variants.slice().splice(1);var I=c.getIndexToSortVariant(m,p.variantData);if(p.variantData.content.variantReference){var r=f(p);p.variantData.controlChanges=r.concat(p.variantData.controlChanges);}v[p.vmReference].variants.splice(I+1,0,p.variantData);return I+1;};e.removeVariantFromVariantManagement=function(p){var I;var v=e.getContent(p.reference);var m=v[p.vmReference].variants.some(function(o,n){var q=new V(o);if(q.getId()===p.variant.getId()){I=n;return true;}});if(m){v[p.vmReference].variants.splice(I,1);}return I;};e.setVariantData=function(p){var v=e.getContent(p.reference);var m=v[p.vmReference].variants;var o=m[p.previousIndex];Object.keys(p.variantData).forEach(function(P){if(o.content.content[P]){o.content.content[P]=p.variantData[P];}});if(o.content.fileName!==p.vmReference){m.splice(p.previousIndex,1);var s=c.getIndexToSortVariant(m.slice(1),o);m.splice(s+1,0,o);return s+1;}m.splice(p.previousIndex,1,o);return p.previousIndex;};e.addChangeToVariant=function(p){var E=e.getControlChangesForVariant(Object.assign(p,{changeInstance:true}));var m=E.map(function(o){return o.getDefinition().fileName;});if(!i(m,p.change.getDefinition().fileName)){var v=e.getVariant(p);v.controlChanges=E.concat([p.change]);return true;}return false;};e.removeChangeFromVariant=function(p){var m=e.getControlChangesForVariant(Object.assign(p,{changeInstance:true}));var v=e.getVariant(p);var n=false;if(v){v.controlChanges=m.filter(function(o){if(!n&&o.getId()===p.change.getId()){n=true;return false;}return true;});}return n;};e.getInitialChanges=function(p){var v=e.getContent(p.reference);return Object.keys(v).reduce(function(I,s){if((p.vmReference&&p.vmReference===s)||!p.vmReference){var m=v[s].currentVariant?"currentVariant":"defaultVariant";var A={vmReference:s,vReference:v[s][m],reference:p.reference,changeInstance:p.changeInstance};return I.concat(e.getControlChangesForVariant(Object.assign({},p,A)));}return I;},[]);};e.fillVariantModel=function(p){var v=e.getContent(p.reference);return Object.keys(v).reduce(function(o,s){o[s]={defaultVariant:v[s].defaultVariant,variants:[]};if(v[s].currentVariant){o[s].currentVariant=v[s].currentVariant;}g(Object.assign(p,{vmReference:s})).forEach(function(m,n){o[s].variants[n]=JSON.parse(JSON.stringify({key:m.content.fileName,title:m.content.content.title,layer:m.content.layer,favorite:m.content.content.favorite,executeOnSelect:m.content.content.executeOnSelect,visible:m.content.content.visible,author:O.get("content.support.user",m)}));});return o;},{});};e.updateChangesForVariantManagementInMap=function(p){var v=e.getContent(p.reference);var o=v[p.vmReference];if(p.changeContent.fileType==="ctrl_variant_change"){o.variants.some(function(m){if(m.content.fileName===p.changeContent.selector.id){h(m.variantChanges,p.changeContent,p.add);}});}else if(p.changeContent.fileType==="ctrl_variant_management_change"){h(o.variantManagementChanges,p.changeContent,p.add);}};e.setCurrentVariant=function(p){var v=e.getContent(p.reference);if(O.get([p.vmReference],v)){v[p.vmReference].currentVariant=p.newVReference;}};e.updateVariantsState=function(p){var v=e.getContent(p.reference);if(d(v)){L.error("Variant state is not initialized yet");return;}var o=F.getFlexObjectsFromStorageResponse(p.reference);if(p.changeToBeAddedOrDeleted){switch(p.changeToBeAddedOrDeleted.getPendingAction()){case"NEW":j(p.changeToBeAddedOrDeleted.getDefinition(),o);break;case"DELETE":k(p.changeToBeAddedOrDeleted.getDefinition(),o);break;default:}}};e.waitForInitialVariantChanges=function(p){var m=e.getInitialChanges({vmReference:p.vmReference,reference:p.reference,changeInstance:true});var s=m.reduce(function(o,q){if(U.indexOfObject(o,q.getSelector())===-1){o.push(q.getSelector());}return o;},[]);var n=[];s.map(function(S){var o=J.bySelector(S,p.appComponent);if(o){n.push(o);}});return p.flexController.waitForChangesToBeApplied(n);};return e;},true);
sap.ui.predefine('sap/ui/fl/apply/_internal/flexState/controlVariants/prepareVariantsMap',["sap/base/util/ObjectPath","sap/base/Log","sap/ui/fl/Change","sap/base/util/includes","sap/ui/fl/apply/_internal/controlVariants/Utils","sap/base/util/isEmptyObject","sap/base/util/each","sap/base/util/values","sap/base/util/merge","sap/ui/fl/LayerUtils"],function(O,L,C,i,V,a,e,v,m,b){"use strict";function c(z,A){var B=m({},z);A.forEach(function(D){B[D.fileName]={content:D,controlChanges:[],variantChanges:{}};});return B;}function d(z,A){var B=m({},z);A.forEach(function(D){B[D.variantReference]=B[D.variantReference]||s(D.variantReference);B[D.variantReference].controlChanges.push(D);});return B;}function f(z,A){var B=m({},z);A.forEach(function(D){B[D.selector.id]=B[D.selector.id]||s(D.selector.id);var E=B[D.selector.id].variantChanges[D.changeType]||[];E.push(D);B[D.selector.id].variantChanges[D.changeType]=E;});return B;}function g(z){var A=m({},z);v(z).forEach(function(B){var S=O.get("variantChanges.setVisible",B);if(S&&S.length>0){var D=w(S);if(!D.getContent().visible&&D.getContent().createdByReset){delete A[B.content.fileName];}}});return A;}function r(z){var A=m({},z);v(A).forEach(function(B){var D=B.content.variantReference;var R;if(D){R=j(A,D,B.content.variantManagementReference);}B.controlChanges=h(R,B.content.layer).concat(B.controlChanges);});return A;}function h(R,z){if(!R){return[];}return v(m({},R.controlChanges)).filter(function(A){return b.compareAgainstCurrentLayer(A.layer,z)===-1;});}function j(z,A,B){var R=z[A];if(!R&&A===B){R=s(A);z[A]=R;}return R;}function k(S){var z={};z=c(z,S.variants);z=d(z,S.variantDependentControlChanges);z=f(z,S.variantChanges);z=g(z);z=r(z);return z;}function l(){return{variantManagementChanges:{},variants:[]};}function n(R,z,T){var A=m({},R);v(z).forEach(function(B){var D=B.content.variantManagementReference;if(!A[D]){A[D]=l();}B=y(B);B=u(B);if(!A[D].currentVariant&&B.content.content.visible&&i(T,B.content.fileName)){A[D].currentVariant=B.content.fileName;}A[D].defaultVariant=D;var S=V.getIndexToSortVariant(A[D].variants,B);A[D].variants.splice(S,0,B);});return A;}function o(R,z){var A=m({},R);z.forEach(function(B){var D=B.selector.id;if(!A[D]){A[D]=l();}var E=B.changeType;if(!A[D].variantManagementChanges[E]){A[D].variantManagementChanges[E]=[];}A[D].variantManagementChanges[E].push(B);A[D]=t(A[D]);});return A;}function p(R){var z=m({},R);e(z,function(A,B){var S=B.variants.findIndex(function(E){return E.content.fileName===A;});var D;if(S===-1){D=s(A);}else{D=B.variants[S];B.variants.splice(S,1);}B.variants.unshift(D);});return z;}function q(z,A,T){var R={};R=n(R,z,T);R=o(R,A);R=p(R);return R;}function s(z){var R=sap.ui.getCore().getLibraryResourceBundle("sap.ui.fl");return{content:{fileName:z,variantManagementReference:z,variantReference:"",content:{title:R.getText("STANDARD_VARIANT_TITLE"),favorite:true,visible:true},support:{user:V.DEFAULT_AUTHOR}},variantChanges:{},controlChanges:[]};}function t(z){var A=m({},z);var B=A.variantManagementChanges;var D;if(!a(B)){D=w(B["setDefault"]);if(D){A.defaultVariant=D.getContent().defaultVariant;}}return A;}function u(z){var A=m({},z);var B=A.variantChanges;var D;e(B,function(E,F){switch(E){case"setTitle":D=w(F);if(D){A.content.content.title=D.getText("title");}break;case"setFavorite":D=w(F);if(D){A.content.content.favorite=D.getContent().favorite;}break;case"setExecuteOnSelect":D=w(F);if(D){A.content.content.executeOnSelect=D.getContent().executeOnSelect;}break;case"setVisible":D=w(F);if(D){A.content.content.visible=D.getContent().visible;}break;default:L.error("No valid changes on variant "+A.content.content.title+" available");}});return A;}function w(z){if(z.length>0){return new C(z[z.length-1]);}return false;}function x(T){return sap.ui.getCore().getLibraryResourceBundle("sap.ui.fl").getText(T);}function y(z){var A=m({},z);if(A.content.fileName===A.content.variantManagementReference){if(!O.get("content.support.user",A)){var S={support:{user:V.DEFAULT_AUTHOR}};m(A.content,S);}}if(!A.content.content.favorite){A.content.content.favorite=true;}if(!A.content.content.visible){A.content.content.visible=true;}if(!A.content.content.executeOnSelect){A.content.content.executeOnSelect=false;}var T=A.content.content.title.match(/.i18n>(\w+)./);if(T){A.content.content.title=x(T[1]);}return A;}return function(P){if(a(P)||!O.get("storageResponse.changes.variants",P)){return{};}var T=O.get(["technicalParameters",V.VARIANT_TECHNICAL_PARAMETER],P.componentData)||[];var z=k(P.storageResponse.changes);z=q(z,P.storageResponse.changes.variantManagementChanges,T);return z;};});
sap.ui.predefine('sap/ui/fl/apply/api/DelegateMediatorAPI',["sap/ui/fl/apply/_internal/DelegateMediator"],function(D){"use strict";var a={registerDefaultDelegate:function(p){D.registerDefaultDelegate(p);},getDelegateForControl:function(p){return D.getDelegateForControl(p.control,p.modifier,p.modelType,p.supportsDefault);},getKnownDefaultDelegateLibraries:function(){return D.getKnownDefaultDelegateLibraries();},getRequiredLibrariesForDefaultDelegate:function(p){return D.getRequiredLibrariesForDefaultDelegate(p.delegateName,p.control,p.modelType);}};return a;},false);
sap.ui.predefine('sap/ui/fl/initial/_internal/Storage',["sap/ui/fl/initial/_internal/StorageUtils","sap/ui/fl/Utils","sap/ui/fl/initial/_internal/StorageResultMerger","sap/ui/fl/initial/_internal/storageResultDisassemble"],function(S,F,a,s){"use strict";function _(C,o,p){if(!o.layers||(o.layers[0]!=="ALL"&&o.layers.indexOf("CUSTOMER")===-1)){delete C.version;return C;}if(p.version!==undefined){C.version=p.version;return C;}var v=F.getUrlParameter(sap.ui.fl.Versions.UrlParameter);if(v===null){delete C.version;}else{C.version=parseInt(v);}return C;}function b(p,C){var h=C.map(function(o){var i=Object.assign({},p,{url:o.url,path:o.path});i=_(i,o,p);return o.loadConnectorModule.loadFlexData(i).then(function(r){return r||S.getEmptyFlexDataResponse();}).catch(S.logAndResolveDefault.bind(undefined,S.getEmptyFlexDataResponse(),o,"loadFlexData"));});return Promise.all(h);}function c(r){var h=[];r.forEach(function(R){if(Array.isArray(R)){h=h.concat(R);}else{h.push(R);}});return h;}function d(r){return r.map(function(R){return s(R);});}function e(r){return Promise.resolve(r).then(c).then(d).then(c).then(a.merge);}function f(p){return S.getStaticFileConnector().then(b.bind(this,p));}var g={};g.completeFlexData=function(p){if(!p||!p.reference){return Promise.reject("No reference was provided");}return Promise.all([f(p),p.partialFlexData]).then(e);};g.loadFlexData=function(p){if(!p||!p.reference){return Promise.reject("No reference was provided");}return S.getLoadConnectors().then(b.bind(this,p)).then(e);};return g;},true);
sap.ui.predefine('sap/ui/fl/initial/_internal/StorageResultMerger',["sap/base/util/merge","sap/base/util/ObjectPath"],function(m,O){"use strict";var s={};function c(r,p){var f=r.reduce(function(f,R){if(O.get(p,R)){return f.concat(O.get(p,R));}return f;},[]);var F=[];return f.filter(function(o){var b=o.fileName;var d=F.indexOf(b)!==-1;if(d){return false;}F.push(b);return true;});}function a(r){return r.reduce(function(u,R){return m({},u,R.ui2personalization);},{});}function _(r){return r.reduce(function(C,R){return R.cacheKey?C+=R.cacheKey:C;},"")||null;}s.merge=function(r){return{appDescriptorChanges:c(r,"appDescriptorChanges"),changes:c(r,"changes"),ui2personalization:a(r),comp:{variants:c(r,"comp.variants"),changes:c(r,"comp.changes"),defaultVariants:c(r,"comp.defaultVariants"),standardVariants:c(r,"comp.standardVariants")},variants:c(r,"variants"),variantChanges:c(r,"variantChanges"),variantDependentControlChanges:c(r,"variantDependentControlChanges"),variantManagementChanges:c(r,"variantManagementChanges"),cacheKey:_(r)};};return s;});
sap.ui.predefine('sap/ui/fl/initial/_internal/StorageUtils',["sap/base/security/encodeURLParameters","sap/base/Log","sap/ui/fl/Layer","sap/ui/fl/LayerUtils","sap/base/util/isEmptyObject"],function(e,L,c,d,i){"use strict";var C={load:{LrepConnector:"sap/ui/fl/initial/_internal/connectors/LrepConnector",NeoLrepConnector:"sap/ui/fl/initial/_internal/connectors/NeoLrepConnector",PersonalizationConnector:"sap/ui/fl/initial/_internal/connectors/PersonalizationConnector",KeyUserConnector:"sap/ui/fl/initial/_internal/connectors/KeyUserConnector",StaticFileConnector:"sap/ui/fl/initial/_internal/connectors/StaticFileConnector",ObjectStorageConnector:"sap/ui/fl/apply/_internal/connectors/ObjectStorageConnector",JsObjectConnector:"sap/ui/fl/write/_internal/connectors/JsObjectConnector",ObjectPathConnector:"sap/ui/fl/write/_internal/connectors/ObjectPathConnector",LocalStorageConnector:"sap/ui/fl/write/_internal/connectors/LocalStorageConnector",SessionStorageConnector:"sap/ui/fl/write/_internal/connectors/SessionStorageConnector"},write:{LrepConnector:"sap/ui/fl/write/_internal/connectors/LrepConnector",NeoLrepConnector:"sap/ui/fl/write/_internal/connectors/NeoLrepConnector",PersonalizationConnector:"sap/ui/fl/write/_internal/connectors/PersonalizationConnector",KeyUserConnector:"sap/ui/fl/write/_internal/connectors/KeyUserConnector",StaticFileConnector:"sap/ui/fl/write/_internal/connectors/StaticFileConnector",JsObjectConnector:"sap/ui/fl/write/_internal/connectors/JsObjectConnector",ObjectPathConnector:"sap/ui/fl/write/_internal/connectors/ObjectPathConnector",LocalStorageConnector:"sap/ui/fl/write/_internal/connectors/LocalStorageConnector",SessionStorageConnector:"sap/ui/fl/write/_internal/connectors/SessionStorageConnector"}};var I="sap/ui/fl/initial/_internal/connectors/";var S={connector:"StaticFileConnector"};function _(l,v){return l.filter(function(a){return v.indexOf(a)!==-1||v[0]==="ALL";});}function s(r){function b(o,a){return new Date(o.creation)-new Date(a.creation);}["changes","variantChanges","variants","variantDependentControlChanges","variantManagementChanges"].forEach(function(a){r[a]=r[a].sort(b);});return r;}function f(n,l,m){return m.map(function(a){var b=a.connector;var h;if(!a.loadConnector&&!a.applyConnector&&!a.loadConnector){h=l?C.load[b]:C.write[b];}else if(l){h=a.loadConnector||a.applyConnector;}else{h=a.writeConnector||"sap/ui/fl/write/connectors/BaseConnector";}return h;});}function g(n,l,m){var a=f(n,l,m);return new Promise(function(r){sap.ui.require(a,function(){Array.from(arguments).forEach(function(o,b){if(!m[b].layers){m[b].layers=o.layers;}else{m[b].layers=_(m[b].layers,o.layers);}if(l){m[b].loadConnectorModule=o;}else{m[b].writeConnectorModule=o;}});r(m);});});}return{getConnectors:function(n,l){var a=sap.ui.getCore().getConfiguration().getFlexibilityServices();var m=[];if(l){m=[S];}m=m.concat(a);return g(n,l,m);},getLoadConnectors:function(){return this.getConnectors(I,true);},getStaticFileConnector:function(){return g(I,true,[S]);},logAndResolveDefault:function(r,o,F,E){L.error("Connector ("+o.connector+") failed call '"+F+"': "+E+"\nApplication startup continues without data from this storage.");return r;},filterAndSortResponses:function(G){var r=[];Object.keys(G).forEach(function(l){r.push(G[l]);});r=r.filter(function(R){return R.changes.length>0||R.variants.length>0||R.variantChanges.length>0||R.variantManagementChanges.length>0||R.variantDependentControlChanges.length>0||R.comp.variants.length>0||R.comp.changes.length>0||R.comp.defaultVariants.length>0||R.comp.standardVariants.length>0;});r.sort(function(a,b){return a.index-b.index;});return r;},getGroupedFlexObjects:function(F){var G={};Object.keys(c).forEach(function(l){G[l]=this.getEmptyFlexDataResponse();G[l].index=d.getLayerIndex(l);}.bind(this));F.forEach(function(o){var l=o.layer;if(o.fileType==="ctrl_variant"&&o.variantManagementReference){G[l].variants.push(o);}else if(o.fileType==="ctrl_variant_change"){G[l].variantChanges.push(o);}else if(o.fileType==="ctrl_variant_management_change"){G[l].variantManagementChanges.push(o);}else if(o.fileType==="variant"){G[l].comp.variants.push(o);}else if(o.fileType==="change"){if(o.variantReference){G[l].variantDependentControlChanges.push(o);}else{switch(o.changeType){case"addFavorite":case"removeFavorite":G[l].comp.changes.push(o);break;case"defaultVariant":G[l].comp.defaultVariants.push(o);break;case"standardVariant":G[l].comp.standardVariants.push(o);break;default:G[l].changes.push(o);}}}});Object.keys(G).forEach(function(l){s(G[l]);});return G;},getEmptyFlexDataResponse:function(){return Object.assign({},{appDescriptorChanges:[],changes:[],comp:{variants:[],changes:[],defaultVariants:[],standardVariants:[]},variants:[],variantChanges:[],variantDependentControlChanges:[],variantManagementChanges:[],ui2personalization:{}});},isStorageResponseFilled:function(r){return Object.keys(r||{}).some(function(k){if(Array.isArray(r[k])){return r[k].length!==0;}return!i(r[k]);});},addLanguageInfo:function(p){if(!p){p={};}p["sap-language"]=sap.ui.getCore().getConfiguration().getLanguage();}};});
sap.ui.predefine('sap/ui/fl/initial/_internal/connectors/BackendConnector',["sap/ui/fl/initial/_internal/connectors/Utils","sap/base/util/restricted/_pick"],function(I,_){"use strict";return{xsrfToken:undefined,settings:undefined,loadFlexData:function(p){var P=_(p,["version"]);if(this.isLanguageInfoRequired){I.addLanguageInfo(P);}var d=I.getUrl(this.ROUTES.DATA,p,P);return I.sendRequest(d,"GET",{xsrfToken:this.xsrfToken}).then(function(r){var R=r.response;if(r.xsrfToken){this.xsrfToken=r.xsrfToken;}if(r.etag){R.cacheKey=r.etag;}R.changes=R.changes.concat(R.compVariants||[]);if(R.settings){this.settings=R.settings;}return R;}.bind(this));}};});
sap.ui.predefine('sap/ui/fl/initial/_internal/connectors/KeyUserConnector',["sap/base/util/merge","sap/ui/fl/initial/_internal/connectors/BackendConnector","sap/ui/fl/Layer"],function(m,B,L){"use strict";var P="/flex/keyuser";var A="/v1";var K=m({},B,{layers:[L.CUSTOMER],ROUTES:{DATA:P+A+"/data/"},isLanguageInfoRequired:true});return K;});
sap.ui.predefine('sap/ui/fl/initial/_internal/connectors/LrepConnector',["sap/ui/fl/initial/_internal/connectors/Utils","sap/ui/fl/Utils","sap/ui/dom/includeScript"],function(U,F,i){"use strict";var R={DATA:"/flex/data/",MODULES:"/flex/modules/"};return{layers:["ALL"],xsrfToken:undefined,settings:undefined,_loadModules:function(f){return new Promise(function(r,a){i(f,undefined,r,a);});},_addClientInfo:function(p){var c=F.getUrlParameter("sap-client");if(!p&&c){p={};}if(c){p["sap-client"]=c;}},loadFlexData:function(p){if(p.cacheKey==="<NO CHANGES>"){return Promise.resolve();}var P={};this._addClientInfo(P);U.addLanguageInfo(P);var a;if(p.appDescriptor&&p.appDescriptor["sap.app"]){a=p.appDescriptor["sap.app"].id;}var d=U.getUrl(R.DATA,p,P);return U.sendRequest(d,"GET",{xsrfToken:this.xsrfToken,siteId:p.siteId,sAppDescriptorId:a}).then(function(r){var o=r.response;if(r.xsrfToken){this.xsrfToken=r.xsrfToken;}if(r.etag){o.cacheKey=r.etag;}else if(p.cacheKey){o.cacheKey=p.cacheKey;}o.changes=o.changes.concat(o.compVariants||[]);if(o.settings){this.settings=o.settings;}if(!o.loadModules){return o;}var m=U.getUrl(R.MODULES,p,P);return this._loadModules(m).then(function(){return o;});}.bind(this));}};});
sap.ui.predefine('sap/ui/fl/initial/_internal/connectors/NeoLrepConnector',["sap/base/util/merge","sap/ui/fl/initial/_internal/connectors/LrepConnector"],function(m,L){"use strict";return m({},L,{});});
sap.ui.predefine('sap/ui/fl/initial/_internal/connectors/PersonalizationConnector',["sap/base/util/merge","sap/ui/fl/initial/_internal/connectors/BackendConnector","sap/ui/fl/Layer"],function(m,B,L){"use strict";var P="/flex/personalization";var A="/v1";var a=m({},B,{layers:[L.USER],ROUTES:{DATA:P+A+"/data/"}});return a;});
sap.ui.predefine('sap/ui/fl/initial/_internal/connectors/StaticFileConnector',["sap/base/Log","sap/base/util/LoaderExtensions"],function(L,a){"use strict";function _(r,b){var B=r.replace(/\./g,"/")+"/changes/"+b+".json";var c=!!sap.ui.loader._.getModuleState(B);var C=sap.ui.getCore().getConfiguration();if(c||C.getDebug()||C.getComponentPreload()==="off"){try{return a.loadResource(B);}catch(e){if(e.name.includes("SyntaxError")){L.error(e);}L.warning("flexibility did not find a "+b+".json for the application: "+r);}}}return{loadFlexData:function(p){var c=p.componentName;if(!c){c=p.reference.replace(/.Component/g,"");}var f=_(c,"flexibility-bundle");if(f){f.changes=f.changes.concat(f.compVariants);delete f.compVariants;return Promise.resolve(f);}var C=_(c,"changes-bundle");if(C){return Promise.resolve({changes:C});}return Promise.resolve();}};});
sap.ui.predefine('sap/ui/fl/initial/_internal/connectors/Utils',["sap/base/security/encodeURLParameters"],function(a){"use strict";var T=0;var _=function(r,u){var e=new Error(r.statusText);e.status=r.status;e.userMessage=u;return e;};var b=function(t){return sap.ui.getCore().getLibraryResourceBundle("sap.ui.fl").getText(t);};return{addLanguageInfo:function(p){if(!p){p={};}p["sap-language"]=sap.ui.getCore().getConfiguration().getLanguage();},getUrl:function(r,p,P){if(!r||!p.url){throw new Error("Not all necessary parameters were passed");}var u=p.url+r;if(p.cacheKey){u+="~"+p.cacheKey+"~/";}if(p.reference){u+=p.reference;}else if(p.fileName){u+=p.fileName;}if(P){Object.keys(P).forEach(function(k){if(P[k]===undefined){delete P[k];}});var q=a(P);if(q.length>0){u+="?"+q;}}return u;},sendRequest:function(u,m,p){m=m||"GET";m=m.toUpperCase();return new Promise(function(r,c){var x=new XMLHttpRequest();x.open(m,u);x.timeout=T;if((m==="GET"||m==="HEAD")&&(!p||!p.xsrfToken)){x.setRequestHeader("X-CSRF-Token","fetch");}if((m==="POST"||m==="PUT"||m==="DELETE")&&p&&p.xsrfToken){x.setRequestHeader("X-CSRF-Token",p.xsrfToken);}if(p&&p.contentType){x.setRequestHeader("Content-Type",p.contentType);}if(p&&p.siteId){x.setRequestHeader("X-LRep-Site-Id",p.siteId);}if(p&&p.sAppDescriptorId){x.setRequestHeader("X-LRep-AppDescriptor-Id",p.sAppDescriptorId);}if(p&&p.dataType){x.responseType=p.dataType;}x.onload=function(){if(x.status>=200&&x.status<400){try{var R={};if(x.status!==204&&x.status!==205){if(!x.response&&x.responseText){x.response=x.responseText;}if(x.response){R.response=typeof x.response==="string"?JSON.parse(x.response):x.response;}}R.status=x.status;if(x.getResponseHeader("X-CSRF-Token")){R.xsrfToken=x.getResponseHeader("X-CSRF-Token");}if(x.getResponseHeader("Etag")){R.etag=x.getResponseHeader("Etag");}r(R);}catch(E){E.userMessage=b("MSG_LOADING_SERVER_RESPONSE_ERROR");c(E);}}else{var s="";try{var o=JSON.parse(x.response);if(Array.isArray(o.messages)&&o.messages.length){s=o.messages.reduce(function(C,d){return C.concat(d.severity==="Error"?d.text+"\n":"");},s);}}catch(e){}c(_(x,s));}};x.ontimeout=function(){c(_(x,b("MSG_CONNECTION_TIMEOUT_ERROR")));};x.onerror=function(){c(_(x,b("MSG_NETWORK_ERROR")));};if(p&&p.payload){x.send(p.payload);}else{x.send();}});}};});
sap.ui.predefine('sap/ui/fl/initial/_internal/storageResultDisassemble',["sap/ui/fl/initial/_internal/StorageUtils","sap/base/util/merge","sap/base/util/isEmptyObject"],function(S,m,i){"use strict";function _(f,c){if(c.content.fileName!==c.content.variantManagementReference){f.push(c.content);}c.controlChanges.forEach(function(o){f.push(o);});for(var C in c.variantChanges){f=f.concat(c.variantChanges[C]);}return f;}function a(c){var I=true;if(c){Object.keys(c).some(function(k){if(c[k].length){I=false;return true;}});}return I;}return function(r){var f;if(!i(r.variantSection)){f=r.changes||[];for(var v in r.variantSection){var V=r.variantSection[v];for(var c in V.variantManagementChanges){f=f.concat(V.variantManagementChanges[c]);}f=V.variants.reduce(_,f);}var g=S.getGroupedFlexObjects(f);var d=S.filterAndSortResponses(g);delete r.changes;delete r.variantSection;m(d[0]||{},r);return d;}if(a(r.comp)){f=r.changes||[];r.comp={variants:[],changes:[],defaultVariants:[],standardVariants:[]};f.slice().reverse().forEach(function(F,n,A){var M=false;if(F.fileType==="variant"){r.comp.variants.unshift(F);M=true;}else{switch(F.changeType){case"addFavorite":case"removeFavorite":r.comp.changes.unshift(F);M=true;break;case"defaultVariant":r.comp.defaultVariants.unshift(F);M=true;break;case"standardVariant":r.comp.standardVariants.unshift(F);M=true;break;default:break;}}if(M){var b=A.length-1-n;r.changes.splice(b,1);}});}return[r];};});
sap.ui.predefine('sap/ui/fl/requireAsync',[],function(){"use strict";return function(m){return new Promise(function(r,R){sap.ui.require([m],function(M){r(M);},function(e){R(e);});});};});
sap.ui.predefine('sap/ui/fl/variants/VariantModel',["sap/base/util/restricted/_omit","sap/base/util/each","sap/base/util/includes","sap/base/util/isEmptyObject","sap/base/util/merge","sap/base/util/ObjectPath","sap/base/Log","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/core/BusyIndicator","sap/ui/fl/apply/_internal/changes/Reverter","sap/ui/fl/apply/_internal/controlVariants/URLHandler","sap/ui/fl/apply/_internal/flexState/controlVariants/Switcher","sap/ui/fl/apply/_internal/flexState/controlVariants/VariantManagementState","sap/ui/fl/apply/_internal/controlVariants/Utils","sap/ui/fl/changeHandler/Base","sap/ui/fl/Change","sap/ui/fl/Layer","sap/ui/fl/LayerUtils","sap/ui/fl/Utils","sap/ui/fl/registry/Settings","sap/ui/model/json/JSONModel"],function(_,e,i,a,m,O,L,J,B,R,U,S,V,b,c,C,d,f,g,h,j){"use strict";function k(E,P){return o(function(x,y){var M=y.model;var z=y.vmReference;var A=false;var T=x.key;var D=x.key;return Promise.resolve().then(function(){if(O.get([z,"currentVariant"],M.oData)&&M.oData[z].currentVariant!==M.oData[z].originalCurrentVariant){D=M.oData[z].originalCurrentVariant;A=true;return M.updateCurrentVariant({variantManagementReference:z,newVariantReference:T,appComponent:M.oAppComponent,internallyCalled:true});}}).then(function(){if(O.get([z,"modified"],M.oData)===true){var F=V.getControlChangesForVariant({reference:M.sFlexReference,vmReference:z,vReference:D,changeInstance:true});return l({changes:F,vmReference:z,vReference:D,revert:!A,model:M}).then(function(){M.oData[z].originalCurrentVariant=T;M.oData[z].modified=false;M.checkUpdate(true);});}}).then(function(){if(!A){M._callVariantSwitchListeners(z,M.oData[z].currentVariant);}});}.bind(null,E.getParameters(),P),P.model,P.vmReference);}function l(P){var x=P.model._getDirtyChangesFromVariantChanges(P.changes);return Promise.resolve().then(function(){if(P.revert){return R.revertMultipleChanges(x,{appComponent:P.model.oAppComponent,modifier:J,flexController:P.model.oFlexController});}}).then(function(){x.forEach(function(y){V.removeChangeFromVariant({reference:P.model.sFlexReference,change:y,vmReference:P.vmReference,vReference:P.vReference});P.model.oFlexController.deleteChange(y,P.model.oAppComponent);});});}function n(M,x,y){if(y||M.oData[x]){M.oData[x].variantBusy=y;}M.checkUpdate();}function o(x,M,y){M._oVariantSwitchPromise=M._oVariantSwitchPromise.catch(function(){}).then(n.bind(null,M,y,true)).then(x).then(n.bind(null,M,y,false)).catch(function(E){n(M,y,false);throw E;});M.oFlexController.setVariantSwitchPromise(M._oVariantSwitchPromise);return M._oVariantSwitchPromise;}function r(P){return S.switchVariant(P).then(function(){delete this.oData[P.vmReference];}.bind(this)).catch(function(E){L.warning(E.message);});}function s(P,x){return S.switchVariant(P).then(function(){this.oData[P.vmReference].originalCurrentVariant=P.newVReference;this.oData[P.vmReference].currentVariant=P.newVReference;if(this.oData[P.vmReference].updateVariantInURL){U.updateVariantInURL({vmReference:P.vmReference,newVReference:P.newVReference,model:this});}this._callVariantSwitchListeners(P.vmReference,P.newVReference,undefined,x);this.checkUpdate();}.bind(this));}function u(x){h.getInstance().then(function(y){if(!y.isVariantPersonalizationEnabled()){x.remove=false;x.rename=false;x.change=false;}});}function p(x,y,D){var z=D?f.getCurrentLayer():d.USER;if((x.layer===z)&&(x.key!==y)){return true;}return false;}function w(x){return new Promise(function(y){if(x.getDomRef()){y();}else{x.addEventDelegate({onAfterRendering:function(){y();}});}});}var q=j.extend("sap.ui.fl.variants.VariantModel",{constructor:function(D,F,A,x){this.pSequentialImportCompleted=Promise.resolve();j.apply(this,arguments);this.bObserve=x;if(!F){F=sap.ui.requireSync("sap/ui/fl/FlexControllerFactory").createForControl(A);}this.oFlexController=F;this.oChangePersistence=this.oFlexController._oChangePersistence;this.sFlexReference=this.oChangePersistence.getComponentName();this.oAppComponent=A;this._oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.fl");this._oVariantSwitchPromise=Promise.resolve();this._oVariantAppliedListeners={};if(a(D)){try{D=V.fillVariantModel({reference:this.sFlexReference});}catch(E){L.error("Variants Map was not found: "+E.message);}}if(D&&typeof D==="object"){Object.keys(D).forEach(function(K){D[K].variants.forEach(function(y){if(!D[K].currentVariant&&(y.key===D[K].defaultVariant)){D[K].currentVariant=y.key;}y.originalTitle=y.title;y.originalFavorite=y.favorite;y.originalExecuteOnSelect=y.executeOnSelect;y.originalVisible=y.visible;});D[K].originalCurrentVariant=D[K].currentVariant;D[K].originalDefaultVariant=D[K].defaultVariant;});this.setData(D);}U.initialize({model:this});}});q.prototype.updateCurrentVariant=function(P){var x={vmReference:P.variantManagementReference,currentVReference:this.oData[P.variantManagementReference].originalCurrentVariant,newVReference:P.newVariantReference,flexController:this.oFlexController,appComponent:P.appComponent||this.oAppComponent,modifier:J,reference:this.sFlexReference};if(P.internallyCalled){return s.call(this,x,P.scenario);}return o(s.bind(this,x,P.scenario),this,P.variantManagementReference);};q.prototype.getCurrentVariantReference=function(x){return this.oData[x].currentVariant;};q.prototype.getVariantManagementReference=function(x){var y="";var I=-1;Object.keys(this.oData).some(function(K){return this.oData[K].variants.some(function(z,A){if(z.key===x){y=K;I=A;return true;}});}.bind(this));return{variantManagementReference:y,variantIndex:I};};q.prototype.getVariant=function(x,y){return V.getVariant({reference:this.sFlexReference,vmReference:y||this.getVariantManagementReference(x).variantManagementReference,vReference:x});};q.prototype.getVariantProperty=function(x,P){return this.getVariant(x).content.content[P];};function t(x){var y=V.getVariantChangesForVariant({vmReference:x,reference:this.sFlexReference});var z=this.oData[x].currentVariant;var D=this.oData[x].defaultVariant;if(this.oData[x]._executeOnSelectionForStandardDefault&&z===D&&z===x&&!y.setExecuteOnSelect){var A=V.getVariant({reference:this.sFlexReference,vmReference:x,vReference:x});A.content.content.executeOnSelect=true;this.oData[x].variants[0].originalExecuteOnSelect=true;this.oData[x].variants[0].executeOnSelect=true;return true;}}q.prototype.attachVariantApplied=function(P){var x=this.getVariantManagementReferenceForControl(sap.ui.getCore().byId(P.vmControlId));return this.waitForVMControlInit(x).then(function(x,P){if(!this._oVariantAppliedListeners[x]){this._oVariantAppliedListeners[x]={};}var I=t.call(this,x);if(P.callAfterInitialVariant||I){var y={appComponent:this.oAppComponent,reference:this.sFlexReference,vmReference:x,flexController:this.oFlexController};V.waitForInitialVariantChanges(y).then(function(){var z=V.getCurrentVariantReference({vmReference:x,reference:this.sFlexReference});this._callVariantSwitchListeners(x,z,P.callback);}.bind(this));}return w(P.control).then(function(){if(b.getRelevantVariantManagementControlId(P.control,this.getVariantManagementControlIds())===P.vmControlId){this.oData[x].showExecuteOnSelection=true;this.checkUpdate(true);this._oVariantAppliedListeners[x][P.control.getId()]=P.callback;}else{L.error("Error in attachVariantApplied: The passed VariantManagement ID does not match the responsible VariantManagement control");}}.bind(this));}.bind(this,x,P));};q.prototype._callVariantSwitchListeners=function(x,N,y,z){if(this._oVariantAppliedListeners[x]){var A;this.oData[x].variants.some(function(D){if(D.key===N){A=m({},D);return true;}});if(z){A.createScenario=z;}if(y){y(A);}else{e(this._oVariantAppliedListeners[x],function(D,y){y(A);});}}};q.prototype.detachVariantApplied=function(x,y){var z=this.getVariantManagementReferenceForControl(sap.ui.getCore().byId(x));if(this._oVariantAppliedListeners[z]){delete this._oVariantAppliedListeners[z][y];}};q.prototype.addChange=function(x){var y=x.getVariantReference();var z=this.getVariantManagementReference(y).variantManagementReference;this.oData[z].modified=true;this.checkUpdate(true);return V.addChangeToVariant({reference:this.sFlexReference,change:x,vmReference:z,vReference:y});};q.prototype.removeChange=function(x){var y=x.getVariantReference();var z=this.getVariantManagementReference(y).variantManagementReference;var A=V.removeChangeFromVariant({reference:this.sFlexReference,change:x,vmReference:z,vReference:y});this.checkDirtyStateForControlModels([z]);return A;};q.prototype._getVariantTitleCount=function(N,x){var D=this.getData();return D[x].variants.reduce(function(y,z){if(N.toLowerCase()===z.title.toLowerCase()&&z.visible){y++;}return y;},0);};q.prototype._duplicateVariant=function(P){var N=P.newVariantReference;var x=P.sourceVariantReference;var y=P.variantManagementReference;var z=this.getVariant(x);var A=V.getControlChangesForVariant({vmReference:y,vReference:x,changeInstance:true,reference:this.sFlexReference}).map(function(H){return H.getDefinition();});var D={content:{},controlChanges:A,variantChanges:{}};var E=f.compareAgainstCurrentLayer(z.content.layer,!this._bDesignTimeMode?d.USER:"");Object.keys(z.content).forEach(function(K){if(K==="fileName"){D.content[K]=N;}else if(K==="variantReference"){if(E===0){D.content[K]=z.content["variantReference"];}else if(E===-1){D.content[K]=x;}}else if(K==="content"){D.content[K]=JSON.parse(JSON.stringify(z.content[K]));D.content.content.title=P.title;}else{D.content[K]=z.content[K];}});D.content["layer"]=P.layer;A=D.controlChanges.slice();var F={};var G;D.controlChanges=A.reduce(function(H,I){if(f.compareAgainstCurrentLayer(I.layer,!this._bDesignTimeMode?d.USER:"")===0){F=m({},I);F.variantReference=D.content.fileName;if(!F.support){F.support={};}F.support.sourceChangeFileName=I.fileName;F.packageName="$TMP";G=C.createInitialFileContent(F);H.push(new C(G));}return H;}.bind(this),[]);return D;};q.prototype.copyVariant=function(P){var D=this._duplicateVariant(P);D.generator=P.generator;var x={key:D.content.fileName,layer:P.layer,title:D.content.content.title,originalTitle:D.content.content.title,originalExecuteOnSelect:D.content.content.executeOnSelect,executeOnSelect:false,favorite:true,originalFavorite:true,rename:true,change:true,remove:true,visible:true,originalVisible:true};var y=b.createVariant({model:this,variantSpecificData:D});var z=[];[y].concat(y.getControlChanges()).forEach(function(A){z.push(this.oChangePersistence.addDirtyChange(A));}.bind(this));var I=V.addVariantToVariantManagement({variantData:m({},y.getDefinitionWithChanges(),{content:{content:{visible:x.visible,favorite:x.favorite}}}),reference:this.sFlexReference,vmReference:P.variantManagementReference});this.oData[P.variantManagementReference].variants.splice(I,0,x);return this.updateCurrentVariant({variantManagementReference:P.variantManagementReference,newVariantReference:y.getId(),appComponent:P.appComponent,internallyCalled:true,scenario:"saveAs"}).then(function(){return z;});};q.prototype.removeVariant=function(P){var x=this.oChangePersistence.getDirtyChanges().filter(function(y){return(y.getVariantReference&&y.getVariantReference()===P.variant.getId())||y.getId()===P.variant.getId();});return this.updateCurrentVariant({variantManagementReference:P.variantManagementReference,newVariantReference:P.sourceVariantReference,appComponent:P.component}).then(function(){var I=V.removeVariantFromVariantManagement({reference:this.sFlexReference,variant:P.variant,vmReference:P.variantManagementReference});this.oData[P.variantManagementReference].variants.splice(I,1);this.checkUpdate();x.forEach(function(y){this.oChangePersistence.deleteChange(y);}.bind(this));}.bind(this));};q.prototype.collectModelChanges=function(x,y){var D=this.getData()[x];var M=D.variants;var z=[];var P={};M.forEach(function(A){if(A.originalTitle!==A.title){P={variantReference:A.key,changeType:"setTitle",title:A.title,originalTitle:A.originalTitle,layer:y};z.push(P);}if(A.originalFavorite!==A.favorite){P={variantReference:A.key,changeType:"setFavorite",favorite:A.favorite,originalFavorite:A.originalFavorite,layer:y};z.push(P);}if(A.originalExecuteOnSelect!==A.executeOnSelect){P={variantReference:A.key,changeType:"setExecuteOnSelect",executeOnSelect:A.executeOnSelect,originalExecuteOnSelect:A.originalExecuteOnSelect,layer:y};z.push(P);}if(!A.visible&&A.originalVisible){P={variantReference:A.key,changeType:"setVisible",visible:false,layer:y};z.push(P);}});if(D.originalDefaultVariant!==D.defaultVariant){P={variantManagementReference:x,changeType:"setDefault",defaultVariant:D.defaultVariant,originalDefaultVariant:D.originalDefaultVariant,layer:y};z.push(P);}return z;};q.prototype.manageVariants=function(x,y,z,A){return new Promise(function(D){x.attachEventOnce("manage",{resolve:D,variantManagementReference:y,layer:z},this.fnManageClickRta,this);x.openManagementDialog(true,A);}.bind(this));};q.prototype.setVariantProperties=function(x,P,A){var y=-1;var z;var D=null;var E=this.getData();if(P.variantReference){y=this.getVariantManagementReference(P.variantReference).variantIndex;z=E[x].variants[y];}var N={};var F={};switch(P.changeType){case"setTitle":F.title=P.title;z.title=P.title;z.originalTitle=z.title;break;case"setFavorite":F.favorite=P.favorite;z.favorite=P.favorite;z.originalFavorite=z.favorite;break;case"setExecuteOnSelect":F.executeOnSelect=P.executeOnSelect;if(z){z.executeOnSelect=P.executeOnSelect;z.originalExecuteOnSelect=z.executeOnSelect;}break;case"setVisible":F.visible=P.visible;F.createdByReset=false;z.visible=P.visible;z.originalVisible=z.visible;break;case"setDefault":F.defaultVariant=P.defaultVariant;E[x].defaultVariant=P.defaultVariant;E[x].originalDefaultVariant=E[x].defaultVariant;var H=U.getStoredHashParams({model:this});if(H){if(E[x].defaultVariant!==E[x].currentVariant&&H.indexOf(E[x].currentVariant)===-1){U.update({parameters:H.concat(E[x].currentVariant),updateURL:!this._bDesignTimeMode,updateHashEntry:true,model:this});}else if(E[x].defaultVariant===E[x].currentVariant&&H.indexOf(E[x].currentVariant)>-1){H.splice(H.indexOf(E[x].currentVariant),1);U.update({parameters:H,updateURL:!this._bDesignTimeMode,updateHashEntry:true,model:this});}}if(!A&&E[x].currentVariant!==P.defaultVariant){this.updateCurrentVariant({variantManagementReference:x,newVariantReference:P.defaultVariant,appComponent:P.appComponent});}break;default:break;}var G=V.getContent(this.sFlexReference);if(y>-1){var I=V.setVariantData({variantData:F,vmReference:x,previousIndex:y,reference:this.sFlexReference});E[x].variants.splice(y,1);E[x].variants.splice(I,0,z);}else if(G[x]){G[x].defaultVariant=P.defaultVariant;}var K={vmReference:x,add:A,reference:this.sFlexReference};if(A===true){N.changeType=P.changeType;N.layer=P.layer;N.generator=P.generator;if(P.changeType==="setDefault"){N.fileType="ctrl_variant_management_change";N.selector=J.getSelector(x,P.appComponent);}else{if(P.changeType==="setTitle"){c.setTextInChange(N,"title",P.title,"XFLD");}N.fileType="ctrl_variant_change";N.selector=J.getSelector(P.variantReference,P.appComponent);}D=this.oFlexController.createBaseChange(N,P.appComponent);D.setContent(F);K.changeContent=D.getDefinition();V.updateChangesForVariantManagementInMap(K);this.oChangePersistence.addDirtyChange(D);}else if(P.change){K.changeContent=P.change.getDefinition();V.updateChangesForVariantManagementInMap(K);this.oChangePersistence.deleteChange(P.change);}this.setData(E);this.checkUpdate(true);return D;};q.prototype._ensureStandardVariantExists=function(x){var D=this.getData();var y=D[x]||{};var z=_(y,["initPromise"]);if(!D[x]||a(z)){D[x]=m(y,{currentVariant:x,originalCurrentVariant:x,defaultVariant:x,originalDefaultVariant:x,variants:[{key:x,title:this._oResourceBundle.getText("STANDARD_VARIANT_TITLE"),originalTitle:this._oResourceBundle.getText("STANDARD_VARIANT_ORIGINAL_TITLE"),favorite:true,originalFavorite:true,executeOnSelect:false,originalExecuteOnSelect:false,visible:true,originalVisible:true,author:b.DEFAULT_AUTHOR}]});this.setData(D);var A={};A[x]={defaultVariant:x,variantManagementChanges:{},variants:[{content:{fileName:x,fileType:"ctrl_variant",variantManagementReference:x,variantReference:"",support:{user:b.DEFAULT_AUTHOR},content:{title:this._oResourceBundle.getText("STANDARD_VARIANT_TITLE"),favorite:true,visible:true,executeOnSelect:false}},controlChanges:[],variantChanges:{}}]};try{var E=V.getContent(this.sFlexReference);m(E,A);}catch(F){L.error("Variants Map was not found: "+F.message);}}};q.prototype.setModelPropertiesForControl=function(x,D,y){this.oData[x].modified=false;this.oData[x].showFavorites=true;var z=this._bDesignTimeMode;if(z!==D){this._bDesignTimeMode=D;if(D){U.clearAllVariantURLParameters({model:this});}else if(z){U.update({parameters:U.getStoredHashParams({model:this}),updateURL:true,updateHashEntry:false,model:this});}}if(!(typeof this.fnManageClick==="function"&&typeof this.fnManageClickRta==="function")){this._initializeManageVariantsEvents();}y.detachManage(this.fnManageClick,this);if(D&&this.oData[x]._isEditable){this.oData[x].variantsEditable=false;this.oData[x].variants.forEach(function(A){A.rename=true;A.change=true;A.remove=p(A,x,D);});}else if(this.oData[x]._isEditable){y.attachManage({variantManagementReference:x},this.fnManageClick,this);this.oData[x].variantsEditable=true;this.oData[x].variants.forEach(function(A){A.remove=p(A,x,D);if(A.layer===d.USER){A.rename=true;A.change=true;u(A);}else{A.rename=false;A.change=false;}});}else{this.oData[x].variantsEditable=false;this.oData[x].variants.forEach(function(A){A.remove=false;A.rename=false;A.change=false;});}};q.prototype._initializeManageVariantsEvents=function(){this.fnManageClickRta=function(E,D){var x=this.collectModelChanges(D.variantManagementReference,D.layer);D.resolve(x);};this.fnManageClick=function(E,D){if(!this.oFlexController||!V.getContent(this.sFlexReference)){return;}var x=this.collectModelChanges(D.variantManagementReference,d.USER);var y=[];x.forEach(function(z){z.appComponent=this.oAppComponent;y.push(this.setVariantProperties(D.variantManagementReference,z,true));}.bind(this));this.oChangePersistence.saveDirtyChanges(this.oAppComponent,false,y);};};function v(F,x,y,A){if(!this._bDesignTimeMode){return F.saveSequenceOfDirtyChanges(x,A).then(function(z){if(z){var D=z.response[0];this.oData[y].variants.forEach(function(E){if(E.key===D.fileName){E.author=D.support.user;}});}}.bind(this));}return Promise.resolve();}q.prototype._handleSaveEvent=function(E){if(!this._bDesignTimeMode){var x=E.getSource();var P=E.getParameters();return this._handleSave(x,P);}return Promise.resolve();};q.prototype._handleSave=function(x,P){var A=g.getAppComponentForControl(x);var y=this.getLocalId(x.getId(),A);var N;return o(function(z,A,P){var D=P.def;var E=P.execute;var F=this.getCurrentVariantReference(z);var G=V.getControlChangesForVariant({reference:this.sFlexReference,vmReference:z,vReference:F,changeInstance:true});if(P["overwrite"]){return this.oFlexController.saveSequenceOfDirtyChanges(this._getDirtyChangesFromVariantChanges(G),A).then(function(M){this.checkDirtyStateForControlModels([z]);return M;}.bind(this));}var H=P.layer||d.USER;var I=P.newVariantReference||g.createDefaultFileName();var K={variantManagementReference:z,appComponent:A,layer:H,title:P["name"],sourceVariantReference:F,newVariantReference:I,generator:P.generator};return this.copyVariant(K).then(function(M){if(D){var Q={changeType:"setDefault",defaultVariant:I,originalDefaultVariant:this.oData[z].defaultVariant,appComponent:A,layer:H,variantManagementReference:z};var T=this.setVariantProperties(z,Q,true);M.push(T);}if(E){var W={changeType:"setExecuteOnSelect",executeOnSelect:true,variantReference:I,appComponent:A,layer:H,variantManagementReference:z};var X=this.setVariantProperties(z,W,true);M.push(X);}this.oData[z].modified=false;this.checkUpdate(true);N=M;return l({changes:G,vmReference:z,vReference:F,model:this}).then(v.bind(this,this.oFlexController,M,z,A));}.bind(this));}.bind(this,y,A,P),this,y).then(function(){return N;});};q.prototype.getLocalId=function(I,A){return J.getSelector(I,A).id;};q.prototype.getVariantManagementReferenceForControl=function(x){var y=x.getId();var A=g.getAppComponentForControl(x);return(A&&A.getLocalId(y))||y;};q.prototype.switchToDefaultForVariantManagement=function(x){if(this.oData[x].currentVariant!==this.oData[x].defaultVariant){B.show(200);this.updateCurrentVariant({variantManagementReference:x,newVariantReference:this.oData[x].defaultVariant}).then(function(){B.hide();});}};q.prototype.switchToDefaultForVariant=function(x){Object.keys(this.oData).forEach(function(y){if(!x||this.oData[y].currentVariant===x){this.switchToDefaultForVariantManagement(y);}}.bind(this));};q.prototype.registerToModel=function(x){var y=this.getVariantManagementReferenceForControl(x);this._ensureStandardVariantExists(y);this.oData[y]._isEditable=x.getEditable();this.oData[y]._executeOnSelectionForStandardDefault=x.getExecuteOnSelectionForStandardDefault();this.oData[y].showExecuteOnSelection=false;x.attachEvent("select",{vmReference:y,model:this},k);x.attachSave(this._handleSaveEvent,this);this.setModelPropertiesForControl(y,false,x);var z=x.getUpdateVariantInURL();this.oData[y].updateVariantInURL=z;U.registerControl({vmReference:y,updateURL:!!z,model:this});U.handleModelContextChange({model:this,vmControl:x});if(this.oData[y].initPromise){this.oData[y].initPromise.resolveFunction();delete this.oData[y].initPromise;}this.oData[y].init=true;};q.prototype.waitForVMControlInit=function(x){if(!this.oData[x]){this.oData[x]={};}else if(this.oData[x].init){return Promise.resolve();}this.oData[x].initPromise={};this.oData[x].initPromise.promise=new Promise(function(y){this.oData[x].initPromise.resolveFunction=y;}.bind(this));return this.oData[x].initPromise.promise;};q.prototype._getDirtyChangesFromVariantChanges=function(x){var y=x.map(function(z){return z.getDefinition().fileName;});return this.oChangePersistence.getDirtyChanges().filter(function(z){return i(y,z.getId())&&!z.assignedToVariant;});};q.prototype.checkDirtyStateForControlModels=function(x){x.forEach(function(y){var z=this.oData[y];if(z.modified===true){var A=this.getCurrentVariantReference(y);var D=V.getControlChangesForVariant({reference:this.sFlexReference,vmReference:y,vReference:A,changeInstance:true});var E=this._getDirtyChangesFromVariantChanges(D);if(E.length===0){z.modified=false;}}}.bind(this));this.checkUpdate(true);};q.prototype.getCurrentControlVariantIds=function(){return Object.keys(this.oData||{}).reduce(function(x,y){return x.concat([this.oData[y].currentVariant]);}.bind(this),[]);};q.prototype.getVariantManagementControlIds=function(){var x;return Object.keys(this.oData||{}).reduce(function(y,z){if(this.oAppComponent.byId(z)){x=this.oAppComponent.createId(z);}else{x=z;}y.push(x);return y;}.bind(this),[]);};q.prototype.resetMap=function(x){var y=Object.keys(this.oData);y.forEach(function(z){var P={vmReference:z,currentVReference:this.oData[z].currentVariant||this.oData[z].defaultVariant,newVReference:true,appComponent:this.oAppComponent,flexController:this.oFlexController,modifier:J,reference:this.sFlexReference};return o(r.bind(this,P),this,z);}.bind(this));return this._oVariantSwitchPromise.then(function(){V.resetContent(this.sFlexReference);if(!x){U.initialize({model:this});U.update({parameters:[],updateHashEntry:true,model:this});}}.bind(this));};return q;},true);
sap.ui.predefine('sap/ui/fl/write/_internal/Storage',["sap/ui/fl/initial/_internal/StorageUtils","sap/ui/fl/write/_internal/StorageFeaturesMerger","sap/base/util/ObjectPath"],function(S,a,O){"use strict";var W="sap/ui/fl/write/_internal/connectors/";function _(){return S.getConnectors(W,false);}function f(l,C){var F=C.filter(function(o){return o.layers.indexOf("ALL")!==-1||o.layers.indexOf(l)!==-1;});if(F.length===1){return F[0];}if(F.length===0){throw new Error("No Connector configuration could be found to write into layer: "+l);}if(F.length>1){throw new Error("sap.ui.core.Configuration 'flexibilityServices' has a misconfiguration: Multiple Connector configurations were found to write into layer: "+l);}}function b(C){var i=C.map(function(o){return o.writeConnectorModule.loadFeatures({url:o.url}).then(function(F){return{features:F,layers:o.layers};}).catch(S.logAndResolveDefault.bind(null,{features:{},layers:o.layers},o,"loadFeatures"));});return Promise.all(i);}function c(l){if(!l){return Promise.reject("No layer was provided");}return _().then(f.bind(this,l));}function d(p){if(p.draft){return new Promise(function(r,i){sap.ui.require(["sap/ui/fl/write/api/FeaturesAPI"],function(F){F.isVersioningEnabled(p.layer).then(function(D){if(D){r();}else{i("Draft is not supported for the given layer: "+p.layer);}});});});}return Promise.resolve();}function e(p){var C;if(p.allChanges&&p.allChanges.length&&p.condensedChanges){C={namespace:p.allChanges[0].getDefinition().namespace,layer:p.layer,"delete":{change:[]},update:{change:[]},reorder:{change:[]},create:{change:[],ctrl_variant_change:[],ctrl_variant_management_change:[]}};var o=0;var A=false;p.allChanges.forEach(function(i,j){if(i.getFileType()==="ctrl_variant"){return;}var k=C.create[i.getFileType()].length;if(i.condenserState){var D=false;if(i.condenserState==="delete"){if(i.getState()==="NONE"){C.delete.change.push(i.getFileName());}o++;}else if(p.condensedChanges.length){D=p.allChanges[j].getFileName()!==p.condensedChanges[j-o].getFileName();}if(i.condenserState==="select"&&D&&!A){var r=p.condensedChanges.slice(j-o).map(function(i){return i.getFileName();});C.reorder.change=r;A=true;}if(i.condenserState==="select"&&i.getProperty("state")==="NEW"){C.create.change[k]={};C.create.change[k][i.getFileName()]=i.getDefinition();}else if(i.condenserState==="update"){var l=C.update.change.length;C.update.change[l]={};C.update.change[l][i.getFileName()]={content:i.getContent()};}delete i.condenserState;}else if(i.getProperty("state")==="NEW"){C.create[i.getFileType()][k]={};C.create[i.getFileType()][k][i.getId()]=i.getDefinition();}});}return C;}function g(A,p){return d(p).then(c.bind(undefined,p.layer)).then(function(C){p.url=C.url;var o=O.get(A,C.writeConnectorModule);return o.call(C.writeConnectorModule,p);});}var h={};h.write=function(p){return g("write",p);};h.condense=function(p){p.flexObjects=e(p);if(!p.flexObjects){return Promise.reject("No changes were provided");}return g("condense",p);};h.remove=function(p){return g("remove",p);};h.update=function(p){return g("update",p);};h.reset=function(p){return g("reset",p);};h.getFlexInfo=function(p){return g("getFlexInfo",p);};h.getContexts=function(p){return g("getContexts",p);};h.loadContextDescriptions=function(p){return g("loadContextDescriptions",p);};h.isContextSharingEnabled=function(p){return g("isContextSharingEnabled",p);};h.loadFeatures=function(){return _().then(b).then(a.mergeResults);};h.publish=function(p){return g("publish",p);};h.versions={load:function(p){return _().then(g.bind(undefined,"versions.load",p));},activate:function(p){return _().then(g.bind(undefined,"versions.activate",p));},discardDraft:function(p){return _().then(g.bind(undefined,"versions.discardDraft",p));}};return h;},true);
sap.ui.predefine('sap/ui/fl/write/_internal/StorageFeaturesMerger',["sap/base/util/merge"],function(m){"use strict";var D={isKeyUser:false,isVariantSharingEnabled:false,isVariantPersonalizationEnabled:true,isAtoAvailable:false,isAtoEnabled:false,versioning:{},isProductiveSystem:true,isPublicLayerAvailable:false,isZeroDowntimeUpgradeRunning:false,system:"",client:""};function _(r){var v={};var V=!!r.features.isVersioningEnabled;r.layers.forEach(function(l){v[l]=V;});return v;}return{mergeResults:function(r){var R=D;r.forEach(function(o){Object.keys(o.features).forEach(function(k){if(k!=="isVersioningEnabled"){R[k]=o.features[k];}});R.versioning=m(R.versioning,_(o));});return R;}};});
sap.ui.predefine('sap/ui/fl/write/_internal/Versions',["sap/ui/fl/registry/Settings","sap/ui/fl/ChangePersistenceFactory","sap/ui/fl/write/_internal/Storage","sap/base/util/UriParameters","sap/ui/model/json/JSONModel","sap/ui/fl/Utils","sap/ui/model/BindingMode"],function(S,C,a,U,J,b,B){"use strict";var _={};var M=9;var c=M+1;function d(p,v,h){var i=g(h);var n=sap.ui.fl.Versions.Original;h.forEach(function(o){if(o.version===sap.ui.fl.Versions.Draft){o.type="draft";}else if(n===sap.ui.fl.Versions.Original){o.type="active";n=o.version;}else{o.type="inactive";}});var P=b.getParameter(sap.ui.fl.Versions.UrlParameter);var j;if(P){j=parseInt(P);}else if(h.length>0){j=h[0].version;}else{j=sap.ui.fl.Versions.Original;}var m=new J({versioningEnabled:v,versions:h,activeVersion:n,backendDraft:i,dirtyChanges:false,draftAvailable:i,activateEnabled:i,persistedVersion:j,displayedVersion:j});m.setDefaultBindingMode(B.OneWay);m.setSizeLimit(M);m.setDirtyChanges=function(D){m.setProperty("/dirtyChanges",D);m.updateDraftVersion();m.updateBindings(true);};m.updateDraftVersion=function(){var h=m.getProperty("/versions");var v=m.getProperty("/versioningEnabled");var D=m.getProperty("/dirtyChanges");var i=m.getProperty("/backendDraft");var k=v&&(D||i);m.setProperty("/draftAvailable",k);var l=D?sap.ui.fl.Versions.Draft:m.getProperty("/persistedVersion");m.setProperty("/displayedVersion",l);if(!g(h)&&k){h.splice(0,0,{version:sap.ui.fl.Versions.Draft,type:"draft"});}if(g(h)&&!k){h.shift();m.setProperty("/displayedVersion",m.getProperty("/persistedVersion"));}var A=m.getProperty("/displayedVersion")!==m.getProperty("/activeVersion");m.setProperty("/activateEnabled",A);};return m;}function e(p,D){var h=[];var i=D.changePersistences;i.forEach(function(o){h=o.getDirtyChanges().concat();h.forEach(function(j){o.deleteChange(j,true);});});return h.length>0;}function f(p){var D={dirtyChangesExist:false,changePersistences:[]};if(p.reference){var o=C.getChangePersistenceForComponent(p.reference);if(o.getDirtyChanges().length>0){D.dirtyChangesExist=true;D.changePersistences.push(o);}}if(p.nonNormalizedReference){var h=C.getChangePersistenceForComponent(p.nonNormalizedReference);if(h.getDirtyChanges().length>0){D.dirtyChangesExist=true;D.changePersistences.push(h);}}return D;}function g(v){return v.some(function(o){return o.version===sap.ui.fl.Versions.Draft;});}var V={};V.initialize=function(p){var r=p.reference;var l=p.layer;p.limit=c;return S.getInstance().then(function(s){var v=s.isVersioningEnabled(l);var h=v?a.versions.load(p):Promise.resolve([]);return h.then(function(i){_[r]=_[r]||{};_[r][l]=_[r][l]||{};_[r][l]=d(p,v,i);return _[r][l];});});};V.getVersionsModel=function(p){var r=p.reference;var l=p.layer;if(!_[r]||!_[r][l]){throw Error("Versions Model for reference '"+r+"' and layer '"+l+"' were not initialized.");}var D=f(p);if(D.dirtyChangesExist){_[r][l].updateDraftVersion(p);}return _[r][l];};V.clearInstances=function(){_={};};V.onAllChangesSaved=function(p){p.reference=b.normalizeReference(p.reference);var m=V.getVersionsModel(p);var v=m.getProperty("/versioningEnabled");var D=m.getProperty("/dirtyChanges");m.setProperty("/dirtyChanges",true);m.setProperty("/backendDraft",v&&D);m.updateDraftVersion();};V.activate=function(p){var m=V.getVersionsModel(p);var v=m.getProperty("/versions");var D=g(v);var s=m.getProperty("/displayedVersion");var A=m.getProperty("/activeVersion");var n=m.getProperty("/persistedVersion");if(s===A){return Promise.reject("Version is already active");}p.version=s;var h=[];if(m.getProperty("/dirtyChanges")){var o=f(p);var i=o.changePersistences;h=i.map(function(j){return j.saveDirtyChanges(p.appComponent,false,undefined,n);});}return Promise.all(h).then(a.versions.activate.bind(undefined,p)).then(function(j){v.forEach(function(k){k.type="inactive";});j.type="active";if(D){v.shift();}v.splice(0,0,j);m.setProperty("/backendDraft",false);m.setProperty("/dirtyChanges",false);m.setProperty("/draftAvailable",false);m.setProperty("/activateEnabled",false);m.setProperty("/activeVersion",j.version);m.setProperty("/displayedVersion",j.version);m.setProperty("/persistedVersion",j.version);m.updateBindings(true);});};V.discardDraft=function(p){var m=V.getVersionsModel(p);var v=m.getProperty("/versions");var D=f(p);var h=m.getProperty("/backendDraft");var o=h?a.versions.discardDraft(p):Promise.resolve();return o.then(function(){v.shift();m.setProperty("/backendDraft",false);m.setProperty("/dirtyChanges",false);m.setProperty("/draftAvailable",false);m.setProperty("/activateEnabled",false);m.setProperty("/displayedVersion",m.getProperty("/persistedVersion"));m.updateBindings(true);var i=e(p,D);return{backendChangesDiscarded:h,dirtyChangesDiscarded:i};});};return V;});
sap.ui.predefine('sap/ui/fl/write/_internal/connectors/BackendConnector',["sap/base/util/merge","sap/ui/fl/write/connectors/BaseConnector","sap/ui/fl/initial/_internal/connectors/BackendConnector","sap/ui/fl/initial/_internal/connectors/Utils","sap/ui/fl/write/_internal/connectors/Utils","sap/base/util/restricted/_pick"],function(m,B,I,a,W,_){"use strict";function b(p){var P={};if(p.parentVersion!==undefined){P.parentVersion=p.parentVersion;}if(this.isLanguageInfoRequired){a.addLanguageInfo(P);}var w=a.getUrl(this.ROUTES.CHANGES,p,P);delete p.fileName;delete P["sap-language"];var t=a.getUrl(this.ROUTES.TOKEN,p,P);var r=W.getRequestOptions(this.initialConnector,t,p.flexObjects||p.flexObject,"application/json; charset=utf-8","json");return W.sendRequest(w,p.method,r);}function c(p){p.fileName=p.flexObject.fileName;return b.call(this,p);}var d=m({},B,{xsrfToken:null,reset:function(p){var P=["reference","generator"];var e=_(p,P);if(p.selectorIds){e.selector=p.selectorIds;}if(p.changeTypes){e.changeType=p.changeTypes;}delete p.reference;var r=a.getUrl(this.ROUTES.CHANGES,p,e);var t=a.getUrl(this.ROUTES.TOKEN,p);var R=W.getRequestOptions(this.initialConnector,t);return W.sendRequest(r,"DELETE",R);},write:function(p){p.method="POST";return b.call(this,p).then(function(r){if(r.response&&!Array.isArray(r.response)){r.response=[r.response];}return r;});},update:function(p){p.method="PUT";return c.call(this,p);},remove:function(p){var P={namespace:p.flexObject.namespace};p.fileName=p.flexObject.fileName;var D=a.getUrl(this.ROUTES.CHANGES,p,P);delete p.fileName;var t=a.getUrl(this.ROUTES.TOKEN,p);var r=W.getRequestOptions(this.initialConnector,t,undefined,"application/json; charset=utf-8","json");return W.sendRequest(D,"DELETE",r);},loadFeatures:function(p){if(this.initialConnector.settings){return Promise.resolve({response:this.initialConnector.settings});}var f=a.getUrl(this.ROUTES.SETTINGS,p);return a.sendRequest(f).then(function(r){return r.response;});}});d.initialConnector=I;return d;},true);
sap.ui.predefine('sap/ui/fl/write/_internal/connectors/JsObjectConnector',["sap/base/util/merge","sap/ui/fl/write/api/connectors/ObjectStorageConnector"],function(m,O){"use strict";var M={_itemsStoredAsObjects:true,_items:{},setItem:function(k,v){M._items[k]=v;},removeItem:function(k){delete M._items[k];},clear:function(){M._items={};},getItem:function(k){return M._items[k];},getItems:function(){return M._items;}};var J=m({},O,{storage:M});return J;},true);
sap.ui.predefine('sap/ui/fl/write/_internal/connectors/KeyUserConnector',["sap/base/util/merge","sap/ui/fl/write/_internal/connectors/BackendConnector","sap/ui/fl/initial/_internal/connectors/KeyUserConnector","sap/ui/fl/initial/_internal/connectors/Utils","sap/ui/fl/write/_internal/connectors/Utils"],function(m,B,I,a,W){"use strict";var P="/flex/keyuser";var A="/v1";function _(p){p.initialConnector=I;p.xsrfToken=I.xsrfToken;p.tokenUrl=K.ROUTES.TOKEN;}function b(p){var o={title:p.title};p.payload=JSON.stringify(o);p.dataType="json";p.contentType="application/json; charset=utf-8";}function r(v){v.version=v.versionNumber;delete v.versionNumber;return v;}var K=m({},B,{layers:I.layers,ROUTES:{CHANGES:P+A+"/changes/",SETTINGS:P+A+"/settings",TOKEN:P+A+"/settings",VERSIONS:{GET:P+A+"/versions/",ACTIVATE:P+A+"/versions/activate/",DISCARD:P+A+"/versions/draft/"}},isLanguageInfoRequired:true});K.versions={load:function(p){_(p);var c={};a.addLanguageInfo(c);c.limit=p.limit;var v=a.getUrl(K.ROUTES.VERSIONS.GET,p,c);return a.sendRequest(v,"GET",p).then(function(R){return R.response.map(function(V){return r(V);});});},activate:function(p){_(p);b(p);var c={version:p.version};a.addLanguageInfo(c);var v=a.getUrl(K.ROUTES.VERSIONS.ACTIVATE,p,c);return W.sendRequest(v,"POST",p).then(function(R){var V=R.response;return r(V);});},discardDraft:function(p){_(p);var v=a.getUrl(K.ROUTES.VERSIONS.DISCARD,p);return W.sendRequest(v,"DELETE",p);}};K.initialConnector=I;return K;},true);
sap.ui.predefine('sap/ui/fl/write/_internal/connectors/LocalStorageConnector',["sap/base/util/merge","sap/ui/fl/write/api/connectors/ObjectStorageConnector"],function(m,O){"use strict";var L=m({},O,{storage:window.localStorage});L.loadFeatures=function(){return O.loadFeatures.apply(this,arguments).then(function(f){f.isPublicLayerAvailable=true;return f;});};return L;},true);
sap.ui.predefine('sap/ui/fl/write/_internal/connectors/LrepConnector',["sap/base/util/merge","sap/ui/fl/write/connectors/BaseConnector","sap/ui/fl/initial/_internal/connectors/LrepConnector","sap/ui/fl/initial/_internal/connectors/Utils","sap/ui/fl/write/_internal/connectors/Utils","sap/ui/fl/write/_internal/transport/TransportSelection","sap/ui/fl/registry/Settings","sap/ui/fl/Layer","sap/ui/fl/LayerUtils","sap/ui/fl/Utils","sap/ui/fl/Change","sap/ui/core/Component","sap/ui/core/BusyIndicator","sap/base/Log","sap/m/MessageBox","sap/base/util/restricted/_pick"],function(m,B,I,a,W,T,S,L,b,U,C,c,d,e,M,_){"use strict";var R={FLEX_INFO:"/flex/info/",PUBLISH:"/actions/make_changes_transportable/",CHANGES:"/changes/",CONDENSE:"/actions/condense/",VARIANTS:"/variants/",SETTINGS:"/flex/settings",TOKEN:"/actions/getcsrftoken/",APPVARIANTS:"/appdescr_variants/",APPVARIANTS_OVERVIEW:"/app_variant_overview/",UI2PERSONALIZATION:"/ui2personalization/",CONTEXTS:"/flex/contexts/"};var f=function(p){var r;if(p.isLegacyVariant){r=R.VARIANTS;}else if(p.isAppVariant){r=R.APPVARIANTS;}else if(p.isContextSharing){r=R.CONTEXTS;}else if(p.isCondensingEnabled){r=R.CONDENSE;}else{r=R.CHANGES;}var P=p.transport?{changelist:p.transport}:{};if(p.skipIam){P.skipIam=p.skipIam;}a.addLanguageInfo(P);I._addClientInfo(P);if(p.flexObject&&!p.isAppVariant){p.fileName=p.flexObject.fileName;}var w=a.getUrl(r,p,P);delete p.reference;delete p.fileName;var t=a.getUrl(R.TOKEN,p);var o=W.getRequestOptions(I,t,p.flexObjects||p.flexObject,"application/json; charset=utf-8","json");return W.sendRequest(w,p.method,o);};var g=function(A){var p=A.getDefinition().layer===L.VENDOR?A.getPackage():"";return new C({fileName:A.getDefinition().fileName,fileType:A.getDefinition().fileType,packageName:p,namespace:A.getNamespace()});};var h=function(p){var t;if(p.transport){t=Promise.resolve({transport:p.transport});}else if(p.isForSmartBusiness){return Promise.resolve();}else{var o=g(p.appVariant);t=new T().openTransportSelection(o);}return t.then(function(i){if(i==="cancel"){return Promise.reject("cancel");}if(i&&i.transport!==undefined){return i.transport;}return Promise.reject(new Error("Transport information could not be determined"));});};return m({},B,{initialConnector:I,layers:I.layers,reset:function(p){d.show(0);var i=[];var t=Promise.resolve();if(p.layer!==L.USER){i=p.changes;t=S.getInstance().then(function(s){if(!s.isProductiveSystem()){return new T().setTransports(i,c.get(p.reference)).then(function(){i.some(function(o){if(o.getRequest()){p.changelist=o.getRequest();return true;}return false;});});}});}return t.then(function(){d.show(0);var P=["reference","layer","changelist","generator"];var j=_(p,P);I._addClientInfo(j);if(p.selectorIds){j.selector=p.selectorIds;}if(p.changeTypes){j.changeType=p.changeTypes;}delete p.reference;var r=a.getUrl(R.CHANGES,p,j);var s=a.getUrl(R.TOKEN,p);var o=W.getRequestOptions(I,s);return W.sendRequest(r,"DELETE",o).then(function(k){if(k&&k.response){k.response.forEach(function(l){l.fileName=l.name;delete l.name;});}d.hide();return k;}).catch(function(E){d.hide();return Promise.reject(E);});});},publish:function(p){var r=sap.ui.getCore().getLibraryResourceBundle("sap.ui.fl");var H=function(E){d.hide();var s=r.getText("MSG_TRANSPORT_ERROR",E?[E.message||E]:undefined);var i=r.getText("HEADER_TRANSPORT_ERROR");e.error("transport error"+E);M.show(s,{icon:M.Icon.ERROR,title:i,styleClass:p.transportDialogSettings.styleClass});return"Error";};var t=new T();return t.openTransportSelection(null,p.transportDialogSettings.rootControl,p.transportDialogSettings.styleClass).then(function(o){if(t.checkTransportInfo(o)){d.show(0);var i={reference:p.reference,layer:p.layer};return t._prepareChangesForTransport(o,p.localChanges,p.appVariantDescriptors,i).then(function(){d.hide();if(o.transport==="ATO_NOTIFICATION"){return r.getText("MSG_ATO_NOTIFICATION");}return r.getText("MSG_TRANSPORT_SUCCESS");});}return"Cancel";})['catch'](H);},getFlexInfo:function(p){var P=["layer"];var i=_(p,P);I._addClientInfo(i);var D=a.getUrl(R.FLEX_INFO,p,i);return a.sendRequest(D).then(function(r){return r.response;});},getContexts:function(p){var P=["type","$skip","$filter"];var i=_(p,P);I._addClientInfo(i);var s=a.getUrl(R.CONTEXTS,p,i);return a.sendRequest(s).then(function(r){return r.response;});},loadContextDescriptions:function(p){p.method="POST";p.isContextSharing=true;return f(p).then(function(r){return r.response;});},isContextSharingEnabled:function(){return Promise.resolve(true);},loadFeatures:function(p){if(I.settings){I.settings.isVersioningEnabled=false;return Promise.resolve(I.settings);}var P={};I._addClientInfo(P);var F=a.getUrl(R.SETTINGS,p,P);return a.sendRequest(F).then(function(r){r.response.isVersioningEnabled=false;return r.response;});},write:function(p){p.method="POST";return f(p);},condense:function(p){p.method="POST";p.isCondensingEnabled=true;return f(p);},update:function(p){if(p.flexObject.fileType==="variant"){p.isLegacyVariant=true;}p.method="PUT";return f(p);},remove:function(p){var P={namespace:p.flexObject.namespace,layer:p.flexObject.layer};if(p.transport){P.changelist=p.transport;}I._addClientInfo(P);p.fileName=p.flexObject.fileName;var r=p.flexObject.fileType==="variant"?R.VARIANTS:R.CHANGES;var D=a.getUrl(r,p,P);D=decodeURIComponent(D);delete p.fileName;var t=a.getUrl(R.TOKEN,p);var o=W.getRequestOptions(I,t,undefined,"application/json; charset=utf-8","json");return W.sendRequest(D,"DELETE",o);},appVariant:{getManifest:function(p){var A=p.appVarUrl;var r=W.getRequestOptions(I,undefined,undefined,"application/json; charset=utf-8","json");return W.sendRequest(A,"GET",r);},load:function(p){var A=a.getUrl(R.APPVARIANTS,p);var r=W.getRequestOptions(I,undefined,undefined,"application/json; charset=utf-8","json");return W.sendRequest(A,"GET",r);},create:function(p){p.method="POST";p.isAppVariant=true;return f(p);},assignCatalogs:function(p){var P={};P.action=p.action;delete p.action;P.assignFromAppId=p.assignFromAppId;delete p.assignFromAppId;var s=a.getUrl(R.APPVARIANTS,p,P);delete p.reference;var t=a.getUrl(R.TOKEN,p);var r=W.getRequestOptions(I,t,undefined,"application/json; charset=utf-8","json");return W.sendRequest(s,"POST",r);},unassignCatalogs:function(p){var P={};P.action=p.action;delete p.action;var s=a.getUrl(R.APPVARIANTS,p,P);delete p.reference;var t=a.getUrl(R.TOKEN,p);var r=W.getRequestOptions(I,t,undefined,"application/json; charset=utf-8","json");return W.sendRequest(s,"POST",r);},update:function(p){return h(p).then(function(t){if(t){p.transport=t;}delete p.isForSmartBusiness;p.method="PUT";p.isAppVariant=true;return f(p);});},remove:function(p){return h(p).then(function(t){var P={};if(t){P.changelist=t;}delete p.isForSmartBusiness;var D=a.getUrl(R.APPVARIANTS,p,P);delete p.reference;var s=a.getUrl(R.TOKEN,p);var r=W.getRequestOptions(I,s,undefined,"application/json; charset=utf-8","json");return W.sendRequest(D,"DELETE",r);});},list:function(p){var P={};P.layer=p.layer;P["sap.app/id"]=p.reference;delete p.layer;delete p.reference;var A=a.getUrl(R.APPVARIANTS_OVERVIEW,p,P);var r=W.getRequestOptions(I,undefined,undefined,"application/json; charset=utf-8","json");return W.sendRequest(A,"GET",r);}},ui2Personalization:{create:function(p){p.initialConnector=this.initialConnector;var P=U.getLrepUrl();var r=W.getRequestOptions(I,P+R.TOKEN,p.flexObjects||p.flexObject,"application/json; charset=utf-8","json");var u=P+R.UI2PERSONALIZATION;return W.sendRequest(u,"PUT",r);},remove:function(p){p.initialConnector=this.initialConnector;var u=a.getUrl(R.UI2PERSONALIZATION,{url:U.getLrepUrl()},{reference:p.reference,containerkey:p.containerKey,itemname:p.itemName});return W.sendRequest(u,"DELETE");}}});},true);
sap.ui.predefine('sap/ui/fl/write/_internal/connectors/NeoLrepConnector',["sap/base/util/merge","sap/ui/fl/write/_internal/connectors/LrepConnector","sap/ui/fl/initial/_internal/connectors/NeoLrepConnector"],function(m,L,I){"use strict";return m({},L,{initialConnector:I,layers:I.layers,isContextSharingEnabled:function(){return Promise.resolve(false);},loadContextDescriptions:function(){return Promise.reject("loadContextsDescriptions is not implemented");},getContexts:function(){return Promise.reject("getContexts is not implemented");}});},true);
sap.ui.predefine('sap/ui/fl/write/_internal/connectors/ObjectPathConnector',["sap/base/util/merge","sap/ui/fl/write/connectors/BaseConnector","sap/ui/fl/initial/_internal/StorageUtils","sap/base/util/LoaderExtensions"],function(m,B,S,L){"use strict";var j;return m({},B,{layers:[],setJsonPath:function(i){j=i;},loadFlexData:function(p){var P=j||p.path;if(P){return L.loadResource({dataType:"json",url:P,async:true}).then(function(r){return Object.assign(S.getEmptyFlexDataResponse(),r);});}return Promise.resolve();},loadFeatures:function(p){var P=j||p.path;if(P){return L.loadResource({dataType:"json",url:P,async:true}).then(function(f,r){r.componentClassName=f;return r.settings||{};}.bind(null,p.flexReference));}return Promise.resolve({});}});},true);
sap.ui.predefine('sap/ui/fl/write/_internal/connectors/ObjectStorageConnector',["sap/base/util/merge","sap/ui/fl/write/api/connectors/ObjectStorageConnector"],function(m,P){"use strict";var O=m({},P,{oStorage:undefined});O.storage=O.oStorage;return O;});
sap.ui.predefine('sap/ui/fl/write/_internal/connectors/PersonalizationConnector',["sap/base/util/merge","sap/ui/fl/write/_internal/connectors/BackendConnector","sap/ui/fl/initial/_internal/connectors/PersonalizationConnector"],function(m,B,I){"use strict";var P="/flex/personalization";var A="/v1";var F={isProductiveSystem:true};var a=m({},B,{layers:I.layers,ROUTES:{CHANGES:P+A+"/changes/",TOKEN:P+A+"/actions/getcsrftoken"},loadFeatures:function(){return Promise.resolve(F);}});a.initialConnector=I;return a;},true);
sap.ui.predefine('sap/ui/fl/write/_internal/connectors/SessionStorageConnector',["sap/base/util/merge","sap/ui/fl/write/api/connectors/ObjectStorageConnector"],function(m,O){"use strict";var S=m({},O,{storage:window.sessionStorage});S.loadFeatures=function(){return O.loadFeatures.apply(this,arguments).then(function(f){f.isPublicLayerAvailable=true;return f;});};return S;});
sap.ui.predefine('sap/ui/fl/write/_internal/connectors/Utils',["sap/ui/fl/initial/_internal/connectors/Utils"],function(U){"use strict";function u(p){return U.sendRequest(p.tokenUrl,"HEAD").then(function(r){if(r&&r.xsrfToken){if(p.initialConnector){p.initialConnector.xsrfToken=r.xsrfToken;}p.xsrfToken=r.xsrfToken;return p;}});}function a(p,s,m){return u(p).then(U.sendRequest.bind(undefined,s,m));}function b(s,t,k){if(!t[k]){t[k]=s[k];return;}if(Array.isArray(t[k])){t[k]=t[k].concat(s[k]);return;}if(typeof t[k]==='object'){Object.keys(s[k]).forEach(function(i){b(s[k],t[k],i);});}t[k]=s[k];}return{getRequestOptions:function(i,t,f,c,d){var o={xsrfToken:i.xsrfToken,tokenUrl:t,initialConnector:i};if(f){o.payload=JSON.stringify(f);}if(c){o.contentType=c;}if(d){o.dataType=d;}return o;},sendRequest:function(s,m,p){if(!p.initialConnector||(!p.initialConnector.xsrfToken&&!(m==='GET')&&!(m==='HEAD'))){return a(p,s,m);}return U.sendRequest(s,m,p).then(function(r){return r;}).catch(function(f){if(f.status===403){return a(p,s,m);}throw f;});},mergeResults:function(r){var R={};r.forEach(function(o){Object.keys(o).forEach(function(k){b(o,R,k);});});return R;}};});
sap.ui.predefine('sap/ui/fl/write/_internal/flexState/compVariants/CompVariantState',["sap/base/util/restricted/_omit","sap/base/util/restricted/_pick","sap/base/util/UriParameters","sap/ui/fl/Layer","sap/ui/fl/Change","sap/ui/fl/apply/_internal/flexObjects/CompVariant","sap/ui/fl/apply/_internal/flexObjects/CompVariantRevertData","sap/ui/fl/Utils","sap/ui/fl/apply/_internal/flexState/FlexState","sap/ui/fl/registry/Settings","sap/ui/fl/write/_internal/Storage"],function(_,a,U,L,C,b,c,d,F,S,e){"use strict";function g(i){switch(i.fileType){case"change":case"variant":return"changes";case"comp_variant_change":return"compVariantChanges";default:}}function f(P,i){var y=P.changeToBeAddedOrDeleted.getDefinition();var z=g(y);i[z].push(y);var I=y.fileName;var A=F.getCompEntitiesByIdMap(P.reference);A[I]=y;}function h(P,i){var y=P.changeToBeAddedOrDeleted.getDefinition();var z=g(y);var A=-1;i[z].some(function(E,I){if(E.fileName===y.fileName){A=I;return true;}});if(A>-1){i[z].splice(A,1);}var B=F.getCompEntitiesByIdMap(P.reference);delete B[y.fileName];}function j(P,i,y){var z=F.getCompVariantsMap(P.reference)._getOrCreate(P.persistencyKey);if(!z[y]){var A={fileName:d.createDefaultFileName(y),fileType:"change",changeType:y,layer:P.layer||L.USER,namespace:d.createNamespace(P,"changes"),reference:P.reference,selector:{persistencyKey:P.persistencyKey},support:P.support||{}};A.support.generator=A.support.generator||"CompVariantState."+y;A.support.sapui5Version=sap.ui.version;var B=new C(A);z[y]=B;F.getCompEntitiesByIdMap(P.reference)[B.getId()]=B;}z[y].setContent(i);return z[y];}function r(O,y){for(var i=O.length-1;i>=0;i--){if((O[i].fileName||O[i].getFileName())===y.fileName){O.splice(i,1);break;}}}function k(M,i){if(i.isVariant()){return M.variants;}switch(i.getChangeType()){case"defaultVariant":return M.defaultVariants;case"standardVariant":return M.standardVariants;default:return M.changes;}}function w(i,y){return e.write({flexObjects:[i.getDefinition()],layer:i.getLayer(),transport:i.getRequest(),isLegacyVariant:i.isVariant()}).then(function(z){if(z&&z.response&&z.response[0]){i.setResponse(z.response[0]);}else{i.setState(C.states.PERSISTED);}return y;}).then(function(y){k(y.changes.comp,i).push(i.getDefinition());return i.getDefinition();});}function u(O,y){for(var i=0;i<O.length;i++){if(O[i].fileName===y.fileName){O.splice(i,1,y);break;}}}function l(i,y){return e.update({flexObject:i.getDefinition(),layer:i.getLayer(),transport:i.getRequest()}).then(function(z){if(z&&z.response){i.setResponse(z.response);}else{i.setState(C.states.PERSISTED);}return y;}).then(function(y){var O=k(y.changes.comp,i);u(O,i.getDefinition());return i.getDefinition();});}function m(i,y,z,A){return e.remove({flexObject:i.getDefinition(),layer:i.getLayer(),transport:i.getRequest()}).then(function(){delete y[i.getId()];if(i.getChangeType()==="standardVariant"){z.standardVariant=undefined;}else if(i.getChangeType()==="defaultVariant"){z.defaultVariant=undefined;}else{r(k(z,i),i.getDefinition());}return A;}).then(function(A){r(k(A.changes.comp,i),i.getDefinition());return i.getDefinition();});}function n(i){return i&&(i.getPendingAction()==="NEW"||i.getPendingAction()==="UPDATE"||i.getPendingAction()==="DELETE");}function o(i){return i.variants.concat(i.changes).concat(i.defaultVariant).concat(i.standardVariant);}function p(P){var i={};if(typeof(P.texts)==="object"){Object.keys(P.texts).forEach(function(y){i[y]={value:P.texts[y],type:"XFLD"};});}return i;}function q(P){if(P.layer){return P.layer;}if(P.isUserDependent){return L.USER;}var i=U.fromQuery(window.location.search).get("sap-ui-layer")||"";i=i.toUpperCase();if(i){return i;}if(!P.isVariant){return L.CUSTOMER;}var y=S.getInstanceOrUndef().isPublicLayerAvailable();return y?L.PUBLIC:L.CUSTOMER;}function s(P){var i=F.getCompEntitiesByIdMap(P.reference);return i[P.id];}function t(i){if(i instanceof b){i.removeAllRevertInfo();}}var v={};v.setDefault=function(P){var i={defaultVariantName:P.defaultVariantId};return j(P,i,"defaultVariant");};v.setExecuteOnSelection=function(P){var i={executeOnSelect:P.executeOnSelection};return j(P,i,"standardVariant");};v.add=function(P){if(!P){return undefined;}var i=P.changeSpecificData;var I={changeType:i.type,service:i.ODataService,content:i.content||{},reference:P.reference,fileType:i.isVariant?"variant":"change",packageName:i.packageName,layer:q(i),selector:{persistencyKey:P.persistencyKey},texts:p(i),command:P.command,generator:P.generator};if(i.isVariant){I.content.favorite=!!i.favorite;I.content.executeOnSelection=i.content.executeOnSelection||!!i.executeOnSelection;I.contexts=i.contexts||{};}var y=i.isVariant?b:C;var z=y.createInitialFileContent(I);var A=new y(z);var B=F.getCompVariantsMap(P.reference);var M=B._getOrCreate(P.persistencyKey);k(M,A).push(A);var D=A.getId();var E=F.getCompEntitiesByIdMap(P.reference);E[D]=A;return A;};function x(P,V){var i=[];if(P.favorite===undefined){i.push("favorite");}if(P.executeOnSelection===undefined){i.push("executeOnSelection");}var R={type:v.operationType.ContentUpdate,content:{previousState:V.getState(),previousContent:V.getContent(),previousFavorite:V.getFavorite(),previousExecuteOnSelection:V.getExecuteOnSelection(),previousContexts:V.getContexts()}};if(P.name){R.content.previousName=V.getText("variantName");}V.addRevertInfo(new c(R));}v.updateVariant=function(P){var V=s(P);if(!V){throw new Error("Variant to be modified is not persisted via sap.ui.fl.");}if(!P.revert){x(P,V);}if(P.name){V.setText("variantName",P.name);}var i=V.getContent();var y=P.content||i;["favorite","executeOnSelection"].forEach(function(z){if(P[z]!==undefined){y[z]=P[z];}else if(!(P.revert&&y[z]!==undefined)&&i[z]!==undefined){y[z]=i[z];}});V.setContent(y);V.setFavorite(!!y.favorite);V.setExecuteOnSelection(!!y.executeOnSelection);if(P.contexts){V.setContexts(P.contexts);}return V;};v.operationType={StateUpdate:"StateUpdate",ContentUpdate:"ContentUpdate"};v.removeVariant=function(P){var V=s(P);if(!P.revert){var R=new c({type:v.operationType.StateUpdate,content:{previousState:V.getState()}});V.addRevertInfo(R);}V.markForDeletion();return V;};v.revert=function(P){var V=s(P);var R=V.getRevertInfo().pop();var i=R.getContent();switch(R.getType()){case v.operationType.ContentUpdate:v.updateVariant(Object.assign({revert:true,name:i.previousName,content:i.previousContent,favorite:i.previousFavorite,executeOnSelection:i.previousExecuteOnSelection,contexts:i.previousContexts},a(P,["reference","persistencyKey","id"])));break;case v.operationType.StateUpdate:default:break;}V.setState(i.previousState);V.removeRevertInfo(R);return V;};v.updateState=function(P){var i=F.getFlexObjectsFromStorageResponse(P.reference);if(P.changeToBeAddedOrDeleted){switch(P.changeToBeAddedOrDeleted.getPendingAction()){case C.states.NEW:f(P,i);break;case C.states.DELETED:h(P,i);break;default:break;}}};v.persist=function(P){var R=P.reference;var i=P.persistencyKey;var y=F.getCompVariantsMap(R);var z=y._getOrCreate(i);var A=F.getCompEntitiesByIdMap(R);var B=F.getStorageResponse(R);var D=o(z).filter(n).map(function(E){switch(E.getPendingAction()){case C.states.NEW:t(E);return w(E,B);case C.states.DIRTY:t(E);return l(E,B);case C.states.DELETED:t(E);return m(E,A,z,B);default:break;}});return Promise.all(D);};v.persistAll=function(R){var i=_(F.getCompVariantsMap(R),"_getOrCreate");var P=Object.keys(i).map(function(y){return v.persist({reference:R,persistencyKey:y});});return Promise.all(P);};return v;});
sap.ui.predefine('sap/ui/fl/write/api/connectors/FileListBaseConnector',["sap/ui/fl/initial/_internal/StorageUtils","sap/base/util/LoaderExtensions"],function(S,L){"use strict";return{getFileList:function(){return Promise.reject("not implemented");},layers:[],loadFlexData:function(p){return this.getFileList(p.reference).then(function(f){return Promise.all(f.map(function(u){return L.loadResource({dataType:"json",url:u,async:true});})).then(function(F){var g=S.getGroupedFlexObjects(F);return S.filterAndSortResponses(g);});});}};});
sap.ui.predefine('sap/ui/fl/write/api/connectors/ObjectStorageConnector',["sap/base/util/merge","sap/ui/fl/write/connectors/BaseConnector","sap/ui/fl/initial/_internal/StorageUtils","sap/ui/fl/apply/_internal/connectors/ObjectStorageUtils"],function(m,B,S,O){"use strict";function l(p){var f=[];return O.forEachObjectInStorage(p,function(F){f.push(F.changeDefinition);}).then(function(){return f;});}function s(p,c){var d=true;if(p.selectorIds){if(c.selector){d=p.selectorIds.indexOf(c.selector.id)>-1;}else{d=false;}}if(d&&p.changeTypes){d=p.changeTypes.indexOf(c.changeType)>-1;}return d;}function a(f,c){if(!f.creation){var n=Date.now()+c;f.creation=new Date(n).toISOString();}return f;}var b=m({},B,{storage:undefined,layers:["ALL"],loadFlexData:function(p){return l({storage:this.storage,reference:p.reference}).then(function(f){var g=S.getGroupedFlexObjects(f);return S.filterAndSortResponses(g);});},write:function(p){var P=p.flexObjects.map(function(f,i){var k=O.createFlexObjectKey(f);f=a(f,++i);var F=this.storage._itemsStoredAsObjects?f:JSON.stringify(f);return this.storage.setItem(k,F);}.bind(this));return Promise.all(P).then(function(){});},update:function(p){var f=p.flexObject;var k=O.createFlexObjectKey(p.flexObject);var F=this.storage._itemsStoredAsObjects?f:JSON.stringify(f);var v=this.storage.setItem(k,F);return Promise.resolve(v);},reset:function(p){return O.forEachObjectInStorage({storage:this.storage,reference:p.reference,layer:p.layer},function(f){if(s(p,f.changeDefinition)){return Promise.resolve(this.storage.removeItem(f.key)).then(function(){return{fileName:f.changeDefinition&&f.changeDefinition.fileName};});}}.bind(this)).then(function(r){return{response:r.filter(function(c){return!!c;})};});},remove:function(p){var k=O.createFlexObjectKey(p.flexObject);this.storage.removeItem(k);var r=this.storage.removeItem(k);return Promise.resolve(r);},loadFeatures:function(){return Promise.resolve({isKeyUser:true,isVariantSharingEnabled:true});},getFlexInfo:function(p){p.storage=this.storage;return O.getAllFlexObjects(p).then(function(f){return{isResetEnabled:f.length>0};});}});return b;});
sap.ui.predefine('sap/ui/fl/write/connectors/BaseConnector',[],function(){"use strict";var B={layers:[],write:function(){return Promise.reject("write is not implemented");},condense:function(){return Promise.reject("condense is not implemented");},update:function(){return Promise.reject("write is not implemented");},remove:function(){return Promise.reject("remove is not implemented");},reset:function(){return Promise.reject("reset is not implemented");},publish:function(){return Promise.reject("publish is not implemented");},getFlexInfo:function(){return Promise.resolve({});},getContexts:function(){return Promise.reject("getContexts is not implemented");},loadContextDescriptions:function(){return Promise.reject("loadContextDescriptions is not implemented");},isContextSharingEnabled:function(){return Promise.resolve(false);},loadFeatures:function(){return Promise.reject("loadFeatures is not implemented");},versions:{load:function(){return Promise.reject("versions.load is not implemented");},activate:function(){return Promise.reject("versions.activate is not implemented");},discardDraft:function(){return Promise.reject("versions.discardDraft is not implemented");}}};return B;},true);
sap.ui.predefine('sap/ui/model/base/ManagedObjectModel',['../json/JSONModel','../json/JSONPropertyBinding','../json/JSONListBinding','sap/ui/base/ManagedObject','sap/ui/base/ManagedObjectObserver','../Context','../ChangeReason',"sap/base/util/uid","sap/base/Log","sap/base/util/isPlainObject","sap/base/util/deepClone"],function(J,a,b,M,c,C,d,u,L,e,f){"use strict";var g="@custom",I="--";function _(n,o,A,O){var p=A.get(o)||[],q,r;for(var i=0;i<p.length;i++){q=p[i];if(!(q instanceof M)){continue;}r=true;if(O){n._oObserver.observe(q,{properties:true,aggregations:true});}else{n._oObserver.unobserve(q,{properties:true,aggregations:true});}var s=q.getMetadata().getAllAggregations();for(var K in s){_(n,q,s[K],O);}}if(r){var K=o.getId()+"/@"+A.name;if(O){if(!n._mObservedCount.aggregations[K]){n._mObservedCount.aggregations[K]=0;}n._mObservedCount.aggregations[K]++;}else{delete n._mObservedCount.aggregations[K];}}}function h(n){var s,i=n.length-1,p=[];while(!(n[i].node instanceof M)){if(s){p.splice(0,0,s);}s=n[i].path;i--;}return[n[i].node,n[i+1],p,s];}function j(o){var D="",p;var t=typeof o;if(o==null||(t!="object"&&t!="function")){D=o;}else if(e(o)){D=JSON.stringify(o);}else if(o instanceof M){D=o.getId();for(p in o.mProperties){D=D+"$"+j(o.mProperties[p]);}}else if(Array.isArray(o)){for(var i=0;o.length;i++){D=D+"$"+j(o);}}else{L.warning("Could not stringify object "+o);D="$";}return D;}var k=b.extend("sap.ui.model.base.ManagedObjectModelAggregationBinding",{constructor:function(){b.apply(this,arguments);this._getOriginOfManagedObjectModelBinding();},_mightBeAffectedByChangesInside:function(o){while(o){if(o.getParent()===this._oOriginMO){return true;}o=o.getParent();}return false;},getEntryKey:function(o){var O=o.getObject();if(O instanceof M){return O.getId();}return b.prototype.getEntryKey.apply(this,arguments);},getEntryData:function(o){var O=o.getObject();if(O instanceof M){return j(O);}return b.prototype.getEntryData.apply(this,arguments);},_getContexts:function(s,i){var S;if(this._oAggregation){var o=this._oOriginMO.getBinding(this._sMember);if(o){var n=o.getModel();S=n.iSizeLimit;}var B=this._oOriginMO.getBindingInfo(this._sMember);if(B&&s>=0&&i&&S&&i>S){var U=false;if(s!=B.startIndex){B.startIndex=s;U=true;}if(i!=B.length){B.length=i;U=true;}if(U){this._oAggregation.update(this._oOriginMO,"change");}}}return b.prototype._getContexts.apply(this,arguments);},_getOriginOfManagedObjectModelBinding:function(){if(!this._oOriginMO){var o=this.oModel,n=[];o._getObject(this.sPath,this.oContext,n);var v=h(n);this._oOriginMO=v[0];this._aPartsInJSON=v[2];this._sMember=v[3];this._oAggregation=this._oOriginMO.getMetadata().getAggregation(this._sMember);}},getLength:function(){if(this._aPartsInJSON.length==0){var i=this._oOriginMO.getBinding(this._sMember);if(i&&i.isA("sap.ui.model.ListBinding")){return i.getLength();}}return b.prototype.getLength.apply(this,arguments);},isLengthFinal:function(){if(this._aPartsInJSON.length==0){var i=this._oOriginMO.getBinding(this._sMember);if(i&&i.isA("sap.ui.model.ListBinding")){return i.isLengthFinal();}}return true;}});var l=a.extend("sap.ui.model.base.ManagedObjectModelPropertyBinding");var m=J.extend("sap.ui.model.base.ManagedObjectModel",{constructor:function(o,D){if(!D&&typeof D!="object"){D={};}D[g]={};this._oObject=o;this._mObservedCount={properties:{},aggregations:{}};this.mListBinding={};J.apply(this,[D]);this._oObserver=new c(this.observerChanges.bind(this));}});m.prototype.getAggregation=J.prototype.getProperty;m.prototype.setData=function(D,i){var n={};n[g]=D;J.prototype.setData.apply(this,[n,i]);};m.prototype.getJSON=function(){return JSON.stringify(this.oData[g]);};m.prototype.setProperty=function(p,v,o,A){var r=this.resolve(p,o),n,O,P;if(!r){return false;}if(r.indexOf("/"+g)===0){return J.prototype.setProperty.apply(this,arguments);}n=r.lastIndexOf("/");O=r.substring(0,n||1);P=r.substr(n+1);var N=[],q=this._getObject(O,null,N);if(q){if(q instanceof M){var s=q.getMetadata().getManagedProperty(P);if(s){if(s.get(q)!==v){s.set(q,v);var F=function(B){var p=this.resolve(B.sPath,B.oContext);return p?p.startsWith(r):false;}.bind(this);this.checkUpdate(false,A,F);return true;}}else{L.warning("The setProperty method only supports properties, the path "+r+" does not point to a property",null,"sap.ui.model.base.ManagedObjectModel");}}else if(q[P]!==v){var V=h(N);var t=f(V[1].node),w=V[2];var x=t;for(var i=0;i<w.length;i++){x=x[w[i]];}x[P]=v;var y="/"+P;if(w.length>0){y="/"+w.join("/")+y;}var D=r.lastIndexOf(y);var z=r.substr(0,D);return this.setProperty(z,t,o);}}return false;};m.prototype.addBinding=function(B){J.prototype.addBinding.apply(this,arguments);if(B instanceof k){var A=B.sPath.replace("/","");this.mListBinding[A]=B;}B.checkUpdate(false);};m.prototype.removeBinding=function(B){J.prototype.removeBinding.apply(this,arguments);if(B instanceof k){var A=B.sPath.replace("/","");delete this.mListBinding[A];}this._observeBeforeEvaluating(B,false);};m.prototype.firePropertyChange=function(p){if(p.reason===d.Binding){p.resolvedPath=this.resolve(p.path,p.context);}J.prototype.firePropertyChange.call(this,p);};m.prototype.bindAggregation=function(p,o,P){return J.prototype.bindProperty.apply(this,arguments);};m.prototype.bindProperty=function(p,o,P){var B=new l(this,p,o,P);return B;};m.prototype.bindList=function(p,o,s,F,P){var B=new k(this,p,o,s,F,P);return B;};m.prototype.getManagedObject=function(p,o){if(p instanceof C){o=p;p=o.getPath();}var O=this.getProperty(p,o);if(O instanceof M){return O;}return null;};m.prototype.getRootObject=function(){return this._oObject;};m.prototype._observePropertyChange=function(o,p){if(!o||!p){return;}var K=o.getId()+"/@"+p.name;if(!this._oObserver.isObserved(o,{properties:[p.name]})){this._oObserver.observe(o,{properties:[p.name]});this._mObservedCount.properties[K]=1;}else{this._mObservedCount.properties[K]++;}};m.prototype._unobservePropertyChange=function(o,p){if(!o||!p){return;}var K=o.getId()+"/@"+p.name;this._mObservedCount.properties[K]--;if(this._mObservedCount.properties[K]==0){this._oObserver.unobserve(o,{properties:[p.name]});delete this._mObservedCount.properties[K];}};m.prototype._observeAggregationChange=function(o,A){if(!o||!A){return;}var K=o.getId()+"/@"+A.name;if(!this._oObserver.isObserved(o,{aggregations:[A.name]})){this._oObserver.observe(o,{aggregations:[A.name]});this._mObservedCount.aggregations[K]=1;_(this,o,A,true);}else{this._mObservedCount.aggregations[K]++;}};m.prototype._unobserveAggregationChange=function(o,A){if(!o||!A){return;}var K=o.getId()+"/@"+A.name;this._mObservedCount.aggregations[K]--;if(this._mObservedCount.aggregations[K]==0){this._oObserver.unobserve(o,{aggregations:[A.name]});delete this._mObservedCount.aggregations[K];}};m.prototype._createId=function(i){var o=this._oObject;if(typeof o.createId==="function"){return o.createId(i);}if(!i){return o.getId()+I+u();}if(i.indexOf(o.getId()+I)!=0){return o.getId()+I+i;}return i;};m.prototype._getSpecialNode=function(n,s,p,P){if(n instanceof M){if(s==="className"){if(n.getMetadata){return n.getMetadata().getName();}else{return typeof n;}}else if(s==="id"){return n.getId();}else if(s==="metadataContexts"){return n._oProviderData;}}else if(s==="binding"&&p&&P){return p.getBinding(P);}else if(s==="bound"&&p&&P){return p.isBound(P);}else if(s==="bindingInfo"&&p&&P){return p.getBindingInfo(P);}else if(Array.isArray(n)){if(s==="length"){return n.length;}else if(s.indexOf("id=")===0){var o=s.substring(3),F=null;for(var i=0;i<n.length;i++){if(n[i].getId()===this._createId(o)||n[i].getId()===o){F=n[i];break;}}return F;}}return null;};m.prototype._getObject=function(p,o,n){var N=this._oObject,r="",t=this;if(n){n.push({path:"/",node:N});}this.aBindings.forEach(function(B){if(!B._bAttached){t._observeBeforeEvaluating(B,true);}});if(typeof p==="string"&&p.indexOf("/")!=0&&!o){return null;}if(o instanceof M){N=o;r=p;}else if(!o||o instanceof C){r=this.resolve(p,o);if(!r){return N;}if(r.indexOf("/"+g)===0){return J.prototype._getObject.apply(this,[p,o]);}}else{N=o;r=p;}if(!N){return null;}var P=r.split("/"),i=0;if(!P[0]){i++;}var q=null,s=null,v;while(N!==null&&P[i]){v=P[i];if(v=="id"){v="@id";}if(v.indexOf("@")===0){N=this._getSpecialNode(N,v.substring(1),q,s);}else if(N instanceof M){var w=N.getMetadata();if(w.isInstanceOf("sap.ui.core.IDScope")&&v.indexOf("#")===0){N=N.byId(v.substring(1));}else{q=N;s=v;var x=w.getManagedProperty(v);if(x){N=x.get(N);}else{var A=w.getManagedAggregation(v);if(A){N=A.get(N);}else{if(N&&N[v]&&typeof N[v]==="function"){N=N[v]();}else{N=null;}}}}}else if(Array.isArray(N)||e(N)){N=N[v];}else{if(N&&N[v]&&typeof N[v]==="function"){N=N[v]();}else{N=null;}}if(n){n.push({path:v,node:N});}i++;}return N;};m.prototype.destroy=function(){for(var n in this._mAggregationObjects){var o=this._mAggregationObjects[n];if(o.object.invalidate.fn){o.object.invalidate=o.object.invalidate.fn;}}J.prototype.destroy.apply(this,arguments);};m.prototype._observeBeforeEvaluating=function(B,o){if(!B.isResolved()){return;}var p=B.getPath();var i=B.getContext(),n=this._oObject,r;if(i instanceof M){n=i;r=p;}else if(!i||i instanceof C){r=this.resolve(p,i);if(!r){return;}if(r.indexOf("/"+g)===0){return;}}else{return;}var P=r.split("/");if(!P[0]){P.shift();}var s=P[0];if(n.getMetadata().isInstanceOf("sap.ui.core.IDScope")&&s.indexOf("#")===0){n=n.byId(s.substring(1));s=P[1];}if(n instanceof M){var N=n.getMetadata(),q=N.getManagedProperty(s);if(q){if(o===true){this._observePropertyChange(n,q);}else if(o===false){this._unobservePropertyChange(n,q);}}else{var A=N.getAggregation(s)||N.getAllPrivateAggregations()[s];if(A){if(o===true){this._observeAggregationChange(n,A);}else if(o===false){this._unobserveAggregationChange(n,A);}}}B._bAttached=o;}};m.prototype.observerChanges=function(o){if(o.type=="aggregation"){var A={};if(o.child instanceof M){A=o.child.getMetadata().getAllAggregations();}if(o.mutation=="insert"){if(o.child instanceof M){this._oObserver.observe(o.child,{properties:true,aggregations:true});}for(var K in A){_(this,o.child,A[K],true);}if(this.mListBinding[o.name]){var i=this._oObject.getBinding(o.name);var n=this._oObject.getAggregation(o.name);if(i&&i.getCurrentContexts().length!=n.length){return;}}}else{if(o.child instanceof M){this._oObserver.unobserve(o.child,{properties:true,aggregations:true});}for(var K in A){_(this,o.child,A[K],false);}}}else if(o.type==="property"){this.aBindings.forEach(function(B){if(B._mightBeAffectedByChangesInside&&B._mightBeAffectedByChangesInside(o.object)){B.checkUpdate(true);}});}this.checkUpdate();};m.prototype.checkUpdate=function(F,A,i){if(A){if(!this.sUpdateTimer){this.sUpdateTimer=setTimeout(function(){this.checkUpdate(F,false,i);}.bind(this),0);}return;}if(this.sUpdateTimer){clearTimeout(this.sUpdateTimer);this.sUpdateTimer=null;}var B=this.aBindings.slice(0);B.forEach(function(o){if(!i||i(o)){o.checkUpdate(F);}});};return m;});
/*!
 * @copyright@
 */
sap.ui.predefine('sap/fe/navigation/SelectionVariant',["./NavError","sap/ui/base/Object","sap/base/util/each","sap/base/Log"],function(N,B,e,L){"use strict";var S=B.extend("sap.fe.navigation.SelectionVariant",{_rVALIDATE_SIGN:new RegExp("[E|I]"),_rVALIDATE_OPTION:new RegExp("EQ|NE|LE|GE|LT|GT|BT|CP"),constructor:function(s){this._mParameters={};this._mSelectOptions={};this._sId="";if(s!==undefined){if(typeof s==="string"){this._parseFromString(s);}else if(typeof s==="object"){this._parseFromObject(s);}else{throw new N("SelectionVariant.INVALID_INPUT_TYPE");}}},getID:function(){return this._sId;},setID:function(i){this._sId=i;},setText:function(n){if(typeof n!=="string"){throw new N("SelectionVariant.INVALID_INPUT_TYPE");}this._sText=n;},getText:function(){return this._sText;},setParameterContextUrl:function(u){if(typeof u!=="string"){throw new N("SelectionVariant.INVALID_INPUT_TYPE");}this._sParameterCtxUrl=u;},getParameterContextUrl:function(){return this._sParameterCtxUrl;},getFilterContextUrl:function(){return this._sFilterCtxUrl;},setFilterContextUrl:function(u){if(typeof u!=="string"){throw new N("SelectionVariant.INVALID_INPUT_TYPE");}this._sFilterCtxUrl=u;},addParameter:function(n,v){if(typeof n!=="string"){throw new N("SelectionVariant.INVALID_INPUT_TYPE");}if(typeof v!=="string"){throw new N("SelectionVariant.INVALID_INPUT_TYPE");}if(n===""){throw new N("SelectionVariant.PARAMETER_WITHOUT_NAME");}if(this._mSelectOptions[n]){throw new N("SelectionVariant.PARAMETER_SELOPT_COLLISION");}this._mParameters[n]=v;return this;},removeParameter:function(n){if(typeof n!=="string"){throw new N("SelectionVariant.INVALID_INPUT_TYPE");}if(n===""){throw new N("SelectionVariant.PARAMETER_WITHOUT_NAME");}delete this._mParameters[n];return this;},renameParameter:function(n,s){if(typeof n!=="string"||typeof s!=="string"){throw new N("SelectionVariant.INVALID_INPUT_TYPE");}if(n===""||s===""){throw new N("SelectionVariant.PARAMETER_WITHOUT_NAME");}if(this._mParameters[n]!==undefined){if(this._mSelectOptions[s]){throw new N("SelectionVariant.PARAMETER_SELOPT_COLLISION");}if(this._mParameters[s]){throw new N("SelectionVariant.PARAMETER_COLLISION");}this._mParameters[s]=this._mParameters[n];delete this._mParameters[n];}return this;},getParameter:function(n){if(typeof n!=="string"){throw new N("SelectionVariant.INVALID_INPUT_TYPE");}return this._mParameters[n];},getParameterNames:function(){return Object.keys(this._mParameters);},addSelectOption:function(p,s,o,l,h){if(typeof p!=="string"){throw new N("SelectionVariant.INVALID_INPUT_TYPE");}if(p===""){throw new N("SelectionVariant.INVALID_PROPERTY_NAME");}if(typeof s!=="string"){throw new N("SelectionVariant.INVALID_INPUT_TYPE");}if(typeof o!=="string"){throw new N("SelectionVariant.INVALID_INPUT_TYPE");}if(typeof l!=="string"){throw new N("SelectionVariant.INVALID_INPUT_TYPE");}if(o==="BT"&&typeof h!=="string"){throw new N("SelectionVariant.INVALID_INPUT_TYPE");}if(!this._rVALIDATE_SIGN.test(s.toUpperCase())){throw new N("SelectionVariant.INVALID_SIGN");}if(!this._rVALIDATE_OPTION.test(o.toUpperCase())){throw new N("SelectionVariant.INVALID_OPTION");}if(this._mParameters[p]){throw new N("SelectionVariant.PARAMETER_SELOPT_COLLISION");}if(o!=="BT"){if(h!==undefined&&h!==""&&h!==null){throw new N("SelectionVariant.HIGH_PROVIDED_THOUGH_NOT_ALLOWED");}}if(this._mSelectOptions[p]===undefined){this._mSelectOptions[p]=[];}var E={Sign:s.toUpperCase(),Option:o.toUpperCase(),Low:l};if(o==="BT"){E.High=h;}else{E.High=null;}for(var i=0;i<this._mSelectOptions[p].length;i++){var a=this._mSelectOptions[p][i];if(a.Sign===E.Sign&&a.Option===E.Option&&a.Low===E.Low&&a.High===E.High){return this;}}this._mSelectOptions[p].push(E);return this;},removeSelectOption:function(n){if(typeof n!=="string"){throw new N("SelectionVariant.SELOPT_WRONG_TYPE");}if(n===""){throw new N("SelectionVariant.SELOPT_WITHOUT_NAME");}delete this._mSelectOptions[n];return this;},renameSelectOption:function(n,s){if(typeof n!=="string"||typeof s!=="string"){throw new N("SelectionVariant.SELOPT_WRONG_TYPE");}if(n===""||s===""){throw new N("SelectionVariant.SELOPT_WITHOUT_NAME");}if(this._mSelectOptions[n]!==undefined){if(this._mSelectOptions[s]){throw new N("SelectionVariant.SELOPT_COLLISION");}if(this._mParameters[s]){throw new N("SelectionVariant.PARAMETER_SELOPT_COLLISION");}this._mSelectOptions[s]=this._mSelectOptions[n];delete this._mSelectOptions[n];}return this;},getSelectOption:function(p){if(typeof p!=="string"){throw new N("SelectionVariant.INVALID_INPUT_TYPE");}if(p===""){throw new N("SelectionVariant.INVALID_PROPERTY_NAME");}var E=this._mSelectOptions[p];if(!E){return undefined;}return JSON.parse(JSON.stringify(E));},getSelectOptionsPropertyNames:function(){return Object.keys(this._mSelectOptions);},getPropertyNames:function(){return this.getParameterNames().concat(this.getSelectOptionsPropertyNames());},massAddSelectOption:function(p,s){if(!Array.isArray(s)){throw new N("SelectionVariant.INVALID_INPUT_TYPE");}for(var i=0;i<s.length;i++){var o=s[i];this.addSelectOption(p,o.Sign,o.Option,o.Low,o.High);}return this;},getValue:function(n){var v=this.getSelectOption(n);if(v!==undefined){return v;}var p=this.getParameter(n);if(p!==undefined){v=[{Sign:"I",Option:"EQ",Low:p,High:null}];return v;}return undefined;},isEmpty:function(){return this.getParameterNames().length===0&&this.getSelectOptionsPropertyNames().length===0;},toJSONObject:function(){var E={Version:{Major:"1",Minor:"0",Patch:"0"},SelectionVariantID:this._sId};if(this._sParameterCtxUrl){E.ParameterContextUrl=this._sParameterCtxUrl;}if(this._sFilterCtxUrl){E.FilterContextUrl=this._sFilterCtxUrl;}if(this._sText){E.Text=this._sText;}else{E.Text="Selection Variant with ID "+this._sId;}this._determineODataFilterExpression(E);this._serializeParameters(E);this._serializeSelectOptions(E);return E;},toJSONString:function(){return JSON.stringify(this.toJSONObject());},_determineODataFilterExpression:function(E){E.ODataFilterExpression="";},_serializeParameters:function(E){if(this._mParameters.length===0){return;}E.Parameters=[];e(this._mParameters,function(p,P){var o={PropertyName:p,PropertyValue:P};E.Parameters.push(o);});},_serializeSelectOptions:function(E){if(this._mSelectOptions.length===0){return;}E.SelectOptions=[];e(this._mSelectOptions,function(p,a){var s={PropertyName:p,Ranges:a};E.SelectOptions.push(s);});},_parseFromString:function(j){if(j===undefined){throw new N("SelectionVariant.UNABLE_TO_PARSE_INPUT");}if(typeof j!=="string"){throw new N("SelectionVariant.INVALID_INPUT_TYPE");}var i=JSON.parse(j);this._parseFromObject(i);},_parseFromObject:function(i){if(i.SelectionVariantID===undefined){L.warning("SelectionVariantID is not defined");i.SelectionVariantID="";}this.setID(i.SelectionVariantID);if(i.ParameterContextUrl!==undefined&&i.ParameterContextUrl!==""){this.setParameterContextUrl(i.ParameterContextUrl);}if(i.FilterContextUrl!==undefined&&i.FilterContextUrl!==""){this.setFilterContextUrl(i.FilterContextUrl);}if(i.Text!==undefined){this.setText(i.Text);}if(i.Parameters){this._parseFromStringParameters(i.Parameters);}if(i.SelectOptions){this._parseFromStringSelectOptions(i.SelectOptions);}},_parseFromStringParameters:function(p){e(p,function(i,E){this.addParameter(E.PropertyName,E.PropertyValue);}.bind(this));},_parseFromStringSelectOptions:function(s){e(s,function(i,o){if(!o.Ranges){L.warning("Select Option object does not contain a Ranges entry; ignoring entry");return true;}if(!Array.isArray(o.Ranges)){throw new N("SelectionVariant.SELECT_OPTION_RANGES_NOT_ARRAY");}e(o.Ranges,function(I,r){this.addSelectOption(o.PropertyName,r.Sign,r.Option,r.Low,r.High);}.bind(this));}.bind(this));}});return S;},true);
sap.ui.predefine('sap/ui/generic/app/navigation/service/SelectionVariant',["sap/fe/navigation/SelectionVariant","./NavError"],function(F,N){"use strict";var S=F.extend("sap.ui.generic.app.navigation.service.SelectionVariant",{constructor:function(s){try{F.apply(this,[s]);}catch(e){if(e){throw new N(e._sErrorCode);}}},getID:function(){return F.prototype.getID.apply(this);},setID:function(i){F.prototype.setID.apply(this,[i]);},setText:function(n){try{F.prototype.setText.apply(this,[n]);}catch(e){if(e){throw new N(e._sErrorCode);}}},getText:function(){return F.prototype.getText.apply(this);},setParameterContextUrl:function(u){try{F.prototype.setParameterContextUrl.apply(this,[u]);}catch(e){if(e){throw new N(e._sErrorCode);}}},getParameterContextUrl:function(){return F.prototype.getParameterContextUrl.apply(this);},getFilterContextUrl:function(){return F.prototype.getFilterContextUrl.apply(this);},setFilterContextUrl:function(u){try{F.prototype.setFilterContextUrl.apply(this,[u]);}catch(e){if(e){throw new N(e._sErrorCode);}}},addParameter:function(n,v){try{F.prototype.addParameter.apply(this,[n,v]);return this;}catch(e){if(e){throw new N(e._sErrorCode);}}},removeParameter:function(n){try{F.prototype.removeParameter.apply(this,[n]);return this;}catch(e){if(e){throw new N(e._sErrorCode);}}},renameParameter:function(n,s){try{F.prototype.renameParameter.apply(this,[n,s]);return this;}catch(e){if(e){throw new N(e._sErrorCode);}}},getParameter:function(n){try{return F.prototype.getParameter.apply(this,[n]);}catch(e){if(e){throw new N(e._sErrorCode);}}},getParameterNames:function(){return F.prototype.getParameterNames.apply(this);},addSelectOption:function(p,s,o,l,h){try{F.prototype.addSelectOption.apply(this,[p,s,o,l,h]);return this;}catch(e){if(e){throw new N(e._sErrorCode);}}},removeSelectOption:function(n){try{F.prototype.removeSelectOption.apply(this,[n]);return this;}catch(e){if(e){throw new N(e._sErrorCode);}}},renameSelectOption:function(n,s){try{F.prototype.renameSelectOption.apply(this,[n,s]);return this;}catch(e){if(e){throw new N(e._sErrorCode);}}},getSelectOption:function(p){try{return F.prototype.getSelectOption.apply(this,[p]);}catch(e){if(e){throw new N(e._sErrorCode);}}},getSelectOptionsPropertyNames:function(){return F.prototype.getSelectOptionsPropertyNames.apply(this);},getPropertyNames:function(){return F.prototype.getPropertyNames.apply(this);},massAddSelectOption:function(p,s){try{F.prototype.massAddSelectOption.apply(this,[p,s]);return this;}catch(e){if(e){throw new N(e._sErrorCode);}}},getValue:function(n){try{return F.prototype.getValue.apply(this,[n]);}catch(e){if(e){throw new N(e._sErrorCode);}}},isEmpty:function(){return F.prototype.isEmpty.apply(this);},toJSONObject:function(){return F.prototype.toJSONObject.apply(this);},toJSONString:function(){return F.prototype.toJSONString.apply(this);}});return S;},true);
/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash strict include="omit,uniq,uniqBy,uniqWith,intersection,intersectionBy,intersectionWith,pick,pickBy,debounce,throttle,max,min,castArray,curry,merge,mergeWith,toArray,xor,xorBy,xorWith,isNil,difference,differenceBy,differenceWith,flatMap,flatMapDeep,flatMapDepth,isEqual,isEqualWith,without,flatten,flattenDeep,flattenDepth,compact,zipObject,zipObjectDeep,union,unionBy,unionWith"`
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
sap.ui.predefine('sap/base/util/restricted/_/lodash.custom',function(){'use strict';var u;var V='4.17.20';var L=200;var F='Expected a function';var H='__lodash_hash_undefined__';var M=500;var P='__lodash_placeholder__';var C=1,a=2,b=4;var c=1,d=2;var W=1,f=2,g=4,h=8,i=16,j=32,k=64,l=128,m=256,o=512;var p=800,q=16;var I=1/0,r=9007199254740991,s=1.7976931348623157e+308,N=0/0;var t=4294967295;var w=[['ary',l],['bind',W],['bindKey',f],['curry',h],['curryRight',i],['flip',o],['partial',j],['partialRight',k],['rearg',m]];var v='[object Arguments]',x='[object Array]',y='[object AsyncFunction]',z='[object Boolean]',A='[object Date]',B='[object Error]',D='[object Function]',E='[object GeneratorFunction]',G='[object Map]',J='[object Number]',K='[object Null]',O='[object Object]',Q='[object Promise]',R='[object Proxy]',S='[object RegExp]',T='[object Set]',U='[object String]',X='[object Symbol]',Y='[object Undefined]',Z='[object WeakMap]';var $='[object ArrayBuffer]',_='[object DataView]',a1='[object Float32Array]',b1='[object Float64Array]',c1='[object Int8Array]',d1='[object Int16Array]',e1='[object Int32Array]',f1='[object Uint8Array]',g1='[object Uint8ClampedArray]',h1='[object Uint16Array]',i1='[object Uint32Array]';var j1=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,k1=/^\w*$/,l1=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var m1=/[\\^$.*+?()[\]{}|]/g;var n1=/^\s+|\s+$/g;var o1=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,p1=/\{\n\/\* \[wrapped with (.+)\] \*/,q1=/,? & /;var r1=/\\(\\)?/g;var s1=/\w*$/;var t1=/^[-+]0x[0-9a-f]+$/i;var u1=/^0b[01]+$/i;var v1=/^\[object .+?Constructor\]$/;var w1=/^0o[0-7]+$/i;var x1=/^(?:0|[1-9]\d*)$/;var y1='\\ud800-\\udfff',z1='\\u0300-\\u036f',A1='\\ufe20-\\ufe2f',B1='\\u20d0-\\u20ff',C1=z1+A1+B1,D1='\\ufe0e\\ufe0f';var E1='['+y1+']',F1='['+C1+']',G1='\\ud83c[\\udffb-\\udfff]',H1='(?:'+F1+'|'+G1+')',I1='[^'+y1+']',J1='(?:\\ud83c[\\udde6-\\uddff]){2}',K1='[\\ud800-\\udbff][\\udc00-\\udfff]',L1='\\u200d';var M1=H1+'?',N1='['+D1+']?',O1='(?:'+L1+'(?:'+[I1,J1,K1].join('|')+')'+N1+M1+')*',P1=N1+M1+O1,Q1='(?:'+[I1+F1+'?',F1,J1,K1,E1].join('|')+')';var R1=RegExp(G1+'(?='+G1+')|'+Q1+P1,'g');var S1=RegExp('['+L1+y1+C1+D1+']');var T1={};T1[a1]=T1[b1]=T1[c1]=T1[d1]=T1[e1]=T1[f1]=T1[g1]=T1[h1]=T1[i1]=true;T1[v]=T1[x]=T1[$]=T1[z]=T1[_]=T1[A]=T1[B]=T1[D]=T1[G]=T1[J]=T1[O]=T1[S]=T1[T]=T1[U]=T1[Z]=false;var U1={};U1[v]=U1[x]=U1[$]=U1[_]=U1[z]=U1[A]=U1[a1]=U1[b1]=U1[c1]=U1[d1]=U1[e1]=U1[G]=U1[J]=U1[O]=U1[S]=U1[T]=U1[U]=U1[X]=U1[f1]=U1[g1]=U1[h1]=U1[i1]=true;U1[B]=U1[D]=U1[Z]=false;var V1=parseInt;var W1=typeof global=='object'&&global&&global.Object===Object&&global;var X1=typeof self=='object'&&self&&self.Object===Object&&self;var Y1=W1||X1||Function('return this')();var Z1=typeof exports=='object'&&exports&&!exports.nodeType&&exports;var $1=Z1&&typeof module=='object'&&module&&!module.nodeType&&module;var _1=$1&&$1.exports===Z1;var a2=_1&&W1.process;var b2=(function(){try{var n=$1&&$1.require&&$1.require('util').types;if(n){return n;}return a2&&a2.binding&&a2.binding('util');}catch(e){}}());var c2=b2&&b2.isMap,d2=b2&&b2.isSet,e2=b2&&b2.isTypedArray;function f2(e,n,Y6){switch(Y6.length){case 0:return e.call(n);case 1:return e.call(n,Y6[0]);case 2:return e.call(n,Y6[0],Y6[1]);case 3:return e.call(n,Y6[0],Y6[1],Y6[2]);}return e.apply(n,Y6);}function g2(e,H7){var n=-1,Y6=e==null?0:e.length;while(++n<Y6){if(H7(e[n],n,e)===false){break;}}return e;}function h2(e,n){var Y6=-1,O7=e==null?0:e.length,P7=0,Q7=[];while(++Y6<O7){var R7=e[Y6];if(n(R7,Y6,e)){Q7[P7++]=R7;}}return Q7;}function i2(e,n){var Y6=e==null?0:e.length;return!!Y6&&p2(e,n,0)>-1;}function j2(e,n,Y6){var O7=-1,P7=e==null?0:e.length;while(++O7<P7){if(Y6(n,e[O7])){return true;}}return false;}function k2(e,H7){var n=-1,Y6=e==null?0:e.length,O7=Array(Y6);while(++n<Y6){O7[n]=H7(e[n],n,e);}return O7;}function l2(e,E7){var n=-1,Y6=E7.length,O7=e.length;while(++n<Y6){e[O7+n]=E7[n];}return e;}function m2(e,n){var Y6=-1,O7=e==null?0:e.length;while(++Y6<O7){if(n(e[Y6],Y6,e)){return true;}}return false;}function n2(e){return e.split('');}function o2(e,n,Y6,O7){var P7=e.length,Q7=Y6+(O7?1:-1);while((O7?Q7--:++Q7<P7)){if(n(e[Q7],Q7,e)){return Q7;}}return-1;}function p2(e,n,Y6){return n===n?E2(e,n,Y6):o2(e,q2,Y6);}function q2(e){return e!==e;}function r2(e){return function(n){return n==null?u:n[e];};}function s2(n,H7){var e=-1,Y6=Array(n);while(++e<n){Y6[e]=H7(e);}return Y6;}function t2(e){return function(n){return e(n);};}function u2(e,n){return k2(n,function(Y6){return e[Y6];});}function v2(e,n){return e.has(n);}function w2(e,n){var Y6=e.length,O7=0;while(Y6--){if(e[Y6]===n){++O7;}}return O7;}function x2(e,n){return e==null?u:e[n];}function y2(e){return S1.test(e);}function z2(e){var n,Y6=[];while(!(n=e.next()).done){Y6.push(n.value);}return Y6;}function A2(R6){var e=-1,n=Array(R6.size);R6.forEach(function(Y6,O7){n[++e]=[O7,Y6];});return n;}function B2(e,n){return function(Y6){return e(n(Y6));};}function C2(e,n){var Y6=-1,O7=e.length,P7=0,Q7=[];while(++Y6<O7){var R7=e[Y6];if(R7===n||R7===P){e[Y6]=P;Q7[P7++]=Y6;}}return Q7;}function D2(e){var n=-1,Y6=Array(e.size);e.forEach(function(O7){Y6[++n]=O7;});return Y6;}function E2(e,n,Y6){var O7=Y6-1,P7=e.length;while(++O7<P7){if(e[O7]===n){return O7;}}return-1;}function F2(e){return y2(e)?G2(e):n2(e);}function G2(e){return e.match(R1)||[];}var H2=Array.prototype,I2=Function.prototype,J2=Object.prototype;var K2=Y1['__core-js_shared__'];var L2=I2.toString;var M2=J2.hasOwnProperty;var N2=(function(){var e=/[^.]+$/.exec(K2&&K2.keys&&K2.keys.IE_PROTO||'');return e?('Symbol(src)_1.'+e):'';}());var O2=J2.toString;var P2=L2.call(Object);var Q2=RegExp('^'+L2.call(M2).replace(m1,'\\$&').replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,'$1.*?')+'$');var R2=_1?Y1.Buffer:u,S2=Y1.Symbol,T2=Y1.Uint8Array,U2=R2?R2.allocUnsafe:u,V2=B2(Object.getPrototypeOf,Object),W2=Object.create,X2=J2.propertyIsEnumerable,Y2=H2.splice,Z2=S2?S2.isConcatSpreadable:u,$2=S2?S2.iterator:u,_2=S2?S2.toStringTag:u;var a3=(function(){try{var n=I5(Object,'defineProperty');n({},'',{});return n;}catch(e){}}());var b3=Object.getOwnPropertySymbols,c3=R2?R2.isBuffer:u,d3=B2(Object.keys,Object),e3=Math.max,f3=Math.min,g3=Date.now;var h3=I5(Y1,'DataView'),i3=I5(Y1,'Map'),j3=I5(Y1,'Promise'),k3=I5(Y1,'Set'),l3=I5(Y1,'WeakMap'),m3=I5(Object,'create');var n3=l3&&new l3;var o3={};var p3=p6(h3),q3=p6(i3),r3=p6(j3),s3=p6(k3),t3=p6(l3);var u3=S2?S2.prototype:u,v3=u3?u3.valueOf:u,w3=u3?u3.toString:u;function x3(){}var y3=(function(){function e(){}return function(n){if(!g7(n)){return{};}if(W2){return W2(n);}e.prototype=n;var Y6=new e;e.prototype=u;return Y6;};}());function z3(){}function A3(e){this.__wrapped__=e;this.__actions__=[];this.__dir__=1;this.__filtered__=false;this.__iteratees__=[];this.__takeCount__=t;this.__views__=[];}A3.prototype=y3(z3.prototype);A3.prototype.constructor=A3;function B3(e){var n=-1,Y6=e==null?0:e.length;this.clear();while(++n<Y6){var O7=e[n];this.set(O7[0],O7[1]);}}function C3(){this.__data__=m3?m3(null):{};this.size=0;}function D3(e){var n=this.has(e)&&delete this.__data__[e];this.size-=n?1:0;return n;}function E3(e){var n=this.__data__;if(m3){var Y6=n[e];return Y6===H?u:Y6;}return M2.call(n,e)?n[e]:u;}function F3(e){var n=this.__data__;return m3?(n[e]!==u):M2.call(n,e);}function G3(e,n){var Y6=this.__data__;this.size+=this.has(e)?0:1;Y6[e]=(m3&&n===u)?H:n;return this;}B3.prototype.clear=C3;B3.prototype['delete']=D3;B3.prototype.get=E3;B3.prototype.has=F3;B3.prototype.set=G3;function H3(e){var n=-1,Y6=e==null?0:e.length;this.clear();while(++n<Y6){var O7=e[n];this.set(O7[0],O7[1]);}}function I3(){this.__data__=[];this.size=0;}function J3(e){var n=this.__data__,Y6=d4(n,e);if(Y6<0){return false;}var O7=n.length-1;if(Y6==O7){n.pop();}else{Y2.call(n,Y6,1);}--this.size;return true;}function K3(e){var n=this.__data__,Y6=d4(n,e);return Y6<0?u:n[Y6][1];}function L3(e){return d4(this.__data__,e)>-1;}function M3(e,n){var Y6=this.__data__,O7=d4(Y6,e);if(O7<0){++this.size;Y6.push([e,n]);}else{Y6[O7][1]=n;}return this;}H3.prototype.clear=I3;H3.prototype['delete']=J3;H3.prototype.get=K3;H3.prototype.has=L3;H3.prototype.set=M3;function N3(e){var n=-1,Y6=e==null?0:e.length;this.clear();while(++n<Y6){var O7=e[n];this.set(O7[0],O7[1]);}}function O3(){this.size=0;this.__data__={'hash':new B3,'map':new(i3||H3),'string':new B3};}function P3(e){var n=G5(this,e)['delete'](e);this.size-=n?1:0;return n;}function Q3(e){return G5(this,e).get(e);}function R3(e){return G5(this,e).has(e);}function S3(e,n){var Y6=G5(this,e),O7=Y6.size;Y6.set(e,n);this.size+=Y6.size==O7?0:1;return this;}N3.prototype.clear=O3;N3.prototype['delete']=P3;N3.prototype.get=Q3;N3.prototype.has=R3;N3.prototype.set=S3;function T3(E7){var e=-1,n=E7==null?0:E7.length;this.__data__=new N3;while(++e<n){this.add(E7[e]);}}function U3(e){this.__data__.set(e,H);return this;}function V3(e){return this.__data__.has(e);}T3.prototype.add=T3.prototype.push=U3;T3.prototype.has=V3;function W3(e){var n=this.__data__=new H3(e);this.size=n.size;}function X3(){this.__data__=new H3;this.size=0;}function Y3(e){var n=this.__data__,Y6=n['delete'](e);this.size=n.size;return Y6;}function Z3(e){return this.__data__.get(e);}function $3(e){return this.__data__.has(e);}function _3(e,n){var Y6=this.__data__;if(Y6 instanceof H3){var O7=Y6.__data__;if(!i3||(O7.length<L-1)){O7.push([e,n]);this.size=++Y6.size;return this;}Y6=this.__data__=new N3(O7);}Y6.set(e,n);this.size=Y6.size;return this;}W3.prototype.clear=X3;W3.prototype['delete']=Y3;W3.prototype.get=Z3;W3.prototype.has=$3;W3.prototype.set=_3;function a4(e,n){var Y6=$6(e),O7=!Y6&&Z6(e),P7=!Y6&&!O7&&b7(e),Q7=!Y6&&!O7&&!P7&&o7(e),R7=Y6||O7||P7||Q7,S7=R7?s2(e.length,String):[],T7=S7.length;for(var U7 in e){if((n||M2.call(e,U7))&&!(R7&&(U7=='length'||(P7&&(U7=='offset'||U7=='parent'))||(Q7&&(U7=='buffer'||U7=='byteLength'||U7=='byteOffset'))||U5(U7,T7)))){S7.push(U7);}}return S7;}function b4(e,n,Y6){if((Y6!==u&&!eq(e[n],Y6))||(Y6===u&&!(n in e))){g4(e,n,Y6);}}function c4(e,n,Y6){var O7=e[n];if(!(M2.call(e,n)&&eq(O7,Y6))||(Y6===u&&!(n in e))){g4(e,n,Y6);}}function d4(e,n){var Y6=e.length;while(Y6--){if(eq(e[Y6][0],n)){return Y6;}}return-1;}function e4(e,n){return e&&h5(n,x7(n),e);}function f4(e,n){return e&&h5(n,y7(n),e);}function g4(e,n,Y6){if(n=='__proto__'&&a3){a3(e,n,{'configurable':true,'enumerable':true,'value':Y6,'writable':true});}else{e[n]=Y6;}}function h4(e,n,Y6,O7,P7,Q7){var R7,S7=n&C,T7=n&a,U7=n&b;if(Y6){R7=P7?Y6(e,O7,P7,Q7):Y6(e);}if(R7!==u){return R7;}if(!g7(e)){return e;}var V7=$6(e);if(V7){R7=P5(e);if(!S7){return g5(e,R7);}}else{var W7=M5(e),X7=W7==D||W7==E;if(b7(e)){return $4(e,S7);}if(W7==O||W7==v||(X7&&!P7)){R7=(T7||X7)?{}:Q5(e);if(!S7){return T7?j5(e,f4(R7,e)):i5(e,e4(R7,e));}}else{if(!U1[W7]){return P7?e:{};}R7=R5(e,W7,S7);}}Q7||(Q7=new W3);var Y7=Q7.get(e);if(Y7){return Y7;}Q7.set(e,R7);if(l7(e)){e.forEach(function(_7){R7.add(h4(_7,n,Y6,_7,e,Q7));});}else if(i7(e)){e.forEach(function(_7,O7){R7.set(O7,h4(_7,n,Y6,O7,e,Q7));});}var Z7=U7?(T7?B5:A5):(T7?y7:x7);var $7=V7?u:Z7(e);g2($7||e,function(_7,O7){if($7){O7=_7;_7=e[O7];}c4(R7,O7,h4(_7,n,Y6,O7,e,Q7));});return R7;}function i4(e,E7,H7,n){var Y6=-1,O7=i2,P7=true,Q7=e.length,R7=[],S7=E7.length;if(!Q7){return R7;}if(H7){E7=k2(E7,t2(H7));}if(n){O7=j2;P7=false;}else if(E7.length>=L){O7=v2;P7=false;E7=new T3(E7);}outer:while(++Y6<Q7){var T7=e[Y6],U7=H7==null?T7:H7(T7);T7=(n||T7!==0)?T7:0;if(P7&&U7===U7){var V7=S7;while(V7--){if(E7[V7]===U7){continue outer;}}R7.push(T7);}else if(!O7(E7,U7,n)){R7.push(T7);}}return R7;}var j4=l5(n4);function k4(e,H7,n){var Y6=-1,O7=e.length;while(++Y6<O7){var P7=e[Y6],Q7=H7(P7);if(Q7!=null&&(R7===u?(Q7===Q7&&!n7(Q7)):n(Q7,R7))){var R7=Q7,S7=P7;}}return S7;}function l4(e,n,Y6,O7,P7){var Q7=-1,R7=e.length;Y6||(Y6=T5);P7||(P7=[]);while(++Q7<R7){var S7=e[Q7];if(n>0&&Y6(S7)){if(n>1){l4(S7,n-1,Y6,O7,P7);}else{l2(P7,S7);}}else if(!O7){P7[P7.length]=S7;}}return P7;}var m4=m5();function n4(e,H7){return e&&m4(e,H7,x7);}function o4(e,n){n=Z4(n,e);var Y6=0,O7=n.length;while(e!=null&&Y6<O7){e=e[o6(n[Y6++])];}return(Y6&&Y6==O7)?e:u;}function p4(e,n,Y6){var O7=n(e);return $6(e)?O7:l2(O7,Y6(e));}function q4(e){if(e==null){return e===u?Y:K;}return(_2&&_2 in Object(e))?J5(e):e6(e);}function r4(e,n){return e>n;}function s4(e,n){return e!=null&&n in Object(e);}function t4(e,H7,n){var Y6=n?j2:i2,O7=e[0].length,P7=e.length,Q7=P7,R7=Array(P7),S7=Infinity,T7=[];while(Q7--){var U7=e[Q7];if(Q7&&H7){U7=k2(U7,t2(H7));}S7=f3(U7.length,S7);R7[Q7]=!n&&(H7||(O7>=120&&U7.length>=120))?new T3(Q7&&U7):u;}U7=e[0];var V7=-1,W7=R7[0];outer:while(++V7<O7&&T7.length<S7){var X7=U7[V7],Y7=H7?H7(X7):X7;X7=(n||X7!==0)?X7:0;if(!(W7?v2(W7,Y7):Y6(T7,Y7,n))){Q7=P7;while(--Q7){var Z7=R7[Q7];if(!(Z7?v2(Z7,Y7):Y6(e[Q7],Y7,n))){continue outer;}}if(W7){W7.push(Y7);}T7.push(X7);}}return T7;}function u4(e){return h7(e)&&q4(e)==v;}function v4(e,n,Y6,O7,P7){if(e===n){return true;}if(e==null||n==null||(!h7(e)&&!h7(n))){return e!==e&&n!==n;}return w4(e,n,Y6,O7,v4,P7);}function w4(e,n,Y6,O7,P7,Q7){var R7=$6(e),S7=$6(n),T7=R7?x:M5(e),U7=S7?x:M5(n);T7=T7==v?O:T7;U7=U7==v?O:U7;var V7=T7==O,W7=U7==O,X7=T7==U7;if(X7&&b7(e)){if(!b7(n)){return false;}R7=true;V7=false;}if(X7&&!V7){Q7||(Q7=new W3);return(R7||o7(e))?w5(e,n,Y6,O7,P7,Q7):x5(e,n,T7,Y6,O7,P7,Q7);}if(!(Y6&c)){var Y7=V7&&M2.call(e,'__wrapped__'),Z7=W7&&M2.call(n,'__wrapped__');if(Y7||Z7){var $7=Y7?e.value():e,_7=Z7?n.value():n;Q7||(Q7=new W3);return P7($7,_7,Y6,O7,Q7);}}if(!X7){return false;}Q7||(Q7=new W3);return y5(e,n,Y6,O7,P7,Q7);}function x4(e){return h7(e)&&M5(e)==G;}function y4(e,n,Y6,O7){var P7=Y6.length,Q7=P7,R7=!O7;if(e==null){return!Q7;}e=Object(e);while(P7--){var S7=Y6[P7];if((R7&&S7[2])?S7[1]!==e[S7[0]]:!(S7[0]in e)){return false;}}while(++P7<Q7){S7=Y6[P7];var T7=S7[0],U7=e[T7],V7=S7[1];if(R7&&S7[2]){if(U7===u&&!(T7 in e)){return false;}}else{var W7=new W3;if(O7){var X7=O7(U7,V7,T7,e,n,W7);}if(!(X7===u?v4(V7,U7,c|d,O7,W7):X7)){return false;}}}return true;}function z4(e){if(!g7(e)||Z5(e)){return false;}var n=e7(e)?Q2:v1;return n.test(p6(e));}function A4(e){return h7(e)&&M5(e)==T;}function B4(e){return h7(e)&&f7(e.length)&&!!T1[q4(e)];}function C4(e){if(typeof e=='function'){return e;}if(e==null){return G7;}if(typeof e=='object'){return $6(e)?I4(e[0],e[1]):H4(e);}return J7(e);}function D4(e){if(!$5(e)){return d3(e);}var n=[];for(var Y6 in Object(e)){if(M2.call(e,Y6)&&Y6!='constructor'){n.push(Y6);}}return n;}function E4(e){if(!g7(e)){return d6(e);}var n=$5(e),Y6=[];for(var O7 in e){if(!(O7=='constructor'&&(n||!M2.call(e,O7)))){Y6.push(O7);}}return Y6;}function F4(e,n){return e<n;}function G4(e,H7){var n=-1,Y6=_6(e)?Array(e.length):[];j4(e,function(O7,P7,e){Y6[++n]=H7(O7,P7,e);});return Y6;}function H4(e){var n=H5(e);if(n.length==1&&n[0][2]){return a6(n[0][0],n[0][1]);}return function(Y6){return Y6===e||y4(Y6,e,n);};}function I4(e,n){if(W5(e)&&_5(n)){return a6(o6(e),n);}return function(Y6){var O7=v7(Y6,e);return(O7===u&&O7===n)?w7(Y6,e):v4(n,O7,c|d);};}function J4(e,n,Y6,O7,P7){if(e===n){return;}m4(n,function(Q7,R7){P7||(P7=new W3);if(g7(Q7)){K4(e,n,R7,Y6,J4,O7,P7);}else{var S7=O7?O7(i6(e,R7),Q7,(R7+''),e,n,P7):u;if(S7===u){S7=Q7;}b4(e,R7,S7);}},y7);}function K4(e,n,Y6,O7,P7,Q7,R7){var S7=i6(e,Y6),T7=i6(n,Y6),U7=R7.get(T7);if(U7){b4(e,Y6,U7);return;}var V7=Q7?Q7(S7,T7,(Y6+''),e,n,R7):u;var W7=V7===u;if(W7){var X7=$6(T7),Y7=!X7&&b7(T7),Z7=!X7&&!Y7&&o7(T7);V7=T7;if(X7||Y7||Z7){if($6(S7)){V7=S7;}else if(a7(S7)){V7=g5(S7);}else if(Y7){W7=false;V7=$4(T7,true);}else if(Z7){W7=false;V7=d5(T7,true);}else{V7=[];}}else if(k7(T7)||Z6(T7)){V7=S7;if(Z6(S7)){V7=t7(S7);}else if(!g7(S7)||e7(S7)){V7=Q5(T7);}}else{W7=false;}}if(W7){R7.set(T7,V7);P7(V7,T7,O7,Q7,R7);R7['delete'](T7);}b4(e,Y6,V7);}function L4(e,n){return M4(e,n,function(Y6,O7){return w7(e,O7);});}function M4(e,n,Y6){var O7=-1,P7=n.length,Q7={};while(++O7<P7){var R7=n[O7],S7=o4(e,R7);if(Y6(S7,R7)){P4(Q7,Z4(R7,e),S7);}}return Q7;}function N4(e){return function(n){return o4(n,e);};}function O4(e,n){return k6(f6(e,n,G7),e+'');}function P4(e,n,Y6,O7){if(!g7(e)){return e;}n=Z4(n,e);var P7=-1,Q7=n.length,R7=Q7-1,S7=e;while(S7!=null&&++P7<Q7){var T7=o6(n[P7]),U7=Y6;if(T7==='__proto__'||T7==='constructor'||T7==='prototype'){return e;}if(P7!=R7){var V7=S7[T7];U7=O7?O7(V7,T7,S7):u;if(U7===u){U7=g7(V7)?V7:(U5(n[P7+1])?[]:{});}}c4(S7,T7,U7);S7=S7[T7];}return e;}var Q4=!n3?G7:function(e,n){n3.set(e,n);return e;};var R4=!a3?G7:function(e,n){return a3(e,'toString',{'configurable':true,'enumerable':false,'value':F7(n),'writable':true});};function S4(e,n,Y6){var O7=-1,P7=e.length;if(n<0){n=-n>P7?0:(P7+n);}Y6=Y6>P7?P7:Y6;if(Y6<0){Y6+=P7;}P7=n>Y6?0:((Y6-n)>>>0);n>>>=0;var Q7=Array(P7);while(++O7<P7){Q7[O7]=e[O7+n];}return Q7;}function T4(e){if(typeof e=='string'){return e;}if($6(e)){return k2(e,T4)+'';}if(n7(e)){return w3?w3.call(e):'';}var n=(e+'');return(n=='0'&&(1/e)==-I)?'-0':n;}function U4(e,H7,n){var Y6=-1,O7=i2,P7=e.length,Q7=true,R7=[],S7=R7;if(n){Q7=false;O7=j2;}else if(P7>=L){var T7=H7?null:t5(e);if(T7){return D2(T7);}Q7=false;O7=v2;S7=new T3;}else{S7=H7?[]:R7;}outer:while(++Y6<P7){var U7=e[Y6],V7=H7?H7(U7):U7;U7=(n||U7!==0)?U7:0;if(Q7&&V7===V7){var W7=S7.length;while(W7--){if(S7[W7]===V7){continue outer;}}if(H7){S7.push(V7);}R7.push(U7);}else if(!O7(S7,V7,n)){if(S7!==R7){S7.push(V7);}R7.push(U7);}}return R7;}function V4(e,n){n=Z4(n,e);e=g6(e,n);return e==null||delete e[o6(B6(n))];}function W4(e,H7,n){var Y6=e.length;if(Y6<2){return Y6?U4(e[0]):[];}var O7=-1,P7=Array(Y6);while(++O7<Y6){var Q7=e[O7],R7=-1;while(++R7<Y6){if(R7!=O7){P7[O7]=i4(P7[O7]||Q7,e[R7],H7,n);}}}return U4(l4(P7,1),H7,n);}function X4(e,E7,n){var Y6=-1,O7=e.length,P7=E7.length,Q7={};while(++Y6<O7){var R7=Y6<P7?E7[Y6]:u;n(Q7,e[Y6],R7);}return Q7;}function Y4(e){return a7(e)?e:[];}function Z4(e,n){if($6(e)){return e;}return W5(e,n)?[e]:n6(u7(e));}function $4(e,n){if(n){return e.slice();}var Y6=e.length,O7=U2?U2(Y6):new e.constructor(Y6);e.copy(O7);return O7;}function _4(e){var n=new e.constructor(e.byteLength);new T2(n).set(new T2(e));return n;}function a5(e,n){var Y6=n?_4(e.buffer):e.buffer;return new e.constructor(Y6,e.byteOffset,e.byteLength);}function b5(e){var n=new e.constructor(e.source,s1.exec(e));n.lastIndex=e.lastIndex;return n;}function c5(e){return v3?Object(v3.call(e)):{};}function d5(e,n){var Y6=n?_4(e.buffer):e.buffer;return new e.constructor(Y6,e.byteOffset,e.length);}function e5(e,n,Y6,O7){var P7=-1,Q7=e.length,R7=Y6.length,S7=-1,T7=n.length,U7=e3(Q7-R7,0),V7=Array(T7+U7),W7=!O7;while(++S7<T7){V7[S7]=n[S7];}while(++P7<R7){if(W7||P7<Q7){V7[Y6[P7]]=e[P7];}}while(U7--){V7[S7++]=e[P7++];}return V7;}function f5(e,n,Y6,O7){var P7=-1,Q7=e.length,R7=-1,S7=Y6.length,T7=-1,U7=n.length,V7=e3(Q7-S7,0),W7=Array(V7+U7),X7=!O7;while(++P7<V7){W7[P7]=e[P7];}var Y7=P7;while(++T7<U7){W7[Y7+T7]=n[T7];}while(++R7<S7){if(X7||P7<Q7){W7[Y7+Y6[R7]]=e[P7++];}}return W7;}function g5(e,n){var Y6=-1,O7=e.length;n||(n=Array(O7));while(++Y6<O7){n[Y6]=e[Y6];}return n;}function h5(e,n,Y6,O7){var P7=!Y6;Y6||(Y6={});var Q7=-1,R7=n.length;while(++Q7<R7){var S7=n[Q7];var T7=O7?O7(Y6[S7],e[S7],S7,Y6,e):u;if(T7===u){T7=e[S7];}if(P7){g4(Y6,S7,T7);}else{c4(Y6,S7,T7);}}return Y6;}function i5(e,n){return h5(e,K5(e),n);}function j5(e,n){return h5(e,L5(e),n);}function k5(e){return O4(function(n,Y6){var O7=-1,P7=Y6.length,Q7=P7>1?Y6[P7-1]:u,R7=P7>2?Y6[2]:u;Q7=(e.length>3&&typeof Q7=='function')?(P7--,Q7):u;if(R7&&V5(Y6[0],Y6[1],R7)){Q7=P7<3?u:Q7;P7=1;}n=Object(n);while(++O7<P7){var S7=Y6[O7];if(S7){e(n,S7,O7,Q7);}}return n;});}function l5(e,n){return function(Y6,H7){if(Y6==null){return Y6;}if(!_6(Y6)){return e(Y6,H7);}var O7=Y6.length,P7=n?O7:-1,Q7=Object(Y6);while((n?P7--:++P7<O7)){if(H7(Q7[P7],P7,Q7)===false){break;}}return Y6;};}function m5(e){return function(n,H7,Y6){var O7=-1,P7=Object(n),Q7=Y6(n),R7=Q7.length;while(R7--){var S7=Q7[e?R7:++O7];if(H7(P7[S7],S7,P7)===false){break;}}return n;};}function n5(e,n,Y6){var O7=n&W,P7=o5(e);function Q7(){var fn=(this&&this!==Y1&&this instanceof Q7)?P7:e;return fn.apply(O7?Y6:this,arguments);}return Q7;}function o5(e){return function(){var n=arguments;switch(n.length){case 0:return new e;case 1:return new e(n[0]);case 2:return new e(n[0],n[1]);case 3:return new e(n[0],n[1],n[2]);case 4:return new e(n[0],n[1],n[2],n[3]);case 5:return new e(n[0],n[1],n[2],n[3],n[4]);case 6:return new e(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new e(n[0],n[1],n[2],n[3],n[4],n[5],n[6]);}var Y6=y3(e.prototype),O7=e.apply(Y6,n);return g7(O7)?O7:Y6;};}function p5(e,n,Y6){var O7=o5(e);function P7(){var Q7=arguments.length,R7=Array(Q7),S7=Q7,T7=E5(P7);while(S7--){R7[S7]=arguments[S7];}var U7=(Q7<3&&R7[0]!==T7&&R7[Q7-1]!==T7)?[]:C2(R7,T7);Q7-=U7.length;if(Q7<Y6){return s5(e,n,q5,P7.placeholder,u,R7,U7,u,u,Y6-Q7);}var fn=(this&&this!==Y1&&this instanceof P7)?O7:e;return f2(fn,this,R7);}return P7;}function q5(e,n,Y6,O7,P7,Q7,R7,S7,T7,U7){var V7=n&l,W7=n&W,X7=n&f,Y7=n&(h|i),Z7=n&o,$7=X7?u:o5(e);function _7(){var a8=arguments.length,b8=Array(a8),c8=a8;while(c8--){b8[c8]=arguments[c8];}if(Y7){var d8=E5(_7),e8=w2(b8,d8);}if(O7){b8=e5(b8,O7,P7,Y7);}if(Q7){b8=f5(b8,Q7,R7,Y7);}a8-=e8;if(Y7&&a8<U7){var f8=C2(b8,d8);return s5(e,n,q5,_7.placeholder,Y6,b8,f8,S7,T7,U7-a8);}var g8=W7?Y6:this,fn=X7?g8[e]:e;a8=b8.length;if(S7){b8=h6(b8,S7);}else if(Z7&&a8>1){b8.reverse();}if(V7&&T7<a8){b8.length=T7;}if(this&&this!==Y1&&this instanceof _7){fn=$7||o5(fn);}return fn.apply(g8,b8);}return _7;}function r5(e,n,Y6,O7){var P7=n&W,Q7=o5(e);function R7(){var S7=-1,T7=arguments.length,U7=-1,V7=O7.length,W7=Array(V7+T7),fn=(this&&this!==Y1&&this instanceof R7)?Q7:e;while(++U7<V7){W7[U7]=O7[U7];}while(T7--){W7[U7++]=arguments[++S7];}return f2(fn,P7?Y6:this,W7);}return R7;}function s5(e,n,Y6,O7,P7,Q7,R7,S7,T7,U7){var V7=n&h,W7=V7?R7:u,X7=V7?u:R7,Y7=V7?Q7:u,Z7=V7?u:Q7;n|=(V7?j:k);n&=~(V7?k:j);if(!(n&g)){n&=~(W|f);}var $7=[e,n,P7,Y7,W7,Z7,X7,S7,T7,U7];var _7=Y6.apply(u,$7);if(Y5(e)){j6(_7,$7);}_7.placeholder=O7;return l6(_7,e,n);}var t5=!(k3&&(1/D2(new k3([,-0]))[1])==I)?I7:function(E7){return new k3(E7);};function u5(e,n,Y6,O7,P7,Q7,R7,S7){var T7=n&f;if(!T7&&typeof e!='function'){throw new TypeError(F);}var U7=O7?O7.length:0;if(!U7){n&=~(j|k);O7=P7=u;}R7=R7===u?R7:e3(r7(R7),0);S7=S7===u?S7:r7(S7);U7-=P7?P7.length:0;if(n&k){var V7=O7,W7=P7;O7=P7=u;}var X7=T7?u:C5(e);var Y7=[e,n,Y6,O7,P7,V7,W7,Q7,R7,S7];if(X7){c6(Y7,X7);}e=Y7[0];n=Y7[1];Y6=Y7[2];O7=Y7[3];P7=Y7[4];S7=Y7[9]=Y7[9]===u?(T7?0:e.length):e3(Y7[9]-U7,0);if(!S7&&n&(h|i)){n&=~(h|i);}if(!n||n==W){var Z7=n5(e,n,Y6);}else if(n==h||n==i){Z7=p5(e,n,S7);}else if((n==j||n==(W|j))&&!P7.length){Z7=r5(e,n,Y6,O7);}else{Z7=q5.apply(u,Y7);}var $7=X7?Q4:j6;return l6($7(Z7,Y7),e,n);}function v5(e){return k7(e)?u:e;}function w5(e,n,Y6,O7,P7,Q7){var R7=Y6&c,S7=e.length,T7=n.length;if(S7!=T7&&!(R7&&T7>S7)){return false;}var U7=Q7.get(e);var V7=Q7.get(n);if(U7&&V7){return U7==n&&V7==e;}var W7=-1,X7=true,Y7=(Y6&d)?new T3:u;Q7.set(e,n);Q7.set(n,e);while(++W7<S7){var Z7=e[W7],$7=n[W7];if(O7){var _7=R7?O7($7,Z7,W7,n,e,Q7):O7(Z7,$7,W7,e,n,Q7);}if(_7!==u){if(_7){continue;}X7=false;break;}if(Y7){if(!m2(n,function($7,a8){if(!v2(Y7,a8)&&(Z7===$7||P7(Z7,$7,Y6,O7,Q7))){return Y7.push(a8);}})){X7=false;break;}}else if(!(Z7===$7||P7(Z7,$7,Y6,O7,Q7))){X7=false;break;}}Q7['delete'](e);Q7['delete'](n);return X7;}function x5(e,n,Y6,O7,P7,Q7,R7){switch(Y6){case _:if((e.byteLength!=n.byteLength)||(e.byteOffset!=n.byteOffset)){return false;}e=e.buffer;n=n.buffer;case $:if((e.byteLength!=n.byteLength)||!Q7(new T2(e),new T2(n))){return false;}return true;case z:case A:case J:return eq(+e,+n);case B:return e.name==n.name&&e.message==n.message;case S:case U:return e==(n+'');case G:var S7=A2;case T:var T7=O7&c;S7||(S7=D2);if(e.size!=n.size&&!T7){return false;}var U7=R7.get(e);if(U7){return U7==n;}O7|=d;R7.set(e,n);var V7=w5(S7(e),S7(n),O7,P7,Q7,R7);R7['delete'](e);return V7;case X:if(v3){return v3.call(e)==v3.call(n);}}return false;}function y5(e,n,Y6,O7,P7,Q7){var R7=Y6&c,S7=A5(e),T7=S7.length,U7=A5(n),V7=U7.length;if(T7!=V7&&!R7){return false;}var W7=T7;while(W7--){var X7=S7[W7];if(!(R7?X7 in n:M2.call(n,X7))){return false;}}var Y7=Q7.get(e);var Z7=Q7.get(n);if(Y7&&Z7){return Y7==n&&Z7==e;}var $7=true;Q7.set(e,n);Q7.set(n,e);var _7=R7;while(++W7<T7){X7=S7[W7];var a8=e[X7],b8=n[X7];if(O7){var c8=R7?O7(b8,a8,X7,n,e,Q7):O7(a8,b8,X7,e,n,Q7);}if(!(c8===u?(a8===b8||P7(a8,b8,Y6,O7,Q7)):c8)){$7=false;break;}_7||(_7=X7=='constructor');}if($7&&!_7){var d8=e.constructor,e8=n.constructor;if(d8!=e8&&('constructor'in e&&'constructor'in n)&&!(typeof d8=='function'&&d8 instanceof d8&&typeof e8=='function'&&e8 instanceof e8)){$7=false;}}Q7['delete'](e);Q7['delete'](n);return $7;}function z5(e){return k6(f6(e,u,v6),e+'');}function A5(e){return p4(e,x7,K5);}function B5(e){return p4(e,y7,L5);}var C5=!n3?I7:function(e){return n3.get(e);};function D5(e){var n=(e.name+''),Y6=o3[n],O7=M2.call(o3,n)?Y6.length:0;while(O7--){var P7=Y6[O7],Q7=P7.func;if(Q7==null||Q7==e){return P7.name;}}return n;}function E5(e){var n=M2.call(x3,'placeholder')?x3:e;return n.placeholder;}function F5(){var e=x3.iteratee||H7;e=e===H7?C4:e;return arguments.length?e(arguments[0],arguments[1]):e;}function G5(R6,e){var n=R6.__data__;return X5(e)?n[typeof e=='string'?'string':'hash']:n.map;}function H5(e){var n=x7(e),Y6=n.length;while(Y6--){var O7=n[Y6],P7=e[O7];n[Y6]=[O7,P7,_5(P7)];}return n;}function I5(e,n){var Y6=x2(e,n);return z4(Y6)?Y6:u;}function J5(n){var Y6=M2.call(n,_2),O7=n[_2];try{n[_2]=u;var P7=true;}catch(e){}var Q7=O2.call(n);if(P7){if(Y6){n[_2]=O7;}else{delete n[_2];}}return Q7;}var K5=!b3?K7:function(e){if(e==null){return[];}e=Object(e);return h2(b3(e),function(n){return X2.call(e,n);});};var L5=!b3?K7:function(e){var n=[];while(e){l2(n,K5(e));e=V2(e);}return n;};var M5=q4;if((h3&&M5(new h3(new ArrayBuffer(1)))!=_)||(i3&&M5(new i3)!=G)||(j3&&M5(j3.resolve())!=Q)||(k3&&M5(new k3)!=T)||(l3&&M5(new l3)!=Z)){M5=function(e){var n=q4(e),Y6=n==O?e.constructor:u,O7=Y6?p6(Y6):'';if(O7){switch(O7){case p3:return _;case q3:return G;case r3:return Q;case s3:return T;case t3:return Z;}}return n;};}function N5(e){var n=e.match(p1);return n?n[1].split(q1):[];}function O5(e,n,Y6){n=Z4(n,e);var O7=-1,P7=n.length,Q7=false;while(++O7<P7){var R7=o6(n[O7]);if(!(Q7=e!=null&&Y6(e,R7))){break;}e=e[R7];}if(Q7||++O7!=P7){return Q7;}P7=e==null?0:e.length;return!!P7&&f7(P7)&&U5(R7,P7)&&($6(e)||Z6(e));}function P5(e){var n=e.length,Y6=new e.constructor(n);if(n&&typeof e[0]=='string'&&M2.call(e,'index')){Y6.index=e.index;Y6.input=e.input;}return Y6;}function Q5(e){return(typeof e.constructor=='function'&&!$5(e))?y3(V2(e)):{};}function R5(e,n,Y6){var O7=e.constructor;switch(n){case $:return _4(e);case z:case A:return new O7(+e);case _:return a5(e,Y6);case a1:case b1:case c1:case d1:case e1:case f1:case g1:case h1:case i1:return d5(e,Y6);case G:return new O7;case J:case U:return new O7(e);case S:return b5(e);case T:return new O7;case X:return c5(e);}}function S5(e,n){var Y6=n.length;if(!Y6){return e;}var O7=Y6-1;n[O7]=(Y6>1?'& ':'')+n[O7];n=n.join(Y6>2?', ':' ');return e.replace(o1,'{\n/* [wrapped with '+n+'] */\n');}function T5(e){return $6(e)||Z6(e)||!!(Z2&&e&&e[Z2]);}function U5(e,n){var Y6=typeof e;n=n==null?r:n;return!!n&&(Y6=='number'||(Y6!='symbol'&&x1.test(e)))&&(e>-1&&e%1==0&&e<n);}function V5(e,n,Y6){if(!g7(Y6)){return false;}var O7=typeof n;if(O7=='number'?(_6(Y6)&&U5(n,Y6.length)):(O7=='string'&&n in Y6)){return eq(Y6[n],e);}return false;}function W5(e,n){if($6(e)){return false;}var Y6=typeof e;if(Y6=='number'||Y6=='symbol'||Y6=='boolean'||e==null||n7(e)){return true;}return k1.test(e)||!j1.test(e)||(n!=null&&e in Object(n));}function X5(e){var n=typeof e;return(n=='string'||n=='number'||n=='symbol'||n=='boolean')?(e!=='__proto__'):(e===null);}function Y5(e){var n=D5(e),Y6=x3[n];if(typeof Y6!='function'||!(n in A3.prototype)){return false;}if(e===Y6){return true;}var O7=C5(Y6);return!!O7&&e===O7[0];}function Z5(e){return!!N2&&(N2 in e);}function $5(e){var n=e&&e.constructor,Y6=(typeof n=='function'&&n.prototype)||J2;return e===Y6;}function _5(e){return e===e&&!g7(e);}function a6(e,n){return function(Y6){if(Y6==null){return false;}return Y6[e]===n&&(n!==u||(e in Object(Y6)));};}function b6(e){var n=V6(e,function(O7){if(Y6.size===M){Y6.clear();}return O7;});var Y6=n.cache;return n;}function c6(e,n){var Y6=e[1],O7=n[1],P7=Y6|O7,Q7=P7<(W|f|l);var R7=((O7==l)&&(Y6==h))||((O7==l)&&(Y6==m)&&(e[7].length<=n[8]))||((O7==(l|m))&&(n[7].length<=n[8])&&(Y6==h));if(!(Q7||R7)){return e;}if(O7&W){e[2]=n[2];P7|=Y6&W?0:g;}var S7=n[3];if(S7){var T7=e[3];e[3]=T7?e5(T7,S7,n[4]):S7;e[4]=T7?C2(e[3],P):n[4];}S7=n[5];if(S7){T7=e[5];e[5]=T7?f5(T7,S7,n[6]):S7;e[6]=T7?C2(e[5],P):n[6];}S7=n[7];if(S7){e[7]=S7;}if(O7&l){e[8]=e[8]==null?n[8]:f3(e[8],n[8]);}if(e[9]==null){e[9]=n[9];}e[0]=n[0];e[1]=P7;return e;}function d6(e){var n=[];if(e!=null){for(var Y6 in Object(e)){n.push(Y6);}}return n;}function e6(e){return O2.call(e);}function f6(e,n,Y6){n=e3(n===u?(e.length-1):n,0);return function(){var O7=arguments,P7=-1,Q7=e3(O7.length-n,0),R7=Array(Q7);while(++P7<Q7){R7[P7]=O7[n+P7];}P7=-1;var S7=Array(n+1);while(++P7<n){S7[P7]=O7[P7];}S7[n]=Y6(R7);return f2(e,this,S7);};}function g6(e,n){return n.length<2?e:o4(e,S4(n,0,-1));}function h6(e,n){var Y6=e.length,O7=f3(n.length,Y6),P7=g5(e);while(O7--){var Q7=n[O7];e[O7]=U5(Q7,Y6)?P7[Q7]:u;}return e;}function i6(e,n){if(n==='constructor'&&typeof e[n]==='function'){return;}if(n=='__proto__'){return;}return e[n];}var j6=m6(Q4);var k6=m6(R4);function l6(e,n,Y6){var O7=(n+'');return k6(e,S5(O7,q6(N5(O7),Y6)));}function m6(e){var n=0,Y6=0;return function(){var O7=g3(),P7=q-(O7-Y6);Y6=O7;if(P7>0){if(++n>=p){return arguments[0];}}else{n=0;}return e.apply(u,arguments);};}var n6=b6(function(e){var n=[];if(e.charCodeAt(0)===46){n.push('');}e.replace(l1,function(Y6,O7,P7,Q7){n.push(P7?Q7.replace(r1,'$1'):(O7||Y6));});return n;});function o6(e){if(typeof e=='string'||n7(e)){return e;}var n=(e+'');return(n=='0'&&(1/e)==-I)?'-0':n;}function p6(n){if(n!=null){try{return L2.call(n);}catch(e){}try{return(n+'');}catch(e){}}return'';}function q6(e,n){g2(w,function(Y6){var O7='_.'+Y6[0];if((n&Y6[1])&&!i2(e,O7)){e.push(O7);}});return e.sort();}function r6(e){var n=-1,Y6=e==null?0:e.length,O7=0,P7=[];while(++n<Y6){var Q7=e[n];if(Q7){P7[O7++]=Q7;}}return P7;}var s6=O4(function(e,E7){return a7(e)?i4(e,l4(E7,1,a7,true)):[];});var t6=O4(function(e,E7){var H7=B6(E7);if(a7(H7)){H7=u;}return a7(e)?i4(e,l4(E7,1,a7,true),F5(H7,2)):[];});var u6=O4(function(e,E7){var n=B6(E7);if(a7(n)){n=u;}return a7(e)?i4(e,l4(E7,1,a7,true),u,n):[];});function v6(e){var n=e==null?0:e.length;return n?l4(e,1):[];}function w6(e){var n=e==null?0:e.length;return n?l4(e,I):[];}function x6(e,n){var Y6=e==null?0:e.length;if(!Y6){return[];}n=n===u?1:r7(n);return l4(e,n);}var y6=O4(function(e){var n=k2(e,Y4);return(n.length&&n[0]===e[0])?t4(n):[];});var z6=O4(function(e){var H7=B6(e),n=k2(e,Y4);if(H7===B6(n)){H7=u;}else{n.pop();}return(n.length&&n[0]===e[0])?t4(n,F5(H7,2)):[];});var A6=O4(function(e){var n=B6(e),Y6=k2(e,Y4);n=typeof n=='function'?n:u;if(n){Y6.pop();}return(Y6.length&&Y6[0]===e[0])?t4(Y6,u,n):[];});function B6(e){var n=e==null?0:e.length;return n?e[n-1]:u;}var C6=O4(function(e){return U4(l4(e,1,a7,true));});var D6=O4(function(e){var H7=B6(e);if(a7(H7)){H7=u;}return U4(l4(e,1,a7,true),F5(H7,2));});var E6=O4(function(e){var n=B6(e);n=typeof n=='function'?n:u;return U4(l4(e,1,a7,true),u,n);});function F6(e){return(e&&e.length)?U4(e):[];}function G6(e,H7){return(e&&e.length)?U4(e,F5(H7,2)):[];}function H6(e,n){n=typeof n=='function'?n:u;return(e&&e.length)?U4(e,u,n):[];}var I6=O4(function(e,E7){return a7(e)?i4(e,E7):[];});var J6=O4(function(e){return W4(h2(e,a7));});var K6=O4(function(e){var H7=B6(e);if(a7(H7)){H7=u;}return W4(h2(e,a7),F5(H7,2));});var L6=O4(function(e){var n=B6(e);n=typeof n=='function'?n:u;return W4(h2(e,a7),u,n);});function M6(e,E7){return X4(e||[],E7||[],c4);}function N6(e,E7){return X4(e||[],E7||[],P4);}function O6(e,H7){return l4(R6(e,H7),1);}function P6(e,H7){return l4(R6(e,H7),I);}function Q6(e,H7,n){n=n===u?1:r7(n);return l4(R6(e,H7),n);}function R6(e,H7){var n=$6(e)?k2:G4;return n(e,F5(H7,3));}var S6=function(){return Y1.Date.now();};function T6(e,n,Y6){n=Y6?u:n;var O7=u5(e,h,u,u,u,u,u,n);O7.placeholder=T6.placeholder;return O7;}function U6(e,n,Y6){var O7,P7,Q7,R7,S7,T7,U7=0,V7=false,W7=false,X7=true;if(typeof e!='function'){throw new TypeError(F);}n=s7(n)||0;if(g7(Y6)){V7=!!Y6.leading;W7='maxWait'in Y6;Q7=W7?e3(s7(Y6.maxWait)||0,n):Q7;X7='trailing'in Y6?!!Y6.trailing:X7;}function Y7(f8){var g8=O7,h8=P7;O7=P7=u;U7=f8;R7=e.apply(h8,g8);return R7;}function Z7(f8){U7=f8;S7=setTimeout(a8,n);return V7?Y7(f8):R7;}function $7(f8){var g8=f8-T7,h8=f8-U7,i8=n-g8;return W7?f3(i8,Q7-h8):i8;}function _7(f8){var g8=f8-T7,h8=f8-U7;return(T7===u||(g8>=n)||(g8<0)||(W7&&h8>=Q7));}function a8(){var f8=S6();if(_7(f8)){return b8(f8);}S7=setTimeout(a8,$7(f8));}function b8(f8){S7=u;if(X7&&O7){return Y7(f8);}O7=P7=u;return R7;}function c8(){if(S7!==u){clearTimeout(S7);}U7=0;O7=T7=P7=S7=u;}function d8(){return S7===u?R7:b8(S6());}function e8(){var f8=S6(),g8=_7(f8);O7=arguments;P7=this;T7=f8;if(g8){if(S7===u){return Z7(T7);}if(W7){clearTimeout(S7);S7=setTimeout(a8,n);return Y7(T7);}}if(S7===u){S7=setTimeout(a8,n);}return R7;}e8.cancel=c8;e8.flush=d8;return e8;}function V6(e,n){if(typeof e!='function'||(n!=null&&typeof n!='function')){throw new TypeError(F);}var Y6=function(){var O7=arguments,P7=n?n.apply(this,O7):O7[0],Q7=Y6.cache;if(Q7.has(P7)){return Q7.get(P7);}var R7=e.apply(this,O7);Y6.cache=Q7.set(P7,R7)||Q7;return R7;};Y6.cache=new(V6.Cache||N3);return Y6;}V6.Cache=N3;function W6(e,n,Y6){var O7=true,P7=true;if(typeof e!='function'){throw new TypeError(F);}if(g7(Y6)){O7='leading'in Y6?!!Y6.leading:O7;P7='trailing'in Y6?!!Y6.trailing:P7;}return U6(e,n,{'leading':O7,'maxWait':n,'trailing':P7});}function X6(){if(!arguments.length){return[];}var e=arguments[0];return $6(e)?e:[e];}function eq(e,n){return e===n||(e!==e&&n!==n);}var Z6=u4(function(){return arguments;}())?u4:function(e){return h7(e)&&M2.call(e,'callee')&&!X2.call(e,'callee');};var $6=Array.isArray;function _6(e){return e!=null&&f7(e.length)&&!e7(e);}function a7(e){return h7(e)&&_6(e);}var b7=c3||L7;function c7(e,n){return v4(e,n);}function d7(e,n,Y6){Y6=typeof Y6=='function'?Y6:u;var O7=Y6?Y6(e,n):u;return O7===u?v4(e,n,u,Y6):!!O7;}function e7(e){if(!g7(e)){return false;}var n=q4(e);return n==D||n==E||n==y||n==R;}function f7(e){return typeof e=='number'&&e>-1&&e%1==0&&e<=r;}function g7(e){var n=typeof e;return e!=null&&(n=='object'||n=='function');}function h7(e){return e!=null&&typeof e=='object';}var i7=c2?t2(c2):x4;function j7(e){return e==null;}function k7(e){if(!h7(e)||q4(e)!=O){return false;}var n=V2(e);if(n===null){return true;}var Y6=M2.call(n,'constructor')&&n.constructor;return typeof Y6=='function'&&Y6 instanceof Y6&&L2.call(Y6)==P2;}var l7=d2?t2(d2):A4;function m7(e){return typeof e=='string'||(!$6(e)&&h7(e)&&q4(e)==U);}function n7(e){return typeof e=='symbol'||(h7(e)&&q4(e)==X);}var o7=e2?t2(e2):B4;function p7(e){if(!e){return[];}if(_6(e)){return m7(e)?F2(e):g5(e);}if($2&&e[$2]){return z2(e[$2]());}var n=M5(e),Y6=n==G?A2:(n==T?D2:E7);return Y6(e);}function q7(e){if(!e){return e===0?e:0;}e=s7(e);if(e===I||e===-I){var n=(e<0?-1:1);return n*s;}return e===e?e:0;}function r7(e){var n=q7(e),Y6=n%1;return n===n?(Y6?n-Y6:n):0;}function s7(e){if(typeof e=='number'){return e;}if(n7(e)){return N;}if(g7(e)){var n=typeof e.valueOf=='function'?e.valueOf():e;e=g7(n)?(n+''):n;}if(typeof e!='string'){return e===0?e:+e;}e=e.replace(n1,'');var Y6=u1.test(e);return(Y6||w1.test(e))?V1(e.slice(2),Y6?2:8):(t1.test(e)?N:+e);}function t7(e){return h5(e,y7(e));}function u7(e){return e==null?'':T4(e);}function v7(e,n,Y6){var O7=e==null?u:o4(e,n);return O7===u?Y6:O7;}function w7(e,n){return e!=null&&O5(e,n,s4);}function x7(e){return _6(e)?a4(e):D4(e);}function y7(e){return _6(e)?a4(e,true):E4(e);}var z7=k5(function(e,n,Y6){J4(e,n,Y6);});var A7=k5(function(e,n,Y6,O7){J4(e,n,Y6,O7);});var B7=z5(function(e,n){var Y6={};if(e==null){return Y6;}var O7=false;n=k2(n,function(Q7){Q7=Z4(Q7,e);O7||(O7=Q7.length>1);return Q7;});h5(e,B5(e),Y6);if(O7){Y6=h4(Y6,C|a|b,v5);}var P7=n.length;while(P7--){V4(Y6,n[P7]);}return Y6;});var C7=z5(function(e,n){return e==null?{}:L4(e,n);});function D7(e,n){if(e==null){return{};}var Y6=k2(B5(e),function(O7){return[O7];});n=F5(n);return M4(e,Y6,function(O7,P7){return n(O7,P7[0]);});}function E7(e){return e==null?[]:u2(e,x7(e));}function F7(e){return function(){return e;};}function G7(e){return e;}function H7(e){return C4(typeof e=='function'?e:h4(e,C));}function I7(){}function J7(e){return W5(e)?r2(o6(e)):N4(e);}function K7(){return[];}function L7(){return false;}function M7(e){return(e&&e.length)?k4(e,G7,r4):u;}function N7(e){return(e&&e.length)?k4(e,G7,F4):u;}x3.castArray=X6;x3.compact=r6;x3.constant=F7;x3.curry=T6;x3.debounce=U6;x3.difference=s6;x3.differenceBy=t6;x3.differenceWith=u6;x3.flatMap=O6;x3.flatMapDeep=P6;x3.flatMapDepth=Q6;x3.flatten=v6;x3.flattenDeep=w6;x3.flattenDepth=x6;x3.intersection=y6;x3.intersectionBy=z6;x3.intersectionWith=A6;x3.iteratee=H7;x3.keys=x7;x3.keysIn=y7;x3.map=R6;x3.memoize=V6;x3.merge=z7;x3.mergeWith=A7;x3.omit=B7;x3.pick=C7;x3.pickBy=D7;x3.property=J7;x3.throttle=W6;x3.toArray=p7;x3.toPlainObject=t7;x3.union=C6;x3.unionBy=D6;x3.unionWith=E6;x3.uniq=F6;x3.uniqBy=G6;x3.uniqWith=H6;x3.values=E7;x3.without=I6;x3.xor=J6;x3.xorBy=K6;x3.xorWith=L6;x3.zipObject=M6;x3.zipObjectDeep=N6;x3.eq=eq;x3.get=v7;x3.hasIn=w7;x3.identity=G7;x3.isArguments=Z6;x3.isArray=$6;x3.isArrayLike=_6;x3.isArrayLikeObject=a7;x3.isBuffer=b7;x3.isEqual=c7;x3.isEqualWith=d7;x3.isFunction=e7;x3.isLength=f7;x3.isMap=i7;x3.isNil=j7;x3.isObject=g7;x3.isObjectLike=h7;x3.isPlainObject=k7;x3.isSet=l7;x3.isString=m7;x3.isSymbol=n7;x3.isTypedArray=o7;x3.last=B6;x3.max=M7;x3.min=N7;x3.stubArray=K7;x3.stubFalse=L7;x3.noop=I7;x3.now=S6;x3.toFinite=q7;x3.toInteger=r7;x3.toNumber=s7;x3.toString=u7;x3.VERSION=V;T6.placeholder=x3;return x3;});
// Copyright (c) 2009-2020 SAP SE, All Rights Reserved
sap.ui.predefine('sap/ushell/AppInfoParameters',["sap/base/Log","sap/ushell/services/AppConfiguration","sap/base/util/restricted/_curry","sap/base/util/restricted/_zipObject","sap/ui/VersionInfo","sap/ushell/Config"],function(L,a,_,b,V,C){"use strict";function g(p){var A=p.applicationType;if(A==="TR"){A="GUI";}return A;}function c(){return a.getCurrentApplication().appCapabilities||{};}function d(p){function q(v){return(v.version||"")+(" ("+(v.buildTimestamp||"")+")")||"";}if(g(p)==="UI5"){return V.load().then(q).catch(function(){L.error("VersionInfo could not be loaded");});}return undefined;}function e(p){return Promise.resolve().then(function(){var q=p.componentInstance;if(q){var A=q.getManifestEntry("/sap.app/applicationVersion/version");return A;}return undefined;});}function f(p){var t=p.getTechnicalParameter("sap-ach");return t.then(function(A){var s=A&&A[0];if(s){return s;}return c().appSupportInfo;});}function h(p){function q(){var M=a.getMetadata();return M.technicalName;}var E={UI5:function(){var r=p.componentInstance;if(r){var s=r.getMetadata().getManifestEntry("/sap.ui5/componentName");if(!s){s=r.getMetadata().getComponentName();}return s;}return q();},TR:function(){return(q()||"").replace(/\s[(]TCODE[)]$/,"");},WDA:q,NWBC:q,URL:function(){return Promise.resolve().then(function(){var r=a.getCurrentApplication();if(r.appCapabilities.technicalAppComponentId){return r.appCapabilities.technicalAppComponentId;}return undefined;});}};var A=p.applicationType;if(E.hasOwnProperty(A)){return E[A]();}return undefined;}function i(p){return p.getTechnicalParameter("sap-fiori-id").then(function(F){if(F&&typeof F[0]==="string"){return F[0];}if(p.homePage){return"LAUNCHPAD";}return c().appId||p.inboundPermanentKey;});}function j(u){var r=sap.ushell.Container.getService("ReferenceResolver");return r.resolveReferences([u]).then(function(R){return R[u];});}function k(p){return Promise.resolve().then(function(){var q=a.getCurrentApplication();var A=g(p);if(A&&A!=="URL"){return A;}return q.appCapabilities&&q.appCapabilities.appFrameworkId;}).then(function(A){var q={NWBC:"WDA",TR:"GUI"};return q[A]||A;});}function l(p,q){return q.getSystemContext().then(function(s){return s.getProperty(p);});}function m(){var s=window.hasher&&window.hasher.getHash();if(!s){return Promise.reject("Could not identify current application hash");}return Promise.resolve().then(function(){return s;});}var H={theme:j.bind(null,"User.env.sap-theme-NWBC"),languageTag:j.bind(null,"User.env.sap-languagebcp47"),appIntent:m,appFrameworkId:k,appFrameworkVersion:d,appSupportInfo:f,technicalAppComponentId:h,appId:i,appVersion:e,productName:_(l)("productName")};function n(p){return!H[p]&&/[.]/.test(p);}function o(p,q){var P=p.map(function(s){if(n(s)){H[s]=_(l)(s);}if(!H[s]){L.error(s+" is not a valid app info parameter");return undefined;}return H[s](q);});return Promise.all(P).then(function(v){return b(p,v);});}return{getInfo:function(p,q){if(!q){return Promise.reject("Parameter application missing");}return o(["appFrameworkId"],q).then(function(){return o(p,q);});}};},false);
sap.ui.predefine('sap/ushell/ApplicationType',["sap/ui/thirdparty/URI","sap/base/Log","sap/ushell/utils","sap/ushell/URLTemplateProcessor","sap/ushell/_ApplicationType/utils","sap/ushell/_ApplicationType/systemAlias","sap/ushell/_ApplicationType/wdaResolution","sap/ushell/_ApplicationType/guiResolution","sap/ushell/services/_ClientSideTargetResolution/ParameterMapping","sap/ushell/Config"],function(U,L,u,a,A,s,w,g,p,C){"use strict";function b(B,D,E){var I=B.inbound;var R=I&&I.resolutionResult;if(!(!I||!R||!(R["sap.wda"]))){return w.constructFullWDAResolutionResult(B,D,E);}if(!(!I||!R)){return w.constructWDAResolutionResult(B,D,E);}return undefined;}function c(B,D,E){var F=new U(D),I=B.inbound,G=I&&I.resolutionResult,H=jQuery.extend(true,{},B.mappedIntentParamsPlusSimpleDefaults),S,J;if(H["sap-system"]){S=H["sap-system"][0];delete H["sap-system"];}if(H["sap-system-src"]){J=H["sap-system-src"][0];delete H["sap-system-src"];}return new Promise(function(R,K){s.spliceSapSystemIntoURI(F,G.systemAlias,S,J,"WCF",G.systemAliasSemantics||s.SYSTEM_ALIAS_SEMANTICS.applied,E).done(function(N){var P=A.getURLParsing().paramsToString(H),O=A.appendParametersToUrl(P,N.toString());var Q={url:O,text:G.text||"",additionalInformation:G.additionalInformation||"",applicationType:"WCF",fullWidth:true};R(Q);}).fail(function(N){K(N);});});}function d(B,D,E){var I=B.inbound,F,S,G,H,R={};["applicationType","additionalInformation","applicationDependencies"].forEach(function(P){if(I.resolutionResult.hasOwnProperty(P)){R[P]=I.resolutionResult[P];}});R.url=D;if(R.applicationDependencies&&typeof R.url==="undefined"){R.url="";}if(typeof R.url==="undefined"){return Promise.reject("Cannot resolve intent: url was not specified in matched inbound");}H=jQuery.extend(true,{},B.mappedIntentParamsPlusSimpleDefaults);R.reservedParameters={};var J={"sap-ui-fl-max-layer":true,"sap-ui-fl-control-variant-id":true,"sap-ui-fl-version":true};Object.keys(J).forEach(function(N){var V=H[N];if(V){delete H[N];R.reservedParameters[N]=V;}});B.mappedDefaultedParamNames=B.mappedDefaultedParamNames.filter(function(K){return!J[K];});if(B.mappedDefaultedParamNames.length>0){H["sap-ushell-defaultedParameterNames"]=[JSON.stringify(B.mappedDefaultedParamNames)];}S=H["sap-system"]&&H["sap-system"][0];G=H["sap-system-src"]&&H["sap-system-src"][0];R["sap-system"]=S;if(typeof G==="string"){R["sap-system-src"]=G;}B.effectiveParameters=H;F=A.getURLParsing().paramsToString(H);if(F){R.url=R.url+((R.url.indexOf("?")<0)?"?":"&")+F;}if(typeof I.resolutionResult.ui5ComponentName!=="undefined"){R.ui5ComponentName=I.resolutionResult.ui5ComponentName;}R.text=I.title;return Promise.resolve(R);}function e(){var H=new U().fragment();var B=H.lastIndexOf("&/");if(B>0){return H.substr(B+1);}return undefined;}function f(B){var D=B.targetNavigationMode;if(D===undefined||D===""){D="inplace";}return D;}function h(){var H=window.hasher&&window.hasher.getHash(),K="",P;if(H&&H.length>0&&H.indexOf("sap-iapp-state=")>0){P=/(?:sap-iapp-state=)([^&/\\]+)/.exec(H);if(P&&P.length===2){K=P[1];}}return K;}function i(){var S=sap.ushell.Container.getService("PluginManager");if(S){return S._getNamesOfPluginsWithAgents();}return"";}function j(){var B=sap.ushell.Container.getService("UserInfo");var D=B.getUser();var E=sap.ui.getCore().getConfiguration();var F=u.getUi5Version();var G=D.getContentDensity();var T=D.getTheme();if(T.indexOf("sap_")!==0){var H=sap.ushell.User.prototype.constants.themeFormat.THEME_NAME_PLUS_URL;T=D.getTheme(H);}var I;var J;if(E){J=E.getLanguage&&E.getLanguage();I=E.getSAPLogonLanguage&&E.getSAPLogonLanguage();}var K=window.location.protocol+"//"+window.location.host+"/comsapuitheming.runtime/themeroot/v1";var N=0;if(C.last("/core/shell/sessionTimeoutIntervalInMinutes")>0){N=C.last("/core/shell/sessionTimeoutIntervalInMinutes");}return{language:J,logonLanguage:I,theme:T,themeServiceRoot:K,isDebugMode:!!window["sap-ui-debug"],ui5Version:F,contentDensity:G,sapPlugins:i(),innerAppState:h(),sessionTimeout:N};}function k(B){var I;switch(B){case"inplace":I="embedded";break;case"explace":I="newWindow";break;default:I=B||"newWindow";}return I;}function l(T,S){var B=k(T);var D=u.getMember(S,"sap|integration.navMode");switch(D){case"inplace":return"embedded";case"explace":if(B==="embedded"){return"newWindowThenEmbedded";}if(["newWindowThenEmbedded","newWindow"].indexOf(B)>=0){return B;}L.error("App-defined navigation mode was ignored","Application requests to be opened in a new window but no expected navigation mode was defined on the template","sap.ushell.ApplicationType");default:return B;}}function m(T,S,I){var B=u.clone(T);B.navigationMode=l(T.navigationMode,S);B.appId=I(T.appId||"");B.technicalAppComponentId=I(T.technicalAppComponentId||"");B.appSupportInfo=S["sap.app"]&&S["sap.app"].ach;B.appFrameworkId=T.appFrameworkId;return B;}function n(S,B,D){var I={appParams:{},system:undefined},E;if(D.mappedIntentParamsPlusSimpleDefaults){I.appParams=JSON.parse(JSON.stringify(D.mappedIntentParamsPlusSimpleDefaults));}E=u.getMember(B,"sap|app.destination");if(typeof E==="string"&&E.length>0){I.system=S.systemAliases[E]&&JSON.parse(JSON.stringify(S.systemAliases[E]));if(typeof I.system==="object"){I.system.alias=E;}}return I;}function o(B){return new Promise(function(R,D){var E=new U(B);var P=E.query(true);sap.ushell.Container.getService("ShellNavigation").compactParams(P,["sap-language","sap-theme","sap-shell","sap-ui-app-id","transaction","sap-iframe-hint"],undefined,true).done(function(F){if(!F.hasOwnProperty("sap-intent-param")){R(B);return;}E.query(F);var G=E.toString();R(G);}).fail(function(F){D(F);});});}function q(R){if(R.appCapabilities.appFrameworkId){var H=R.url.indexOf("#"),B=R.url,D="";if(H>0){B=R.url.slice(0,H);D=R.url.slice(H);}R.url=B+(B.indexOf("?")>=0?"&":"?")+"sap-iframe-hint="+R.appCapabilities.appFrameworkId+D;}}function r(B,D,E){var I=B.inbound;var T=I.templateContext;var R={innerAppRoute:e()||B.parsedIntent.appSpecificRoute,targetNavMode:f(B),defaultParameterNames:B.mappedDefaultedParamNames,startupParameter:B.mappedIntentParamsPlusSimpleDefaults,env:j()};var F=a.expand(T.payload,T.site,R,T.siteAppSection,"startupParameter");var G=function(J){var P=u.clone(T.payload);P.urlTemplate=J;return a.expand(P,T.site,R,T.siteAppSection,"startupParameter");};var H={applicationType:"URL",text:I.title,appCapabilities:m(T.payload.capabilities||{},T.siteAppSection,G),url:F,extendedInfo:n(T.site,T.siteAppSection,B),contentProviderId:I.contentProviderId||"",systemAlias:(T.siteAppSection["sap.app"]&&T.siteAppSection["sap.app"].destination)||T.siteAppSection.destination||""};q(H);return o(H.url).then(function(J){H.url=J;return H;},function(){return H;});}function t(B,D,E){var I=B.inbound,F=I&&I.resolutionResult,R={};var G=new U(D);var H=jQuery.extend(true,{},B.mappedIntentParamsPlusSimpleDefaults);if(B.inbound&&B.inbound.action==="launchURL"&&B.inbound.semanticObject==="Shell"){delete H["sap-external-url"];}var S=H["sap-system"]&&H["sap-system"][0];var J=H["sap-system-src"]&&H["sap-system-src"][0];R["sap-system"]=S;delete H["sap-system"];if(typeof J==="string"){R["sap-system-src"]=J;delete H["sap-system-src"];}return(new Promise(function(K,N){if(A.absoluteUrlDefinedByUser(G,F.systemAlias,F.systemAliasSemantics)){K(D);}else{s.spliceSapSystemIntoURI(G,F.systemAlias,S,J,"URL",F.systemAliasSemantics||s.SYSTEM_ALIAS_SEMANTICS.applied,E).fail(N).done(function(O){var P=O.toString();K(P);});}})).then(function(K){var P=A.getURLParsing().paramsToString(H);var N=C.last("/core/navigation/flpURLDetectionPattern");var O=new RegExp(N);return O.test(K)?A.appendParametersToIntentURL(H,K):A.appendParametersToUrl(P,K);},Promise.reject.bind(Promise)).then(function(K){["additionalInformation","applicationDependencies","systemAlias"].forEach(function(P){if(I.resolutionResult.hasOwnProperty(P)){R[P]=I.resolutionResult[P];}});R.url=K;R.text=I.title;R.applicationType="URL";return Promise.resolve(R);},Promise.reject.bind(Promise));}var v={URL:{type:"URL",defaultFullWidthSetting:true,generateResolutionResult:function(B){var D=B.inbound.hasOwnProperty("templateContext");return D?r.apply(null,arguments):t.apply(null,arguments);},easyAccessMenu:{intent:"Shell-startURL",resolver:null,showSystemSelectionInUserMenu:true,showSystemSelectionInSapMenu:false,systemSelectionPriority:1}},WDA:{type:"WDA",defaultFullWidthSetting:true,generateResolutionResult:b,easyAccessMenu:{intent:"Shell-startWDA",resolver:w.resolveEasyAccessMenuIntentWDA,showSystemSelectionInUserMenu:true,showSystemSelectionInSapMenu:true,systemSelectionPriority:2}},TR:{type:"TR",defaultFullWidthSetting:true,generateResolutionResult:g.generateTRResolutionResult,easyAccessMenu:{intent:"Shell-startGUI",resolver:g.resolveEasyAccessMenuIntentWebgui,showSystemSelectionInUserMenu:true,showSystemSelectionInSapMenu:true,systemSelectionPriority:3}},NWBC:{type:"NWBC",defaultFullWidthSetting:true},WCF:{type:"WCF",generateResolutionResult:c,defaultFullWidthSetting:true},SAPUI5:{type:"SAPUI5",generateResolutionResult:d,defaultFullWidthSetting:false}};function x(){return Object.keys(v).map(function(B){return v[B];}).filter(function(B){return typeof B.easyAccessMenu==="object";});}function y(){var E={};x().forEach(function(B){E[B.easyAccessMenu.intent]=B.easyAccessMenu.resolver;});return function(B,R){if(E[B]&&(!R||R!=="SAPUI5")){return E[B];}return null;};}function z(B){if(!v[B]){return false;}return v[B].defaultFullWidthSetting;}Object.defineProperty(v,"enum",{value:Object.keys(v).reduce(function(B,D){if(v[D].type){B[D]=v[D].type;}return B;},{})});var M={getEasyAccessMenuResolver:y(),getEasyAccessMenuDefinitions:x,getDefaultFullWidthSetting:z};Object.keys(M).forEach(function(B){Object.defineProperty(v,B,{value:M[B]});});return v;},true);
sap.ui.predefine('sap/ushell/CanvasShapesManager',["sap/ui/Device","sap/ui/core/theming/Parameters"],function(D,T){"use strict";var P=function(x,y){this.x=x||0;this.y=y||0;};P.prototype.getDistance=function(p){var x=this.x-p.x,y=this.y-p.y;return Math.floor(Math.sqrt(x*x+y*y));};P.prototype.getSegment=function(o){if(this.x<=o.x&&this.y<=o.y){return 1;}if(this.x<=o.x&&this.y>=o.y){return 2;}if(this.x>=o.x&&this.y>=o.y){return 3;}if(this.x>=o.x&&this.y<=o.y){return 4;}};P.prototype.offset=function(o,O){this.x=this.x+o;this.y=this.y+O;};var R=function(x,X,y,Y){this.x={min:x,max:X};this.y={min:y,max:Y};};var c=(window.innerWidth>0)?window.innerWidth:screen.width,a=(window.innerHeight>0)?window.innerHeight:screen.height,b={cpr1:new R(0,c/4,0,a/4),cpr2:new R(c/2,c,0,a/4),cpr3:new R(c/4,3*c/4,a*3/4,a)},m=function(){this.init();};m.prototype={radiusRange:{min:800,max:900},init:function(){this.Id="shell-shapes";var d={cpr1:b.cpr1,cpr2:b.cpr2,cpr3:b.cpr3},r,e,s,f,g;this.shapes=[];this.bIsDirty=true;for(g in d){r=Math.random(this.radiusRange.max-this.radiusRange.min)+this.radiusRange.min;e=this.getRandomPoint(d[g]);s=this._getSquarePoints(r,e);f=this._calculatebezierCurves(r,s);this.shapes.push({bezierCurves:f,centerPoint:e});}for(var h in this.shapes){var v=this._generateRandomAmorphousShapeValues();this.shapes[h]=this.makeAmorphousShape(this.shapes[h],v.edge0.edgeNum,v.edge0.xOffSet,v.edge0.yOffSet,v.edge0.xStretch);this.shapes[h]=this.makeAmorphousShape(this.shapes[h],v.edge1.edgeNum,v.edge1.xOffSet,v.edge1.yOffSet,v.edge1.xStretch);}sap.ui.getCore().attachThemeChanged(this.onThemeChanged.bind(this));D.resize.attachHandler(this.resizeHandler,this);},_generateRandomAmorphousShapeValues:function(){var v={edge0:{edgeNum:0,xOffSet:0,yOffSet:0,xStretch:0},edge1:{edgeNum:0,xOffSet:0,yOffSet:0,xStretch:0}};var n=this._getRandomInt(0,3);for(var e in v){v[e].edgeNum=n;v[e].xOffSet=this._getRandomInt(200,400);v[e].yOffSet=this._getRandomInt(-200,-400);n+=this._getRandomInt(0,1)<0.5?-1:1;if(n===-1){n=3;}if(n===4){n=0;}}n=this._getRandomInt(0,1);if(n<0.5){n=n<0.25?0:1;v["edge"+n].xStretch=this._getRandomInt(0,200);}return v;},getPoint:function(x,y){return new P(x,y);},getRandomPoint:function(r){var x=Math.floor(Math.random()*(r.x.max-r.x.min)+r.x.min),y=Math.floor(Math.random()*(r.y.max-r.y.min)+r.y.min);return new P(x,y);},onThemeChanged:function(){var s=T.get("sapUshellShellBackgroundShapesColor");if(this.sShapesColor!==s){this.sShapesColor=s;this.bIsDirty=true;this.drawShapes();}},resizeHandler:function(){var d=jQuery("#"+this.Id)[0];if(d){d.width=window.innerWidth;d.height=window.innerHeight;this.bIsDirty=true;this.drawShapes();}},enableAnimationDrawing:function(e){this._enableDrawing=e;},makeAmorphousShape:function(s,d,x,y){var e,f,g;switch(d){case 0:e=s.bezierCurves[0].controlPoint1;f=s.bezierCurves[3].controlPoint2;g=this._rotatePoints(x,y,e,f);s.bezierCurves[0].controlPoint1=g[0];s.bezierCurves[3].controlPoint2=g[1];break;case 1:e=s.bezierCurves[0].controlPoint2;f=s.bezierCurves[1].controlPoint1;g=this._rotatePoints(x,y,e,f);s.bezierCurves[0].controlPoint2=g[0];s.bezierCurves[1].controlPoint1=g[1];break;case 2:e=s.bezierCurves[1].controlPoint2;f=s.bezierCurves[2].controlPoint1;g=this._rotatePoints(x,y,e,f);s.bezierCurves[1].controlPoint2=g[0];s.bezierCurves[2].controlPoint1=g[1];break;case 3:e=s.bezierCurves[2].controlPoint2;f=s.bezierCurves[3].controlPoint1;g=this._rotatePoints(x,y,e,f);s.bezierCurves[2].controlPoint2=g[0];s.bezierCurves[3].controlPoint1=g[1];break;}return s;},_rotatePoints:function(d,e,f,g){var x,y,h=[];x=f.x+d;y=f.y+e;h.push(new P(x,y));x=g.x-d;y=g.y-e;h.push(new P(x,y));return h;},_getSquarePoints:function(r,d){var s=[];s[0]=new P(d.x+r,d.y);s[1]=new P(d.x,d.y-r);s[2]=new P(d.x-r,d.y);s[3]=new P(d.x,d.y+r);return s;},_getRandomInt:function(d,e){if(d==0&&e==1){return Math.random();}return Math.floor(Math.random()*(e-d+1))+d;},_calculatebezierCurves:function(r,s){var d=[],e,f,g,h;h=s[0];g=s[1];e=new P(h.x,h.y-r/2);f=new P(h.x-r/2,h.y-r);d.push({startPoint:h,endPoint:g,controlPoint1:e,controlPoint2:f});h=s[1];g=s[2];e=new P(h.x-r/2,h.y);f=new P(h.x-r,h.y+r/2);d.push({startPoint:h,endPoint:g,controlPoint1:e,controlPoint2:f});h=s[2];g=s[3];e=new P(h.x,h.y+r/2);f=new P(h.x+r/2,h.y+r);d.push({startPoint:h,endPoint:g,controlPoint1:e,controlPoint2:f});h=s[3];g=s[0];e=new P(h.x+r/2,h.y);f=new P(h.x+r,h.y-r/2);d.push({startPoint:h,endPoint:g,controlPoint1:e,controlPoint2:f});return d;},drawShapes:function(){var d=jQuery("#"+this.Id)[0];if(this.bIsDirty&&d&&d.getContext){var e=d.getContext("2d"),s,f,g,h;if(!this.sShapesColor){this.sShapesColor=T.get("sapUshellShellBackgroundShapesColor");}e.clearRect(0,0,c*2,a*2);if(this.sShapesColor&&this.sShapesColor!=="transparent"){for(var j=0;j<this.shapes.length;j++){e.beginPath();s=this.shapes[j].bezierCurves[0].startPoint;e.moveTo(s.x,s.y);for(var i=0;i<this.shapes[j].bezierCurves.length;i++){f=this.shapes[j].bezierCurves[i].endPoint;g=this.shapes[j].bezierCurves[i].controlPoint1;h=this.shapes[j].bezierCurves[i].controlPoint2;e.bezierCurveTo(Math.floor(g.x),Math.floor(g.y),Math.floor(h.x),Math.floor(h.y),Math.floor(f.x),Math.floor(f.y));}e.closePath();e.fillStyle=this.sShapesColor;e.fill();}}this.bIsDirty=false;}}};var C=new m();return C;},true);
sap.ui.predefine('sap/ushell/Config',["sap/ushell/EventHub","sap/ushell/bootstrap/common/common.create.configcontract.core","sap/ushell/_Config/utils"],function(E,C,c){"use strict";var o=C.createConfigContract(window["sap-ushell-config"]);var f=E.createChannel(o);var a=Object.keys(f).reduce(function(a,m){a[m]=function(){if(!f){f=E.createChannel(o);}return f[m].apply(f,arguments);};return a;},{_reset:function(){f=null;},registerConfiguration:function(O,b){o=b;},createModel:function(p,b){if(!f){f=E.createChannel(o);}return c.createModel(f,o,p,b);}});return a;},false);
sap.ui.predefine('sap/ushell/Fiori20Adapter',["sap/ui/base/Object","sap/ui/core/Component","sap/ui/core/UIComponent","sap/ui/model/resource/ResourceModel","sap/m/Fiori20Adapter","sap/ui/thirdparty/hasher"],function(B,C,U,R,S,h){"use strict";var u;U._fnOnInstanceDestroy=function(c){if(c._fioriAdapter){c._fioriAdapter.destroy();}};var A=B.extend("AppInfo",{constructor:function(c){B.call(this);this._oComponent=c;},getDefaultTitle:function(){var t,r,m=this._oComponent.getMetadata();var a=m.getManifestEntry("sap.app");if(a&&a.title){t=a.title;if(this._isLocalizationKey(t)){r=(a.i18n||"i18n/i18n.properties");return this._getLocalized(t,r);}return t;}var o=m.getManifestEntry("sap.ui5");if(o&&o.config&&o.config.resourceBundle&&o.config.titleResource){t=o.config.titleResource;r=o.config.resourceBundle;return this._getLocalized(t,r);}return;},_getLocalized:function(t,r){var m=new R({bundleUrl:sap.ui.require.toUrl(this._oComponent.getMetadata().getComponentName())+"/"+r});return m.getResourceBundle().getText(t.replace(/^{{/,"").replace(/}}$/,""));},_isLocalizationKey:function(t){return(t.indexOf("{{")===0)&&(t.indexOf("}}")>0);}});var H=B.extend("HeaderInfo",{constructor:function(c,o,a){B.call(this);this._oConfig=o;this._oAppInfo=a;this._aHierarchy=[];this._defaultTitle=this._oAppInfo.getDefaultTitle();this._oCurrentViewInfo={oTitleInfo:{text:this._defaultTitle}};},registerView:function(v){if(this._oConfig.bMoveTitle===true){if(!v.oTitleInfo&&v.oSubTitleInfo){v.oTitleInfo=v.oSubTitleInfo;}this._oCurrentViewInfo=v;var t=this._oCurrentViewInfo.oTitleInfo?this._oCurrentViewInfo.oTitleInfo.text:undefined;if(t!==u.getTitle()){u.setTitle(t);}this._updateHierarchy();}this._setBackNavigation(v.oBackButton,v.oAdaptOptions);},_setBackNavigation:function(b,a){if(a&&a.bHideBackButton===false){return;}var f;if(b){f=b.firePress.bind(b);}u.setBackNavigation(f);},_updateHierarchy:function(){if(this._oConfig.bHierarchy===false){return;}if(!this._oCurrentViewInfo){return;}var n=true,s="#"+h.getHash();for(var i=this._aHierarchy.length-1;i>=0;i--){var e=this._aHierarchy[i],k=(e.id===this._oCurrentViewInfo.sViewId),K=(e.intent===s);if(k||K){n=false;e=this._updateHierarchyEntry(e);this._aHierarchy[i]=e;this._aHierarchy=this._aHierarchy.slice(0,i+1);if(k){e.intent=s;}break;}}if(n){this._aHierarchy.push(this._createHierarchyEntry());}var N=[];for(var j=this._aHierarchy.length-2;j>=0;j--){N.push(this._aHierarchy[j]);}u.setHierarchy(this._deleteUndefinedProperties(N));},_createHierarchyEntry:function(){var s="#"+h.getHash(),e={id:this._oCurrentViewInfo.sViewId,title:this._oCurrentViewInfo.oTitleInfo?this._oCurrentViewInfo.oTitleInfo.text:this._defaultTitle,subtitle:this._oCurrentViewInfo.oSubTitleInfo?this._oCurrentViewInfo.oSubTitleInfo.text:undefined,intent:s};return e;},_updateHierarchyEntry:function(e){e.id=this._oCurrentViewInfo.sViewId;e.title=this._oCurrentViewInfo.oTitleInfo?this._oCurrentViewInfo.oTitleInfo.text:this._defaultTitle;e.subtitle=this._oCurrentViewInfo.oSubTitleInfo?this._oCurrentViewInfo.oSubTitleInfo.text:undefined;return e;},_deleteUndefinedProperties:function(o){o.forEach(function(O){for(var p in O){if(O.hasOwnProperty(p)&&!O[p]&&p!=="title"){delete O[p];}}});return o;}});var F=B.extend("sap.ushell.Fiori20Adapter",{constructor:function(c,o){B.call(this);this._oComponent=c;this._oConfig=o;this._oHeaderInfo=new H(c,o,new A(c));if(S){S.attachViewChange(this._onViewChange,this);}},init:function(){if(!S){return;}var c=jQuery.extend({},this._oConfig);S.traverse(this._oComponent.getAggregation("rootControl"),c);},destroy:function(){if(S){S.detachViewChange(this._onViewChange,this);}},_onViewChange:function(e){this._oHeaderInfo.registerView(e.getParameters());}});F.applyTo=function(c,o,a,s){var O=c instanceof U?c:C.getOwnerComponentFor(c);if(!O){O=o;}if(O&&!O._fioriAdapter){u=s;O._fioriAdapter=new F(O,a);O._fioriAdapter.init();}};return F;});
sap.ui.predefine('sap/ushell/Fiori20AdapterTest',["sap/base/util/UriParameters","sap/ui/core/UIComponent","sap/ushell/Fiori20Adapter","sap/ui/core/library","sap/ui/core/service/ServiceFactoryRegistry","sap/base/Log","sap/base/util/Version"],function(U,a,F,c,S,L,V){"use strict";var b={I_DEFAULT_SEARCH_DEPTH:5,B_DEFAULT_LATE_ADAPTATION:false,S_FIORI20ADAPTER_URL_PARAM_NAME:"sap-ui-xx-fiori2Adaptation",S_FIORI20ADAPTER_METADATA_PARAM_NAME:"sapFiori2Adaptation",A_ALLOWLIST:["fin.*","ssuite.fin.*","fscm.*","sap.fin.*","cus.sd.*","cus.o2c.*","sap.apf.*","tl.ibp.*","ux.fnd.apf.o2c.*","fnd.apf.*","fnd.pob.o2c.*","fcg.sll.*","ux.fnd.generic-apf-application.*","hpa.cei.*","query.viewbrowser.s1.*","ssuite.vdm.viewbrowser.s1.*","ssuite.smartbusiness.kpi.s1.*","ssuite.smartbusiness.evaluation.s1.*","ssuite.smartbusiness.association.s1.*","ssuite.smartbusiness.drilldown.s1.*","ssuite.smartbusiness.tile.s1.*","ssuite.smartbusiness.tile.ce.s1.*","ssuite.smartbusiness.workspace.s1.*","ssuite.smartbusiness.runtime.s1.*","gs.fin.customersummarycn.display.*","gs.fin.financialstatement.structure.manage.*","gs.fin.financialstatement.display.*","uipsm.*","publicservices.her.*"],getConfiguration:function(C){var o=this._getURLParamConfiguration();if(!o){o=this._getMetadataConfiguration(C);}if(!o){o=this._getDefaultConfiguration(C);}o.iSearchDepth=o.iSearchDepth||b.I_DEFAULT_SEARCH_DEPTH;if((typeof o.iSearchDepth==="string")&&!isNaN(o.iSearchDepth)){o.iSearchDepth=parseInt(o.iSearchDepth,10);}return o;},_getURLParamConfiguration:function(){if(typeof sap.ui.getCore().getConfiguration().getFiori2Adaptation!=="function"){return;}if(!this._isURLParameterSpecified(b.S_FIORI20ADAPTER_URL_PARAM_NAME)){return;}var u=sap.ui.getCore().getConfiguration().getFiori2Adaptation(),d,s;if(typeof(u)==="boolean"){d=u;}else if(u&&(u.length>=1)){s=u;}if(!s&&(d===undefined)){return;}return{bStylePage:s?s.indexOf("style")>-1:d,bMoveTitle:s?s.indexOf("title")>-1:d,bHideBackButton:s?s.indexOf("back")>-1:d,bCollapseHeader:s?s.indexOf("collapse")>-1:d,bHierarchy:s?s.indexOf("hierarchy")>-1:d};},_getMetadataConfiguration:function(C){var A=C.getMetadata("config").getConfig(b.S_FIORI20ADAPTER_METADATA_PARAM_NAME),d,e;if(typeof(A)==="boolean"){d=A;}else if((typeof A==="object")&&!jQuery.isEmptyObject(A)){e=A;}if(!e&&(d===undefined)){return;}return{bStylePage:e?this._isSgnTrue(e.style):d,bMoveTitle:e?this._isSgnTrue(e.title):d,bHideBackButton:e?this._isSgnTrue(e.back):d,bCollapseHeader:e?this._isSgnTrue(e.collapse):d,bHierarchy:e?this._isSgnTrue(e.hierarchy):d,bLateAdaptation:e?this._isSgnTrue(e.lateAdaptation):b.B_DEFAULT_LATE_ADAPTATION};},_getDefaultConfiguration:function(C){var e=this._hasMinVersionSmallerThan(C,"1.42")&&this._isAllowed(C);return{bStylePage:e,bMoveTitle:e,bHideBackButton:e,bCollapseHeader:e,bHierarchy:e};},_isURLParameterSpecified:function(p){var u=new U(window.location.href),A=u.mParams&&u.mParams[p];return A&&(A.length>0);},_isAllowed:function(C){var s=C.getMetadata().getName();for(var i=0;i<b.A_ALLOWLIST.length;i++){var n=b.A_ALLOWLIST[i].substring(0,b.A_ALLOWLIST[i].length-2);if(this._isPrefixedString(s,n)){return true;}}return false;},_isAdaptationRequired:function(A){for(var o in A){if(A[o]===true){return true;}}return false;},_isPrefixedString:function(s,p){return s&&p&&(s.substring(0,p.length)===p);},_hasMinVersionSmallerThan:function(C,v){var i=C.getMetadata().getManifestEntry("sap.ui5"),m=true;if(i&&i.dependencies&&i.dependencies.minUI5Version){var M=new V(i.dependencies.minUI5Version);m=M.compareTo(new V(v))<0;}return m;},_isSgnTrue:function(v){return(v===true)||(v==="true");}};a._fnOnInstanceInitialized=function(C){var o=C.getAggregation("rootControl");if(!o||o.getId()==="navContainerFlp"||C.getId().indexOf("application-")!==0){return;}var d=b.getConfiguration(C);if(!b._isAdaptationRequired(d)){return;}if(!c.service||!S||typeof S.get!=="function"){L.warning("Fiori20Adapter not loaded because static FactoryRegistry is not available","sap.ui.core.service.ServiceFactoryRegistry should be a function","sap.ushell.Fiori20AdapterTest");return;}var D={onBeforeRendering:function(){o.removeEventDelegate(D);var s=S.get("sap.ushell.ui5service.ShellUIService"),e=s&&s.createInstance();if(!s||!e){L.warning("Fiori20Adapter not loaded because ShellUIService is not available","sap.ushell.ui5service.ShellUIService should be declared by configuration","sap.ushell.Fiori20AdapterTest");return;}e.then(function(s){if(s&&(s.getUxdVersion()===2)){F.applyTo(o,C,d,s);}},function(E){L.warning("Fiori20Adapter not loaded as ShellUIService is not available",E,"sap.ushell.Fiori20AdapterTest");});}};o.addEventDelegate(D);};});
sap.ui.predefine('sap/ushell/TechnicalParameters',["sap/ushell/utils/type"],function(t){"use strict";var T={"sap-navigation-scope":{injectFrom:"inboundParameter",sticky:true,stickyName:"sap-navigation-scope-filter",isIntentParameter:true,getValue:function(p,A,o,s){return new Promise(function(S,F){if(s==="UI5"){S(g(p,A));}else{S(b(p,o));}});}},"sap-fiori-id":{injectFrom:"startupParameter",isIntentParameter:true,getValue:function(p,A,o,s){return new Promise(function(S,F){if(s==="UI5"){S(g(p,A)||a("/sap.fiori/registrationIds",A));}else{S(b(p,o));}});}},"sap-ui-fl-max-layer":{injectFrom:"startupParameter",isIntentParameter:true,getValue:function(p,A){return Promise.resolve().then(g.bind(null,p,A));}},"sap-ui-fl-control-variant-id":{injectFrom:"startupParameter",isIntentParameter:false,getValue:function(p,A){return Promise.resolve().then(g.bind(null,p,A));}},"sap-ui-fl-version":{injectFrom:"startupParameter",isIntentParameter:true,getValue:function(p,A){return Promise.resolve().then(g.bind(null,p,A));}},"sap-ui-app-id-hint":{injectFrom:"startupParameter",isIntentParameter:true,getValue:d},"sap-ach":{injectFrom:"startupParameter",isIntentParameter:true,getValue:function(p,A,o,s){return new Promise(function(S,F){if(s==="UI5"){S(g(p,A)||a("/sap.app/ach",A));}else{S(b(p,o));}});}},"sap-prelaunch-operations":{injectFrom:"inboundParameter",isIntentParameter:true,getValue:d},"sap-app-origin-hint":{injectFrom:"startupParameter",isIntentParameter:false,getValue:d}};function d(p){return Promise.reject(p+" is reserved for shell internal usage only");}function g(p,A){var j=A.getComponentData().technicalParameters||{};return j[p];}function a(p,A){var m=A.getMetadata()?A.getMetadata():undefined;var v=m.getManifestEntry(p);if(!t.isArray(v)){v=[v];}return v;}function b(p,A){var r=A.getReservedParameters();return r&&r[p];}function c(p,A,o,s){if(!T[p]){return Promise.reject(p+" is not a known technical parameter");}return T[p].getValue(p,A,o,s);}function e(F){if(!F){F={};}return Object.keys(T).filter(function(o){var p=T[o];return Object.keys(F).every(function(s){var D=F[s];var H=p.hasOwnProperty(s);if(H){return p[s]===D;}return false;});}).map(function(m){return Object.keys(T[m]).reduce(function(p,P){p[P]=T[m][P];return p;},{name:m});});}function f(){return Object.keys(T);}function i(p){return T.hasOwnProperty(p);}function h(p,A,o,s){if(s==="UI5"){return g(p,A);}return b(p,o);}return{getParameterValue:c,getParameterValueSync:h,getParameters:e,getParameterNames:f,isTechnicalParameter:i};},false);
sap.ui.predefine('sap/ushell/URLTemplateProcessor',["sap/ui/thirdparty/URI","sap/ui/thirdparty/URITemplate","sap/ushell/utils/type","sap/ushell/utils/clone","sap/ushell/_URLTemplateProcessor/utils","sap/ushell/_URLTemplateProcessor/Resolvers","sap/ushell/_URLTemplateProcessor/DependencyGraph","sap/ushell/_URLTemplateProcessor/TemplateParameterParser","sap/ushell/_URLTemplateProcessor/DefinitionParameterSetBuilder","sap/base/Log"],function(U,u,t,c,o,r,d,T,D,L){"use strict";function l(s){L.debug(s,"sap.ushell.URLTemplateProcessor");}function f(v){if(typeof v==="undefined"){return"<undefined>";}if(typeof v==="string"){if(v===""){return"<empty string>";}return"'"+v+"'";}if(typeof v==="number"){return"(number) "+v;}if(typeof v==="boolean"){return"(bool) "+v;}var s;if(typeof v==="object"){s=JSON.stringify(v);if(s.length>255){s=s.substr(0,255)+"...";}}else{s="{other type}";}return s;}function e(p){var P=Object.keys(p).filter(function(s){return typeof p[s]==="object"&&(p[s].hasOwnProperty("renameTo"));});var O=[];P.forEach(function(s){var b=p[s];if(b.hasOwnProperty("renameTo")){O.push(function(g,h){var R=h;R=h.replace(new RegExp(s+"=","g"),b.renameTo+"=");return R;});}});return O;}function a(b,s,R,A,g){l("[TEMPLATE EXPANSION] "+b.urlTemplate);var h=D.buildDefinitionParameterSet(b.parameters,s,g)||{};var i=o.removeArrayParameterNotation(R[g]||{});var j=T.parseTemplateParameterSet(h,g);var k=T.parseTemplateParameterSetAsLiterals(i);var p=o.mergeObject(k,j);l("- parsed template parameters: "+JSON.stringify(p,null,3));var G=d.buildDependencyGraph(p);l("- created dependency graph: "+JSON.stringify(G,null,3));var m=d.getDependencyResolutionOrder(G);l("- resolving in order: "+m.join(" > "));var n=r.resolveAllParameters(p,m,s,R,A,g);Object.keys(n).forEach(function(w){var x=n[w];l(w+" --> "+f(x));});var P=e(h||{});var q=b.urlTemplate;var v=U.expand(q,n).toString();l("- created URL: "+v);P.forEach(function(O){v=O(q,v);});if(P.length>0){l("- created URL (post expansion): "+v);}return v;}return{expand:a};},false);
sap.ui.predefine('sap/ushell/User',["sap/ui/thirdparty/URI","sap/ui/base/EventProvider","sap/ui/core/LocaleData","sap/base/Log"],function(U,E,L,a){"use strict";function c(o){if(o===undefined){return undefined;}return jQuery.extend(true,{},o);}function g(u){var o;if(u.host&&typeof u.host==="function"&&u.host()){o=u.host();if(typeof u.protocol==="function"&&u.protocol()){o=u.protocol()+"://"+o;}return o;}return"";}function b(t){return t.indexOf("sap_")===0;}var d=function(C){var e=[],B,s,o,S,f=new E();this.getEmail=function(){return C.email;};this.getFirstName=function(){return C.firstName;};this.getFullName=function(){return C.fullName;};this.getTimeZone=function(){return C.timeZone;};this.getInitials=function(){var F=C.fullName||"",I="",n=true;for(var i=0,l=F.length;i<l;++i){if(F[i]===" "){n=true;}else if(n){n=false;I+=F[i];}}return I;};this.getId=function(){return C.id;};this.getLanguage=function(){return C.language;};this.getLanguageBcp47=function(){return C.languageBcp47;};this.getLanguageText=function(){var l=sap.ui.getCore().getConfiguration().getLocale(),h=new L(l),i=sap.ui.getCore().getConfiguration().getLanguageTag();i=i.replace("-","_");var j=h.getLanguages(),k=j[i]||this.getLanguage().toUpperCase();return k;};this.getLastName=function(){return C.lastName;};this.getImage=function(){return C.image;};this.setImage=function(u){C.image=u;f.fireEvent("onSetImage",u);};this.attachOnSetImage=function(F,D){f.attachEvent("onSetImage",F,D);};this.isJamActive=function(){return C.isJamActive===true;};this.isLanguagePersonalized=function(){return C.isLanguagePersonalized===true;};this.getTheme=function(t){if(t===d.prototype.constants.themeFormat.ORIGINAL_THEME){return S.originalTheme.theme;}if(t===d.prototype.constants.themeFormat.THEME_NAME_PLUS_URL){return o.theme+(o.locationPath?"@"+o.locationOrigin+o.locationPath:"");}if(t===d.prototype.constants.themeFormat.NWBC){if(b(o.theme)){return o.theme;}return this.getTheme(d.prototype.constants.themeFormat.THEME_NAME_PLUS_URL);}return o.theme;};this.getThemeRoot=function(t){if(C.ranges&&C.ranges.theme&&C.ranges.theme[t]&&C.ranges.theme[t].themeRoot){return C.ranges.theme[t].themeRoot;}return"";};this.setTheme=function(n){if(this.isSetThemePermitted()===false){var h="setTheme not permitted";a.error(h);throw new Error(h);}o=this._amendTheme({theme:n,root:this.getThemeRoot(n)},s);if(n!==S.originalTheme.theme){this.setChangedProperties({propertyName:"theme",name:"THEME"},S.originalTheme.theme,n);S=o;}this.applyTheme(n);};this.applyTheme=function(n){var t=this;var T=this._amendTheme({theme:n,root:this.getThemeRoot(n)},s),N;o=T;if(T.suppliedRoot){sap.ui.getCore().applyTheme(T.theme,T.suppliedRoot+"/UI5/");}else if(T.path){sap.ui.getCore().applyTheme(T.theme,T.path+"/UI5/");}else{sap.ui.getCore().applyTheme(T.theme);}sap.ui.require(["sap/ushell/components/applicationIntegration/AppLifeCycle"],function(A){N=t.getTheme(d.prototype.constants.themeFormat.NWBC);A.postMessageToIframeApp("sap.ushell.appRuntime","themeChange",{currentThemeId:N,themeServiceRoute:window.location.protocol+"//"+window.location.host+"/comsapuitheming.runtime/themeroot/v1"});});};this.setLanguage=function(n){if(n){this.setChangedProperties({propertyName:"language",name:"LANGUAGE"},C.language,n);C.language=n;}};this.getAccessibilityMode=function(){return C.accessibility;};this.setAccessibilityMode=function(A){if(this.isSetAccessibilityPermitted()===false){var h="setAccessibilityMode not permitted";a.error(h);throw new Error(h);}C.accessibility=A;};this.isSetAccessibilityPermitted=function(){return C.setAccessibilityPermitted;};this.isSetThemePermitted=function(){return C.setThemePermitted;};this.getContentDensity=function(){return C.contentDensity;};this.setContentDensity=function(h){if(this.isSetContentDensityPermitted()===false){var i="setContentDensity not permitted";a.error(i);throw new Error(i);}this.setChangedProperties({propertyName:"contentDensity",name:"CONTENT_DENSITY"},C.contentDensity,h);C.contentDensity=h;};this.isSetContentDensityPermitted=function(){return C.setContentDensityPermitted;};this.getChangedProperties=function(){return jQuery.extend(true,[],e);};this.setChangedProperties=function(p,h,n){e.push({propertyName:p.propertyName,name:p.name,oldValue:h,newValue:n});};this.resetChangedProperties=function(){e=[];};this.resetChangedProperty=function(p){e=e.filter(function(P){return!(p===P.propertyName);});};this.getTrackUsageAnalytics=function(){return C.trackUsageAnalytics;};this.setTrackUsageAnalytics=function(t){this.setChangedProperties({propertyName:"trackUsageAnalytics",name:"TRACKING_USAGE_ANALYTICS"},C.trackUsageAnalytics,t);C.trackUsageAnalytics=t;};this.setImageConsent=function(i){this.setChangedProperties({propertyName:"isImageConsent",name:"ISIMAGECONSENT"},C.isImageConsent,i);C.isImageConsent=i;};this.getImageConsent=function(){return C.isImageConsent;};s={locationPathUi5:(new U(sap.ui.require.toUrl(""))).absoluteTo(document.location).pathname(),locationPathCustom:C.themeRoot||"",locationOrigin:g(new U(document.location))};if(!s.locationPathUi5){a.warning("User: Could not set UI5 location path");}if(!s.locationPathCustom){a.warning("User: Could not set location path for custom themes");}if(!s.locationOrigin){a.warning("User: Could not set front-end server location origin");}B=C.bootTheme||{theme:"",root:""};o=this._amendTheme(B,s);S=o;};d.prototype._amendTheme=function(t,s){var T={},e,r;function f(R,o){var u,O,p={};u=new U(R);O=g(u);if(O){p.locationOrigin=O;p.locationPath=u.path();}else{p.locationOrigin=o.locationOrigin;p.locationPath=R;}return p;}if(!t||!t.theme||!s){return{originalTheme:{theme:"",root:""},theme:"",suppliedRoot:"",path:"",locationPath:"",locationOrigin:""};}T.originalTheme=c(t);if(T.originalTheme.theme.indexOf("@")>0){e=T.originalTheme.theme.split("@",2);T.theme=e[0];T.suppliedRoot=e[1];r=f(e[1],s);T.locationPath=r.locationPath;T.path=T.locationPath;T.locationOrigin=r.locationOrigin;return T;}T.theme=T.originalTheme.theme;if(T.originalTheme.root){T.suppliedRoot=T.originalTheme.root;r=f(T.originalTheme.root,s);T.locationPath=r.locationPath;T.path=T.locationPath;T.locationOrigin=r.locationOrigin;return T;}T.suppliedRoot="";if(b(T.theme)){T.locationOrigin=s.locationOrigin;T.locationPath=s.locationPathUi5;T.path="";return T;}T.locationOrigin=s.locationOrigin;T.locationPath=s.locationPathCustom;T.path=T.locationPath;return T;};d.prototype.constants={themeFormat:{ORIGINAL_THEME:"O",THEME_NAME_PLUS_URL:"N+U",NWBC:"NWBC"}};return d;},true);
sap.ui.predefine('sap/ushell/UserActivityLog',["sap/ushell/utils","sap/ushell/ui/launchpad/Tile","sap/ushell/EventHub","sap/base/Log"],function(u,T,E,L){"use strict";var U=function(){};U.prototype={_maxLoggedMessages:50,_maxMessageByteSize:2048,_maxQueueByteSize:30720,_isActive:false,_observedLaunchpadActions:["createGroupAt","deleteGroup","resetGroup","changeGroupTitle","moveGroup","addTile","deleteTile","movetile","externalSearch","addBookmarkTile"],_observedGeneralActions:["openApp"],_observedEventHubEvents:["showCatalog"],_aDoableObjects:[],messageType:{ACTION:0,ERROR:1},_tileOntapOrigFunc:undefined,activate:function(){if(this._isActive){return;}this._isActive=true;var e=sap.ui.getCore().getEventBus(),t=this;this._observedLaunchpadActions.forEach(function(b,i,c){e.subscribe("launchpad",b,t._handleAction,t);});e.subscribe("sap.ushell","appOpened",t._handleAction,t);this._observedGeneralActions.forEach(function(b,i,c){e.subscribe(b,t._handleAction,t);});this._observedEventHubEvents.forEach(function(b,i,c){t._aDoableObjects.push(E.on(b).do(t._handleActionEventHub.bind(t)));});L.addLogListener(this);t._tileOntapOrigFunc=T.prototype.ontap;sap.ushell.ui.launchpad.Tile.prototype.ontap=t._tileOnTapDecorator(t._tileOntapOrigFunc);},deactivate:function(){if(!this._isActive){return;}this._isActive=false;var e=sap.ui.getCore().getEventBus(),t=this;this._observedLaunchpadActions.forEach(function(b,i,c){e.unsubscribe("launchpad",b,t._handleAction,t);});e.unsubscribe("sap.ushell","appOpened",t._handleAction,t);this._observedGeneralActions.forEach(function(b,i,c){e.unsubscribe(b,t._handleAction,t);});this._aDoableObjects.forEach(function(d){d.off();});L.removeLogListener(this);sap.ushell.ui.launchpad.Tile.prototype.ontap=this._tileOntapOrigFunc;},addMessage:function(t,m,b){if(this._isActive){this._addMessageInternal(t,m,b);}},getLog:function(){return this._getLoggingQueueFromStorage();},getMessageInfo:function(){var r={userDetails:this._getUserDetails(),shellState:this._getShellState(),navigationData:this._getLastNavActionFromStorage(),userLog:this.getLog(),formFactor:u.getFormFactor()};return r;},getMessageInfoAsString:function(s){return JSON.stringify(this.getMessageInfo(s));},onLogEntry:function(d){if(d.level<=2){var e=d.message;if(typeof d.details!=="undefined"&&(d.details!=="")){e=e+", "+d.details;}this.addMessage(this.messageType.ERROR,e);}},onAttachToLog:function(){},onDetachFromLog:function(){},_tileOnTapDecorator:function(o){var t=this,n,l,b,c,d,e;return function(){var f=this.getMetadata().getName();if(f==="sap.ushell.ui.launchpad.PlusTile"){t.addMessage(t.messageType.ACTION,"Open Catalog for empty group "+this.getGroupId());}else if(f==="sap.ushell.ui.launchpad.Tile"){n=hasher.getHash();if(n){var g=sap.ushell.Container.getService("URLParsing");var h=g.parseShellHash(n);n="#"+g.constructShellHash({target:{semanticObject:h.semanticObject,action:h.action}});}l=t._getLastNavActionFromStorage();l.time=new Date();l.navigationHash=n;l.tileDebugInfo=this.getDebugInfo();b=sap.ui.getCore().byId(this.getId());c=b.getModel();d=this.getBindingContext();e=d.getPath();l.tileTitle=d.getModel().getProperty(e).title;t._putInSessionStorage("sap.ushell.UserActivityLog.lastNavigationActionData",JSON.stringify(l));t.addMessage(t.messageType.ACTION,"Click on Tile: "+c.getData().title+" Tile debugInfo: "+this.getDebugInfo());}o.apply(this,arguments);};},_addMessageInternal:function(t,m,b){var l=this._getLoggingQueueFromStorage(),c={type:null},p;for(p in this.messageType){if(t===this.messageType[p]){c.type=p;break;}}if(c.type===null){return;}jQuery.extend(c,{messageID:b,messageText:m,time:new Date(),toString:function(){var d=[this.type,this.time];if(typeof this.messageID!=="undefined"){d.push(this.messageID);}d.push(this.messageText);return d.join(" :: ");}});l.push(c);if(l.length>this._maxLoggedMessages){l.shift();}this._putInSessionStorage("sap.ushell.UserActivityLog.loggingQueue",JSON.stringify(l));},_handleActionEventHub:function(e){this._handleAction("",e.sId,e.oData);},_handleAction:function(c,e,d){var m;switch(e){case"deleteTile":m="Delete Tile "+(d.tileId||"");break;case"moveTile":m="Move Tile "+(d.sTileId||"")+" to Group "+(d.toGroupId||"");break;case"createGroupAt":m="Create Group";break;case"changeGroupTitle":m="Change Group Title of "+(d.groupId||"")+" to "+(d.newTitle||"");break;case"deleteGroup":m="Delete Group "+(d.groupId||"");break;case"addTile":var t=d.catalogTileContext.oModel.oData,s=d.catalogTileContext.sPath,b=this._findInModel(s,t),f=b.id,g=d.groupContext.getObject(),h=g.groupId;m="Add Tile "+(f||"")+" to Group "+(h||"");break;case"moveGroup":m="Move Group from index "+(d.fromIndex||"")+" to index "+(d.toIndex||"");break;case"appOpened":m="Open application "+d.action;var l=this._getLastNavActionFromStorage();l.applicationInformation={};["applicationType","ui5ComponentName","url","additionalInformation","text"].forEach(function(p){l.applicationInformation[p]=d[p];});if(!this._hashSegmentsEqual(l.navigationHash,d.sShellHash)){l.tileDebugInfo="";}l.navigationHash=d.sShellHash;this._putInSessionStorage("sap.ushell.UserActivityLog.lastNavigationActionData",JSON.stringify(l));break;case"addBookmarkTile":m="Add Bookmark "+(d.title||"")+" "+(d.subtitle||"")+" for URL: "+(d.url||"");break;case"showCatalog":m="Show Catalog";break;default:break;}this.addMessage(this.messageType.ACTION,m);},_findInModel:function(p,m){var b,c=m,i,d;try{b=p.split("/");for(i=0;i<b.length;i=i+1){if(d!==b[i]){continue;}c=c[d];}}catch(e){return undefined;}return c;},_getUserDetails:function(){var b=sap.ushell.Container.getUser();return{fullName:b.getFullName()||"",userId:b.getId()||"",eMail:b.getEmail()||"",Language:b.getLanguage()||""};},_getShellState:function(){var v=sap.ui.getCore().byId("viewPortContainer"),m,r="";if(v!==undefined){m=v.getModel();r=m.getProperty("/currentState/stateName");}return r;},_getLoggingQueueFromStorage:function(){var l=this._getFromSessionStorage("sap.ushell.UserActivityLog.loggingQueue");var q=[];if(l){try{q=JSON.parse(l);}catch(e){}}return q;},_getLastNavActionFromStorage:function(){var l=this._getFromSessionStorage("sap.ushell.UserActivityLog.lastNavigationActionData");return(l?JSON.parse(l):{});},_hashSegmentsEqual:function(b,c){if((!b)||(!c)){return false;}return(this._getHashSegment(b)===this._getHashSegment(c));},_getHashSegment:function(b){var i=b.indexOf("~"),c;if(i>-1){return b.substring(0,i);}c=b.indexOf("?");if(c>-1){return b.substring(0,c);}return b;},_getFromSessionStorage:function(k){var r=null;try{r=sessionStorage.getItem(k);}catch(e){}return r;},_putInSessionStorage:function(k,v){try{sessionStorage.setItem(k,v);}catch(e){}}};var a=new U();return a;},true);
sap.ui.predefine('sap/ushell/_ApplicationType/guiResolution',["sap/ui/thirdparty/URI","sap/ushell/_ApplicationType/utils","sap/ushell/_ApplicationType/systemAlias","sap/ushell/services/_ClientSideTargetResolution/Utils","sap/ushell/services/_ClientSideTargetResolution/ParameterMapping","sap/ui/thirdparty/jquery","sap/base/Log"],function(U,a,S,c,p,q,L){"use strict";function r(O,K){K.forEach(function(s){delete O[s];});}function i(P,I){return I&&I.signature&&I.signature&&I.signature.parameters&&I.signature.parameters[P]&&I.signature.parameters[P].required===true;}function g(E,I){var y=i("DYNP_OKCODE",I)||i("DYNP_NO1ST",I);var B=[];if(y){return[];}var z=b(E);function A(s){return s.toUpperCase();}var N=Object.keys(z).map(A).sort();function C(s,D){if(s.length!==D.length){return false;}return s.every(function(F,G){return s[G]===D[G];});}if(C(["DYNP_NO1ST","DYNP_OKCODE"],N)||C(["DYNP_OKCODE"],N)||C(["DYNP_NO1ST"],N)){B=Object.keys(z);}return B;}function b(P){var B=c.filterObject(P,d);return B;}function d(N,V){var s;if(arguments.length===1){s=N.split(/[=](.+)?/);if(s.length>1){return d.apply(null,s);}}return!(N.indexOf("sap-")===0||N.charAt(0)==="~");}function e(M,B,E){var I=M.inbound;var R=I&&I.resolutionResult;if(!(!I||!R||!(R["sap.gui"])||!(R.applicationType==="TR"))){return l(M,B,E);}if(!(!I||!R||!(R.applicationType==="TR")||!(R.url.indexOf("/~canvas;")>=0)||!(R.url.indexOf("app/transaction/APB_LPD_CALL_")===-1))){return n(M,B,E);}if(!(!I||!R||!(R.applicationType==="TR")||!(R.url.indexOf("/~canvas;")>=0)||!(R.url.indexOf("app/transaction/APB_LPD_CALL_")>=0))){return m(M,B,E);}if(!(!I||!R||!(R.applicationType==="TR")||!(R.url.indexOf("/its/webgui")>=0)||!(R.url.indexOf("APB_LPD_CALL_")===-1))){return o(M,B,E);}if(!(!I||!R||!(R.applicationType==="TR")||!(R.url.indexOf("/its/webgui")>=0)||!(R.url.indexOf("APB_LPD_CALL_")!==-1))){return k(M,B,E);}throw new Error("Cannot generate TR resolution result");}function f(T,s,y,E){var z,A;z="/gui/sap/its/webgui?%7etransaction="+T+"&%7enosplash=1";A=new U(z);return S.spliceSapSystemIntoURI(A,S.LOCAL_SYSTEM_ALIAS,s,y,"NATIVEWEBGUI",S.SYSTEM_ALIAS_SEMANTICS.apply,E);}function h(Q,P,s,y){var I,z="P_OBJECT"+y,M=132;var A=a.getURLParsing().privparamsToString(P,"%25","%21");if(!A){return Q;}var B="";j("P_OBJECT",Q,s,y,function(E){var F=E.replace(z,"");B=decodeURIComponent(F);if(B.length>0){B=B+"%25";}return z;});A=B+A;var C={pObjX:"",pObject:""};A.match(new RegExp(".{1,"+M+"}","g")).map(function(E){return encodeURIComponent(E);}).forEach(function(E,G){var F="P_OBJECT";var H="pObject";if(G>0){F="P_OBJ"+G;H="pObjX";}var J=C[H].length===0?"":s;C[H]=C[H]+J+F+y+E;});I=[C.pObjX,C.pObject].filter(function(E){return E.length>0;}).join(s);var D=j("P_OBJECT",Q,s,y,function(F){return I;});if(D.found){return D.query;}return Q+(Q.length===0?"":s)+I;}function j(T,Q,s,y,A){var F=false,P=T+y;var z=Q.split(s).map(function(B){if(B.indexOf(P)!==0){return B;}F=true;return A(B);}).filter(function(B){return typeof B!=="undefined";}).join(s);return{found:F,query:z};}function k(M,B,E){var I=M.inbound,s=I&&I.resolutionResult,R={};var W=new U(B);var y=q.extend(true,{},M.mappedIntentParamsPlusSimpleDefaults);var z=y["sap-system"]&&y["sap-system"][0];var A=y["sap-system-src"]&&y["sap-system-src"][0];R["sap-system"]=z;delete y["sap-system"];if(typeof A==="string"){R["sap-system-src"]=A;delete y["sap-system-src"];}return new Promise(function(C,D){S.spliceSapSystemIntoURI(W,s.systemAlias,z,A,"NATIVEWEBGUI",s.systemAliasSemantics||S.SYSTEM_ALIAS_SEMANTICS.applied,E).fail(D).done(function(W){var P=W.search();var F=P.split("&").map(function(Q){var G;if(Q.indexOf("?%7etransaction")===0||Q.indexOf("%7etransaction")===0){G=h(Q,y,"%3b","%3d");return G;}return Q;}).join("&");W.search(F);["additionalInformation","applicationDependencies"].forEach(function(G){if(I.resolutionResult.hasOwnProperty(G)){R[G]=I.resolutionResult[G];}});R.url=W.toString();R.text=I.title;R.applicationType="TR";a.setSystemAlias(R,I.resolutionResult);C(R);});});}function l(M,B,E){var I=M.inbound,s=I&&I.resolutionResult,y=M.mappedIntentParamsPlusSimpleDefaults||{};var z=s.systemAlias;if(y["sap-system"]){z=y["sap-system"][0];}var A;if(y["sap-system-src"]){A=y["sap-system-src"][0];}return new Promise(function(R,C){f(I.resolutionResult["sap.gui"].transaction,z,A,E).done(function(D){p.mapParameterNamesAndRemoveObjects(M);var F=t(M.inbound,M.mappedIntentParamsPlusSimpleDefaults,D);if(F&&M.inbound&&M.inbound.resolutionResult&&M.inbound.resolutionResult["sap.platform.runtime"]){F["sap.platform.runtime"]=M.inbound.resolutionResult["sap.platform.runtime"];}F["sap-system"]=z;a.setSystemAlias(F,I.resolutionResult);R(F);}).fail(C);});}function m(M,B,E){var I=M.inbound,s=I&&I.resolutionResult;var R={};var W=new U(B);var y=q.extend(true,{},M.mappedIntentParamsPlusSimpleDefaults);var z=y["sap-system"]&&y["sap-system"][0];var A=y["sap-system-src"]&&y["sap-system-src"][0];R["sap-system"]=z;delete y["sap-system"];if(typeof A==="string"){R["sap-system-src"]=A;delete y["sap-system-src"];}return new Promise(function(C,D){S.spliceSapSystemIntoURI(W,s.systemAlias,z,A,"WEBGUI",s.systemAliasSemantics||S.SYSTEM_ALIAS_SEMANTICS.applied,E).fail(D).done(function(W){var P=W.search();P=h(P,y,"&","=");W.search(P);["additionalInformation","applicationDependencies"].forEach(function(F){if(I.resolutionResult.hasOwnProperty(F)){R[F]=I.resolutionResult[F];}});R.url=W.toString();R.text=I.title;R.applicationType="NWBC";a.setSystemAlias(R,I.resolutionResult);C(R);});});}function n(M,B,E){var I=M.inbound,s=I&&I.resolutionResult;var R={};var W=new U(B);var y=q.extend(true,{},M.mappedIntentParamsPlusSimpleDefaults);var z=y["sap-system"]&&y["sap-system"][0];var A=y["sap-system-src"]&&y["sap-system-src"][0];R["sap-system"]=z;delete y["sap-system"];if(typeof A==="string"){R["sap-system-src"]=A;delete y["sap-system-src"];}var C=g(y,I||{});r(y,C);return new Promise(function(D,F){S.spliceSapSystemIntoURI(W,s.systemAlias,z,A,"WEBGUI",R.systemAliasSemantics||S.SYSTEM_ALIAS_SEMANTICS.applied,E).fail(F).done(function(W){var G=a.getURLParsing().paramsToString(y);var P=W.search();if(G){P=P+((P.indexOf("?")<0)?"?":"&")+G;}W.search(P);["additionalInformation","applicationDependencies"].forEach(function(H){if(I.resolutionResult.hasOwnProperty(H)){R[H]=I.resolutionResult[H];}});R.url=W.toString();R.text=I.title;R.applicationType="NWBC";a.setSystemAlias(R,I.resolutionResult);D(R);});});}function o(M,B,E){var I=M.inbound,R=I&&I.resolutionResult,F={"sap-wd-run-sc":true,"sap-wd-auto-detect":true,"sap-ep-version":true,"sap-system":true,"sap-system-src":true};var W=new U(B);var s=q.extend(true,{},M.mappedIntentParamsPlusSimpleDefaults);var y=s["sap-system"]&&s["sap-system"][0];var z=s["sap-system-src"]&&s["sap-system-src"][0];Object.keys(s).forEach(function(P){if(F[P.toLowerCase()]){delete s[P];}});return new Promise(function(A,C){S.spliceSapSystemIntoURI(W,R.systemAlias,y,z,"NATIVEWEBGUI",R.systemAliasSemantics||S.SYSTEM_ALIAS_SEMANTICS.applied,E).fail(C).done(function(W){var R=t(M.inbound,M.mappedIntentParamsPlusSimpleDefaults,W);A(R);});});}function t(I,M,W){var F={"sap-wd-run-sc":true,"sap-wd-auto-detect":true,"sap-ep-version":true,"sap-system":true};var R={};var E=q.extend(true,{},M);var s=E["sap-system"]&&E["sap-system"][0];var y=E["sap-system-src"]&&E["sap-system-src"][0];R["sap-system"]=s;if(typeof y==="string"){R["sap-system-src"]=y;}Object.keys(E).forEach(function(D){if(F[D.toLowerCase()]){delete E[D];}});var z=g(E,I||{});r(E,z);var A=u(E);r(E,Object.keys(A));var P=W.search();var B=P.split("&").map(function(Q){var N;if(!d(Q)){if(Q.indexOf("=")>=0){N=Q.split("=");if(!A.hasOwnProperty(N[0])){A[N[0]]=N[1];}}else{L.error("Found no '=' separator of Webgui non-business parameter. Parameter will be skipped.","'"+Q+"'","sap.ushell.services.ClientSideTargetResolution");}return undefined;}var D;if(Q.indexOf("?%7etransaction")===0||Q.indexOf("%7etransaction")===0){D=w(Q,E,"%3b","%3d");return D;}return Q;}).filter(function(D){return typeof D!=="undefined";}).join("&");var C=a.getURLParsing().paramsToString(A);B=[B,C.replace("~","%7e")].join("&");W.search(B);["additionalInformation","applicationDependencies","sap.platform.runtime"].forEach(function(D){if(I.resolutionResult.hasOwnProperty(D)){R[D]=I.resolutionResult[D];}});R.url=W.toString();R.text=I.title;R.applicationType="TR";a.setSystemAlias(R,I.resolutionResult);return R;}function u(P){var N;N=c.filterObject(P,function(K,V){return!d(K,V);});return N;}function v(T){var s="^(.+?)(%20|(%20)(.+))?$",y=new RegExp(s,"i"),z,P={hasParameters:null,transactionParamName:"",transactionCode:"",parameters:[]};var A=T.split("=");if(A.length>2){return{"error":"Found more than one assignment ('=') in the transaction query parameter","details":"Only one '=' sign is expected in "+T};}if(A.length<2||typeof A[1]==="undefined"||A[1].length===0){return{"error":"The transaction query parameter must specify at least the transaction name","details":"Got "+T+" instead."};}P.transactionParamName=A[0];z=A[1];var M=z.match(y);if(!M){return{"error":"Cannot parse ~transaction query parameter value.","details":z+" should match /"+s+"/"};}P.transactionCode=M[1];if(M[2]&&M[2]!=="%20"){var B=M[4]||"";B.split("%3b").forEach(function(N){var C=N.split("%3d"),D=C[0];if(D&&typeof D==="string"&&D.length>0){P.parameters.push({name:D,value:C[1]});}});}P.hasParameters=false;if(P.parameters.length>0){P.hasParameters=true;P.transactionCode=P.transactionCode.replace(/^[*]/,"");}return P;}function w(T,P){var s=v(T);if(s.error){L.error(s.error,s.details,"sap.ushell.services.ClientSideTargetResolution");return T;}var y=s.parameters.map(function(C){return C.name.toUpperCase()+"%3d"+C.value;});var D,A=true;if(P.hasOwnProperty("DYNP_SKIP_SEL_SCREEN")){D=P["DYNP_SKIP_SEL_SCREEN"];delete P["DYNP_SKIP_SEL_SCREEN"];if(D[0]===""||D[0]===" "||D[0]==="0"||D[0]===0||(D[0]&&D[0].toLowerCase()==="false")){A=false;}}var z={};Object.keys(P).forEach(function(K){z[K.toUpperCase()]=P[K];});var B=a.getURLParsing().privparamsToString(z,"%3b","%3d");if(B){y.push(B);}var H=y.length>0;return s.transactionParamName+"="+(H&&A?"*":"")+s.transactionCode+(H?"%20":"")+y.join("%3b");}function x(I,M,E){return new Promise(function(R,s){var y;if(I.params["sap-system-src"]){y=I.params["sap-system-src"][0];}var z=I.params["sap-system"]?I.params["sap-system"][0]:undefined;var A=I.params["sap-ui2-tcode"]?I.params["sap-ui2-tcode"][0]:undefined;f(A,z,y,E).done(function(B){delete M.intentParamsPlusAllDefaults["sap-ui2-tcode"];p.mapParameterNamesAndRemoveObjects(M);var C=t(M.inbound,M.mappedIntentParamsPlusSimpleDefaults,B);if(C&&M.inbound&&M.inbound.resolutionResult&&M.inbound.resolutionResult["sap.platform.runtime"]){C["sap.platform.runtime"]=M.inbound.resolutionResult["sap.platform.runtime"];}C["sap-system"]=z;C.text=A;R(C);}).fail(function(B){s(B);});});}return{generateTRResolutionResult:e,resolveEasyAccessMenuIntentWebgui:x,injectEffectiveParametersIntoWebguiQueryParam:w,injectEffectiveParametersIntoWebguiPobjectParam:h,amendGuiParam:j,parseWebguiTransactionQueryParam:v,getWebguiNonBusinessParameters:u,getWebguiBusinessParameters:b,isWebguiBusinessParameter:d,buildNativeWebGuiURI:f,constructFullWebguiResolutionResult:l};},false);
sap.ui.predefine('sap/ushell/_ApplicationType/systemAlias',["sap/ui/thirdparty/URI","sap/ushell/utils","sap/ui/thirdparty/jquery","sap/base/util/isPlainObject","sap/base/Log"],function(U,u,q,i,L){"use strict";var S="";var O={apply:"apply",applied:"applied"};function a(o){return(o.protocol()||"").length>0;}function r(l,m,E){var n=typeof m==="string";var o=[l];if(n){o.unshift(m);}var K=u.generateLocalStorageKey("sap-system-data",o);var p=u.getLocalStorage();var t=p.getItem(K);var w={};if(t){try{w=JSON.parse(t);}catch(x){return new q.Deferred().reject("Cannot parse system data from local storage at key '"+K+"'. Data: "+t);}return new q.Deferred().resolve(w).promise();}else if(n){return new q.Deferred().reject("Cannot find data for system '"+l+"' in local storage using key '"+K+"'");}if(!E){return new q.Deferred().reject("fallback: the adapter does not implement resolveSystemAlias").promise();}return E(l);}function b(l,m,o,n,E){var N=o,D=new q.Deferred();r(l,m,E).fail(function(p){D.reject(p);}).done(function(R){var V=v(R);if(!V.isValid){h(V);D.reject("Invalid system alias definition");return D;}var p=g(R,new U(window.location.toString()).protocol()),t=R[p],Q,w,x;if(l===S&&t.host===""&&(t.port===0||t.port==="")){p="";}N.protocol(p);N.hostname(t.host);N.port(t.port);k(N,n,t.pathPrefix,E).fail(function(y){D.reject(y);}).done(function(N){Q=N.query();if(typeof R.client==="string"&&R.client!==""){Q=Q+(Q.length>0?"&":"")+"sap-client="+R.client;}if(typeof R.language==="string"&&R.language!==""){w=R.language;}else{x=sap.ushell.Container.getUser();if(!x){L.error("Cannot retieve the User object via sap.ushell.Container while determining sap-language","will default to 'en' language","sap.ushell.services.ClientSideTargetResolution");w="en";}else{w=x.getLanguage();}}Q=Q+(Q.length>0?"&":"")+"sap-language="+w;N.query(Q);if(R.hasOwnProperty("rfc")&&n==="NATIVEWEBGUI"){var W=d(R.rfc,t.host,N);var P=N.path()+";"+W;N.path(P);o._parts.path=P;}D.resolve(N);});});return D.promise();}function s(o,l,m,n,p,t,E){var D=new q.Deferred();if(t!==O.apply&&t!==O.applied){throw new Error("Invalid system alias semantic was provided: '"+t+"'");}if(t===O.applied&&((typeof m==="undefined"||l===m))){return D.resolve(o).promise();}if(t===O.apply&&typeof l==="undefined"&&typeof m==="undefined"){return D.resolve(o).promise();}if(p==="URL"&&t==O.applied){return c(o,l,m,n,E);}(new Promise(function(R){if(t===O.apply){R({targetUri:o,alias:m||l,sapSystemSrc:m?n:undefined});return;}e(o,l,undefined,p,E).fail(function(w){D.reject(w);}).done(function(w){R({targetUri:w,alias:m});});})).then(function(A){b(A.alias,A.sapSystemSrc,A.targetUri,p,E).fail(function(w){D.reject(w);}).done(function(I){D.resolve(I);});});return D.promise();}function c(o,l,m,n,E){var D=new q.Deferred();if(l===S||typeof l==="undefined"){if(a(o)){return D.resolve(o);}b(m,n,o,"URL",E).fail(function(p){D.reject(p);}).done(function(p){D.resolve(p);});return D.promise();}r(l,n,E).fail(function(p){D.reject(p);}).done(function(R){var p=g(R,new U(window.location.toString()).protocol()),t=R[p],w;if((o.protocol()||"").toLowerCase()===p&&(o.hostname()||"")===t.host&&(o.path().indexOf(t.pathPrefix)===0)){o.protocol("");o.hostname("");w=o.path().replace(t.pathPrefix,"");o.path(w);j(o,["sap-language","sap-client"]);b(m,n,o,"URL",E).fail(function(x){D.reject(x);}).done(function(x){D.resolve(x);});}else{D.resolve(o);}});return D.promise();}function d(l,m){var R,n,I,t,p;I=!!l.systemId;if(I){t=[l.systemId&&("~sysid="+l.systemId),l.loginGroup&&("~loginGroup="+l.loginGroup),l.sncNameR3&&("~messageServer="+encodeURIComponent(l.sncNameR3)),l.sncNameR3&&("~sncNameR3="+encodeURIComponent(l.sncNameR3)),l.sncQoPR3&&("~sncQoPR3="+l.sncQoPR3)].filter(function(o){return(typeof o==="string")&&(o!=="");});}else{p=(l.host||"");n=p.toLowerCase()===m.toLowerCase();R=/^[/][HGMR][/].*/.test(p);if(p.length>0&&!n&&!R){L.error("Invalid connect string provided in 'host' field of system alias","Data for rfc destination provided are: "+JSON.stringify(l,null,3),"sap.ushell.services.ClientSideTargetResolution");}t=[p&&!R&&!n&&("~rfcHostName="+p),R&&("~connectString="+encodeURIComponent(p)),l.service&&("~service="+l.service),l.sncNameR3&&("~sncNameR3="+encodeURIComponent(l.sncNameR3)),l.sncQoPR3&&("~sncQoPR3="+l.sncQoPR3)].filter(function(o){return(typeof o==="string")&&(o!=="");});}return t.join(";").replace(/(%[A-F0-9]{2})/g,function(E){return E.toLowerCase();});}function e(o,l,m,n,E){var D=new q.Deferred();if(typeof l==="undefined"){f(o,l,n,undefined,E).fail(function(p){D.reject(p);}).done(function(N){D.resolve(N);});return D.promise();}r(l,m,E).fail(function(p){D.reject(p);}).done(function(R){f(o,l,n,R,E).fail(function(p){D.reject(p);}).done(function(N){D.resolve(N);});});return D.promise();}function f(o,l,m,R,E){var n,p,t,w,D=new q.Deferred(),P=new q.Deferred();o.protocol("");o.hostname("");o.port("");j(o,["sap-client","sap-language"]);if(!i(R)||typeof l!=="string"){return D.resolve(o).promise();}p=g(R,new U(window.location.toString()).protocol());n=R[p];w=(typeof n.pathPrefix==="string")&&n.pathPrefix;if(w!==""){P.resolve(w);}else{r("",undefined,E).fail(function(x){D.reject(x);}).done(function(x){var y=x[p];P.resolve(y.pathPrefix);});}P.fail(function(x){D.reject(x);}).done(function(w){if(w&&w.length>0){t=o.path();t=t.replace(w,"");if(t.indexOf("/")!==0){t="/"+t;}o.path(t);}if(m==="NATIVEWEBGUI"&&R.hasOwnProperty("rfc")){t=o.path();t=t.split(";").filter(function(x){return x.indexOf("~sysid=")!==0&&x.indexOf("~service=")!==0&&x.indexOf("~loginGroup=")!==0&&x.indexOf("~messageServer=")!==0&&x.indexOf("~sncNameR3=")!==0&&x.indexOf("~sncQoPR3=")!==0;}).join(";");o.path(t);}D.resolve(o);});return D.promise();}function g(o,B){if(o.hasOwnProperty("https")){return"https";}if(o.hasOwnProperty("http")){return"http";}L.error("Cannot select which system alias to pick between http/https","make sure they are provided in the given system alias collection","sap.ushell.services.ClientSideTargetResolution");return undefined;}function h(V){L.error("Invalid system alias definition: "+V.debug,"ERRORS:"+V.errors.map(function(E){return"\n - "+E;}).join(""),"sap.ushell.ApplicationType");}function v(R){function l(F){var E=[];if(typeof F.host!=="string"){E.push("host field must be a string");}if(typeof F.port!=="number"&&typeof F.port!=="string"){E.push("port field must be a number or a string");}if(typeof F.pathPrefix!=="string"){E.push("pathPrefix field must be a string");}return E;}var E=[],H=R.hasOwnProperty("https"),m=R.hasOwnProperty("http");if(!m&&!H){E.push("at least one of 'http' or 'https' fields must be defined");}if(H){l(R.https).forEach(function(n){E.push("https>"+n);});}if(m){l(R.http).forEach(function(n){E.push("http>"+n);});}if(E.length>0){return{isValid:false,errors:E,debug:JSON.stringify(R,null,3)};}return{isValid:true};}function j(o,p){var B={},t;p.forEach(function(P){B[P]=true;});t=o.query();t=t.split("&").filter(function(P){var l=(P.split("=")[0]||"").toLowerCase();return!B.hasOwnProperty(l);}).join("&");o.query(t);}function k(o,l,p,E){var D=new q.Deferred(),t;if(l==="URL"&&p.length===0){return D.resolve(o).promise();}function m(P){var R=P+o.path();o.path(R.replace(/\/+/g,"/"));D.resolve(o);}r("",undefined,E).fail(function(n){D.reject(n);}).done(function(R){var n=g(R,new U(window.location.toString()).protocol());var w=R[n].pathPrefix;var P=p===w;if(p.length>0&&!P){if((l==="WDA"||l==="WEBGUI")&&o.path().indexOf("~canvas")>=0){t=o.path();t="/~canvas"+t.split("~canvas")[1];o.path(t);}}if(p.length===0){m(w);}else{m(p);}});return D.promise();}return{LOCAL_SYSTEM_ALIAS:S,SYSTEM_ALIAS_SEMANTICS:O,spliceSapSystemIntoURI:s,isAbsoluteURI:a,stripURI:e,selectSystemAliasDataName:g,constructNativeWebguiParameters:d};},false);
sap.ui.predefine('sap/ushell/_ApplicationType/utils',["sap/ui/thirdparty/URI","sap/ushell/utils","sap/ushell/_ApplicationType/systemAlias"],function(U,u,s){"use strict";var a;function g(){if(!a){a=sap.ushell.Container.getService("URLParsing");}return a;}function b(o,S,f){if(!f||f===s.SYSTEM_ALIAS_SEMANTICS.applied){return s.isAbsoluteURI(o)&&!S;}if(f===s.SYSTEM_ALIAS_SEMANTICS.apply){return s.isAbsoluteURI(o);}throw new Error("Invalid system alias semantics: '"+f+"'");}function c(p,f){var S,F;if(p){var h=f.match(/#.*/);if(h){F=h;S=f.replace(h,"");}else{S=f;F="";}f=S+((f.indexOf("?")<0)?"?":"&")+p+F;}return f;}function d(p,f){var a=g();var h=f.match(/#.*/);var i=h&&h[0];if(!i){var P=a.paramsToString(p);return c(P,f);}var j=a.parseShellHash(i);Object.keys(p).forEach(function(n){var o=p[n];j.params[n]=[o];});var k=Object.keys(j.params).reduce(function(o,K){var v=j.params[K];var V=v.map(function(n){return encodeURIComponent(n);});o[encodeURIComponent(K)]=V;return o;},{});j.params=k;var l=f.replace(i,"");var m=a.constructShellHash(j);return l+"#"+m;}function e(r,f){if(r["sap-system"]&&r["sap-system"]!=null&&r["sap-system"]!=undefined&&r["sap-system"]!=""){r.systemAlias=r["sap-system"];}else{r.systemAlias=f.systemAlias;}if(r.systemAlias===undefined){delete r.systemAlias;}}return{getURLParsing:g,appendParametersToUrl:c,appendParametersToIntentURL:d,absoluteUrlDefinedByUser:b,setSystemAlias:e};},false);
sap.ui.predefine('sap/ushell/_ApplicationType/wdaResolution',["sap/ui/thirdparty/URI","sap/ushell/_ApplicationType/utils","sap/ushell/_ApplicationType/systemAlias","sap/ui/thirdparty/jquery","sap/base/util/ObjectPath"],function(U,a,s,q,O){"use strict";function c(p,m){return new Promise(function(R,j){var E=q.extend(true,{},p);if(m.length>0){E["sap-ushell-defaultedParameterNames"]=[JSON.stringify(m)];}delete E["sap-system"];sap.ushell.Container.getService("ShellNavigation").compactParams(E,["sap-xapp-state","sap-ushell-defaultedParameterNames","sap-intent-params","sap-iframe-hint"],undefined,true).fail(function(k){j(k);}).done(function(o){var k=a.getURLParsing().paramsToString(o);R(k);});});}function b(u,j){var p=u.search();if(j){p=p+((p.indexOf("?")<0)?"?":"&")+j;}return u.search(p).toString();}function d(A,C,I,o,E){var S,j,u,k,l,m=q.extend(true,{},o);if(C){m["sap-wd-configId"]=C;}if(m["sap-system"]){S=m["sap-system"][0];delete m["sap-system"];}if(m.hasOwnProperty("sap-system-src")){j=m["sap-system-src"][0];delete m["sap-system-src"];}l=a.getURLParsing().paramsToString(m);if(I){u=e(A,l);}else{u=f(A,l);}k=new U(u);return s.spliceSapSystemIntoURI(k,s.LOCAL_SYSTEM_ALIAS,S,j,"WDA",s.SYSTEM_ALIAS_SEMANTICS.apply,E);}function e(A,u){return"/ui2/nwbc/~canvas;window=app/wda/"+A+"/"+"?"+u;}function f(n,u){var N=n.indexOf("/")!==0;if(N){n="sap/"+n;}return"/webdynpro/"+n+"?"+u;}function g(I,F,S,j){var R={"sap-system":S,url:F,text:I.title,applicationType:"NWBC"};if(typeof j==="string"){R["sap-system-src"]=j;}a.setSystemAlias(R,I.resolutionResult);["additionalInformation","applicationDependencies"].forEach(function(p){if(I.resolutionResult.hasOwnProperty(p)){R[p]=I.resolutionResult[p];}});return R;}function h(m,B,E){var I=O.get("inbound.resolutionResult",m),M=m.mappedIntentParamsPlusSimpleDefaults||{};var S=I.systemAlias;if(M["sap-system"]){S=M["sap-system"][0];}var j;if(M["sap-system-src"]){j=M["sap-system-src"][0];}var o={"sap-system":[S]};if(typeof j==="string"){o["sap-system-src"]=[j];}var C=I["sap.wda"].compatibilityMode;if(C===undefined){C=true;}return new Promise(function(R,k){d(I["sap.wda"].applicationId,I["sap.wda"].configId,C,o,E).done(function(w){var M=m.mappedIntentParamsPlusSimpleDefaults;c(M,m.mappedDefaultedParamNames).then(function(u){var F=b(w,u);var S=M["sap-system"]&&M["sap-system"][0];var j=M["sap-system-src"]&&M["sap-system-src"][0];var l=g(m.inbound,F,S,j);R(l);},function(l){k(l);});}).fail(function(l){k(l);});});}function i(m,B,E){var I=m.inbound,o=I&&I.resolutionResult,M=m.mappedIntentParamsPlusSimpleDefaults;var w=new U(B);var S=M["sap-system"]&&M["sap-system"][0];var j=M["sap-system-src"]&&M["sap-system-src"][0];return Promise.all([(new Promise(function(D,R){s.spliceSapSystemIntoURI(w,o.systemAlias,S,j,"WDA",o.systemAliasSemantics||s.SYSTEM_ALIAS_SEMANTICS.applied,E).fail(R).done(D);})),c(M,m.mappedDefaultedParamNames)]).then(function(R){var W=R[0];var u=R[1];var F=b(W,u);var k=g(I,F,S,j);return k;},function(k){return Promise.reject(k);});}function r(I,m,E){var C,A,o,j=true;A=I.params["sap-ui2-wd-app-id"][0];C=(O.get("params.sap-ui2-wd-conf-id",I)||[])[0];o=Object.keys(I.params).reduce(function(R,p){if(p!=="sap-ui2-wd-app-id"&&p!=="sap-ui2-wd-conf-id"){R[p]=I.params[p];}return R;},{});return new Promise(function(R,k){d(A,C,j,o,E).done(function(u){var S=I.params.hasOwnProperty("sap-system-src")&&I.params["sap-system-src"][0];var l=I.params.hasOwnProperty("sap-system")&&I.params["sap-system"][0];var n={url:u.toString(),applicationType:"NWBC",text:A,additionalInformation:"","sap-system":l};if(typeof S==="string"){n["sap-system-src"]=S;}if(m&&m.inbound&&m.inbound.resolutionResult&&m.inbound.resolutionResult["sap.platform.runtime"]){n["sap.platform.runtime"]=m.inbound.resolutionResult["sap.platform.runtime"];}R(n);}).fail(function(l){k(l);});});}return{resolveEasyAccessMenuIntentWDA:r,constructFullWDAResolutionResult:h,constructWDAResolutionResult:i};},false);
sap.ui.predefine('sap/ushell/_Config/utils',[],function(){"use strict";function i(p,C){var e=[];var n=[];var o=C;var f=false;var P=p.split("/");P.shift();P.forEach(function(g){if(!f&&o.hasOwnProperty(g)){o=o[g];e.push(g);return;}f=true;n.push(g);});return{contractPart:"/"+e.join("/"),nonContractPart:n};}function a(v){return v&&v.isA&&v.isA("sap.ui.model.Context");}function w(C,p,o,v){var D=o;p.forEach(function(P,I){if(I===p.length-1){D[P]=v;return;}if(!D.hasOwnProperty(P)){throw new Error("Cannot find "+P+" inside "+C);}D=D[P];});}function c(p){var P=function(e){return p+e;};if(typeof p==="object"){var S="/";P=function(e){var f=e.split(S);f.shift();var F=f.shift();return p[F]+(f.length>0?S+f.join(S):"");};}return P;}function b(p,m,P){var f=c(P);var F=f(p);if(a(m)&&p.charAt(0)!=="/"){var r=m.getPath()+"/"+p;F=f(r);}return F;}function s(f,C,m,p){m.setData=function(P,D){throw new Error("not yet implemented");};m.setProperty=function(P,D,M){var F=b(P,M,p);var I=i(F,C);if(I.nonContractPart.length===0){f.emit(I.contractPart,D);return;}var B=f.last(I.contractPart);w(I.contractPart,I.nonContractPart,B,D);f.emit(I.contractPart,B);};return m;}function d(f,C,p,e){var m,S,g,P;if(typeof p==="string"){var h=p;P=h;var I=f.last(h);if(Object.prototype.toString.apply(I)!=="[object Object]"){throw new Error("Cannot bind on leaf property of Configuration: '"+h+"'");}m=new e(I);g=m.setData.bind(m);f.on(h).do(function(v){g(v);});return s(f,C,m,P);}if(Object.prototype.toString.apply(p)==="[object Object]"){var D=p;var M=Object.keys(D).reduce(function(M,k){var j=D[k];M[k]=f.last(j);f.on(j).do(function(k,v){S("/"+k,v);}.bind(null,k));return M;},{});m=new e(M);S=m.setProperty.bind(m);return s(f,C,m,D);}throw new Error("Invalid parameter provided to createModel. Must be an object or a string.");}return{createModel:d};},false);
sap.ui.predefine('sap/ushell/_URLTemplateProcessor/DefinitionParameterSetBuilder',["sap/ushell/_URLTemplateProcessor/TemplateParameterParser","sap/ushell/_URLTemplateProcessor/Resolvers","sap/ushell/_URLTemplateProcessor/utils","sap/ushell/utils/type"],function(t,r,u,T){"use strict";var S="/payload/parameters/names";function b(p,s,d){if(!p||!p.names){return{};}if(!p.hasOwnProperty("mergeWith")){return p.names;}var m=p&&p.mergeWith;if(Array.isArray(m)===false&&typeof m!=="string"){throw new Error("The value of 'mergeWith' can only be a string or an array");}var P=p&&p.names;var D=f(p.mergeWith,s,d,{});var M=D.map(function(a){var o=t.parsePath(d,a);v(o);var c=r.resolvePath(o,{},s,{},{});if(!T.isPlainObject(c)){throw new Error("Cannot merge parameters from '"+a+"'. The path must point to an object");}return c;}).reduce(function(o,a){o=u.mergeObject(o,a);return o;},{});return u.mergeObject(M,P);}function v(p){if(p.pathType==="relative"){throw new Error("Please only specify absolute paths via mergeWith");}p.value.forEach(function(P){if(P.type!=="literal"){throw new Error("Please do not specify references in mergeWith paths");}});}function f(m,s,d,V){if(Array.isArray(m)){return m.reverse();}if(typeof m==="string"){if(V[m]){throw new Error("Detected circular dependency of templates caused by mergeWith statements: ensure the template merges its parameters with a base template.");}V[m]=true;var p=t.parsePath(d,m);v(p);var a=r.resolvePath(p,{},s,{},{});if(!a){throw new Error("The specified mergeWith path does cannot be resolved: '"+m+"'");}var h=S.split("/").slice(1).reduce(function(o,c){if(o.result&&o.obj&&o.obj.hasOwnProperty(c)){o.obj=o.obj[c];}else{o.result=false;}return o;},{obj:a,result:true}).result;if(!h){throw new Error(m+" does not contain "+S+". Please make sure "+m+" points to the root of a URL template.");}return f(a.payload.parameters.mergeWith,s,d,V).concat([m+S]);}return[];}return{buildDefinitionParameterSet:b};},false);
sap.ui.predefine('sap/ushell/_URLTemplateProcessor/DependencyGraph',["sap/ushell/utils/clone"],function(c){"use strict";function i(n){return typeof n==="string"||n.type==="wildcard"||n.type==="literal"||n.type==="intentParameter"||n.type==="reference";}function a(n){return n.type==="reference"&&!n.namespace;}function b(G,p,n){if(!G.hasOwnProperty(p)){G[p]=[];}if(a(n)){G[p].push(n.value);}}function d(p){var D={};var A=b.bind(null,D);Object.keys(p).forEach(function(P){var n=p[P];v(n,P,A);});return D;}function e(n){var N=n.type;if(N==="expression"){return[n.value];}if(N==="function"){return(n.args||[]).concat(n.params||[]);}if(N==="pipe"||N==="path"){return n.value;}throw new Error("Unknown type encountered while building dependency graph: '"+N+"'");}function v(n,p,A){A(p,n);if(i(n)){return;}var N=e(n);N.forEach(function(n){v(n,p,A);});}function g(D){var o=c(D);var n,N,r=[],R={};do{var f=Object.keys(o);n=f.length;f.forEach(function(s){if(o[s].length>0){o[s]=o[s].filter(function(h){var w=!R[h];var m=o.hasOwnProperty(h);return w&&m;});}if(o[s].length===0){delete o[s];r.push(s);R[s]=true;}});N=Object.keys(o).length;}while(n!==N);if(N!==0){throw new Error("Graph of dependencies contains cyclic references");}return r;}return{buildDependencyGraph:d,getDependencyResolutionOrder:g};},false);
sap.ui.predefine('sap/ushell/_URLTemplateProcessor/Functions',["sap/ushell/utils/type","sap/ushell/utils/clone","sap/ushell/_URLTemplateProcessor/utils","sap/ui/thirdparty/URI"],function(t,c,u,U){"use strict";var O={url:{args:["urlPart?"],minValues:0,maxValues:0,fn:function(A){var o=new U();var k=["protocol","scheme","username","password","hostname","port","host","userinfo","authority","origin","subdomain","domain","tld","pathname","path","directory","filename","suffix","search","query","hash","fragment","resource"];var m="toString";if(A.urlPart){if(k.indexOf(A.urlPart)===-1){throw new Error("The URL part '"+A.urlPart+"' is not valid. Please use one of "+k.join(", "));}m=A.urlPart;}return o[m]();}},if:{args:["trueCondition"],minValues:1,maxValues:2,fn:function(A,v){var V=g(v);if(i(A.trueCondition)){return V.length===1?undefined:V.pop();}return V[0];}},and:{args:["emptyCondition?"],minValues:1,fn:function(A,v){var V=g(v);if(typeof A.emptyCondition==="undefined"&&A.length>0){return undefined;}if(typeof A.emptyCondition!=="undefined"&&i(A.emptyCondition)){return undefined;}var l=V.pop();var k=V.every(u.hasValue);return k?l:undefined;}},or:{args:["emptyCondition?"],minValues:1,fn:function(A,v){var V=g(v);if(typeof A.emptyCondition==="undefined"&&A.length>0){return undefined;}if(typeof A.emptyCondition!=="undefined"&&i(A.emptyCondition)){return undefined;}return V.reduce(function(P,n){if(u.hasValue(P)){return P;}return u.hasValue(n)?n:undefined;});}},replace:{args:["strRegExp","strReplace","flags?"],minValues:1,maxValues:1,fn:function(A,v){var k=new RegExp(A.strRegExp,A.flags);var R=A.strReplace||"";if(typeof v===undefined||v===null){return v;}if(t.isArray(v)){if(v.length===1){return O.replace.fn.call(this,A,v[0]);}return v.map(function(V){return O.replace.fn.call(this,A,V);});}if(t.isPlainObject(v)){return Object.keys(v).reduce(function(o,K){var V=v[K];o[K]=O.replace.fn.call(this,A,V);return o;},{});}if(typeof v==="string"){return v.replace(k,R);}return O.replace.fn.call(this,A,v+"");}},join:{args:["macroSeparator?","microSeparator?"],minValues:1,fnPipe:function(A,v){var V=[v];return O.join.fn.call(this,A,V);},fn:function(A,v){var m=A.macroSeparator||"";var M=A.microSeparator||"";v=v.map(function(s){if(!t.isPlainObject(s)&&!t.isArray(s)){return s;}var T=Object.prototype.toString.apply(s);if(T==="[object Object]"){var S=u.removeArrayParameterNotation(s);return Object.keys(S).sort().map(function(k){return k+M+s[k];}).join(m);}if(T==="[object Array]"){return s.join(m);}});return v.join(m);}},match:{args:["strRegex"],minValues:1,fnPipe:function(A,v){var s=A.strRegex;var k=new RegExp(s);return Object.keys(v).reduce(function(o,n){if(k.exec(n)){o[n]=v[n];}return o;},{});},fn:function(A,v){if(v===undefined){return undefined;}var s=A.strRegex;var k=new RegExp(s);var m=v.filter(function(V){var I;if(t.isPlainObject(V)){I=Object.keys(V);}else if(t.isArray(V)){I=V;}else{I=[""+V];}return I.some(k.exec.bind(k));});return m.length===v.length?true:undefined;}},not:{args:[],minValues:1,fnPipe:function(A,v){return Object.keys(v).length>0?undefined:"";},fn:function(A,v){var E=O.and.fn(A,v);return E===undefined?"":undefined;}},stringify:{args:[],minValues:1,fn:function(A,v){if(t.isArray(v)){if(v.length===0){return"";}if(v.length===1){v=v[0];}}if(typeof v==="string"){return v;}return JSON.stringify(v);}},encodeURIComponent:{args:[],minValues:1,maxValues:1,fnPipe:function(A,v){return Object.keys(v).reduce(function(o,k){o[k]=encodeURIComponent(v[k]);return o;},{});},fn:function(A,v){var V=v[0];if(typeof V!=="string"){return V;}return encodeURIComponent(V);}}};function i(v){if(typeof v==="undefined"){return true;}if(typeof v==="string"){return v==="";}if(typeof v==="object"){return Object.keys(v).length===0;}if(typeof v==="number"){return v===0;}if(typeof v==="boolean"){return v===false;}throw new Error("Unexpected type for value");}function g(v){var V;if(t.isArray(v)){V=v;}else if(t.isPlainObject(v)){V=[v];}else if(v===undefined){return[];}else{throw new Error("Unexpected type");}return V;}function a(F,o,v){if(v!==undefined&&!t.isPlainObject(v)){throw new Error("Invalid value type passed to '"+F+"' in pipe context. An object is expected.");}}function b(F,o,v){if(v!==undefined&&!t.isArray(v)){throw new Error("Invalid value type passed to '"+F+"' in value context. An array is expected.");}var n=t.isArray(v)?v.length:0;if(u.hasValue(o.maxValues)&&n>o.maxValues){throw new Error("Too many values were passed to '"+F+"'. Please pass maximum "+o.maxValues+" values.");}if(u.hasValue(o.minValues)&&n<o.minValues){throw new Error("Too few values were passed to '"+F+"'. Please pass minimum "+o.minValues+" values.");}}function d(A){var E=false;A.map(e).reduce(function(R,n){if(!R&&n){E=true;}return n;},true);return E;}function e(A){return A.charAt(A.length-1)!=="?";}function r(A){return A.substr(0,A.length-1);}function p(F,A){var k=c(O[F].args);if(d(k)){throw new Error("Invalid argument signature. Make sure all optional arguments appear in the end.");}var o={length:A.length};var R=k.filter(e);var m=R>A.length;if(m){throw new Error(F+" requires "+R+" arguments but "+A.length+" was specified");}A.forEach(function(v){var n=k.shift();var I=!e(n);if(I){n=r(n);}if(A.length>0){o[n]=v;}});return o;}function f(P,F,k,I){if(!O.hasOwnProperty(F)){throw"Invalid function: "+F;}var o=p(F,k);if(P){a(F,O[F],I);}else{b(F,O[F],I);}if(P){if(!O[F].fnPipe){throw new Error("The function '"+F+"' cannot be executed in pipe context");}return O[F].fnPipe(o,I);}return O[F].fn(o,I);}function h(s){return s.split("").map(function(k){if(k==="["){return"[\\[]";}return"["+k+"]";}).join("");}function j(){var A=Object.keys(O);return A.map(h).join("|");}return{getPossibleFunctionsRegExpString:j,applyFunctionInValueContext:f.bind(null,false),applyFunctionInPipeContext:f.bind(null,true),_setURIDependency:function(F){U=F;}};},false);
sap.ui.predefine('sap/ushell/_URLTemplateProcessor/Resolvers',["sap/ushell/_URLTemplateProcessor/Functions","sap/ushell/utils/type","sap/ushell/utils/clone","sap/ushell/_URLTemplateProcessor/utils"],function(f,t,c,u){"use strict";var O={"literal":r,"expression":g,"reference":h,"function":e,"path":b,"pipe":d};function a(s,p,k){var C=null;var P=[];var F=false;var l=p.join("/");C=s;if(typeof C==="undefined"){F=true;}p.forEach(function(m,I){if(F){return;}P.push(m);if(!C.hasOwnProperty(m)){C=undefined;F=true;return;}if(!C.hasOwnProperty(m)){throw new Error("Cannot find path '"+l+"' in given structure: '"+m+"' seems to be missing in the object.");}C=C[m];});return C;}function r(p){return p.value;}function b(p,R,s,A,o,D){var k=p.value.map(function(P){return i(P,R,s,A,o,D);});var I=p.pathType==="relative";var l=I?A:s;return a(l,k,R);}function d(p,R,s,A,o,D){var P=p.value;if(P[0].type!=="wildcard"){throw new Error("Leading wildcard expected in pipe expression");}if(P[0].value!=="*"){throw new Error("Unsupported wildcard expression: "+P[0].value);}return P.slice(1).reduce(function(v,k){if(k.type!=="function"){throw new Error("Invalid operation specified in pipe expression");}return f.applyFunctionInPipeContext(k.name,k.args.map(function(l){return i(l,R,s,A,o,D);}),v);},c(o[D]||{}));}function e(p,R,s,A,o,D){var F=p.name;var k=p.args.map(function(P){return i(P,R,s,A,o,D);});var v=p.params.map(function(P){return i(P,R,s,A,o,D);});return f.applyFunctionInValueContext(F,k,v);}function g(p,R,s,A,o,D){var E=p.value;if(O[E.type]){return i(E,R,s,A,o,D);}throw new Error("unknown expression type: "+E.type);}function h(p,R,s,A,o,D){var v=p.value;if(!p.hasOwnProperty("namespace")){return R[v];}var n=p.namespace;var E="The template attemps to take the value '"+v+"' from '"+n+"' namespace.";if(!o.hasOwnProperty(n)){throw new Error(E+" However this value was not defined at runtime. The template should reference only defined values.");}var N=o[n];var k=v===".";if(k){return N;}if(typeof N!=="object"){throw new Error(E+" However the runtime did not define the namespace as an object. The template cannot access the desired value using the object notation in this case.");}return N[v];}function i(p,R,s,A,o,D){var P=p.type;if(O[P]){return O[P](p,R,s,A,o,D);}throw new Error("Cannot resolve unknown parameter type: '"+P+"'");}function j(p,R,s,o,A,D){var k={};R.forEach(function(P){var l=p[P];var m=i(l,k,s,A,o,D);k[P]=m;});return k;}return{resolveLiteral:r,resolveExpression:g,resolveReference:h,resolveFunction:e,resolvePath:b,resolvePipe:d,resolveParameterValue:i,resolveAllParameters:j};},false);
sap.ui.predefine('sap/ushell/_URLTemplateProcessor/TemplateParameterParser',["sap/ushell/utils/clone","sap/ushell/_URLTemplateProcessor/Functions"],function(c,f){"use strict";function p(D,E){var s=m();var v=s.exec(E);if(v===null){throw new Error("Cannot parse expression: '"+E+"'");}var S=r(E);if(S.indexOf("*")===0){return a(D,S);}var A="^("+f.getPossibleFunctionsRegExpString()+")[^a-z]";var w=new RegExp(A);if(w.exec(S)){return i(D,S);}return e(D,S);}function a(D,P){var s=j(D,P,"|");var w=s.shift();return{type:"pipe",value:[{type:"wildcard",value:w}].concat(s.map(i.bind(null,D)))};}function b(R){var s=R.substr(1);var N;if(s.indexOf(":")>=0){var v=s.split(":");N=v[0];s=v[1];}var w={type:"reference",value:s};if(N){w.namespace=N;}return w;}function d(D,P){var s=P.split("/");var v="relative";if(s[0]===""){v="absolute";s.shift();}if(s[0]==="."){s.shift();}return{type:"path",pathType:v,value:s.map(g.bind(null,D))};}function e(D,L){if(L.charAt(0)==="{"&&L.charAt(L.length-1)==="}"){return e(D,r(L));}if(L.indexOf(".")===0||L.indexOf("/")===0){return d(D,L);}if(L.charAt(0)==="'"&&L.charAt(L.length-1)==="'"){return h(r(L));}if(L.charAt(0)==="&"){return b(L);}return{type:"reference",value:L,namespace:D};}function g(D,P){if(P.charAt(0)==="{"&&P.charAt(P.length-1)==="}"){return e(D,r(P));}return{type:"literal",value:P};}function h(L){return{type:"literal",value:L};}function i(D,F){var v=F.split(/[(\s]/)[0];var R=o(F,v);R=R.replace(/^\s+/,"");var w="";if(R.charAt(0)==="("){var x=R.search(/([)]\s)|([)]$)/);if(x===-1){throw new Error("Cannot find termination of function '"+R+"' in '"+F+"'");}w=R.substr(1,x-1);R=o(R,"("+w+")");R=R.replace(/^\s+/,"");}var y=R;return{type:"function",name:v,args:j(D,w,",").map(function(s){return s.charAt(0)==="{"?r(s):"'"+s+"'";}).map(e.bind(null,D)),params:j(D,y,",").map(e.bind(null,D))};}function j(D,L,s){if(!L){return[];}var S=L.split(s).reduce(function(A,N,I){if(I===0){A.push(N);return A;}var v=A.length-1;var P=A[v];var M=P.length>0&&P.charAt(P.length-1)==="\\";var w="";if(M){w=A.pop();w=w.substr(0,w.length-1)+s;}A.push(w+N);return A;},[]);return S;}function k(D,P){var s=P;var R=null;if(Object.prototype.toString.apply(P)==="[object Object]"){s=P.value;R=P.renameTo;}var I=q(s);if(I){return h(s);}var T="expression";var v=p(D,s);var w={type:T,value:v};if(R){v.renameTo=R;}return w;}function l(s){var E=s.indexOf("{")===0;var v=m();var G=v.exec(s);if(!G){if(E){throw new Error("Expression was expected. But "+s+" does not look like a valid expression");}return null;}return G[1];}function m(){var O="[a-zA-Z0-9]+?:";var v="((&("+O+")?)?[.a-zA-Z0-9_-]+?)";var Q="('(.*?)')";var U="([^' ]*?)";var V="{("+v+")}";var P="("+"[.]?([/]("+v+"|"+V+"))+"+")";var L="("+P+"|"+Q+"|"+v+"|"+V+")";var s="("+L+"(,"+L+")*)";var F="("+U+"|"+V+")";var w="("+F+"(,"+F+")*)";var x="("+"[(]"+w+"[)]"+")?";var A=f.getPossibleFunctionsRegExpString();var y="("+"("+A+")"+"("+x+")"+")";var W="([*]([|]"+y+")*)";var E="^{("+W+"|"+"(("+y+")([ ]("+s+"))?)"+"|"+"("+L+")"+")}$";var z=new RegExp(E);return z;}function n(s){return l(s)!==null;}function r(s){var C=s.split("");C.shift();C.pop();return C.join("");}function o(T,P){if(T.indexOf(P)===0){return T.substr(P.length);}throw new Error("Given string does not start with prefix '"+P+"'");}function q(s){return typeof s==="string"&&!n(s);}function t(P,D){return Object.keys(P).reduce(function(s,N){var v=P[N];s[N]=k(D,v);return s;},{});}function u(P,D){return Object.keys(P).reduce(function(s,N){var v=P[N];s[N]=h(v);return s;},{});}return{parseTemplateParameterSet:t,parseTemplateParameterSetAsLiterals:u,parsePath:d,_isExpression:n,_parseList:j,_parseParameterValue:k};},false);
sap.ui.predefine('sap/ushell/_URLTemplateProcessor/utils',["sap/ushell/utils/clone","sap/ushell/utils/type"],function(c,t){"use strict";function h(v){return v!==null&&typeof v!=="undefined";}function r(p){return Object.keys(p).reduce(function(o,P){var v=p[P];if(Object.prototype.toString.apply(v)==="[object Array]"){o[P]=v[0];}else if(typeof v==="string"){o[P]=v;}else{throw new Error("Parameters should be passed as strings or array of strings");}return o;},{});}function m(a,b){var d=c(a);var e=c(b);return Object.keys(e).reduce(function(o,O){o[O]=e[O];return o;},d);}return{mergeObject:m,hasValue:h,removeArrayParameterNotation:r};},false);
sap.ui.predefine('sap/ushell/adapters/cdm/ClientSideTargetResolutionAdapter',["sap/base/util/Version","sap/ui/thirdparty/jquery","sap/base/util/deepExtend"],function(V,q,d){"use strict";var C=function(s,p,a){this._oAdapterConfig=a&&a.config;var c=sap.ushell.Container,P="";if(c){P=c.getLogonSystem().getProductName()||"";}this._oLocalSystemAlias={http:{host:"",port:0,pathPrefix:"/sap/bc/"},https:{host:"",port:0,pathPrefix:"/sap/bc/"},rfc:{systemId:"",host:"",service:0,loginGroup:"",sncNameR3:"",sncQoPR3:""},id:"",label:"local",client:"",language:"",properties:{productName:P}};this.getInbounds=function(){var t=this;if(!this._getInboundsDeferred){this._getInboundsDeferred=new q.Deferred();sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(S){return S.getSite();}).then(function(S){var u=(S._version&&V(S._version).getMajor()===3)?"sap/ushell/adapters/cdm/v3/utilsCdm":"sap/ushell/utils/utilsCdm";sap.ui.require([u],function(U){var i=U.formatSite(S)||[];t._getInboundsDeferred.resolve(i);});},function(e){t._getInboundsDeferred.reject(e);});}return this._getInboundsDeferred.promise();};this._createSIDMap=function(A){return Object.keys(A).sort().reduce(function(S,i){var o=A[i];var b="SID("+o.systemId+"."+o.client+")";if(!S.hasOwnProperty(b)&&o.hasOwnProperty("systemId")&&o.hasOwnProperty("client")){S[b]=i;}return S;},{});};this._getSystemAliases=function(){var t=this;if(!this.oSystemAliasesDeferred){this.oSystemAliasesDeferred=new q.Deferred();sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(S){return S.getSite();}).then(function(S){var o=d({},S.systemAliases||{});Object.keys(o).forEach(function(i){o[i].id=i;});t.oSystemAliasesDeferred.resolve(o);},function(e){t.oSystemAliasesDeferred.reject(e);});}return this.oSystemAliasesDeferred.promise();};this.resolveSystemAlias=function(S){var D=new q.Deferred(),t=this;this._getSystemAliases().done(function(o){var m,b;if(o.hasOwnProperty(S)){b=o[S];if(S===""){b.properties=d({},t._oLocalSystemAlias.properties,b.properties||{});}D.resolve(b);return;}if(S===""){D.resolve(t._oLocalSystemAlias);return;}S=S.toUpperCase(S);if(!t._oSIDMap){t._oSIDMap=t._createSIDMap(o);}if(t._oSIDMap.hasOwnProperty(S)){var M=o[t._oSIDMap[S]];D.resolve(M);return;}m="Cannot resolve system alias "+S;q.sap.log.warning(m,"The system alias cannot be found in the site response","sap.ushell.adapters.cdm.ClientSideTargetResolutionAdapter");D.reject(m);}).fail(function(e){D.reject(e);});return D.promise();};this.getContentProviderDataOriginsLookup=function(){var t=this;if(!this.oContentProviderDataOriginsDeferred){this.oContentProviderDataOriginsDeferred=new q.Deferred();sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(S){return S.getSite();}).then(function(S){var l=null;if(S.contentProviderDataOrigins){l=d({},S.contentProviderDataOrigins);}t.oContentProviderDataOriginsDeferred.resolve(l);},function(e){t.oContentProviderDataOriginsDeferred.reject(e);});}return this.oContentProviderDataOriginsDeferred.promise();};};return C;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/CommonDataModelAdapter',["sap/ui/thirdparty/URI","sap/base/Log","sap/base/util/Version","sap/base/util/UriParameters","sap/ui/thirdparty/jquery"],function(U,L,V,a,q){"use strict";var C=function(u,p,A){this.oAdapterConfiguration=A;if(A&&A.config&&A.config.siteData){this.oCdmSiteDataRequestPromise=new q.Deferred().resolve(A.config.siteData);}else if(A&&A.config&&A.config.siteDataPromise){this.oCdmSiteDataRequestPromise=A.config.siteDataPromise;}else{var s=this._identifySiteUrlFromConfig(A);var b=this._normalizeUrl(s,location.href);this.oCdmSiteDataRequestPromise=this._requestSiteData(b);}};C.prototype._requestSiteData=function(u){var s=new q.Deferred();if(!u){return s.reject("Cannot load site: configuration property 'siteDataUrl' is missing for CommonDataModelAdapter.");}q.ajax({type:"GET",dataType:"json",url:u}).done(function(r){s.resolve(r);}).fail(function(e){L.error(e.responseText);s.reject("CDM Site was requested but could not be loaded.");});return s.promise();};C.prototype._normalizeUrl=function(u,c){if(typeof u!=="string"){return u;}if(u.indexOf("http")===0){return u;}var b=document.getElementsByTagName("base")[0];return(new U(u,b).absoluteTo(c)).toString();};C.prototype.getSite=function(){var d=new q.Deferred();this.oCdmSiteDataRequestPromise.done(function(s){var S=q.extend({},s);delete S.personalization;d.resolve(S);}).fail(function(m){d.reject(m);});return d.promise();};C.prototype.getPersonalization=function(){var d=new q.Deferred(),t=this;this.oCdmSiteDataRequestPromise.done(function(s){var S=q.extend({},s),b=S._version,p;if(t.oAdapterConfiguration&&t.oAdapterConfiguration.config&&t.oAdapterConfiguration.config.ignoreSiteDataPersonalization){delete S.personalization;}if(S.personalization){p=S.personalization._version;if(Object.keys(S.personalization).length>0&&!t._isPersonalizationVersionValid(b,p)){L.error("Personalization version is not compatible to the site version and will not be loaded. Please proceed to personalize the homepage again if needed. Personalization version: "+p+"; Site version: "+b);d.resolve();return;}d.resolve(S.personalization);}else{t._readPersonalizationDataFromStorage(b).done(function(P){p=P._version;if(Object.keys(P).length>0&&!t._isPersonalizationVersionValid(b,p)){L.error("Personalization version is not compatible to the site version and will not be loaded. Please proceed to personalize the homepage again if needed. Personalization version: "+p+"; Site version: "+b);d.resolve();return;}d.resolve(P);}).fail(function(m){d.reject(m);});}}).fail(function(m){d.reject(m);});return d.promise();};C.prototype._isPersonalizationVersionValid=function(s,p){if(!s){return false;}var S=new V(s).getMajor(),P=new V(p);if(S>=3){return P.getMajor()===S;}return P.getMajor()<3;};C.prototype.setPersonalization=function(p){var P=new q.Deferred(),o=sap.ushell.Container.getService("Personalization"),c,s={keyCategory:o.constants.keyCategory.FIXED_KEY,writeFrequency:o.constants.writeFrequency.LOW,clientStorageAllowed:true},b={container:"sap.ushell.cdm.personalization",item:"data"},d=new V(p.version);if(d.inRange("3.1.0","4.0.0")){b={container:"sap.ushell.cdm3-1.personalization",item:"data"};}var e=o.getPersonalizer(b,s,c);e.setPersData(p).done(function(){L.info("Personalization data has been stored successfully.");P.resolve();}).fail(function(){P.reject("Writing personalization data failed.");});return P.promise();};C.prototype._readPersonalizationDataFromStorage=function(c){var p=new q.Deferred();sap.ushell.Container.getServiceAsync("Personalization").then(function(P){var s={keyCategory:P.constants.keyCategory.FIXED_KEY,writeFrequency:P.constants.writeFrequency.LOW,clientStorageAllowed:true};var o={container:"sap.ushell.cdm.personalization",item:"data"};if(c){var v=new V(c);if(v&&v.inRange("3.1.0","4.0.0")){o={container:"sap.ushell.cdm3-1.personalization",item:"data"};}}P.getPersonalizer(o,s).getPersData().done(function(b){p.resolve(b||{});}).fail(function(){p.reject("Fetching personalization data failed.");});});return p.promise();};C.prototype._identifySiteUrlFromConfig=function(A){var p=new a(window.location.href);var s=p.get("sap-ushell-cdm-site-url");var c=A&&A.config;if((c&&!c.allowSiteSourceFromURLParameter)&&s){s=null;}if(c&&!s){s=c.siteDataUrl||c.cdmSiteUrl;}this.sCdmSiteUrl=s;return s;};return C;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/ContainerAdapter',["sap/ushell/utils","sap/ushell/User","sap/ushell/System","sap/ui/thirdparty/URI","sap/base/Log","sap/ui/thirdparty/jquery"],function(u,U,S,a,L,q){"use strict";var l=L.getLogger("sap/ushell/adapters/cdm/ContainerAdapter",L.Level.INFO);var C=function(i,p,P){var b="/sap/public/bc/icf/logoff",s=g(P.config,b),o=e(P.config),c=f(i,P.config),d=k(P.config);function g(m,D){if(m.systemProperties&&m.systemProperties.logoutUrl){return m.systemProperties.logoutUrl;}return D;}function e(m){var n,r=m.userProfile;if(r){n=h(r.defaults,m.userProfilePersonalization,r.metadata);}return new U(n||j());}function f(O,m){var n=m.systemProperties,A=O.getAlias(),r=O.getPlatform(),B=O.getBaseUrl(),t,v,w,x,y,z,T;if(n){A=n.alias||A;r=n.platform||r;t=n.SID;v=n.client;w=n.productName;x=n.productVersion;y=n.systemName;z=n.systemRole;T=n.tenantRole;}return new S({alias:A,platform:r,baseUrl:B,system:t,client:v,productName:w,productVersion:x,systemName:y,systemRole:z,tenantRole:T});}function h(D,m,n){var r=q.extend(j(),D,m);r.bootTheme=r.bootTheme||{theme:r.theme,root:""};delete r.theme;if(n){if(n.editablePropterties){r.setThemePermitted=n.editablePropterties.indexOf("theme")>-1;r.setAccessibilityPermitted=n.editablePropterties.indexOf("accessibility")>-1;r.setContentDensityPermitted=n.editablePropterties.indexOf("contentDensity")>-1;}if(n.ranges){r.ranges=n.ranges;}}return r;}function j(){return{setThemePermitted:false,setAccessibilityPermitted:false,setContentDensityPermitted:false};}function k(A){var m=A&&A.systemProperties&&A.systemProperties.sessionKeepAlive;if(!m){return null;}if(!m.url){l.error("Mandatory parameter 'url' missing in 'sessionKeepAlive' configuration.");return null;}if(m.method!=="HEAD"&&m.method!=="GET"){m.method="HEAD";}return m;}this._getLogoutUrl=function(){return s;};this._setDocumentLocation=function(m){document.location=m;};this.getSystem=function(){return c;};this.getUser=function(){return o;};this.load=function(){return q.when();};this.getCurrentUrl=function(){return window.location.href;};this.logout=function(m){var F;if(!m){throw new Error("Not implemented");}if(u.hasNativeLogoutCapability()){F=(new a(this._getLogoutUrl())).absoluteTo(this.getCurrentUrl()).search("").toString();u.getPrivateEpcm().doLogOff(F);}else{this.logoutRedirect();}return q.when();};this.logoutRedirect=function(){var m=c.adjustUrl(this._getLogoutUrl());this._setDocumentLocation(m);};this.sessionKeepAlive=function(){if(!d){return;}var x=new XMLHttpRequest();x.open(d.method,d.url,true);x.onreadystatechange=function(){if(this.readyState===4){l.debug("Server session was extended");}};x.send();};this._getSessionKeepAliveConfig=function(){return d;};};return C;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/LaunchPageAdapter',["sap/ushell/adapters/cdm/_LaunchPage/readHome","sap/ushell/adapters/cdm/_LaunchPage/modifyHome","sap/ushell/adapters/cdm/_LaunchPage/readCatalogs","sap/m/GenericTile","sap/m/library","sap/ui/core/ComponentContainer","sap/ushell/adapters/cdm/_LaunchPage/uri.transform","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/navigationMode","sap/ushell/resources","sap/ushell/utils","sap/ushell/utils/utilsCdm","sap/ushell/utils/WindowUtils","sap/ushell/components/tiles/utilsRT","sap/base/util/Version","sap/ui/model/json/JSONModel","sap/ui/thirdparty/jquery","sap/base/util/isPlainObject","sap/base/util/isEmptyObject","sap/base/util/ObjectPath","sap/base/Log"],function(r,m,R,G,M,C,u,a,E,n,o,U,b,W,c,V,J,q,i,d,O,L){"use strict";var l=L.getLogger("sap/ushell/adapters/cdm/LaunchPageAdapter"),f=L.Level;var g=M.GenericTileMode;function h(j,p,A){var _,s="sap.ushell.components.tiles.cdm.applauncher",D="sap.ushell.components.tiles.cdm.applauncherdynamic";this._mResolvedTiles={};this._mCatalogTilePromises={};this._mFailedResolvedCatalogTiles={};this._mFailedResolvedTiles={};this._mContentProviders={};this.getCdmVersionsSupported=function(){return{min:V("0"),max:V("2.0.0")};};this.isSiteSupported=function(S){if(!!S._version&&V(S._version).compareTo(this.getCdmVersionsSupported().max)>0){L.fatal("Invalid CDM site version: Only sites up to version 2.0.0 are supported");return false;}return true;};this.TileType={Tile:"tile",Link:"link"};this.getGroups=function(){var e=new q.Deferred();this._assureLoaded().done(function(I){U.setPerformanceMark("FLP - homepage groups processed");e.resolve(I);}).fail(function(){e.resolve([]);});return e.promise();};this._getTileFromHashInContextOfSite=function(e,I,K){var N=new q.Deferred(),P=I[K];if(!P){P=e(K);I[K]=P;}P.done(function(T){var Q={tileIntent:K,tileResolutionResult:T};N.resolve(Q);}).fail(function(Q){N.reject("Hash '"+K+"' could not be resolved to a tile. "+Q);});return N.promise();};this._getTileFromHash=function(I){var e=sap.ushell.Container.getService("ClientSideTargetResolution");var K=e.resolveTileIntent.bind(e);return this._getTileFromHashInContextOfSite(K,this._mCatalogTilePromises,I);};this._getTileFromHashFromSite=function(S,I){var e=sap.ushell.Container.getService("ClientSideTargetResolution");var K=b.formatSite(S);var N=e.resolveTileIntentInContext.bind(e,K);var P={};return this._getTileFromHashInContextOfSite(N,P,I);};this._getTileForUrl=function(T){var e=T.indicatorDataSource?"#Shell-dynamicTile":"#Shell-staticTile";return{tileIntent:"#",tileResolutionResult:{tileComponentLoadInfo:e,isCustomTile:false}};};this._assureGroupItemsResolved=function(e,S){var P=[],I,K;if(e.payload&&e.payload.tiles){I=this._assureGroupTilesResolved(e.payload.tiles,S);Array.prototype.push.apply(P,I);}if(e.payload&&e.payload.links){K=this._assureGroupLinksResolved(e.payload.links,S);Array.prototype.push.apply(P,K);}return P;};this._assureGroupTilesResolved=function(e,S){return(e||[]).map(function(T,I){return this._resolveGroupTile(T,S).then(function(K){K.isLink=false;return K;});},this);};this._assureGroupLinksResolved=function(e,S){return(e||[]).map(function(I){return this._resolveGroupTile(I,S).then(function(K){K.isLink=true;return K;});},this);};this._resolveGroupTile=function(T,S){var e=this._mResolvedTiles;var I=this._mFailedResolvedTiles;var K;function N(Q){e[T.id]=Q;if(I[T.id]){delete I[T.id];}return Q;}function P(T){var Q=T.target;return Q&&Q.semanticObject==="Shell"&&Q.action==="launchURL";}if(e[T.id]){return(new q.Deferred()).resolve(e[T.id]).promise();}if(T.target&&T.target.url){K=q.when(this._getTileForUrl(T));}else if(T.isBookmark){K=this._resolveTileByIntent(T,S);}else if(P(T)){K=this._resolveTileByIntent(T,S);}else{K=this._resolveTileByAppId(T,S);}K.done(function(Q){N(Q);}).fail(function(Q){I[T.id]=Q;});return K;};this._resolveTileByAppId=function(T,S){var e,I,K,N,P;function Q(b1,c1){return new q.Deferred().reject({logLevel:b1,message:c1}).promise();}if(!i(T)){return Q(f.ERROR,"Cannot resolve tile: oTile must be an object");}if(!i(S)){return Q(f.ERROR,"Cannot resolve tile: oSite must be an object");}e=T.appId||T.appIDHint;if(!e){return Q(f.ERROR,["Cannot resolve tile '",T.id,"': either appId or appIDHint must be specified"].join(""));}I=S.applications&&S.applications[e];if(!I){return Q(f.INFO,["Tile '",T.id,"' filtered from result: no app found for appId '",e,"' (dangling app reference)"].join(""));}K=this._getFirstInbound(I);if(!K){return Q(f.ERROR,["Cannot resolve tile '",T.id,"': app '",e,"' has no navigation inbound"].join(""));}var X=b.mapOne(K.key,K.inbound,I),Y=X.resolutionResult.applicationType,Z=X.resolutionResult.additionalInformation,$=a.last("/core/navigation/enableInPlaceForClassicUIs"),a1=$?$[Y]:false;N=X.tileResolutionResult;N.navigationMode=n.computeNavigationModeForHomepageTiles(Y,Z,a1);N.isLink=false;if(!this._isFormFactorSupported(N)){return Q(f.INFO,["Tile '",T.id,"' filtered from result: form factor not supported"].join(""));}P=this._toHashFromInbound(K.inbound);return q.when({tileResolutionResult:N,tileIntent:P});};this._isFormFactorSupported=function(e){var I=U.getFormFactor();return r.supportsFormFactor(e,I);};this._getFirstInbound=function(e){var I=Object.keys(e["sap.app"].crossNavigation.inbounds).shift(),K=e["sap.app"].crossNavigation.inbounds[I];return{key:I,inbound:K};};this._resolveTileByIntent=function(T,S){var e=this._prepareTileHash(T);return this._getTileFromHash(e);};this._prepareTileHash=function(T){var e=sap.ushell.Container.getService("URLParsing"),P={},I,K;if(this._isCatalogTile(T)){return T.tileIntent;}if(this._isGroupTile(T)&&T.target){K=T.target.parameters||[];K.forEach(function(N){if(N.name&&N.value){P[N.name]=[N.value];}});I={target:{semanticObject:T.target.semanticObject,action:T.target.action},params:P,appSpecificRoute:T.target.appSpecificRoute};return"#"+e.constructShellHash(I);}return undefined;};this._allPromisesDone=function(P){var e=new q.Deferred(),I;if(P.length===0){e.resolve([]);}else{var N=P.map(function(K){I=new q.Deferred();K.always(I.resolve.bind(I));return I.promise();});q.when.apply(this,N).done(function(){var K=Array.prototype.slice.call(arguments);e.resolve(K);});}return e.promise();};this._assureLoaded=function(){var e=this,I=sap.ushell.Container.getService("CommonDataModel"),K;if(this._assureLoadedDeferred){return this._assureLoadedDeferred.promise();}K=new q.Deferred();this._assureLoadedDeferred=K;I.getSite().done(function(S){if(!e.isSiteSupported(S)){throw new Error("Invalid CDM site version: Check configuration of launchpage adapter and version of FLP site");}var N=[];var P=r.getGroupsArrayFromSite(S);var Q=r.getDefaultGroup(P);if(!Q){Q=m.createDefaultGroup(U.generateUniqueId(r.getGroupIdsFromSite(S)));S=m.addGroupToSite(S,Q,0);P=r.getGroupsArrayFromSite(S);}_=Q;P.forEach(function(T){N=e._assureGroupItemsResolved(T,S).concat(N);});e._allPromisesDone(N).done(function(){e._assureLoadedDeferred.resolve(P);delete e._assureLoadedDeferred;e._logTileResolutionFailures(e._mFailedResolvedTiles);});}).fail(function(N){L.error("Delivering hompage groups failed - "+N);e._assureLoadedDeferred.resolve([]);delete e._assureLoadedDeferred;});return K.promise();};this._logTileResolutionFailures=function(e){var I={};if(!e){return;}Object.keys(f).filter(function(K){var N=f[K];return N>=f.FATAL&&N<=f.ALL;}).forEach(function(K){I[f[K]]="";});Object.keys(e).forEach(function(K){var N=e[K];if(N.logLevel){I[N.logLevel]=I[N.logLevel].concat(N.message).concat("\n");}});if(I[f.FATAL]){l.fatal(I[f.FATAL]);}if(I[f.ERROR]){l.error(I[f.ERROR]);}if(I[f.WARNING]){l.warning(I[f.WARNING]);}if(I[f.INFO]){l.info(I[f.INFO]);}if(I[f.DEBUG]){l.debug(I[f.DEBUG]);}if(I[f.TRACE]){l.trace(I[f.TRACE]);}};this.getDefaultGroup=function(){var e=new q.Deferred(),I;if(!_){I=this._assureLoaded();}if(I){I.done(function(){e.resolve(_);}).fail(function(K){e.reject("Failed to access default group. "+K);});}else{e.resolve(_);}return e.promise();};this._isValidTitle=function(T){if(typeof T!=="string"||!T){return false;}return true;};this._isGroupPreset=function(e){return r.isGroupPreset(e);};this._isGroupLocked=function(e){return r.isGroupLocked(e);};this.addGroup=function(T){var e=new q.Deferred(),I=sap.ushell.Container.getService("CommonDataModel"),K,N,P=this;if(!this._isValidTitle(T)){return e.reject("No valid group title").promise();}N="Failed to add the group with title '"+T+"' to the homepage. ";I.getSite().done(function(S){K=U.generateUniqueId(r.getGroupIdsFromSite(S));m.addGroupToSite(S,m.createEmptyGroup(K,T));I.save().done(function(){delete P._assureLoadedDeferred;e.resolve(S.groups[K],K);}).fail(function(Q){e.reject(Q);});}).fail(function(Q){e.reject(N+Q);});return e.promise();};this.getGroupTitle=function(e){return r.getGroupTitle(e);};this.setGroupTitle=function(e,N){var I=this,K=new q.Deferred(),P=sap.ushell.Container.getService("CommonDataModel"),Q,S;if(typeof e!=="object"||!r.getGroupId(e)){return K.reject("Unexpected group value").promise();}if(!I._isValidTitle(N)){return K.reject("Unexpected oGroup title value").promise();}S="Failed to set new title for group with id '"+r.getGroupId(e)+"'. ";Q=r.getGroupTitle(e);P.getSite().done(function(T){if(e){m.setGroupTitle(e,N);}P.save().done(function(){K.resolve();}).fail(function(X){L.error(X);K.reject(Q);});}).fail(function(T){K.reject(Q,S+T);});return K.promise();};this.getGroupId=function(e){return r.getGroupId(e);};this.hideGroups=function(e){var I=new q.Deferred(),K=sap.ushell.Container.getService("CommonDataModel"),N;if(e&&Array.isArray(e)){N="Failed to hide group. ";K.getSite().done(function(S){r.getGroupsArrayFromSite(S).forEach(function(P){m.setGroupVisibility(P,e&&Array.prototype.indexOf.call(e,r.getGroupId(P))===-1);});K.save().done(function(){I.resolve();}).fail(function(P){I.reject("Hiding of groups did not work as expected - "+P);});}).fail(function(P){I.reject(N+P);});}else{I.reject("Invalid input parameter aHiddenGroupIds. Please pass a valid input parameter.");}return I.promise();};this.isGroupVisible=function(e){return r.isGroupVisible(e);};this.moveGroup=function(e,I){var K=new q.Deferred(),N=sap.ushell.Container.getService("CommonDataModel"),P,Q;if(!e||!r.getGroupId(e)||I<0){return K.reject("Unable to move groups - invalid parameters").promise();}Q="Failed to move group with id '"+e.identification.id+"'. ";N.getSite().done(function(S){var T=r.getGroupIdsFromSite(S),X=r.getGroupId(e);if(!T){return K.reject("groupsOrder not found - abort operation of adding a group.");}else if(T.indexOf(X)===I){return K.resolve();}P=U.moveElementInsideOfArray(T,T.indexOf(X),I);if(!P){return K.reject("invalid move group operation - abort.");}m.setGroupsOrder(S,P);N.save().done(function(){K.resolve();}).fail(function(Y){K.reject(Y);});return undefined;}).fail(function(S){K.reject(Q+S);});return K.promise();};this.removeGroup=function(e){var I=new q.Deferred(),K=sap.ushell.Container.getService("CommonDataModel"),N,P;if(typeof e!=="object"){return I.reject("invalid group parameter").promise();}P=r.getGroupId(e);if(!P){return I.reject("group without id given").promise();}N="Failed to remove group with id '"+P+"'. ";K.getSite().done(function(S){m.removeGroupFromSite(S,e);K.save().done(function(){I.resolve();}).fail(function(Q){I.reject(Q);});}).fail(function(Q){I.reject(N+Q);});return I.promise();};this.resetGroup=function(e){var I=new q.Deferred(),K=sap.ushell.Container.getService("CommonDataModel"),S=[],N=this,P,Q;if(typeof e==="object"&&r.getGroupId(e)){Q=r.getGroupId(e);P="Failed to reset group with id '"+Q+"'. ";K.getSite().done(function(T){q.extend(true,S,r.getGroupsArrayFromSite(T));if(N.isGroupRemovable(e)===false){K.getGroupFromOriginalSite(Q).done(function(X){if(typeof T==="object"&&r.getGroupFromSite(T,Q)){m.overwriteGroup(T,X,Q);}K.save().done(function(){I.resolve(X);}).fail(function(Y){I.reject("Group could not be reset - "+Y,S);});}).fail(function(X){I.reject("Group could not be reset - "+X,S);});}else{I.reject("Group could not be reset as it was created by the user",S);}}).fail(function(T){I.reject(P+T,[]);});}return I.promise();};this.getTileTitle=function(T){return r.getTileTitle(this._mResolvedTiles,T);};this.getTileSubtitle=function(T){return r.getTileSubtitle(this._mResolvedTiles,T);};this.getTileIcon=function(T){return r.getTileIcon(this._mResolvedTiles,T);};this.getTileInfo=function(T){return r.getTileInfo(this._mResolvedTiles,T);};this.getTileIndicatorDataSource=function(T){var e=this._mResolvedTiles[T.id],I={},K;if(T.indicatorDataSource){I.indicatorDataSource=U.clone(T.indicatorDataSource);if(T.dataSource){I.dataSource=U.clone(T.dataSource);}return I;}if(!e){return I;}K=e.tileResolutionResult;if(K.indicatorDataSource){I.indicatorDataSource=U.clone(K.indicatorDataSource);if(K.indicatorDataSource.hasOwnProperty("dataSource")){var N=K.indicatorDataSource.dataSource,P=K.dataSources;if(P&&P.hasOwnProperty(N)){I.dataSource=U.clone(P[N]);}else{L.warning("datasource referenced but not found for tile: "+e.tileIntent);}}if(U.getMember(K,"runtimeInformation.componentProperties.url")){var Q=U.getMember(I,"indicatorDataSource.path");var S=U.getMember(I,"dataSource.uri");var X=U.getMember(K,"runtimeInformation.componentProperties.url");var Y=u(Q,S,X,this.getWindowLocationHref());if(!Y.error){if(Q){I.indicatorDataSource.path=Y.uri;}if(S){I.dataSource.uri=Y.uriParent;}}}}return I;};this.getWindowLocationHref=function(){return window.location.href;};this.isGroupRemovable=function(e){return!this._isGroupPreset(e);};this.isGroupLocked=function(e){return this._isGroupLocked(e);};this.getGroupTiles=function(e){return r.getGroupTiles(e).concat(r.getGroupLinks(e));};this.getLinkTiles=function(e){return r.getGroupLinks(e);};this.getTileType=function(T){if(r.isLink(this._mResolvedTiles,T)){return this.TileType.Link;}return this.TileType.Tile;};this.getTileId=function(T){return r.getTileId(T);};this.getTileSize=function(T){return r.getTileSize(this._mResolvedTiles,T)||"1x1";};this.getTileTarget=function(T){var e,I=r.getTileId(T),K=this._mResolvedTiles[I],N;if(T.target&&T.target.url){return T.target.url;}if(K&&K.tileResolutionResult){e=K.tileResolutionResult;if(e.isCustomTile!==true){return K.tileIntent;}if(e&&typeof e.targetOutbound==="object"){N=this._toHashFromOutbound(e.targetOutbound);if(N){return N;}}}L.warning("Could not find a target for Tile with id '"+I+"'","sap.ushell.adapters.cdm.LaunchPageAdapter");return"";};this.isLinkPersonalizationSupported=function(T){return true;};this.isTileIntentSupported=function(T){return(this._mFailedResolvedTiles[T.id]===undefined);};this._notifyTileAboutRefresh=function(T){if(typeof T.tileRefresh==="function"){T.tileRefresh();}};this.refreshTile=function(T){var e=this._mResolvedTiles[T.id];if(e){if(e.tileComponent){this._notifyTileAboutRefresh(e.tileComponent);}}};this._notifyTileAboutVisibility=function(T,N,e){if(typeof T.tileSetVisible==="function"&&e!==N){T.tileSetVisible(N);}};this.setTileVisible=function(T,N){var e=this._mResolvedTiles[T.id];if(e){if(e.tileComponent){this._notifyTileAboutVisibility(e.tileComponent,N,e.visibility);}e.visibility=N;}};this.getTileView=function(e){var I=this;return new q.Deferred(function(K){return I._getTileView(e,false).then(function(T){K.resolve(T);},function(N){var P="Tile with ID '"+e.id+"' could not be initialized"+(N?":\n"+N:".");L.error(P,null,e.tileType);K.reject(P);});}).promise();};this._getTileUiComponentContainerSync=function(T,e,I){var K=this,N,P,Q,S,X={};if(I===true){P=K._createTileComponentData(T,true,e);}else{P=K._createTileComponentData(T,false,e);}N=e.tileResolutionResult;if(e.isLink){Q=N.navigationMode;return K._createLinkInstance(T,I,Q,G,o);}if(typeof N.tileComponentLoadInfo==="string"){if(P.properties.indicatorDataSource&&P.properties.indicatorDataSource.path){X.name="sap.ushell.components.tiles.cdm.applauncherdynamic";}else{X.name="sap.ushell.components.tiles.cdm.applauncher";}}else if(typeof N.tileComponentLoadInfo==="object"&&N.tileComponentLoadInfo!==null){X=N.tileComponentLoadInfo.componentProperties||{};X.name=N.tileComponentLoadInfo.componentName;}X.componentData=P;if(X.manifest){X.componentData.properties=X.componentData.properties||{};X.componentData.properties.manifest=X.manifest;}if(X.name){X.async=false;var Y;try{S=sap.ui.component(X);}catch(Z){L.error(Z.message+"\n-- An error occurred while instantiating "+"the tile component for "+X.name,Z.stack?Z.stack:"","sap.ushell.adapters.cdm.LaunchPageAdapter");return null;}Y=new C({component:S,height:"100%"});if(!I){K._mResolvedTiles[T.id].tileComponent=S;}return Y;}return null;};this._getTileUiComponentContainer=function(T,e,I){var K=this,N,P,Q,S,X,Y,Z=new q.Deferred();var $=sap.ushell.Container.getService("Ui5ComponentLoader");if(I===true){P=K._createTileComponentData(T,true,e);}else{P=K._createTileComponentData(T,false,e);}N=e.tileResolutionResult;if(e.isLink){Q=N.navigationMode;Z.resolve(K._createLinkInstance(T,I,Q,G,o));return Z.promise();}var a1=this._createTileComponentProperties(P,N.tileComponentLoadInfo);if(!a1.name){return Z.reject("Cannot find name of tile component for tile with id: '"+T.id+"'").promise();}if(a1.manifest){P.properties=P.properties||{};P.properties.manifest=a1.manifest;}Y=this.isCustomTile(a1.name);var b1=function(f1){var e;S=f1.componentHandle.getInstance();X=new C({component:S,height:"100%"});if(!I){e=K._mResolvedTiles[T.id];e.tileComponent=S;if(typeof e.visibility==="boolean"){K._notifyTileAboutVisibility(S,e.visibility);}}return X;};var c1=function(){return $.createComponent({loadCoreExt:Y,loadDefaultDependencies:false,componentData:P,url:a1.url,applicationConfiguration:{},reservedParameters:{},applicationDependencies:a1,ui5ComponentName:a1.name},{},[]).then(b1);};var d1=function(){var f1={componentData:P,url:a1.url,name:a1.name,async:false};S=sap.ui.component(f1);var g1={componentHandle:{getInstance:function(){return S;}}};return b1(g1);};if(Y){E.once("CoreResourcesComplementLoaded").do(function(){c1().then(function(X){Z.resolve(X);}).fail(function(f1){Z.reject(f1);});});}else{var e1=d1();Z.resolve(e1);}return Z.promise();};this._createTileComponentProperties=function(T,e){var I={};if(typeof e==="string"){if(T.properties.indicatorDataSource&&T.properties.indicatorDataSource.path){I.name=D;}else{I.name=s;}return I;}if(typeof e==="object"&&e!==null){I=e.componentProperties||{};I.name=e.componentName;}return I;};this._getTileView=function(e){var I,K,N=new q.Deferred();if(typeof e!=="object"||!e.id){K="Invalid input parameter passed to _getTileView: "+e;L.error(K);return N.reject(K).promise();}I=this._mResolvedTiles[e.id];if(I){return this._getTileUiComponentContainer(e,I,false);}K="No resolved tile found for tile ID: "+e.id;L.error(K);return N.reject(K).promise();};this._getCatalogTileView=function(e){if(typeof e!=="object"){throw new Error(e);}return this._getTileUiComponentContainerSync(e,e,true);};this._getCatalogTileViewControl=function(e){var I=new q.Deferred();if(typeof e!=="object"){var K="Invalid input parameter passed to _getCatalogTileView: "+e;L.error(K);return I.reject(K).promise();}return this._getTileUiComponentContainer(e,e,true);};this._createTileComponentData=function(T,I,e){var K=I?this.getCatalogTileTitle(T):this.getTileTitle(T),S=I?this.getCatalogTilePreviewSubtitle(T):this.getTileSubtitle(T),N=I?this.getCatalogTilePreviewIcon(T):this.getTileIcon(T),P=I?this.getCatalogTilePreviewInfo(T):this.getTileInfo(T),Q=I?this.getCatalogTileTargetURL(T):this.getTileTarget(T),X=this.getTileIndicatorDataSource(T),Y={properties:{},startupParameters:{}};if(e.tileResolutionResult.isCustomTile===true&&e.tileResolutionResult.startupParameters){Y.startupParameters=e.tileResolutionResult.startupParameters;}if(K){Y.properties.title=K;}if(P){Y.properties.info=P;}if(S){Y.properties.subtitle=S;}if(N){Y.properties.icon=N;}if(Q){Y.properties.targetURL=Q;}if(X.indicatorDataSource){Y.properties.indicatorDataSource=X.indicatorDataSource;if(X.dataSource){Y.properties.dataSource=X.dataSource;}}if(e.tileResolutionResult){Y.properties.navigationMode=e.tileResolutionResult.navigationMode;}return Y;};this._createLinkInstance=function(T,I,N,e,o){var K,P,Q,S=this.getTileSubtitle(T);var G=e;if(I===true){K=this.getCatalogTileTitle(T);}else{K=this.getTileTitle(T);}P=new G({mode:g.LineMode,subheader:S,header:K,url:W.getLeanURL(this.getTileTarget(T)),press:function(X){this._genericTilePressHandler(T,X);}.bind(this)});if(N){Q=o.i18n.getText(N+"NavigationMode");P.setAriaLabel(Q+" "+K+" "+S);}this._mResolvedTiles[T.id].linkTileControl=P;return P;};this._genericTilePressHandler=function(T,e){var I;if(e.getSource().getScope&&e.getSource().getScope()==="Display"){I=this.getTileTarget(T);if(I){if(I[0]==="#"){hasher.setHash(I);}else{W.openURL(I,"_blank");}}}};this._addTileToSite=function(P,e,N,I){var K=this,Q=new q.Deferred(),S=sap.ushell.Container.getService("URLParsing").parseShellHash(N.properties.targetURL),T={id:K.getTileId(N),target:{semanticObject:S.semanticObject,action:S.action,parameters:H(S.params)}};P.groups[e.identification.id].payload.tiles.push(T);I.save().done(function(){Q.resolve(T);}).fail(function(X){Q.reject(X);});return Q.promise();};this.addTile=function(e,I){var K=new q.Deferred(),N,P=sap.ushell.Container.getService("CommonDataModel"),Q;if(!I){I=_;}if(e.contentProviderId){if(e.externalUrl){return this.addBookmark(this._getBookmarkDataForExtensionCatalogTile(e),I);}return K.reject("Extension Tile without URL").promise();}Q=v();Q.appId=e.tileResolutionResult.appId;this._mResolvedTiles[Q.id]={tileIntent:e.tileIntent,tileResolutionResult:e.tileResolutionResult,isLink:false};P.getSite().done(function(S){S.groups[I.identification.id].payload.tiles.push(Q);P.save().done(function(){K.resolve(Q);}).fail(function(T){K.reject(T);});}).fail(function(S){N="Failed to add tile with id '"+Q.id+"' to group with id '"+I.identification.id+"'. ";K.reject(N+S);});return K.promise();};this._getBookmarkDataForExtensionCatalogTile=function(e){var I={title:e.tileResolutionResult.title,subtitle:e.tileResolutionResult.subTitle,icon:e.tileResolutionResult.icon,info:e.tileResolutionResult.info,url:e.externalUrl};if(e.tileResolutionResult.indicatorDataSource&&e.tileResolutionResult.indicatorDataSource.path){I.serviceUrl=e.tileResolutionResult.indicatorDataSource.path;I.serviceRefreshInterval=e.tileResolutionResult.indicatorDataSource.refresh;}return I;};this.removeTile=function(I,T,K){var N,P,Q=new q.Deferred(),S=this;if(!I||typeof I!=="object"||!I.identification||!I.identification.id||!T||typeof T!=="object"||!T.id){return Q.reject({},"Failed to remove tile. No valid input parameters passed to removeTile method.").promise();}P="Failed to remove tile with id '"+T.id+"' from group with id '"+I.identification.id+"'. ";N=sap.ushell.Container.getService("CommonDataModel");N.getSite().done(function(X){var Y,Z;K=+K;try{Y=X.groups[I.identification.id].payload;}catch(e){Q.reject(X.groups[I.identification.id],P);}Z=S.getTileType(T)===S.TileType.Link?"links":"tiles";if(S.getTileType(T)===S.TileType.Link){K-=Y.tiles.length;}if(K>=0){Y[Z].splice(K,1);}else{Y[Z]=Y[Z].filter(function($){return $.id!==T.id;});}N.save().done(function(){Q.resolve();}).fail(function($){L.error($);Q.reject(X.groups[I.identification.id],$);});}).fail(function(e){Q.reject({},P+e);});return Q.promise();};this.moveTile=function(T,S,e,I,K,N){var P=new q.Deferred(),Q=sap.ushell.Container.getService("CommonDataModel"),X=this,Y;if(!T||d(T)||S===undefined||S<0||e===undefined||e<0||!I||!I.identification||!I.identification.id||!K||!K.identification||!K.identification.id){return P.reject("Invalid input parameters").promise();}Y="Failed to move tile with id '"+T.id+"'. ";Q.getSite().done(function(Z){var $,a1,b1=X.getTileType(T)===X.TileType.Link?"links":"tiles";if(!N){N=X._mResolvedTiles[T.id].isLink?"link":"tile";}$=N==="link"?"links":"tiles";if(b1!==$&&X._mResolvedTiles[T.id]){X._mResolvedTiles[T.id].isLink=N==="link";}if($==="links"){e-=Z.groups[K.identification.id].payload.tiles.length;}if(b1==="links"){S-=Z.groups[I.identification.id].payload.tiles.length;}if(I.identification.id===K.identification.id){if(S!==e||b1!==$){a1=Z.groups[K.identification.id].payload;a1[b1].splice(S,1);a1[$].splice(e,0,T);}else{return P.resolve(T).promise();}}else{Z.groups[I.identification.id].payload[b1].splice(S,1);Z.groups[K.identification.id].payload[$].splice(e,0,T);}Q.save().done(function(){P.resolve(T);}).fail(function(c1){L.error(Y+c1);P.reject(Y+c1);});return undefined;}).fail(function(Z){L.error(Y+Z);P.reject(Y+Z);});return P.promise();};this._compareCatalogs=function(e,I){if(e.identification.id>I.identification.id){return 1;}return-1;};this.getCatalogs=function(){var e=this,I=new q.Deferred(),K=[],N=sap.ushell.Container.getService("CommonDataModel");function P(Q,S,K,T,X,Y){var Z=Q.catalogs[S];if(X&&Y){Z.contentProviderId=X;Y.catalogsMap[S]=Z;}K.push(Z);T.notify(Z);}window.setTimeout(function(){N.getSite().done(function(S){Object.keys(S.catalogs).forEach(function(Q){P(S,Q,K,I);});N.getExtensionSites().progress(function(Q){var T=Q.providerId;var X=Q.site;var Y=Promise.resolve(X);var Z={sitePromise:Y,site:X,catalogsMap:{}};Object.keys(X.catalogs).forEach(function($){e._mContentProviders[T]=Z;P(X,$,K,I,T,Z);});}).done(function(Q){Q.filter(function(T){return!T.success;}).forEach(function(T,X){K.push({identification:{id:T.providerId},contentProviderId:T.providerId,error:"The following content providers could not provide catalogs: "+T.providerId+(T.error?" -> "+T.error:"")});});I.resolve(K.sort(e._compareCatalogs));});});},0);return I.promise();};this._isStartableInbound=function(I){var N=["Shell-plugin","Shell-bootConfig"],e;if(!I.semanticObject||!I.action){return false;}if(N.indexOf(I.semanticObject+"-"+I.action)>-1){return false;}if(!O.get("signature.parameters",I)){return true;}e=Object.keys(I.signature.parameters).every(function(p){return!I.signature.parameters[p].filter||(!!I.signature.parameters[p].launcherValue||p==="sap-external-url");});return e;};this._isHiddenInbound=function(I){return!!I.hideLauncher;};this._toHashFromInbound=function(I){var e=b.toHashFromInbound(I);if(!e){return undefined;}return"#"+e;};this._getExternalUrlFromInbound=function(I){return O.get("signature.parameters.sap-external-url.launcherValue.value",I)||null;};this._toHashFromOutbound=function(e){var I=b.toHashFromOutbound(e);if(!I){return undefined;}return"#"+I;};this._isCustomTile=function(e){if(U.getMember(e,"sap|flp.type")==="tile"){return true;}return false;};this.getCatalogTiles=function(e){var I=this,K=new q.Deferred();if(typeof e!=="object"||e===null){return K.reject("Invalid input parameter '"+e+"' passed to getCatalogTiles.").promise();}if(e.contentProviderId&&this._mContentProviders[e.contentProviderId]){this._mContentProviders[e.contentProviderId].sitePromise.then(function(S){k.call(I,e,S).done(K.resolve).fail(K.reject);},function(N){K.reject("Failed to get site: "+N);});}else{sap.ushell.Container.getService("CommonDataModel").getSite().done(function(S){k.call(I,e,S).done(K.resolve).fail(K.reject);}).fail(function(N){K.reject("Failed to get site: "+N);});}return K.promise();};this.isCustomTile=function(e){return!(e===s||e===D);};function k(e,S){var I=this,K=new q.Deferred();setTimeout(function(){var N=((e.payload&&e.payload.appDescriptors)||[]).reduce(function(P,Q){var T=S.applications[Q.id],X,Y,Z,$,a1,b1,c1,d1,e1,f1,g1,h1;if(!T){return P;}X=I._getMember(T,"sap|app.crossNavigation.inbounds");if(!X||Object.keys(X).length===0){return P;}Z=Object.keys(X)[0];$=X[Z];if(I._isStartableInbound($)&&!I._isHiddenInbound($)){a1=b.mapOne(Z,$,T);if(!a1||!a1.tileResolutionResult){return P;}e1=a1.resolutionResult.applicationType;h1=a.last("/core/navigation/enableInPlaceForClassicUIs");g1=h1?h1[e1]:false;f1=a1.resolutionResult.additionalInformation;a1.tileResolutionResult.navigationMode=n.computeNavigationModeForHomepageTiles(e1,f1,g1);b1=a1.tileResolutionResult;Y=I._toHashFromInbound($);if(e.contentProviderId){d1=I._getMember(T,"sap|app.crossNavigation.inbounds.Shell-launchURL.signature.parameters.sap-external-url.launcherValue.value");}c1={id:d1||Y,tileIntent:d1||Y,tileResolutionResult:b1,isCatalogTile:true};if(e.contentProviderId&&d1){c1.contentProviderId=e.contentProviderId;c1.externalUrl=d1;}P.push(c1);}return P;},[]);K.resolve(N);},0);return K.promise();}this.getCatalogError=function(e){if(e.error){return e.error;}return undefined;};this.getCatalogId=function(e){return R.getCatalogId(e);};this.getCatalogTitle=function(e){return R.getCatalogTitle(e);};this._isGroupTile=function(T){return r.isGroupTile(T);};this._isCatalogTile=function(T){return!!(T&&T.isCatalogTile);};this._isFailedGroupTile=function(T){return!!(T&&this._mFailedResolvedTiles&&this._mFailedResolvedTiles[r.getTileId(T)]);};this._isFailedCatalogTile=function(T){return!!(T&&this._mFailedResolvedCatalogTiles&&this._mFailedResolvedCatalogTiles[r.getTileId(T)]);};this.getCatalogTileId=function(e){if(this._isGroupTile(e)){if(this._isFailedGroupTile(e)){return undefined;}if(e.isBookmark&&O.get("target.url",e)){return e.target.url;}return(this._mResolvedTiles[r.getTileId(e)]||{}).tileIntent;}if(this._isCatalogTile(e)){return e.id;}return undefined;};this.getCatalogTileTitle=function(e){if(this._isGroupTile(e)){if(this._isFailedGroupTile(e)){return"";}return this._mResolvedTiles[e.id].tileResolutionResult.title;}if(this._isCatalogTile(e)){if(this._isFailedCatalogTile(e)){return undefined;}return e.tileResolutionResult.title;}return undefined;};this.getCatalogTileSize=function(e){return e.tileResolutionResult.size||"1x1";};this.getCatalogTileView=function(e){return this._getCatalogTileView(e);};this.getCatalogTileViewControl=function(e){return this._getCatalogTileViewControl(e);};this.getCatalogTileTargetURL=function(e){if(!e){throw new Error("The given tile is falsy");}if(this._isCatalogTile(e)){if(e.tileResolutionResult&&e.tileResolutionResult.isCustomTile){if(!e.tileResolutionResult.targetOutbound){return"";}return this._toHashFromOutbound(e.tileResolutionResult.targetOutbound);}return e.tileIntent||"";}return this.getTileTarget(e);};this.getCatalogTilePreviewTitle=function(e){if(this._isGroupTile(e)){return this.getTileTitle(e);}return(e.tileResolutionResult&&e.tileResolutionResult.title)||"";};this.getCatalogTilePreviewSubtitle=function(e){if(this._isGroupTile(e)){return this.getTileSubtitle(e);}return(e.tileResolutionResult&&e.tileResolutionResult.subTitle)||"";};this.getCatalogTilePreviewIcon=function(e){if(this._isGroupTile(e)){return this.getTileIcon(e);}return(e.tileResolutionResult&&e.tileResolutionResult.icon)||"";};this.getCatalogTilePreviewInfo=function(e){if(this._isGroupTile(e)){return this.getTileInfo(e);}return(e.tileResolutionResult&&e.tileResolutionResult.info)||"";};this.getCatalogTileKeywords=function(e){var K=[],I=e;if(!I){L.error("Could not find the Tile","sap.ushell.adapters.cdm.LaunchPageAdapter");return K;}if(this._mResolvedTiles&&this._mResolvedTiles[e.id]){I=this._mResolvedTiles[e.id];}if(I&&I.tileResolutionResult&&I.tileResolutionResult.title){K.push(I.tileResolutionResult.title);}if(I&&I.tileResolutionResult&&I.tileResolutionResult.subTitle){K.push(I.tileResolutionResult.subTitle);}return K;};this._visitBookmarks=function(e,I){var K=sap.ushell.Container;var N=K.getService("URLParsing");var P=K.getService("CommonDataModel");var Q;var S=N.parseShellHash(e);if(S){Q=F(S);}else{Q=B(e);}return P.getSite().then(function(T){var X=T.groups;var Y=Object.keys(X).filter(function(Z){return!X[Z].payload.locked;}).map(function(Z){return X[Z].payload.tiles.filter(function($){return $.isBookmark&&x(Q,$.target);});}).reduce(function(Z,$){Array.prototype.push.apply(Z,$);return Z;},[]);if(!I){return Y.length;}return q.when(Y.map(I)).then(function(){return Y.length;});});};this.addBookmark=function(P,e){var I=this;return new q.Deferred(function(K){var N=sap.ushell.Container;var Q=N.getService("URLParsing");var S=N.getService("CommonDataModel");q.when(e||I.getDefaultGroup(),S.getSite()).done(function(e,T){var X,Y,Z=Q.parseShellHash(P.url),$,a1=false;if(!Z){Y=B(P.url);a1=true;}else{Y=F(Z);}X=t(P,Y);if(a1){$=new q.Deferred();$.resolve(I._getTileForUrl(X));}else{$=I._getTileFromHash(P.url);}$.done(function(b1){b1.isLink=false;I._mResolvedTiles[X.id]=b1;T.groups[e.identification.id].payload.tiles.push(X);S.save().done(function(){K.resolve(X);}).fail(function(c1){K.reject(c1);});}).fail(function(b1){K.reject("Bookmark creation failed because: "+b1);});}).fail(function(T){K.reject(T);});}).promise();};this.countBookmarks=function(e){return this._visitBookmarks(e);};this.updateBookmarks=function(e,P){var I=sap.ushell.Container;var K=I.getService("URLParsing");var N=I.getService("CommonDataModel");var Q=this._mResolvedTiles;function S(T){return new q.Deferred(function(X){var Y,Z;var $;var a1=false;var b1={};if(P.url||P.url===""){Y=K.parseShellHash(P.url);if(!Y){Z=B(P.url);}else{Z=F(Y);}}if(T.icon!==P.icon){b1.icon=P.icon;a1=true;}if(T.title!==P.title){b1.title=P.title;a1=true;}if(T.subTitle!==P.subtitle){b1.subtitle=P.subtitle;a1=true;}if(P.url&&e!==P.url){b1.targetURL=P.url;a1=true;}if(T.info!==P.info){b1.info=P.info;a1=true;}w(T,P,Z);if(a1&&Q[T.id]){$=Q[T.id].tileComponent;if($){$.tileSetVisualProperties(b1);}}X.resolve(T);}).promise();}return this._visitBookmarks(e,S).then(function(T){return N.save().then(function(){return T;});});};this.deleteBookmarks=function(e){var I=sap.ushell.Container;var K=I.getService("URLParsing");var N=I.getService("CommonDataModel");var P=K.parseShellHash(e);var Q;if(P){Q=F(P);}else{Q=B(e);}return N.getSite().then(function(S){var T=S.groups;var X=Object.keys(T).map(function(Y){var Z=T[Y].payload;var $=0;Z.tiles=Z.tiles.filter(function(a1){if(a1.isBookmark&&x(Q,a1.target)){++$;return false;}return true;});return $;}).reduce(function(Y,Z){Y+=Z;return Y;},0);return N.save().then(function(){return X;});});};this.onCatalogTileAdded=function(T){};this._onTileSettingsSave=function(T,S){var e=new q.Deferred(),I,N,K,P,Q,X,Y;if(!T||!T.id||!S){return e.reject().promise();}N=S.oTitleInput.getValue();P=S.oSubTitleInput.getValue();K=S.oInfoInput.getValue();Q=this.getTileTitle(T);X=this.getTileInfo(T);Y=this.getTileSubtitle(T);if(Q===N&&Y===P&&X===K){return e.resolve().promise();}I={};if(Q!==N){I.title=N;T.title=N;}if(Y!==P){I.subtitle=P;T.subTitle=P;}if(X!==K){I.info=K;T.info=K;}if(this._mResolvedTiles[T.id].tileComponent){this._mResolvedTiles[T.id].tileComponent.tileSetVisualProperties(I);}else if(this._mResolvedTiles[T.id].linkTileControl){if(I.title){this._mResolvedTiles[T.id].linkTileControl.setHeader(I.title);}if(I.subtitle){this._mResolvedTiles[T.id].linkTileControl.setSubheader(I.subtitle);}if((I.title)||(I.subtitle)){this._mResolvedTiles[T.id].linkTileControl.rerender();}}sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(Z){Z.save().fail(function($){L.error($);e.reject("Could not save personalization changes: "+$);}).done(function(){e.resolve();});});return e.promise();};this.getTileActions=function(T){var e=[],I,K;if(this._isGroupTile(T)&&!this._isFailedGroupTile(T)){K=new J({config:{display_title_text:this.getTileTitle(T),display_subtitle_text:this.getTileSubtitle(T),display_info_text:this.getTileInfo(T)}});I=c.getTileSettingsAction(K,this._onTileSettingsSave.bind(this,T),this.getTileType(T));e.push(I);}return e;};function t(P,T){var e=v(P,T);e.isBookmark=true;return e;}function v(P,T){var e={id:U.generateUniqueId([])};w(e,P,T);return e;}function w(T,P,e){P=q.extend(true,{},P);if(e){T.target=e;}if(P.title||P.title===""){T.title=P.title;}if(P.icon||P.icon===""){T.icon=P.icon;}if(P.subtitle||P.subtitle===""){T.subTitle=P.subtitle;}if(P.info||P.info===""){T.info=P.info;}if(P.dataSource){T.dataSource={};q.extend(true,T.dataSource,P.dataSource);delete P.serviceUrl;}else if(P.dataSource===null){delete T.dataSource;delete T.indicatorDataSource;delete P.serviceUrl;}if((P.dataSource||T.dataSource)&&P.serviceUrlPath){T.indicatorDataSource={path:P.serviceUrlPath};}if(P.serviceUrl||P.serviceUrl===""){if(T.dataSource){L.warning("`serviceUrl` is marked for deprecation in the future."+"It is not the preferred means for defining a dynamic "+"tile's data source. Please use `oParameter.dataSource`");delete T.dataSource;}T.indicatorDataSource={path:P.serviceUrl};}else if(P.serviceUrl===null&&!T.dataSource){delete T.indicatorDataSource;}if(P.serviceRefreshInterval||P.serviceRefreshInterval===0){T.indicatorDataSource.refresh=P.serviceRefreshInterval;}}function x(T,e){if(T&&e){if(T.url){return T.url===e.url;}return T.semanticObject===e.semanticObject&&T.action===e.action&&y(T.parameters,e.parameters)&&T.appSpecificRoute===e.appSpecificRoute;}return T===e;}function y(P,e){var I,K;P=P||[];e=e||[];if(P.length===e.length){I=z(P);K=z(e);return I===K;}return false;}function z(e){return e.map(function(P){return P.name+P.value;}).sort().join();}function B(e){return{url:e};}function F(I){var T={semanticObject:I.semanticObject,action:I.action,parameters:H(I.params)};if(I.appSpecificRoute){T.appSpecificRoute=I.appSpecificRoute;}return T;}function H(I){return Object.keys(I).map(function(K){var e=I[K]&&I[K][0];return{name:K,value:e||""};});}}h.prototype._getMember=function(e,A){return U.getMember(e,A);};return h;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/MenuAdapter',[],function(){"use strict";var M=function(){};M.prototype.isMenuEnabled=function(){return sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(c){return c.getMenuEntries("main").then(function(m){return m.length>0;});});};M.prototype.getMenuEntries=function(){return sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(c){return c.getMenuEntries("main");});};return M;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/PagesCommonDataModelAdapter',["sap/base/Log","sap/ushell/adapters/cdm/util/cdmSiteUtils","sap/ushell/utils/clone","sap/base/util/Version"],function(L,c,a,V){"use strict";var P=function(){this._oCDMPagesRequests={};this._sComponent="sap/ushell/adapters/cdm/PagesCommonDataModelAdapter";this.oSitePromise=new Promise(function(r,b){this.fnSiteResolve=r;this.fnSiteReject=b;}.bind(this));};P.prototype.getSite=function(){var d=new jQuery.Deferred();Promise.all([sap.ushell.Container.getServiceAsync("NavigationDataProvider"),sap.ushell.Container.getServiceAsync("VisualizationDataProvider")]).then(function(s){return Promise.all([s[0].getNavigationData(),s[1].getVisualizationData(),sap.ushell.Container.getServiceAsync("URLParsing")]);}).then(function(r){var n=r[0];var v=r[1];var u=r[2];var N={};var I=n.inbounds;for(var i=0;i<I.length;i++){var s=I[i].permanentKey||I[i].id;N[s]=I[i];}var S={_version:"3.1.0",site:{},catalogs:{},groups:{},visualizations:c.getVisualizations(v,u),applications:c.getApplications(N),vizTypes:c.getVizTypes(v),systemAliases:a(n.systemAliases),pages:{}};this.fnSiteResolve(S);return S;}.bind(this)).then(d.resolve).catch(function(e){d.reject(e);this.fnSiteReject(e);}.bind(this));return d.promise();};P.prototype.getPage=function(p){if(!p){var e="PagesCommonDataModelAdapter: getPage was called without a pageId";L.fatal(e,null,this._sComponent);return Promise.reject(e);}return this.oSitePromise.then(function(s){if(s.pages[p]){return s.pages[p];}return Promise.all([sap.ushell.Container.getServiceAsync("PagePersistence"),sap.ushell.Container.getServiceAsync("NavigationDataProvider")]).then(function(S){var o=S[0];var n=S[1];return Promise.all([o.getPage(p),n.getNavigationData()]);}).then(function(r){var o=r[0];var n=r[1];this._addPageToSite(s,o,n);return s.pages[o.id];}.bind(this)).catch(function(E){L.fatal("PagesCommonDataModelAdapter encountered an error while fetching required services: ",E,this._sComponent);return Promise.reject(E);}.bind(this));}.bind(this));};P.prototype._addPageToSite=function(s,p,n){var N={};var I=n.inbounds;for(var i=0;i<I.length;i++){var b=I[i].permanentKey||I[i].id;N[b]=I[i];}var o=s.pages[p.id]={identification:{id:p.id,title:p.title},payload:{layout:{sectionOrder:p.sections.map(function(f){return f.id;})},sections:{}}};var S;var d;for(var j=0;j<p.sections.length;j++){S=p.sections[j];d=o.payload.sections[S.id]={id:S.id,title:S.title,layout:{vizOrder:S.viz.map(function(v){return v.id;})},viz:{}};var v;for(var k=0;k<S.viz.length;k++){v=S.viz[k];if(!s.visualizations[v.vizId]){var e=d.layout.vizOrder;e.splice(e.indexOf(v.id),1);L.error("Tile "+v.id+" with vizId "+v.vizId+" has no matching visualization. As the tile cannot be used to start an app it is removed from the page.");continue;}d.viz[v.id]={id:v.id,vizId:v.vizId,displayFormatHint:v.displayFormatHint};}}};P.prototype.getPages=function(p){if(!(p&&Array.isArray(p)&&p.length!==0)){var e="PagesCommonDataModelAdapter: getPages is not an array or does not contain any Page id";L.fatal(e,null,this._sComponent);return Promise.reject(e);}return this.oSitePromise.then(function(s){var b=[],d;for(var i=0;i<p.length;i++){d=p[i];if(!s.pages[d]){b.push(p[i]);}}if(b.length===0){return s.pages;}return Promise.all([sap.ushell.Container.getServiceAsync("PagePersistence"),sap.ushell.Container.getServiceAsync("NavigationDataProvider")]).then(function(S){var o=S[0];var n=S[1];return Promise.all([o.getPages(b),n.getNavigationData()]);}).then(function(r){var f=r[0];var n=r[1];for(var j=0;j<f.length;j++){this._addPageToSite(s,f[j],n);}return s.pages;}.bind(this)).catch(function(E){L.fatal("PagesCommonDataModelAdapter encountered an error while fetching required services: ",E,this._sComponent);return Promise.reject(E);}.bind(this));}.bind(this));};P.prototype.getPersonalization=function(C){var d=new jQuery.Deferred();sap.ushell.Container.getServiceAsync("Personalization").then(function(p){var o;var b=new V(C);o={container:"sap.ushell.cdm.personalization",item:"data"};if(b.inRange("3.1.0","4.0.0")){o={container:"sap.ushell.cdm3-1.personalization",item:"data"};}var s={validity:"Infinity",keyCategory:p.constants.keyCategory.GENERATED_KEY,writeFrequency:p.constants.writeFrequency.HIGH,clientStorageAllowed:false};p.getPersonalizer(o,s).getPersData().done(function(e){d.resolve(e||{});}).fail(function(e){d.reject(e);});}).catch(function(){d.reject("Personalization Service could not be loaded");});return d.promise();};P.prototype.setPersonalization=function(p){var d=new jQuery.Deferred();sap.ushell.Container.getServiceAsync("Personalization").then(function(o){var b;var C=new V(p.version);b={container:"sap.ushell.cdm.personalization",item:"data"};if(C.inRange("3.1.0","4.0.0")){b={container:"sap.ushell.cdm3-1.personalization",item:"data"};}var s={validity:"Infinity",keyCategory:o.constants.keyCategory.GENERATED_KEY,writeFrequency:o.constants.writeFrequency.HIGH,clientStorageAllowed:false};o.getPersonalizer(b,s).setPersData(p).done(function(){d.resolve(p);}).fail(d.reject);}).catch(function(){d.reject("Personalization Service could not be loaded");});return d.promise();};return P;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/PersonalizationAdapter',["sap/ushell/adapters/cdm/_Personalization/internals","sap/ushell/utils/HttpClient"],function(a,H){"use strict";return a.PersonalizationAdapter.bind(null,H,null);},true);
sap.ui.predefine('sap/ushell/adapters/cdm/_LaunchPage/modifyHome',["sap/ushell/adapters/cdm/_LaunchPage/readHome","sap/ui/thirdparty/jquery"],function(r,q){"use strict";function c(u){return a(u,"Home",true);}function a(u,t,D){var g={"identification":{"id":u,"namespace":"","title":t},"payload":{"isPreset":false,"locked":false,"tiles":[],"links":[],"groups":[]}};if(D){g.payload.isDefaultGroup=true;}return g;}function b(S,g,i){var G=r.getGroupId(g);S.groups[G]=g;if(i!==undefined){S.site.payload.groupsOrder.splice(i,0,G);}else{S.site.payload.groupsOrder.push(G);}return S;}function o(S,g,G){if(S&&S.groups&&S.groups[G]){S.groups[G]=g;}return S;}function d(S,g){if(S&&S.groups&&S.groups[g.identification.id]){delete S.groups[g.identification.id];}if(S&&S.site&&S.site.payload&&S.site.payload.groupsOrder){S.site.payload.groupsOrder=q.grep(S.site.payload.groupsOrder,function(G){return G!==g.identification.id;});}return S;}function s(S,n){S.site.payload.groupsOrder=n;return S;}function e(g,n){g.identification.title=n;}function f(g,n){if(n){delete g.identification.isVisible;}else{g.identification.isVisible=false;}}return{createDefaultGroup:c,createEmptyGroup:a,addGroupToSite:b,overwriteGroup:o,removeGroupFromSite:d,setGroupsOrder:s,setGroupTitle:e,setGroupVisibility:f};},true);
sap.ui.predefine('sap/ushell/adapters/cdm/_LaunchPage/readCatalogs',[],function(){"use strict";function g(c){return c.identification.id;}function a(c){return c.identification.title;}return{getCatalogId:g,getCatalogTitle:a};},true);
sap.ui.predefine('sap/ushell/adapters/cdm/_LaunchPage/readHome',["sap/ushell/utils/type"],function(t){"use strict";function g(S){var L=[];S.site.payload.groupsOrder.forEach(function(G,I){var x=S.groups[G];if(x){x.payload=x.payload||{};L.push(x);}});return L;}function a(S){return S.groups;}function b(S){return S.site.payload.groupsOrder;}function c(S,G){return S.groups[G];}function d(G){var D=G.filter(function(x){return x.payload.hasOwnProperty("isDefaultGroup");});if(D.length>0){return D[0];}return undefined;}function e(G){return G.identification&&G.identification.id;}function f(G){return G.identification.title;}function i(G){if(!G.payload.hasOwnProperty("isPreset")){return true;}return!!G.payload.isPreset;}function h(G){return!!G.payload.locked;}function j(G){return!!(G.identification.isVisible===undefined||G.identification.isVisible===true);}function k(G){if(G.payload.tiles&&t.isArray(G.payload.tiles)&&G.payload.tiles.length>0){return G.payload.tiles;}return[];}function l(G){if(G.payload.links&&t.isArray(G.payload.links)&&G.payload.links.length>0){return G.payload.links;}return[];}function m(T){return T.id;}function n(R,T){var x;if(T&&T.isBookmark){return T.title;}x=R[T.id];if(x){return T.title||x.tileResolutionResult.title;}return undefined;}function o(R,T){var x;if(T.isBookmark){return T.subTitle;}x=R[T.id];if(x){return T.subTitle||x.tileResolutionResult.subTitle;}return undefined;}function p(R,T){var x;if(T.isBookmark){return T.info;}x=R[T.id];return T.info||x.tileResolutionResult.info;}function q(R,T){var x;if(T.isBookmark){return T.icon;}x=R[T.id];if(x){return T.icon||x.tileResolutionResult.icon;}return undefined;}function r(R,T){var x;if(T.isBookmark){return T.icon;}x=R[T.id];if(x){return T.icon||x.tileResolutionResult.icon;}return undefined;}function s(R,T){var x=R[T.id];if(x&&x.tileResolutionResult&&x.tileResolutionResult.size){return x.tileResolutionResult.size;}}function u(R,T){var x=R[T.id];if(x){return!!x.isLink;}return false;}function v(T){return!!(T&&T.id&&!T.isCatalogTile);}function w(A,F){return A.deviceTypes&&A.deviceTypes[F];}return{getGroupsArrayFromSite:g,getGroupsMapFromSite:a,getGroupIdsFromSite:b,getGroupFromSite:c,getDefaultGroup:d,getGroupId:e,getGroupTitle:f,isGroupPreset:i,isGroupLocked:h,isGroupVisible:j,getGroupTiles:k,getGroupLinks:l,getTileId:m,getTileTitle:n,getTileSubtitle:o,getTileInfo:p,getTileIcon:q,getTileIndicatorDataSource:r,getTileSize:s,isLink:u,isGroupTile:v,supportsFormFactor:w};},true);
sap.ui.predefine('sap/ushell/adapters/cdm/_LaunchPage/uri.transform',["sap/ui/thirdparty/URI"],function(U){"use strict";function t(u,s,f,g){var o=(e(u))?new U(u):null;if(!o){return{error:'Error: Parameter sUri is empty or not a string, use case not supported.'};}if(!b(o)){return r(u,null,null,null,u);}var h=(e(s))?new U(s):null;if(h&&!b(h)){return r(u,s,null,null,o.absoluteTo(h));}var i=new U().search("");if(i.toString()==""){i=new U('https://x.y.z:8443/sap/bc/ui5_ui5/ui2/ushell/test-resources/sap/ushell/shells/cdm/fioriCDM.html?params');}var k=(e(f))?new U(m(f)):i;if(!b(k)&&!g){return r(u,s,U.joinPaths(h,o),c(k),U.joinPaths(h,o).absoluteTo(k));}var l=(e(g))?new U(g):i;if(!k||!l.toString()){return{error:'Error: Parameter sUriNewBase is empty or not a string, use case not supported.'};}if(b(l)){return{error:'Error: Parameter sUriNewBase is a relative uri, but must be absolute.'};}if(b(k)&&!b(l)){k=k.absoluteTo(l);}if(!b(k)&&!b(l)){if(k.host()&&l.host()&&k.host()!=l.host()){return{error:'Error: Hosts of the parameters sUriBase and sUriNewBase are given but do not match.'};}var n=d(k).relativeTo(d(l));var p;if(e(s)){p=o.absoluteTo(h.absoluteTo(n.absoluteTo(l)));var q=j(n,h);var v=j(q,o);return r(o,q,v,c(l),p);}else{p=o.absoluteTo(n.absoluteTo(l));var w=j(n,o);w.query(o.query());return r(w,null,w,c(l),p);}}return{error:'Error: Parameter combination not supported.'};}function r(u,o,f,g,h){var r={};if(u){r.uri=u.toString();}if(o){r.uriParent=o.toString();}if(f){r.uriRelative=f.toString();}if(g){r.uriBase=g.toString();}if(h){r.uriAbsolute=h.toString();}return r;}function a(u){if(!u.is("relative")){return false;}return u.toString()[0]=='/';}function b(u){return!u.is("absolute")&&!a(u);}function c(u){return u.filename("").search("").fragment("");}function j(){var l=new U("/1/2/3/4/5/6/7/8/9/");var r=l;for(var i=0;i<arguments.length;i++){r=U.joinPaths(r,arguments[i]);}return r.relativeTo(l);}function d(u){return U.joinPaths(u.directory(),'/');}function m(u){var s=u;if(u){var o=new U(u);if(o.filename()&&o.filename().indexOf(".")==-1&&o.filename().slice(-1)!='/'){s+='/';}}return s;}function e(f){return(f&&typeof f==='string');}return t;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/_Personalization/internals',["sap/ushell/services/_Personalization/constants","sap/ushell/services/_Personalization/constants.private","sap/ui/thirdparty/jquery","sap/base/Log"],function(s,i,q,L){"use strict";return{PersonalizationAdapter:P,getStorageResourceRoot:g,getContainerPath:c,delAdapterContainer:e,createContainerData:f,getAdapterContainer:A,getContainerCategory:h,isCategoryPContainer:k,trimContainerKey:t,save:l,load:m,del:n,clearContainerData:o,getItemKeys:u,containsItem:v,setItemValue:w,getItemValue:x,delItem:y,addPrefixToItemKey:p,stripPrefixFromItemKey:r,getHttpHeaderValue:z};function P(H,C,S,B,D){var E,F;var G={cache:{},headers:{"sap-client":S.getClient()}};D=D&&D.config;if(!D){throw new Error("PersonalizationAdapter: missing configuration.");}if(!C){C={};}E=g(D);F=new H(E,G);return{getAdapterContainer:A.bind(null,D,C,F),delAdapterContainer:e.bind(null,D,C,F)};}function g(C){var I=!C||!C.storageResourceRoot;if(I){throw new Error("Configuration error: storage resource root is not defined.");}return C.storageResourceRoot;}function a(C){var I=!C||!C.relativeUrlReadOptimized;if(I){throw new Error("Configuration error: relative URL for read optimization is not defined.");}return C.relativeUrlReadOptimized;}function b(C){var I=!C||!C.relativeUrlWriteOptimized;if(I){throw new Error("Configuration error: relative URL for write optimization is not defined.");}return C.relativeUrlWriteOptimized;}function c(C,S,B){return j(C,S)+"/"+encodeURIComponent(t(B))+".json";}function t(C){var B=i.S_CONTAINER_PREFIX,D,R;if(q.type(C)!=="string"||C.length===0){throw new Error("Personalization container key must be a non-empty string");}if(C.substring(0,B.length)===B){D=C.substring(B.length);}else{L.error("Unexpected personalization container key: "+C,"should always be prefixed with "+B,"sap.ushell.adapters.cdm.PersonalizationAdapter");D=C;}if(D.length<=40){R=D;}else{R=D.substring(0,40);L.error("Invalid personalization container key: '"+D+"'"+" exceeds maximum key length (40 characters) and is shortened to '"+R+"'",undefined,"sap.ushell.adapters.cdm.PersonalizationAdapter");}return R;}function d(){return{validity:Infinity,keyCategory:s.keyCategory.GENERATED_KEY,writeFrequency:s.writeFrequency.HIGH,clientStorageAllowed:false};}function e(C,B,H,D,S){var E=c(C,S,D);var F=B&&B[E];if(F){delete B[E];}return n(H,E);}function f(S,B){var C;if((!B&&B!=="")||B.constructor!==String){L.warning("Personalization container has an invalid app name; must be a non-empty string",null,"sap.ushell.adapters.cdm.PersonalizationAdapter");}if(!S){S=d();}C={items:{},__metadata:{appName:B,expiry:Date.now()+S.validity*60*1000,validity:S.validity,category:h(S)}};return C;}function A(C,B,H,D,S,E){var F,G,I=c(C,S,D);if(B&&B[I]){return B[I];}G=f(S,E);F=G.items;return{save:l.bind(null,H,G,I),load:m.bind(null,H,G,I),del:n.bind(null,H,G,I),setItemValue:w.bind(null,F),getItemValue:x.bind(null,F),getItemKeys:u.bind(null,F),containsItem:v.bind(null,F),delItem:y.bind(null,F)};}function h(S){return k(S)?"p":"u";}function j(C,S){return k(S)?a(C):b(C);}function k(S){return S&&S.keyCategory===s.keyCategory.FIXED_KEY&&S.writeFrequency===s.writeFrequency.LOW&&S.clientStorageAllowed;}function l(H,C,B){return new q.Deferred(function(D){H.put(B,{data:C}).then(function(R){D.resolve();}).catch(function(R){L.error("Failed to save personalization container; response: "+(typeof R==="object"?JSON.stringify(R):R),R.stack?R.stack:null,"sap.ushell.adapters.cdm.PersonalizationAdapter");D.reject(R);});}).promise();}function m(H,C,B){function D(C){o(C.items);}return new q.Deferred(function(E){H.get(B).then(function(R){var F,G;if(R.status===200&&z(R.responseHeaders,"content-length")==="0"&&z(R.responseHeaders,"content-type").indexOf("text/plain")===0){D(C);}else{F=JSON.parse(R.responseText);if(F.data){F.items=F.data;delete F.data;F.__metadata=C.__metadata;}G=F.items;o(C.items);Object.keys(G).forEach(function(I){C.items[I]=G[I];});C.__metadata=F.__metadata;}E.resolve();}).catch(function(R){if(R.status===404){D(C);E.resolve();}else{o(C.items);E.reject(R);}});}).promise();}function n(H,B){return new q.Deferred(function(D){H.delete(B).then(function(){D.resolve();}).catch(function(R){D.reject(R);});}).promise();}function o(C){Object.keys(C).forEach(function(K){delete C[K];});}function p(K){if(K==="__metadata"){return undefined;}else if(K.indexOf(i.S_VARIANT_PREFIX)===0||K.indexOf(i.S_ADMIN_PREFIX)===0){return K;}return i.S_ITEM_PREFIX+K;}function r(K){if(K.indexOf(i.S_ITEM_PREFIX)===0){return K.substring(i.S_ITEM_PREFIX.length);}else if(K.indexOf(i.S_VARIANT_PREFIX)===0||K.indexOf(i.S_ADMIN_PREFIX)===0){return K;}throw new Error("Illegal item key for personalization container: '"+K+"'; must be prefixed with one of the following: ["+i.S_ITEM_PREFIX+", "+i.S_VARIANT_PREFIX+", "+i.S_ADMIN_PREFIX+"] ");}function u(C){return Object.keys(C).map(p).filter(function(K){return!!K;});}function v(C,K){return C.hasOwnProperty(r(K));}function w(C,K,V){C[r(K)]=V;}function x(C,K){return C[r(K)];}function y(C,K){delete C[r(K)];}function z(H,N){var M=H&&H.filter(function(B){return B.name.toLowerCase()===N;});return M&&M[0]&&M[0].value;}});
sap.ui.predefine('sap/ushell/adapters/cdm/util/AppForInbound',["sap/base/util/ObjectPath","sap/base/Log"],function(O,L){"use strict";var A={};A.get=function(i,a){var o={};switch(a.resolutionResult.applicationType){case"SAPUI5":o=this._getUI5App(i,a);break;case"TR":o=this._getTRApp(i,a);break;case"WDA":o=this._getWDAApp(i,a);break;case"URL":o=this._getURLApp(i,a);break;case"WCF":o=this._getWCFApp(i,a);break;default:L.error("Unable to get CDM app for inbound: Application type '"+a.resolutionResult.applicationType+"' of app '"+i+"' is unknown and not supported.");throw new Error("Unknown application type: "+a.applicationType);}if(a.resolutionResult.systemAlias){O.set(["sap.app","destination"],{name:a.resolutionResult.systemAlias,semantics:"applied"},o);}return o;};A._getURLApp=function(i,a){return{"sap.app":{"id":i,"crossNavigation":{"inbounds":{"Shell-launchURL":{"semanticObject":"Shell","action":"launchURL","signature":{"parameters":{"sap-external-url":{"required":true,"filter":{"value":a.resolutionResult.url,"format":"plain"}}}}}}}},"sap.ui":{"technology":"URL","deviceTypes":a.deviceTypes},"sap.url":{"uri":a.resolutionResult.url}};};A._getUI5App=function(i,a){return{"sap.app":{"id":i,"title":a.resolutionResult.text,"subTitle":a.resolutionResult.information,"crossNavigation":{"inbounds":this._getApplicationInbound(a)}},"sap.ui5":{"componentName":a.resolutionResult.ui5ComponentName},"sap.ui":{"technology":"UI5","deviceTypes":a.deviceTypes},"sap.platform.runtime":{"componentProperties":{"url":a.resolutionResult.url}}};};A._getApplicationInbound=function(i){var a={};a[i.id]={"semanticObject":i.semanticObject,"action":i.action,"signature":i.signature};return a;};A._getTRApp=function(i,a){var t,T=a.resolutionResult.url.match(/transaction=(.+?)[&?]/);if(T){t=T[1];}else{L.error("Unable to determine ABAP transaction from inbound URL of app '"+i+"': "+a.resolutionResult.url+".");}return{"sap.app":{"id":i,"title":a.resolutionResult.text,"subTitle":a.resolutionResult.information,"crossNavigation":{"inbounds":this._getApplicationInbound(a)}},"sap.ui":{"technology":"GUI","deviceTypes":a.deviceTypes},"sap.flp":{"type":"application"},"sap.gui":{"transaction":t}};};A._getWDAApp=function(i,a){return{"sap.app":{"id":i,"title":a.resolutionResult.text,"subTitle":a.resolutionResult.information,"crossNavigation":{"inbounds":this._getApplicationInbound(a)}},"sap.ui":{"technology":"URL","deviceTypes":a.deviceTypes},"sap.url":{"uri":a.resolutionResult.url}};};A._getWCFApp=function(i,a){return{"sap.app":{"id":i,"title":a.resolutionResult.text,"subTitle":a.resolutionResult.information,"crossNavigation":{"inbounds":this._getApplicationInbound(a)}},"sap.ui":{"technology":"URL","deviceTypes":a.deviceTypes},"sap.url":{"uri":a.resolutionResult.url}};};return A;});
sap.ui.predefine('sap/ushell/adapters/cdm/util/cdmSiteUtils',["sap/ushell/adapters/cdm/util/AppForInbound","sap/base/Log","sap/ushell/adapters/cdm/v3/utilsCdm","sap/ushell/library"],function(A,L,u,a){"use strict";var D=a.DisplayFormat;var c={_VISUALIZATION_TYPES:{STATIC_TILE:"sap.ushell.StaticAppLauncher",DYNAMIC_TILE:"sap.ushell.DynamicAppLauncher"}};c.getVisualizations=function(v,b){var V={};Object.keys(v).forEach(function(d){var o=v[d];var s;if(o.isCustomTile){s=o._instantiationData.catalogTile.baseChipId;}else if(o.indicatorDataSource){s=this._VISUALIZATION_TYPES.DYNAMIC_TILE;}else{s=this._VISUALIZATION_TYPES.STATIC_TILE;}var e={vizType:s,vizConfig:{"sap.app":{title:o.title,subTitle:o.subTitle,info:o.info},"sap.ui":{icons:{icon:o.icon}},"sap.flp":{tileSize:o.size,indicatorDataSource:o.indicatorDataSource,numberUnit:o.numberUnit}}};if(o.isCustomTile){e.vizConfig["sap.flp"]._instantiationData=o._instantiationData;}e.vizConfig["sap.flp"].target=u.toTargetFromHash(o.url,b);V[d]=e;}.bind(this));return V;};c.getApplications=function(n){return Object.keys(n).reduce(function(o,b){var i=n[b],I=i.permanentKey||i.id;try{o[I]=A.get(b,i);}catch(e){L.error("Unable to dereference app '"+b+"' of CDM page.");o[b]={};}return o;},{});};c.getVizTypes=function(v){return Object.keys(v).filter(function(V){var o=v[V];return o.isCustomTile;}).reduce(function(V,s){var o=v[s];var C=o._instantiationData.catalogTile;var b=C.baseChipId;if(!V[b]){V[b]={"sap.app":{id:b,type:"platformVisualization"},"sap.flp":{vizOptions:{displayFormats:this._getDisplayFormats(C)}}};}var t=this._getTileSize(C);if(t){V[b]["sap.flp"].tileSize=t;}return V;}.bind(this),{});};c._getDisplayFormats=function(b){var d=[D.Standard];var s=D.Standard;if(b.contracts.types){d=b.contracts.types.availableTypes;s=b.contracts.types.defaultType;d=d.map(function(t){if(t==="flatwide"){return D.FlatWide;}return t;});if(s==="flatwide"){s=D.FlatWide;}}return{supported:d,default:s};};c._getTileSize=function(b){if(b.configuration&&b.configuration.row&&b.configuration.col){return b.configuration.row+"x"+b.configuration.col;}return null;};return c;});
sap.ui.predefine('sap/ushell/adapters/cdm/v3/AdapterBase',["sap/ushell/adapters/cdm/v3/_LaunchPage/readHome","sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations","sap/ushell/adapters/cdm/v3/_LaunchPage/readUtils","sap/m/GenericTile","sap/ui/core/ComponentContainer","sap/ushell/adapters/cdm/_LaunchPage/uri.transform","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/navigationMode","sap/ushell/resources","sap/ushell/utils","sap/ushell/adapters/cdm/v3/utilsCdm","sap/base/util/Version","sap/ui/thirdparty/jquery","sap/base/util/isPlainObject","sap/base/util/isEmptyObject","sap/base/util/ObjectPath","sap/base/util/deepExtend","sap/base/util/deepClone","sap/base/Log"],function(r,R,a,G,C,u,b,e,n,o,U,c,V,q,i,d,O,f,g,L){"use strict";var l=L.getLogger("sap/ushell/adapters/cdm/LaunchPageAdapter");var h=L.Level;var S="sap.ushell.components.tiles.cdm.applauncher";var D="sap.ushell.components.tiles.cdm.applauncherdynamic";function A(j,p,k){this.oAdapterConfiguration=k;this._mResolvedTiles={};this._mCatalogTilePromises={};this._mFailedResolvedCatalogTiles={};this._mFailedResolvedTiles={};this._mContentProviders={};this.TileType={Tile:"tile",Link:"link",Card:"card"};}A.prototype.getGroups=function(){var j=new q.Deferred();this._ensureLoaded().done(function(k){U.setPerformanceMark("FLP - homepage groups processed");j.resolve(k);}).fail(function(){j.resolve([]);});return j.promise();};A.prototype._ensureLoaded=function(){var t=this,j;if(this._ensureLoadedDeferred){return this._ensureLoadedDeferred.promise();}j=new q.Deferred();this._ensureLoadedDeferred=j;this._getSiteData().done(function(s){if(!t.isSiteSupported(s)){throw new Error("Invalid CDM site version: Check the configuration of the launchpage adapter and the version of the FLP site");}var I=[];var k=r.getGroupsArrayFromSite(s);k=t._addDefaultGroup(k,s);k.forEach(function(m){I=t._ensureGroupItemsResolved(m,s).concat(I);});t._allPromisesDone(I).done(function(){t._ensureLoadedDeferred.resolve(k);delete t._ensureLoadedDeferred;t._logTileResolutionFailures(t._mFailedResolvedTiles);});}).fail(function(E){l.error("Delivering hompage groups failed - "+E);t._ensureLoadedDeferred.resolve([]);delete t._ensureLoadedDeferred;});return j.promise();};A.prototype._ensureGroupItemsResolved=function(j,s){var p=[],k,m;if(j.payload&&j.payload.tiles){k=this._ensureGroupTilesResolved(j.payload.tiles,s);Array.prototype.push.apply(p,k);}if(j.payload&&j.payload.links){m=this._ensureGroupLinksResolved(j.payload.links,s);Array.prototype.push.apply(p,m);}return p;};A.prototype._ensureGroupTilesResolved=function(j,s){return(j||[]).map(function(t,I){return this._resolveGroupTile(t,s).then(function(k){k.isLink=false;return k;});},this);};A.prototype._ensureGroupLinksResolved=function(j,s){return(j||[]).map(function(k){return this._resolveGroupTile(k,s).then(function(m){m.isLink=true;return m;});},this);};A.prototype._resolveGroupTile=function(t,s){var m=this._mResolvedTiles;var F=this._mFailedResolvedTiles;var j;function k(w){m[t.id]=w;if(F[t.id]){delete F[t.id];}return w;}function p(t){var T=t.target;return T&&T.semanticObject==="Shell"&&T.action==="launchURL";}if(m[t.id]){return(new q.Deferred()).resolve(m[t.id]).promise();}if(t.target&&t.target.url){j=q.when(this._getTileForUrl(t));}else if(t.isBookmark&&t.vizType===undefined){j=this._resolveTileByIntent(t,s);}else if(p(t)){j=this._resolveTileByIntent(t,s);}else{j=this._resolveTileByVizId(t,s);}var v=new q.Deferred();j.done(function(w){v.resolve(k(w));}).fail(function(w){F[t.id]=w;v.reject(w);});return v.promise();};A.prototype._resolveTileByVizId=function(t,s){var v,j,k,m,p,w,I,M,N,x,H,y,E;function z(Q,T){return new q.Deferred().reject({logLevel:Q,message:T}).promise();}var B=new q.Deferred();if(!i(s)){return z(h.ERROR,"Cannot resolve tile: oSite must be an object");}if(!i(t)){return z(h.ERROR,"Cannot resolve tile: oTile must be an object");}j=t.vizId;v=g(R.get(s,j||"")||{});m=t.vizType||R.getTypeId(v);k=R.getType(s,m);if(!k){return z(h.ERROR,"Cannot resolve tile '"+t.id+"': no visualization type found for vizTypeId '"+m+"'");}p=R.getAppId(v);if(p){w=R.getAppDescriptor(s,p);if(!w){return z(h.INFO,"Tile '"+t.id+"' filtered from result: no app descriptor found for appId '"+p+"' (dangling app reference)");}I=r.getInbound(w,R.getTarget(v).inboundId);if(!I){return z(h.ERROR,"Cannot resolve tile '"+t.id+"': app '"+p+"' has no navigation inbound");}M=c.mapOne(I.key,I.inbound,w,v,k,s);var F=M.resolutionResult.applicationType,J=M.resolutionResult.additionalInformation,K=b.last("/core/navigation/enableInPlaceForClassicUIs"),P=K?K[F]:false;N=n.computeNavigationModeForHomepageTiles(F,J,P);y=R.getOutbound(v,I.inbound);H=this._toHashFromOutbound(y);}else{v.vizConfig=f({},v.vizConfig,t.vizConfig);M=c.mapOne(undefined,undefined,undefined,v,k,s);if(R.startsExternalUrl(v)){E=U.getMember(v.vizConfig,"sap|flp.target.url");}}x=M.tileResolutionResult;x.navigationMode=N;x.isLink=false;if(!this._isFormFactorSupported(x)){return z(h.INFO,"Tile '"+t.id+"' filtered from result: form factor not supported");}if(E||H){B.resolve({tileResolutionResult:x,tileIntent:E||H});}else{if(!this._oUrlParsingPromise){this._oUrlParsingPromise=sap.ushell.Container.getServiceAsync("URLParsing");}this._oUrlParsingPromise.then(function(Q){if(t.target){var T=g(t.target);H=c.toHashFromTarget(a.harmonizeTarget(T),Q);}B.resolve({tileResolutionResult:x,tileIntent:H});});}return B.promise();};A.prototype._isFormFactorSupported=function(j){var s=U.getFormFactor();return r.supportsFormFactor(j,s);};A.prototype._getFirstInbound=function(j){var F=Object.keys(j["sap.app"].crossNavigation.inbounds).shift(),I=j["sap.app"].crossNavigation.inbounds[F];return{key:F,inbound:I};};A.prototype._resolveTileByIntent=function(t){var H=this._prepareTileHash(t);return this._getTileFromHash(H);};A.prototype._allPromisesDone=function(p){var j=new q.Deferred(),k;if(p.length===0){j.resolve([]);}else{var N=p.map(function(P){k=new q.Deferred();P.always(k.resolve.bind(k));return k.promise();});q.when.apply(this,N).done(function(){var m=Array.prototype.slice.call(arguments);j.resolve(m);});}return j.promise();};A.prototype._logTileResolutionFailures=function(F){var m={};if(!F){return;}Object.keys(h).filter(function(s){var j=h[s];return j>=h.FATAL&&j<=h.ALL;}).forEach(function(s){m[h[s]]="";});Object.keys(F).forEach(function(s){var j=F[s];if(j.logLevel){m[j.logLevel]=m[j.logLevel].concat(j.message).concat("\n");}});if(m[h.FATAL]){l.fatal(m[h.FATAL]);}if(m[h.ERROR]){l.error(m[h.ERROR]);}if(m[h.WARNING]){l.warning(m[h.WARNING]);}if(m[h.INFO]){l.info(m[h.INFO]);}if(m[h.DEBUG]){l.debug(m[h.DEBUG]);}if(m[h.TRACE]){l.trace(m[h.TRACE]);}};A.prototype._isValidTitle=function(t){return typeof t==="string"&&t;};A.prototype._isGroupPreset=function(j){return r.isGroupPreset(j);};A.prototype._isGroupLocked=function(j){return r.isGroupLocked(j);};A.prototype.getGroupTitle=function(j){return r.getGroupTitle(j);};A.prototype.getGroupId=function(j){return r.getGroupId(j);};A.prototype.isGroupVisible=function(j){return r.isGroupVisible(j);};A.prototype.getTileTitle=function(t){return r.getTileTitle(this._mResolvedTiles,t);};A.prototype.getTileSubtitle=function(t){return r.getTileSubtitle(this._mResolvedTiles,t);};A.prototype.getTileIcon=function(t){return r.getTileIcon(this._mResolvedTiles,t);};A.prototype.getTileInfo=function(t){return r.getTileInfo(this._mResolvedTiles,t);};A.prototype.getTileIndicatorDataSource=function(t){var j=this._mResolvedTiles[t.id],k={},m;if(t.indicatorDataSource){k.indicatorDataSource=U.clone(t.indicatorDataSource);if(t.dataSource){k.dataSource=U.clone(t.dataSource);}return k;}if(!j){return k;}m=j.tileResolutionResult;if(m.indicatorDataSource){k.indicatorDataSource=U.clone(m.indicatorDataSource);if(m.indicatorDataSource.hasOwnProperty("dataSource")){var s=m.indicatorDataSource.dataSource,p=m.dataSources;if(p&&p.hasOwnProperty(s)){k.dataSource=U.clone(p[s]);}else{L.warning("datasource referenced but not found for tile: "+j.tileIntent);}}if(U.getMember(m,"runtimeInformation.componentProperties.url")){var P=U.getMember(k,"indicatorDataSource.path");var v=U.getMember(k,"dataSource.uri");var w=U.getMember(m,"runtimeInformation.componentProperties.url");var T=u(P,v,w,this.getWindowLocationHref());if(!T.error){if(P){k.indicatorDataSource.path=T.uri;}if(v){k.dataSource.uri=T.uriParent;}}}}return k;};A.prototype.getWindowLocationHref=function(){return window.location.href;};A.prototype.isGroupRemovable=function(j){return!this._isGroupPreset(j);};A.prototype.isGroupLocked=function(j){return this._isGroupLocked(j);};A.prototype.getGroupTiles=function(j){return r.getGroupTiles(j).concat(r.getGroupLinks(j));};A.prototype.getTileType=function(I){if(r.isLink(this._mResolvedTiles,I)){return this.TileType.Link;}if(r.isCard(this._mResolvedTiles,I)){return this.TileType.Card;}return this.TileType.Tile;};A.prototype.getTileId=function(t){return r.getTileId(t);};A.prototype.getTileSize=function(t){return r.getTileSize(this._mResolvedTiles,t)||"1x1";};A.prototype.getTileTarget=function(t){var T=r.getTileId(t),j=this._mResolvedTiles[T];if(t.target&&t.target.url){return t.target.url;}if(j){return j.tileIntent;}L.warning("Could not find a target for Tile with id '"+T+"'","sap.ushell.adapters.cdm.LaunchPageAdapter");return"";};A.prototype.isTileIntentSupported=function(t){return(this._mFailedResolvedTiles[t.id]===undefined);};A.prototype.setTileVisible=function(t,N){var j=this._mResolvedTiles[t.id];if(j){if(j.tileComponent){this._notifyTileAboutVisibility(j.tileComponent,N,j.visibility);}j.visibility=N;}};A.prototype.getCardManifest=function(j){var k,m=this._mResolvedTiles[j.id];k=m.tileResolutionResult;return k.tileComponentLoadInfo;};A.prototype._getTileUiComponentContainerSync=function(t,j,I){var k=this,m,T,N,p,s={};if(I===true){T=k._createTileComponentData(t,true,j);}else{T=k._createTileComponentData(t,false,j);}m=j.tileResolutionResult;if(j.isLink){N=m.navigationMode;return k._createLinkInstance(t,I,N,G,o);}if(typeof m.tileComponentLoadInfo==="object"&&m.tileComponentLoadInfo!==null){s=m.tileComponentLoadInfo.componentProperties||{};s.name=m.tileComponentLoadInfo.componentName;}s.componentData=T;if(s.manifest){s.componentData.properties=s.componentData.properties||{};s.componentData.properties.manifest=s.manifest;}if(s.name){s.async=false;var v;try{p=sap.ui.component(s);}catch(E){L.error(E.message+"\n-- An error occurred while instantiating "+"the tile component for "+s.name,E.stack?E.stack:"","sap.ushell.adapters.cdm.LaunchPageAdapter");return null;}v=new sap.ui.core.ComponentContainer({component:p,height:"100%"});if(!I){k._mResolvedTiles[t.id].tileComponent=p;}return v;}return null;};A.prototype._getTileUiComponentContainer=function(t,j,I){var k=this,m,T,N,p,s,v,w=new q.Deferred();var x=sap.ushell.Container.getService("Ui5ComponentLoader");if(I===true){T=k._createTileComponentData(t,true,j);}else{T=k._createTileComponentData(t,false,j);}m=j.tileResolutionResult;if(j.isLink){N=m.navigationMode;w.resolve(k._createLinkInstance(t,I,N,G,o));return w.promise();}var y=this._createTileComponentProperties(T,m.tileComponentLoadInfo);if(!y.name){return w.reject("Cannot find name of tile component for tile with id: '"+t.id+"'").promise();}if(y.manifest){T.properties=T.properties||{};T.properties.manifest=y.manifest;}v=this._isCustomTileComponent(y.name);var z=function(B){var j;p=B.componentHandle.getInstance();s=new C({component:p,height:"100%"});if(!I){j=k._mResolvedTiles[t.id];j.tileComponent=p;if(typeof j.visibility==="boolean"){k._notifyTileAboutVisibility(p,j.visibility);}}return s;};var _=function(){return x.createComponent({loadCoreExt:v,loadDefaultDependencies:false,componentData:T,url:y.url,applicationConfiguration:{},reservedParameters:{},applicationDependencies:y,ui5ComponentName:y.name},{},[]).then(z);};if(v){e.once("CoreResourcesComplementLoaded").do(function(){_().then(function(s){w.resolve(s);}).fail(function(E){w.reject(E);});});}else{_().then(function(s){w.resolve(s);}).fail(function(E){w.reject(E);});}return w.promise();};A.prototype._createTileComponentProperties=function(t,T){var j={};if(!T||d(T)){if(t.properties.indicatorDataSource&&t.properties.indicatorDataSource.path){j.name=D;}else{j.name=S;}}else{j=T.componentProperties||{};j.name=T.componentName;}return j;};A.prototype.getTileView=function(j){var t=this;return new q.Deferred(function(k){return t._getTileView(j,false).then(function(T){k.resolve(T);},function(s){var E="Tile with ID '"+j.id+"' could not be initialized"+(s?":\n"+s:".");L.error(E,null,j.tileType);k.reject(E);});}).promise();};A.prototype._getTileView=function(j){var k,E,m=new q.Deferred();if(typeof j!=="object"||!j.id){E="Invalid input parameter passed to _getTileView: "+j;L.error(E);return m.reject(E).promise();}k=this._mResolvedTiles[j.id];if(!k){E="No resolved tile found for tile ID: "+j.id;L.error(E);return m.reject(E).promise();}return this._getTileUiComponentContainer(j,k,false);};A.prototype._createTileComponentData=function(t,I,j){var T=I?this.getCatalogTileTitle(t):this.getTileTitle(t),s=I?this.getCatalogTilePreviewSubtitle(t):this.getTileSubtitle(t),k=I?this.getCatalogTilePreviewIcon(t):this.getTileIcon(t),m=I?this.getCatalogTilePreviewInfo(t):this.getTileInfo(t),p=I?this.getCatalogTileTargetURL(t):this.getTileTarget(t),v=this.getTileIndicatorDataSource(t),N=t.numberUnit||j.tileResolutionResult.numberUnit,w={properties:{},startupParameters:{}};if(j.tileResolutionResult.isCustomTile===true&&j.tileResolutionResult.startupParameters){w.startupParameters=j.tileResolutionResult.startupParameters;}if(T){w.properties.title=T;}if(m){w.properties.info=m;}if(s){w.properties.subtitle=s;}if(k){w.properties.icon=k;}if(p){w.properties.targetURL=p;}if(N){w.properties.numberUnit=N;}if(v.indicatorDataSource){w.properties.indicatorDataSource=v.indicatorDataSource;if(v.dataSource){w.properties.dataSource=v.dataSource;}}if(j.tileResolutionResult){w.properties.navigationMode=j.tileResolutionResult.navigationMode;w.properties.contentProviderId=j.tileResolutionResult.contentProviderId||"";}return w;};A.prototype._isGroupTile=function(t){return r.isGroupTile(t);};A.prototype._isCatalogTile=function(t){return!!(t&&t.isCatalogTile);};A.prototype._isFailedGroupTile=function(t){return!!(t&&this._mFailedResolvedTiles&&this._mFailedResolvedTiles[r.getTileId(t)]);};A.prototype.getCatalogTileId=function(j){if(this._isGroupTile(j)){if(this._isFailedGroupTile(j)){return undefined;}if(j.isBookmark&&O.get("target.url",j)){return j.target.url;}return j.vizId||(j.target&&j.target.url);}if(this._isCatalogTile(j)){return j.id;}return undefined;};A.prototype.getCatalogTilePreviewTitle=function(j){if(this._isGroupTile(j)){return this.getTileTitle(j);}return(j.tileResolutionResult&&j.tileResolutionResult.title)||"";};A.prototype.getCatalogTileTargetURL=function(j){if(!j){throw new Error("The given tile is falsy");}if(this._isCatalogTile(j)){if(j.tileResolutionResult&&j.tileResolutionResult.isCustomTile){if(!j.tileResolutionResult.targetOutbound){return"";}return this._toHashFromOutbound(j.tileResolutionResult.targetOutbound);}return j.tileIntent||"";}return this.getTileTarget(j);};A.prototype.isGroupFeatured=function(j){return!!j.isFeatured;};A.prototype._getMember=function(j,s){return U.getMember(j,s);};A.prototype.getCdmVersionsSupported=function(){return{min:V("3.0.0"),max:V("3.1.0")};};A.prototype.isSiteSupported=function(s){if(!s._version||V(s._version).compareTo(this.getCdmVersionsSupported().min)<0||V(s._version).compareTo(this.getCdmVersionsSupported().max)>0){L.fatal("Invalid CDM site version: Only version 3.0.0 is supported");return false;}return true;};A.prototype._isCustomTileComponent=function(s){return!(s===S||s===D);};return A;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/v3/LaunchPageAdapter',["sap/ushell/adapters/cdm/v3/_LaunchPage/readHome","sap/ushell/adapters/cdm/_LaunchPage/modifyHome","sap/ushell/adapters/cdm/v3/_LaunchPage/readCatalogs","sap/m/library","sap/ushell/utils","sap/ushell/utils/WindowUtils","sap/ushell/adapters/cdm/v3/utilsCdm","sap/ushell/components/tiles/utilsRT","sap/ushell/adapters/cdm/v3/AdapterBase","sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations","sap/ushell/navigationMode","sap/ushell/Config","sap/ui/model/json/JSONModel","sap/ui/thirdparty/jquery","sap/base/util/isEmptyObject","sap/base/util/ObjectPath","sap/base/Log"],function(r,m,R,M,u,W,U,o,A,a,n,C,J,q,i,O,L){"use strict";var g=M.GenericTileMode;var S="sap.ushell.components.tiles.cdm.applauncher";var D="sap.ushell.components.tiles.cdm.applauncherdynamic";function b(c,p,d){A.call(this,c,p,d);this._getTileFromHashInContextOfSite=function(e,y,I){var z=new q.Deferred(),B=y[I];if(!B){B=e(I);y[I]=B;}B.done(function(T){var E={tileIntent:I,tileResolutionResult:T};z.resolve(E);}).fail(function(E){z.reject("Hash '"+I+"' could not be resolved to a tile. "+E);});return z.promise();};this._getTileFromHash=function(I){var e=sap.ushell.Container.getService("ClientSideTargetResolution");var y=e.resolveTileIntent.bind(e);return this._getTileFromHashInContextOfSite(y,this._mCatalogTilePromises,I);};this._getTileFromHashFromSite=function(e,I){var y=sap.ushell.Container.getService("ClientSideTargetResolution");var z=U.formatSite(e);var B=y.resolveTileIntentInContext.bind(y,z);var E={};return this._getTileFromHashInContextOfSite(B,E,I);};this._getTileForUrl=function(T){var e={componentName:T.indicatorDataSource?D:S};return{tileIntent:"#",tileResolutionResult:{tileComponentLoadInfo:e,isCustomTile:false}};};this._prepareTileHash=function(T){var e=sap.ushell.Container.getService("URLParsing"),P={},y,z;if(this._isCatalogTile(T)){return T.tileIntent;}if(this._isGroupTile(T)&&T.target){z=T.target.parameters||[];z.forEach(function(B){if(B.name&&B.value){P[B.name]=[B.value];}});y={target:{semanticObject:T.target.semanticObject,action:T.target.action},params:P,appSpecificRoute:T.target.appSpecificRoute};return"#"+e.constructShellHash(y);}return undefined;};this.getDefaultGroup=function(){var e=new q.Deferred(),y;var z=this;if(!this._oDefaultGroup){y=this._ensureLoaded();}if(y){y.done(function(){e.resolve(z._oDefaultGroup);}).fail(function(B){e.reject("Failed to access default group. "+B);});}else{e.resolve(z._oDefaultGroup);}return e.promise();};this.addGroup=function(T){var e=new q.Deferred(),y=sap.ushell.Container.getService("CommonDataModel"),G,z,B=this;if(!this._isValidTitle(T)){return e.reject("No valid group title").promise();}z="Failed to add the group with title '"+T+"' to the homepage. ";y.getSite().done(function(E){G=u.generateUniqueId(r.getGroupIdsFromSite(E));m.addGroupToSite(E,m.createEmptyGroup(G,T));y.save().done(function(){delete B._ensureLoadedDeferred;e.resolve(E.groups[G],G);}).fail(function(F){e.reject(F);});}).fail(function(E){e.reject(z+E);});return e.promise();};this.setGroupTitle=function(G,N){var e=this,y=new q.Deferred(),z=sap.ushell.Container.getService("CommonDataModel"),B,E;if(typeof G!=="object"||!r.getGroupId(G)){return y.reject("Unexpected group value").promise();}if(!e._isValidTitle(N)){return y.reject("Unexpected oGroup title value").promise();}E="Failed to set new title for group with id '"+r.getGroupId(G)+"'. ";B=r.getGroupTitle(G);z.getSite().done(function(F){if(G){m.setGroupTitle(G,N);}z.save().done(function(){y.resolve();}).fail(function(H){L.error(H);y.reject(B);});}).fail(function(F){y.reject(B,E+F);});return y.promise();};this.hideGroups=function(H){var e=new q.Deferred(),y=sap.ushell.Container.getService("CommonDataModel"),G;if(H&&Array.isArray(H)){G="Failed to hide group. ";y.getSite().done(function(z){r.getGroupsArrayFromSite(z).forEach(function(B){var I=Array.prototype.indexOf.call(H,r.getGroupId(B))===-1;m.setGroupVisibility(B,I);});y.save().done(function(){e.resolve();}).fail(function(E){e.reject("Hiding of groups did not work as expected - "+E);});}).fail(function(E){e.reject(G+E);});}else{e.reject("Invalid input parameter aHiddenGroupIds. Please pass a valid input parameter.");}return e.promise();};this.moveGroup=function(G,e){var y=new q.Deferred(),z=sap.ushell.Container.getService("CommonDataModel"),B,E;if(!G||!r.getGroupId(G)||e<0){return y.reject("Unable to move groups - invalid parameters").promise();}E="Failed to move group with id '"+G.identification.id+"'. ";z.getSite().done(function(F){var H=r.getGroupIdsFromSite(F),I=r.getGroupId(G);if(!H){return y.reject("groupsOrder not found - abort operation of adding a group.");}else if(H.indexOf(I)===e){return y.resolve();}B=u.moveElementInsideOfArray(H,H.indexOf(I),e);if(!B){return y.reject("invalid move group operation - abort.");}m.setGroupsOrder(F,B);z.save().done(function(){y.resolve();}).fail(function(K){y.reject(K);});return undefined;}).fail(function(F){y.reject(E+F);});return y.promise();};this.removeGroup=function(G){var e=new q.Deferred(),y=sap.ushell.Container.getService("CommonDataModel"),z,B;if(typeof G!=="object"){return e.reject("invalid group parameter").promise();}B=r.getGroupId(G);if(!B){return e.reject("group without id given").promise();}z="Failed to remove group with id '"+B+"'. ";y.getSite().done(function(E){m.removeGroupFromSite(E,G);y.save().done(function(){e.resolve();}).fail(function(F){e.reject(F);});}).fail(function(E){e.reject(z+E);});return e.promise();};this.resetGroup=function(G){var e=new q.Deferred(),y=sap.ushell.Container.getService("CommonDataModel"),z=[],B=this,E,F;if(typeof G==="object"&&r.getGroupId(G)){F=r.getGroupId(G);E="Failed to reset group with id '"+F+"'. ";y.getSite().done(function(H){q.extend(true,z,r.getGroupsArrayFromSite(H));if(B.isGroupRemovable(G)===false){y.getGroupFromOriginalSite(F).done(function(I){if(typeof H==="object"&&r.getGroupFromSite(H,F)){m.overwriteGroup(H,I,F);}y.save().done(function(){e.resolve(I);}).fail(function(K){e.reject("Group could not be reset - "+K,z);});}).fail(function(I){e.reject("Group could not be reset - "+I,z);});}else{e.reject("Group could not be reset as it was created by the user",z);}}).fail(function(H){e.reject(E+H,[]);});}return e.promise();};this.getLinkTiles=function(G){return r.getGroupLinks(G);};this.isLinkPersonalizationSupported=function(){return true;};this._notifyTileAboutRefresh=function(T){if(typeof T.tileRefresh==="function"){T.tileRefresh();}};this.refreshTile=function(T){var e=this._mResolvedTiles[T.id];if(e){if(e.tileComponent){this._notifyTileAboutRefresh(e.tileComponent);}}};this._notifyTileAboutVisibility=function(T,N,e){if(typeof T.tileSetVisible==="function"&&e!==N){T.tileSetVisible(N);}};this.getTileView=function(G){var e=this;return new q.Deferred(function(y){return e._getTileView(G,false).then(function(T){y.resolve(T);},function(z){var E="Tile with ID '"+G.id+"' could not be initialized"+(z?":\n"+z:".");L.error(E,null,G.tileType);y.reject(E);});}).promise();};this._getCatalogTileView=function(e){if(typeof e!=="object"){throw new Error(e);}var y;if(typeof e.tileResolutionResult!=="object"){y=this._mResolvedTiles[e.id];}else{y=e;}return this._getTileUiComponentContainerSync(e,y,true);};this._getCatalogTileViewControl=function(e){var y=new q.Deferred();if(typeof e!=="object"){var E="Invalid input parameter passed to _getCatalogTileView: "+e;L.error(E);return y.reject(E).promise();}return this._getTileUiComponentContainer(e,e,true);};this._createLinkInstance=function(T,I,N,G,e){var y,z,B,E=this.getTileSubtitle(T);var F=G;if(I===true){y=this.getCatalogTileTitle(T);}else{y=this.getTileTitle(T);}z=new F({mode:g.LineMode,subheader:E,header:y,url:W.getLeanURL(this.getTileTarget(T)),press:function(H){this._genericTilePressHandler(T,H);}.bind(this)});if(N){B=e.i18n.getText(N+"NavigationMode");z.setAriaLabel(B+" "+y+" "+E);}this._mResolvedTiles[T.id].linkTileControl=z;return z;};this._genericTilePressHandler=function(T,e){var y;if(e.getSource().getScope&&e.getSource().getScope()==="Display"){y=this.getTileTarget(T);if(y){if(y[0]==="#"){hasher.setHash(y);}else{W.openURL(y,"_blank");}}}};this._addTileToSite=function(P,G,N,e){var y=this,z=new q.Deferred(),I=sap.ushell.Container.getService("URLParsing").parseShellHash(N.properties.targetURL),T={id:y.getTileId(N),target:{semanticObject:I.semanticObject,action:I.action,parameters:x(I.params)}};P.groups[G.identification.id].payload.tiles.push(T);e.save().done(function(){z.resolve(T);}).fail(function(B){z.reject(B);});return z.promise();};this.addTile=function(e,G){var y=new q.Deferred(),z,B=sap.ushell.Container.getService("CommonDataModel"),E;if(!G){G=this._oDefaultGroup;}if(e.contentProviderId){if(e.externalUrl){return this.addBookmark(this._getBookmarkDataForExtensionCatalogTile(e),G);}return y.reject("Extension Tile without URL").promise();}E=j();E.vizId=e.vizId;this._mResolvedTiles[E.id]={tileIntent:e.tileIntent,tileResolutionResult:e.tileResolutionResult,isLink:false};B.getSite().done(function(F){F.groups[G.identification.id].payload.tiles.push(E);B.save().done(function(){y.resolve(E);}).fail(function(H){y.reject(H);});}).fail(function(F){z="Failed to add tile with id '"+E.id+"' to group with id '"+G.identification.id+"'. ";y.reject(z+F);});return y.promise();};this._getBookmarkDataForExtensionCatalogTile=function(e){var B={title:e.tileResolutionResult.title,subtitle:e.tileResolutionResult.subTitle,icon:e.tileResolutionResult.icon,info:e.tileResolutionResult.info,url:e.externalUrl};if(e.tileResolutionResult.indicatorDataSource&&e.tileResolutionResult.indicatorDataSource.path){B.serviceUrl=e.tileResolutionResult.indicatorDataSource.path;B.serviceRefreshInterval=e.tileResolutionResult.indicatorDataSource.refresh;}return B;};this.removeTile=function(G,T,I){var y,z,B=new q.Deferred(),E=this;if(!G||typeof G!=="object"||!G.identification||!G.identification.id||!T||typeof T!=="object"||!T.id){return B.reject({},"Failed to remove tile. No valid input parameters passed to removeTile method.").promise();}z="Failed to remove tile with id '"+T.id+"' from group with id '"+G.identification.id+"'. ";y=sap.ushell.Container.getService("CommonDataModel");y.getSite().done(function(F){var P,H;I=+I;try{P=F.groups[G.identification.id].payload;}catch(e){B.reject(F.groups[G.identification.id],z);}H=E.getTileType(T)===E.TileType.Link?"links":"tiles";if(E.getTileType(T)===E.TileType.Link){I-=P.tiles.length;}if(I>=0){P[H].splice(I,1);}else{P[H]=P[H].filter(function(K){return K.id!==T.id;});}y.save().done(function(){B.resolve();}).fail(function(K){L.error(K);B.reject(F.groups[G.identification.id],K);});}).fail(function(e){B.reject({},z+e);});return B.promise();};this.moveTile=function(T,e,y,z,B,E){var F=new q.Deferred(),G=sap.ushell.Container.getService("CommonDataModel"),H=this,I;if(!T||i(T)||e===undefined||e<0||y===undefined||y<0||!z||!z.identification||!z.identification.id||!B||!B.identification||!B.identification.id){return F.reject("Invalid input parameters").promise();}I="Failed to move tile with id '"+T.id+"'. ";G.getSite().done(function(K){var N,P,Q=H.getTileType(T)===H.TileType.Link?"links":"tiles";if(!E){E=H._mResolvedTiles[T.id].isLink?"link":"tile";}N=E==="link"?"links":"tiles";if(Q!==N&&H._mResolvedTiles[T.id]){H._mResolvedTiles[T.id].isLink=E==="link";}if(N==="links"){y-=K.groups[B.identification.id].payload.tiles.length;}if(Q==="links"){e-=K.groups[z.identification.id].payload.tiles.length;}if(z.identification.id===B.identification.id){if(e!==y||Q!==N){P=K.groups[B.identification.id].payload;P[Q].splice(e,1);P[N].splice(y,0,T);}else{return F.resolve(T).promise();}}else{K.groups[z.identification.id].payload[Q].splice(e,1);K.groups[B.identification.id].payload[N].splice(y,0,T);}G.save().done(function(){F.resolve(T);}).fail(function(V){L.error(I+V);F.reject(I+V);});return undefined;}).fail(function(K){L.error(I+K);F.reject(I+K);});return F.promise();};this._compareCatalogs=function(e,B){return(e.identification.title||"").toLowerCase()>(B.identification.title||"").toLowerCase()?1:-1;};this.getCatalogs=function(){var e=this,y=new q.Deferred(),z=[],B=sap.ushell.Container.getService("CommonDataModel");function E(F,G,z,H,P,I){var K=F.catalogs[G];if(P&&I){K.contentProviderId=P;I.catalogsMap[G]=K;}z.push(K);H.notify(K);}window.setTimeout(function(){B.getSite().done(function(F){Object.keys(F.catalogs).forEach(function(G){E(F,G,z,y);});B.getExtensionSites().progress(function(G){var P=G.providerId;var H=G.site;var I=Promise.resolve(H);var K={sitePromise:I,site:H,catalogsMap:{}};Object.keys(H.catalogs).forEach(function(N){e._mContentProviders[P]=K;E(H,N,z,y,P,K);});}).done(function(G){G.filter(function(H){return!H.success;}).forEach(function(H){z.push({identification:{id:H.providerId},contentProviderId:H.providerId,error:"The following content providers could not provide catalogs: "+H.providerId+(H.error?" -> "+H.error:"")});});y.resolve(z.sort(e._compareCatalogs));});});},0);return y.promise();};this._isStartableInbound=function(I){var N=["Shell-plugin","Shell-bootConfig"],e;if(!I.semanticObject||!I.action){return false;}if(N.indexOf(I.semanticObject+"-"+I.action)>-1){return false;}if(!O.get("signature.parameters",I)){return true;}e=Object.keys(I.signature.parameters).every(function(p){return!I.signature.parameters[p].filter||(!!I.signature.parameters[p].launcherValue||p==="sap-external-url");});return e;};this._isHiddenInbound=function(I){return!!I.hideLauncher;};this._toHashFromInbound=function(I){var e=U.toHashFromInbound(I);if(!e){return undefined;}return"#"+e;};this._getExternalUrlFromInbound=function(I){return O.get("signature.parameters.sap-external-url.launcherValue.value",I)||null;};this._toHashFromOutbound=function(e){var y=U.toHashFromOutbound(e);if(!y){return undefined;}return"#"+y;};this.getCatalogTiles=function(e){var y=this,z=new q.Deferred();if(typeof e!=="object"||e===null){return z.reject("Invalid input parameter '"+e+"' passed to getCatalogTiles.").promise();}if(e.contentProviderId&&this._mContentProviders[e.contentProviderId]){this._mContentProviders[e.contentProviderId].sitePromise.then(function(B){f.call(y,e,B).done(z.resolve).fail(z.reject);},function(E){z.reject("Failed to get site: "+E);});}else{sap.ushell.Container.getService("CommonDataModel").getSite().done(function(B){f.call(y,e,B).done(z.resolve).fail(z.reject);}).fail(function(E){z.reject("Failed to get site: "+E);});}return z.promise();};function f(e,y){var z=this,B=new q.Deferred();setTimeout(function(){var E=((e.payload&&e.payload.viz)||[]).reduce(function(F,V){var G,H,I,K,N,P,Q,T,X,Y,Z,$,_,a1,b1,c1,d1;if(!V){return F;}H=a.get(y,V);if(!H){return F;}I=a.getTypeId(H);K=a.getType(y,I);G=a.getAppId(H);if(G){N=a.getAppDescriptor(y,G);if(!N){return F;}P=r.getInbound(N,a.getTarget(H).inboundId);if(!P){return F;}if(!z._isStartableInbound(P.inbound)||z._isHiddenInbound(P.inbound)){return F;}T=U.mapOne(P.key,P.inbound,N,H,K,y);if(!T||!T.tileResolutionResult){return F;}a1=T.resolutionResult.applicationType;b1=T.resolutionResult.additionalInformation;d1=C.last("/core/navigation/enableInPlaceForClassicUIs");c1=d1?d1[a1]:false;X=n.computeNavigationModeForHomepageTiles(a1,b1,c1);Y=a.getOutbound(H,P.inbound);Q=z._toHashFromOutbound(Y);}else{var e1=a.getConfig(H);if(e1===undefined){return F;}T=U.mapOne(undefined,undefined,undefined,H,K,y);if(u.getMember(e1,"sap|flp.target.type")==="URL"){_=u.getMember(e1,"sap|flp.target.url");}}Z=T.tileResolutionResult;Z.navigationMode=X;if(!z._isFormFactorSupported(Z)){return F;}if(e.contentProviderId){_=z._getMember(N,"sap|app.crossNavigation.inbounds.Shell-launchURL.signature.parameters.sap-external-url.launcherValue.value");}$={id:V,vizId:V,tileIntent:_||Q,tileResolutionResult:Z,isCatalogTile:true};if(e.contentProviderId&&_){$.contentProviderId=e.contentProviderId;$.externalUrl=_;}F.push($);return F;},[]);B.resolve(E);},0);return B.promise();}this.getCatalogError=function(e){if(e.error){return e.error;}return undefined;};this.getCatalogId=function(e){return R.getId(e);};this.getCatalogTitle=function(e){return R.getTitle(e);};this._isFailedCatalogTile=function(T){return!!(T&&this._mFailedResolvedCatalogTiles&&this._mFailedResolvedCatalogTiles[r.getTileId(T)]);};this.getCatalogTileTitle=function(G){if(this._isGroupTile(G)){if(this._isFailedGroupTile(G)){return"";}return this._mResolvedTiles[G.id].tileResolutionResult.title;}if(this._isCatalogTile(G)){if(this._isFailedCatalogTile(G)){return undefined;}return G.tileResolutionResult.title;}return undefined;};this.getCatalogTileSize=function(e){return e.tileResolutionResult.size||"1x1";};this.getCatalogTileView=function(e){return this._getCatalogTileView(e);};this.getCatalogTileViewControl=function(e){return this._getCatalogTileViewControl(e);};this.getCatalogTilePreviewSubtitle=function(G){if(this._isGroupTile(G)){return this.getTileSubtitle(G);}return(G.tileResolutionResult&&G.tileResolutionResult.subTitle)||"";};this.getCatalogTilePreviewIcon=function(G){if(this._isGroupTile(G)){return this.getTileIcon(G);}return(G.tileResolutionResult&&G.tileResolutionResult.icon)||"";};this.getCatalogTilePreviewInfo=function(G){if(this._isGroupTile(G)){return this.getTileInfo(G);}return(G.tileResolutionResult&&G.tileResolutionResult.info)||"";};this.getCatalogTilePreviewIndicatorDataSource=function(G){return G.tileResolutionResult&&G.tileResolutionResult.indicatorDataSource;};this.getCatalogTileKeywords=function(G){var K=[],e=G;if(!e){L.error("Could not find the Tile","sap.ushell.adapters.cdm.LaunchPageAdapter");return K;}if(this._mResolvedTiles&&this._mResolvedTiles[G.id]){e=this._mResolvedTiles[G.id];}if(e&&e.tileResolutionResult&&Array.isArray(e.tileResolutionResult.keywords)){Array.prototype.push.apply(K,e.tileResolutionResult.keywords);}if(e&&e.tileResolutionResult&&e.tileResolutionResult.title){K.push(e.tileResolutionResult.title);}if(e&&e.tileResolutionResult&&e.tileResolutionResult.subTitle){K.push(e.tileResolutionResult.subTitle);}return K;};this._visitBookmarks=function(e,V,y){var z=sap.ushell.Container;var B=z.getService("URLParsing");var E=z.getService("CommonDataModel");var F;var I=B.parseShellHash(e);if(I){F=w(I);}else{F=v(e);}return E.getSite().then(function(G){var H=G.groups;var T=Object.keys(H).filter(function(K){return!H[K].payload.locked;}).map(function(K){return H[K].payload.tiles.filter(function(N){return N.isBookmark&&N.vizType===y&&l(F,N.target);});}).reduce(function(K,N){Array.prototype.push.apply(K,N);return K;},[]);if(!V){return T.length;}return q.when(T.map(V)).then(function(){return T.length;});});};this.addBookmark=function(P,G){var e=this;return new q.Deferred(function(y){var z=sap.ushell.Container;var B=z.getService("URLParsing");var E=z.getService("CommonDataModel");q.when(G||e.getDefaultGroup(),E.getSite()).done(function(G,F){var T,H,I=B.parseShellHash(P.url),K,N=false;if(!I){H=v(P.url);N=true;}else{H=w(I);}T=h(P,H);if(N){K=new q.Deferred();K.resolve(e._getTileForUrl(T));}else{K=e._getTileFromHash(P.url);}K.done(function(Q){Q.isLink=false;e._mResolvedTiles[T.id]=Q;F.groups[G.identification.id].payload.tiles.push(T);E.save().done(function(){y.resolve(T);}).fail(function(V){y.reject(V);});}).fail(function(Q){y.reject("Bookmark creation failed because: "+Q);});}).fail(function(F){y.reject(F);});}).promise();};this.addCustomBookmark=function(B,T){var e=new q.Deferred();Promise.all([sap.ushell.Container.getServiceAsync("URLParsing"),sap.ushell.Container.getServiceAsync("CommonDataModel")]).then(function(y){var z=y[0];var E=y[1];q.when(T||this.getDefaultGroup(),E.getSite()).done(function(G,F){var H,I=z.parseShellHash(B.url),K=(I===undefined);H=K?v(B.url):w(I);var N={id:u.generateUniqueId([]),vizType:B.vizType,title:B.title,subTitle:B.subtitle,icon:B.icon,info:B.info,target:H,indicatorDataSource:{path:B.serviceUrl,refresh:B.serviceRefreshInterval},vizConfig:B.vizConfig,isBookmark:true};this._resolveTileByVizId(N,F).done(function(P){P.isLink=false;this._mResolvedTiles[N.id]=P;F.groups[G.identification.id].payload.tiles.push(N);E.save().done(function(){e.resolve(N);}).fail(e.reject);}.bind(this)).fail(function(P){e.reject("Bookmark creation failed because: "+P);});}.bind(this)).fail(e.reject);}.bind(this));return e.promise();};this.countBookmarks=function(e){return this._visitBookmarks(e);};this.countCustomBookmarks=function(I){if(!I.vizType){return Promise.reject("countCustomBookmarks: Required parameter is missing: oIdentifier.vizType");}return new Promise(function(e,y){this._visitBookmarks(I.url,undefined,I.vizType).done(e).fail(y);}.bind(this));};this.updateBookmarks=function(e,P,V){var y=sap.ushell.Container;var z=y.getService("URLParsing");var B=y.getService("CommonDataModel");var E=this._mResolvedTiles;function F(T){return new q.Deferred(function(G){var I,N;var H;var K=false;var Q={};if(P.url||P.url===""){I=z.parseShellHash(P.url);if(!I){N=v(P.url);}else{N=w(I);}}if(T.icon!==P.icon){Q.icon=P.icon;K=true;}if(T.title!==P.title){Q.title=P.title;K=true;}if(T.subTitle!==P.subtitle){Q.subtitle=P.subtitle;K=true;}if(P.url&&e!==P.url){Q.targetURL=P.url;K=true;}if(T.info!==P.info){Q.info=P.info;K=true;}k(T,P,N);if(K&&E[T.id]){H=E[T.id].tileComponent;if(H){H.tileSetVisualProperties(Q);}}G.resolve(T);}).promise();}return this._visitBookmarks(e,F,V).then(function(G){return B.save().then(function(){return G;});});};this.updateCustomBookmarks=function(I,B){if(!I.vizType){return Promise.reject("updateCustomBookmarks: Required parameter is missing: oIdentifier.vizType");}if(B.title===""){return Promise.reject("updateCustomBookmarks: The bookmark title cannot be an empty string");}if(B.url===""){return Promise.reject("updateCustomBookmarks: The bookmark url cannot be an empty string");}return new Promise(function(e,y){this.updateBookmarks(I.url,B,I.vizType).done(e).fail(y);}.bind(this));};this.deleteBookmarks=function(e,V){var y=sap.ushell.Container;var z=y.getService("URLParsing");var B=y.getService("CommonDataModel");var I=z.parseShellHash(e);var E;if(I){E=w(I);}else{E=v(e);}return B.getSite().then(function(F){var G=F.groups;var H=Object.keys(G).map(function(K){var P=G[K].payload;var N=0;P.tiles=P.tiles.filter(function(T){if(T.isBookmark&&T.vizType===V&&l(E,T.target)){++N;return false;}return true;});return N;}).reduce(function(K,N){K+=N;return K;},0);return B.save().then(function(){return H;});});};this.deleteCustomBookmarks=function(I){if(!I.vizType){return Promise.reject("deleteCustomBookmarks: Required parameter is missing: oIdentifier.vizType");}return new Promise(function(e,y){this.deleteBookmarks(I.url,I.vizType).done(e).fail(y);}.bind(this));};this.onCatalogTileAdded=function(T){};this._onTileSettingsSave=function(T,e){var y=new q.Deferred(),z,N,B,E,F,G,H;if(!T||!T.id||!e){return y.reject().promise();}N=e.oTitleInput.getValue();E=e.oSubTitleInput.getValue();B=e.oInfoInput.getValue();F=this.getTileTitle(T);G=this.getTileInfo(T);H=this.getTileSubtitle(T);if(F===N&&H===E&&G===B){return y.resolve().promise();}z={};if(F!==N){z.title=N;T.title=N;}if(H!==E){z.subtitle=E;T.subTitle=E;}if(G!==B){z.info=B;T.info=B;}if(this._mResolvedTiles[T.id].tileComponent){this._mResolvedTiles[T.id].tileComponent.tileSetVisualProperties(z);}else if(this._mResolvedTiles[T.id].linkTileControl){if(z.title){this._mResolvedTiles[T.id].linkTileControl.setHeader(z.title);}if(z.subtitle){this._mResolvedTiles[T.id].linkTileControl.setSubheader(z.subtitle);}if((z.title)||(z.subtitle)){this._mResolvedTiles[T.id].linkTileControl.rerender();}}sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(I){I.save().fail(function(K){L.error(K);y.reject("Could not save personalization changes: "+K);}).done(function(){y.resolve();});});return y.promise();};this.getTileActions=function(T){var e=[],y,z;if(this._isGroupTile(T)&&!this._isFailedGroupTile(T)){z=new J({config:{display_title_text:this.getTileTitle(T),display_subtitle_text:this.getTileSubtitle(T),display_info_text:this.getTileInfo(T)}});y=o.getTileSettingsAction(z,this._onTileSettingsSave.bind(this,T),this.getTileType(T));e.push(y);}return e;};function h(P,T){var e=j(P,T);e.isBookmark=true;return e;}function j(P,T){var e={id:u.generateUniqueId([])};k(e,P,T);return e;}function k(T,P,e){P=q.extend(true,{},P);if(e){T.target=e;}if(P.title||P.title===""){T.title=P.title;}if(P.icon||P.icon===""){T.icon=P.icon;}if(P.subtitle||P.subtitle===""){T.subTitle=P.subtitle;}if(P.info||P.info===""){T.info=P.info;}if(P.dataSource){T.dataSource={};q.extend(true,T.dataSource,P.dataSource);delete P.serviceUrl;}else if(P.dataSource===null){delete T.dataSource;delete T.indicatorDataSource;delete P.serviceUrl;}if((P.dataSource||T.dataSource)&&P.serviceUrlPath){T.indicatorDataSource={path:P.serviceUrlPath};}if(P.serviceUrl||P.serviceUrl===""){if(T.dataSource){L.warning("`serviceUrl` is marked for deprecation in the future."+"It is not the preferred means for defining a dynamic "+"tile's data source. Please use `oParameter.dataSource`");delete T.dataSource;}T.indicatorDataSource={path:P.serviceUrl};}else if(P.serviceUrl===null&&!T.dataSource){delete T.indicatorDataSource;}if(P.serviceRefreshInterval||P.serviceRefreshInterval===0){T.indicatorDataSource.refresh=P.serviceRefreshInterval;}if(P.vizConfig){T.vizConfig=P.vizConfig;}}function l(T,e){if(T&&e){if(T.url){return T.url===e.url;}return T.semanticObject===e.semanticObject&&T.action===e.action&&s(T.parameters,e.parameters)&&T.appSpecificRoute===e.appSpecificRoute;}return T===e;}function s(P,e){var F,y;P=P||[];e=e||[];if(P.length===e.length){F=t(P);y=t(e);return F===y;}return false;}function t(e){return e.map(function(P){return P.name+P.value;}).sort().join();}function v(e){return{url:e};}function w(I){var T={semanticObject:I.semanticObject,action:I.action,parameters:x(I.params)};if(I.appSpecificRoute){T.appSpecificRoute=I.appSpecificRoute;}return T;}function x(I){return Object.keys(I).map(function(K){var V=I[K]&&I[K][0];return{name:K,value:V||""};});}this._getSiteData=function(){return sap.ushell.Container.getService("CommonDataModel").getSite();};this._addDefaultGroup=function(G,e){var y=r.getDefaultGroup(G);if(!y){y=m.createDefaultGroup(u.generateUniqueId(r.getGroupIdsFromSite(e)));e=m.addGroupToSite(e,y,0);G=r.getGroupsArrayFromSite(e);}this._oDefaultGroup=y;return G;};}b.prototype=A.prototype;return b;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/v3/_LaunchPage/readApplications',["sap/base/util/ObjectPath"],function(O){"use strict";var r={};r.getId=function(a){return O.get(["sap.app","id"],a);};r.getTitle=function(a){return O.get(["sap.app","title"],a);};r.getSubTitle=function(a){return O.get(["sap.app","subTitle"],a);};r.getIcon=function(a){return O.get(["sap.ui","icons","icon"],a);};r.getInfo=function(a){return O.get(["sap.app","info"],a);};r.getKeywords=function(a){return O.get(["sap.app","tags","keywords"],a);};r.getContentProviderId=function(a){return O.get(["sap.app","contentProviderId"],a);};r.getInbounds=function(a){return O.get(["sap.app","crossNavigation","inbounds"],a);};r.getInbound=function(a,i){return O.get(["sap.app","crossNavigation","inbounds",i],a);};r.getInboundTarget=function(a,A,i){var o=O.get([A],a)||{};var I=this.getInbound(o,i);if(!o||!I){return;}return{semanticObject:I.semanticObject,action:I.action};};return r;});
sap.ui.predefine('sap/ushell/adapters/cdm/v3/_LaunchPage/readCatalogs',[],function(){"use strict";function g(c){return c.identification.id;}function a(c){return c.identification.title;}return{getId:g,getTitle:a};},true);
sap.ui.predefine('sap/ushell/adapters/cdm/v3/_LaunchPage/readHome',["sap/ushell/utils/type","sap/ushell/adapters/cdm/v3/_LaunchPage/readApplications"],function(t,r){"use strict";var a={};a.getGroupsArrayFromSite=function(s){var l=[];s.site.payload.groupsOrder.forEach(function(g,i){var G=s.groups[g];if(G){G.payload=G.payload||{};l.push(G);}});return l;};a.getGroupsMapFromSite=function(s){return s.groups;};a.getGroupIdsFromSite=function(s){return s.site.payload.groupsOrder;};a.getGroupFromSite=function(s,g){return s.groups[g];};a.getDefaultGroup=function(g){var d=g.filter(function(G){return G.payload.hasOwnProperty("isDefaultGroup");});if(d.length>0){return d[0];}};a.getGroupId=function(g){return g.identification&&g.identification.id;};a.getGroupTitle=function(g){return g.identification.title;};a.isGroupPreset=function(g){if(!g.payload.hasOwnProperty("isPreset")){return true;}return!!g.payload.isPreset;};a.isGroupLocked=function(g){return!!g.payload.locked;};a.isGroupVisible=function(g){return!!(g.identification.isVisible===undefined||g.identification.isVisible===true);};a.getGroupTiles=function(g){if(g.payload.tiles&&t.isArray(g.payload.tiles)&&g.payload.tiles.length>0){return g.payload.tiles;}return[];};a.getGroupLinks=function(g){if(g.payload.links&&t.isArray(g.payload.links)&&g.payload.links.length>0){return g.payload.links;}return[];};a.getTileId=function(T){return T.id;};a.getTileVizId=function(T){return T.vizId;};a.getTileTitle=function(R,T){var o;if(T&&T.isBookmark){return T.title;}o=R[T.id];if(o){return T.title||o.tileResolutionResult.title;}};a.getTileSubtitle=function(R,T){var o;if(T.isBookmark){return T.subTitle;}o=R[T.id];if(o){return T.subTitle||o.tileResolutionResult.subTitle;}};a.getTileInfo=function(R,T){var o;if(T.isBookmark){return T.info;}o=R[T.id];if(o){return T.info||o.tileResolutionResult.info;}};a.getTileIcon=function(R,T){var o;if(T.isBookmark){return T.icon;}o=R[T.id];if(o){return T.icon||o.tileResolutionResult.icon;}};a.getTileIndicatorDataSource=function(R,T){var o;if(T.isBookmark){return T.icon;}o=R[T.id];if(o){return T.icon||o.tileResolutionResult.icon;}};a.getTileSize=function(R,T){var o=R[T.id];if(o&&o.tileResolutionResult&&o.tileResolutionResult.size){return o.tileResolutionResult.size;}};a.isLink=function(R,T){var o=R[T.id];if(o){return!!o.isLink;}return false;};a.isCard=function(R,i){var o=R[i.id];if(o){return!!o.tileResolutionResult.isCard;}return false;};a.isGroupTile=function(T){return!!(T&&T.id&&!T.isCatalogTile);};a.supportsFormFactor=function(A,f){return A.deviceTypes&&A.deviceTypes[f];};a.getInbound=function(A,i){var I=r.getInbound(A,i);return I&&{key:i,inbound:I};};return a;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/v3/_LaunchPage/readUtils',["sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations","sap/ushell/adapters/cdm/v3/_LaunchPage/readApplications","sap/ushell/adapters/cdm/v3/_LaunchPage/readHome","sap/ushell/adapters/cdm/v3/utilsCdm","sap/ushell/Config","sap/base/util/deepClone","sap/base/util/isPlainObject","sap/base/util/ObjectPath","sap/base/util/deepExtend","sap/base/util/isEmptyObject"],function(r,a,b,u,C,d,i,O,c,e){"use strict";var f={};f.getVizData=function(s,v,U){if(v.isBookmark&&v.url){v=d(v);v.subTitle=v.subtitle;v.target=u.toTargetFromHash(v.url,U);}var g=this.getCdmParts(s,v);var V=g&&g[1]||{};var A=g&&g[3]||{};var o=r.get(s,b.getTileVizId(v))||{};var h={id:b.getTileId(v),vizId:b.getTileVizId(v)||"",vizType:v.vizType||r.getTypeId(o)||"",vizConfig:c({},V,v.vizConfig),title:r.getTitle(g)||"",subtitle:r.getSubTitle(g)||"",icon:r.getIcon(g)||"",keywords:r.getKeywords(g)||[],info:r.getInfo(g)||"",target:v.target||r.getTarget(o)||{},indicatorDataSource:v.indicatorDataSource||r.getIndicatorDataSource(o),isBookmark:v.isBookmark||false,contentProviderId:a.getContentProviderId(A)||"",displayFormatHint:v.displayFormatHint,numberUnit:r.getNumberUnit(g),_instantiationData:r.getInstantiationData(o)};h.target=this.harmonizeTarget(h.target);h.targetURL=u.toHashFromVizData(h,s.applications,U);if(h.indicatorDataSource&&h.indicatorDataSource.dataSource){h.dataSource=r.getDataSource(g,h.indicatorDataSource.dataSource);}if(v.isBookmark){this._addBookmarkInstantiationData(h,s);}if(!h._instantiationData||!Object.keys(h._instantiationData)){h._instantiationData={platform:"CDM",vizType:r.getType(s,h.vizType)};}return h;};f.getVizRef=function(v){var V={id:v.id,vizId:v.vizId,title:v.title,subTitle:v.subtitle,icon:v.icon,keywords:v.keywords,info:v.info,target:v.target,indicatorDataSource:v.indicatorDataSource,contentProviderId:v.contentProviderId,displayFormatHint:v.displayFormatHint,numberUnit:v.numberUnit};if(v.isBookmark){V.isBookmark=v.isBookmark;if(v.vizConfig!==undefined&&!e(v.vizConfig)){V.vizType=v.vizType;V.vizConfig=v.vizConfig;}}return V;};f.getCdmParts=function(s,t){var v=r.get(s,b.getTileVizId(t))||{};var V=r.getConfig(v);var A=r.getAppDescriptor(s,r.getAppId(v));var I=a.getInbound(A,r.getInboundId(v));return[t,V,I,A];};f.harmonizeTarget=function(t){var p=t.parameters;if(!p||i(p)){return t;}var P={};p.forEach(function(o){if(P[o.name]){if(!Array.isArray(P[o.name].value.value)){P[o.name].value.value=[P[o.name].value.value];}P[o.name].value.value.push(o.value);}else{P[o.name]={value:{value:o.value,format:"plain"}};}});t.parameters=P;return t;};f._addBookmarkInstantiationData=function(v,s){if(v.vizType){var V=r.getType(s,v.vizType);if(V!==undefined){v._instantiationData={platform:"CDM",vizType:V};}else{var o=O.get(["vizConfig","sap.flp","chipConfig"],v);v._instantiationData={platform:"ABAP",chip:d(o),simplifiedChipFormat:true};}}else if(v.indicatorDataSource&&v.indicatorDataSource.path){v.vizType="sap.ushell.DynamicAppLauncher";}else{v.vizType="sap.ushell.StaticAppLauncher";}};return f;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations',["sap/ushell/utils","sap/base/util/ObjectPath"],function(u,O){"use strict";var r={};r.getMap=function(s){return s.visualizations;};r.get=function(s,i){return O.get(["visualizations",i],s);};r.getTypeMap=function(s){return s.vizTypes;};r.getType=function(s,i){return O.get(["vizTypes",i],s);};r.getTypeId=function(v){return O.get("vizType",v||{});};r.isStandardVizType=function(v){return v==="sap.ushell.StaticAppLauncher"||v==="sap.ushell.DynamicAppLauncher";};r.getConfig=function(v){return O.get("vizConfig",v||{});};r.getTarget=function(v){var V=this.getConfig(v);return O.get(["sap.flp","target"],V||{});};r.getAppId=function(v){var t=this.getTarget(v);return O.get("appId",t||{});};r.getInboundId=function(v){var t=this.getTarget(v);return O.get("inboundId",t||{});};r.getOutbound=function(v,i){var o={semanticObject:i.semanticObject,action:i.action,parameters:this.getTarget(v).parameters||{}};o.parameters["sap-ui-app-id-hint"]={value:{format:"plain",value:this.getAppId(v)}};return o;};r.startsExternalUrl=function(v){var t=this.getTarget(v);return t&&t.type==="URL";};r.getAppDescriptor=function(s,i){return O.get(["applications",i],s);};r.getKeywords=function(c){var C=u.clone(c);C.splice(2,1);C.splice(0,1);return u.getNestedObjectProperty(C,["sap|app.tags.keywords","sap|app.tags.keywords"]);};r.getTitle=function(c){return u.getNestedObjectProperty(c,["title","sap|app.title","title","sap|app.title"]);};r.getSubTitle=function(c){return u.getNestedObjectProperty(c,["subTitle","sap|app.subTitle","subTitle","sap|app.subTitle"]);};r.getIcon=function(c){return u.getNestedObjectProperty(c,["icon","sap|ui.icons.icon","icon","sap|ui.icons.icon"]);};r.getNumberUnit=function(c){var C=u.clone(c);C.splice(2,2);return u.getNestedObjectProperty(C,["numberUnit","sap|flp.numberUnit"]);};r.getInfo=function(c){return u.getNestedObjectProperty(c,["info","sap|app.info","info","sap|app.info"]);};r.getShortTitle=function(c){var C=u.clone(c);C.splice(0,1);return u.getNestedObjectProperty(C,["sap|app.shortTitle","shortTitle","sap|app.shortTitle"]);};r.getInstantiationData=function(v){return O.get(["vizConfig","sap.flp","_instantiationData"],v);};r.getIndicatorDataSource=function(v){return O.get(["vizConfig","sap.flp","indicatorDataSource"],v);};r.getDataSource=function(c,d){var C=u.clone(c);C.splice(2,1);C.splice(0,1);var D=u.getNestedObjectProperty(C,["sap|app.dataSources","sap|app.dataSources"])||{};return D[d];};return r;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/v3/utilsCdm',["sap/ushell/utils","sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations","sap/ui/thirdparty/jquery","sap/base/util/isEmptyObject","sap/base/util/ObjectPath","sap/base/util/merge","sap/base/util/deepEqual","sap/ushell/adapters/cdm/v3/_LaunchPage/readApplications","sap/base/Log"],function(u,r,q,i,O,m,d,a,L){"use strict";var b={};b.getMember=function(o,A){return u.getMember(o,A);};b.getNestedObjectProperty=function(o,A,D){return u.getNestedObjectProperty(o,A,D);};b.mapOne=function(k,s,A,v,V,S){var I=false;s=u.clone(s);A=u.clone(A);v=u.clone(v);V=u.clone(V);v=v||{};V=V||{};var o={};o.semanticObject=this.getMember(s,"semanticObject");o.action=this.getMember(s,"action");var c=r.getConfig(v);o.title=r.getTitle([undefined,c,s,A]);o.info=r.getInfo([undefined,c,s,A]);o.icon=r.getIcon([undefined,c,s,A]);o.subTitle=r.getSubTitle([undefined,c,s,A]);o.shortTitle=r.getShortTitle([undefined,c,s,A]);o.keywords=r.getKeywords([undefined,c,s,A]);o.numberUnit=r.getNumberUnit([undefined,c,undefined,undefined]);o.deviceTypes=this.getMember(A,"sap|ui.deviceTypes")||{};["desktop","tablet","phone"].forEach(function(M){if(Object.prototype.hasOwnProperty.call(this.getMember(s,"deviceTypes")||{},M)){o.deviceTypes[M]=s.deviceTypes[M];}if(!Object.prototype.hasOwnProperty.call(o.deviceTypes,M)){o.deviceTypes[M]=true;}o.deviceTypes[M]=!!o.deviceTypes[M];}.bind(this));o.signature=this.getMember(s,"signature")||{};o.signature.parameters=this.getMember(o,"signature.parameters")||{};o.signature.additionalParameters=this.getMember(s,"signature.additionalParameters")||"allowed";var e=this.getMember(A,"sap|platform|runtime");o.resolutionResult=q.extend(true,{},e);if(e){o.resolutionResult["sap.platform.runtime"]=q.extend(true,{},e);}if(this.getMember(A,"sap|ui.technology")==="GUI"){o.resolutionResult["sap.gui"]=this.getMember(A,"sap|gui");}if(this.getMember(A,"sap|ui.technology")==="WDA"){o.resolutionResult["sap.wda"]=this.getMember(A,"sap|wda");}if(this.getMember(A,"sap|ui.technology")==="URL"){if(A["sap.url"]){o.resolutionResult["sap.platform.runtime"]=o.resolutionResult["sap.platform.runtime"]||{};o.resolutionResult.url=A["sap.url"].uri;o.resolutionResult["sap.platform.runtime"].url=A["sap.url"].uri;}else if(e&&e.uri){o.resolutionResult["sap.platform.runtime"].url=e.uri;o.resolutionResult.url=e.uri;}}if(!o.resolutionResult["sap.ui"]){o.resolutionResult["sap.ui"]={};}o.resolutionResult["sap.ui"].technology=this.getMember(A,"sap|ui.technology");o.resolutionResult.applicationType=this._formatApplicationType(o.resolutionResult,A);o.resolutionResult.systemAlias=o.resolutionResult.systemAlias||this.getMember(s,"systemAlias");o.resolutionResult.systemAliasSemantics="apply";o.resolutionResult.text=o.title;o.resolutionResult.appId=this.getMember(A,"sap|app.id");var t,f;var g=this.getMember(v,"vizConfig.sap|flp.indicatorDataSource");var T={};if(!i(V)){var h=this.getMember(V,"sap|app.type");if(h==="card"){I=true;T=m({},V,v.vizConfig);}else{T.componentName=this.getMember(V,"sap|ui5.componentName");var C=this.getMember(V,"sap|platform|runtime.componentProperties");if(C){T.componentProperties=C;}if(this.getMember(V,"sap|platform|runtime.includeManifest")){T.componentProperties=T.componentProperties||{};T.componentProperties.manifest=m({},V,v.vizConfig);delete T.componentProperties.manifest["sap.platform.runtime"];}}}if(this.getMember(A,"sap|app.type")==="plugin"||this.getMember(A,"sap|flp.type")==="plugin"){return undefined;}var j=this.getNestedObjectProperty([c,A,V],"sap|flp.tileSize");var l=this.getNestedObjectProperty([c,A,V],"sap|app.description");if(this.getMember(A,"sap|ui.technology")==="GUI"&&this.getMember(A,"sap|gui.transaction")){t=this.getMember(A,"sap|gui.transaction");}if(this.getMember(A,"sap|ui.technology")==="WDA"&&this.getMember(A,"sap|wda.applicationId")){t=this.getMember(A,"sap|wda.applicationId");}var D=this.getNestedObjectProperty([c,A,V],"sap|app.dataSources");if(this.getMember(A,"sap|app.id")){f=this.getMember(A,"sap|app.id");}var n=a.getContentProviderId(A)||"";o.tileResolutionResult={appId:f,title:o.title,subTitle:o.subTitle,icon:o.icon,size:j,info:o.info,keywords:o.keywords,tileComponentLoadInfo:T,indicatorDataSource:g,dataSources:D,description:l,runtimeInformation:e,technicalInformation:t,deviceTypes:o.deviceTypes,isCard:I,contentProviderId:n,numberUnit:o.numberUnit};var p=this.getMember(A,"sap|integration.urlTemplateId");var w=this.getTemplatePayloadFromSite(p,S);if(w){o.templateContext={payload:w,site:S,siteAppSection:A};}return o;};b.getTemplatePayloadFromSite=function(t,s){if(!s||typeof t!=="string"){return null;}var T=t.replace(/[.]/g,"|");return this.getMember(s.urlTemplates,T+".payload");};b._formatApplicationType=function(R,A){var s=R.applicationType;if(s){return s;}var c=this.getMember(A,"sap|platform|runtime.componentProperties.self.name")||this.getMember(A,"sap|ui5.componentName");if(this.getMember(A,"sap|flp.appType")==="UI5"||this.getMember(A,"sap|ui.technology")==="UI5"){R.applicationType="SAPUI5";R.additionalInformation="SAPUI5.Component="+c;R.url=this.getMember(A,"sap|platform|runtime.componentProperties.url");R.applicationDependencies=this.getMember(A,"sap|platform|runtime.componentProperties");return"SAPUI5";}if(this.getMember(A,"sap|ui.technology")==="GUI"){R.applicationType="TR";R["sap.gui"]=this.getMember(A,"sap|gui");R.systemAlias=this.getMember(A,"sap|app.destination.name");return"TR";}if(this.getMember(A,"sap|ui.technology")==="WDA"){R.applicationType="WDA";R["sap.wda"]=this.getMember(A,"sap|wda");R.systemAlias=this.getMember(A,"sap|app.destination.name");return"WDA";}if(this.getMember(A,"sap|ui.technology")==="URL"){R.applicationType="URL";R.systemAlias=this.getMember(A,"sap|app.destination.name");}return"URL";};b.formatSite=function(s){var t=this;if(!s){return[];}var I=[];try{var S=Object.keys(s.applications||{}).sort();S.forEach(function(A){try{var o=s.applications[A];var c=this.getMember(o,"sap|app.crossNavigation.inbounds");if(c){var l=Object.keys(c).sort();l.forEach(function(f){var g=c[f];var R=t.mapOne(f,g,o,undefined,undefined,s);if(R){R.contentProviderId=a.getContentProviderId(o)||"";I.push(R);}});}}catch(E){L.error("Error in application "+A+": "+E,E.stack);}}.bind(this));}catch(e){L.error(e);L.error(e.stack);return[];}return I;};b.toHashFromInbound=function(I){var s,p,c;s={target:{semanticObject:I.semanticObject,action:I.action},params:{}};p=O.get("signature.parameters",I)||{};Object.keys(p).forEach(function(k){if(p[k].filter&&Object.prototype.hasOwnProperty.call(p[k].filter,"value")&&(p[k].filter.format===undefined||p[k].filter.format==="plain")){s.params[k]=[p[k].filter.value];}if(p[k].launcherValue&&Object.prototype.hasOwnProperty.call(p[k].launcherValue,"value")&&(p[k].launcherValue.format===undefined||p[k].launcherValue.format==="plain")){s.params[k]=[p[k].launcherValue.value];}});c=sap.ushell.Container.getService("URLParsing").constructShellHash(s);if(!c){return undefined;}return c;};b.toHashFromOutbound=function(o){var s,p,c;s={target:{semanticObject:o.semanticObject,action:o.action},params:{}};p=o.parameters||{};Object.keys(p).forEach(function(k){if(p.hasOwnProperty(k)&&typeof p[k].value==="object"){s.params[k]=[p[k].value.value];}});c=sap.ushell.Container.getService("URLParsing").constructShellHash(s);if(!c){return undefined;}return c;};b.toHashFromVizData=function(v,A,U){var V,t;if(!v.target){return undefined;}V=v.target;if(V.type==="URL"){return V.url;}var s=V.appId;var I=V.inboundId;if(s&&I){var o=a.getInboundTarget(A,s,I);t={};if(o){t.semanticObject=o.semanticObject;t.action=o.action;t.parameters=V.parameters||{};t.parameters["sap-ui-app-id-hint"]={value:{value:s,format:"plain"}};t.appSpecificRoute=V.appSpecificRoute||"";}}else if(V.semanticObject&&V.action){t=V;}return b.toHashFromTarget(t,U);};b.toHashFromTarget=function(t,U){try{var p={};var R=O.get("parameters",t)||{};Object.keys(R).forEach(function(k){p[k]=Array.isArray(R[k].value.value)?R[k].value.value:[R[k].value.value];});var h={target:{semanticObject:t.semanticObject,action:t.action},params:p,appSpecificRoute:t.appSpecificRoute};return"#"+U.constructShellHash(h);}catch(e){return undefined;}};b.toTargetFromHash=function(h,U){var t=U.parseShellHash(h);if(t!==undefined){var p=t.params||{};if(Object.keys(p).length>0){t.parameters=[];Object.keys(p).forEach(function(k){var v=Array.isArray(p[k])?p[k]:[p[k]];v.forEach(function(V){var P={name:k,value:V};t.parameters.push(P);});});}delete t.params;}else{t={type:"URL",url:h};}return t;};b.isSameTarget=function(t,T){var R;if(t.type!==T.type){return false;}if(t.type==="URL"){R=t.url===T.url;}else{R=t.semanticObject===T.semanticObject&&t.action===T.action&&t.appSpecificRoute===T.appSpecificRoute&&d(t.parameters,T.parameters);}return R;};return b;},true);
sap.ui.predefine('sap/ushell/adapters/local/NavTargetResolutionAdapter',["sap/ushell/services/_ClientSideTargetResolution/VirtualInbounds","sap/base/util/ObjectPath","sap/ui/thirdparty/jquery","sap/base/Log","sap/ushell/utils"],function(v,O,q,L,u){"use strict";var N=function(U,p,a){var A=O.create("config.applications",a);var V=v.getInbounds();b(V,A);function b(V,A){V.forEach(function(i){var I=i.semanticObject+"-"+i.action;A[I]=i.resolutionResult;});}this.resolveHashFragment=function(h){var d=new q.Deferred(),i,r,R,P;if(h&&h.charAt(0)!=="#"){throw new u.Error("Hash fragment expected","sap.ushell.renderers.minimal.Shell");}h=h.substring(1);if(!h&&!A[h]){d.resolve(undefined);}else{L.info("Hash Fragment: "+h);i=h.indexOf("?");if(i>=0){P=h.slice(i+1);h=h.slice(0,i);}r=A[h];if(r){R={additionalInformation:r.additionalInformation,applicationType:r.applicationType,url:r.url,text:r.text,fullWidth:r.fullWidth};if(P){R.url+=(R.url.indexOf("?")<0)?"?":"&";R.url+=P;}if(r.navigationMode!==undefined){R.navigationMode=r.navigationMode;}d.resolve(R);}else{d.reject("Could not resolve link '"+h+"'");}}return d.promise();};this.getSemanticObjectLinks=function(s,P){var I,r=[],i=0,d=new q.Deferred(),c;if(!s){setTimeout(function(){d.resolve([]);},0);}else{c=sap.ushell.Container.getService("URLParsing").paramsToString(P);L.info("getSemanticObjectLinks: "+s);for(I in A){if(A.hasOwnProperty(I)&&I.substring(0,I.indexOf("-"))===s){r[i]=A[I];r[i].id=I;r[i].text=r[i].text||r[i].description||"no text";r[i].intent="#"+I;if(c!==""){if(r[i].intent.indexOf("?")!==-1){r[i].intent+="&"+c;}else{r[i].intent+="?"+c;}}i+=1;}}if(r){setTimeout(function(){d.resolve(r);},0);}else{setTimeout(function(){d.reject("Could not get links for  '"+s+"'");},0);}}return d.promise();};this.isIntentSupported=function(I){var d=new q.Deferred(),s={},D=[],t=this;function c(i,S){s[i]={supported:S};}I.forEach(function(e,i){var o=new q.Deferred();D.push(o.promise());t.resolveHashFragment(e).fail(function(E){c(e,false);o.resolve();}).done(function(f){c(e,true);o.resolve();});});if(I.length>0){q.when.apply(q,D).always(function(){d.resolve(s);});}else{d.resolve(s);}return d.promise();};};return N;},true);
sap.ui.predefine('sap/ushell/adapters/local/UserDefaultParameterPersistenceAdapter',["sap/ui/thirdparty/jquery","sap/base/Log"],function(q,L){"use strict";var U=function(s,p,c){this._oConfig=c&&c.config;this._oContainerPromises={};};U.prototype._getPersonalizationService=function(){return sap.ushell.Container.getService("Personalization");};U.prototype.saveParameterValue=function(p,v,s){var d=new q.Deferred();if(!(typeof p==="string"&&p.length<=40&&/^[A-Za-z0-9.-_]+$/.exec(p))){L.error("Illegal Parameter Key, less than 40 characters and [A-Za-z0-9.-_]+ :\""+p+"\"");}this._getUDContainer(s).done(function(c){c.setItemValue(p,v);c.saveDeferred(50).done(d.resolve.bind(d)).fail(d.reject.bind(d));}).fail(function(m){L.error(m);d.reject(m);});return d.promise();};U.prototype.deleteParameter=function(p,s){var d=new q.Deferred();if(!(typeof p==="string"&&p.length<=40&&/^[A-Za-z0-9.-_]+$/.exec(p))){L.error("Illegal Parameter Key, less than 40 characters and [A-Za-z0-9.-_]+ :\""+p+"\"");}this._getUDContainer(s).done(function(c){c.delItem(p);c.save().done(d.resolve.bind(d)).fail(d.reject.bind(d));}).fail(function(m){L.error(m);d.reject(m);});return d.promise();};U.prototype.loadParameterValue=function(p,s){var d=new q.Deferred();this._getUDContainer(s).done(function(c){var v=c.getItemValue(p);if(v){d.resolve(v);}else{d.reject("no value ");}}).fail(function(m){L.error(m);d.reject(m);});return d.promise();};U.prototype.getStoredParameterNames=function(s){var d=new q.Deferred();this._getUDContainer(s).done(function(c){var v=c.getItemKeys();d.resolve(v);}).fail(function(m){L.error(m);d.reject(m);});return d.promise();};U.prototype._getUDContainer=function(s){var S=s.id;if(S!==""){S="."+S;}var p=this._getPersonalizationService();if(!this._oContainerPromises[s.id]){this._oContainerPromises[s.id]=p.getContainer("sap.ushell.UserDefaultParameter"+S,{keyCategory:p.constants.keyCategory.FIXED_KEY,writeFrequency:p.constants.writeFrequency.LOW,clientStorageAllowed:true});}return this._oContainerPromises[s.id];};return U;},true);
sap.ui.predefine('sap/ushell/adapters/local/UserInfoAdapter',["sap/ui/thirdparty/jquery","sap/ushell/services/Container","sap/ushell/services/Personalization","sap/base/util/ObjectPath"],function(q,C,P,O){"use strict";var U=function(u,p,a){var o;function g(A){var d=[{id:"sap_belize",name:"SAP Belize"}],e=O.get("config.themes",A);return e===undefined?d:e;}this.updateUserPreferences=function(b){var d=new q.Deferred();function l(e){var E="Failed to update user preferences: "+(e&&e.message?e.message:e);q.sap.log.error(E,e&&e.stack,"com.sap.ushell.adapters.local.UserInfo");}sap.ushell.Container.getServiceAsync("Personalization").then(function(c){var s={keyCategory:c.constants.keyCategory.FIXED_KEY,writeFrequency:c.constants.writeFrequency.LOW,clientStorageAllowed:true};function e(f,b){var h=b.getChangedProperties()||[];h.forEach(function(i){f.setItemValue(i.propertyName,i.newValue);});}c.getContainer("sap.ushell.UserProfile",s,undefined).done(function(f){e(f,b);f.save().fail(function(E){l(E);d.reject(E);}).done(function(){d.resolve();});}).fail(function(E){l(E);d.reject(E);});});return d.promise();};this.getThemeList=function(){var d=new q.Deferred();if(o===undefined){o=g(a);}if(o.length===0){d.reject("no themes were configured");}else{d.resolve({options:o});}return d.promise();};this.getLanguageList=function(){var d=new q.Deferred();d.resolve([{"text":"Browser Language","key":"default"},{"text":"American English","key":"en-US"},{"text":"British English","key":"en-GB"},{"text":"English","key":"en"},{"text":"German","key":"de"},{"text":"Hebrew","key":"he"},{"text":"Russian","key":"ru"}]);return d.promise();};};return U;},true);
sap.ui.predefine('sap/ushell/bootstrap/SchedulingAgent',["sap/ushell/bootstrap/_SchedulingAgent/FLPScheduler","sap/ushell/bootstrap/_SchedulingAgent/EventProcessor","sap/ushell/bootstrap/_SchedulingAgent/FLPLoader","sap/ushell/bootstrap/_SchedulingAgent/logger","sap/ushell/bootstrap/_SchedulingAgent/state","sap/ushell/EventHub"],function(F,E,a,l,s,b){"use strict";var L={CONTINUE_ON_EVENT:"continueOnEvent",BY_EVENT:"byEvent",BY_COMPONENT_CREATE:"byComponentCreate",BY_REQUIRE:"byRequire",WAIT_IN_MS:"waitInMs"};var S={WAIT:"wait",ERROR:"error",DONE:"done",STEP:"step",BLOCKDONE:"blockDone",SKIPPED:"skip"};var c={oComponentsLoading:{},oPathsLoading:{},_initialize:function(){s.clear();l.clearHistory();s.setForModule(s.id.module.schedulingAgent.id,s.id.module.schedulingAgent.Initializing,"Scheduling Agent starting");var d=F.initializeSchedule();d.then(function(e){if(!e){s.setForModule(s.id.module.schedulingAgent.id,s.id.module.schedulingAgent.FatalError,"Configuration error!");return;}E.initializeStepDoneListener(this);s.setForModule(s.id.module.schedulingAgent.id,s.id.module.schedulingAgent.Initialized,"Scheduling Agent ready");this.eventReceived();}.bind(this));},_processStepConfiguration:function(d){var o={sStepType:"",oData:{},sStepName:"",bConfigOk:false};if(d.oConfig.loadingMode===L.CONTINUE_ON_EVENT){o.sStepType=L.CONTINUE_ON_EVENT;o.sStepName=d.oContent.LoadingStep;o.oData.eventName=d.oConfig.continueOnEvent&&d.oConfig.continueOnEvent.eventName;o.oData.stepName=d.oContent.LoadingStep;o.bConfigOk=!!(o.oData.eventName&&o.oData.stepName);}else if(d.oConfig.loadingMode===L.BY_EVENT){o.sStepType=L.BY_EVENT;o.sStepName=d.oContent.LoadingStep;o.oData.eventName=d.oConfig.byEvent&&d.oConfig.byEvent.eventName;o.oData.eventData={};o.oData.eventData.data=d.oConfig.byEvent.eventData;o.oData.eventData.stepName=d.oContent.LoadingStep;o.bConfigOk=!!(o.oData.eventName);}else if(d.oConfig.loadingMode===L.BY_COMPONENT_CREATE){o.sStepType=L.BY_COMPONENT_CREATE;o.sStepName=d.oContent.LoadingStep;o.oData=d.oConfig.byComponentCreate&&d.oConfig.byComponentCreate.ui5ComponentOptions||{};o.bConfigOk=!!o.oData;}else if(d.oConfig.loadingMode===L.BY_REQUIRE){o.sStepType=L.BY_REQUIRE;o.sStepName=d.oContent.LoadingStep;o.oData={};o.oData.sPath=d.oConfig.byRequire.path;o.oData.sStepName=d.oContent.LoadingStep;o.bConfigOk=!!o.oData.sPath;}else if(d.oConfig.loadingMode===L.WAIT_IN_MS){o.sStepType=L.WAIT_IN_MS;o.sStepName=d.oContent.LoadingStep;o.oData.iWaitingTime=d.oConfig.waitInMs&&d.oConfig.waitInMs.waitingTime;o.oData.sStepName=d.oContent.LoadingStep;o.bConfigOk=!!(o.oData.iWaitingTime&&o.oData.sStepName);}return o;},dumpState:function(){s.dump();},dumpHistory:function(){l.dumpHistory();},dumpSchedule:function(){F.dumpSchedule();},dumpAll:function(){l.dumpHistory();F.dumpSchedule();s.dump();},eventReceived:function(){s.setForModule(s.id.module.schedulingAgent.id,s.id.module.schedulingAgent.Working,"Agent is active");var n;do{n=F.getNextLoadingStep();if(n.sStatus===S.ERROR){s.setForModule(s.id.module.schedulingAgent.id,s.id.module.schedulingAgent.FatalError,"Fatal loading error. Loading aborted.");E.unregisterStepDoneListener();b.emit("FLPLoadingDone");return;}if(n.sStatus===S.DONE){s.setForModule(s.id.module.schedulingAgent.id,s.id.module.schedulingAgent.Done,"Loading finished");E.unregisterStepDoneListener();b.emit("FLPLoadingDone");return;}if(n.sStatus===S.BLOCKDONE){}if(n.sStatus===S.SKIPPED){}if(n.sStatus===S.STEP){var o=this._processStepConfiguration(n);if(!o.bConfigOk){s.setForLoadingStep(o.sStepName,s.id.loadingStep.Abort,"","Step configuration error");s.setForLoadingStep(o.sStepName,s.id.loadingStep.Skipped,"","Step configuration error");s.setForModule(s.id.module.schedulingAgent.id,s.id.module.schedulingAgent.FatalError,o,"Step configuration error!");}else if(o.sStepType===L.CONTINUE_ON_EVENT){E.listenToEvent(o.oData);s.setForLoadingStep(o.sStepName,s.id.loadingStep.InProgress,o.oData.eventName,"continueOnEvent step sent to Event Processor");}else if(o.sStepType===L.BY_EVENT){a.loadComponentByEvent(o.oData);s.setForLoadingStep(o.sStepName,s.id.loadingStep.InProgress,o.oData,"byEvent step sent to FLP Loader");}else if(o.sStepType===L.WAIT_IN_MS){a.waitInMs(o.oData);s.setForLoadingStep(o.sStepName,s.id.loadingStep.InProgress,o.oData.iWaitingTime+"ms","WaitInMs step sent to FLP Loader");}else if(o.sStepType===L.BY_REQUIRE){var p=a.loadComponentByRequire(o.oData.sPath);this.oPathsLoading[o.sStepName]=p;s.setForLoadingStep(o.sStepName,s.id.loadingStep.InProgress,o.oData.sPath,"byRequire step sent to FLP Loader");var d=o.sStepName;p.then(function(){s.setForLoadingStep(d,s.id.loadingStep.InProgress,"","Step's promise has resolved");delete this.oPathsLoading[d];b.emit("StepDone",d);}.bind(this),function(){s.setForLoadingStep(d,s.id.loadingStep.FatalError,"","Step's promise failed");delete this.oPathsLoading[d];b.emit("StepFailed",d);}.bind(this));}else if(o.sStepType===L.BY_COMPONENT_CREATE){var P=a.loadComponentByComponentCreate(o);this.oComponentsLoading[o.sStepName]=P;s.setForLoadingStep(o.sStepName,s.id.loadingStep.InProgress,o.oData,"byComponentCreate step sent to FLP Loader");P.then(function(e){s.setForLoadingStep(e,s.id.loadingStep.InProgress,"","Step's promise has resolved");delete this.oComponentsLoading[e];b.emit("StepDone",e);}.bind(this),function(e){s.setForLoadingStep(e,s.id.loadingStep.FatalError,"","Step's promise failed");delete this.oComponentsLoading[e];b.emit("StepFailed",e);}.bind(this));}}}while(n.sStatus!==S.WAIT);s.setForModule(s.id.module.schedulingAgent.id,s.id.module.schedulingAgent.Waiting,"Agent waits");}};return c;},false);
sap.ui.predefine('sap/ushell/bootstrap/_SchedulingAgent/EventProcessor',["sap/ushell/bootstrap/_SchedulingAgent/state","sap/ushell/EventHub"],function(I,E){"use strict";var a={SchedulingAgent:{},aDoableObjects:[],initializeStepDoneListener:function(b){this.SchedulingAgent=b;this.aDoableObjects=[E.on("StepDone").do(function(s){I.setForLoadingStep(s,I.id.loadingStep.Done,"","Step event received");this.SchedulingAgent.eventReceived();}.bind(this)),E.on("StepFailed").do(function(s){I.setForLoadingStep(s,I.id.loadingStep.Skipped,"","Step event received");this.SchedulingAgent.eventReceived();}.bind(this))];},listenToEvent:function(e){E.once(e.eventName).do(function(){I.setForLoadingStep(e.stepName,I.id.loadingStep.Done,e.eventName,"Event received");this.SchedulingAgent.eventReceived();}.bind(this));},unregisterStepDoneListener:function(){this.aDoableObjects.forEach(function(d){d.off();});},setTimeOut:function(){}};return a;},false);
sap.ui.predefine('sap/ushell/bootstrap/_SchedulingAgent/FLPLoader',["sap/ushell/EventHub","sap/ui/core/Component"],function(E,C){"use strict";var F={loadComponentByEvent:function(c){E.emit(c.eventName,c.eventData);},loadComponentByComponentCreate:function(s){return C.create(s.oData).then(function(){return Promise.resolve(s.sStepName);},function(){return Promise.reject(s.sStepName);});},loadComponentByRequire:function(p){return new Promise(function(r,R){sap.ui.require([p],function(d){r(d);});});},waitInMs:function(w){setTimeout(function(){E.emit("StepDone",w.sStepName);},w.iWaitingTime);},directLoading:function(){}};return F;},false);
sap.ui.predefine('sap/ushell/bootstrap/_SchedulingAgent/FLPScheduler',["sap/ushell/bootstrap/_SchedulingAgent/state","sap/base/util/LoaderExtensions","sap/base/Log","sap/ushell/Config"],function(s,L,a,C){"use strict";var S={Loaded:"loaded",Wait:"wait",Step:"step",Error:"error",BlockDone:"blockDone",Start:"start",Done:"done",Skipped:"skipped"};var b="sap/ushell/bootstrap/_SchedulingAgent/LoadingConfiguration.json";var c="sap/ushell/bootstrap/_SchedulingAgent/StepConfiguration.json";function g(){return C.last("/core/shell/model/currentState/stateName");}var F={oSchedule:{iBlockIndex:0,aBlocksLoading:[]},initializeSchedule:function(){var p=L.loadResource(c,{async:true});var d=L.loadResource(b,{async:true});var P=Promise.all([p,d]).then(function(v){var o=v[0];var l=v[1];var e=this._validateConfig(l,o);if(e){this.oSchedule.oBlocks=l.LoadingBlocks;this.oSchedule.oSteps=o;this.oSchedule.aBlockOrder=l.OrderOfLoadingBlocks;this.oSchedule.iBlockIndex=0;s.setForModule(s.id.module.flpScheduler.id,s.id.module.flpScheduler.Initialized,"Schedule validated");}else{s.setForModule(s.id.module.flpScheduler.id,s.id.module.flpScheduler.WrongConfiguration,"Configuration error");}return e;}.bind(this));return P;},getNextLoadingStep:function(){var o={sStatus:S.Start,oContent:{}};if(this.oSchedule.aBlocksLoading.length===0){var l=this._startLoadingBlock();if(l){o.sStatus=S.Done;return o;}}var d=this.oSchedule.aBlocksLoading[this.oSchedule.aBlocksLoading.length-1];var e=this.oSchedule.aBlockOrder.indexOf(d);var n=this.oSchedule.aBlockOrder[e+1];if(this.oSchedule.oBlocks[d].bCanBeLoadedConcurrently&&n){this._startLoadingBlock();}var A=true;var f=false;var h,j,k,m,p,q,I,r,t;for(var i=0;i<this.oSchedule.aBlocksLoading.length;i++){h=this.oSchedule.aBlocksLoading[i];j=this.oSchedule.oBlocks[h];k=j.iStepIndex;m=j.LoadingSteps[k];p=k===j.LoadingSteps.length-1;q=this._checkAndUpdateAsyncQueue(j);t=s.isStepLoaded(m.LoadingStep)||s.isStepSkipped(m.LoadingStep);r=s.isStepLoading(m.LoadingStep);A=q.bAllStepsDone&&t;f=q.bAStepIsLoading||r;if((r&&!m.canBeLoadedAsync)||(f&&p)){o.sStatus=S.Wait;continue;}if(!p||!t&&!r){if(t||(m.canBeLoadedAsync&&r)){k+=1;}o=this._prepareStepForLoading(j,h,k);}if(A&&p){I=this.oSchedule.aBlocksLoading.indexOf(h);this.oSchedule.aBlocksLoading.splice(I,1);o.sStatus=S.BlockDone;s.setForLoadingBlock(h,s.id.loadingBlock.Done,"","Block removed from loading queue");}if(o.sStatus!==S.wait){break;}}return o;},dumpSchedule:function(){a.debug(JSON.stringify(this.oSchedule));},_loadingIsEnabled:function(d){var e;if(Array.isArray(d.oConfig.excludedFLPStates)){if(d.oConfig.excludedFLPStates.indexOf(g())>-1){return false;}}if(Array.isArray(d.oConfig.mandatoryFLPStates)&&d.oConfig.mandatoryFLPStates.length!==0){if(d.oConfig.mandatoryFLPStates.indexOf(g())===-1){return false;}}function f(o){return o.path&&C.last(o.path)!==o.assertionValue;}if(d.oConfig.configSwitch){e=[].concat(d.oConfig.configSwitch);if(e.some(f)){return false;}}return true;},_checkAndUpdateAsyncQueue:function(d){var t=[];var e,f,h;var A=true;var j=false;for(var i=0;i<d.aAsyncStepsLoading.length;i++){h=d.aAsyncStepsLoading[i];e=s.isStepLoaded(h)||s.isStepSkipped(h);f=s.isStepLoading(h);if(f){t.push(h);}A=A&&e;j=j||f;}d.aAsyncStepsLoading=t;return{bAllStepsDone:A,bAStepIsLoading:j};},_startLoadingBlock:function(){var l=false;if(this.oSchedule.iBlockIndex<this.oSchedule.aBlockOrder.length){var n=this.oSchedule.aBlockOrder[this.oSchedule.iBlockIndex];this.oSchedule.aBlocksLoading.push(n);this.oSchedule.oBlocks[n].iStepIndex=0;this.oSchedule.oBlocks[n].aAsyncStepsLoading=[];this.oSchedule.iBlockIndex+=1;s.setForLoadingBlock(n,s.id.loadingBlock.Prepared,"","Block added to the loading queue.");}else{l=true;}return l;},_prepareStepForLoading:function(d,e,f){var h;var o={sStatus:S.Step,oContent:d.LoadingSteps[f],oConfig:this.oSchedule.oSteps[d.LoadingSteps[f].LoadingStep]};if(!this._loadingIsEnabled(o)){o.sStatus=S.Skipped;d.iStepIndex=f;s.setForLoadingStep(o.oContent.LoadingStep,s.id.loadingStep.Skipped,"","Step set to skipped");return o;}var D=this._checkDependencies(o,e);if(D.bMissing){o.sStatus=S.Error;}else if(D.bAllLoaded){s.setForLoadingStep(o.oContent.LoadingStep,s.id.loadingStep.Prepared,"","Step prepared for control unit");h=o.oContent.canBeLoadedAsync;d.iStepIndex=f;if(h){s.setForLoadingStep(o.oContent.LoadingStep,s.id.loadingStep.Prepared,"","Step set on the async loading queue");d.aAsyncStepsLoading.push(o.oContent.LoadingStep);}}else{o.sStatus=S.Wait;s.setForLoadingStep(o.oContent.LoadingStep,s.id.loadingStep.WaitingForDependencies,"","Step missing dependencies");}return o;},_checkDependencies:function(d,e){var D={bAllLoaded:true,bMissing:false};if(d.oConfig.Dependencies){for(var i=0;i<d.oConfig.Dependencies.length;i++){D.bAllLoaded=D.bAllLoaded&&s.isStepLoaded(d.oConfig.Dependencies[i]);if(!s.isStepLoaded(d.oConfig.Dependencies[i])&&!s.isStepLoading(d.oConfig.Dependencies[i])){s.setForLoadingStep(d.oContent.LoadingStep,s.id.loadingStep.Aborted,d.oConfig.Dependencies[i],"Missing a dependency");s.setForLoadingBlock(e,s.id.loadingBlock.Aborted,d.oConfig.Dependencies[i],"A step is missing a dependency");s.setForModule(s.id.module.flpScheduler.id,s.id.module.flpScheduler.LoadingAborted,"Dependencies can not be resolved: a dependency isn't loading before it is required.");D.bMissing=true;D.bAllLoaded=false;break;}}}return D;},_validateConfig:function(l,d){var e=l&&l.OrderOfLoadingBlocks&&l.LoadingBlocks&&l.OrderOfLoadingBlocks.length&&d;if(!e){return false;}var B=l.OrderOfLoadingBlocks.reduce(function(f,h){f=f&&l.LoadingBlocks[h];if(f){var o=l.LoadingBlocks[h];var i=true;if(o.LoadingSteps){var k;for(var j=0;j<o.LoadingSteps.length;j++){k=o.LoadingSteps[j].LoadingStep;i=i&&d[k];}}f=f&&i;}return!!f;},true);return B;}};return F;},false);
sap.ui.predefine('sap/ushell/bootstrap/_SchedulingAgent/logger',["sap/base/Log"],function(B){"use strict";var h=[];var v=true;var C="FLPScheduler";return{getHistory:function(){return h;},verboseOn:function(){v=true;return(v===true);},verboseOff:function(){v=false;return(v===false);},isVerboseOn:function(){return(v===true);},clearHistory:function(){h.length=0;},dumpHistory:function(i){var _;if(i){_=h.filter(function(e){return e.id===i;});console.table(_);}else{console.table(h);}return _||h;},logError:function(e){B.error(this.stateToString(e),undefined,C);h.push(e);return true;},logWarning:function(w){if(v){B.warning(this.stateToString(w),C);h.push(w);}return v;},logStatus:function(s){if(v){B.info(this.stateToString(s),C);h.push(s);}return v;},stateToString:function(s){return"FLP Bootstrap Scheduling Agent :: "+s.type+" '"+s.id+"' /"+s.status+((s.remark)?"/ : "+s.remark:"/");}};},false);
sap.ui.predefine('sap/ushell/bootstrap/_SchedulingAgent/state',["sap/ushell/bootstrap/_SchedulingAgent/logger","sap/base/util/now","sap/base/util/deepClone"],function(l,n,c){"use strict";var i={module:{schedulingAgent:{id:"schedulingAgent",FatalError:"FATAL_ERROR",Idle:"IDLE",Initialized:"INITIALIZED",Initializing:"INITIALIZING",Waiting:"WAITING",WokeUp:"WOKE_UP",Working:"WORKING"},state:{id:"state",FatalError:"FATAL_ERROR",Available:"AVAILABLE"},flpScheduler:{id:"flpScheduler",Initialized:"INITIALIZED",WrongConfiguration:"WRONG_CONFIGURATION",LoadingAborted:"LOADING_ABORTED"},flpLoader:{id:"flpLoader"},logger:{id:l,Block:"BLOCK",Step:"STEP",Module:"MODULE"}},loadingStep:{Prepared:"STEP_PREPARED",WaitingForDependencies:"STEP_WAITING_FOR_DEPENDENCIES",InProgress:"STEP_IN_PROGRESS",Done:"STEP_DONE",Aborted:"STEP_ABORTED",Skipped:"STEP_SKIPPED"},loadingBlock:{Prepared:"BLOCK_PREPARED",WaitingForDependencies:"BLOCK_WAITING_FOR_DEPENDENCIES",InProgress:"BLOCK_IN_PROGRESS",TimedOut:"BLOCK_TIMEDOUT",Done:"BLOCK_DONE",Aborted:"BLOCK_ABORTED"}};var s={id:i,oState:{ofLoadingBlock:{},ofLoadingStep:{},ofModule:{}},clear:function(){this.oState={ofLoadingBlock:{},ofLoadingStep:{},ofModule:{}};},getIdBase:function(){return i;},setForLoadingBlock:function(a,b,p,r,d){this.oState.ofLoadingBlock[a]={time:n(),status:b,parameter:p,remark:r,byModule:d};l.logStatus({time:this.oState.ofLoadingBlock[a].time,type:i.module.logger.Block,id:a,status:b,parameter:p,remark:r,byModule:d});},getForLoadingBlock:function(a){return this.oState.ofLoadingBlock[a];},setForLoadingStep:function(a,b,p,r,d){this.oState.ofLoadingStep[a]={time:n(),status:b,parameter:p,remark:r,byModule:d};l.logStatus({time:this.oState.ofLoadingStep[a].time,type:i.module.logger.Step,id:a,status:b,parameter:p,remark:r,byModule:d});},getForLoadingStep:function(a){return this.oState.ofLoadingStep[a];},setForModule:function(a,b,r){this.oState.ofModule[a]={time:n(),status:b,remark:r,byModule:undefined};l.logStatus({time:this.oState.ofModule[a].time,type:i.module.logger.Module,id:a,status:b,parameter:undefined,remark:r,byModule:undefined});},getForModule:function(a){return this.oState.ofModule[a];},isBlockWaitingForDependencies:function(a){var S=this.getForLoadingBlock(a);return!!(S&&S.status===i.loadingBlock.WaitingForDependencies);},isBlockLoading:function(a){var S=this.getForLoadingBlock(a);return!!(S&&S.status===i.loadingBlock.InProgress);},isBlockLoaded:function(a){var S=this.getForLoadingBlock(a);return!!(S&&S.status===i.loadingBlock.Done);},isBlockLoadingAborted:function(a){var S=this.getForLoadingBlock(a);return!!(S&&S.status===i.loadingBlock.Aborted);},hasBlockLoadingTimedOut:function(a){var S=this.getForLoadingBlock(a);return!!(S&&S.status===i.loadingBlock.TimedOut);},isStepWaitingForDependencies:function(a){var S=this.getForLoadingStep(a);return!!(S&&S.status===i.loadingStep.WaitingForDependencies);},isStepLoading:function(a){var S=this.getForLoadingStep(a);return!!(S&&S.status===i.loadingStep.InProgress);},isStepLoaded:function(a){var S=this.getForLoadingStep(a);return!!(S&&S.status===i.loadingStep.Done);},isStepLoadingAborted:function(a){var S=this.getForLoadingStep(a);return!!(S&&S.status===i.loadingStep.Sborted);},isStepSkipped:function(a){var S=this.getForLoadingStep(a);return!!(S&&S.status===i.loadingStep.Skipped);},isAgentIdle:function(){var S=this.getForModule(i.module.schedulingAgent.id);return!!(S&&S.status===i.module.schedulingAgent.Idle);},isAgentWaiting:function(){var S=this.getForModule(i.module.schedulingAgent.id);return!!(S&&S.status===i.module.schedulingAgent.Waiting);},agentWokeUp:function(){var S=this.getForModule(i.module.schedulingAgent.id);return!!(S&&S.status===i.module.schedulingAgent.WokeUp);},dump:function(){console.log(JSON.parse(JSON.stringify(this.oState)));var S=c(this.oState);return S;},iStartingTime:n()};s.setForModule(i.module.state.id,i.module.state.Available);return s;},false);
sap.ui.predefine('sap/ushell/bootstrap/common/common.create.configcontract.core',["sap/ui/thirdparty/URI"],function(U){"use strict";var d={};function c(m){var G={};function a(M,p){var P=p.split("/");var s=P.slice(0,P.length-1).join("/");var l=P.pop();if(M.hasOwnProperty(s)){return M[s][l];}var D=P.reduce(function(o,h){if(!o||!o.hasOwnProperty(h)){return{};}return o[h];},m);M[s]=D;return D[l];}function b(p,D){var s=a(G,p);d[p]=D;return s!==undefined?s:D;}function e(p,o){var E=b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",undefined);var P=b("renderers/fiori2/componentData/config/applications/Shell-home/"+p,undefined);var O=b("renderers/fiori2/componentData/config/applications/Shell-home/"+o,undefined);P=(E===false)?false:P;P=(P!==undefined)?P:E;if(E===undefined||E){if(P===false){return false;}return(O!==undefined)?O:P;}return false;}function f(){var p="renderers/fiori2/componentData/config/enableBackGroundShapes";var E=!!a(G,p);if(E){E=!b("ushell/spaces/enabled",false);}d[p]=E;return E;}var C={core:{extension:{enableHelp:b("renderers/fiori2/componentData/config/enableHelp",false),EndUserFeedback:b("services/EndUserFeedback/config/enabled",true),SupportTicket:b("services/SupportTicket/config/enabled",false)},navigation:{enableInPlaceForClassicUIs:{GUI:b("services/ClientSideTargetResolution/config/enableInPlaceForClassicUIs/GUI",false),WDA:b("services/ClientSideTargetResolution/config/enableInPlaceForClassicUIs/WDA",false),WCF:b("services/ClientSideTargetResolution/config/enableInPlaceForClassicUIs/WCF",true)},enableWebguiLocalResolution:true,enableWdaLocalResolution:true,flpURLDetectionPattern:b("services/ClientSideTargetResolution/config/flpURLDetectionPattern","[/]FioriLaunchpad.html[^#]+#[^-]+?-[^-]+")},spaces:{enabled:b("ushell/spaces/enabled",false),configurable:b("ushell/spaces/configurable",false),extendedChangeDetection:{enabled:b("ushell/spaces/extendedChangeDetection/enabled",true)}},menu:{enabled:b("ushell/menu/enabled",false)||b("ushell/spaces/enabled",false),visibleInAllStates:b("ushell/menu/visibleInAllStates",false)},darkMode:{enabled:b("ushell/darkMode/enabled",false),supportedThemes:b("ushell/darkMode/supportedThemes",[{dark:"sap_fiori_3_dark",light:"sap_fiori_3"}])},contentProviders:{providerInfo:{show:b("ushell/contentProviders/providerInfo/show",false)}},productSwitch:{enabled:!!b("ushell/productSwitch/url",""),url:b("ushell/productSwitch/url","")},shellHeader:{application:{},centralAreaElement:null,headEndItems:[],headItems:[],headerVisible:true,showLogo:false,ShellAppTitleState:undefined,rootIntent:b("renderers/fiori2/componentData/config/rootIntent",""),title:""},userPreferences:{dialogTitle:"Settings",isDetailedEntryMode:false,activeEntryPath:null,entries:[],profiling:[]},shell:{cacheConfiguration:b("renderers/fiori2/componentData/config/cacheConfiguration",{}),enableAbout:b("renderers/fiori2/componentData/config/enableAbout",true),enablePersonalization:b("renderers/fiori2/componentData/config/enablePersonalization",b("renderers/fiori2/componentData/config/applications/Shell-home/enablePersonalization",true)),enableRecentActivity:b("renderers/fiori2/componentData/config/enableRecentActivity",true),enableRecentActivityLogging:b("renderers/fiori2/componentData/config/enableRecentActivityLogging",true),enableFiori3:true,sessionTimeoutIntervalInMinutes:b("renderers/fiori2/componentData/config/sessionTimeoutIntervalInMinutes",-1),enableFeaturePolicyInIframes:b("renderers/fiori2/componentData/config/enableFeaturePolicyInIframes",false),model:{enableSAPCopilotWindowDocking:undefined,enableBackGroundShapes:f(),personalization:undefined,contentDensity:undefined,setTheme:undefined,userDefaultParameters:undefined,disableHomeAppCache:undefined,enableHelp:undefined,enableTrackingActivity:undefined,searchAvailable:false,searchFiltering:true,showEndUserFeedback:false,searchTerm:"",isPhoneWidth:false,enableNotifications:b("services/Notifications/config/enabled",false),enableNotificationsUI:false,notificationsCount:0,currentViewPortState:"Center",migrationConfig:undefined,allMyAppsMasterLevel:undefined,userStatus:undefined,userStatusUserEnabled:true,shellAppTitleData:{currentViewInPopover:"navigationMenu",enabled:false,showGroupsApps:false,showCatalogsApps:false,showExternalProvidersApps:false},userImage:{personPlaceHolder:null,account:"sap-icon://account"},currentState:{stateName:"blank",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:false,showRecentActivity:true,search:"",paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[]}}},home:{disableSortedLockedGroups:b("renderers/fiori2/componentData/config/applications/Shell-home/disableSortedLockedGroups",false),draggedTileLinkPersonalizationSupported:true,editTitle:false,enableHomePageSettings:b("renderers/fiori2/componentData/config/applications/Shell-home/enableHomePageSettings",true),enableRenameLockedGroup:b("renderers/fiori2/componentData/config/applications/Shell-home/enableRenameLockedGroup",false),enableTileActionsIcon:b("renderers/fiori2/componentData/config/enableTileActionsIcon",b("renderers/fiori2/componentData/config/applications/Shell-home/enableTileActionsIcon",false)),enableTransientMode:b("ushell/home/enableTransientMode",false),featuredGroup:{enable:b("ushell/home/featuredGroup/enable",false),frequentCard:b("ushell/home/featuredGroup/frequentCard",true)&&b("ushell/home/featuredGroup/enable",false),recentCard:b("ushell/home/featuredGroup/recentCard",true)&&b("ushell/home/featuredGroup/enable",false)},gridContainer:b("ushell/home/gridContainer",false),homePageGroupDisplay:b("renderers/fiori2/componentData/config/applications/Shell-home/homePageGroupDisplay","scroll"),isInDrag:false,optimizeTileLoadingThreshold:b("renderers/fiori2/componentData/config/applications/Shell-home/optimizeTileLoadingThreshold",100),sizeBehavior:b("renderers/fiori2/componentData/config/sizeBehavior","Responsive"),sizeBehaviorConfigurable:b("renderers/fiori2/componentData/config/sizeBehaviorConfigurable",false),wrappingType:b("ushell/home/tilesWrappingType","Normal"),segments:b("renderers/fiori2/componentData/config/applications/Shell-home/segments",undefined),tileActionModeActive:false},catalog:{enabled:b("renderers/fiori2/componentData/config/enablePersonalization",b("renderers/fiori2/componentData/config/applications/Shell-home/enablePersonalization",true))||b("renderers/fiori2/componentData/config/enableAppFinder",false),appFinderDisplayMode:b("renderers/fiori2/componentData/config/applications/Shell-home/appFinderDisplayMode",undefined),easyAccessNumbersOfLevels:b("renderers/fiori2/componentData/config/applications/Shell-home/easyAccessNumbersOfLevels",undefined),enableCatalogSearch:b("renderers/fiori2/componentData/config/enableSearchFiltering",b("renderers/fiori2/componentData/config/applications/Shell-home/enableSearchFiltering",b("renderers/fiori2/componentData/config/applications/Shell-home/enableCatalogSearch",true))),enableCatalogSelection:b("renderers/fiori2/componentData/config/enableCatalogSelection",b("renderers/fiori2/componentData/config/applications/Shell-home/enableCatalogSelection",true)),enableCatalogTagFilter:b("renderers/fiori2/componentData/config/applications/Shell-home/enableTagFiltering",b("renderers/fiori2/componentData/config/applications/Shell-home/enableCatalogTagFilter",true)),enableEasyAccess:b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",undefined),enableEasyAccessSAPMenu:(b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",undefined)===false)?false:b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccessSAPMenu",b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",undefined)),enableEasyAccessSAPMenuSearch:e("enableEasyAccessSAPMenu","enableEasyAccessSAPMenuSearch"),enableEasyAccessUserMenu:(b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",undefined)===false)?false:b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccessUserMenu",b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",undefined)),enableEasyAccessUserMenuSearch:e("enableEasyAccessUserMenu","enableEasyAccessUserMenuSearch"),enableHideGroups:b("renderers/fiori2/componentData/config/enableHideGroups",b("renderers/fiori2/componentData/config/applications/Shell-home/enableHideGroups",true)),sapMenuServiceUrl:undefined,userMenuServiceUrl:b("renderers/fiori2/componentData/config/applications/Shell-home/userMenuServiceUrl",undefined)},esearch:{defaultSearchScopeApps:b("renderers/fiori2/componentData/config/esearch/defaultSearchScopeApps",false),searchBusinessObjects:b("renderers/fiori2/componentData/config/esearch/searchBusinessObjects",true),searchScopeWithoutAll:b("renderers/fiori2/componentData/config/esearch/searchScopeWithoutAll",false)}}};return C;}function g(){return d;}return{createConfigContract:c,getDefaultConfiguration:g};},false);
sap.ui.predefine('sap/ushell/bootstrap/common/common.load.model',["sap/ushell/Config","sap/ui/model/json/JSONModel","sap/ui/thirdparty/jquery","sap/ui/Device"],function(C,J,q,D){"use strict";var _;function a(){var s=C.last("/core"),i={groups:[],rtl:sap.ui.getCore().getConfiguration().getRTL(),personalization:s.shell.enablePersonalization,tagList:[],selectedTags:[],userPreferences:{entries:[]},enableHelp:s.extension.enableHelp,enableTileActionsIcon:D.system.desktop?s.home.enableTileActionsIcon:false};i=q.extend({},s.catalog,s.home,i);_=new J(i);_.setSizeLimit(10000);}function b(m){_.setProperty("/isPhoneWidth",!m.matches);}function c(){var m=window.matchMedia("(min-width: 800px)");if(m.addListener){m.addListener(b);b(m);}}return{getModel:function(){if(!_){a();c();}return _;},_resetModel:function(){if(_!=undefined){_.destroy();_=undefined;}}};},true);
sap.ui.predefine('sap/ushell/components/CatalogsManager',["sap/ui/base/Object","sap/ushell/ui/launchpad/TileState","sap/ushell/EventHub","sap/ushell/utils","sap/ushell/components/DestroyHelper","sap/ushell/components/GroupsHelper","sap/ushell/components/MessagingHelper","sap/ushell/components/HomepageManager","sap/ushell/resources","sap/ui/thirdparty/jquery","sap/ui/performance/Measurement","sap/base/Log","sap/ushell/Config"],function(B,T,e,u,d,g,m,H,r,q,M,L,C){"use strict";var c=B.extend("sap.ushell.components.CatalogsManager",{metadata:{publicMethods:["createGroup","createGroupAndSaveTile","createTile","deleteCatalogTileFromGroup","notifyOnActionFailure","resetAssociationOnFailure"]},analyticsConstants:{PERSONALIZATION:"FLP: Personalization",RENAME_GROUP:"FLP: Rename Group",MOVE_GROUP:"FLP: Move Group",DELETE_GROUP:"FLP: Delete Group",RESET_GROUP:"FLP: Reset Group",DELETE_TILE:"FLP: Delete Tile",ADD_TILE:"FLP: Add Tile",MOVE_TILE:"FLP: Move Tile"},_aDoableObjects:[],constructor:function(i,s){this.oLaunchPageService=sap.ushell.Container.getService("LaunchPage");this.oTileCatalogToGroupsMap={};this.skippedProcessCatalogs=0;this.tagsPool=[];this.iInitialLoad=100;this.oModel=s.model;var h={model:this.oModel};if(typeof sap.ushell.components.getHomepageManager==="function"){this.oHomepageManager=sap.ushell.components.getHomepageManager();}else{this.oHomepageManager=new H("dashboardMgr",h);}var I=this.getInterface();sap.ushell.components.getCatalogsManager=function(){return I;};this.registerEvents();},registerEvents:function(){var E=sap.ui.getCore().getEventBus();E.subscribe("renderCatalog",this.loadAllCatalogs,this);this._aDoableObjects=[e.on("showCatalog").do(this.updateTilesAssociation.bind(this)),e.on("updateGroups").do(this.updateTilesAssociation.bind(this))];},unregisterEvents:function(){var E=sap.ui.getCore().getEventBus();E.unsubscribe("renderCatalog",this.loadAllCatalogs,this);this._aDoableObjects.forEach(function(D){D.off();});},getModel:function(){return this.oModel;},loadAllCatalogs:function(){var G=new q.Deferred();var t=this;var s;G.resolve();s=function(){G.done(function(){var a=t.getModel().getProperty("/groups");if(a&&a.length!==0){t.updateTilesAssociation();}});};if(!this.oModel.getProperty("/catalogs")){if(!this.oModel.getProperty("/groups")||this.oModel.getProperty("/groups").length===0){if(!C.last("/core/spaces/enabled")){G=this.oHomepageManager.loadPersonalizedGroups();}}d.destroyFLPAggregationModels(this.oModel.getProperty("/catalogs"));d.destroyTileModels(this.oModel.getProperty("/catalogTiles"));this.oModel.setProperty("/catalogs",[]);this.oModel.setProperty("/catalogSearchEntity",{appBoxes:[],customTiles:[]});this.aPromises=[];M.start("FLP:DashboardManager.GetCatalogsRequest","GetCatalogsRequest","FLP");M.start("FLP:DashboardManager.getCatalogTiles","getCatalogTiles","FLP");M.pause("FLP:DashboardManager.getCatalogTiles");M.start("FLP:DashboardManager.BuildCatalogModelWithRendering","BuildCatalogModelWithRendering","FLP");M.pause("FLP:DashboardManager.BuildCatalogModelWithRendering");this.oLaunchPageService.getCatalogs().done(function(a){var i=a.slice(0,this.iInitialLoad);M.end("FLP:DashboardManager.GetCatalogsRequest");this.aPromises=i.map(this.addCatalogToModel.bind(this));Promise.all(this.aPromises).then(this.processPendingCatalogs.bind(this)).then(function(){this.aPromises=a.slice(this.iInitialLoad).map(this.addCatalogToModel.bind(this));Promise.all(this.aPromises).then(this.processPendingCatalogs.bind(this));}.bind(this)).then(this.onDoneLoadingCatalogs.bind(this,a)).then(s);}.bind(this)).fail(m.showLocalizedErrorHelper("fail_to_load_catalog_msg"));}else{s();}},updateTilesAssociation:function(){this.mapCatalogTilesToGroups();this.updateCatalogTilesToGroupsMap();},mapCatalogTilesToGroups:function(){this.oTileCatalogToGroupsMap={};var G=this.oModel.getProperty("/groups");var t,a,b,f,h;var i=this;G.forEach(function(o){["tiles","links"].forEach(function(A){a=o[A];if(a){for(t=0;t<a.length;++t){b=encodeURIComponent(i.oLaunchPageService.getCatalogTileId(a[t].object));f=i.oTileCatalogToGroupsMap[b]||[];h=i.oLaunchPageService.getGroupId(o.object);if(f.indexOf(h)===-1&&(typeof(o.isGroupVisible)==="undefined"||o.isGroupVisible)&&!o.isGroupLocked){f.push(h);}i.oTileCatalogToGroupsMap[b]=f;}}});});},updateCatalogTilesToGroupsMap:function(){var a=this.getModel().getProperty("/catalogs");var i,t,b,G,f,h,j,k,A,o;if(a){for(i=0;i<a.length;i++){h=a[i].appBoxes;if(h){for(k=0;k<h.length;k++){A=h[k];t=encodeURIComponent(this.oLaunchPageService.getCatalogTileId(A.src));G=this.oTileCatalogToGroupsMap[t];b=(G||[]);A.associatedGroups=b;}}f=a[i].customTiles;if(f){for(j=0;j<f.length;j++){o=f[j];t=encodeURIComponent(this.oLaunchPageService.getCatalogTileId(o.src));G=this.oTileCatalogToGroupsMap[t];b=(G||[]);o.associatedGroups=b;}}}}this.getModel().setProperty("/catalogs",a);},addCatalogToModel:function(o){var a={title:this.oLaunchPageService.getCatalogTitle(o),id:this.oLaunchPageService.getCatalogId(o),numberTilesSupportedOnCurrectDevice:0,static:false,customTiles:[],appBoxes:[]};M.resume("FLP:DashboardManager.getCatalogTiles");return this.oLaunchPageService.getCatalogTiles(o).then(function(b){M.pause("FLP:DashboardManager.getCatalogTiles");return{oCatalogEntry:b,oCatalogModel:a};}).fail(m.showLocalizedErrorHelper("fail_to_load_catalog_tiles_msg"));},getTagList:function(f){var i={};var h=0;var t=[];var j,o,s;if(this.oModel.getProperty("/tagList")&&this.oModel.getProperty("/tagList").length>0){this.tagsPool.concat(this.oModel.getProperty("/tagList"));}for(h=0;h<this.tagsPool.length;h++){o=this.tagsPool[h];if(i[o]){i[o]++;}else{i[o]=1;}}for(j in i){t.push({tag:j,occ:i[j]});}s=t.sort(function(a,b){return b.occ-a.occ;});if(f){this.oModel.setProperty("/tagList",s.slice(0,f));}else{this.oModel.setProperty("/tagList",s);}},processPendingCatalogs:function(p){var a=this.oModel.getProperty("/catalogs");var P,o,b,E,i,f;var h=sap.ui.getCore().getEventBus();var A=this.oModel.getProperty("/masterCatalogs")||[{title:m.getLocalizedText("all")}];M.end("FLP:DashboardManager.getCatalogTiles");M.resume("FLP:DashboardManager.BuildCatalogModelWithRendering");this.skippedProcessCatalogs=0;while(p.length>0){P=p.shift();o=P.oCatalogEntry;b=P.oCatalogModel;E=this.searchModelCatalogByTitle(b.title);if(E.result){f=this.oModel.getProperty("/catalogs")[E.indexOfPreviousInstanceInModel];i=false;}else{i=true;f=b;}var j=function(k,l){var n;if(this._getIsIntentSupported(l)){if(this._getIsAppBox(l)){n=this.createCatalogAppBoxes(l,true);k.appBoxes.push(n);}else{var s=this.createCatalogTiles(l);k.customTiles.push(s);if(!this.aFnToGetTileView){this.aFnToGetTileView=[];}}}}.bind(this,f);o.forEach(j);if(f.appBoxes.length>0||f.customTiles.length>0){if(i){a.push(b);A.push({title:b.title});}}if(this.oModel.getProperty("/enableCatalogTagFilter")===true){this.getTagList();}}this.oModel.setProperty("/masterCatalogs",A);this.oModel.setProperty("/catalogs",a);h.publish("launchpad","afterCatalogSegment");setTimeout(function(){u.setPerformanceMark("FLP-TTI-AppFinder",{bUseUniqueMark:true});},0);M.pause("FLP:DashboardManager.BuildCatalogModelWithRendering");},loadCustomTilesKeyWords:function(){var f;if(this.aFnToGetTileView){while(this.aFnToGetTileView.length>0){f=this.aFnToGetTileView.pop();f();}}},searchModelCatalogByTitle:function(a){var b=this.oModel.getProperty("/catalogs");var f=false;var i;var n=0;var G=false;q.each(b,function(h,t){if(t.title===r.i18n.getText("catalogsLoading")){G=true;}else if(a===t.title){i=h;n=t.numberOfTiles;f=true;return false;}return undefined;});return{result:f,indexOfPreviousInstanceInModel:i,indexOfPreviousInstanceInPage:G?i-1:i,numOfTilesInCatalog:n};},createCatalogAppBoxes:function(o,G){var a=encodeURIComponent(this.oLaunchPageService.getCatalogTileId(o));var b=this.oTileCatalogToGroupsMap[a]||[];var t=this.oLaunchPageService.getCatalogTileTags(o)||[];if(t.length>0){this.tagsPool=this.tagsPool.concat(t);}var n;if(o.tileResolutionResult){n=o.tileResolutionResult.navigationMode;}return{id:a,associatedGroups:b,src:o,title:this.oLaunchPageService.getCatalogTilePreviewTitle(o),subtitle:this.oLaunchPageService.getCatalogTilePreviewSubtitle(o),icon:this.oLaunchPageService.getCatalogTilePreviewIcon(o),keywords:G?(this.oLaunchPageService.getCatalogTileKeywords(o)||[]).join(","):[],tags:t,navigationMode:n,url:this.oLaunchPageService.getCatalogTileTargetURL(o)};},onDoneLoadingCatalogs:function(a){var i;var b=[];var t=this;for(i=0;i<a.length;i++){b.push(this.oLaunchPageService.getCatalogTiles(a[i]));}Promise.all(b).then(function(R){var I;var n=true;for(I=0;I<R.length;I++){if(R[I].length!==0){n=false;break;}}if(n||!a.length){t.oModel.setProperty("/catalogsNoDataText",r.i18n.getText("noCatalogs"));}});var E=sap.ui.getCore().getEventBus();E.publish("launchpad","catalogContentLoaded");var l=a.filter(function(o){var s=t.oLaunchPageService.getCatalogError(o);if(s){L.error("A catalog could not be loaded",s,"sap.ushell.components.CatalogsManager");}return!s;});if(l.length!==a.length){m.showLocalizedError("partialCatalogFail");}u.handleTilesVisibility();},createCatalogTiles:function(o){var t,a;var b=encodeURIComponent(this.oLaunchPageService.getCatalogTileId(o));var f=this.oTileCatalogToGroupsMap[b]||[];var h=this.oLaunchPageService.getCatalogTileTags(o)||[];if(h.length>0){this.tagsPool=this.tagsPool.concat(h);}t=new T({state:"Loading"});var s=o.getChip&&o.getChip().getBaseChipId&&o.getChip().getBaseChipId();if(s&&["X-SAP-UI2-CHIP:/UI2/DYNAMIC_APPLAUNCHER","X-SAP-UI2-CHIP:/UI2/STATIC_APPLAUNCHER"].indexOf(s)===-1){this.oLaunchPageService.getCatalogTileView(o);}a=this.oLaunchPageService.getCatalogTilePreviewTitle(o);if(!a){a=this.oLaunchPageService.getCatalogTileTitle(o);}return{associatedGroups:f,src:o,catalog:o.title,catalogId:o.id,title:a,tags:h,keywords:(this.oLaunchPageService.getCatalogTileKeywords(o)||[]).join(","),id:b,size:this.oLaunchPageService.getCatalogTileSize(o),content:[t],isTileIntentSupported:this.oLaunchPageService.isTileIntentSupported(o),tileType:o.tileType};},createGroupAndSaveTile:function(D){var t=this;var o=D.catalogTileContext;var n=D.newGroupName;var a=new q.Deferred();var R={};if(u.validHash(n)&&o){this.createGroup(n).then(function(b){var p=t.createTile({catalogTileContext:o,groupContext:b});p.done(function(f){R={group:f.group,status:1,action:"addTileToNewGroup"};a.resolve(R);}).fail(function(f){R={group:f.group,status:0,action:"addTileToNewGroup"};a.resolve(R);});});}return a.promise();},createGroup:function(t){var a=this;var D=new q.Deferred();if(!u.validHash(t)){return D.reject({status:0,action:"createNewGroup"});}var R=this.oLaunchPageService.addGroup(t);R.done(function(G){var o=a.oHomepageManager.addGroupToModel(G);D.resolve(o);});R.fail(function(){m.showLocalizedError("fail_to_create_group_msg");var o={status:0,action:"createNewGroup"};D.resolve(o);});return D.promise();},createTile:function(D){var t=this;var o=D.catalogTileContext;var a=D.groupContext;var G=this.oModel.getProperty(a.getPath());var s=G.groupId;var R;var b=new q.Deferred();var f={};var E;E=sap.ui.getCore().getEventBus();E.publish("launchpad","addTile",{catalogTileContext:o,groupContext:a});if(!o){L.warning("CatalogsManager: Did not receive catalog tile object. Abort.",this);f={group:G,status:0,action:"add"};return Promise.resolve(f);}R=this.oLaunchPageService.addTile(o.getProperty("src"),a.getProperty("object"));R.done(function(h){var i=t.oModel.getProperty("/groups");var j=g.getModelPathOfGroup(i,s);var k=t.oLaunchPageService.getTileTitle(h);t.oHomepageManager.addTileToGroup(j,h);f={group:G,status:1,action:"add"};sap.ushell.Container.getService("UsageAnalytics").logCustomEvent(t.analyticsConstants.PERSONALIZATION,t.analyticsConstants.ADD_TILE,[G.title,k]);b.resolve(f);}).fail(function(){m.showLocalizedError("fail_to_add_tile_msg");f={group:G,status:0,action:"add"};b.resolve(f);});return b.promise();},deleteCatalogTileFromGroup:function(D){var t=this;var s=decodeURIComponent(D.tileId);var G=D.groupIndex;var o=this.oModel.getProperty("/groups/"+G);var a=new q.Deferred();var b=[];var R=[];var p,f;["tiles","links"].forEach(function(A){o[A].forEach(function(h){var i=t.oLaunchPageService.getCatalogTileId(h.object);if(i===s){p=new q.Deferred();f=t.oLaunchPageService.removeTile(o.object,h.object);f.done((function(j){return function(){R.push(h.uuid);j.resolve({status:true});};})(p));f.fail((function(j){return function(){j.resolve({status:false});};})(p));b.push(p);}});});q.when.apply(q,b).done(function(h){var S=b.length===R.length;t.oHomepageManager.deleteTilesFromGroup(o.groupId,R);t.updateTilesAssociation();a.resolve({group:o,status:S,action:"remove"});});return a.promise();},calculateCatalogTileIndex:function(a,n,t){var b=parseInt(a*100000,10);b+=(n!==undefined?n:0)+t;return b;},notifyOnActionFailure:function(s,p){m.showLocalizedError(s,p);},resetAssociationOnFailure:function(s,p){this.notifyOnActionFailure(s,p);this.updateTilesAssociation();},_getIsIntentSupported:function(o){return!!(this.oLaunchPageService.isTileIntentSupported(o));},_getIsAppBox:function(o){var a,i;if(!sap.ushell.Container){return false;}a=this.oModel.getProperty("/appFinderDisplayMode");if(a==="tiles"){i=false;}else{i=!!(this.oLaunchPageService.getCatalogTileTargetURL(o)&&(this.oLaunchPageService.getCatalogTilePreviewTitle(o)||this.oLaunchPageService.getCatalogTilePreviewSubtitle(o)));}return i;},destroy:function(){this.unregisterEvents();}});return c;});
sap.ui.predefine('sap/ushell/components/ComponentKeysHandler',["sap/ushell/Config","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ui/events/KeyCodes","sap/ui/thirdparty/jquery","sap/base/Log","sap/ushell/renderers/fiori2/AccessKeysHandler"],function(C,A,K,q,L,a){"use strict";var b=function(){};b.prototype={keyCodes:K,tileFocusCustomData:new A({key:"tabindex",value:"0",writeToDom:true}),goToTileContainer:function(){if(this.oModel.getProperty("/tileActionModeActive")){this.goToFirstVisibleTileContainer();}else{this.goToLastVisitedTile();}},goToFirstVisibleTileContainer:function(){var j=q("#dashboardGroups").find(".sapUshellTileContainer").filter(":visible"),t=this.oModel.getProperty("/topGroupInViewPortIndex");if(j.length){var d=q(j.get(t));if(d.length){this._setTileContainerSelectiveFocus(d);}}},goToLastVisitedTile:function(j,l){var d,e,f=q(".sapUshellTile, .sapMGTLineMode, .sapFCard");if(l){var g=q("#dashboardGroups").find(".sapUshellTileContainer").filter(":visible"),t=this.oModel.getProperty("/topGroupInViewPortIndex");var h=j||q(g.get(t));var i=h.find(".sapUshellTile, .sapMGTLineMode, .sapFCard");d=i.filter(":visible").eq(0);e=i.filter("[tabindex=0]:visible").eq(0);if(!d.length){d=f.filter(":visible").eq(0);}}else{d=f.filter(":visible").eq(0);e=f.filter("[tabindex=0]:visible").eq(0);}if(e.length){this.moveScrollDashboard(e);}else if(d.length){d.attr("tabindex","0");this.moveScrollDashboard(d);}else{a.sendFocusBackToShell();}},_goToFirstTileOfNextGroup:function(d,e){this._preventDefault(e);var i=this._getGroupAndTilesInfo();if(i){var n=this._getNextGroup(d,i.oGroup,false,true);if(n){this._goToTileOfGroup("first",n);}}},_goToTileOfGroup:function(p,g){if(g){var d=g.getTiles();if(this.oModel.getProperty("/tileActionModeActive")){d.push(g.oPlusTile);}d=d.concat(g.getLinks());p=p==="first"?0:p;p=p==="last"?d.length-1:p;var t=d[p];if(t&&t.getDomRef()){var j=q(t.getDomRef());if(j.length===1){this.moveScrollDashboard(j);return true;}}}return false;},_moveTile:function(d){var i=this._getGroupAndTilesInfo(),D=this._getNextTile(d,true,i);if(D){var o=D.getParent();if(C.last("/core/home/gridContainer")&&o.getParent().getId()!=="dashboardGroups"){o=o.getParent();}var s=D.getMode?D.getMode():"ContentMode",e=i.oCurTile.getMode?i.oCurTile.getMode():"ContentMode",f=s==="LineMode"?o.getLinks():o.getTiles(),n=0;if(i.oGroup===o){n=f.indexOf(D);if(e==="LineMode"&&s==="ContentMode"&&d==="left"){n=f.length;}}else if(d==="left"||d==="up"){n=f.length;}var E,g,t=this;if(e===s){var h=q(".sapUshellDashboardView").control(0);E="movetile";g={sTileId:h.getController()._getTileUuid(i.oCurTile),toGroupId:o.getGroupId?o.getGroupId():o.groupId,toIndex:n,sToItems:e==="LineMode"?"links":"tiles",sFromItems:e==="LineMode"?"links":"tiles",sTileType:e==="LineMode"?"link":"tile"};if(s==="LineMode"){g.callBack=function(){setTimeout(function(){f=s==="LineMode"?o.getLinks():o.getTiles();t.moveScrollDashboard(f[n].$());},10);};}else{setTimeout(function(){f=s==="LineMode"?o.getLinks():o.getTiles();t.moveScrollDashboard(f[n].$());},10);}}else{E="convertTile";g={toGroupId:o.getGroupId?o.getGroupId():o.groupId,srcGroupId:i.oGroup.getGroupId?i.oGroup.getGroupId():i.oGroup.groupId,toIndex:n,callBack:function(){setTimeout(function(){f=s==="LineMode"?o.getLinks():o.getTiles();t.moveScrollDashboard(f[n].$());},10);},tile:i.oCurTile,longDrop:false};}sap.ui.getCore().getEventBus().publish("launchpad",E,g);}},callbackSetFocus:function(t){var d=this;setTimeout(function(){if(t.oParent&&t.oParent instanceof sap.ushell.ui.launchpad.Tile){d.moveScrollDashboard(q(t.oParent.getDomRef()));}else{d.moveScrollDashboard(t.$());}});},_getTileCenter:function(d,t,T){if(!(T instanceof HTMLElement)){var j=T.$().find(".sapMGTLineStyleHelper");if(T.isLink&&j&&j.length>1){if(d==="down"){return t.right;}return t.left;}}return t.right-((t.right-t.left)/2);},_getTileRect:function(d,t){if(t instanceof HTMLElement){return t.getBoundingClientRect();}var j=t.$().find(".sapMGTLineStyleHelper");if(t.isLink&&j&&j.length){if(d==="down"){return j.get(j.length-1).getBoundingClientRect();}return j.get(0).getBoundingClientRect();}if(t.getDomRef()){return t.getDomRef().getBoundingClientRect();}},_findClosestTile:function(d,t,o){var e=this._getTileRect(d,o),n=this._getTileCenter(d,e,o);var f,g=Infinity,h=d==="down"?1:-1,i=t.indexOf(o)+h,j;for(;;i+=h){var T=t[i];if(!T){return f;}if(!f){if(d==="down"&&i===t.length-1){return T;}if(d==="up"&&i===0){return T;}}var k=this._getTileRect(d,T);if(!k){return f;}if(d==="down"&&e.bottom+5>=k.bottom){continue;}if(d==="up"&&e.top-5<=k.top){continue;}if(f&&j!==k.top){return f;}j=k.top;var l=Math.min(Math.abs(k.left-n),Math.abs(k.right-n));if(g>l){g=l;f=T;}else{return f;}}},_getNextTile:function(d,m,g){var i=g||this._getGroupAndTilesInfo(),l=true;var n;var N;var G;var e;if(!i||(m&&i.oGroup.getProperty("isGroupLocked"))){return null;}if(m){var t=i.oCurTile.getBindingContext().getObject().object;l=sap.ushell.Container.getService("LaunchPage").isLinkPersonalizationSupported(t);}if(d==="right"||d==="left"){var f=i.oCurTile.isLink?i.aLinks:i.aTiles,h=f.indexOf(i.oCurTile),j=d==="right"?h+1:h-1;if(f[j]&&f[j].getDomRef()){if(m&&f[j]===i.oGroup.oPlusTile){}else{return f[j];}}if(d==="right"&&!i.oCurTile.isLink&&i.aLinks.length&&l){return i.aLinks[0];}if(d==="left"&&i.oCurTile.isLink&&i.aTiles.length){return i.oGroup.getShowPlaceholder()?i.oGroup.oPlusTile:i.aTiles[i.aTiles.length-1];}}var o=this._getNextGroup(d,i.oGroup,m,l);if(o){n=o.getTiles();N=o.getLinks();if(d==="right"){if(n.length===0&&N.length===0){return o.oPlusTile;}else if(n.length===0){return N[0];}return n[0];}if(d==="left"){if(n.length===0&&N.length===0){return o.oPlusTile;}else if(N.length===0){return n[n.length-1];}return N[N.length-1];}}if(d==="down"||d==="up"){G=l?i.aTiles.concat(i.aLinks):i.aTiles;e=[];if(o){var k=o.getTiles(),p=o.getLinks();e=l?k.concat(p):k;if(e.length===0){e.push(o.oPlusTile);}}var J=(d==="down")?G.concat(e):e.concat(G);return this._findClosestTile(d,J,i.oCurTile);}},_getNextGroup:function(d,o,m,l){var n,g=o.getParent().getGroups(),e=g.indexOf(o),f=e;if(d==="down"||d==="right"){n=1;}else{n=-1;}f+=n;while(g[f]){var N=g[f],h=N.getTiles(),i=N.getLinks();var j=l?h.concat(i):h;var I=N.getVisible()&&!(N.getIsGroupLocked()&&m)&&!(N.getIsGroupLocked()&&j.length===0)&&!(j.length===0&&!(m||this.oModel.getProperty("/tileActionModeActive")));if(I){return N;}f+=n;}},_getGroupAndTilesInfo:function(){var j=this._getFocusOnTile(q(document.activeElement));if(!j||!j.length){return null;}var o=j.control(0);o.isLink=j.hasClass("sapUshellLinkTile")||j.hasClass("sapMGTLineMode");var g=j.closest(".sapUshellTileContainer").control(0);if(!g){return null;}var t=g.getTiles();if(g.getShowPlaceholder()){t.push(g.oPlusTile);}return{oCurTile:o,oGroup:g,aTiles:t,aLinks:g.getLinks()};},_goToSiblingElementInTileContainer:function(d,j){var e=j.closest(".sapUshellTileContainer"),f,g,h;f=j.closest(".sapUshellTileContainerBeforeContent");if(f.length){if(d==="up"||d==="left"){this._goToNextTileContainer(f,d);}else{h=e.find(".sapUshellTileContainerHeader").eq(0);this._setTabIndexOnTileContainerHeader(h);h.focus();}return;}f=j.closest(".sapUshellTileContainerHeader");if(f.length){if(d==="up"){this._setTabIndexOnTileContainerHeader(h);if(!this._goToTileContainerBeforeContent(e)){this._goToNextTileContainer(f,d);}}else if(d==="down"){g=e.find(".sapUshellTile, .sapUshellLinkTile, .sapFCard").eq(0);if(g.length){this.moveScrollDashboard(g);}else{this._goToNextTileContainer(f,d);}}else if(d==="left"){if(j.hasClass("sapUshellTileContainerHeader")){if(!this._goToTileContainerBeforeContent(e)){this._goToNextTileContainer(f,"left");}}else{h=j.closest(".sapUshellTileContainerHeader");h.focus();}}else if(d==="right"){var i=j.hasClass("sapMInputBaseInner");if(!i){g=e.find(".sapUshellTile, .sapUshellLinkTile, .sapFCard").eq(0);if(g.length){this.moveScrollDashboard(g);}else{this._goToNextTileContainer(f,"down");}}}return;}f=this._getFocusOnTile(j);if(f){this._goFromFocusedTile(d,f,true);return;}f=j.closest(".sapUshellTileContainerAfterContent");if(f.length){if(d==="up"||d==="left"){this._goToTileOfGroup("first",f.control(0));}else{this._goToNextTileContainer(f,d);}}},_goToNextTileContainer:function(j,d){var e=j.closest(".sapUshellTileContainer");if(e.length===1){var f=q(".sapUshellTileContainer").filter(":visible"),n=(d==="down")?1:-1,g=q(f[f.index(e)+n]);if(g.length===1){var h=g.find(".sapUshellTileContainerHeader");if(d==="down"){if(!this._goToTileContainerBeforeContent(g)){this._setTabIndexOnTileContainerHeader(h);this._setTileContainerSelectiveFocus(g);}}else if(!this._goToTileContainerAfterContent(g)){if(d==="up"||d==="left"){var s=d==="up"?"first":"last";if(!this._goToTileOfGroup(s,g.control(0))){this._setTabIndexOnTileContainerHeader(h);h.focus();}}}}}},_goToTileContainerBeforeContent:function(j){var d=j.hasClass("sapUshellTileContainer")?j:j.closest(".sapUshellTileContainer"),e=d.find(".sapUshellTileContainerBeforeContent button").filter(":visible");if(e.length){e.focus();return true;}return false;},_goToTileContainerAfterContent:function(j){var d=j.hasClass("sapUshellTileContainer")?j:j.closest(".sapUshellTileContainer"),e=d.find(".sapUshellTileContainerAfterContent button").filter(":visible");if(e.length){e.focus();return true;}return false;},_goFromFocusedTile:function(d,$,i){var n=this._getNextTile(d);if(n){var N=n.$(),e=$.closest(".sapUshellTileContainer"),f=N.closest(".sapUshellTileContainer");if(i&&(e.get(0).id!==f.get(0).id)){if(d==="down"||d==="right"){if(!this._goToTileContainerAfterContent(e)){this._setTabIndexOnTileContainerHeader(f.find(".sapUshellTileContainerHeader"));this._setTileContainerSelectiveFocus(f);}}else if(d==="up"||d==="left"){var g=e.find(".sapUshellTileContainerHeader");this._setTabIndexOnTileContainerHeader(g);g.focus();}}else{this.moveScrollDashboard(N);}}},_setTabIndexOnTileContainerHeader:function(j){q(".sapUshellTileContainerHeader").attr("tabindex",-1);q(".sapUshellTileContainerHeader .sapUshellContainerTitle").attr("tabindex",-1);q(".sapUshellTileContainerHeader .sapUshellContainerHeaderActions button").attr("tabindex",-1);if(j){var d=j.find(".sapUshellContainerTitle").eq(0),e=j.find(".sapUshellContainerHeaderActions").eq(0);j.attr("tabindex",0);d.attr("tabindex",0);e.find("button").attr("tabindex",0);}},_setTileContainerSelectiveFocus:function(j){var d=q("#dashboardGroups").find(".sapUshellTileContainer").filter(":visible"),e=j.find(".sapUshellTileContainerBeforeContent button"),f=j.find(".sapUshellTileContainerHeader").eq(0),B=e.length&&e.is(":visible");if(B){e.focus();}else if(j.get(0)===d.get(0)){this.goToLastVisitedTile();}else if(f.length){this._setTabIndexOnTileContainerHeader(f);f.focus();}},setTileFocus:function(j){if(!j.hasClass("sapUshellPlusTile")){if(j.parents("#catalogView").length>0){this.setFocusOnCatalogTile(j.find("[tabindex]").eq(0));}}var d=q(".sapUshellTile, .sapMGTLineMode, .sapUshellLinkTile, .sapMGT, .sapFCard").filter("[tabindex=0]").get();for(var i=0;i<d.length;i++){d[i].setAttribute("tabindex","-1");}if(j.length>0){j.attr("tabindex",0);if(j.prop("tagName")==="DIV"&&q(j).hasClass("sapUshellLinkTile")&&j.getMode===undefined){j=j.find("a").length?j.find("a")[0]:j;}j.focus();if(j[0]&&j[0].id){var t=sap.ui.getCore().byId(j[0].id);var e=this.tileFocusCustomData.getParent&&this.tileFocusCustomData.getParent();if(e){e.removeAggregation("customData",this.tileFocusCustomData,true);}if(t&&sap.ui.getCore().byId(t.getId())&&this.tileFocusCustomData&&sap.ui.getCore().byId(this.tileFocusCustomData.getId())){t.addAggregation("customData",this.tileFocusCustomData,true);}}}},setFocusOnCatalogTile:function(j){var p=q(".sapUshellTile[tabindex=0]"),d,v;if(p.length){q(".sapUshellTileContainerContent [tabindex=0]").get().forEach(function(h){q(h).attr("tabindex",-1);});d=p.find("[tabindex], a").andSelf().filter("[tabindex], a");d.attr("tabindex",-1);}if(!j){v=q(".sapUshellTile, .sapUshellAppBox").filter(":visible");if(v.length){j=q(v[0]);}else{return;}}j.attr("tabindex",0);j.find("button").attr("tabindex",0);j.focus();},moveScrollDashboard:function(t){if(!t.length){return;}var f=t[0].parentElement.firstChild;var d=document.getElementById("dashboardGroups");var y=f.getBoundingClientRect().top-d.getBoundingClientRect().top;document.getElementById("sapUshellDashboardPage-cont").scrollTop=y;this.setTileFocus(t);},_moveGroupFromDashboard:function(d,j){var e,t=q(".sapUshellDashboardGroupsContainerItem"),i,f;e=j.closest(".sapUshellDashboardGroupsContainerItem");i=t.index(e);f=d==="up"||d==="left"?i-1:i+1;this._moveGroup(i,f);},_moveGroup:function(f,t){if(t<0||t>=q(".sapUshellDashboardGroupsContainerItem").length||t<q(".sapUshellDisableDragAndDrop").length){return;}sap.ui.getCore().getEventBus().publish("launchpad","moveGroup",{fromIndex:f,toIndex:t});var d=this;setTimeout(function(){var e=q(".sapUshellTileContainerHeader")[t];d._setTabIndexOnTileContainerHeader(q(e));q(e).focus();},100);},_getFocusOnTile:function(j){var d;[".sapUshellTile",".sapUshellLinkTile",".sapFCard"].forEach(function(s){var e=j.closest(s);if(e.length){d=e;}});return d;},_renameGroup:function(j){if(j.closest(".sapUshellTileContainerHeader").length===1){j=j[0].tagName==="H2"?j:j.find("h2");j.click();}},_arrowsButtonsHandler:function(d,e,j){this._preventDefault(e);if(j.hasClass("sapUshellAnchorItem")){this._handleAnchorNavigationItemsArrowKeys(d,j);return;}var f=this._getFocusOnTile(j),i=this.oModel.getProperty("/tileActionModeActive");if(e.ctrlKey===true&&this.oModel.getProperty("/personalization")){var g=j.closest(".sapUshellTileContainerHeader");if(f){this._moveTile(d,f);}else if(g.length){var h=g.closest(".sapUshellTileContainerContent");if(!h.hasClass("sapUshellTileContainerDefault")||!h.hasClass("sapUshellTileContainerLocked")){this._moveGroupFromDashboard(d,g);}}}else if(i){this._goToSiblingElementInTileContainer(d,j);}else if(f){this._goFromFocusedTile(d,f,i);}else{this.goToLastVisitedTile();}},_handleAnchorNavigationItemsArrowKeys:function(d,j){var e=q(".sapUshellAnchorItem").filter(":visible"),n=e.index(j),N=j;if(d==="left"||d==="up"){if(n>0){N=e.get(n-1);}}else if(d==="right"||d==="down"){if(n<e.length-1){N=e.get(n+1);}}this._setAnchorItemFocus(q(N));},_setAnchorItemFocus:function(j){q(".sapUshellAnchorItem").get().forEach(function(h){q(h).attr("tabindex",-1);});j.attr("tabindex",0);j.focus();},_appFinderHomeEndButtonsHandler:function(d,e,j){var v=q(".sapUshellTile, .sapUshellAppBox").filter(":visible"),f;if(v.length){if(d==="home"){f=q(v.get(0));}if(d==="end"){f=q(v.get(v.length-1));}}if(f){this._preventDefault(e);this._appFinderFocusAppBox(j,f);}},_homeEndButtonsHandler:function(s,e,j){if(j.hasClass("sapUshellAnchorItem")){this._preventDefault(e);this._setAnchorItemFocus(q(".sapUshellAnchorItem").filter(":visible:"+s));}else if(e.ctrlKey===true){this._preventDefault(e);var d=q(".sapUshellTile, .sapFCard").filter(":visible")[s]();this.moveScrollDashboard(d);}else{var f=j.closest(".sapUshellTileContainer");if(f){var g=f.control(0);if(g){this._preventDefault(e);this._goToTileOfGroup(s,g);}}}},_deleteButtonHandler:function(j){if(this.oModel.getProperty("/personalization")&&this.oModel.getProperty("/tileActionModeActive")){var d=this._getFocusOnTile(j);if(d&&!d.hasClass("sapUshellLockedTile")&&!d.hasClass("sapUshellPlusTile")){var i=this._getGroupAndTilesInfo();if(i){var D=q(".sapUshellDashboardView").control(0),t=D.getController()._getTileUuid(i.oCurTile),e=this;setTimeout(function(){if(i.oCurTile.getDomRef()){e.moveScrollDashboard(i.oCurTile.$());}else{e.moveScrollDashboard(i.oGroup.oPlusTile.$());}},100);sap.ui.getCore().getEventBus().publish("launchpad","deleteTile",{tileId:t},this);}}}},_ctrlPlusArrowKeyButtonsHandler:function(d){var j=q(document.activeElement),e=j.closest(".sapUshellTileContainerHeader");if(this._getFocusOnTile(j)){this._moveTile(d);}else if(e.length){var f=e.closest(".sapUshellTileContainerContent");if(!f.hasClass("sapUshellTileContainerDefault")||!f.hasClass("sapUshellTileContainerLocked")){this._moveGroupFromDashboard(d,e);}}},_spaceButtonHandler:function(e,j){var d=this._getFocusOnTile(j);if(!d||!d.length){j.click();return;}e.preventDefault();if(d.hasClass("sapFCard")){d.control(0).getCardHeader().firePress();return;}var f=j.find("[role=button]");if(f.length){var B=f.control(0);if(B){B.firePress();return;}}d.control(0).firePress();},goToSelectedAnchorNavigationItem:function(){this._setAnchorItemFocus(q(".sapUshellAnchorItemSelected"));return q(document.activeElement).hasClass("sapUshellAnchorItemSelected");},handleFocusOnMe:function(e,f){var r=sap.ushell.Container.getRenderer("fiori2"),h=c;if(r){var s=r.getCurrentCoreView();if(s==="home"&&!C.last("/core/spaces/enabled")){var t=document.activeElement?document.activeElement.tagName:"";if(t==="INPUT"||t==="TEXTAREA"){if(e.keyCode===h.keyCodes.ENTER){var H=q(document.activeElement).closest(".sapUshellTileContainerHeader");if(H.length){setTimeout(function(){H=q("#"+H[0].id);h._setTabIndexOnTileContainerHeader(H);H.focus();},10);}}}else{h._dashboardKeydownHandler(e);}}if(s==="appFinder"){if(f){if(e.shiftKey){h.setFocusOnCatalogTile();}else{var o=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");if(o&&o.getVisible()){o.focus();}else{h.appFinderFocusMenuButtons(e);}}}else{h._appFinderKeydownHandler(e);}}}},_groupHeaderNavigation:function(j){var d;if(j.hasClass("sapUshellTileContainerHeader")){d=j.find(".sapUshellContainerTitle");d.focus();}else if(j.closest(".sapUshellTileContainerHeader")){d=j.closest(".sapUshellTileContainerHeader");d.focus();}},_appFinderFocusAppBox:function(j,d){if(j&&d){j.attr("tabindex","-1").find(".sapUshellPinButton").attr("tabindex","-1");d.attr("tabindex","0").focus();d.find(".sapUshellPinButton").attr("tabindex","0");}},_preventDefault:function(e){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();},_getNextCatalog:function(d,j){var e;if(d==="down"||d==="right"){e=j.next();}else if(d==="up"||d==="left"){e=j.prev();}else{L.error("Direction is unkown",d,"sap.ushell.components.ComponentKeysHandler");return null;}if(e.length>0){var n=e.find("li.sapUshellAppBox, li.sapUshellTile").get().length;if(n>0){return e;}return this._getNextCatalog(d,e);}},_getNextCatalogItem:function(d,j,p){var e=q(j.parents()[2]),f=e.find("li.sapUshellAppBox, li.sapUshellTile").get();if(d==="right"||d==="left"){var n=f.indexOf(j.get(0)),g=d==="right"?n+1:n-1;if(f[g]){return f[g];}}var h=this._getNextCatalog(d,e),N=h?h.find("li.sapUshellAppBox, li.sapUshellTile").get():[];if(N.length>0&&d==="right"){return N[0];}if(N.length>0&&d==="left"){return N[N.length-1];}if(d==="down"||d==="up"){if(N.length>0&&p){return N[0];}var J=(d==="down")?f.concat(N):N.concat(f);return this._findClosestTile(d,J,j.get(0));}},_appFinderKeysHandler:function(d,e,j,p){if(j.is(".sapUshellAppBox, .sapUshellTile")){this._preventDefault(e);var f=q(this._getNextCatalogItem(d,j,p));if(f){this._appFinderFocusAppBox(j,f);}}},appFinderFocusMenuButtons:function(e){var d=q("#catalog-button, #userMenu-button, #sapMenu-button").filter("[tabindex=0]");if(d.length){d.eq(0).focus();this._preventDefault(e);return true;}return false;},_appFinderKeydownHandler:function(e){var j=q(document.activeElement);if(e.srcElement.id!=="appFinderSearch-I"){var p=e.keyCode,i=sap.ui.getCore().getConfiguration().getRTL();if(i&&p===this.keyCodes.ARROW_RIGHT){p=this.keyCodes.ARROW_LEFT;}else if(i&&p===this.keyCodes.ARROW_LEFT){p=this.keyCodes.ARROW_RIGHT;}switch(p){case this.keyCodes.ARROW_UP:this._appFinderKeysHandler("up",e,j);break;case this.keyCodes.ARROW_DOWN:this._appFinderKeysHandler("down",e,j);break;case this.keyCodes.ARROW_RIGHT:this._appFinderKeysHandler("right",e,j);break;case this.keyCodes.ARROW_LEFT:this._appFinderKeysHandler("left",e,j);break;case this.keyCodes.PAGE_UP:this._appFinderKeysHandler("up",e,j,true);break;case this.keyCodes.PAGE_DOWN:this._appFinderKeysHandler("down",e,j,true);break;case this.keyCodes.HOME:this._appFinderHomeEndButtonsHandler("home",e,j);break;case this.keyCodes.END:this._appFinderHomeEndButtonsHandler("end",e,j);break;case this.keyCodes.SPACE:this._spaceButtonHandler(e,j);break;default:return;}}},_dashboardKeydownHandler:function(e){var t=document.activeElement&&document.activeElement.tagName;if(t==="INPUT"||t==="TEXTAREA"){return;}var p=e.keyCode,i=sap.ui.getCore().getConfiguration().getRTL(),j=q(document.activeElement);if(i){if(p===this.keyCodes.ARROW_RIGHT){p=this.keyCodes.ARROW_LEFT;}else if(p===this.keyCodes.ARROW_LEFT){p=this.keyCodes.ARROW_RIGHT;}}switch(p){case this.keyCodes.F2:this._renameGroup(j);break;case this.keyCodes.F7:this._groupHeaderNavigation(j);break;case this.keyCodes.DELETE:case this.keyCodes.BACKSPACE:this._deleteButtonHandler(j);break;case this.keyCodes.ARROW_UP:this._arrowsButtonsHandler("up",e,j);break;case this.keyCodes.ARROW_DOWN:this._arrowsButtonsHandler("down",e,j);break;case this.keyCodes.ARROW_RIGHT:this._arrowsButtonsHandler("right",e,j);break;case this.keyCodes.ARROW_LEFT:this._arrowsButtonsHandler("left",e,j);break;case this.keyCodes.PAGE_UP:this._goToFirstTileOfNextGroup("up",e);break;case this.keyCodes.PAGE_DOWN:this._goToFirstTileOfNextGroup("down",e);break;case this.keyCodes.HOME:this._homeEndButtonsHandler("first",e,j);break;case this.keyCodes.END:this._homeEndButtonsHandler("last",e,j);break;case this.keyCodes.SPACE:this._spaceButtonHandler(e,j);break;case this.keyCodes.ENTER:this._spaceButtonHandler(e,j);break;default:break;}return true;},init:function(m){this.oModel=m;}};var c=new b();return c;},true);
sap.ui.predefine('sap/ushell/components/HeaderManager',["sap/ushell/Config","sap/ushell/EventHub","sap/ushell/utils","sap/ushell/utils/clone","sap/ushell/components/StateHelper","sap/ushell/components/_HeaderManager/PropertyStrategiesFactory","sap/base/util/ObjectPath","sap/ui/Device"],function(C,E,u,c,S,g,O,D){"use strict";var h={application:{},centralAreaElement:null,headEndItems:[],headItems:[],headerVisible:true,showLogo:false,ShellAppTitleState:undefined,rootIntent:"",title:""};var H;var a;var o="endItemsOverflowBtn";var s;var B={"blank":{},"blank-home":{},"home":{"headItems":[]},"app":{"headItems":["backBtn","homeBtn"]},"minimal":{"headItems":["homeBtn"]},"standalone":{"headItems":["backBtn"]},"embedded":{"headItems":["backBtn","homeBtn"]},"embedded-home":{"headItems":[]},"headerless":{"headItems":["backBtn","homeBtn"],"headerVisible":false},"merged":{"headItems":["backBtn","homeBtn"]},"headerless-home":{"headerVisible":false},"merged-home":{},"lean":{"headItems":[]},"lean-home":{}};var d=[];function i(I,J){var K=I&&I.appState?I.appState:"home";H=w(I);a=J;s=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD).name;v();_();p(K);q();}function b(){e();}function _(){var I=E.on("setHeaderCentralAreaElement").do(function(P){m({propertyName:"centralAreaElement",value:P.id,aStates:S.getPassStates(P.states),bCurrentState:!!P.currentState,bDoNotPropagate:!!P.bDoNotPropagate});});d.push(I);d.push(E.on("updateHeaderOverflowState").do(f));D.media.attachHandler(f,this,D.media.RANGESETS.SAP_STANDARD);d.push(C.on("/core/shellHeader/headEndItems").do(j));}function e(){if(d){d.forEach(function(I){I.off();});}D.media.detachHandler(f,this,D.media.RANGESETS.SAP_STANDARD);}function f(P){if(P&&P.name){s=P.name;}v();j();}function v(I){var J=C.last("/core/shell/model/currentState/stateName"),K=J==="merged"||J==="headerless",L=C.last("/core/shell/model/currentViewPortState")==="LeftCenter",M=true;if((I||s)==="Phone"&&!L||K){M=false;}m({propertyName:"showLogo",value:M,aStates:["home","app","blank","blank-home","minimal","lean"],bCurrentState:false,bDoNotPropagate:true});}function j(P){var I=C.last("/core/shellHeader/headEndItems"),J=I.indexOf(o)>-1,K=P&&P.name||s,L;if(K==="Phone"&&!J&&I.length>2){k([o],false,["home","app"]);}else if(K!=="Phone"&&J){L=sap.ui.getCore().byId("headEndItemsOverflow");if(L){L.destroy();}r([o],false,["home","app"]);}}function k(I,J,K,L){m({propertyName:"headEndItems",value:I,aStates:K,bCurrentState:!!J,bDoNotPropagate:!!L});}function r(I,J,K){m({propertyName:"headEndItems",value:I,aStates:K,bCurrentState:!!J,action:"remove",bDoNotPropagate:false});}function l(I,J){var K={};Object.keys(I).forEach(function(L){var M=I[L];K[L]=Object.keys(M).reduce(function(T,N){T[N]=M[N];return T;},c(J));});return K;}function m(P){var I=P.propertyName,J=!P.bCurrentState?S.getAllStateToUpdate(P.aStates,P.bDoNotPropagate):[],K=C.last("/core/shellHeader"),L=C.last("/core/shell/model/currentState/stateName"),M=P.value,N;if(I.charAt(0)==="/"){I=I.substring(1);}N=g(I,P.action);if(!N){return;}if(!P.bCurrentState){H=x(H,I,N,J,M);}if(J.indexOf(L)>-1||P.bCurrentState){var Q=O.get(I.split("/"),K),R=N.execute(Q,M);if(Q!==R){O.set(I.split("/"),R,K);z(I,K);}}if(P.bCurrentState){y(I,N,M);}}function n(I){var J;for(J in I){if(I.hasOwnProperty(J)){u.updateProperties(H[J],I[J]);}}}function p(N){var I=H[N];if(!I){throw new Error("the state ("+N+") does not exist");}C.emit("/core/shellHeader",c(I));}function q(I){var J=C.last("/core/shellHeader"),K,L;if(a&&a.customShellState){K=a.customShellState.currentState;}if(I&&a.extendedShellStates[I]){L=a.extendedShellStates[I].customState.currentState;}C.emit("/core/shellHeader",t(J,K,L));}function t(I,J,K){var R={};Object.keys(I).forEach(function(P){var L=g(P),M;if(!L){R[P]=c(I[P]);return;}M=c(I[P]);if(K){M=L.execute(M,K[P]);}if(J){M=L.execute(M,J[P]);}R[P]=M;});R.ShellAppTitleState=C.last("/core/shellHeader/ShellAppTitleState");return R;}function w(I){if(I){h.rootIntent="#"+I.rootIntent;}var J=l(B,h);function K(M,J){var N,P;for(N in J){if(N==="blank"||N==="blank-home"){continue;}if((M==="openCatalogBtn")&&(N==="lean"||N==="lean-home")){continue;}if(M==="ContactSupportBtn"||M==="EndUserFeedbackBtn"){if(["home","app","minimal","standalone","embedded","embedded-home","lean"].indexOf(N)===-1){continue;}}P=J[N].headEndItems.indexOf(M);if(P===-1){J[N].headEndItems.push(M);}}}function L(T,J){var M;for(M in J){J[M].title=T;}}if(I){if(I.moveContactSupportActionToShellHeader){K("ContactSupportBtn",J);}if(I.moveGiveFeedbackActionToShellHeader){K("EndUserFeedbackBtn",J);}if(I.moveAppFinderActionToShellHeader){K("openCatalogBtn",J);}if(I.title){L(I.title,J);}}return J;}function x(I,P,J,K,L){if(K.length===0){return I;}var N=c(I);K.forEach(function(M){var Q=N[M],R;if(Q){R=J.execute(O.get(P.split("/"),Q),L);O.set(P.split("/"),R,Q);}});return N;}function y(P,I,J){var K,N;if(!a){return;}K=a.customShellState.currentState;N=I.execute(O.get(P.split("/"),K),J);O.set(P.split("/"),N,K);}function z(P,I){var R=P.split("/").shift();C.emit("/core/shellHeader/"+R,I[R]);}function A(I){var J;try{J=H[I];}catch(K){J=undefined;}return J;}function F(I,P){var J;try{J=A(I)[P];}catch(K){J=undefined;}return J;}function G(T){H=T;}return{init:i,destroy:b,switchState:p,updateStates:m,recalculateState:q,extendStates:n,validateShowLogo:v,handleEndItemsOverflow:j,_resetBaseStates:G,_generateBaseHeaderState:l,_createInitialState:w,_getBaseState:A,_getBaseStateMember:F};});
sap.ui.predefine('sap/ushell/components/HomepageManager',["sap/ui/thirdparty/jquery","sap/ui/base/Object","sap/ui/Device","sap/ui/model/Filter","sap/ushell/ui/launchpad/TileState","sap/ushell/components/_HomepageManager/PagingManager","sap/ushell/components/_HomepageManager/DashboardLoadingManager","sap/ushell/EventHub","sap/ushell/Config","sap/ushell/utils","sap/ushell/resources","sap/ushell/components/DestroyHelper","sap/ushell/components/GroupsHelper","sap/ushell/components/MessagingHelper","sap/m/GenericTile","sap/m/SelectDialog","sap/m/StandardListItem","sap/ushell/components/_HomepageManager/PersistentPageOperationAdapter","sap/ushell/components/_HomepageManager/TransientPageOperationAdapter","sap/ui/model/FilterOperator","sap/m/library","sap/ui/model/Context","sap/m/MessageToast","sap/base/Log","sap/ui/performance/Measurement"],function(Q,B,D,F,T,P,a,e,s,u,r,d,g,m,G,S,b,c,f,h,l,C,M,L,n){"use strict";var o=l.GenericTileScope;var p={PERSONALIZATION:"FLP: Personalization",RENAME_GROUP:"FLP: Rename Group",MOVE_GROUP:"FLP: Move Group",DELETE_GROUP:"FLP: Delete Group",RESET_GROUP:"FLP: Reset Group",DELETE_TILE:"FLP: Delete Tile",ADD_TILE:"FLP: Add Tile",MOVE_TILE:"FLP: Move Tile"};var t=[];return B.extend("sap.ushell.components.HomepageManager",{metadata:{publicMethods:["getModel","getDashboardView","loadPersonalizedGroups","resetGroupsOnFailure","addGroupToModel","addTileToGroup","deleteTilesFromGroup"]},analyticsConstants:p,constructor:function(i,j){if(sap.ushell.components.getHomepageManager){var H=sap.ushell.components.getHomepageManager();if(!H.view){H.setDashboardView(j.view);}return H;}sap.ui.getCore().attachThemeChanged(u.handleTilesVisibility);sap.ushell.components.getHomepageManager=(function(v){return function(){return v;};}(this));this.oPageOperationAdapter=c.getInstance();this.oPageBuilderService=sap.ushell.Container.getService("LaunchPage");this.oModel=j.model;this.oRouter=j.router;this.oDashboardView=j.view;this.oSortableDeferred=new Q.Deferred();this.oSortableDeferred.resolve();this.registerEvents();this.tileViewUpdateQueue=[];this.tileViewUpdateTimeoutID=0;this.tileUuid=null;this.bIsGroupsModelLoading=false;this.segmentsStore=[];this.bIsFirstSegment=true;this.bIsFirstSegmentViewLoaded=false;this.aGroupsFrame=null;this.iMinNumOfTilesForBlindLoading=this.oModel.getProperty("/optimizeTileLoadingThreshold")||100;this.bIsScrollModeAccordingKPI=false;this.oGroupNotLockedFilter=new F("isGroupLocked",h.EQ,false);this.bLinkPersonalizationSupported=this.oPageOperationAdapter.isLinkPersonalizationSupported();this.oDashboardLoadingManager=new a("loadingManager",{oDashboardManager:this});if(this.oRouter){var k=this.oRouter.getTarget("home");k.attachDisplay(function(q){this.oDashboardView=q.getParameter("view");}.bind(this));}var E=s.last("/core/home/enableTransientMode");t.push(s.on("/core/home/enableTransientMode").do(function(N){if(E===N){return;}E=N;this._changeMode(N);}.bind(this)));this.oModel.bindProperty("/tileActionModeActive").attachChange(this._changeLinksScope.bind(this));this._aRequestQueue=[];this._bRequestRunning=false;return undefined;},_addRequest:function(R){this._aRequestQueue.push(R);if(!this._bRequestRunning){this._bRequestRunning=true;this._aRequestQueue.shift()();}},_checkRequestQueue:function(){if(this._aRequestQueue.length===0){this._bRequestRunning=false;}else{this._aRequestQueue.shift()();}},_requestFailed:function(){this._aRequestQueue=[];this._bRequestRunning=false;},isBlindLoading:function(){var i=s.last("/core/home/homePageGroupDisplay");if((i===undefined||i==="scroll")&&this.bIsScrollModeAccordingKPI){L.info("isBlindLoading reason IsScrollModeAccordingKPI and IsScrollMode: true");return true;}if(this.oModel.getProperty("/tileActionModeActive")){L.info("isBlindLoading reason TileActionModeActive : true");return true;}return false;},createMoveActionDialog:function(i){var j=this.oGroupNotLockedFilter,k=new S(i,{title:r.i18n.getText("moveTileDialog_title"),rememberSelections:false,search:function(E){var v=E.getParameter("value"),q=new F("title",h.Contains,v),w=E.getSource().getBinding("items");w.filter([q,j]);},contentWidth:"400px",contentHeight:"auto",confirm:function(E){var q=E.getParameter("selectedContexts");this.publishMoveActionEvents(q,i);}.bind(this),cancel:function(){var q=Q(".sapUshellTile[tabindex=\"0\"]")[0];if(q){q.focus();}},items:{path:"/groups",filters:[j],template:new b({title:"{title}"})}});return k;},publishMoveActionEvents:function(i,j){var E=sap.ui.getCore().getEventBus();if(i.length){var k=this.tileType==="link"?"links":"tiles",q=i[0].getObject().groupId,v={sTileId:this.tileUuid,sToItems:k,sFromItems:k,sTileType:k,toGroupId:i[0].getObject().groupId,toIndex:i[0].getObject()[this.tileType==="link"?"links":"tiles"].length,source:j};if(D.system.desktop){v.callBack=sap.ushell.components.ComponentKeysHandler.callbackSetFocus.bind(sap.ushell.components.ComponentKeysHandler);}E.publish("launchpad","scrollToGroup",{groupId:q});E.publish("launchpad","movetile",v);}},_changeLinksScope:function(E){var i=this;if(this.bLinkPersonalizationSupported){var I=E.getSource().getValue();this.oModel.getProperty("/groups").forEach(function(j,k){if(!j.isGroupLocked){i._changeGroupLinksScope(j,I?"Actions":"Display");}});}},_changeGroupLinksScope:function(i,j){var k=this;i.links.forEach(function(q,v){k._changeLinkScope(q.content[0],j);});},_changeLinkScope:function(i,j){var k;if(i.getScope){k=i;}else if(i.getContent){k=i.getContent()[0];}if(this.bLinkPersonalizationSupported&&k&&k.setScope){k.setScope(j);}},registerEvents:function(){var E=sap.ui.getCore().getEventBus();E.subscribe("launchpad","addBookmarkTile",this._createBookmark,this);E.subscribe("launchpad","tabSelected",this.getSegmentTabContentViews,this);E.subscribe("sap.ushell.services.Bookmark","bookmarkTileAdded",this._addBookmarkToModel,this);E.subscribe("sap.ushell.services.Bookmark","catalogTileAdded",this._refreshGroupInModel,this);E.subscribe("sap.ushell.services.Bookmark","bookmarkTileDeleted",this.loadPersonalizedGroups,this);E.subscribe("launchpad","loadDashboardGroups",this.loadPersonalizedGroups,this);E.subscribe("launchpad","createGroupAt",this._createGroupAt,this);E.subscribe("launchpad","deleteGroup",this._deleteGroup,this);E.subscribe("launchpad","resetGroup",this._resetGroup,this);E.subscribe("launchpad","changeGroupTitle",this._changeGroupTitle,this);E.subscribe("launchpad","moveGroup",this._moveGroup,this);E.subscribe("launchpad","deleteTile",this._deleteTile,this);E.subscribe("launchpad","movetile",this._moveTile,this);E.subscribe("launchpad","sortableStart",this._sortableStart,this);E.subscribe("launchpad","sortableStop",this._sortableStop,this);E.subscribe("launchpad","dashboardModelContentLoaded",this._modelLoaded,this);E.subscribe("launchpad","convertTile",this._convertTile,this);this.oPageBuilderService.registerTileActionsProvider(this._addFLPActionsToTile.bind(this));},_changeMode:function(i){var j=this.getModel().getProperty("/groups");if(i){this.oPageOperationAdapter=f.getInstance();var k=this.oPageOperationAdapter.transformGroupModel(j);this.getModel().setProperty("/groups",k);}else{this.oPageOperationAdapter=c.getInstance();d.destroyFLPAggregationModels(j);this.getModel().setProperty("/groups",[]);this.loadPersonalizedGroups();}},_addFLPActionsToTile:function(i){var A=[];if(s.last("/core/shell/enablePersonalization")){var j=this.bLinkPersonalizationSupported&&this.oPageOperationAdapter.isLinkPersonalizationSupported(i);A.push(this._getMoveTileAction(i));if(j){A.push(this._getConvertTileAction(i));}}return A;},_getConvertTileAction:function(i){var E=sap.ui.getCore().getEventBus(),j=this,k=j.oPageOperationAdapter.getTileType(i);return{text:k==="link"?r.i18n.getText("ConvertToTile"):r.i18n.getText("ConvertToLink"),press:function(q){var v={tile:q};if(D.system.desktop){v.callBack=sap.ushell.components.ComponentKeysHandler.callbackSetFocus.bind(sap.ushell.components.ComponentKeysHandler);}E.publish("launchpad","convertTile",v);}};},_getMoveTileAction:function(i){var j=this;return{text:r.i18n.getText("moveTileDialog_action"),press:function(){j.tileType=j.oPageOperationAdapter.getTileType(i);j.tileUuid=j.getModelTileById(j.oPageOperationAdapter.getTileId(i),j.tileType==="link"?"links":"tiles").uuid;var k=j.tileType==="tile"?j.moveTileDialog:j.moveLinkDialog;if(j.tileType==="tile"||j.tileType==="link"){if(!k){k=j.createMoveActionDialog("move"+j.tileType+"Dialog");k.setModel(j.oModel);if(j.tileType==="tile"){j.moveTileDialog=k;}else{j.moveLinkDialog=k;}}else{k.getBinding("items").filter([j.oGroupNotLockedFilter]);}k.open();}}};},_handleTileAppearanceAnimation:function(j){if(!j){return;}var k=["webkit",""];function q(v,w){for(var i=0;i<k.length;i++){w=w.toLowerCase();j.attachBrowserEvent(k[i]+w,function(E){if(E.originalEvent&&E.originalEvent.animationName==="sapUshellTileEntranceAnimation"){j.removeStyleClass("sapUshellTileEntrance");}},false);}}q(j,"AnimationEnd");j.addStyleClass("sapUshellTileEntrance");},destroy:function(){var E=sap.ui.getCore().getEventBus();E.unsubscribe("launchpad","addBookmarkTile",this._createBookmark,this);E.unsubscribe("launchpad","loadDashboardGroups",this.loadPersonalizedGroups,this);E.unsubscribe("launchpad","createGroupAt",this._createGroupAt,this);E.unsubscribe("launchpad","deleteGroup",this._deleteGroup,this);E.unsubscribe("launchpad","resetGroup",this._resetGroup,this);E.unsubscribe("launchpad","changeGroupTitle",this._changeGroupTitle,this);E.unsubscribe("launchpad","moveGroup",this._moveGroup,this);E.unsubscribe("launchpad","deleteTile",this._deleteTile,this);E.unsubscribe("launchpad","movetile",this._moveTile,this);E.unsubscribe("launchpad","sortableStart",this._sortableStart,this);E.unsubscribe("launchpad","sortableStop",this._sortableStop,this);E.unsubscribe("launchpad","dashboardModelContentLoaded",this._modelLoaded,this);sap.ui.getCore().detachThemeChanged(u.handleTilesVisibility);t.forEach(function(i){i.off();});c.destroy();f.destroy();sap.ushell.components.getHomepageManager=undefined;B.prototype.destroy.apply(this,arguments);},_sortableStart:function(){this.oSortableDeferred=new Q.Deferred();},_createBookmark:function(i,E,j){var k=j.group?j.group.object:"";delete j.group;function q(){sap.ushell.Container.getServiceAsync("Bookmark").then(function(v){v.addBookmark(j,k).always(this._checkRequestQueue.bind(this)).done(function(){m.showLocalizedMessage("tile_created_msg");}).fail(function(w){L.error("Failed to add bookmark",w,"sap.ushell.ui.footerbar.AddBookmarkButton");m.showLocalizedError("fail_to_add_tile_msg");});}.bind(this));}this._addRequest(q.bind(this));},_addBookmarkToModel:function(i,E,j){var k=j.tile,q,v=j.group,w,x,y,N,I;if(!j||!k){this.bIsGroupsModelDirty=true;if(!this.bGroupsModelLoadingInProcess){this._handleBookmarkModelUpdate();}return;}if(!v){q=this.getModel().getProperty("/groups");for(I=0;I<q.length;I++){if(q[I].isDefaultGroup===true){v=q[I].object;break;}}}x=this._getIndexOfGroupByObject(v);y=this.oModel.getProperty("/groups/"+x);w=this.oPageOperationAdapter.getPreparedTileModel(k,y.isGroupLocked);this.getTileView(w);y.tiles.push(w);y.visibilityModes=u.calcVisibilityModes(y,true);N=y.tiles.length;this._updateModelWithTileView(x,N);this.oModel.setProperty("/groups/"+x,y);},_refreshGroupInModel:function(i,E,j){var k=this;this.oPageOperationAdapter.refreshGroup(j).then(function(q){if(!q){return;}var v=k._getIndexOfGroupByObject(q.object);q.visibilityModes=u.calcVisibilityModes(q.object,true);k.oModel.setProperty("/groups/"+v,q);if(q.tiles){q.tiles.forEach(function(w){k.getTileView(w);});}});},_sortableStop:function(){this.oSortableDeferred.resolve();},_handleAfterSortable:function(i){return function(){var j=Array.prototype.slice.call(arguments);this.oSortableDeferred.done(function(){i.apply(null,j);});}.bind(this);},_createGroupAt:function(j,E,k){var q=parseInt(k.location,10),v=this.oModel.getProperty("/groups"),w=this.oPageOperationAdapter.getPreparedGroupModel(null,false,q===v.length,k),x=this.oModel,i;w.index=q;v.splice(q,0,w);for(i=0;i<v.length-1;i++){v[i].isLastGroup=false;}for(i=q+1;i<v.length;i++){v[i].index++;}x.setProperty("/groups",v);},_getIndexOfGroupByObject:function(i){var j=this.oModel.getProperty("/groups");return this.oPageOperationAdapter.getIndexOfGroup(j,i);},getTileActions:function(i){return this.oPageOperationAdapter.getTileActions(i);},addTileToGroup:function(i,j){var k=i+"/tiles",q=this.oModel.getProperty(i),N=this.oModel.getProperty(k).length;var v=this.oModel.getProperty(i+"/isGroupLocked"),w=this.oModel.getProperty("/personalization");q.tiles[N]=this.oPageOperationAdapter.getPreparedTileModel(j,v);this.getTileView(q.tiles[N]);q.visibilityModes=u.calcVisibilityModes(q,w);this._updateModelWithTileView(q.index,N);this.oModel.setProperty(i,q);},addTilesToGroupByCatalogTileId:function(j,k){var q=j.getBindingContext();for(var i=0;i<k.length;i++){this.addTileToGroupByCatalogTileId(q.sPath,k[i]);}},addTileToGroupByCatalogTileId:function(i,j){var N,k,q;if(!s.last("/core/home/enableTransientMode")){return;}q=this.oPageOperationAdapter.getTileModelByCatalogTileId(j);if(!q){return;}this.oDashboardLoadingManager.setTileResolved(q);N=this.oModel.getProperty(i+"/tiles").length;k=this.oModel.getProperty(i);k.tiles[N]=q;this.oModel.setProperty(i,k);},_getPathOfTile:function(i){var j=this.oModel.getProperty("/groups"),k=null,q=null,v,E=function(w,x){if(x.uuid===i){q=w;return false;}return undefined;};Q.each(j,function(w,x){Q.each(x.tiles,E);if(q!==null){k=w;v="tiles";return false;}Q.each(x.links,E);if(q!==null){k=w;v="links";return false;}return undefined;});return k!==null?"/groups/"+k+"/"+v+"/"+q:null;},_moveInArray:function(A,i,j){if(j>=A.length){var k=j-A.length;while((k--)+1){A.push(undefined);}}A.splice(j,0,A.splice(i,1)[0]);},_updateGroupIndices:function(A){var k;for(k=0;k<A.length;k++){A[k].index=k;}},_deleteGroup:function(i,E,j){var k=this,q=this.oModel,v=j.groupId,w=q.getProperty("/groups"),x=g.getIndexOfGroup(w,v),I=w.length-1===x,y=null,z,A;z=I?x-1:x;d.destroyFLPAggregationModel(q.getProperty("/groups/"+x));y=w.splice(x,1)[0];if(I){q.setProperty("/groups/"+z+"/isLastGroup",I);}q.setProperty("/groups",w);this._updateGroupIndices(w);if(z>=0){A=sap.ui.getCore().getEventBus();window.setTimeout(Q.proxy(A.publish,A,"launchpad","scrollToGroup",{groupId:q.getProperty("/groups")[z].groupId}),200);}function H(){k.oPageOperationAdapter.deleteGroup(y).then(function(){m.showLocalizedMessage("group_deleted_msg",[y.title]);k._checkRequestQueue.call(k);},function(){k._resetGroupsOnFailure("fail_to_delete_group_msg");});}this._addRequest(H);},_resetGroup:function(i,E,j){var k=this,q=j.groupId,v=this.oModel,w=v.getProperty("/groups"),x=g.getIndexOfGroup(w,q),y=k.oModel.getProperty("/groups/indexOfDefaultGroup")===x,z=v.getProperty("/groups/"+x),A,H;v.setProperty("/groups/"+x+"/sortable",false);function I(){k.oPageOperationAdapter.resetGroup(z,y).then(function(R){k._handleAfterSortable(function(q,O,J){var w=k.oModel.getProperty("/groups"),x=g.getIndexOfGroup(w,q);k._loadGroup(x,J||O);m.showLocalizedMessage("group_reset_msg",[O.title]);k.oModel.setProperty("/groups/"+x+"/sortable",true);A=sap.ui.getCore().byId("dashboardGroups").getGroupControlByGroupId(q);H=A.getBindingContext().getObject().links;if(H&&H.length&&!A.getIsGroupLocked()){k._changeGroupLinksScope(A.getBindingContext().getObject(),k.oModel.getProperty("/tileActionModeActive")?o.Actions:o.Display);}if(A){A.rerender();e.emit("updateGroups",Date.now());u.handleTilesVisibility();}})(q,z,R);k._checkRequestQueue.call(k);},function(){k._resetGroupsOnFailure("fail_to_reset_group_msg");});}this._addRequest(I);},_moveGroup:function(j,E,k){if(isNaN(k.fromIndex)){return;}var q=k.fromIndex,v=k.toIndex,w=this.oModel,x=w.getProperty("/groups"),A=w.getProperty("/tileActionModeActive"),y,z,H=this,i,I;if(!A){q=this._adjustFromGroupIndex(q,x);}y=x[q];z=y.groupId;if(!A){v=this._adjustToGroupIndex(v,x,z);}I=x[v];this._moveInArray(x,q,v);this._updateGroupIndices(x);for(i=0;i<x.length-1;i++){x[i].isLastGroup=false;}x[x.length-1].isLastGroup=true;w.setProperty("/groups",x);function J(){x=w.getProperty("/groups");var y=w.getProperty(g.getModelPathOfGroup(x,z));if(!y.object){return;}H.oPageOperationAdapter.getOriginalGroupIndex(I,x).then(function(K){var N={iFromIndex:q,iToIndex:v};return H.oPageOperationAdapter.moveGroup(y,K,N);}).then(H._checkRequestQueue.bind(H),function(){H._resetGroupsOnFailure("fail_to_move_group_msg");});}this._addRequest(J);},_adjustToGroupIndex:function(j,k,q){var v=0,I=false,i=0;for(i=0;i<k.length&&v<j;i++){if(k[i].isGroupVisible){if(k[i].groupId===q){I=true;}else{v++;}}}if(I){return i-1;}return i;},_adjustFromGroupIndex:function(j,k){var v=0,i;for(i=0;i<k.length;i++){if(k[i].isGroupVisible){v++;}if(v===j+1){return i;}}return j;},_changeGroupTitle:function(i,E,j){var k=this,N=j.newTitle,q=this.oModel.getProperty("/groups"),v=j.groupId,w=g.getIndexOfGroup(q,v),x=k.oModel.getProperty("/groups/indexOfDefaultGroup")===w,y=this.oModel.getProperty("/groups/"+w),O=y.title;this.oModel.setProperty("/groups/"+w+"/title",N);function z(){var H;if(y.isLastGroup){H=k.oPageOperationAdapter.addGroupAt(y,undefined,x);}else{var I=k.oModel.getProperty("/groups")[w+1];H=k.oPageOperationAdapter.getOriginalGroupIndex(I,q).then(function(J){return k.oPageOperationAdapter.addGroupAt(y,J,x);});}H.then(function(J){k._handleAfterSortable(function(K,R){var U=k.oModel.getProperty("/groups");var V=g.getIndexOfGroup(U,K);var W=U[V];Object.keys(R).forEach(function(X){if(X==="tiles"||X==="links"){return;}W[X]=R[X];});k.oModel.refresh();k._checkRequestQueue.call(k);})(v,J);},function(){k._resetGroupsOnFailure("fail_to_create_group_msg");});}function A(){this.oPageOperationAdapter.renameGroup(y,N,O).then(function(){k._checkRequestQueue.call(k);},function(){k._resetGroupsOnFailure("fail_to_rename_group_msg");});}if(!y.object){this._checkRequestQueue.call(this);this._addRequest(z.bind(this));}else{this._addRequest(A.bind(this));}},addGroupToModel:function(i){var j=this.oPageOperationAdapter.getPreparedGroupModel(i,false,true,{isRendered:true}),k=this.oModel.getProperty("/groups"),q=k.length,v;if(q>0){k[q-1].isLastGroup=false;}j.index=q;k.push(j);this.oModel.setProperty("/groups/",k);v=new C(this.oModel,"/groups/"+q);return v;},_deleteTile:function(i,E,j){var k=this,q=j.tileId,v=this.oModel.getProperty("/groups"),I=j.items||"tiles";Q.each(v,function(w,x){var y=false;Q.each(x[I],function(z,A){if(A.uuid!==q){return true;}d.destroyTileModel(k.oModel.getProperty("/groups/"+w+"/"+I+"/"+z));var H=x[I].splice(z,1)[0],J=k.oModel.getProperty("/personalization");x.visibilityModes=u.calcVisibilityModes(x,J);k.oModel.setProperty("/groups/"+w,x);function K(){k.oPageOperationAdapter.removeTile(x,H).then(function(){k._checkRequestQueue.call(k);},function(){k._resetGroupsOnFailure("fail_to_remove_tile_msg");});}k._addRequest.call(k,K);u.handleTilesVisibility();y=true;return false;});return!y;});},deleteTilesFromGroup:function(i,R){var j=this.oModel.getProperty("/groups"),k=g.getIndexOfGroup(j,i),q=this.oModel.getProperty("/groups/"+k),v=[];["tiles","links"].forEach(function(A){v=q[A].filter(function(w){if(R.indexOf(w.uuid)<0){return true;}return false;});q[A]=v;});q.visibilityModes=u.calcVisibilityModes(q,true);this.oModel.setProperty("/groups/"+k,q);},_getGroupIndex:function(i){var j=this.oModel.getProperty("/groups"),k=this._getNewGroupInfo(j,i);if(k){return k.newGroupIndex;}return undefined;},_convertTile:function(i,E,j){var k=j.tile?j.tile:j,q=j.srcGroupId?this._getGroupIndex(j.srcGroupId):undefined,v=j.srcGroupId?this.oModel.getProperty("/groups/"+q):k.getParent().getBindingContext().getObject(),w=k.getBindingContext().sPath.split("/"),x=k.getBindingContext().getObject(),O=w[w.length-2],y=x.uuid,z=parseInt(w[w.length-1],10),A=j.toIndex!==undefined?j.toIndex:undefined,H=this.oModel.getProperty("/tileActionModeActive"),I=j.toGroupId?this._getGroupIndex(j.toGroupId):v.index,J=j.toGroupId?this.oModel.getProperty("/groups/"+I):v,K=this;var N=this._getIndexForConvert(O,z,A,v,J),R={"tileIndex":z,"groupIndex":q,"group":v};function U(){x.tileIsBeingMoved=true;var V=this.oPageOperationAdapter.moveTile(x,N,v,J,O==="links"?"tile":"link");V.then(function(W){K._showMoveTileMessage(x,v,J);K._handleAfterSortable(function(y,W){var X=K._getPathOfTile(y),Y=W.content;if(X){if(O==="tiles"){K._attachLinkPressHandlers(Y);K._addDraggableAttribute(Y);K._changeLinkScope(Y,H?"Actions":"Display");}var Z={"tileIndex":A,"groupIndex":I,"group":J},$={"tile":x,"view":Y,"type":O,"tileObj":W.object};x.tileIsBeingMoved=true;K.replaceTileViewAfterConvert(R,Z,$);e.emit("updateGroups",Date.now());u.handleTilesVisibility();if(j.callBack){j.callBack(Y);}}})(y,W);K._checkRequestQueue.call(K);},function(){K._handleAfterSortable(K._resetGroupsOnFailure.bind(K))("fail_to_move_tile_msg");});}this._addRequest(U.bind(this));},replaceTileViewAfterConvert:function(i,j,k){var q=k.tile,v=q.content;q.tileIsBeingMoved=false;q.content=[k.view];q.object=k.tileObj;q.originalTileId=this.oPageOperationAdapter.getTileId(k.tileObj);i.group[k.type].splice(i.tileIndex,1);if(j.tileIndex!==undefined){j.group[k.type==="tiles"?"links":"tiles"].splice(j.tileIndex,0,q);}else{j.group[k.type==="tiles"?"links":"tiles"].push(q);}this.oModel.setProperty("/groups/"+j.groupIndex,j.group);this.oModel.setProperty("/groups/"+i.groupIndex,i.group);if(k.type==="links"){this._handleTileAppearanceAnimation(q.content[0].getParent());}else{this._handleTileAppearanceAnimation(q.content[0]);}if(v&&v[0]){v[0].destroy();}},_getIndexForConvert:function(i,j,k,q,v){var w;if(i==="tiles"){if(k!==undefined){w=v[i].length+k;}else{w=v[i].length+v.links.length;}if(q.groupId===v.groupId){w--;}}else{w=k||q.tiles.length;j+=q.tiles.length;}return{"tileIndex":j,"newTileIndex":w};},_getIndexForMove:function(i,j,k,q,v){var w;if(i==="tiles"){w=k!==undefined?k:q[i].length;}else{if(k!==undefined){w=q.tiles.length+k;}else{w=q.tiles.length+q.links.length;}j+=v.tiles.length;}return{"tileIndex":j,"newTileIndex":w};},_getTileInfo:function(i,j,I){var k;Q.each(i,function(q,v){var w=false;Q.each(v[I],function(x,y){if(y.uuid===j){k={"oTile":y,"tileIndex":x,"oGroup":v,"groupIndex":q};w=true;return false;}return undefined;});return!w;});return k;},_getNewGroupInfo:function(i,N){var j;Q.each(i,function(k,q){if(q.groupId===N){j={"oNewGroup":q,"newGroupIndex":k};}});return j;},_moveTile:function(i,E,j){var k=j.toIndex,N=j.toGroupId,q=j.sTileId,v=j.source,w=j.sTileType==="tiles"||j.sTileType==="tile"?"tile":"link",x=j.sToItems,y=j.sFromItems,A=this.oModel.getProperty("/tileActionModeActive"),z=this.oModel.getProperty("/groups"),H,I,J,K,O,R={},U=this;K=this._getTileInfo(z,q,y);O=this._getNewGroupInfo(z,N);if(K.oGroup.groupId===O.oNewGroup.groupId&&(v==="movetileDialog"||k===null||v==="movelinkDialog")){if(j.callBack&&K.oTile&&K.oTile.content&&K.oTile.content.length){j.callBack(K.oTile.content[0]);}return;}if(w==="link"){K.oTile.content[0].addStyleClass("sapUshellZeroOpacity");}if(w==="tile"&&x==="tiles"){if(k&&k>O.oNewGroup[x].length){k=O.oNewGroup[x].length;}}if(K.oGroup.groupId===N&&x===y){if(k===null||k===undefined){K.oGroup[x].splice(K.tileIndex,1);k=K.oGroup[x].length;K.oGroup[x].push(K.oTile);}else{k=this._adjustTileIndex(k,K.oTile,K.oGroup,x);this._moveInArray(K.oGroup[x],K.tileIndex,k);}this.oModel.setProperty("/groups/"+K.groupIndex+"/"+x,K.oGroup[x]);}else{J=this.oModel.getProperty("/personalization");K.oGroup[y].splice(K.tileIndex,1);K.oGroup.visibilityModes=u.calcVisibilityModes(K.oGroup,J);this.oModel.setProperty("/groups/"+K.groupIndex+"/"+y,K.oGroup[y]);if(k===null||k===undefined){k=O.oNewGroup[x].length;O.oNewGroup[x].push(K.oTile);}else{k=this._adjustTileIndex(k,K.oTile,O.oNewGroup,x);O.oNewGroup[x].splice(k,0,K.oTile);}O.oNewGroup.visibilityModes=u.calcVisibilityModes(O.oNewGroup,J);this.oModel.setProperty("/groups/"+O.newGroupIndex+"/"+x,O.oNewGroup[x]);}e.emit("updateGroups",Date.now());u.handleTilesVisibility();function V(){H=this.oModel.getProperty("/groups/"+K.groupIndex);I=this.oModel.getProperty("/groups/"+O.newGroupIndex);R=this._getIndexForMove(y,K.tileIndex,k,O.oNewGroup,H);K.oTile.tileIsBeingMoved=true;this.oPageOperationAdapter.moveTile(K.oTile,R,H,I,w).then(function(W){var X=U._getPathOfTile(q);U._showMoveTileMessage(K.oTile,H,I);if(X){U.oModel.setProperty(X+"/object",W.object);U.oModel.setProperty(X+"/originalTileId",W.originalTileId);var Y=U.oModel.getProperty(X+"/content"),Z=W.content;if(x==="links"){U._changeLinkScope(Z,A?"Actions":"Display");U._attachLinkPressHandlers(Z);U._addDraggableAttribute(Z);U._handleTileAppearanceAnimation(Z);K.oTile.content=[Z];U.oModel.setProperty(X,Q.extend({},K.oTile));U.oModel.setProperty("/groups/"+O.newGroupIndex+"/"+x,U.oModel.getProperty("/groups/"+O.newGroupIndex+"/"+x));}else{U.oModel.setProperty(X+"/content",[Z]);}if(Y&&Y[0]){var $=Z.onAfterRendering;Z.onAfterRendering=function(){$.apply(this);Y[0].destroy();Z.onAfterRendering=$;};}U.oModel.setProperty(X+"/tileIsBeingMoved",false);if(j.callBack){j.callBack(Z);}}U._checkRequestQueue.call(U);},function(){U._resetGroupsOnFailure("fail_to_move_tile_msg");});}this._addRequest(V.bind(this));},_showMoveTileMessage:function(i,j,k){var q=this.oPageOperationAdapter.getTileTitle(i),v=k.title,w=r.i18n.getText("added_tile_to_group"),x=q+" "+w+" "+v;if(j.groupId!==k.groupId){M.show(x);}},_adjustTileIndex:function(j,k,q,I){var v=0,w=false,i=0;for(i=0;i<q[I].length&&v<j;i++){if(q[I][i].isTileIntentSupported){if(q[I][i]===k){w=true;}else{v++;}}}if(w){return i-1;}return i;},getModel:function(){return this.oModel;},getDashboardView:function(){return this.oDashboardView;},setDashboardView:function(i){this.oDashboardView=i;return this;},setTileVisible:function(i,v){this.oPageOperationAdapter.setTileVisible(i.object,v);},refreshTile:function(i){this.oPageOperationAdapter.refreshTile(i.object);},updateSettings:function(i){this.oModel=i.model||this.oModel;this.oConfig=i.config||this.oConfig;this.oRouter=i.router||this.oRouter;this.oDashboardView=i.view||this.oDashboardView;},_resetGroupsOnFailure:function(i,j){this._requestFailed();m.showLocalizedError(i,j);this.bStartLoadRemainSegment=false;this.loadPersonalizedGroups();this.oModel.updateBindings(true);},resetGroupsOnFailure:function(){this._resetGroupsOnFailure.apply(this,arguments);},_bindSegment:function(i,j){var k,q,v,w;for(k=0;k<j.length;k++){v=j[k];w=v.index;q=i[w];if(q){q.isRendered=true;q.tiles=q.tiles.concat(v.tiles);q.links=q.links.concat(v.links);}}return i;},createGroupsModelFrame:function(i,j){var k,q=[],O,v;v=function(w){var x=Q.extend({},w);x.tiles=[];x.pendingLinks=[];x.links=[];return x;};for(k=0;k<i.length;k++){O=i[k];q[k]=v(O);q[k].isRendered=false;q[k].visibilityModes=u.calcVisibilityModes(O,j);}return q;},_splitGroups:function(i,j){var k,q=[],v=0,I=this.oModel.getProperty("/homePageGroupDisplay")==="tabs",w=0,x;var y=500;for(k=0;k<i.length;k++){x=i[k];q.push(x);if(!this.segmentsStore.length){v+=this.PagingManager.getGroupHeight(x,j===k);}else{w+=x.tiles.length+x.links.length;}if(I&&!this.segmentsStore.length&&v>0){q.loadTilesView=true;this.segmentsStore.push(q);q=[];v=0;}if(v>=1||w>=y){this.segmentsStore.push(q);q=[];v=0;w=0;}}if(q.length){this.segmentsStore.push(q);}},_processSegment:function(i){var j=this.segmentsStore.shift();if(!j){return i;}if(this.isBlindLoading()===false){if(this.oModel.getProperty("/homePageGroupDisplay")!=="tabs"||j.loadTilesView){this.getSegmentContentViews(j);}}i=this._bindSegment(i,j);return i;},getSegmentContentViews:function(i){var j,k,q,v;for(j=0;j<i.length;j++){q=i[j];for(k=0;k<q.tiles.length;k++){v=q.tiles[k];if(v.isTileIntentSupported){this.getTileView(v);}}for(k=0;k<q.links.length;k++){v=q.links[k];if(v.isTileIntentSupported){this.getTileView(v,q.index);}}}this.bIsFirstSegmentViewLoaded=true;},getSegmentTabContentViews:function(i,E,j){var k,q,v=j.iSelectedGroup,w;w=this.oModel.getProperty("/groups/"+v);for(k=0;k<w.tiles.length;k++){q=w.tiles[k];if(q.isTileIntentSupported){this.getTileView(q);}}for(k=0;k<w.links.length;k++){q=w.links[k];if(q.isTileIntentSupported){this.getTileView(q,v);}}},_handleBookmarkModelUpdate:function(){this.bIsGroupsModelDirty=false;this.bGroupsModelLoadingInProcess=true;this.loadPersonalizedGroups();},_modelLoaded:function(){this.bGroupsModelLoadingInProcess=false;if(this.bIsGroupsModelDirty){this._handleBookmarkModelUpdate();}},handleFirstSegmentLoaded:function(){var i=this.oModel.getProperty("/groups");if(this.aGroupsFrame){Array.prototype.push.apply(i,this.aGroupsFrame);this.aGroupsFrame=null;}this._initializeAnchorNavigationBar();if(!this.bStartLoadRemainSegment){this._processRemainingSegments();}},_initializeAnchorNavigationBar:function(){var A,i=sap.ushell.components.getHomepageManager().getDashboardView();A=i.getAnchorItemTemplate();this.oDashboardView.oAnchorNavigationBar.bindAggregation("groups",{path:"/groups",template:A});},_processRemainingSegments:function(){var U;if(this.segmentsStore.length>0){window.setTimeout(function(){U=this._processSegment(this.oModel.getProperty("/groups"));this.oModel.setProperty("/groups",U);this.bIsFirstSegment=false;this._processRemainingSegments();}.bind(this),0);}else{this.bIsGroupsModelLoading=false;this._updateModelWithTileView(0,0);u.handleTilesVisibility();sap.ui.getCore().getEventBus().publish("launchpad","dashboardModelContentLoaded");e.emit("updateGroups",Date.now());}},_setGroupModel:function(j){if(this.bIsGroupsModelLoading){L.info("Skip set the group model, because the group model is still loading");return;}var i=0,k,q=0,v=0,w=0,x,y,z=null,A,E,H=[];this.bIsGroupsModelLoading=true;try{q=this.oModel.getProperty("/groups").length;}catch(I){}for(i=j.length;i<q;++i){d.destroyFLPAggregationModel(this.oModel.getProperty("/groups/"+i));}if(!this.PagingManager){var J=Q("#dashboardGroups").width();if(!J){J=window.innerWidth;}var K=Q("#sapUshellDashboardPage-cont").height();if(K<100){K=window.innerHeight;}this.PagingManager=new P("dashboardPaging",{supportedElements:{tile:{className:"sapUshellTile"},link:{className:"sapUshellLinkTile"}},containerHeight:K,containerWidth:J});}j.forEach(function(N){if(N.isGroupVisible){v+=N.tiles.length;}});this.bIsScrollModeAccordingKPI=v>this.iMinNumOfTilesForBlindLoading;this.aGroupsFrame=this.createGroupsModelFrame(j,this.oModel.getProperty("/personalization"));for(i=0;i<this.aGroupsFrame.length;i++){if(this.aGroupsFrame[i].isGroupVisible&&this.aGroupsFrame[i].visibilityModes[0]){if(z===null){z=i;this.aGroupsFrame[i].isGroupSelected=true;this.oModel.setProperty("/iSelectedGroup",i);}w++;if(w>1){this.aGroupsFrame[z].showGroupHeader=false;break;}}}this._splitGroups(j,z);y=this.segmentsStore[0]?this.segmentsStore[0].length:0;x=this.aGroupsFrame.splice(0,y);n.start("FLP:DashboardManager._processSegment","_processSegment","FLP");H=this._processSegment(x);j.every(function(N,O){if(N.isDefaultGroup){k=O;return false;}return true;});H.indexOfDefaultGroup=k;if(this.oModel.getProperty("/homePageGroupDisplay")==="tabs"){A=this.getDashboardView();if(A){E=A.oDashboardGroupsBox;E.getBinding("groups").filter([A.oFilterSelectedGroup]);}}n.end("FLP:DashboardManager._processSegment");this.oModel.setProperty("/groups",H);this.aGroupModel=H;if(this.oDashboardView){e.once("firstSegmentCompleteLoaded").do(function(){u.setPerformanceMark("FLP-TTI-Homepage",{bUseUniqueMark:true});}).do(this.handleFirstSegmentLoaded.bind(this));}else{setTimeout(function(){Array.prototype.push.apply(this.aGroupModel,this.aGroupsFrame);this.aGroupsFrame=null;this.bStartLoadRemainSegment=true;this._processRemainingSegments();}.bind(this),0);}if(this.bIsFirstSegmentViewLoaded){e.emit("firstSegmentCompleteLoaded",true);}n.end("FLP:DashboardManager.loadGroupsFromArray");},getPreparedGroupModel:function(){return this.aGroupModel;},_loadGroup:function(i,N){var j=this,k="/groups/"+i,O=j.oModel.getProperty(k),I=O.isLastGroup,q=O.groupId;d.destroyFLPAggregationModel(O);if(q){N.groupId=q;}N.isLastGroup=I;N.index=i;N.isRendered=true;this.oModel.setProperty(k,N);},_hasPendingLinks:function(j){for(var i=0;i<j.length;i++){if(j[i].content[0]===undefined){return true;}}return false;},_addModelToTileViewUpdateQueue:function(i,j){this.tileViewUpdateQueue.push({uuid:i,view:j});},_updateModelWithTileView:function(i,j){var k=this;if(this.tileViewUpdateTimeoutID){clearTimeout(this.tileViewUpdateTimeoutID);}this.tileViewUpdateTimeoutID=window.setTimeout(function(){k.tileViewUpdateTimeoutID=undefined;k.oSortableDeferred.done(function(){k._updateModelWithTilesViews(i,j);});},50);},_updateGroupModelWithTilesViews:function(i,k,v,w){var x,U,y,z,A=k||0;for(var j=A;j<i.length;j=j+1){x=i[j];for(var q=0;q<this.tileViewUpdateQueue.length;q++){U=this.tileViewUpdateQueue[q];if(x.uuid===U.uuid){v.push(q);if(U.view){if(w){x.content=[U.view];}else{x.content[0].destroy();x.content=[U.view];}this.oDashboardLoadingManager.setTileResolved(x);y=this.oPageOperationAdapter.getTileSize(x.object);z=((y!==null)&&(y==="1x2"))||false;if(x.long!==z){x.long=z;}}else{x.content[0].setState("Failed");}break;}}}},_updateModelWithTilesViews:function(j,k){var q=this.oModel.getProperty("/groups"),v=j||0,w=[];if(!q||this.tileViewUpdateQueue.length===0){return;}for(var i=v;i<q.length;i=i+1){this._updateGroupModelWithTilesViews(q[i].tiles,k,w);if(q[i].links){this._updateGroupModelWithTilesViews(q[i].links,k,w,true);if(q[i].pendingLinks.length>0){if(!q[i].links){q[i].links=[];}q[i].links=q[i].links.concat(q[i].pendingLinks);q[i].pendingLinks=[];}}}var x=[],y;for(y=0;y<this.tileViewUpdateQueue.length;y++){if(w.indexOf(y)===-1){x.push(this.tileViewUpdateQueue[y]);}}this.tileViewUpdateQueue=x;this.oModel.setProperty("/groups",q);},getModelTileById:function(i,I){var j=this.oModel.getProperty("/groups"),k,q=false;j.every(function(v){v[I].every(function(w){if(w.uuid===i||w.originalTileId===i){k=w;q=true;}return!q;});return!q;});return k;},_addDraggableAttribute:function(v){if(this.isIeHtml5DnD()){v.addEventDelegate({onAfterRendering:function(){this.$().attr("draggable","true");}.bind(v)});}},_attachLinkPressHandlers:function(v){var E=sap.ui.getCore().getEventBus(),i=v.attachPress?v:v.getContent()[0];i.attachPress(function(j){var k=v.getBindingContext().getObject().tileIsBeingMoved;if(!k&&this.getScope&&this.getScope()==="Actions"){switch(j.getParameters().action){case"Press":var q=v.getState?v.getState():"";if(q!=="Failed"){sap.ushell.components.homepage.ActionMode._openActionsMenu(j,v);}break;case"Remove":var w=v.getBindingContext().getObject().uuid;E.publish("launchpad","deleteTile",{tileId:w,items:"links"});break;default:break;}}else{E.publish("launchpad","dashboardTileLinkClick");}});},handleDisplayModeChange:function(N){this.oModel.setProperty("/homePageGroupDisplay",N);switch(N){case"scroll":this._handleDisplayModeChangeToScroll();break;case"tabs":this._handleDisplayModeChangeToTabs();break;}},_handleDisplayModeChangeToTabs:function(){var j=this.oModel.getProperty("/iSelectedGroup"),k=this.oModel.getProperty("/groups");if(k.length>0){for(var i=0;i<k.length;i++){this.oModel.setProperty("/groups/"+i+"/isGroupSelected",false);}this.oModel.setProperty("/groups/"+j+"/isGroupSelected",true);}},_handleDisplayModeChangeToScroll:function(){if(this.isBlindLoading()){return;}var k=this.oModel.getProperty("/groups"),q,v,w,x=[],i,j;for(i=0;i<k.length;i++){q=k[i];v=q.tiles||[];for(j=0;j<v.length;j++){w=v[j];if(w.content.length===0){this.getTileView(w,i);}}x=q.links||[];for(j=0;j<x.length;j++){this.getTileView(x[j],i);}}this.oModel.refresh(false);var y=this.oModel.getProperty("/iSelectedGroup");if(y){setTimeout(function(){sap.ui.getCore().getEventBus().publish("launchpad","scrollToGroup",{groupId:k[y].groupId});},100);}},getTileViewsFromArray:function(R){var i=this;if(R.length===0){return;}R.forEach(function(j){i.getTileView(j.oTile,j.iGroup);});this.oModel.refresh(false);if(this.bIsFirstSegmentViewLoaded===false){this.bIsFirstSegmentViewLoaded=true;e.emit("firstSegmentCompleteLoaded",true);}},getTileView:function(i,j){var k=this.oPageOperationAdapter.getTileType(i.object);if(this.oDashboardLoadingManager.isTileViewRequestIssued(i)){return;}this.oDashboardLoadingManager.setTileInProgress(i);this.oPageOperationAdapter.setTileVisible(i.object,false);if(k==="card"){this._loadCardData(i);}else{this._loadTileData(i,j,k);}},_loadCardData:function(i){var j=sap.ui.getCore().byId(i.controlId);if(j&&j.setManifest&&this.isBlindLoading()){j.setManifest(i.manifest);}i.content=[i.manifest];this.oDashboardLoadingManager.setTileResolved(i);},getCurrentHiddenGroupIds:function(i){return this.oPageOperationAdapter.getCurrentHiddenGroupIds(i);},_loadTileData:function(i,j,k){var q=this,v=this.oPageOperationAdapter.getTileView(i),w,x,y,U=this._addModelToTileViewUpdateQueue,z,N=false,A=i.uuid,E=false;if(v.state()==="resolved"){E=true;}v.done(function(V){if(V.oController&&V.oController.navigationTargetUrl&&!i.isCustomTile){i.target=V.oController.navigationTargetUrl;}z=V;if(z.getComponentInstance){n.average("FLP:getComponentInstance","get info for navMode","FLP1");var H=z.getComponentInstance().getComponentData();if(H&&H.properties){i.navigationMode=H.properties.navigationMode;}n.end("FLP:getComponentInstance");}q.oDashboardLoadingManager.setTileResolved(i);w=V.getMode?V.getMode():"ContentMode";if(q.bLinkPersonalizationSupported&&w==="LineMode"){q._attachLinkPressHandlers(z);q._addDraggableAttribute(z);if(j>=0){x=q.oModel.getProperty("/groups");if(x[j]){i.content=[z];y=q.oModel.getProperty("/groups/"+j+"/links");q.oModel.setProperty("/groups/"+j+"/links",[]);q.oModel.setProperty("/groups/"+j+"/links",y);}}}else if(q.isBlindLoading()){if(i.content&&i.content.length>0){i.content[0].destroy();}i.content=[z];if(j>=0&&!E){q.oModel.refresh(false);}}if(q.isBlindLoading()){var I=q.oPageOperationAdapter.getTileSize(i.object);var J=I==="1x2";if(i.long!==J){i.long=J;}}else if(w==="LineMode"){i.content=[z];if(N){y=q.oModel.getProperty("/groups/"+j+"/links");q.oModel.setProperty("/groups/"+j+"/links",[]);q.oModel.setProperty("/groups/"+j+"/links",y);}}else if(i.content.length===0){i.content=[z];}else{U.apply(q,[A,z]);q._updateModelWithTileView(0,0);}});v.fail(function(){if(q.oPageOperationAdapter.getTileType(i.object)==="link"&&q.bLinkPersonalizationSupported){z=q.oPageOperationAdapter.getFailedLinkView(i);q._attachLinkPressHandlers(z);}else{z=new T({state:"Failed"});}i.content=[z];});if(!z){if(q.oPageOperationAdapter.getTileType(i.object)==="link"){N=true;z=new G({mode:"LineMode"});}else{z=new T();}i.content=[z];}},isIeHtml5DnD:function(){return(D.browser.msie||D.browser.edge)&&(D.system.combi||D.system.tablet);},loadPersonalizedGroups:function(){var i=this;var j=new Q.Deferred();this.oPageOperationAdapter.getPage().then(function(k){i._setGroupModel(k);j.resolve();},function(k){m.showLocalizedError("fail_to_load_groups_msg");});n.start("FLP:DashboardManager.loadPersonalizedGroups","loadPersonalizedGroups","FLP");return j.promise();}});});
sap.ui.predefine('sap/ushell/components/MessagingHelper',["sap/ushell/services/Message","sap/ushell/resources"],function(M,r){"use strict";return{getLocalizedText:g,showLocalizedError:a,showLocalizedErrorHelper:b,showLocalizedMessage:s};function g(m,p){return r.i18n.getText(m,p);}function s(m,p,t){if(sap.ushell.Container){sap.ushell.Container.getService("Message").show(t||M.Type.INFO,g(m,p),p);}}function a(m,p){s(m,p,M.Type.ERROR);}function b(m,p){return function(){a(m,p);};}});
sap.ui.predefine('sap/ushell/components/SharedComponentUtils',["sap/ui/Device","sap/ushell/Config","sap/ushell/UserActivityLog","sap/ushell/bootstrap/common/common.load.model","sap/base/Log","sap/ui/core/Component","sap/ui/thirdparty/jquery"],function(D,C,U,m,L,a,q){"use strict";var s={PERS_KEY:"flp.settings.FlpSettings",bFlpSettingsAdded:false,toggleUserActivityLog:function(){C.on("/core/extension/SupportTicket").do(function(c){if(c){U.activate();}else{U.deactivate();}});},initializeAccessKeys:function(){if(D.system.desktop){sap.ui.require(["sap/ushell/components/ComponentKeysHandler","sap/ushell/renderers/fiori2/AccessKeysHandler"],function(b,A){b.init(m.getModel());A.registerAppKeysHandler(b.handleFocusOnMe);});}},getEffectiveHomepageSetting:function(c,b){var p,d=new q.Deferred(),e=C.last(b)!==false,i=c.split("/").reverse()[0];if(e){p=this._getPersonalization(i);}else{p=q.Deferred().resolve();}p.done(function(v){v=v||C.last(c);if(v!==undefined){C.emit(c,v);}d.resolve(v);});p.fail(function(){var v=C.last(c);d.resolve(v);});return d;},_getPersonalization:function(i){var p=s.getPersonalizer(i,sap.ushell.Container.getRenderer("fiori2"));var P=p.getPersData();P.fail(function(e){L.error("Failed to load "+i+" from the personalization",e,"sap.ushell.components.flp.settings.FlpSettings");});return P;},getPersonalizer:function(i,c){var p=sap.ushell.Container.getService("Personalization");var o=a.getOwnerComponentFor(c);var S={keyCategory:p.constants.keyCategory.FIXED_KEY,writeFrequency:p.constants.writeFrequency.LOW,clientStorageAllowed:true};var P={container:this.PERS_KEY,item:i};return p.getPersonalizer(P,S,o);}};return s;});
sap.ui.predefine('sap/ushell/components/StateHelper',[],function(){"use strict";function g(s){var p=[],i;s=s||[];for(i=0;i<s.length;i++){if(s[i]!==undefined){if(s[i]!=="home"&&s[i]!=="app"){throw new Error("sLaunchpadState value is invalid");}p.push(s[i]);}}if(!p.length){p=["app","home"];}return p;}function a(s,d){var m=[];if(s==="app"&&!d){var A=["app","minimal","standalone","embedded","headerless","merged","blank","lean"];m=m.concat(A);}else if(s==="home"&&!d){var h=["home","embedded-home","headerless-home","merged-home","blank-home","lean-home"];m=m.concat(h);}else{m.push(s);}return m;}function b(s,d){var p=d?s:g(s);return p.reduce(function(r,S){var m=a(S,d);if(m){r=r.concat(m);}return r;},[]);}return{getAllStateToUpdate:b,getModelStates:a,getPassStates:g};});
sap.ui.predefine('sap/ushell/components/_HeaderManager/AddHeadEndItemsStrategy',["sap/base/Log"],function(L){"use strict";function v(E,i){var a=0,b,I;if(!E||!i){return false;}var n=i.some(function(I){var N=!sap.ui.getCore().byId(I);if(N){L.warning("Failed to find control with id '{id}'".replace("{id}",I));}return N;});if(n){return false;}if(i.length===1&&i[0]==="endItemsOverflowBtn"){return true;}for(b=0;b<E.length;b++){I=E[b];if(I!=="endItemsOverflowBtn"){a++;}if(a+i.length>10){L.warning("maximum of six items has reached, cannot add more items.");return false;}if(i.indexOf(I)>-1){return false;}}return true;}function A(c,i){var n=c.concat(i);var s={"sf":-2,"copilotBtn":-1,"NotificationsCountButton":1,"endItemsOverflowBtn":2,"meAreaHeaderButton":3,"productSwitchBtn":4};n.sort(function(a,b){var d=s[a]||0,B=s[b]||0;if(d===B){return a.localeCompare(b);}return d-B;});return n;}function e(c,V){var r=c;if(v(c,V)){r=A(c,V);}return r;}return{execute:e};});
sap.ui.predefine('sap/ushell/components/_HeaderManager/AddHeadItemsStrategy',[],function(){"use strict";function a(E,i){return E.indexOf(i)===-1?E.concat(i):E;}function A(E,i){return i.reduce(a,E);}function f(r){return function(i){return r.indexOf(i)===-1;};}function v(E,i){return A(E,i.filter(f(['backBtn','homeBtn']))).length<=3;}function b(c,I){var n=[],C=c.concat(I);if(c.indexOf("backBtn")>-1||I.indexOf("backBtn")>-1){n.push("backBtn");}if(c.indexOf("homeBtn")>-1||I.indexOf("homeBtn")>-1){n.push("homeBtn");}if(n.length<3){for(var i=0;i<C.length;i++){var s=C[i];if(n.indexOf(s)===-1){n.push(s);}if(n.length>=3){break;}}}return n;}function e(c,V){var r=c;if(v(c,V)){r=b(c,V);}return r;}return{execute:e};});
sap.ui.predefine('sap/ushell/components/_HeaderManager/ControlManager',["sap/m/Avatar","sap/m/library","sap/ui/Device","sap/ushell/EventHub","sap/ushell/resources","sap/ushell/ui/shell/ShellHeadItem","sap/ushell/renderers/fiori2/AccessKeysHandler"],function(A,m,D,E,r,S,a){"use strict";var b=m.AvatarSize;var c=[];function i(C,h,s){c.push(_(s));}function d(){c.forEach(function(I){var C=sap.ui.getCore().byId(I);if(C){if(C.destroyContent){C.destroyContent();}C.destroy();}});c=[];}function _(s){var I="meAreaHeaderButton",u=sap.ushell.Container.getUser(),t=r.i18n.getText("MeAreaToggleButtonAria",u.getFullName());var M=new A({id:I,src:"{/userImage/personPlaceHolder}",initials:u.getInitials(),customDisplaySize:"2.25rem",displaySize:b.Custom,tooltip:t,press:function(){E.emit("showMeArea",Date.now());}});if(D.system.desktop){M.addEventDelegate({onsapskipforward:function(e){a.bForwardNavigation=true;e.preventDefault();window.document.getElementById("sapUshellHeaderAccessibilityHelper").focus();}});}M.setModel(s);return I;}return{init:i,destroy:d};});
sap.ui.predefine('sap/ushell/components/_HeaderManager/ExtendApplicationPropertyStrategy',["sap/ui/thirdparty/jquery"],function(q){"use strict";function e(c,v){if(!v){v={};}return q.extend(true,{},c,v);}return{execute:e};});
sap.ui.predefine('sap/ushell/components/_HeaderManager/PropertyStrategiesFactory',["./AddHeadItemsStrategy","./AddHeadEndItemsStrategy","./ExtendApplicationPropertyStrategy","./RemoveItemsStrategy","./SetHeadPropertyStrategy"],function(A,a,E,R,S){"use strict";return function(p,s){var o;switch(p){case"headItems":if(s==="remove"){o=R;}else{o=A;}break;case"headEndItems":if(s==="remove"){o=R;}else{o=a;}break;case"showLogo":case"headerVisible":case"centralAreaElement":case"title":o=S;break;case"application":o=E;break;case"application/hierarchy":case"application/icon":case"application/relatedApps":case"application/showNavMenuTitle":case"application/title":o=S;break;default:o=null;break;}return o;};});
sap.ui.predefine('sap/ushell/components/_HeaderManager/RemoveItemsStrategy',[],function(){"use strict";function v(E,i){return i.some(function(I){return(E.indexOf(I)>=0);});}function r(c,i){return c.filter(function(I){return(i.indexOf(I)===-1);});}function e(c,V){var R=c;if(v(c,V)){R=r(c,V);}else{jQuery.sap.log.warning("You cannot remove item: "+V+", the item does not exists.");}return R;}return{execute:e};});
sap.ui.predefine('sap/ushell/components/_HeaderManager/SetHeadPropertyStrategy',[],function(){"use strict";function v(n){return n!==undefined;}function e(c,V){if(v(V)){return V;}return c;}return{execute:e};});
sap.ui.predefine('sap/ushell/components/_HeaderManager/ShellHeader.controller',["sap/m/library","sap/ui/core/mvc/Controller","sap/ui/Device","sap/ui/model/json/JSONModel","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/ui/shell/OverflowListItem"],function(m,C,D,J,A,a,E,O){"use strict";var L=m.ListType;var F=O.prototype.FloatingNumberType;return C.extend("sap.ushell.components._HeaderManager.ShellHeader",{onInit:function(){this.aDoables=[];this.aDoables.push(E.on("navigateBack").do(this.pressNavBackButton.bind(this)));this.aDoables.push(E.on("showEndItemOverflow").do(this.pressEndItemsOverflow.bind(this)));this.aDoables.push(E.on("navigateFromShellApplicationNavigationMenu").do(this.navigateFromShellApplicationNavigationMenu.bind(this)));},shellUpdateAggItem:function(i,c){return sap.ui.getCore().byId(c.getObject());},pressNavBackButton:function(){E.emit("showMeArea",false);A.service().navigateBack();},pressEndItemsOverflow:function(s){var p=sap.ui.getCore().byId("headEndItemsOverflow"),S=sap.ui.getCore().byId(s),M;if(!S){return;}if(!p){p=sap.ui.xmlfragment("sap.ushell.renderers.fiori2.HeadEndItemsOverflowPopover",this);var P=sap.ui.getCore().byId("headEndItemsOverflowList");P.enhanceAccessibilityState=function(o,b){if(o.getFloatingNumberType()!==F.None){b.describedby=o._oAriaDescribedbyText.getId();}return b;};M=new J({headEndItems:a.last("/core/shellHeader/headEndItems")});p.setModel(M);}if(p.isOpen()){p.close();}else{if(sap.ui.getCore().byId("shellNotificationsPopover")){E.emit("showNotifications",false);}p.openBy(S);}},headEndItemsOverflowItemFactory:function(i,c){var s=sap.ui.getCore().byId(c.getObject());var f=s.getBindingPath("floatingNumber");var o=new O({id:i+"-"+s.getId(),icon:s.getIcon(),iconInset:true,title:s.getText(),type:L.Active,floatingNumber:(f?{path:f}:undefined),floatingNumberType:s.getFloatingNumberType(),press:function(){if(s){s.firePress();}var p=sap.ui.getCore().byId("headEndItemsOverflow");if(p.isOpen()){p.close();}}});if(f){o.setModel(s.getModel());}return o;},destroyHeadEndItemsOverflow:function(e){e.getSource().destroy();},isHeadEndItemInOverflow:function(b){return b!=="ENDITEMSOVERFLOWBTN"&&!this.isHeadEndItemNotInOverflow(b);},isHeadEndItemNotInOverflow:function(b){var o=this.isHeadEndItemOverflow();var s=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD).name;if(b==="ENDITEMSOVERFLOWBTN"){return o;}if(!o){return true;}if(["MEAREAHEADERBUTTON","BACKBTN"].indexOf(b)>-1){return true;}if(s==="Phone"){return false;}if(["SF","FLOATINGCONTAINERBUTTON"].indexOf(b)>-1){return true;}if(s==="Desktop"&&b==="COPILOTBTN"){return true;}return false;},isHeadEndItemOverflow:function(){var n=0,e,b=a.last("/core/shellHeader/headEndItems");if(b.indexOf("endItemsOverflowBtn")===-1){return false;}var c=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD).name;var d=3;if(c==="Phone"){d=1;}for(var i=0;i<b.length;i++){e=sap.ui.getCore().byId(b[i]);if(e&&e.getVisible()){n++;}}if(sap.ui.getCore().byId("endItemsOverflowBtn").getVisible()){return n>d+1;}return n>d;},navigateFromShellApplicationNavigationMenu:function(i){if(window.hasher.getHash()!==i.substr(1)){E.emit("centerViewPort",Date.now());window.hasher.setHash(i);}var s=sap.ui.getCore().byId("shellAppTitle");if(s){s.close();}},onExit:function(){this.aDoables.forEach(function(d){d.off();});}});});
sap.ui.predefine('sap/ushell/components/_HomepageManager/DashboardLoadingManager',["sap/ui/base/Object","sap/ui/performance/Measurement","sap/ui/thirdparty/jquery"],function(B,M,q){"use strict";var D=B.extend("sap.ushell.components._HomepageManager.DashboardLoadingManager",{metadata:{},constructor:function(i,s){var e=sap.ui.getCore().getEventBus();this.currentVisibleTiles=[];this.aRefreshTiles=[];this.oBusyIndicatorTiles={};this.oActiveDynamicTiles={};this.oResolvedTiles={};this.oInProgressTiles={};this.oDashboardManager=s.oDashboardManager;e.subscribe("launchpad","visibleTilesChanged",this._onVisibilityChanged,this);e.subscribe("launchpad","dashboardTileClick",this._addTileToRefreshArray,this);e.subscribe("launchpad","refreshTiles",this._refreshTiles,this);e.subscribe("launchpad","setTilesNoVisibility",this._setTilesNoVisibility,this);e.subscribe("launchpad","onHiddenTab",this._setTilesNoVisibility,this);},_onVisibilityChanged:function(c,e,v){this.currentVisibleTiles=v;if(this.oDashboardManager.isBlindLoading()){this.manageTilesView();}this.manageBusyIndicatorTiles();this.manageDynamicTiles();},manageDynamicTiles:function(){var v;M.average("DashboardLoadingManagerActiveDynamicTile","Manage Active Dynamic Tiles","FLP_SHELL");var k,V,t,a,n={},c=q.extend(true,{},{},this.oActiveDynamicTiles);for(var i=0;i<this.currentVisibleTiles.length;i++){var o=this.currentVisibleTiles[i];if(!o.bIsExtanded){delete c[o.oTile.uuid];}}for(k in c){t=this.oActiveDynamicTiles[k];a=t.object;this.oDashboardManager.setTileVisible(t,false);}for(V=0;V<this.currentVisibleTiles.length;V++){v=this.currentVisibleTiles[V];if(!v.bIsExtanded){t=v.oTile;a=t.object;if(this.oActiveDynamicTiles[t.uuid]===undefined&&a){this.oDashboardManager.setTileVisible(t,true);}n[t.uuid]=t;}}this.oActiveDynamicTiles=n;M.end("DashboardLoadingManagerActiveDynamicTile");},isTileViewRequestIssued:function(t){if(this.oInProgressTiles[t.uuid]===undefined&&this.oResolvedTiles[t.uuid]===undefined){return false;}return true;},manageBusyIndicatorTiles:function(){M.average("DashboardLoadingManagerBusyIndicators","Manage Busy Indicators on Tiles","FLP_SHELL");var v,c,C,I,r=[],b,a=[];for(c in this.oBusyIndicatorTiles){b=true;I=this.oBusyIndicatorTiles[c];if(this.oResolvedTiles[c]===undefined){for(var i=0;i<this.currentVisibleTiles.length;i++){if(this.currentVisibleTiles[i].oTile.uuid===I.oTile.uuid){b=false;break;}}if(b){r.push(I);}}}for(v=0;v<this.currentVisibleTiles.length;v++){C=this.currentVisibleTiles[v];if(this.oBusyIndicatorTiles[C.oTile.uuid]===undefined&&this.oResolvedTiles[C.oTile.uuid]===undefined){a.push(C);}}for(v=0;v<r.length;v++){C=r[v];if(C.oTile.content[0]&&C.oTile.content[0].setState){if(C.oTile.content[0].getState){if(C.oTile.content[0].getState()!=="Failed"){C.oTile.content[0].setState();}}else{C.oTile.content[0].setState();}}delete this.oBusyIndicatorTiles[C.oTile.uuid];}for(v=0;v<a.length;v++){C=a[v];if(C.oTile.content[0]&&C.oTile.content[0].setState){if(C.oTile.content[0].getState){if(C.oTile.content[0].getState()!=="Failed"){C.oTile.content[0].setState("Loading");}}else{C.oTile.content[0].setState("Loading");}}this.oBusyIndicatorTiles[C.oTile.uuid]=C;}M.end("DashboardLoadingManagerBusyIndicators");},setTileInProgress:function(t){this.oInProgressTiles[t.uuid]=t;},setTileResolved:function(t){delete this.oInProgressTiles[t.uuid];this.oResolvedTiles[t.uuid]=t;},_addTileToRefreshArray:function(c,e,d){this.aRefreshTiles.push(d.uuid);},_refreshTiles:function(){for(var v=0;v<this.currentVisibleTiles.length;v++){var t=this.currentVisibleTiles[v].oTile;var a=t.object;if(a){for(var r=0;r<this.aRefreshTiles.length;r++){if(t.uuid===this.aRefreshTiles[r]){this.aRefreshTiles.splice(r,1);this.oDashboardManager.setTileVisible(t,true);this.oDashboardManager.refreshTile(t);break;}}}}},_setTilesNoVisibility:function(){if(!sap.ushell.Container){return;}for(var v=0;v<this.currentVisibleTiles.length;v++){var t=this.currentVisibleTiles[v].oTile;var a=t.object;if(a){this.oDashboardManager.setTileVisible(t,false);}delete this.oActiveDynamicTiles[t.uuid];}},manageTilesView:function(){var v,c,r=[];for(v=0;v<this.currentVisibleTiles.length;v++){c=this.currentVisibleTiles[v];if(this.oInProgressTiles[c.oTile.uuid]===undefined&&this.oResolvedTiles[c.oTile.uuid]===undefined){r.push(c);}}this.oDashboardManager.getTileViewsFromArray(r);}});return D;});
sap.ui.predefine('sap/ushell/components/_HomepageManager/PagingManager',["sap/ui/base/Object","sap/ui/Device","sap/ushell/Config"],function(B,D,C){"use strict";var T=7;var P=B.extend("sap.ushell.components._HomepageManager.PagingManager",{metadata:{publicMethods:["setElementClass","GetGroupHeight","setContainerSize","getNumberOfAllocatedElements","moveToNextPage","getTileHeight"]},constructor:function(i,s){sap.ushell.components._HomepageManager.getPagingManager=(function(v){return function(){return v;};}(this.getInterface()));this.currentPageIndex=0;this.containerHeight=s.containerHeight||0;this.containerWidth=s.containerWidth||0;this.supportedElements=s.supportedElements||"";this.tileHeight=0;this.tileSize={"sapUshellTile":{width:100,height:100},"sapUshellLinkTile":{width:40,height:20},"default":{width:40,height:20}};},getTileHeight:function(){return this.tileHeight;},setElementClass:function(c){this.supportedElements=c;},_getTileHeight:function(i){return i?148:176;},_getTileWidth:function(i,I){if(i){return I?304:360;}return I?148:176;},getGroupHeight:function(g,f){if(!g||g.isGroupVisible===false){return 0;}var t=g.tiles,l=g.links,I=D.system.phone||C.last("/core/home/sizeBehavior")==="Small",w=this._getTileWidth(false,I),W=this._getTileWidth(true,I),a=48,b=8,A=this.containerWidth-b;var r=0,R=1,c,d,i;var s=t.some(function(c){return!!c&&c.isTileIntentSupported!==false;});if(!s){if(g.isGroupLocked||g.isDefaultGroup){return 0;}return(a+b)/this.containerHeight;}var h=b;if(!f){h+=a;}if(l&&l.length){h+=44;}for(i=0;i<t.length;i++){if(h>this.containerHeight){break;}c=t[i];if(!c||c.isTileIntentSupported===false){continue;}d=c.long?W:w;if(r>0){r+=T;}r+=d;if(r>A){R+=1;r=d;}}h+=(this._getTileHeight(I)+T)*R;return h/this.containerHeight;},setContainerSize:function(n,a){var t=this.getNumberOfAllocatedElements();this.containerHeight=n;this.containerWidth=a;this._changePageSize(t);},getNumberOfAllocatedElements:function(){return this._calcElementsPerPage()*this.currentPageIndex;},_changePageSize:function(t){this.currentPageIndex=Math.ceil(t/this._calcElementsPerPage());},moveToNextPage:function(){this.currentPageIndex++;},resetCurrentPageIndex:function(){this.currentPageIndex=0;},getSizeofSupportedElementInUnits:function(t){return this.supportedElements[t].sizeInBaseUnits;},_calcElementMatrix:function(c){var e=jQuery("<div>").addClass(c);jQuery("body").append(e);var a=e.height();var b=e.width();var r;if(a<20||b<40){r=this.tileSize[c]||this.tileSize.default;}else{r={width:b,height:a};}this.tileHeight=a;e.remove();return r;},_calcElementsPerPage:function(){var s,b,a,m,c,e,d;for(s in this.supportedElements){a=this.supportedElements[s];m=this._calcElementMatrix(a.className);a.matrix=m;if(b){b.width=b.width>m.width?m.width:b.width;b.height=b.height>m.height?m.height:b.height;}else{b={width:m.width,height:m.height};}}for(s in this.supportedElements){a=this.supportedElements[s];c=a.matrix;a.sizeInBaseUnits=Math.round(c.width/b.width*c.height/b.height);}e=Math.round(this.containerWidth/b.width);d=Math.round(this.containerHeight/b.height);if(!d||!e||e===Infinity||d===Infinity||e===0||d===0){return 10;}return d*e;}});return P;});
sap.ui.predefine('sap/ushell/components/_HomepageManager/PersistentPageOperationAdapter',["sap/ui/thirdparty/jquery","sap/ui/base/Object","sap/ushell/Config","sap/ushell/resources","sap/ushell/components/MessagingHelper","sap/m/GenericTile","sap/base/util/uid","sap/base/Log","sap/ui/performance/Measurement","sap/m/library","sap/base/util/deepEqual"],function(q,B,C,r,m,G,g,L,M,a,d){"use strict";var b=a.GenericTileMode;var c=a.LoadState;var e={PERSONALIZATION:"FLP: Personalization",RENAME_GROUP:"FLP: Rename Group",MOVE_GROUP:"FLP: Move Group",DELETE_GROUP:"FLP: Delete Group",RESET_GROUP:"FLP: Reset Group",DELETE_TILE:"FLP: Delete Tile",ADD_TILE:"FLP: Add Tile",MOVE_TILE:"FLP: Move Tile"};function _(E,p){sap.ushell.Container.getServiceAsync("UsageAnalytics").then(function(u){u.logCustomEvent(e.PERSONALIZATION,E,p);});}var P=B.extend("sap.ushell.components._HomepageManager.PersistentPageOperationAdapter",{constructor:function(){B.call(this);this.oPageBuilderService=sap.ushell.Container.getService("LaunchPage");},_getIsAppBox:function(o){if(!sap.ushell.Container){return false;}var s=this.oPageBuilderService,i=!!(s.getCatalogTileTargetURL(o)&&(s.getCatalogTilePreviewTitle(o)||s.getCatalogTilePreviewSubtitle(o)));return i;},getCurrentHiddenGroupIds:function(o){var h=o.getProperty("/groups"),H=[],s,i,j;for(i=0;i<h.length;i++){j=h[i]?h[i].isGroupVisible:true;if(h[i].object){s=this.oPageBuilderService.getGroupId(h[i].object);}if(!j&&s!==undefined){H.push(s);}}return H;},getPreparedTileModel:function(t,i,T){var s=this.oPageBuilderService,h=g(),o,S=s.getTileSize(t),l=[],j;T=T||s.getTileType(t);if(T==="link"){l=[new G({mode:sap.m.GenericTileMode.LineMode})];}o={"isCustomTile":!this._getIsAppBox(t),"object":t,"originalTileId":s.getTileId(t),"uuid":h,"tileCatalogId":encodeURIComponent(s.getCatalogTileId(t)),"content":l,"long":S==="1x2","target":s.getTileTarget(t)||"","debugInfo":s.getTileDebugInfo(t),"isTileIntentSupported":s.isTileIntentSupported(t),"rgba":"","isLocked":i,"showActionsIcon":C.last("/core/home/enableTileActionsIcon"),"isLinkPersonalizationSupported":s.isLinkPersonalizationSupported(t),"navigationMode":undefined};if(T==="card"){j=s.getCardManifest(t);o.isCard=true;if(j){o.manifest=j;}}return o;},getPreparedGroupModel:function(o,D,l,h){var s=this.oPageBuilderService,j=(o&&s.getGroupTiles(o))||[],k=[],n=[],i,p=C.last("/core/shell/model/personalization"),H=C.last("/core/extension/enableHelp");var I=!!(o&&s.isGroupLocked(o)),t=!!(o&&s.isGroupFeatured(o));for(i=0;i<j.length;++i){var T=j[i],u=s.getTileType(T).toLowerCase();if(u==="tile"||u==="card"){k.push(this.getPreparedTileModel(j[i],I,u));}else if(u==="link"){n.push(this.getPreparedTileModel(j[i],I,u));}else{L.error("Unknown tile type: '"+u+"'",undefined,"sap.ushell.components.HomepageManager");}}return{title:(D&&m.getLocalizedText("my_group"))||(o&&s.getGroupTitle(o))||(h&&h.title)||"",object:o,groupId:g(),helpId:(H&&o)?s.getGroupId(o):null,links:n,pendingLinks:[],tiles:k,isDefaultGroup:!!D,editMode:!o,isGroupLocked:I,isFeatured:t,visibilityModes:[true,true],removable:!o||s.isGroupRemovable(o),sortable:p,isGroupVisible:!o||s.isGroupVisible(o),isEnabled:!D,isLastGroup:l||false,isRendered:!!(h&&h.isRendered),isGroupSelected:false};},getPage:function(){M.start("FLP:DashboardManager.loadPersonalizedGroups","loadPersonalizedGroups","FLP");return this._getGroupsFromServer().then(this.loadGroupsFromArray.bind(this));},_getGroupsFromServer:function(){var t=this;return new Promise(function(h,i){t.oPageBuilderService.getGroups().done(function(j){M.end("FLP:DashboardManager.loadPersonalizedGroups");h(j);}).fail(i);});},loadGroupsFromArray:function(h){var t=this;M.start("FLP:DashboardManager.loadGroupsFromArray","loadGroupsFromArray","FLP");M.start("FLP:DashboardManager.getDefaultGroup","getDefaultGroup","FLP");return new Promise(function(j,k){t.oPageBuilderService.getDefaultGroup().done(function(D){M.end("FLP:DashboardManager.getDefaultGroup");if(h.length===0&&D===undefined){j([]);return;}var i=0,n,N=[],l,o;h=t._sortGroups(D,h);o=h.findIndex(function(p){return d(p,D);});l=h.length;M.start("FLP:DashboardManager._getGroupModel","_getGroupModel","FLP");for(i=0;i<l;++i){n=t.getPreparedGroupModel(h[i],i===o,i===l-1);n.index=i;N.push(n);}M.end("FLP:DashboardManager._getGroupModel");M.end("FLP:DashboardManager.loadGroupsFromArray");j(N);}).fail(k);});},_sortGroups:function(D,h){var i=0,t=this,j=h.findIndex(function(o){return d(o,D);}),l=[],k,o,n;if(j>-1){h.splice(j,1);}while(i<h.length){o=h[i];n=this.oPageBuilderService.isGroupLocked(o);if(n){l.push(o);h.splice(i,1);}else{i++;}}if(!C.last("/core/home/disableSortedLockedGroups")){l.sort(function(x,y){var p=t.oPageBuilderService.getGroupTitle(x).toLowerCase(),s=t.oPageBuilderService.getGroupTitle(y).toLowerCase();return p<s?-1:1;});}l.sort(function(x,y){var I=t.oPageBuilderService.isGroupFeatured(x),p=t.oPageBuilderService.isGroupFeatured(y);if(I===p){return 0;}else if(I>p){return-1;}return 1;});k=l;k.push(D);k.push.apply(k,h);return k;},addGroupAt:function(o,i,I){var t=this;return new Promise(function(h,j){try{if(i===undefined){t.oPageBuilderService.addGroup(o.title).done(function(n){var s=t.oPageBuilderService.getGroupId(n);_(e.RENAME_GROUP,[null,o.title,s]);h(t.getPreparedGroupModel(n,I,o.isLastGroup,undefined));}).fail(j);}else{t.oPageBuilderService.addGroupAt(o.title,i).done(function(n){var s=t.oPageBuilderService.getGroupId(n);_(e.RENAME_GROUP,[null,o.title,s]);h(t.getPreparedGroupModel(n,I,o.isLastGroup,undefined));}).fail(j);}}catch(k){j();}});},renameGroup:function(o,n,O){var t=this;return new Promise(function(h,i){try{t.oPageBuilderService.setGroupTitle(o.object,n).done(function(){var s=t.oPageBuilderService.getGroupId(o.object);_(e.RENAME_GROUP,[O,n,s]);h();}).fail(i);}catch(E){i();}});},deleteGroup:function(o){var t=this,s=o.object,h=this.oPageBuilderService.getGroupId(s),i=this.oPageBuilderService.getGroupTitle(s);return new Promise(function(j,k){try{t.oPageBuilderService.removeGroup(s).done(function(){_(e.DELETE_GROUP,[i,h]);j();}).fail(k);}catch(l){k();}});},moveGroup:function(o,t,i){var h=this;return new Promise(function(j,k){try{h.oPageBuilderService.moveGroup(o.object,t).done(function(){var s=h.oPageBuilderService.getGroupId(o.object);_(e.MOVE_GROUP,[o.title,i.iFromIndex,i.iToIndex,s]);j();}).fail(k);}catch(l){k();}});},resetGroup:function(o,i){var t=this,s=o.object,h=this.oPageBuilderService.getGroupId(s),j=this.oPageBuilderService.getGroupTitle(s);return new Promise(function(k,l){try{t.oPageBuilderService.resetGroup(s).done(function(R){_(e.RESET_GROUP,[j,h]);k(t.getPreparedGroupModel(R||s,i,o.isLastGroup,undefined));}).fail(l);}catch(n){l();}});},refreshGroup:function(s){var t=this,E="Failed to refresh group with id:"+s+" in the model";return new Promise(function(h){t.oPageBuilderService.getGroups().fail(function(){L.error(E,null,"sap.ushell.components.HomepageManager");h(null);}).done(function(j){var S=null;for(var i=0;i<j.length;i++){if(t.oPageBuilderService.getGroupId(j[i])===s){S=j[i];break;}}if(S){t.oPageBuilderService.getDefaultGroup().done(function(D){var I=s===D.getId(),o=t.getPreparedGroupModel(S,I,false,{isRendered:true});h(o);});}else{h(null);}});});},getIndexOfGroup:function(h,s){var n=-1,t=this,i=this.oPageBuilderService.getGroupId(s);h.every(function(o,j){var k=t.oPageBuilderService.getGroupId(o.object);if(k===i){n=j;return false;}return true;});return n;},getOriginalGroupIndex:function(o){var s=this.oPageBuilderService,S=o.object,h=this.oPageBuilderService.getGroups();return new Promise(function(j,k){h.done(function(l){var n;for(var i=0;i<l.length;i++){if(s.getGroupId(l[i])===s.getGroupId(S)){n=i;break;}}j(n);}).fail(k);});},moveTile:function(t,i,s,T,h){var j=this,S,p=new Promise(function(k,l){try{var R=j.oPageBuilderService.moveTile(t.object,i.tileIndex,i.newTileIndex,s.object,T.object,h);R.done(function(o){var u=[j.oPageBuilderService.getTileTitle(t.object),j.oPageBuilderService.getGroupTitle(s.object),j.oPageBuilderService.getGroupTitle(T.object),t.uuid];_(e.MOVE_TILE,u);S=o;k(o);});R.fail(l);}catch(n){l();}});return p.then(this._getTileViewAsPromise.bind(this)).then(function(v){return Promise.resolve({content:v,originalTileId:j.oPageBuilderService.getTileId(S),object:S});});},removeTile:function(o,t){var h=this,s=t.object,T=h.oPageBuilderService.getTileTitle(s),i=h.oPageBuilderService.getCatalogTileId(s),j=h.oPageBuilderService.getCatalogTileTitle(s),k=h.oPageBuilderService.getTileId(s),p;p=new Promise(function(l,n){try{h.oPageBuilderService.removeTile(o.object,s).done(function(){m.showLocalizedMessage("tile_deleted_msg",[T,o.title]);_(e.DELETE_TILE,[T||k,i,j,o.title]);l();}).fail(n);}catch(u){n();}});return p;},_getTileViewAsPromise:function(t){var h=this,p=new Promise(function(i,j){var k=h.oPageBuilderService.getTileView(t);k.done(i);k.fail(j);});return p;},refreshTile:function(s){this.oPageBuilderService.refreshTile(s);},setTileVisible:function(s,v){this.oPageBuilderService.setTileVisible(s,v);},getTileType:function(s){return this.oPageBuilderService.getTileType(s);},getTileSize:function(s){return this.oPageBuilderService.getTileSize(s);},getTileTitle:function(t){return this.oPageBuilderService.getTileTitle(t.object);},getTileId:function(s){return this.oPageBuilderService.getTileId(s);},isLinkPersonalizationSupported:function(s){return this.oPageBuilderService.isLinkPersonalizationSupported(s);},getTileTarget:function(t){return this.oPageBuilderService.getTileTarget(t.object);},getTileView:function(t){return this.oPageBuilderService.getTileView(t.object);},getTileActions:function(t){return this.oPageBuilderService.getTileActions(t);},getFailedLinkView:function(t){var s=this.oPageBuilderService.getCatalogTilePreviewSubtitle(t.object);var h=this.oPageBuilderService.getCatalogTilePreviewTitle(t.object);if(!h&&!s){h=r.i18n.getText("cannotLoadLinkInformation");}return new G({mode:b.LineMode,state:c.Failed,header:h,subheader:s});},getTileModelByCatalogTileId:function(s){L.error("Cannot get tile with id "+s+": Method is not supported");},transformGroupModel:function(){return;}});var f=null;return{getInstance:function(){if(!f){f=new P();}return f;},destroy:function(){f=null;}};});
sap.ui.predefine('sap/ushell/components/_HomepageManager/TransientPageOperationAdapter',["sap/ui/thirdparty/jquery","sap/ui/base/Object","sap/ushell/Config","sap/ushell/resources","sap/ushell/components/MessagingHelper","sap/m/GenericTile","sap/m/ImageContent","sap/m/TileContent","sap/base/util/uid","sap/base/Log","sap/m/library"],function(q,B,C,r,m,G,I,T,u,L,a){"use strict";var b=a.GenericTileMode;var c=a.LoadState;var d=B.extend("sap.ushell.components._HomepageManager.TransientPageOperationAdapter.js",{constructor:function(){B.call(this);this.oPageBuilderService=sap.ushell.Container.getService("LaunchPage");this._createCatalogMap();},_createCatalogMap:function(){if(this.mCatalogTiles){return;}var s=this.oPageBuilderService,t=this;this.mCatalogTiles={};this._getAllCatalogTiles().then(function(f){for(var i=0;i<f.length;i++){for(var j=0;j<f[i].length;j++){t.mCatalogTiles[s.getCatalogTileId(f[i][j])]=f[i][j];}}});},getCurrentHiddenGroupIds:function(){return[];},getTileActions:function(t){t.isStub=function(){return true;};var R=this.oPageBuilderService.getTileActions(t);delete t.isStub;return R;},getPreparedTileModel:function(t,i,s){var f=u(),o,l=[];s=s||t.type;if(s==="link"){l=[new G({mode:b.LineMode})];}o={"isCustomTile":false,"object":t,"originalTileId":f,"uuid":f,"tileCatalogId":"","content":l,"long":false,"target":"","debugInfo":null,"isTileIntentSupported":true,"rgba":"","isLocked":i,"showActionsIcon":C.last("/core/home/enableTileActionsIcon"),"isLinkPersonalizationSupported":true,"navigationMode":undefined};if(s==="card"){o.isCard=true;o.manifest={};}return o;},getPreparedGroupModel:function(g,D,l,o){var f=u(),h=(g&&g.tiles)||[],M=[],j=[],i;for(i=0;i<h.length;++i){var t=h[i],s=t.type.toLowerCase();if(s==="tile"||s==="card"){M.push(this.getPreparedTileModel(h[i],false,s));}else if(s==="link"){j.push(this.getPreparedTileModel(h[i],false,s));}else{L.error("Unknown tile type: '"+s+"'",undefined,"sap.ushell.components.HomepageManager");}}return{title:(D&&m.getLocalizedText("my_group"))||(g&&g.title)||(o&&o.title)||"",object:g,groupId:f,links:j,pendingLinks:[],tiles:M,isDefaultGroup:!!D,editMode:!g,isGroupLocked:false,isFeatured:false,visibilityModes:[true,true],removable:true,sortable:true,isGroupVisible:true,isEnabled:!D,isLastGroup:l||false,isRendered:!!(o&&o.isRendered),isGroupSelected:false};},getPage:function(){return Promise.resolve([this.getPreparedGroupModel(null,false,true)]);},addGroupAt:function(g,i,D){var f={title:g.title};return Promise.resolve(this.getPreparedGroupModel({},D,g.isLastGroup,f));},renameGroup:function(){return Promise.resolve();},deleteGroup:function(){return Promise.resolve();},moveGroup:function(){return Promise.resolve();},resetGroup:function(){return Promise.reject("Reset group not supported in transient mode");},refreshGroup:function(){return Promise.reject("Refresh group not supported in transient mode");},getIndexOfGroup:function(){return Promise.resolve(-1);},getOriginalGroupIndex:function(g,f){var h;for(var i=0;i<f.length;i++){if(f[i].groupId===g.groupId){h=i;break;}}return Promise.resolve(h);},moveTile:function(t,i,s,o,f){var g=this._findCatalogTile(t.tileCatalogId);return Promise.resolve({content:this._getTileView(g,f),originalTileId:t.uuid,object:{id:t.uuid,type:f,title:this.oPageBuilderService.getCatalogTileTitle(g)}});},removeTile:function(){return Promise.resolve();},_getTileView:function(o,t){if(t==="link"){return new G({mode:b.LineMode,header:this.oPageBuilderService.getCatalogTileTitle(o),subheader:this.oPageBuilderService.getCatalogTilePreviewSubtitle(o)});}return new G({header:this.oPageBuilderService.getCatalogTileTitle(o),subheader:this.oPageBuilderService.getCatalogTilePreviewSubtitle(o),tileContent:new T({content:new I({src:this.oPageBuilderService.getCatalogTilePreviewIcon(o)})})});},refreshTile:function(){return;},setTileVisible:function(){return;},getTileType:function(s){return s.type;},getTileSize:function(){return"1x1";},getTileId:function(s){return s.id;},isLinkPersonalizationSupported:function(){return true;},getTileTarget:function(t){var o=this._findCatalogTile(t.tileCatalogId);return this.oPageBuilderService.getCatalogTileTargetURL(o);},getTileTitle:function(t){return t.object.title;},_getAllCatalogTiles:function(){var s=this.oPageBuilderService;function g(f){f.map(function(o){var h=s.getCatalogId(o)||"";return s.getCatalogTitle(o)||h.split(":").slice(1).join(":");});return Promise.all(f.map(function(o){return s.getCatalogTiles(o);}));}return Promise.resolve(s.getCatalogs()).then(g);},_findCatalogTile:function(s){return this.mCatalogTiles[s];},getTileView:function(t){var o=this._findCatalogTile(t.tileCatalogId),v=this._getTileView(o,t.object.type),D=new q.Deferred();D.resolve(v);return D.promise();},getFailedLinkView:function(t){var h=t.object.title||r.i18n.getText("cannotLoadLinkInformation"),s="";return new G({mode:b.LineMode,state:c.Failed,header:h,subheader:s});},getTileModelByCatalogTileId:function(s,t){var o=this._findCatalogTile(s),f;t=t||"tile";f=this.getPreparedTileModel({},false,t);f.tileCatalogId=s;f.object={id:f.uuid,type:t,title:this.oPageBuilderService.getCatalogTileTitle(o)};var v=this._getTileView(o,t);f.content=[v];return f;},transformGroupModel:function(g){var t=this,o;for(var i=0;i<g.length;i++){o=g[i];o.object={};o.tiles.forEach(function(f){var s=f.object;f.tileCatalogId=t.oPageBuilderService.getCatalogTileId(s);f.object={id:f.uuid,type:"tile",title:t.oPageBuilderService.getTileTitle(s)};});o.links.forEach(function(l){var s=l.object;l.tileCatalogId=t.oPageBuilderService.getCatalogTileId(s);l.object={id:l.uuid,type:"link",title:t.oPageBuilderService.getTileTitle(s)};});}return g;}});var e;return{getInstance:function(){if(!e){e=new d();}return e;},destroy:function(){e=null;}};});
sap.ui.predefine('sap/ushell/components/applicationIntegration/AppLifeCycle',["sap/ushell/components/applicationIntegration/elements/model","sap/ushell/components/applicationIntegration/Storage","sap/ushell/components/applicationIntegration/application/BlueBoxHandler","sap/ushell/ui5service/ShellUIService","sap/ushell/components/applicationIntegration/application/Application","sap/ushell/components/applicationIntegration/relatedServices/RelatedServices","sap/ushell/components/applicationIntegration/relatedShellElements/RelatedShellElements","sap/ushell/components/applicationIntegration/configuration/AppMeta","sap/ushell/services/AppConfiguration","sap/ushell/utils","sap/ui/Device","sap/ushell/Config","sap/ushell/ui5service/AppIsolationService","sap/ushell/ApplicationType","sap/ushell/components/applicationIntegration/DelegationBootstrap","sap/base/util/UriParameters","sap/ui/thirdparty/jquery","sap/base/Log","sap/base/util/ObjectPath"],function(E,S,B,a,A,R,b,c,d,u,D,C,f,g,h,U,q,L,O){"use strict";function i(){var v,j=["URL"],r,s,k,I={},o,l=false,m={},n={home:{embedded:"embedded-home",headerless:"headerless-home",merged:"blank-home",blank:"blank-home"},app:{minimal:"minimal",app:"app",standalone:"standalone",embedded:"embedded",headerless:"headerless",merged:"merged",home:"home",blank:"blank",lean:"lean"}},p,G=[],t={},w=false,K={FULL:"true",RESTRICTED:"restricted"};this.shellElements=function(){return b;};this.service=function(){return R;};this.isCurrentApp=function(e){return(m.appId===e);};this.isAppWithSimilarShellHashInCache=function(e,F){var x=S.get(e);if(x){if(x.shellHash===F){return true;}return false;}return false;};this.isAppInCache=function(e){return!!S.get(e);};this.normalizeAppId=function(e){var x="-component",y=e.endsWith(x);if(y){return e.substring(0,e.length-x.length);}return e;};this.onComponentCreated=function(e,x,y){var z=y.component,F=this.normalizeAppId(z.getId());if(this.isAppInCache(F)){S.get(F).app=z;this.active(F);}else{m.app=z;if(z.active){z.active();}}};this.onGetMe=function(e,x,y){y.AppLifeCycle=this;};this.store=function(e){var x=S.get(e);if(x){A.store(x.app);R.store(x.service);c.store(x.meta);}};this.destroy=function(e,F,x,y){var z=S.get(e),H;function J(){A.destroy(F);b.destroy(F);c.destroy(F);}if(y===undefined){y=false;}this.removeControl(e,y);if(z){H=B.getStateFul(F.getUrl());if(H&&B.isStatefulContainerSupported(H)&&y===false){var M=B.getHandler();M.destroy(H,e);}else{z.container.destroy();B.deleteStateFul(F.getUrl());}S.remove(e);if(x){x.resolve();}}else{var P=F&&F.sendBeforeAppCloseEvent&&F.sendBeforeAppCloseEvent();if(P===undefined){J();if(x){x.resolve();}}else{P.then(function(){J();if(x){x.resolve();}},function(N){J();if(x){x.resolve();}q.sap.log.error("FLP got a failed response from the iframe for the 'sap.ushell.services.CrossApplicationNavigation.beforeAppCloseEvent' message sent",N,"sap.ushell.components.applicationIntegration.AppLifeCycle.js");});}}};this.restore=function(e){var x=S.get(e);if(x){A.restore(x.app);R.restore(x.service);c.restore(x.meta);}};this.active=function(e){var x=S.get(e);if(x){A.active(x.app);}};this.handleExitStateful=function(F,e){var x,H=B.getHandler();if(S.get(F)){x=B.getStorageKey(e);if(x&&B.isKeepAliveSupported(e)){return H.store(e,x);}return Promise.resolve();}return H.destroy(e);};this.handleExitApplication=function(F,e,T,x,y){var z=this,H,P,J;if(F&&e){if(e.getUrl()&&B.isStatefulContainerSupported(B.getStateFul(e.getUrl()))){P=this.handleExitStateful(F,e);}else if(S.get(F)){this.store(F);sap.ui.getCore().getEventBus().publish("sap.ushell","appClosed",e);}else if((e.getIsStateful&&e.getIsStateful())||(e.getApplicationType&&this.applicationIsStatefulType(e.getApplicationType()))){if(y){P=e.postMessageRequest("sap.gui.triggerCloseSessionImmediately");}}else{H=j.indexOf(e.getApplicationType)>=0;if(this.isAppOfTypeCached(F,H)===false){J=new q.Deferred();this.destroy(F,e,J);P=J.promise();}}if(y===true){if(P===undefined){this.closeKeepAliveRestrictedApps();}else{P.then(function(){z.closeKeepAliveRestrictedApps();});}}if(F.indexOf("Shell-appfinder-component")>0){sap.ui.getCore().getEventBus().publish("sap.ushell","appFinderAfterNavigate");}}};this.closeKeepAliveRestrictedApps=function(){try{var x=this,y=[];S.forEach(function(z){if(z.value.keepAliveMode===K.RESTRICTED){y.push(z.value);}});y.forEach(function(z){x.destroy(z.appId,z.container,undefined,true);});}catch(e){L.error("Error: sap.ushell.services.appLifeCycle.closeOtherKeepAliveRestrictedApps:"+e);}};this.onAfterNavigate=function(F,e,T,x){var y=T.indexOf("Shell-appfinder-component")>0||T.indexOf("Shell-home-component")>0||T.indexOf("pages-component-container")>0;this.handleExitApplication(F,e,T,x,y);if(y===true){A.setActiveAppContainer(undefined);}if(T){if(S.get(T)){this.restore(T);}else{}}};this.storeApp=function(e,x,T,F,y){if(!this.isAppInCache(e)){S.set(e,{service:R.create(),shellHash:F,appId:e,stt:"loading",appRelatedElements:b.getAppRelatedElement(),container:x,meta:d.getMetadata(T),app:undefined,keepAliveMode:y&&(y.globalValue||y.paramValue)});I[F]=e;B.setStorageKey(x,e);return true;}return false;};this.restoreApp=function(e){if(this.isAppInCache(e)){m=S.get(e);if(B.getStorageKey(m.container)){B.setStorageKey(m.container,e);}}};this.isAppOfTypeCached=function(e,x,y){var z;if(!l&&e.indexOf(r)!==-1){return true;}if(!l&&e.indexOf("Shell-appfinder")!==-1){return true;}z=new U(window.location.href).get("sap-keep-alive");if(z===K.FULL||z===K.RESTRICTED){if(y){y.globalValue=z;}return true;}return false;};this.isCachedEnabledAsAppParameter=function(e,T,x){var y;y=e&&e.params&&e.params["sap-keep-alive"];if(y===K.FULL||y===K.RESTRICTED){if(x){x.paramValue=y;}return true;}if(T&&T.url){y=new U(T.url).get("sap-keep-alive");if(y===K.FULL||y===K.RESTRICTED){if(x){x.paramValue=y;}return true;}}return false;};i.prototype._getURLParsing=function(){if(!this._oURLParsing){this._oURLParsing=sap.ushell.Container.getService("URLParsing");}return this._oURLParsing;};this.calculateAppType=function(T){if(T.applicationType==="URL"&&T.additionalInformation&&T.additionalInformation.startsWith("SAPUI5.Component=")){return"SAPUI5";}return T.applicationType;};this.getStatefulCapabilities=function(T){if(T.appCapabilities&&T.appCapabilities&&T.appCapabilities.statefulContainer){return T.appCapabilities.statefulContainer;}return undefined;};this.isNotifyInnerAppRouteChangeEnabled=function(T){if(T.appCapabilities&&T.appCapabilities.notifyInnerAppRouteChange){return true;}return false;};this.isStatefulCapabilityEnabled=function(T){var e=this.getStatefulCapabilities(T);if(e&&(e.enabled===true||e===true)){return true;}return false;};this.isGUICapabilityEnabled=function(T){var e=this.getStatefulCapabilities(T);if(e&&e.protocol==="GUI"){return true;}return false;};this.isFLPCapabilityEnabled=function(T){return!this.isGUICapabilityEnabled(T)&&this.isStatefulCapabilityEnabled(T);};this.isGUIStatefulCapabilityEnabled=function(T){return this.isGUICapabilityEnabled(T)&&this.isStatefulCapabilityEnabled(T);};this.openApp=function(e,T,x,F){var y,z,H=j.indexOf(T.applicationType)>=0,J,M,N={globalValue:undefined,paramValue:undefined};var P="application"+e;y=B.getStateFul(T.url);if(y&&B.isStatefulContainerSupported(y)){if(this.isAppOfTypeCached(P,H,N)||this.isCachedEnabledAsAppParameter(x,T,N)){if(!this.isAppInCache(P)){this.storeApp(P,y,T,F,N);}this.restoreApp(P);}else{m={appId:P,stt:"loading",container:y,meta:d.getMetadata(T),app:undefined};}}else if(this.isAppOfTypeCached(P,H,N)||this.isCachedEnabledAsAppParameter(x,T,N)){if(!this.isAppInCache(P)){y=this.createApplicationContainer(e,T);this.storeApp(P,y,T,F,N);B.set(T.url,y);}this.restoreApp(P);}else if(this.applicationIsStatefulType(T.applicationType)||B.isCapByTarget(T,"isGUIStateful")){y=this.getStatefulContainer(T.applicationType);if(!y){y=this.createApplicationContainer(e,T);this.setStatefulContainer(T.applicationType,y);y.setIsStateful(true);}m={appId:P,stt:"loading",container:y,meta:d.getMetadata(T),app:undefined};}else{if(y){z=x.semanticObject+"-"+x.action;this.removeApplication(z);}else if(T.applicationType==="URL"||T.applicationType==="TR"){z=x.semanticObject+"-"+x.action;J=B.getById("application-"+z);if(J){M=J.getUrl();B.removeCapabilities(J);this.destroy("application-"+z,J);B.deleteStateFul(M);}}y=this.createApplicationContainer(e,T);B.set(T.url,y);if(B.isCapUT(y,"isFLP")){B.setCapabilities(y,[{service:"sap.ushell.services.appLifeCycle",action:"create"},{service:"sap.ushell.services.appLifeCycle",action:"destroy"}]);}m={appId:P,stt:"loading",container:y,meta:d.getMetadata(T),app:undefined};}};this.getAppMeta=function(){return c;};this.evict=function(e){var x,y=e.value,z=e.key;this.removeControl(z);if(y.container.getUrl&&y.container.getUrl()){x=B.getStateFul(y.container.getUrl());}if(x){var H=B.getHandler();H.destroy(x,z);}else{y.container.destroy();}};this.init=function(e,x,y,z,F,H,J){var M=this,N;if(D.system.phone){N=10;if(J&&J.limit&&J.limit.phone){N=J.limit.phone;}}else if(D.system.tablet){N=10;if(J&&J.limit&&J.limit.tablet){N=J.limit.tablet;}}else if(D.system.desktop){N=15;if(J&&J.limit&&J.limit.desktop){N=J.limit.desktop;}}else{N=10;}h.init(this.registerShellCommunicationHandler,this.postMessageToIframeApp);h.bootstrap();s=new a({scopeObject:F.ownerComponent,scopeType:"component"});o=new f({scopeObject:F.ownerComponent,scopeType:"component"});k=e;v=x;r=y;c.init(r);l=z;B.init({oShellUIService:s,oAppIsolationService:o},J,this);S.init(N,function(Q){this.evict(Q);}.bind(this));this.registerShellCommunicationHandler({"sap.ushell.services.appLifeCycle":{oRequestCalls:{"create":{isActiveOnly:true,distributionType:["URL"],fnResponseHandler:function(Q){Q.then(function(T){L.info("sap.ushell.services.appLifeCycle.create:"+T);}).catch(function(T){L.error("Error: sap.ushell.services.appLifeCycle.create:"+T);});}},"destroy":{isActiveOnly:true,distributionType:["URL"],fnResponseHandler:function(Q){Q.then(function(T){L.info("sap.ushell.services.appLifeCycle.destroy:"+T);}).catch(function(T){L.error("Error: sap.ushell.services.appLifeCycle.destroy:"+T);});}},"store":{isActiveOnly:true,distributionType:["URL"],fnResponseHandler:function(Q){Q.then(function(T){L.info("sap.ushell.services.appLifeCycle.store:"+T);}).catch(function(T){L.error("Error: sap.ushell.services.appLifeCycle.store:"+T);});}},"restore":{isActiveOnly:true,distributionType:["URL"],fnResponseHandler:function(Q){Q.then(function(T){L.info("sap.ushell.services.appLifeCycle.restore:"+T);}).catch(function(T){L.error("Error: sap.ushell.services.appLifeCycle.restore:"+T);});}}},oServiceCalls:{"subscribe":{executeServiceCallFn:function(Q){B.mapCapabilities(Q.oContainer,Q.oMessageData.body);return new q.Deferred().resolve({}).promise();}},"setup":{executeServiceCallFn:function(Q){var T=Q.oMessageData&&Q.oMessageData.body,V=[];if(T){if(T.isStateful===true){V.push({"action":"create","service":"sap.ushell.services.appLifeCycle"});V.push({"action":"destroy","service":"sap.ushell.services.appLifeCycle"});}if(T.session&&T.session.bLogoutSupport===true){V.push({"action":"logout","service":"sap.ushell.sessionHandler"});}if(V.length>0){B.mapCapabilities(Q.oContainer,V);}}return new q.Deferred().resolve().promise();}}}}});this.registerShellCommunicationHandler({"sap.ushell.eventDelegation":{oRequestCalls:{"registerEventHandler":{isActiveOnly:false,distributionType:["URL"]}},oServiceCalls:{"registerEventHandler":{executeServiceCallFn:function(Q){var T=P(Q);return new q.Deferred().resolve(T).promise();}}}}});function P(Q){var T=Q.oMessageData.body.eventSerObj;return M.registerEventHandler(T);}sap.ui.getCore().getEventBus().subscribe("sap.ushell","appComponentLoaded",this.onComponentCreated,this);sap.ui.getCore().getEventBus().subscribe("sap.ushell","getAppLifeCycle",this.onGetMe,this);b.init(this.getElementsModel(),H);};this.addControl=function(e){v.addCenterViewPort(e);};this.removeControl=function(e,F){var x=B.getById(e),y=B.isStatefulContainerSupported(x);if(!y||F){v.removeCenterViewPort(e,true);}};this.removeApplication=function(e){var x=this.getControl(e);if(x){this.removeControl(x.getId());x.destroy();}};this.getControl=function(e){return v&&(v.getViewPortControl("centerViewPort","application-"+e)||v.getViewPortControl("centerViewPort","applicationShellPage-"+e));};this.getViewPortContainer=function(){return v;};this.navTo=function(e){v.navTo("centerViewPort",e,"show");};this.getCurrentApplication=function(){return m;};this.setApplicationFullWidth=function(e){var x=this.getCurrentApplication();if(x.container){x.container.toggleStyleClass("sapUShellApplicationContainerLimitedWidth",!e);}};this.createComponent=function(e,P){this.shellElements().setDangling(true);return A.createComponent(e,P);};this.getAppContainer=function(e,x,y,z,F){x.shellUIService=s.getInterface();x.appIsolationService=o.getInterface();x.targetNavigationMode=y?"explace":"inplace";this.openApp(e,x,z,F);if(G.length>0){m.container.registerShellCommunicationHandler(G);}if(t.UI5APP){m.container.setIframeHandlers(t.UI5APP);}return m.container;};this.getShellUIService=function(){return s;};this.getAppIsolationService=function(){return o;};this.initShellUIService=function(e){s._attachHierarchyChanged(c.onHierarchyChange.bind(this));s._attachTitleChanged(c.onTitleChange.bind(this));s._attachRelatedAppsChanged(c.onRelatedAppsChange.bind(this));s._attachBackNavigationChanged(e.fnOnBackNavigationChange.bind(this));};this.parseStatefulContainerConfiguration=function(e){var x={};if(new U(document.URL).get("sap-guitest")==="true"){e=undefined;}if(e){var y={"GUI":true};Object.keys(e).filter(function(z){return e[z]===true&&y[z];}).map(function(z){var F=z;if(F==="GUI"){F="TR";}return F;}).forEach(function(z){x[z]=null;});}p=x;};this.setStatefulApplicationContainer=function(e){if(new U(document.URL).get("sap-guitest")==="true"){return;}p=e;};this.getStatefulApplicationContainer=function(){return p;};this.applicationIsStatefulType=function(e){if(new U(document.URL).get("sap-guitest")==="true"){return false;}return p.hasOwnProperty(e);};this.getStatefulContainer=function(e){return p[e];};this.setStatefulContainer=function(e,x){if(new U(document.URL).get("sap-guitest")==="true"){return;}p[e]=x;};this.statefulContainerForTypeExists=function(e){return!!this.getStatefulContainer(e);};this.getAllApplicationContainers=function(){return Object.keys(p).map(function(e){return p[e];}).filter(function(e){return!!e;});};this.getElementsModel=function(){return E;};this.activeContainer=function(x){var y=this.getAllApplicationContainers();y.forEach(function(e){L.info("Deactivating container "+e.getId());e.setActive(false);});B.forEach(function(z){if(z&&z!==x){try{L.info("Deactivating container "+z.getId());z.setActive(false);}catch(e){}}});if(x){L.info("Activating container "+x.getId());x.setActive(true);}};this.showApplicationContainer=function(e){this.navTo(e.getId());e.toggleStyleClass("hidden",false);A.setActiveAppContainer(e);L.info("New application context opened successfully in an existing transaction UI session.");};this.reuseStateFulContainerAndRestore=function(e,T,H,F,x){var y=this,z=I[F];if(B.getStorageKey(e)){B.setStorageKey(e,z);}return H.restore(e,z,x).then(function(){y.showApplicationContainer(e);},function(J){L.error(J&&J.message||J);});};this.reuseStateFulContainer=function(e,x,T,H,F,y){var z=this;I[F]=T;if(B.getStorageKey(e)){B.setStorageKey(e,T);}this.initAppMetaParams();return H.create(e,x,T,y).then(function(){z.showApplicationContainer(e);},function(J){L.error(J&&J.message||J);});};this.initAppMetaParams=function(){if(!this.getAppMeta().getIsHierarchyChanged()){s.setHierarchy();}if(!this.getAppMeta().getIsTitleChanged()){s.setTitle();}if(!this.getAppMeta().getIsRelatedAppsChanged()){s.setRelatedApps();}if(!w){s.setBackNavigation();}};this.reuseApplicationContainer=function(e,x,y){var z=this;return e.setNewApplicationContext(x,y).then(function(){z.navTo(e.getId());e.toggleStyleClass("hidden",false);L.info("New application context opened successfully in an existing transaction UI session.");},function(F){L.error(F&&F.message||F);});};this.createApplicationContainer=function(e,x){return A.createApplicationContainer(e,x);};this.publishNavigationStateEvents=function(e,x,y){var z,F=e.getId?e.getId():"",H=this;var J=d.getMetadata(),M=J.icon,T=J.title;e.addEventDelegate({onAfterRendering:y});z=e.exit;e.exit=function(){if(z){z.apply(this,arguments);}H.getAppMeta()._applyContentDensityByPriority();setTimeout(function(){var N=q.extend(true,{},x);delete N.componentHandle;N.appId=F;N.usageIcon=M;N.usageTitle=T;sap.ui.getCore().getEventBus().publish("sap.ushell","appClosed",N);L.info("app was closed");},0);var P=H._publicEventDataFromResolutionResult(x);sap.ushell.renderers.fiori2.utils.publishExternalEvent("appClosed",P);};};this._publicEventDataFromResolutionResult=function(e){var P={};if(!e){return e;}["applicationType","ui5ComponentName","url","additionalInformation","text"].forEach(function(x){P[x]=e[x];});Object.freeze(P);return P;};this.getInMemoryInstance=function(e,F,x,y){var z="application-"+e,H=S.get(z);var N=(y==="Shell-home"&&(typeof x==="string"&&x.length>0));if(H){if(H.shellHash===F&&!N){return{isInstanceSupported:true,appId:H.appId,container:H.container};}return{isInstanceSupported:false,appId:H.appId,container:H.container};}return{isInstanceSupported:false,appId:undefined,container:undefined};};this.handleOpenStateful=function(e,x,T,y,z,F,H){var J=B.getHandler();if(S.get(T)&&e===false){this.reuseStateFulContainerAndRestore(y,T,J,F,z);}else{this.reuseStateFulContainer(y,z.url,T,J,F,z);if(x){if(!this.isAppInCache(T)){this.storeApp(T,y,z,F,H);}}}};this.leave=function(e,x){var y=B.isStatefulContainerSupported(e);if(y){return this.handleExitStateful(x,e);}return Promise.resolve();};this.open=function(e,x,y,T,W,F,M){var z=this,H,J=this.statefulContainerForTypeExists(T.applicationType),N,P=j.indexOf(T.applicationType)>=0,Q="application-"+e,V,X,Y,Z=false,$,_,a1,b1=new q.Deferred(),c1,d1={globalValue:undefined,paramValue:undefined};X=this.isAppOfTypeCached(Q,P,d1)||this.isCachedEnabledAsAppParameter(y,T,d1);Y=this.calculateAppType(T);$=g.getDefaultFullWidthSetting(Y);H=B.getStateFul(T.url);N=B.isStatefulContainerSupported(H);if(!N){if(m&&Q!==m.appId){H=undefined;}V=S.get("application"+x);if(V){H=V.container;if(!N&&X&&H!==undefined){_=true;}}}var e1,f1;e1=T.appCapabilities&&T.appCapabilities.fullWidth;if($===true){if(T.fullWidth===false||T.fullWidth==="false"||M.fullWidth===false||M.fullWidth==="false"||e1===false){f1=false;}}else if(T.fullWidth===true||T.fullWidth==="true"||M.fullWidth===true||M.fullWidth==="true"){f1=true;}if(f1===undefined){f1=$;}if(N){if(!H){H=W(e,M,y,T,x,f1,F);this.restoreApp(H.getId());this.navTo(H.getId());Z=true;}}else if(!J&&H&&!X){a1=new q.Deferred();this.destroy(H.getId(),H,a1);a1.then(function(){H=W(e,M,y,T,x,f1,F);});}else if(!H){H=W(e,M,y,T,x,f1,F);}if(a1===undefined){a1=new q.Deferred().resolve();}if(H&&H.getDeffedControlCreation){c1=H.getDeffedControlCreation();}else{c1=Promise.resolve();}a1.then(function(){c1.then(function(){if(!J&&!N){if(_===true){sap.ui.getCore().getEventBus().publish("launchpad","appOpening",T);}z.restoreApp(H.getId());z.navTo(H.getId());if(_===true){sap.ui.getCore().getEventBus().publish("sap.ushell","appOpened",T);}}v.switchState("Center");u.setPerformanceMark("FLP -- centerViewPort");z.activeContainer(H);if(N){z.handleOpenStateful(Z,X,"application"+x,H,T,F,d1);}else if(J){z.reuseApplicationContainer(H,T.applicationType,T.url);}b1.resolve();});});return b1.promise();};this.handleControl=function(e,x,y,T,W,F){var z=this,M=d.getMetadata(T),H=v.getCurrentCenterPage?v.getCurrentCenterPage():undefined,J=sap.ui.getCore().byId(H);var P=z.leave(J,H).then(function(){z.open(e,x,y,T,W,F,M);},function(N){L.error(N&&N.message||N);});return P;};this.switchViewState=function(e,x,y){var z=e,F;if(n[e]&&n[e][k]){z=n[e][k];}var H=C.last("/core/shell/model/currentState/stateName")==="home";if(!H&&(!m.appId||!S.get(m.appId))){E.destroyManageQueue();}F=S.get("application"+y);if(F){b.restore(F);}else{b.assignNew(e);}E.switchState(z,x,y);this.shellElements().setDangling(false);this.shellElements().processDangling();if(e==="searchResults"){this.getElementsModel().setProperty("/lastSearchScreen","");if(!window.hasher.getHash().indexOf("Action-search")===0){var J=sap.ui.getCore().getModel("searchModel");window.hasher.setHash("Action-search&/searchTerm="+J.getProperty("/uiFilter/searchTerms")+"&dataSource="+JSON.stringify(J.getProperty("/uiFilter/dataSource").getJson()));}}};this.registerShellCommunicationHandler=function(e){A.registerShellCommunicationHandler(e);};this.registerIframeCommunicationHandler=function(H,T){t[T]=H;};this.postMessageToIframeApp=function(e,x,M,W){var y,z=A.getActiveAppContainer(),F=false,H=[];if(B.hasIFrame(z)&&(B.isCapabilitySupported(z,e,x)||A.isAppTypeSupported(z,e,x))){H.push(A.postMessageToIframeApp(z,e,x,M,W));F=true;}if(!A.isActiveOnly(e,x)){B.forEach(function(N){if(F===true&&N===z){return;}if(B.hasIFrame(N)){if(B.isCapabilitySupported(N,e,x)||A.isAppTypeSupported(N,e,x)){H.push(A.postMessageToIframeApp(N,e,x,M,W));}}});}y=A.getResponseHandler(e,x);var J=Promise.all(H);if(y){y(J);}return J;};this.postMessageToIframeAppAccordingToPolicy=function(e,x,M,W,P){var y,z=A.getActiveAppContainer(),F=[];if(B.hasIFrame(z)&&A.isAppTypeSupportedByPolicy(z,P)){F.push(A.postMessageToIframeApp(z,e,x,M,W));}if(!P.isActiveOnly){B.forEach(function(J){if(B.hasIFrame(J)){if(B.isCapabilitySupported(J,e,x)||A.isAppTypeSupported(J,e,x)){F.push(A.postMessageToIframeApp(J,e,x,M,W));}}});}y=A.getResponseHandler(e,x);var H=Promise.all(F);if(y){y(H);}return H;};this.registerTunnels=function(T){h.registerTunnels(T,this.registerShellCommunicationHandler);};this.registerEvents=function(e){h.registerEvents(e,this.registerShellCommunicationHandler);};this.setBackNavigationChanged=function(e){w=e;};this.getBackNavigationChanged=function(){return w;};}return new i();},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/DelegationBootstrap',["sap/ushell/components/applicationIntegration/eventDelegation/tunnels"],function(t){"use strict";var a=this;function D(){a=this;this.init=function(r,p){a.fnRegisterCommHandler=r;a.fnPostMessageToIframe=p;t.init(r);};this.bootstrap=function(){a.fnRegisterCommHandler({"sap.ushell.demo":{oRequestCalls:{"passCoordinates":{isActiveOnly:true,distributionType:["URL"],fnResponseHandler:function(p){p.then(function(r){Log.info("sap.ushell.dem.passCoordinates:"+r);}).catch(function(E){Log.error("sap.ushell.dem.passCoordinates:"+E);});}}}}});var c={},i={clickCallback:function(b){a.fnPostMessageToIframe("sap.ushell.demo","passCoordinates",{screenX:b.screenX,screenY:b.screenY},false);},keyPressCallback:function(b){}},e={"addlistener":{oInterface:document,sFuncName:"addEventListener",fnProxy:function(b,C,u){var o,n;if(C.pairedInterface){o=t.getPairedMethod(C.pairedInterface);}else if(C.getUUID){n=C.getUUID();if(c[n]){o=c[n];}else{o=function(d){C({screenX:d.screenX,screenY:d.screenY});};c[n]=o;}}else{o=C;}return[b,o,u];},fnSpy:function(b){return b==="click"||b==="keypress";}},"removelistener":{oInterface:document,sFuncName:"removeEventListener",fnProxy:function(b,C,u){var o;if(C.pairedInterface){o=t.getPairedMethod(C.pairedInterface);}else if(C.getUUID){o=c[C.getUUID()];}else{o=C;}return[b,o,u];},fnSpy:function(b){return b==="click"||b==="keypress";}},"appOpening":{oInterface:sap.ui.getCore().getEventBus(),sFuncName:"subscribe",fnSpy:function(p,b){return p==="launchpad"&&b==="appOpening";}}},T={"clickCallback":{oInterface:i,sFuncName:"clickCallback",pair:{sMethod:"clickCallback",sInterface:"sap.ushell.pairedInterface",fnExtractArguments:function(s){return[{screenX:s.oMessageData.body.screenX,screenY:s.oMessageData.body.screenY}];}}},"keyPressCallback":{oInterface:i,sFuncName:"keyPressCallback"},"demoFunction":{oInterface:{demoFunction:function(A){return"Outer Shell says: Your argument is: "+A.demo;}},sFuncName:"demoFunction"}};t.registerEvents(e);t.registerTunnels(T);};this.setup=function(r){t.setup(r);};this.createInterface=function(c){var i=c.name,C=c.callback;t.createInterface(i,a.fnRegisterCommHandler,C);};this.registerEvents=function(e){t.registerEvents(e);};this.registerTunnels=function(T){t.registerTunnels(T);};}return new D();},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/Storage',[],function(){"use strict";function S(){var c,e;function L(l){this.size=0;if(typeof l=="number"){this.limit=l;}else{this.limit=10;}this.map={};this.head=null;this.tail=null;}L.prototype.LRUnode=function(k,v){if(typeof k!="undefined"&&k!==null){this.key=k;}if(typeof v!="undefined"&&v!==null){this.value=v;}this.prev=null;this.next=null;};L.prototype.setHead=function(n){n.next=this.head;n.prev=null;if(this.head!==null){this.head.prev=n;}this.head=n;if(this.tail===null){this.tail=n;}this.size++;this.map[n.key]=n;};L.prototype.set=function(k,v){var n=new L.prototype.LRUnode(k,v);if(this.map[k]){this.map[k].value=n.value;this.remove(n.key);}else if(this.size>=this.limit){var E=this.map[this.tail.key];delete this.map[this.tail.key];this.size--;this.tail=this.tail.prev;this.tail.next=null;if(e){e(E);}}this.setHead(n);};L.prototype.get=function(k){if(this.map[k]){var v=this.map[k].value;var n=new L.prototype.LRUnode(k,v);this.remove(k);this.setHead(n);return v;}else{return null;}};L.prototype.remove=function(k){var n=this.map[k];if(n.prev!==null){n.prev.next=n.next;}else{this.head=n.next;}if(n.next!==null){n.next.prev=n.prev;}else{this.tail=n.prev;}delete this.map[k];this.size--;};L.prototype.removeAll=function(l){this.size=0;this.map={};this.head=null;this.tail=null;if(typeof l=="number"){this.limit=l;}};L.prototype.forEach=function(a){var n=this.head,i=0;while(n){a.apply(this,[n,i,this]);i++;n=n.next;}};L.prototype.toJSON=function(){var j=[],n=this.head;while(n){j.push({key:n.key,value:n.value});n=n.next;}return j;};L.prototype.toString=function(){var s='',n=this.head;while(n){s+=String(n.key)+':'+n.value;n=n.next;if(n){s+='\n';}}return s;};this.init=function(l,i){c=new L(l);e=i;};this.get=function(k){return c.get(k);};this.set=function(k,v){c.set(k,v);};this.remove=function(k){c.remove(k);};this.forEach=function(a){c.forEach(a);};this.length=function(){return c.size;};}return new S();},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/application/Application',["sap/ushell/components/container/ApplicationContainer","sap/ushell/components/applicationIntegration/application/PostMessageAPI","sap/ushell/utils","sap/ui/thirdparty/jquery","sap/ushell/components/applicationIntegration/eventDelegation/tunnels","sap/ui/thirdparty/URI"],function(A,P,u,q,t,U){"use strict";var a,B,T={},o={},f={},b=0,c=A.getMetadata().getJSONKeys();function d(){var g=this;this.handleMessageEvent=function(C,m,M){var h=m.data;if(typeof h==="string"){try{h=g.parse(m.data);}catch(e){q.sap.log.debug("Message received from origin '"+m.origin+"' cannot be parsed: "+e,h,"sap.ushell.components.container.ApplicationContainer");return;}}if(h.action==="pro54_setGlobalDirty"&&localStorage.getItem(C.globalDirtyStorageKey)===sap.ushell.Container.DirtyState.PENDING){if(!A.prototype._isTrustedPostMessageSource(C,m)){q.sap.log.warning("Received message from untrusted origin: "+m.origin,h,"sap.ushell.components.container.ApplicationContainer");return;}q.sap.log.debug("getGlobalDirty() pro54_setGlobalDirty SetItem key:"+C.globalDirtyStorageKey+" value: "+h.parameters.globalDirty,null,"sap.ushell.components.container.ApplicationContainer");u.localStorageSetItem(C.globalDirtyStorageKey,h.parameters.globalDirty,true);}else{g.handleServiceMessageEvent(C,m,h,M);}};this.handleServiceMessageEvent=function(C,m,M,h){var p=q.sap.getObject("sap-ushell-config.services.PostMessage.config",0),s=M&&M.service,S=t.getPairedServiceCall(s),i,j,k,l,I=false,n=P.getAPIs(),r;q.sap.log.debug("Received post message request from origin '"+m.origin+"': "+JSON.stringify(M),null,"sap.ushell.components.container.ApplicationContainer");if(S){v(S);return;}if(M.type!=="request"||!s){return;}for(var E in n){if(n.hasOwnProperty(E)){if(s.indexOf(E)!==-1){j=n[E];k=E;I=true;break;}}}if(I===false){h.bApiRegistered=false;return;}r=(s.indexOf("user.postapi.")===0);i=s.split(".")[3];if(p&&p.enabled===false){q.sap.log.warning("Received message for "+i+", but this "+"feature is disabled. It can be enabled via launchpad configuration "+"property 'services.PostMessage.config.enabled: true'",undefined,"sap.ushell.components.container.ApplicationContainer");return;}if(!A.prototype._isTrustedPostMessageSource(C,m)){q.sap.log.warning("Received message from untrusted origin '"+m.origin+"': "+JSON.stringify(m.data),null,"sap.ushell.components.container.ApplicationContainer");return;}function v(e,r){var F;if(r===true){F={oMessage:m,oMessageData:M};}else{F={matchesLocalSid:D,getLocalSystemInSidForma:z,storeSapSystemData:y,executeSetBackNavigationService:x,sendResponseMessage:w,oMessage:m,oMessageData:M,oContainer:C};}try{e(F).done(function(R){w("success",{result:R});}).fail(function(H){w("error",{message:H});});}catch(G){w("error",{message:G.message});}}function w(e,F){var R=g.stringify({type:"response",service:M.service,request_id:M.request_id,status:e,body:F});q.sap.log.debug("Sending post message response to origin ' "+m.origin+"': "+R,null,"sap.ushell.components.container.ApplicationContainer");if(typeof m.source!=="object"||m.source===null){q.sap.log.debug("Cannot send response message to origin ' "+m.origin,"`source` member of request message is not an object","sap.ushell.components.container.ApplicationContainer");return;}m.source.postMessage(R,m.origin);}function x(m,M){var e=new q.Deferred(),F;if(M.body&&M.body.callbackMessage&&M.body.callbackMessage.service){F=A.prototype._backButtonPressedCallback.bind(null,m.source,M.body.callbackMessage.service,m.origin);}e.resolve(C.getShellUIService().setBackNavigation(F));return e.promise();}function y(F,G){var K,L,H,J=[F.id];if(arguments.length>1){J.unshift(G);}try{H=JSON.stringify(F);}catch(e){q.sap.log.error("Cannot stringify and store expanded system data: "+e);}if(H){L=u.getLocalStorage();K=u.generateLocalStorageKey("sap-system-data",J);L.setItem(K,H);}}function z(){var e=sap.ushell.Container.getLogonSystem();var F=e.getName();var G=e.getClient();return"sid("+F+"."+G+")";}function D(e){return z().toLowerCase()===e.toLowerCase();}l=j.oServiceCalls[M.service.replace(k+".","")];if(l&&l.executeServiceCallFn){v(l.executeServiceCallFn,r);}else{w("error",{message:"Unknown service name: '"+M.service+"'"});}};this.init=function(i){B=i;this.registerShellCommunicationHandler({"sap.ushell.PostMessage":{oServiceCalls:{"callTunnelFunction":{executeServiceCallFn:function(s){var e=s.oMessageData.body.content,h=g.restoreArray(e.arguments),r;r=T[e.UUID].fnCallback.apply(this,h);return new q.Deferred().resolve(r).promise();}}},oRequestCalls:{"callTunnelFunction":{isActiveOnly:true,distributionType:["URL"]}}}});};this.restoreArray=function(e){var h=[],i=0;while(e[i]){h.push(e[i]);i++;}return h;};this._createWaitForRendererCreatedPromise=function(){var p,r;r=sap.ushell.Container.getRenderer();if(r){q.sap.log.debug("Shell controller._createWaitForRendererCreatedPromise: shell renderer already created, return empty array.");return[];}p=new Promise(function(e,h){var O;O=function(){q.sap.log.info("Shell controller: resolving component waitFor promise after shell renderer created event fired.");e();sap.ushell.Container.detachRendererCreatedEvent(O);};r=sap.ushell.Container.getRenderer();if(r){q.sap.log.debug("Shell controller: resolving component waitFor promise immediately (shell renderer already created");e();}else{sap.ushell.Container.attachRendererCreatedEvent(O);}});return[p];};this.createComponent=function(r,p){return sap.ushell.Container.getService("Ui5ComponentLoader").createComponent(r,p,this._createWaitForRendererCreatedPromise());};this.stripURL=function(s){var n=s.indexOf("?"),e=s.indexOf("#"),h;if(n>=0){h=s.substr(0,n);}else if(e>=0){h=s.substr(0,e);}else{h=s;}return h;};this.createApplicationContainer=function(s,r){var e={};this._cleanTargetResolution(r,e);a=new A("application"+s,r);this._restoreTargetResolution(r,e);if(r.appCapabilities&&r.appCapabilities.startMethod==="POST"){a.setIsPostCapability(true);}a.setHandleMessageEvent(this.handleMessageEvent);B.setAppCapabilities(a,r);return a;};this.active=function(e){if(e){if(e.active){e.active();}}};this.restore=function(e){var D;if(e){if(e.getUrl){D=e.getUrl();a=B.get(this.stripURL(D));if(a){B.restoreApp(a.sApplication);}}if(e.restore){e.restore();}if(e.setInitialConfiguration){e.setInitialConfiguration();}if(e.getRouter&&e.getRouter()&&e.getRouter().initialize){e.getRouter().initialize();}a=e;}};this.store=function(e){var D;if(e){if(e.getUrl){D=e.getUrl();a=B.get(this.stripURL(D));if(a){B.storeApp(a.sApplication);}}if(e.suspend){e.suspend();}if(e.getRouter&&e.getRouter()){e.getRouter().stop();}}};this.destroy=function(e){var D,a,h=false;if(e){if(e.getUrl){D=e.getUrl();a=B.get(this.stripURL(D));if(B.isStatefulContainerSupported(a)){h=true;B.destroyApp(a.sApplication);}}if(e.destroy&&h===false){e.destroy();}}};this.setActiveAppContainer=function(C){a=C;};this.getActiveAppContainer=function(){return a;};}d.prototype._cleanTargetResolution=function(r,e){var k;if(r){for(k in r){if(c[k]===undefined){e[k]=r[k];delete r[k];}}}};d.prototype._restoreTargetResolution=function(r,e){var k;if(r){for(k in e){r[k]=e[k];}}};d.prototype.stringify=function(D){var e=function(C){b++;T[b]={fnCallback:C};return{type:"tunnel",UUID:b};},g=[],r=JSON.stringify(D,function(k,v){if(v!==null){if(typeof v==="object"||typeof v==="function"){if(g.indexOf(v)!==-1){return;}g.push(v);}}if(typeof v==="function"){var n=o[v];if(n){return{type:"reversetunnel",UUID:n};}return e(v);}return v;});return r;};d.prototype.parse=function(D){var e=this;return JSON.parse(D,function(k,v){if(v&&v.type==="reversetunnel"){return T[v.UUID].fnCallback;}else if(v&&v.type==="tunnel"){var g;if(f[v.UUID]){g=f[v.UUID];}else{var h=e.getActiveAppContainer();g=function(){e.postMessageToIframeApp(h,"sap.ushell.PostMessage","callTunnelFunction",{"content":{UUID:v.UUID,arguments:arguments}},true);};g.getUUID=function(){return v.UUID;};o[g]=v.UUID;f[v.UUID]=g;}return g;}return v;});};d.prototype.getResponseHandler=function(s,i){return P.getResponseHandler(s,i);};d.prototype.isActiveOnly=function(s,i){return P.isActiveOnly(s,i);};d.prototype.isAppTypeSupported=function(C,s,i){var e=P._getPostMesageInterface(s,i);return this.isAppTypeSupportedByPolicy(C,e);};d.prototype.isAppTypeSupportedByPolicy=function(C,p){if(C&&C.getAdditionalInformation&&C.getAdditionalInformation().startsWith("SAPUI5.Component=")){return false;}var e=p;if(!e||!e.distributionType){return false;}if(e.distributionType.indexOf("all")>=0){return true;}if(e.distributionType.indexOf("URL")>=0){return false;}if(C.getApplicationType&&e.distributionType.indexOf(C.getApplicationType())>=0){return true;}return false;};d.prototype.postMessageToIframeApp=function(C,s,i,m,w){var S=s+"."+i,M=this.createPostMessageRequest(S,m);return this.postMessageToIframe(M,C,w);};d.prototype.createPostMessageRequest=function(s,m){var r=Date.now().toString();return{"type":"request","request_id":r,"service":s,"body":m};};d.prototype.postMessageToIframe=function(m,C,w){var g=this,r=m.request_id,i=C._getIFrame();return new Promise(function(n,N){function p(E){var k;try{k=g.parse(E.data,g);if(r!==k.request_id){return;}if(k.status==="success"){n(k);}else{N(k);}window.removeEventListener("message",p);}catch(e){n();q.sap.log.warning("Obtained bad response from framework in response to message "+m.request_id);q.sap.log.debug("Underlying framework returned invalid response data: '"+E.data+"'");}}var M=g.stringify(m);q.sap.log.debug("Sending postMessage "+M+" to application container '"+C.getId()+"'");var h,j;if(!i){n();}else if(w){window.addEventListener("message",p,false);h=new U(C._getIFrameUrl(i));j=h.protocol()+"://"+h.host();i.contentWindow.postMessage(M,j);}else{h=new U(C._getIFrameUrl(i));j=h.protocol()+"://"+h.host();i.contentWindow.postMessage(M,j);n();}});};d.prototype.registerShellCommunicationHandler=function(C){P.registerShellCommunicationHandler(C);};d.prototype._getPostMesageInterface=function(s,i){return P._getPostMesageInterface(s,i);};return new d();},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/application/BlueBoxHandler',["sap/ushell/components/applicationIntegration/application/Application","sap/ushell/components/container/ApplicationContainer","sap/ushell/EventHub","sap/ui/thirdparty/URI","sap/ushell/components/applicationIntegration/application/PostMessageAPI","sap/ui/thirdparty/jquery","sap/base/Log","sap/base/util/UriParameters","sap/base/security/encodeXML"],function(A,a,E,U,P,q,L,b,e){"use strict";function B(){var c,m={},t=this,d,C={"isStateful":{handler:function(i,j){if(i&&(i.enabled===true||i===true)){return true;}return false;}},"isGUI":{handler:function(i,j){if(i&&i.protocol==="GUI"){return true;}return false;}},"isGUIStateful":{handler:function(i,j){return t.isCapUT(j,"isGUI")&&t.isCapUT(j,"isStateful");}},"isFLP":{handler:function(i,j){return!t.isCapUT(j,"isGUI")&&t.isCapUT(j,"isStateful");}}},o={},s={},S={},h={setup:function(T,i){},create:function(i,u,j,T){var D=new q.Deferred(),F,p;function k(){if(F){F["sap-flp-url"]=sap.ushell.Container.getFLPUrl(true);p["sap-flp-params"]=e(JSON.stringify(F));}o[i].lastAction=g.APP_OPENED;sap.ui.getCore().getEventBus().publish("launchpad","appOpening",T);A.postMessageToIframeApp(i,"sap.ushell.services.appLifeCycle","create",p,true).then(function(){o[i].currentAppTarget=T;sap.ui.getCore().getEventBus().publish("sap.ushell","appOpened",T);D.resolve();});}u=a.prototype._checkNwbcUrlAdjustment(i,T.applicationType,u);u=a.prototype._adjustURLForIsolationOpeningWithoutURLTemplate(u);p={sCacheId:j,sUrl:u,sHash:window.hasher.getHash()};if(t._isOpenWithPost()===true){var I=[];var K=a.prototype._getParamKeys(u,I);if(K.length>0){var l=sap.ushell.Container.getService("CrossApplicationNavigation");l.getAppStateData(K).then(function(n){F={};I.forEach(function(r,v){if(n[v][0]){F[r]=n[v][0];}});k();},function(n){k();});}else{F={};k();}}else{k();}return D.promise();},destroy:function(i,j){var p;if(o[i].lastAction===g.APP_CLOSED){return Promise.resolve();}o[i].lastAction=g.APP_CLOSED;p=A.postMessageToIframeApp(i,"sap.ushell.services.appLifeCycle","destroy",{sCacheId:j},true);p.then(function(){sap.ui.getCore().getEventBus().publish("sap.ushell","appClosed",o[i].currentAppTarget);o[i].currentAppTarget=undefined;});return p;},store:function(i,j){var p;if(o[i].lastAction===g.APP_CLOSED){return Promise.resolve();}o[i].lastAction=g.APP_CLOSED;p=A.postMessageToIframeApp(i,"sap.ushell.services.appLifeCycle","store",{sCacheId:j},true);p.then(function(){sap.ui.getCore().getEventBus().publish("sap.ushell","appClosed",o[i].currentAppTarget);o[i].currentAppTarget=undefined;});return p;},restore:function(i,j,T){var p;o[i].lastAction=g.APP_OPENED;sap.ui.getCore().getEventBus().publish("launchpad","appOpening",T);p=A.postMessageToIframeApp(i,"sap.ushell.services.appLifeCycle","restore",{sCacheId:j,sUrl:T.url,sHash:window.hasher.getHash()},true);p.then(function(){o[i].currentAppTarget=T;sap.ui.getCore().getEventBus().publish("sap.ushell","appOpened",T);});return p;}},f=[{service:"sap.ushell.services.appLifeCycle",action:"create"},{service:"sap.ushell.services.appLifeCycle",action:"destroy"}],g={APP_OPENED:"app_opened",APP_CLOSED:"app_closed"};this._isOpenWithPost=function(){return((new b(window.location.href)).get("sap-post")==="true");};this.subscribePluginAgents=function(i,j){Object.keys(i).map(function(k){if(!m[k]){m[k]=[];}m[k].push(j);});};this._managePluginAgents=function(i){var t=this;var H=function(j,I,k,p){var l={"loading":{sInterface:"agentLoading"},"started":{sInterface:"agentStart"},"exit":{sInterface:"agentExit"}},n=l[k.status];if(n){if(I[n.sInterface]){I[n.sInterface](j,p,k);}}};i.forEach(function(M){var I=M.pluginComp.componentHandle.getInstance();Object.keys(o).map(function(j){Object.keys(M.agents).map(function(p){if(o[j].PlugIns&&o[j].PlugIns[p]){var k=o[j].PlugIns[p];H(o[j].BlueBox,I,k,p);}});});t.subscribePluginAgents(M.agents,function(j,p,k){H(j,I,k,p);});});};this.startPluginAgentsLifeCycle=function(){var t=this;sap.ushell.Container.getServiceAsync("PluginManager").then(function(p){p.registerAgentLifeCycleManager(t._managePluginAgents.bind(t));});};this.init=function(i,j,k){var t=this;c={};A.init(this);d=k;E.once("StepDone").do(function(){t.startPluginAgentsLifeCycle();});E.once("pluginConfiguration").do(function(l){var s={};Object.keys(l).forEach(function(K){if(l[K].config&&l[K].config["sap-component-agents"]){s=q.extend(true,s,l[K].config["sap-component-agents"]);}});t.setStartupPlugins(s);});if(j){S=q.extend(true,S,j.supportedTypes);}P.registerShellCommunicationHandler({"sap.ushell.appRuntime":{oServiceCalls:{"startupPlugins":{executeServiceCallFn:function(l){return new q.Deferred().resolve(s).promise();}},"shellCheck":{executeServiceCallFn:function(l){return new q.Deferred().resolve({InShell:true}).promise();}}}},"sap.ushell.services.pluginManager":{oServiceCalls:{"status":{executeServiceCallFn:function(l){var n=l.oMessageData.body,p;if(l.oContainer&&o[l.oContainer]&&n&&n.name&&o[l.oContainer].PlugIns[n.name]){o[l.oContainer].PlugIns[n.name].status=n.status;p=m[n.name];if(p){p.map(function(r){r(l.oContainer,n.name,n);});}return new q.Deferred().resolve(o[l.oContainer].PlugIns).promise();}return new q.Deferred().resolve({}).promise();}}}}});};this.setStartupPlugins=function(i){s=JSON.parse(JSON.stringify(i));Object.keys(s).forEach(function(k){s[k].status="unknown";});};this.getPluginAgentStatus=function(i,j){return JSON.parse(JSON.stringify(o[i].PlugIns[j]));};this.isStatefulContainerSupported=function(i){var I=this.isCapabilitySupported(i,"sap.ushell.services.appLifeCycle","create")&&this.isCapabilitySupported(i,"sap.ushell.services.appLifeCycle","destroy");return I;};this.isKeepAliveSupported=function(i){var I=this.isCapabilitySupported(i,"sap.ushell.services.appLifeCycle","store")&&this.isCapabilitySupported(i,"sap.ushell.services.appLifeCycle","restore");return I;};this.mapCapabilities=function(i,j){this.setCapabilities(i,j);};this.getCapabilities=function(i){return o[i].oCapMap;};this.isCapabilitySupported=function(i,j,I){if(o[i]&&o[i].oCapMap&&o[i].oCapMap[j]){return!!o[i].oCapMap[j][I];}return false;};this.setCapabilities=function(i,j){var k;if(!o[i]){this.InitBlueBoxBD(i);}if(!o[i].oCapMap){o[i].oCapMap={};}k=o[i].oCapMap;Object.keys(j).forEach(function(l){var n=j[l],p;if(!k[n.service]){k[n.service]={};}p=k[n.service];p[n.action]=true;});if(!i.getIsStateful()&&this.isStatefulContainerSupported(i)){i.setIsStateful(true);}};this.removeCapabilities=function(i){if(o[i]){o[i].oCapMap={};i.setIsStateful(false);}};this.hasIFrame=function(i){if(i&&i._getIFrame){return true;}return false;};this.getStorageKey=function(i){return o[i].sStorageKey;};this.InitBlueBoxBD=function(i){o[i]={BlueBox:i,PlugIns:JSON.parse(JSON.stringify(s)),lastAction:undefined};};this.setAppCapabilities=function(i,T){if(!o[i]){this.InitBlueBoxBD(i);}o[i].currentAppTarget=T;o[i].appCapabilities=T.appCapabilities;if(T.appCapabilities&&T.appCapabilities.statefulContainer===true){this.setCapabilities(i,f);}};this.forEach=function(i){var k;for(k in o){if(o.hasOwnProperty(k)){i(o[k].BlueBox);}}};this.isCapByTarget=function(T,i){if(T.appCapabilities===undefined){return false;}if(C[i]&&T&&T.appCapabilities){return C[i].handler(T.appCapabilities);}return T.appCapabilities[i]||false;};this.isCapUT=function(i,j){var k=o[i];if(k===undefined||k.appCapabilities===undefined){return false;}if(C[j]&&k){return C[j].handler(k.appCapabilities,i);}return k.appCapabilities[j]||false;};this.setStorageKey=function(i,j){if(!o[i]){this.InitBlueBoxBD(i);}o[i].sStorageKey=j;};this.getStorageKey=function(i){if(!o[i]){return undefined;}return o[i].sStorageKey;};this.getHandler=function(){return h;};this._getBlueBoxCacheKey=function(u){var i,H,p,I="",j;if(u===undefined||u===""||u==="../"){return u;}try{i=new U(u);H=i.hostname();if(H===undefined||H===""){H=i.path();if(H===undefined||H===""){H=u;}}p=i.query(true);if(p["sap-iframe-hint"]){I="@"+p["sap-iframe-hint"];}}catch(k){L.error("URL '"+u+"' can not be parsed: "+k,"sap.ushell.components.applicationIntegration.application.BlueBoxHandler");H=u;}j=H+I;return j;};this.deleteStateFul=function(u){var i=this._getBlueBoxCacheKey(u);return this.delete(i);};this.getStateFul=function(u){if(u===undefined||Object.keys(c).length===0){return undefined;}var i=this._getBlueBoxCacheKey(u);if(i!==undefined){return this.get(i);}else{return undefined;}};this.destroyApp=function(i){d.postMessageToIframeApp("sap.ushell.services.appLifeCycle","destroy",{appId:i});};this.openApp=function(i){d.postMessageToIframeApp("sap.ushell.services.appLifeCycle","create",{appId:i,sHash:window.hasher.getHash()});};this.storeApp=function(i){d.postMessageToIframeApp("sap.ushell.services.appLifeCycle","store",{appId:i,sHash:window.hasher.getHash()});};this.restoreApp=function(i){d.postMessageToIframeApp("sap.ushell.services.appLifeCycle","restore",{appId:i,sHash:window.hasher.getHash()});};this.delete=function(u){if(c[u]){delete c[u];}};this.get=function(u){return c[u];};this.getById=function(i){for(var k in c){if(c.hasOwnProperty(k)){var j=c[k];if(j.sId===i){return j;}}}};this.set=function(u,i){var j=this._getBlueBoxCacheKey(u);c[j]=i;};}return new B();},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/application/PostMessageAPI',["sap/ushell/utils","sap/ui/core/Popup","sap/ui/core/library","sap/ui/thirdparty/jquery","sap/base/Log","sap/ui/core/UIComponent","sap/ushell/services/AppConfiguration","sap/ushell/ui/footerbar/AddBookmarkButton","sap/ushell/services/_AppState/AppStatePersistencyMethod","sap/ushell/EventHub","sap/ushell/components/applicationIntegration/application/PostMessageAPIInterface","sap/ui/thirdparty/URI","sap/base/util/ObjectPath","sap/ushell/Config","sap/base/util/UriParameters"],function(u,P,c,q,L,U,A,a,b,E,d,f,O,C,g){"use strict";var S="sap.ushell.";var D=new U(),p={};var o={"sap.ushell.services.CrossApplicationNavigation":{oServiceCalls:{"hrefForExternal":{executeServiceCallFn:function(e){return new q.Deferred().resolve(sap.ushell.Container.getService("CrossApplicationNavigation").hrefForExternal(e.oMessageData.body.oArgs)).promise();}},"getSemanticObjectLinks":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("CrossApplicationNavigation").getSemanticObjectLinks(e.oMessageData.body.sSemanticObject,e.oMessageData.body.mParameters,e.oMessageData.body.bIgnoreFormFactors,undefined,undefined,e.oMessageData.body.bCompactIntents);}},"isIntentSupported":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("CrossApplicationNavigation").isIntentSupported(e.oMessageData.body.aIntents);}},"isNavigationSupported":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("CrossApplicationNavigation").isNavigationSupported(e.oMessageData.body.aIntents);}},"backToPreviousApp":{executeServiceCallFn:function(){sap.ushell.Container.getService("CrossApplicationNavigation").backToPreviousApp();return new q.Deferred().resolve().promise();}},"historyBack":{executeServiceCallFn:function(e){sap.ushell.Container.getService("CrossApplicationNavigation").historyBack(e.oMessageData.body.iSteps);return new q.Deferred().resolve().promise();}},"getAppStateData":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("CrossApplicationNavigation").getAppStateData(e.oMessageData.body.sAppStateKey);}},"toExternal":{executeServiceCallFn:function(e){var k=u.clone(e.oMessageData.body.oArgs);u.storeSapSystemToLocalStorage(k);return new q.Deferred().resolve(sap.ushell.Container.getService("CrossApplicationNavigation").toExternal(k)).promise();}},"registerBeforeAppCloseEvent":{executeServiceCallFn:function(e){e.oContainer.setProperty("beforeAppCloseEvent",{enabled:true,params:e.oMessageData.body},true);return new q.Deferred().resolve().promise();}},"expandCompactHash":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("CrossApplicationNavigation").expandCompactHash(e.oMessageData.body.sHashFragment);}},"getDistinctSemanticObjects":{executeServiceCallFn:function(){return sap.ushell.Container.getService("CrossApplicationNavigation").getDistinctSemanticObjects();}},"getLinks":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("CrossApplicationNavigation").getLinks(e.oMessageData.body);}},"getPrimaryIntent":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("CrossApplicationNavigation").getPrimaryIntent(e.oMessageData.body.sSemanticObject,e.oMessageData.body.mParameters);}},"hrefForAppSpecificHash":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("CrossApplicationNavigation").hrefForAppSpecificHash(e.oMessageData.body.sAppHash);}},"isInitialNavigation":{executeServiceCallFn:function(){return sap.ushell.Container.getService("CrossApplicationNavigation").hrefForAppSpecificHash();}},"getAppState":{executeServiceCallFn:function(e){var k=new q.Deferred();sap.ushell.Container.getService("CrossApplicationNavigation").getAppState(D,e.oMessageData.body.sAppStateKey).done(function(l){delete l._oServiceInstance;k.resolve(l);});return k.promise();}},"setInnerAppRoute":{executeServiceCallFn:function(e){var k=sap.ushell.Container.getService("URLParsing"),H=k.parseShellHash(window.hasher.getHash()),n;if(H.appSpecificRoute===e.oMessageData.body.appSpecificRoute){return new q.Deferred().resolve().promise();}H.appSpecificRoute=e.oMessageData.body.appSpecificRoute;n="#"+k.constructShellHash(H);window.hasher.changed.active=false;window.hasher.replaceHash(n);window.hasher.changed.active=true;return new q.Deferred().resolve().promise();}},"setInnerAppStateData":{executeServiceCallFn:function(e){var k=h.prototype._setInnerAppStateData(e);return new q.Deferred().resolve(k).promise();}},"resolveIntent":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("CrossApplicationNavigation").resolveIntent(e.oMessageData.body.sHashFragment);}}}},"sap.ushell.ui5service.ShellUIService":{oServiceCalls:{"setTitle":{executeServiceCallFn:function(e){return new q.Deferred().resolve(e.oContainer.getShellUIService().setTitle(e.oMessageData.body.sTitle)).promise();}},"setBackNavigation":{executeServiceCallFn:function(e){return e.executeSetBackNavigationService(e.oMessage,e.oMessageData);}}}},"sap.ushell.services.ShellUIService":{oServiceCalls:{"setTitle":{executeServiceCallFn:function(e){return new q.Deferred().resolve(e.oContainer.getShellUIService().setTitle(e.oMessageData.body.sTitle)).promise();}},"setHierarchy":{executeServiceCallFn:function(e){return new q.Deferred().resolve(e.oContainer.getShellUIService().setHierarchy(e.oMessageData.body.aHierarchyLevels)).promise();}},"setRelatedApps":{executeServiceCallFn:function(e){return new q.Deferred().resolve(e.oContainer.getShellUIService().setRelatedApps(e.oMessageData.body.aRelatedApps)).promise();}},"setDirtyFlag":{executeServiceCallFn:function(e){sap.ushell.Container.setDirtyFlag(e.oMessageData.body.bIsDirty);return new q.Deferred().resolve().promise();}},"showShellUIBlocker":{executeServiceCallFn:function(e){s(e.oMessageData.body.bShow);return new q.Deferred().resolve().promise();}},"getFLPUrl":{executeServiceCallFn:function(e){var I=false;if(e.oMessageData.body&&e.oMessageData.body.bIncludeHash===true){I=true;}return new q.Deferred().resolve(sap.ushell.Container.getFLPUrl(I)).promise();}},"getShellGroupIDs":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("Bookmark").getShellGroupIDs((e.oMessageData.body?e.oMessageData.body.bGetAll:undefined));}},"addBookmark":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("Bookmark").addBookmarkByGroupId(e.oMessageData.body.oParameters,e.oMessageData.body.groupId);}},"addBookmarkDialog":{executeServiceCallFn:function(e){var k=new a();k.firePress({});return new q.Deferred().resolve().promise();}},"getShellGroupTiles":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("LaunchPage").getTilesByGroupId(e.oMessageData.body.groupId);}},"sendUrlAsEmail":{executeServiceCallFn:function(e){var k=C.last("/core/shellHeader/application").title;var l=(k===undefined)?sap.ushell.resources.i18n.getText("linkToApplication"):sap.ushell.resources.i18n.getText("linkTo")+" '"+k+"'";h.prototype._sendEmail("",l,document.URL,"","",document.URL,true);return new q.Deferred().resolve().promise();}},"sendEmailWithFLPButton":{executeServiceCallFn:function(e){var k=C.last("/core/shellHeader/application").title;var l=(k===undefined)?sap.ushell.resources.i18n.getText("linkToApplication"):sap.ushell.resources.i18n.getText("linkTo")+" '"+k+"'";h.prototype._sendEmail("",l,document.URL,"","",document.URL,e.oMessageData.body.bSetAppStateToPublic);return new q.Deferred().resolve().promise();}},"sendEmail":{executeServiceCallFn:function(e){h.prototype._sendEmail(e.oMessageData.body.sTo,e.oMessageData.body.sSubject,e.oMessageData.body.sBody,e.oMessageData.body.sCc,e.oMessageData.body.sBcc,e.oMessageData.body.sIFrameURL,e.oMessageData.body.bSetAppStateToPublic);}},"processHotKey":{executeServiceCallFn:function(e){var k;try{k=new KeyboardEvent('keydown',e.oMessageData.body);}catch(l){var I=document.createEvent("KeyboardEvent"),m="";if(e.oMessageData.body.altKey){m+="Alt ";}if(e.oMessageData.body.ctrlKey){m+="Control ";}if(e.oMessageData.body.shiftKey){m+="Shift ";}I.initKeyboardEvent("keydown",false,false,null,e.oMessageData.body.key,e.oMessageData.body.keyCode,m,0,false);k=I;}document.dispatchEvent(k);return new q.Deferred().resolve().promise();}}}},"sap.ushell.services.Container":{oServiceCalls:{"setDirtyFlag":{executeServiceCallFn:function(e){sap.ushell.Container.setDirtyFlag(e.oMessageData.body.bIsDirty);return new q.Deferred().resolve().promise();}},"getFLPUrl":{executeServiceCallFn:function(e){var I=false;if(e.oMessageData.body&&e.oMessageData.body.bIncludeHash===true){I=true;}return new q.Deferred().resolve(sap.ushell.Container.getFLPUrl(I)).promise();}},"getFLPConfig":{executeServiceCallFn:function(e){var k=new q.Deferred();sap.ushell.Container.getFLPConfig().then(function(F){k.resolve(F);});return k.promise();}}}},"sap.ushell.services.AppState":{oServiceCalls:{"getAppState":{executeServiceCallFn:function(e){var k=new q.Deferred();sap.ushell.Container.getService("AppState").getAppState(e.oMessageData.body.sKey).done(function(l){delete l._oServiceInstance;k.resolve(l);}).fail(function(l){delete l._oServiceInstance;k.resolve(l);});return k.promise();}},"_saveAppState":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("AppState")._saveAppState(e.oMessageData.body.sKey,e.oMessageData.body.sData,e.oMessageData.body.sAppName,e.oMessageData.body.sComponent,e.oMessageData.body.bTransient,e.oMessageData.body.iPersistencyMethod,e.oMessageData.body.oPersistencySettings);}},"_loadAppState":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("AppState")._loadAppState(e.oMessageData.body.sKey);}},"deleteAppState":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("AppState").deleteAppState(e.oMessageData.body.sKey);}},"makeStatePersistent":function(e){return sap.ushell.Container.getService("AppState").makeStatePersistent(e.oMessageData.body.sKey,e.oMessageData.body.iPersistencyMethod,e.oMessageData.body.oPersistencySettings);}}},"sap.ushell.services.Bookmark":{oServiceCalls:{"addBookmarkUI5":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("Bookmark").addBookmark(e.oMessageData.body.oParameters,e.oMessageData.body.vContainer);}},"addBookmark":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("Bookmark").addBookmarkByGroupId(e.oMessageData.body.oParameters,e.oMessageData.body.groupId);}},"getShellGroupIDs":{executeServiceCallFn:function(){return sap.ushell.Container.getService("Bookmark").getShellGroupIDs();}},"addCatalogTileToGroup":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("Bookmark").addCatalogTileToGroup(e.oMessageData.body.sCatalogTileId,e.oMessageData.body.sGroupId,e.oMessageData.body.oCatalogData);}},"countBookmarks":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("Bookmark").countBookmarks(e.oMessageData.body.sUrl);}},"deleteBookmarks":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("Bookmark").deleteBookmarks(e.oMessageData.body.sUrl);}},"updateBookmarks":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("Bookmark").updateBookmarks(e.oMessageData.body.sUrl,e.oMessageData.body.oParameters);}},"getContentNodes":{executeServiceCallFn:function(){var e=q.Deferred();sap.ushell.Container.getService("Bookmark").getContentNodes().then(function(n){e.resolve(n);});return e.promise();}},"addCustomBookmark":{executeServiceCallFn:function(e){var k=q.Deferred();sap.ushell.Container.getService("Bookmark").addCustomBookmark(e.oMessageData.body.sVizType,e.oMessageData.body.oConfig,e.oMessageData.body.vContentNodes).then(function(){k.resolve();});return k.promise();}},"countCustomBookmarks":{executeServiceCallFn:function(e){var k=q.Deferred();sap.ushell.Container.getService("Bookmark").countCustomBookmarks(e.oMessageData.body.oIdentifier).then(function(l){k.resolve(l);});return k.promise();}},"updateCustomBookmarks":{executeServiceCallFn:function(e){var k=q.Deferred();sap.ushell.Container.getService("Bookmark").updateCustomBookmarks(e.oMessageData.body.oIdentifier,e.oMessageData.body.oConfig).then(function(l){k.resolve(l);});return k.promise();}},"deleteCustomBookmarks":{executeServiceCallFn:function(e){var k=q.Deferred();sap.ushell.Container.getService("Bookmark").deleteCustomBookmarks(e.oMessageData.body.oIdentifier).then(function(l){k.resolve(l);});return k.promise();}}}},"sap.ushell.services.AppLifeCycle":{oServiceCalls:{"getFullyQualifiedXhrUrl":{executeServiceCallFn:function(e){var r="",x="",k=new q.Deferred(),l=e.oMessageData.body.path;if(l!=""&&l!=undefined&&l!=null){sap.ushell.Container.getService("AppLifeCycle").getCurrentApplication().getSystemContext().then(function(m){x=m.getFullyQualifiedXhrUrl(l);var H="",n="",t="",F=sap.ushell.Container.getFLPUrl(true),v=new f(F);if(v.protocol()!=null&&v.protocol()!=undefined&&v.protocol()!=""){n=v.protocol()+"://";}if(v.hostname()!=null&&v.hostname()!=undefined&&v.hostname()!=""){H=v.hostname();}if(v.port()!=null&&v.port()!=undefined&&v.port()!=""){t=":"+v.port();}r=n+H+t+x;k.resolve(r);});}return k.promise();}},"getSystemAlias":{executeServiceCallFn:function(e){var k=e.oContainer.getSystemAlias();if(k===null||k===undefined){k="";}return new q.Deferred().resolve(k).promise();}}}},"sap.ushell.services.AppConfiguration":{oServiceCalls:{"setApplicationFullWidth":{executeServiceCallFn:function(e){A.setApplicationFullWidth(e.oMessageData.body.bValue);return new q.Deferred().resolve().promise();}}}},"sap.ushell.appRuntime":{oRequestCalls:{"innerAppRouteChange":{isActiveOnly:true,distributionType:["all"]},"hashChange":{isActiveOnly:true,distributionType:["URL"]},"setDirtyFlag":{isActiveOnly:true,distributionType:["URL"]},"themeChange":{isActiveOnly:false,distributionType:["all"]},"uiDensityChange":{isActiveOnly:false,distributionType:["all"]}},oServiceCalls:{"hashChange":{executeServiceCallFn:function(e){window.hasher.disableBlueBoxHashChangeTrigger=true;window.hasher.replaceHash(e.oMessageData.body.newHash);window.hasher.disableBlueBoxHashChangeTrigger=false;return new q.Deferred().resolve().promise();}}}},"sap.ushell.services.UserInfo":{oServiceCalls:{"getThemeList":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("UserInfo").getThemeList();}},"openThemeManager":{executeServiceCallFn:function(e){E.emit("openThemeManager",Date.now());return new q.Deferred().resolve().promise();}}}},"sap.ushell.services.ShellNavigation":{oServiceCalls:{"toExternal":{executeServiceCallFn:function(e){sap.ushell.Container.getService("ShellNavigation").toExternal(e.oMessageData.body.oArgs,undefined,e.oMessageData.body.bWriteHistory);return new q.Deferred().resolve().promise();}},"toAppHash":{executeServiceCallFn:function(e){sap.ushell.Container.getService("ShellNavigation").toAppHash(e.oMessageData.body.sAppHash,e.oMessageData.body.bWriteHistory);return new q.Deferred().resolve().promise();}}}},"sap.ushell.services.NavTargetResolution":{oServiceCalls:{"getDistinctSemanticObjects":{executeServiceCallFn:function(){return sap.ushell.Container.getService("NavTargetResolution").getDistinctSemanticObjects();}},"expandCompactHash":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("NavTargetResolution").expandCompactHash(e.oMessageData.body.sHashFragment);}},"resolveHashFragment":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("NavTargetResolution").resolveHashFragment(e.oMessageData.body.sHashFragment);}},"isNavigationSupported":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("NavTargetResolution").isNavigationSupported(e.oMessageData.body.aIntents);}}}},"sap.ushell.services.Renderer":{oServiceCalls:{"addHeaderItem":{executeServiceCallFn:function(e){j("addHeaderItem",e);return new q.Deferred().resolve().promise();}},"addHeaderEndItem":{executeServiceCallFn:function(e){j("addHeaderEndItem",e);return new q.Deferred().resolve().promise();}},"showHeaderItem":{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").showHeaderItem(e.oMessageData.body.aIds,e.oMessageData.body.bCurrentState||true,e.oMessageData.body.aStates);return new q.Deferred().resolve().promise();}},"showHeaderEndItem":{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").showHeaderEndItem(e.oMessageData.body.aIds,e.oMessageData.body.bCurrentState||true,e.oMessageData.body.aStates);return new q.Deferred().resolve().promise();}},"hideHeaderItem":{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").hideHeaderItem(e.oMessageData.body.aIds,e.oMessageData.body.bCurrentState||true,e.oMessageData.body.aStates);return new q.Deferred().resolve().promise();}},"hideHeaderEndItem":{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").hideHeaderEndItem(e.oMessageData.body.aIds,e.oMessageData.body.bCurrentState||true,e.oMessageData.body.aStates);return new q.Deferred().resolve().promise();}},"setHeaderTitle":{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").setHeaderTitle(e.oMessageData.body.sTitle);return new q.Deferred().resolve().promise();}},"setHeaderVisibility":{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").setHeaderVisibility(e.oMessageData.body.bVisible,e.oMessageData.body.bCurrentState||true,e.oMessageData.body.aStates);return new q.Deferred().resolve().promise();}},"createShellHeadItem":{executeServiceCallFn:function(e){var k=e.oMessageData.body.params;k.press=function(){e.oContainer.postMessageRequest("sap.ushell.appRuntime.buttonClick",{buttonId:k.id});};new sap.ushell.ui.shell.ShellHeadItem(k);return new q.Deferred().resolve().promise();}},"showActionButton":{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").showActionButton(e.oMessageData.body.aIds,e.oMessageData.body.bCurrentState,e.oMessageData.body.aStates);return new q.Deferred().resolve().promise();}},"hideActionButton":{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").hideActionButton(e.oMessageData.body.aIds,e.oMessageData.body.bCurrentState,e.oMessageData.body.aStates);return new q.Deferred().resolve().promise();}},"addUserAction":{executeServiceCallFn:function(e){e.oMessageData.body.oParameters.oControlProperties.press=function(){e.oContainer.postMessageRequest("sap.ushell.appRuntime.buttonClick",{buttonId:e.oMessageData.body.oParameters.oControlProperties.id});};sap.ushell.Container.getRenderer("fiori2").addUserAction(e.oMessageData.body.oParameters);return new q.Deferred().resolve().promise();}},"addOptionsActionSheetButton":{executeServiceCallFn:function(e){new sap.m.Button({id:e.oMessageData.body.id,text:e.oMessageData.body.text,icon:e.oMessageData.body.icon,tooltip:e.oMessageData.tooltip,press:function(){e.oContainer.postMessageRequest("sap.ushell.appRuntime.buttonClick",{buttonId:e.oMessageData.body.id});}});sap.ushell.Container.getRenderer("fiori2").showActionButton([e.oMessageData.body.id],false,e.oMessageData.body.aStates);return new q.Deferred().resolve().promise();}},"removeOptionsActionSheetButton":{executeServiceCallFn:function(e){var B=sap.ui.getCore().byId(e.oMessageData.body.id);sap.ushell.Container.getRenderer("fiori2").hideActionButton(e.oMessageData.body.id,false,e.oMessageData.body.aStates);B.destroy();return new q.Deferred().resolve().promise();}}}},"sap.ushell.services.LaunchPage":{oServiceCalls:{"getGroupsForBookmarks":{executeServiceCallFn:function(){return sap.ushell.Container.getService("LaunchPage").getGroupsForBookmarks();}}}}};function h(){this._getBrowserURL=function(){return document.URL;};Object.keys(o).forEach(function(k){if(k.indexOf(S)!=0){throw new Error("All Post Message APIs must start with '"+S+"' - "+k);}});d.init(true,h.prototype.registerShellCommunicationHandler.bind(this));}h.prototype.getAPIs=function(){return o;};function i(k,e){var l=o[k],n;if(l){if(e.oServiceCalls){Object.keys(e.oServiceCalls).forEach(function(m){l.oServiceCalls[m]=e.oServiceCalls[m];});}if(e.oRequestCalls){Object.keys(e.oRequestCalls).forEach(function(m){l.oRequestCalls[m]=e.oRequestCalls[m];});}return;}n={oRequestCalls:{},oServiceCalls:{}};if(e.oServiceCalls){Object.keys(e.oServiceCalls).forEach(function(m){n.oServiceCalls[m]=e.oServiceCalls[m];});}if(e.oRequestCalls){Object.keys(e.oRequestCalls).forEach(function(m){n.oRequestCalls[m]=e.oRequestCalls[m];});}o[k]=n;}h.prototype._getPostMesageInterface=function(e,I){var k,l=this.getAPIs();if(l[e]){k=l[e];if(k&&k.oRequestCalls&&k.oRequestCalls[I]){return k.oRequestCalls[I];}}return undefined;};h.prototype.registerShellCommunicationHandler=function(e){Object.keys(e).forEach(function(k){i(k,e[k]);});};h.prototype.isActiveOnly=function(e,I){var k=this._getPostMesageInterface(e,I);if(k){return k.isActiveOnly;}return undefined;};h.prototype.getResponseHandler=function(e,I){var k=this._getPostMesageInterface(e,I);if(k){return k.fnResponseHandler;}return undefined;};h.prototype._createNewInnerAppState=function(k){var l=sap.ushell.Container.getService("AppState"),n,H,m,N,v;n=l.createEmptyAppState(undefined,false);if(k.oMessageData.body.sData!==undefined){try{v=JSON.parse(k.oMessageData.body.sData);}catch(e){v=k.oMessageData.body.sData;}}else{v="";}n.setData(v);n.save();N=n.getKey();H=window.hasher.getHash();if(H.indexOf("&/")>0){if(H.indexOf("sap-iapp-state=")>0){m=/(?:sap-iapp-state=)([^&/]+)/.exec(H)[1];H=H.replace(m,N);}else{H=H+"/sap-iapp-state="+N;}}else{H=H+"&/sap-iapp-state="+N;}window.hasher.changed.active=false;window.hasher.replaceHash(H);window.hasher.changed.active=true;return N;};h.prototype._setInnerAppStateData=function(e){return h.prototype._createNewInnerAppState(e);};function s(e){if(e===true&&p.oDlg===undefined){if(q("#canvas")&&q("#canvas").hasClass("sapUshellShellBG")){q("#canvas").removeClass("sapUshellShellBG");p.bClassRemoved=true;}p.oDlg=new P();p.oDlg.setShadow(true);p.oDlg.setModal(true,"sapMDialogBlockLayerInit");p.oDlg.setNavigationMode("SCOPE");p.oDlg.eOpenState=c.OpenState.OPEN;q("#shell-cntnt").css("zIndex",40);p.oDlg._iZIndex=30;p.oDlg._duringOpen();}else if(e===false&&p.oDlg!==undefined){p.oDlg._oLastPosition=p.oDlg._oDefaultPosition;p.oDlg.destroy();if(p.bClassRemoved===true){q("#canvas").addClass("sapUshellShellBG");}p.oDlg=undefined;p.bClassRemoved=false;q("#shell-cntnt").css("zIndex","auto");}}function j(e,k){sap.ushell.Container.getRenderer("fiori2")[e]("sap.ushell.ui.shell.ShellHeadItem",{id:k.oMessageData.body.sId,tooltip:k.oMessageData.body.sTooltip,icon:k.oMessageData.body.sIcon,press:function(){k.oContainer.postMessageRequest("sap.ushell.appRuntime.buttonClick",{buttonId:k.oMessageData.body.sId});}},k.oMessageData.body.bVisible,k.oMessageData.body.bCurrentState||true,k.oMessageData.body.aStates);}h.prototype._sendEmail=function(t,e,B,k,l,I,m){var F=this._getBrowserURL();function r(I,F){if(I&&I.length>0&&((e&&e.includes(I))||(B&&B.includes(I)))){if(B&&B.includes(I)){B=B.replace(I,F);}if(e&&e.includes(I)){e=e.replace(I,F);}}}if(m){sap.ushell.Container.getService("AppState").setAppStateToPublic(I).done(function(n,x,v,X,w){if(X!==undefined){F=F.replace(x,X);}if(w!==undefined){F=F.replace(v,w);}r(I,F);sap.m.URLHelper.triggerEmail(t,e,B,k,l);}).fail(L.error);}else{r(I,F);sap.m.URLHelper.triggerEmail(t,e,B,k,l);}};return new h();},false);
sap.ui.predefine('sap/ushell/components/applicationIntegration/application/PostMessageAPIInterface',[],function(){"use strict";var U="user.postapi.";function P(){var _,a;this.init=function(i,D){_=i;a=D;};this.getInterface=function(){var i={};i["registerPostMessageAPIs"]=r.bind(null,a);i[(_===true?"postMessageToApp":"postMessageToFlp")]=d.bind(null,_);i["createPostMessageResult"]=c;return i;};}function r(D,p){var R={status:"success",desc:""},o={isActiveOnly:true,distributionType:["all"],fnResponseHandler:function(){}};if(p===undefined||Object.keys(p).length<=0){R.status="error";R.desc="no handler was found to register";return R;}Object.keys(p).forEach(function(s){if(typeof s!=="string"){R.status="error";R.desc="oPostMessageAPIs should contain only string keys";}else if(s.indexOf(U)!==0){R.status="error";R.desc="all user custom Message APIs must start with '"+U+"'";}else{Object.keys(p[s]).forEach(function(t){if(t=="inCalls"){p[s]["oServiceCalls"]=p[s][t];delete p[s][t];}else if(t=="outCalls"){Object.keys(p[s][t]).forEach(function(m){p[s][t][m]=jQuery.extend(true,{},o,p[s][t][m]);});p[s]["oRequestCalls"]=p[s][t];delete p[s][t];}else{R.status="error";R.desc="api should contain either 'inCalls' or 'outCalls'";}});}});if(R.status==="success"){D(p);}return R;}function d(i,s,I,p){var D=new jQuery.Deferred();if(p===undefined){p={};}if(i){sap.ui["require"](["sap/ushell/components/applicationIntegration/AppLifeCycle"],function(A){A.postMessageToIframeApp(s,I,p,true).then(function(R){D.resolve(R&&R[0]&&R[0].body.result);});});}else{sap.ui["require"](["sap/ushell/appRuntime/ui5/AppRuntimeService"],function(A){A.sendMessageToOuterShell(s+"."+I,p).done(function(R){D.resolve(R);});});}return D.promise();}function c(R){if(R===undefined){R={};}return new jQuery.Deferred().resolve(R).promise();}return new P();},false);
sap.ui.predefine('sap/ushell/components/applicationIntegration/configuration/AppMeta',["sap/ushell/services/AppConfiguration","sap/ushell/components/applicationIntegration/elements/model","sap/ui/Device","sap/ushell/Config","sap/ushell/utils","sap/ushell/resources","sap/ushell/EventHub","sap/ushell/components/applicationIntegration/relatedShellElements/RelatedShellElements","sap/ui/thirdparty/jquery","sap/ui/performance/Measurement","sap/ui/util/Mobile"],function(A,E,D,C,u,r,a,R,q,M,b){"use strict";function c(){var i,t=this,d,s,e;this.getIsTitleChanged=function(){return i;};this.getIsRelatedAppsChanged=function(){return e;};this.getHierarchyDefaultValue=function(){var h=[];var f=C.last("/core/shell/model/currentState/stateName");if(f&&((f==="app"||f==="embedded"))){h=[{icon:"sap-icon://home",title:r.i18n.getText("actionHomePage"),intent:s?"#"+s:"#"}];}return h;};this.init=function(I){s=I;};this.getIsHierarchyChanged=function(){return d;};this.onHierarchyChange=function(o){d=true;var h=o.getParameters().data,H,f=[],g=C.last("/core/shell/model/currentState/stateName");if(!h){h=[];}H=t.getHierarchyDefaultValue();h.forEach(function(I,j){f[j]=q.extend({},I);});f=f.concat(H);if(g==="home"){E.updateStateProperty("application/hierarchy",f,false,["home"]);}E.updateStateProperty("application/hierarchy",f,true);};this.onRelatedAppsChange=function(o){e=true;var f=o.getParameters().data,g=C.last("/core/shell/model/currentState/stateName");if(!f){f=[];}if(g==="home"){E.updateStateProperty("application/relatedApps",f,false,["home"]);}E.updateStateProperty("application/relatedApps",f,true);};this.resetShellUIServiceHandlers=function(){e=false;d=false;i=false;};this.onTitleChange=function(o){i=true;var T=o.getParameters().data;if(!T){T=this.getAppMeta().getTitleDefaultValue();}var f=C.last("/core/shell/model/currentState/stateName");if(f==="home"){E.updateStateProperty("application/title",T,false,["home"]);}E.updateStateProperty("application/title",T,true);R.genericSetItem("application/title",T);window.document.title=T;u.setPerformanceMark("FLP -- title change");a.emit("TitleChanged",T);};this._getDefaultFavIcon=function(p){var f=p.get("sapUiShellFavicon");if(f){var m=/url[\s]*\('?"?([^'")]*)'?"?\)/.exec(f);if(m){f=m[1];}else if(f==="''"||f==="none"){f=null;}}if(!f){var g=q.sap.getModulePath("sap.ushell");return g+"/themes/base/img/launchpad_favicon.ico";}return f;};this.getFavIconHref=function(){return q("link").filter("[rel=\"shortcut icon\"]").attr("href")||"";};this.getAppIcon=function(){var I="sap-icon://folder",f=A.getMetadata();if(f&&f.icon){I=f.icon;}return I;};this.setAppIcons=function(m){M.start("FLP:ShellController.setAppIcons","setValues","FLP");var t=this;sap.ui.require(["sap/ui/core/theming/Parameters"],function(P){if(sap.ui.getCore().isThemeApplied()){t.setValues(m,P);}else{sap.ui.getCore().attachThemeChanged(function(){t.setValues(m,P);});}});M.end("FLP:ShellController.setAppIcons");};this.setValues=function(m,P){var f=q.sap.getModulePath("sap.ushell"),l=(m&&m.homeScreenIconPhone)||(f+"/themes/base/img/launchicons/57_iPhone_Desktop_Launch.png"),L=(m&&m["homeScreenIconPhone@2"])||(f+"/themes/base/img/launchicons/114_iPhone-Retina_Web_Clip.png"),o=(m&&m.homeScreenIconTablet)||(f+"/themes/base/img/launchicons/72_iPad_Desktop_Launch.png"),g=(m&&m["homeScreenIconTablet@2"])||(f+"/themes/base/img/launchicons/144_iPad_Retina_Web_Clip.png"),F=(m&&m.favIcon)||(this._getDefaultFavIcon(P)),h=this.getFavIconHref();if(D.os.ios){b.setIcons({"phone":l,"phone@2":L,"tablet":o,"tablet@2":g,"favicon":F,"precomposed":false});}else if(h!==F){b.setIcons({"phone":"","phone@2":"","tablet":"","tablet@2":"","favicon":F,"precomposed":true});}};this._applyContentDensityByPriority=function(f,g){var h;if(f===undefined){if(D.system.combi){var j=sap.ushell.Container.getService("UserInfo"),U=j.getUser(),k="autoDetect";if(U){k=U.getContentDensity();}switch(k){case"cozy":f=false;break;case"compact":f=true;break;default:h=A.getMetadata();if(h.compactContentDensity&&!h.cozyContentDensity){f=true;}else{f=false;}}}else{h=A.getMetadata();if(h.compactContentDensity&&!h.cozyContentDensity){f=true;}else if(!h.compactContentDensity&&h.cozyContentDensity){f=false;}else{f=this._isCompactContentDensityByDevice();}}}this._applyContentDensityClass(f,g);};this._applyContentDensityClass=function(f,g){var I=this._isCompactContentDensityByDevice();return new Promise(function(h,j){function k(l){q("body").toggleClass("sapUiSizeCompact",l).toggleClass("sapUiSizeCozy",!l);if(g===true){sap.ui.require(["sap/ushell/components/applicationIntegration/AppLifeCycle"],function(m){m.postMessageToIframeApp("sap.ushell.appRuntime","uiDensityChange",{"isTouch":(l?"0":"1")});});}h();}if(f===undefined){sap.ushell.Container.getServiceAsync("UserInfo").then(function(l){var U=l.getUser?l.getUser():undefined;k(U&&U.getContentDensity()==="cozy"?false:I);});}else{k(!!f);}});};this._isCompactContentDensityByDevice=function(){return!D.support.touch||D.system.combi;};this.getTitleDefaultValue=function(){var T="",f=A.getMetadata();if(f&&f.title){T=f.title;}return T;};this.create=function(){};this.restore=function(I){this._applyContentDensityByPriority();this.setAppIcons(I);};this.store=function(I){};this.destroy=function(I){};}return new c();},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/elements/model',["sap/ushell/EventHub","sap/ushell/Config","sap/ushell/utils","sap/ushell/components/HeaderManager","sap/ushell/components/StateHelper","sap/ui/performance/Measurement","sap/base/Log","sap/ui/thirdparty/jquery"],function(E,C,u,H,S,M,L,q){"use strict";var b;var c;function a(){return{"home":{"actions":["ContactSupportBtn","EndUserFeedbackBtn"]},"app":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]},"minimal":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]},"standalone":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]},"embedded":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]},"embedded-home":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]},"lean":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]}};}function d(){return{"blank":{"stateName":"blank","showCurtain":false,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"search":""},"blank-home":{"stateName":"blank-home","showCurtain":false,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"search":""},"home":{"stateName":"home","showCurtain":false,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"search":"","paneContent":[],"actions":["openCatalogBtn","userSettingsBtn"],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[]},"app":{"stateName":"app","showCurtain":false,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"search":"","actions":["openCatalogBtn","userSettingsBtn"],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[]},"minimal":{"stateName":"minimal","showCurtain":false,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"actions":["openCatalogBtn","userSettingsBtn"],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"search":""},"standalone":{"stateName":"standalone","showCurtain":false,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"search":""},"embedded":{"stateName":"embedded","showCurtain":false,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"search":""},"embedded-home":{"stateName":"embedded-home","showCurtain":false,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"search":""},"headerless":{"stateName":"headerless","showCurtain":false,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"search":""},"merged":{"stateName":"merged","showCurtain":false,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"search":""},"headerless-home":{"stateName":"headerless-home","showCurtain":false,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"search":""},"merged-home":{"stateName":"merged-home","showCurtain":false,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"search":""},"lean":{"stateName":"lean","showCurtain":false,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":false,"paneContent":[],"search":"","actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[]},"lean-home":{"stateName":"lean-home","showCurtain":false,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":false,"paneContent":[],"search":"","actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[]}};}function r(O,k){return Object.keys(O).reduce(function(o,K){if(!k[K]){o[K]=O[K];}return o;},{});}function v(i,j){return j!==undefined;}function n(){return true;}function g(o,m){var p=m.split("/");var i=o;p.shift();p.forEach(function(P){if(!i){return;}i=i[P];});return i;}function e(m,V,o){var p=m.split("/");var i=o;p.shift();var P=p.pop();p.forEach(function(s){i=i[s];});i[P]=V;}function f(){var o;var s;var k;var A;var m;var I;var l;var p;var t;var w;this.createDefaultTriggers=function(i){var R=function(B,D,F){if(F.sProperty==="actions"){var G=g(F.oModel,F.path);if(G&&G.length===0&&F.aIds&&F.aIds.length>0){this._renderShellState();}}}.bind(this);var j=function(B){function D(O,N){var U=sap.ushell.Container.getService("URLParsing"),G=U.getHash(O),J=U.getHash(N),K=U.parseShellHash(G).appSpecificRoute,P=U.parseShellHash(J).appSpecificRoute;return K!==P;}var F=D(B.oldURL,B.newURL);if(F){this.addHeaderItem(["backBtn"],true);}}.bind(this);this.createTriggersOnBaseStates([{sName:"onAddFirstAction",fnRegister:function(){sap.ui.getCore().getEventBus().subscribe("launchpad","updateShell",R,this);},fnUnRegister:function(){sap.ui.getCore().getEventBus().unsubscribe("launchpad","updateShell",R,this);}}],["blank","blank-home"],i);var y=this;var z;this.createTriggersOnBaseStates([{sName:"onAddFirstAction",fnRegister:function(){window.addEventListener("hashchange",j);var N=0;z=E.on("AppRendered").do(function(){N++;if(N>=2){y.addHeaderItem(["backBtn"],true);}});},fnUnRegister:function(){window.removeEventListener("hashchange",j);if(z){z.off();}}}],["lean","lean-home"],i);};this.init=function(i,j){b=d();c=a();s=C.last("/core/shell/model");o={};m={};I=false;p=false;t=[];w=true;A=j;l=undefined;if(i){M.start("FLP:ElementsModel.init","moveShellHeaderEndItems","FLP");if(i.moveContactSupportActionToShellHeader){this._removeCustomDataActionBtnFromMeArea("ContactSupportBtn");}if(i.moveGiveFeedbackActionToShellHeader){this._removeCustomDataActionBtnFromMeArea("EndUserFeedbackBtn");}if(i.moveAppFinderActionToShellHeader){this._removeActionFromMeArea("openCatalogBtn");}if(i.moveUserSettingsActionToShellHeader){this._removeActionFromMeArea("userSettingsBtn");}M.end("FLP:ElementsModel.init");}var y=i&&i.appState?i.appState:"home";this.createDefaultTriggers(y);this.switchState(y);};this.destroy=function(){s=undefined;o=undefined;A=undefined;m=undefined;I=undefined;w=undefined;p=undefined;l=undefined;b=undefined;c=undefined;};this.getModel=function(){var R=sap.ushell.Container.getRenderer("fiori2");if(!R){return undefined;}return R._oShellView.getModel();};this._removeCustomDataActionBtnFromMeArea=function(i){for(var j in c){var y=c[j];var z=y.actions;var B=z.indexOf(i);if(B!==-1){c[j].actions.splice(B,1);}}};this._removeActionFromMeArea=function(B){var i;for(i in b){var j=b[i];if(i==="blank"||i==="blank-home"){continue;}var y=j.actions;var z=y.indexOf(B);if(z!==-1){b[i].actions.splice(z,1);}}};this.destroyManageQueue=function(){this._destroyManageQueue(["home","embedded-home","headerless-home","merged-home","blank-home","lean-home"]);};this.switchState=function(i){var j=u.clone(b[i]);var y=r(j,{aTriggers:true});C.emit("/core/shell/model/currentState",y);H.switchState(i);k=A.customShellState;l=undefined;this._renderShellState();return j;};this.setLeftPaneVisibility=function(V,i,j){this.updateStateProperty("showPane",V,i,j);};this.setHeaderHiding=function(){L.warning("Application Life Cycle model: headerHiding property is deprecated and has no effect");};this._createHeaderEventPayload=function(P,V,i,j,D,y){var z={propertyName:P,value:V,aStates:j,bCurrentState:i,action:y,bDoNotPropagate:D};return z;};this.setHeaderVisibility=function(V,i,j){var P=this._createHeaderEventPayload("headerVisible",V,i,j,false);H.updateStates(P);};this.showLogo=function(i,j){this.updateShowLogo(true,i,j,false);};this.updateShowLogo=function(V,i,j,D){var P=this._createHeaderEventPayload("showLogo",V,i,j,D);H.updateStates(P);};this.addHeaderItem=function(i,j,y){if(i.length){var P=this._createHeaderEventPayload("headItems",i,j,y,false);H.updateStates(P);}};this.removeHeaderItem=function(i,j,y){var P=this._createHeaderEventPayload("headItems",i,j,y,false,"remove");H.updateStates(P);};this.addHeaderEndItem=function(i,j,y,D){if(i.length){var P=this._createHeaderEventPayload("headEndItems",i,j,y,D);H.updateStates(P);}};this.removeHeaderEndItem=function(i,j,y){var P=this._createHeaderEventPayload("headEndItems",i,j,y,false,"remove");H.updateStates(P);};this.addSubHeader=function(i,j,y){if(i.length){this._addShellItem("subHeader",i,j,y);}};this.removeSubHeader=function(i,j,y){this._removeShellItem("subHeader",i,j,y);};this.addActionButton=function(i,j,y){this._addActionButton("actions",i,j,y);};this.removeActionButton=function(i,j,y){this._removeShellItem("actions",i,j,y);};this.addToolAreaItem=function(i,j,y,z){if(i.length){this._addToolAreaItem("toolAreaItems",i,j,y,z);}};this.removeToolAreaItem=function(i,j,y){this._removeShellItem("toolAreaItems",i,j,y);};this.addLeftPaneContent=function(i,j,y){if(i.length){this._addShellItem("paneContent",i,j,y);}};this.removeLeftPaneContent=function(i,j,y){this._removeShellItem("paneContent",i,j,y);};this.addRightFloatingContainerItem=function(i,j,y){if(i.length){this._addRightFloatingContainerItem("RightFloatingContainerItems",i,j,y);}};this.removeRightFloatingContainerItem=function(i,j,y){this._removeShellItem("RightFloatingContainerItems",i,j,y);};this.showSettingsButton=function(i,j){this.addActionButton(["userSettingsBtn"],i,j,false);};this.showSignOutButton=function(i,j){this.addActionButton(["logoutBtn"],i,j,false);};this.showRightFloatingContainer=function(i){this._showRightFloatingContainer(i);};this.addFloatingActionButton=function(i,j,y){if(i.length){this._addShellItem("floatingActions",i,j,y);}};this.removeFloatingActionButton=function(i,j,y){this._removeShellItem("floatingActions",i,j,y);};this.updateStateProperty=function(P,V,i,j,D){if(P.startsWith("application")){var y=this._createHeaderEventPayload(P,V,i,j,false);H.updateStates(y);return;}this._setShellItem(P,V,i,j,v,e,D);};this._handleTriggers=function(N){var T,i,j=[],y={};w=false;while(t.length>0){T=t.pop();if(N[T.sName]){j.push(T);y[T.sName]=T;}else{T.fnUnRegister(this);}}for(var z in N){if(N.hasOwnProperty(z)){if(!y[z]){i=N[z];i.fnRegister(this);j.push(i);}}}t=j;w=true;};this._registerTriggers=function(T){w=false;T.forEach(function(i){i.fnRegister(this);t.push(i);});w=true;};function x(T,i){var j=[];if(!i.aTriggers){i.aTriggers=[];}T.forEach(function(y){var F={sName:y.sName,fnRegister:y.fnRegister,fnUnRegister:y.fnUnRegister};i.aTriggers.push(F);j.push(F);});return j;}this.createTriggersOnState=function(T){var i=x(T,b);if(!I){this._registerTriggers(i);}};this.createTriggersOnBaseStates=function(T,B,i){var j=[];B.forEach(function(z){var D=b[z];j=x(T,D);});var y=B.indexOf(i)>=0;if(y&&!I){this._registerTriggers(j);}};this.createTriggers=function(T,i,B){var j=s.currentState;if(i===true){this.createTriggersOnState(T,j);return;}this.createTriggersOnBaseStates(T,B,j.stateName);};this.showShellItem=function(P,j,V){var y=S.getModelStates(j),z="/currentState"+P,B;for(var i=0;i<y.length;i++){B=b[y[i]].stateName;b[B][P.split("/")[1]]=V;}if(s.currentState.stateName===j){e(z,V,s);if(!I){this._renderShellState();}}};this.addCustomItems=function(i,j,y,z){if(this._isValidStateEntry(i)){this._isValidStateEntry(i).fnAdd(j,y,z);}else{throw new Error("Invalid state entry:"+i);}};this.removeCustomItems=function(i,j,y,z){if(this._isValidStateEntry(i)){this._isValidStateEntry(i).fnRemove(j,y,z);}else{throw new Error("Invalid state entry:"+i);}};this.applyExtendedShellState=function(i){l=i;this._renderShellState();};this.addEntryInShellStates=function(i,j,y,R,z){var B,D;if(!o[i]){o[i]={fnAdd:y,fnHide:R};var F=this._getStatesList();for(B=0;B<F.length;B++){D=F[B];b[D][i]=z[D];}this["remove"+j]=R;this["add"+j]=y;}else{throw new Error("State entry already exsists:"+i);}};this.addElementToManagedQueue=function(i){var j=C.last("/core/shell/model/currentState/stateName"),B,y=i.getId();if(!A){A={extendedShellStates:{},aTriggers:[],customShellState:this._createCustomShellState("custom")};}B=A.extendedShellStates;if(!B[j]){B[j]={managedObjects:[],customState:undefined};}B[j].managedObjects.push(y);var z=m[y];if(z){z.nRefCount++;}else{z={oItem:i,nRefCount:1};m[y]=z;}};this.updateNeededTriggersMap=function(i,T){var j;if(!T){return;}for(j=0;j<T.length;j++){i[T[j].sName]=T[j];}};this._renderShellState=function(){var B=C.last("/core/shell/model/currentState/stateName"),i,j,y=u.clone(b[B]),z=A,D,N={};if(I){return;}if(z&&z.customShellState){D=z.customShellState.currentState;}var F={"currentState":u.clone(y)};s=F;I=true;if(l&&z.extendedShellStates&&z.extendedShellStates[l]){i=z.extendedShellStates[l].customState;j=i.currentState;this._addCustomShellStates(j);}if(D){this._addCustomShellStates(D);}s=C.last("/core/shell/model");if(y&&y.aTriggers){this.updateNeededTriggersMap(N,y.aTriggers);}if(j&&j.aTriggers){this.updateNeededTriggersMap(N,j.aTriggers);}if(D&&D.aTriggers){this.updateNeededTriggersMap(N,D.aTriggers);}if(w){this._handleTriggers(N);}delete F.currentState.aTriggers;var G=r(F.currentState,{aTriggers:true});H.recalculateState(l);C.emit("/core/shell/model/currentState",G);I=false;};this._addCustomShellStates=function(T){this.addToolAreaItem(T.toolAreaItems,false,true);this.addSubHeader(T.subHeader,true);this.addRightFloatingContainerItem(T.RightFloatingContainerItems,true);this.addActionButton(T.actions,true,undefined,false);this.addLeftPaneContent(T.paneContent,true);this.addFloatingActionButton(T.floatingActions,true);this.showRightFloatingContainer(T.showRightFloatingContainer);};this._createCustomShellState=function(i){var j={"currentState":{"stateName":i,"headEndItems":[],"paneContent":[],"headItems":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"application":{},"showRightFloatingContainer":undefined,"headerHeading":undefined}};var y=c[i];if(y){q.extend(j.currentState,y);}return j;};this._showRightFloatingContainer=function(i){this._setShellItem("showRightFloatingContainer",i,true,[],v,e);};this._addActionButton=function(P,j,y,z){function U(B,D,F){var G=g(F,B);var J=G.indexOf("logoutBtn");if(J>-1){G.splice.apply(G,[J,0].concat(D));}else{G=G.concat(D);}var K=u.removeDuplicatedActions(G);function N(G){var Q=[],R=["recentActivitiesBtn","frequentActivitiesBtn","openCatalogBtn","userSettingsBtn","ActionModeBtn","ContactSupportBtn","EndUserFeedbackBtn"];for(var i=0;i<R.length;i++){var T=G.indexOf(R[i]);if(T>-1){Q.push(G.splice(T,1)[0]);}}Q=Q.concat(G);return Q;}var O=N(K);e(B,O,F);}this._setShellItem(P,j,y,z,n,U);};this.setFloatingContainerContent=function(P,i,j,y){function V(z,i,B){return i.length===1;}function U(z,i,B){e(z,i,B);}this._setShellItem(P,i,j,y,V,U);};this._addShellItem=function(P,i,j,y){function V(z,i,B){if(z.length>0){L.warning("You can only add one item. Replacing existing item: "+z[0]+" in state: "+B+", with the new item: "+i[0]+".");}return true;}function U(z,B,D){e(z,i.slice(0),D);}this._setShellItem(P,i,j,y,V,U);};this._addRightFloatingContainerItem=function(P,i,j,y){function U(z,B,D){var F=g(D,z);F=F.concat(B);e(z,F,D);}this._setShellItem(P,i,j,y,n,U);};this._addToolAreaItem=function(P,i,j,y,z){function U(F,i,G){var J=g(G,F),K,B;if(typeof i==="string"){i=[i];}for(B=0;B<i.length;B++){K=i[B];if(J.indexOf(K)<0){J.push(K);}}e(F,J,G);}if(j){var B,D=S.getPassStates(z);for(B=0;B<D.length;B++){this.showShellItem("/toolAreaVisible",D[B],true);}}this._setShellItem(P,i,y,z,n,U);};this._removeShellItem=function(P,i,j,y){function V(z,B){var D,i,F;for(F=0;F<B.length;F++){i=B[F];D=z.indexOf(i);if(D<0){L.warning("You cannot remove Item: "+i+", the Item does not exists.");return false;}}return true;}function U(z,B,D){var F=g(D,z),G,i,J;for(J=0;J<B.length;J++){i=B[J];G=F.indexOf(i);if(G>-1){F.splice(G,1);}}e(z,F,D);}this._setShellItem(P,i,j,y,V,U);};this._setShellItem=function(P,O,y,z,V,U,D){var B,F;var G=Array.isArray(O)?O.slice(0):O;if(y===true){B="/currentState/"+P;F=g(s,B);if(V(F,G,"currentState")===false){return;}if(!p&&!I){U(B,G,k);sap.ui.getCore().getEventBus().publish("launchpad","updateShell",{oModel:s,path:B,aIds:G,sProperty:P});this._renderShellState();}else{U(B,G,s);}}else{var J=D?z:S.getPassStates(z),i,K=s.currentState.stateName;for(i=0;i<J.length;i++){var N=J[i],j;F=g(b[N],"/"+P);if(V(F,G,N)===false){continue;}var Q=S.getModelStates(N,D);for(j=0;j<Q.length;j++){B="/"+Q[j]+"/"+P;U(B,G,b);if(K===Q[j]){if(!I){this._renderShellState();}}}}}};this._getStatesList=function(){return Object.keys(b);};this._destroyManageQueue=function(){var i,j,y,B,z,D;B=A.extendedShellStates;for(z in B){if(B.hasOwnProperty(z)){D=B[z].managedObjects;for(i=0;i<D.length;i++){j=D[i];y=m[j];y.nRefCount--;if(y.nRefCount===0){y.oItem.destroy();m[j]=null;}}delete B[z];}}};this._isValidStateEntry=function(N){return!!o[N];};this.getModelToUpdate=function(){return s;};this.setModelToUpdate=function(i,j){p=j;s=i;};this._getManagedElements=function(){return m;};this.extendStates=function(i){var j;for(j in i){if(i.hasOwnProperty(j)){u.updateProperties(b[j],i[j]);}}};this.getBaseStateMember=function(i,B){return b[i][B];};this.getCustomStateDeltaMember=function(i,j){return c[i][j];};this.getAllStatesInDelta=function(){return Object.keys(c);};}var h=new f();return h;},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/eventDelegation/tunnels',["sap/ui/thirdparty/jquery"],function(q){"use strict";function T(){var t=this,r,p={};this.init=function(R){if(!R){throw"1 argument expected, 0 received.";}r=R;};this.createInterface=function(i,c){var R={},s={};R[i]={sInterfaceName:{isActiveOnly:false,distributionType:["URL"]}};s[i]={executeServiceCallFn:function(S){var o=c(S);return new q.Deferred().resolve(o).promise();}};r({"sap.ushell.tunnelRegistry":{oRequestCalls:R,oServiceCalls:s}});};this.createTunnelServiceCallsInfo=function(o){return this.createServiceCallInfo(o);};this.createTunnelServiceCallsInfoForEvents=function(e){return this.createServiceCallInfo(e,this.createEventEntry);};this.createServiceCallInfo=function(R,c){var a={},b,s,P,m,d,e,f,o,E,g;for(var h in R){if(R.hasOwnProperty(h)){s={};P={};o=R[h];if(c){o=c(o);}f=t.createMethodForServiceCall(o);e=t.createServiceCall(f);s[h]=e;a[h]={oServiceCall:s};b=R[h].pair;if(b&&b.sMethod){m=b.sMethod;d=b.sInterface;E=b.fnExtractArguments;e=t.createPairedServiceCall({fnMethod:f,fnExtractArguments:E});P[m]=e;g=[d,m].join('.');p[g]={serviceCall:e,rawMethod:f};}a[h]={oServiceCall:s};}}return a;};this.createServiceCall=function(m){return{executeServiceCallFn:function(s){return new q.Deferred().resolve({endPoint:m}).promise();}};};this.createPairedServiceCall=function(d){var m=d.fnMethod,e=d.fnExtractArguments;return function(s){var a=e(s),b=m.apply(undefined,a);return new q.Deferred().resolve(b).promise();};};this.createMethodForServiceCall=function(o){var i=o.oInterface,f=o.sFuncName,s=o.fnSpy;return function(){if((s&&s.apply(undefined,arguments)||!s)){return i[f].apply(i,arguments);}};};this.createEventEntry=function(e){var o={},i=e.oInterface,f=e.sFuncName,P=e.fnProxy;o[f]=function(){var a=arguments;if(P){a=P.apply(undefined,arguments);}if(arguments&&arguments.length){i[f].apply(i,a);}else{i[f].apply(i);}};return{oInterface:o,sFuncName:f,fnSpy:e.fnSpy};};this.registerTunnels=function(o){if(!r){throw"No 'fnRegisterShellCommunicationHandler'. Use 'init' method.";}var s=t.createTunnelServiceCallsInfo(o);this.createServiceCalls(s);};this.registerEvents=function(e){if(!r){throw"No 'fnRegisterShellCommunicationHandler'. Use 'init' method.";}var s=t.createTunnelServiceCallsInfoForEvents(e);this.createServiceCalls(s);};this.createServiceCalls=function(s){var a="sap.ushell.tunnelRegistry",c={},i,b;c[a]={oServiceCalls:{}};for(i in s){if(s.hasOwnProperty(i)){b=s[i].oServiceCall;q.extend(c[a].oServiceCalls,b);}}r(c);};this.getPairedMethod=function(k){if(p[k]){return p[k].rawMethod;}};this.getPairedServiceCall=function(k){if(p[k]){return p[k].serviceCall;}};}return new T();},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/relatedServices/RelatedServices',[],function(){"use strict";function R(){var b;var s={};this._historyBackNavigation=function(){window.history.back();};this.navigateBack=function(){if(b){b();}else{if(sap.ushell.Container.getService("CrossApplicationNavigation").isInitialNavigation()){sap.ushell.Container.getService("CrossApplicationNavigation").toExternal({target:{shellHash:"#"},writeHistory:false});return;}this._historyBackNavigation();}};this.setNavigateBack=function(i){b=i;s.backNavigationHander=b;};this.resetNavigateBack=function(){b=this._historyBackNavigation;s.backNavigationHander=b;};this.create=function(){b=this._historyBackNavigation;s={backNavigationHander:b};return s;};this.restore=function(i){if(i){s=i;b=s.backNavigationHander;}};this.store=function(S){s={backNavigationHander:this._historyBackNavigation};};this.destroy=function(S){};}return new R();},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/relatedShellElements/RelatedShellElements',["sap/ui/thirdparty/jquery","sap/base/Log"],function(q,L){"use strict";function R(){var d=[],E,a,c={},s,i=false,C={},A,t=[],b={"home":{"actions":[]},"app":{"actions":["aboutBtn"]},"minimal":{"actions":["aboutBtn"]},"standalone":{"actions":["aboutBtn"]},"embedded":{"actions":["aboutBtn"]},"embedded-home":{"actions":["aboutBtn"]},"lean":{"actions":["aboutBtn"]}},o={home:{NWBC:{headerless:"headerless",default:"minimal"},TR:{headerless:"minimal",default:"minimal"},default:{default:"home"}},app:{NWBC:{headerless:"headerless",default:"minimal"},TR:{headerless:"minimal",default:"minimal"},default:{default:"app"}}};this.init=function(e,f){E=e;if(f&&f.length>0){Object.keys(b).forEach(function(S){b[S].actions=f.concat(b[S].actions);});}};this.processDangling=function(){var D,e;for(D=0;D<d.length;D++){e=d.pop();e.func.apply(this,e.args);}};this.setDangling=function(I){i=I;};this.calculateElementsState=function(n,e,f,g){var N=o[n]?o[n]:o.default,h=N[g?undefined:e]?N[e]:N.default,j=h[f]?h[f]:h.default;return j;};this.createCustomShellState=function(S){var e={"currentState":{"stateName":S,"headEndItems":[],"paneContent":[],"headItems":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"application":{},"showRightFloatingContainer":undefined,"headerHeading":undefined}},f=b[S];if(f){q.extend(e.currentState,f);}return e;};this.createExtendedShellState=function(S,f){var B,e=this.createCustomShellState(S);B=a.extendedShellStates;if(B[S]){return false;}s=e;f();if(B[S]){B[S].customState=e;}else{B[S]={managedObjects:[],customState:e};}s=a.customShellState;return true;};this.assignNew=function(S){c=this.createCustomShellState(S);a.customShellState=c;a.aTriggers=[];a.extendedShellStates={};a.oCheckPoints={};this._updateModel();s=a.customShellState;};this._genericSetItem=function(e,v){var f=e.split("/");var l=f.pop();var g=f.reduce(function(h,m){return h[m];},s.currentState);g[l]=v;E._renderShellState();};this._genericAddItems=function(e,I){var f=s.currentState[e];s.currentState[e]=f.concat(I);E._renderShellState();};this.genericSetItem=function(e,v){if(i){d.push({func:this._genericSetItem,args:arguments});}else{this._genericSetItem(e,v);}};this.genericAddItems=function(e,I){if(i){d.push({func:this.genericAddItems,args:arguments});}else{this._genericAddItems(e,I);}};this.setShellModelForApplications=function(e,v){var l=["paneContent","headItems","RightFloatingContainerItems","toolAreaItems","floatingActions","showRightFloatingContainer","headEndItems","headerVisible","subHeader","actions"];if(l.indexOf(e)>-1){this.genericSetItem(e,v);}else{L.error("Not a valid attribute:"+e);}};this.addShellModelForApplications=function(e,I){var l=["paneContent","headItems","RightFloatingContainerItems","toolAreaItems","floatingActions","showRightFloatingContainer","headEndItems","headerVisible","subHeader","actions"];if(l.indexOf(e)>-1){this.genericAddItems(e,I);}else{L.error("Not a valid attribute:"+e);}};this.setStateModelToUpdate=function(I){s=I;};this.getStateModelToUpdate=function(){return s;};this.model=function(){if(!a){this.create();}A={customShellState:a.customShellState,aTriggers:a.aTriggers,extendedShellStates:a.extendedShellStates,oCheckPoints:a.oCheckPoints};return A;};this._updateModel=function(){if(A){A.customShellState=a.customShellState;A.aTriggers=a.aTriggers;A.extendedShellStates=a.extendedShellStates;A.oCheckPoints=a.oCheckPoints;}};this.getAppRelatedElement=function(){return{customShellState:a.customShellState,aTriggers:a.aTriggers,extendedShellStates:a.extendedShellStates,oCheckPoints:a.oCheckPoints};};this.create=function(){a={extendedShellStates:{},oCheckPoints:C,aTriggers:t,customShellState:{"currentState":{"stateName":"app","headEndItems":[],"paneContent":[],"headItems":[],"actions":["aboutBtn"],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"application":{},"showRightFloatingContainer":undefined,"headerHeading":undefined}}};s=a.customShellState;this._updateModel();return a;};this.restore=function(S){if(S&&S.appRelatedElements){var e=S.appRelatedElements;a.aTriggers=e.aTriggers;a.extendedShellStates=e.extendedShellStates;a.oCheckPoints=e.oCheckPoints;a.customShellState=e.customShellState;}this._updateModel();s=a.customShellState;};this.store=function(m){};this.clean=function(){a=undefined;};this.destroy=function(m){};}return new R();},true);
sap.ui.predefine('sap/ushell/components/container/ApplicationContainer',["sap/base/Log","sap/base/security/encodeXML","sap/base/util/deepEqual","sap/base/util/uid","sap/base/util/UriParameters","sap/m/MessagePopover","sap/m/Text","sap/ui/core/Component","sap/ui/core/ComponentContainer","sap/ui/core/Control","sap/ui/core/Icon","sap/ui/Device","sap/ui/thirdparty/URI","sap/ushell/ApplicationType","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/library","sap/ushell/resources","sap/ushell/System","sap/ushell/User","sap/ushell/utils"],function(L,a,d,g,U,M,T,C,b,c,I,D,f,A,h,E,u,r,S,j,k){"use strict";var P="sap.ushell.components.container.",s=P+"ApplicationContainer",l="sap.ushell.Container.dirtyState.",m="autoplay;battery;camera;display-capture;geolocation;gyroscope;magnetometer;microphone;midi;clipboard-write;clipboard-read;fullscreen",n,o,H,R,q=false,K=false,t=[],v=0;var w=["sap-ach","sap-fiori-id","sap-hide-intent-link","sap-priority","sap-tag","sap-ui-app-id-hint","sap-ui-debug","sap-ui-fl-control-variant-id","sap-ui-fl-max-layer","sap-ui-tech-hint","sap-ui2-tcode","sap-ui2-wd-app-id","sap-ui2-wd-conf-id","sap-ushell-cdm-site-url","sap-ushell-defaultedParameterNames","sap-ushell-navmode","sap-ushell-next-navmode","sap-ushell-url","sap-app-origin-hint"];function x(e){var i=sap.ushell.Container.getService("CrossApplicationNavigation");i.isUrlSupported(e.url).done(function(){e.promise.resolve({allowed:true,id:e.id});}).fail(function(){e.promise.resolve({allowed:false,id:e.id});});}function y(e){var i={asyncURLHandler:r1.prototype._adaptIsUrlSupportedResultForMessagePopover};if(M&&M.setDefaultHandlers){M.setDefaultHandlers(i);}E.emit("StepDone",e.stepName);}E.once("initMessagePopover").do(y);n=new k.Map();function z(e){return n.get(e.getId());}function B(){return o;}function F(e){var p=new U(e).mParams,i=p["sap-xapp-state"],s1;delete p["sap-xapp-state"];s1={startupParameters:p};if(i){s1["sap-xapp-state"]=i;}return s1;}function G(e,i){if(!R){R=jQuery.sap.resources({url:jQuery.sap.getModulePath(P)+"/resources/resources.properties",language:sap.ui.getCore().getConfiguration().getLanguage()});}return R.getText(e,i);}function J(){return new I({size:"2rem",src:"sap-icon://error",tooltip:r1.prototype._getTranslatedText("an_error_has_occured")});}function N(e){var i=e.getAggregation("child"),p;if(i instanceof b){p=i.getComponentInstance().getMetadata().getName().replace(/\.Component$/,"");L.debug("unloading component "+p,null,s);}e.destroyAggregation("child");}function O(e,i,p){return new Promise(function(s1){var t1,u1,v1,w1,x1,y1={},z1,A1;function B1(D1){D1.setWidth(e.getWidth());D1.setHeight(e.getHeight());D1.addStyleClass("sapUShellApplicationContainer");e.setAggregation("child",D1,true);}t1=i.indexOf("?");if(t1>=0){w1=r1.prototype._getParameterMap(i);y1=w1.startupParameters;i=i.slice(0,t1);}if(i.slice(-1)!=="/"){i+="/";}if(/\.view\.(\w+)$/i.test(p)){v1=/^SAPUI5=(?:([^/]+)\/)?([^/]+)\.view\.(\w+)$/i.exec(p);if(!v1){L.error("Invalid SAPUI5 URL",p,s);s1(r1.prototype._createErrorControl());return;}x1=v1[1];z1=v1[2];A1=v1[3].toUpperCase();if(x1){z1=x1+"."+z1;}else{u1=z1.lastIndexOf(".");if(u1<1){L.error("Missing namespace",p,s);return r1.prototype._createErrorControl();}x1=z1.slice(0,u1);}}else{x1=p.replace(/^SAPUI5=/,"");}jQuery.sap.registerModulePath(x1,i+x1.replace(/\./g,"/"));r1.prototype._destroyChild(e);if(z1){if(e.getApplicationConfiguration()){y1.config=e.getApplicationConfiguration();}sap.ui.view({id:e.getId()+"-content",type:A1,viewData:y1||{},viewName:z1,async:true}).loaded().then(function(D1){e.fireEvent("applicationConfiguration");B1(D1);s1(D1);});}else{L.debug("loading component "+x1,null,s);var C1=w1?{startupParameters:w1.startupParameters}:{startupParameters:{}};if(w1&&w1["sap-xapp-state"]){C1["sap-xapp-state"]=w1["sap-xapp-state"];}if(e.getApplicationConfiguration()){C1.config=e.getApplicationConfiguration();}sap.ui.core.Component.create({id:e.getId()+"-component",componentData:C1,name:x1}).then(function(D1){e.fireEvent("applicationConfiguration",{"configuration":D1.getMetadata().getConfig()});var E1=new b({id:e.getId()+"-content",component:D1});B1(E1);s1(E1);});}});}function Q(e,i){setTimeout(function(){sap.ui.getCore().getEventBus().publish("sap.ushell",e,i);},0);}function V(e,i,p){var s1=this,t1,u1={oControl:undefined,oPromise:undefined},v1,w1,x1,y1={startupParameters:{}},z1,A1=e.getComponentHandle(),B1=sap.ushell.Container.getService("PluginManager"),C1,D1;function E1(F1){e.fireEvent("applicationConfiguration",{configuration:F1.getMetadata().getConfig()});w1=new b({id:e.getId()+"-content",component:F1});w1.setHeight(e.getHeight());w1.setWidth(e.getWidth());w1.addStyleClass("sapUShellApplicationContainer");e._disableRouterEventHandler=r1.prototype._disableRouter.bind(s1,F1);sap.ui.getCore().getEventBus().subscribe("sap.ushell.components.container.ApplicationContainer","_prior.newUI5ComponentInstantion",e._disableRouterEventHandler);e.setAggregation("child",w1,true);if(B1){C1=B1.getPluginLoadingPromise("RendererExtensions");D1=C1&&C1.state();if(D1==="pending"){C1.done(function(){r1.prototype._publishExternalEvent("appComponentLoaded",{component:F1});}).fail(function(){r1.prototype._publishExternalEvent("appComponentLoaded",{component:F1});});}if(D1==="resolved"||D1==="rejected"){r1.prototype._publishExternalEvent("appComponentLoaded",{component:F1});}}else{r1.prototype._publishExternalEvent("appComponentLoaded",{component:F1});}return w1;}v1=i.indexOf("?");if(v1>=0){x1=r1.prototype._getParameterMap(i);y1={startupParameters:x1.startupParameters};if(x1["sap-xapp-state"]){y1["sap-xapp-state"]=x1["sap-xapp-state"];}i=i.slice(0,v1);}if(e.getApplicationConfiguration()){y1.config=e.getApplicationConfiguration();}if(i.slice(-1)!=="/"){i+="/";}r1.prototype._destroyChild(e);z1={id:e.getId()+"-component",name:p,componentData:y1};L.debug("Creating component instance for "+p,JSON.stringify(z1),s);sap.ui.getCore().getEventBus().publish("sap.ushell.components.container.ApplicationContainer","_prior.newUI5ComponentInstantion",{name:p});if(A1){var F1=A1.getInstance(z1);u1.oControl=E1(F1);}else{t1=new jQuery.Deferred();jQuery.sap.registerModulePath(p,i);L.error("No component handle available for '"+p+"'; fallback to component.load()",null,s);sap.ui.component({id:e.getId()+"-component",name:p,componentData:y1,async:true}).then(function(F1){t1.resolve(E1(F1));});u1.oPromise=t1.promise();}return u1;}function W(e){var i;if((e instanceof C)&&(typeof e.getRouter==="function")){i=e.getRouter();if(i&&(typeof i.stop==="function")){L.info("router stopped for instance "+e.getId());i.stop();}}}function X(e){var i=document.createElement("a"),p=new U(e).get("sap-client"),s1;i.href=e;s1=i.protocol+"//"+i.host;return new S({alias:p?s1+"?sap-client="+p:s1,baseUrl:s1,client:p||undefined,platform:"abap"});}function Y(e,i){var p=false,s1=e.getDomRef(),t1,u1;if(e.getIframeWithPost()===true&&s1&&s1.getAttribute&&s1.getAttribute("sap-iframe-app")=="true"){s1=jQuery("#"+s1.getAttribute("id")+"-iframe")[0];}if(s1){t1=f(e._getIFrameUrl(s1)||window.location&&window.location.href||"");u1=t1.protocol()+"://"+t1.host();p=(i.source===s1.contentWindow)||(i.origin===u1);}return p;}function Z(e,i,p){var s1=JSON.stringify({type:"request",service:i,request_id:g(),body:{}});L.debug("Sending post message request to origin ' "+p+"': "+s1,null,"sap.ushell.components.container.ApplicationContainer");e.postMessage(s1,p);}function $(){var i=this.getDomRef();if(!i||i.tagName!=="IFRAME"){if(this.getIframeWithPost()===true&&i&&i.getAttribute&&i.getAttribute("sap-iframe-app")=="true"){return jQuery("#"+i.getAttribute("id")+"-iframe")[0];}return null;}return i;}function _(i){var e;if(i===undefined){i=this._getIFrame();}if(this.getIframeWithPost()===true){e=jQuery("#"+i.getAttribute("id").replace("-iframe","-form"))[0].action;if(e===undefined&&(new f()).query(true).hasOwnProperty("sap-isolation-enabled")){e=i.src;}}else{e=i.src;}return e;}function a1(e,i){if(e&&!e.getActive()){L.debug("Skipping handling of postMessage 'message' event with data '"+JSON.stringify(s1)+"' on inactive container '"+e.getId()+"'","Only active containers can handle 'message' postMessage event","sap.ushell.components.container.ApplicationContainer");return;}var p=e.getUi5ComponentName&&e.getUi5ComponentName(),s1=i.data;if(typeof p==="string"){L.debug("Skipping handling of postMessage 'message' event with data '"+JSON.stringify(s1)+"' on container of UI5 application '"+p+"'","Only non UI5 application containers can handle 'message' postMessage event","sap.ushell.components.container.ApplicationContainer");return;}var t1={bApiRegistered:true};H(e,i,t1);r1.prototype._handlePostMessagesForPluginsPostLoading(e,i,t1);}function b1(e,p,s1){var t1,u1,v1;if(s1.bApiRegistered!==false){return;}if(q===false){q=true;t1=sap.ushell.Container.getService("PluginManager");if(t1){u1=t1.getPluginLoadingPromise("RendererExtensions");v1=u1&&u1.state();if(v1==="pending"){K=true;u1.done(function(){var w1;K=false;L.debug("Processing post messages queue after 'RendererExtensions' plugins loaded, queue size is: "+t.length,null,"sap.ushell.components.container.ApplicationContainer");for(var i=0;i<t.length;i++){w1=t[i];try{r1.prototype._handleMessageEvent.call(w1.that,w1.oContainer,w1.oMessage);}catch(ex){L.error(ex.message||ex,null,"sap.ushell.components.container.ApplicationContainer");}}t=[];});}}}if(K===true){t.push({index:v++,that:this,oContainer:e,oMessage:p});}}function c1(){q=false;K=false;t=[];v=0;}function d1(e,i){var p=e._getIFrame(),s1=e.getApplicationType();if(k.isApplicationTypeEmbeddedInIframe(e.getApplicationType(s1))&&p){var t1=new f(e._getIFrameUrl(p));var u1=t1.protocol()+"://"+t1.host();p.contentWindow.postMessage(JSON.stringify({action:"pro54_disableDirtyHandler"}),u1);i.preventDefault();}}function e1(e,i,p){e.write("<div").writeControlData(i).writeAccessibilityState(i).addClass("sapUShellApplicationContainer").writeClasses(i).addStyle("height",i.getHeight()).addStyle("width",i.getWidth()).writeStyles().write(">");if(p){e.renderControl(p);}e.write("</div>");}function f1(e,i,p){if(k.isApplicationTypeEmbeddedInIframe(i)){var s1=e.getTargetNavigationMode();p=r1.prototype._adjustNwbcUrl(p,i,s1,e.getIsStateful());k.localStorageSetItem(e.globalDirtyStorageKey,sap.ushell.Container.DirtyState.INITIAL);}return p;}function g1(e,i,p,s1){var t1,u1=function(){var C1=k.getParameterValueBoolean("sap-accessibility");if(C1!==undefined){return C1;}return sap.ushell.Container.getUser().getAccessibilityMode();},v1=function(){var C1=new U(e)||{mParams:{}};if(C1.mParams["sap-theme"]===undefined){return sap.ushell.Container.getUser().getTheme(j.prototype.constants.themeFormat.NWBC);}return undefined;},w1=function(){var C1=false,D1=new U(e)||{mParams:{}};C1=sap.ui.getCore().getConfiguration().getStatistics()&&D1.mParams["sap-statistics"]===undefined;return C1;},x1=function(){var C1=window.hasher&&window.hasher.getHash(),z1="",D1;if(C1&&C1.length>0&&C1.indexOf("sap-iapp-state=")>0){D1=/(?:sap-iapp-state=)([^&/]+)/.exec(C1);if(D1&&D1.length===2){z1=D1[1];}}return z1;},y1=function(){var C1="";var D1=(!!jQuery("body.sapUiSizeCompact").length);var E1=(!!jQuery("body.sapUiSizeCozy").length);if(D1===true){C1="0";}else if(E1){C1="1";}return C1;};e+=e.indexOf("?")>=0?"&":"?";e+="sap-ie=edge";t1=v1();if(t1){e+=e.indexOf("?")>=0?"&":"?";e+="sap-theme="+encodeURIComponent(t1);}if(p){e+=e.indexOf("?")>=0?"&":"?";e+="sap-target-navmode="+encodeURIComponent(p);}if(u1()){e+=e.indexOf("?")>=0?"&":"?";e+="sap-accessibility=X";}if(w1()){e+=e.indexOf("?")>=0?"&":"?";e+="sap-statistics=true";}if((i==="TR"||i==="GUI")&&new U(document.URL).get("sap-guitest")==="true"){e+=e.indexOf("?")>=0?"&":"?";e+="sap-keepclientsession=2";}else if(s1){e+=e.indexOf("?")>=0?"&":"?";e+="sap-keepclientsession=1";}var z1=x1();if(z1&&z1.length>0){e+=e.indexOf("?")>=0?"&":"?";e+="sap-iapp-state="+z1;}var A1=y1();if(A1&&A1.length>0){e+=e.indexOf("?")>=0?"&":"?";e+="sap-touch="+A1;}var B1=0;if(h.last("/core/shell/sessionTimeoutIntervalInMinutes")>0){B1=h.last("/core/shell/sessionTimeoutIntervalInMinutes");}e+=e.indexOf("?")>=0?"&":"?";e+="sap-ushell-timeout="+B1;return k.appendSapShellParam(e,i);}function h1(e,i,p,s1){var t1=i.getAggregation("child"),u1,v1;if(!t1||i._bRecreateChild){v1=r1.prototype._createUi5Component(i,p,s1);if(v1.oControl!==undefined){i._bRecreateChild=false;r1.prototype._renderControlInDiv(e,i,v1.oControl);}else{i.oDeferredControlCreation=new jQuery.Deferred();r1.prototype._renderControlInDiv(e,i);v1.oPromise.then(function(w1){i._bRecreateChild=false;u1=sap.ui.getCore().createRenderManager();u1.renderControl(w1);u1.flush(jQuery("#"+i.getId())[0]);u1.destroy();i.oDeferredControlCreation.resolve();});}}else{r1.prototype._renderControlInDiv(e,i,t1);}}function i1(e,i,p){var s1=e.getProperty(i);if(d(s1,p)){return;}e.setProperty(i,p);e._bRecreateChild=true;}function j1(e,i,p,s1,t1){var u1,v1=true;localStorage.removeItem(i.globalDirtyStorageKey);i.oDeferredControlCreation=undefined;if(t1&&t1.indexOf("SAPUI5.Component=")===0&&p===A.URL.type){h1(e,i,s1,t1.replace(/^SAPUI5\.Component=/,""));return;}if(t1&&t1.indexOf("SAPUI5=")===0&&p===A.URL.type){r1.prototype._renderControlInDiv(e,i,undefined,"open");i.oDeferredControlCreation=new jQuery.Deferred();r1.prototype._createUi5View(i,s1,t1).then(function(w1){var B1,C1=jQuery("#"+i.getId());if(C1&&C1.length>0){B1=sap.ui.getCore().createRenderManager();B1.renderControl(w1);B1.flush(jQuery("#"+i.getId())[0]);B1.destroy();}else{e.renderControl(w1);}i.oDeferredControlCreation.resolve();});r1.prototype._renderControlInDiv(e,i,undefined,"close");return;}L.debug("Not resolved as \"SAPUI5.Component=\" or \"SAPUI5=\" , "+"will attempt to load into iframe "+t1);if(!i.getActive()){L.debug("Skipping rendering container iframe","Container '"+i.getId()+"' is inactive");return;}try{s1=i.getFrameSource(p,s1,t1);}catch(ex){L.error(ex.message||ex,null,s);i.fireEvent("applicationConfiguration");e.renderControl(r1.prototype._createErrorControl());return;}if(sap.ushell.Container){u1=r1.prototype._getLogoutHandler(i);if(!u1){if(k.isApplicationTypeEmbeddedInIframe(p)){u1=r1.prototype._logout.bind(null,i);n.put(i.getId(),u1);sap.ushell.Container.attachLogoutEvent(u1);sap.ushell.Container.addRemoteSystem(r1.prototype._createSystemForUrl(s1));}}else if(!k.isApplicationTypeEmbeddedInIframe(p)){sap.ushell.Container.detachLogoutEvent(u1);n.remove(i.getId());}}s1=r1.prototype._checkNwbcUrlAdjustment(i,p,s1);var x1=new U(document.URL);s1=i._adjustURLForIsolationOpeningWithoutURLTemplate(s1);if(p==="TR"){if(x1.get("sap-post-params")==="true"){i.setProperty("iframePostAllParams",true,true);}}if(new U(window.location.href).get("sap-post")==="false"){v1=false;}else if(window.QUnit!==undefined){v1=i.getIframeWithPost();}if(v1===true&&(p==="NWBC"||p==="TR"||p==="WDA")){i.setProperty("iframeWithPost",true,true);i.oDeferredRenderer=new jQuery.Deferred();s1=r1.prototype._filterURLParams(s1);var y1=[];var z1=r1.prototype._getParamKeys(s1,y1);r1.prototype._generateRootElementForIFrame(e,i,true);if(z1.length>0){var A1=sap.ushell.Container.getService("CrossApplicationNavigation");A1.getAppStateData(z1).then(function(w1){var B1;var C1=jQuery("#"+i.getId());if(C1.length>0){B1=sap.ui.getCore().createRenderManager();r1.prototype._buildHTMLElements(B1,i,w1,y1,s1,true,x1);B1.flush(C1[0]);B1.destroy();}else{r1.prototype._buildHTMLElements(e,i,w1,y1,s1,true,x1);}setTimeout(i.oDeferredRenderer.resolve,0);},function(w1){r1.prototype._buildHTMLElements(e,i,undefined,y1,s1,true,x1);setTimeout(i.oDeferredRenderer.resolve,0);});}else{r1.prototype._buildHTMLElements(e,i,undefined,y1,s1,false,x1);setTimeout(i.oDeferredRenderer.resolve,0);}r1.prototype._generateRootElementForIFrame(e,i,false);return;}i.fireEvent("applicationConfiguration");e.write("<iframe").writeControlData(i).writeAccessibilityState(i).writeAttributeEscaped("src",s1).writeAttributeEscaped("title",r.i18n.getText("AppilcationContainer.IframeTitle")).addClass("sapUShellApplicationContainer").writeClasses(i).addStyle("height",i.getHeight()).addStyle("width",i.getWidth()).writeStyles();if(h.last("/core/shell/enableFeaturePolicyInIframes")===true){e.writeAttribute("allow",m);}e.write("></iframe>");}function k1(e){var i=new U(document.URL);if(i.get("sap-isolation-enabled")==="true"){var p=sap.ushell.Container.getService("URLParsing"),s1=p.getHash(document.URL),t1="",u1="&sap-plugins="+encodeURIComponent(sap.ushell.Container.getService("PluginManager")._getNamesOfPluginsWithAgents());if(e.indexOf("&/")>0){t1=e.substr(e.indexOf("&/"));}if(u1==="&sap-plugins="){u1="";}if(s1){var v1=p.parseShellHash("#"+s1),w1=p.paramsToString(v1.params);if(w1&&w1.length>=0){var x1=sap.ushell.Container.getService("AppState").createEmptyAppState(),y1=sap.ushell.Container.getService("AppState").createEmptyAppState(),z1="";if(w1.indexOf("sap-intent-param")>=0){z1=encodeURIComponent(w1);}else{x1.setData(w1);x1.save();z1=encodeURIComponent("sap-intent-param="+x1.getKey());}y1.setData("sap-startup-params="+z1);y1.save();e=e.split("#")[0]+"&sap-intent-param="+y1.getKey()+u1+"#"+window.hasher.getHash();}else{e=e.split("#")[0]+u1+"#"+window.hasher.getHash();}}else{e+="#"+window.hasher.getHash();}if(e.indexOf("&/")<0){e+=t1;}}if(i.has("sap-iframe-params")){var A1=i.get("sap-iframe-params")||"",B1=A1.split(",");B1.forEach(function(C1){if(C1&&C1.length>0){if(i.has(C1)){e=e.split("#")[0]+"&"+C1+"="+i.get(C1)+"#"+e.split("#")[1];}}});}return e;}function l1(e){var i=new f(e);i=i.removeSearch(w);return i.toString();}function m1(e,i){var p=[],s1;if(e.indexOf("sap-intent-param=")>0){s1=/(?:sap-intent-param=)([^&/]+)/.exec(e);if(s1&&s1.length===2){p.push([s1[1]]);i.push("sap-intent-param-data");}}if(e.indexOf("sap-xapp-state=")>0){s1=/(?:sap-xapp-state=)([^&/]+)/.exec(e);if(s1&&s1.length===2){p.push([s1[1]]);i.push("sap-xapp-state-data");}}if(e.indexOf("sap-iapp-state=")>0){s1=/(?:sap-iapp-state=)([^&/]+)/.exec(e);if(s1&&s1.length===2){p.push([s1[1]]);i.push("sap-iapp-state-data");}}return p;}function n1(e,i,p,s1,t1,u1,v1){var w1=i.getId()+"-form",x1="",y1="",z1=false;if(p===undefined){p=[];}p.push([sap.ushell.Container.getFLPUrl(true)]);s1.push("sap-flp-url");p.push([i.getSystemAlias()]);s1.push("system-alias");var A1="";var B1={};s1.forEach(function(F1,G1){if(p[G1][0]){B1[F1]=p[G1][0];}});var C1=t1;A1=JSON.stringify(B1);x1="<input name=\"sap-flp-params\" value=\""+a(A1)+"\">";if(i.getIframePostAllParams()===true){i.setProperty("iframePostAllParams",false,true);var D1=new U(t1);y1=o1(i,D1);if(y1!==""){t1=p1(t1,D1);}}i.fireEvent("applicationConfiguration");e.write("<form").writeAttributeEscaped("method","post").writeAttributeEscaped("id",w1).writeAttributeEscaped("name",w1).writeAttributeEscaped("target",i.getId()+"-iframe").writeAttributeEscaped("action",t1).addStyle("display","none").writeStyles().write(">").writeAttributeEscaped(x1+y1).write("</form>");var E1=i.sId;if(!u1&&i.hasStyleClass("hidden")){z1=true;i.toggleStyleClass("hidden",false);}i.sId+="-iframe";e.write("<iframe").writeAttributeEscaped("name",i.getId()).writeControlData(i).writeAccessibilityState(i).writeAttributeEscaped("sap-orig-src",C1).writeAttributeEscaped("title",r.i18n.getText("AppilcationContainer.IframeTitle")).addClass("sapUShellApplicationContainer").writeClasses(i).addStyle("height",i.getHeight()).addStyle("width",i.getWidth()).writeStyles();if(h.last("/core/shell/enableFeaturePolicyInIframes")===true){e.writeAttribute("allow",m);}e.write("></iframe>");i.sId=E1;if(z1){i.toggleStyleClass("hidden",true);}}function o1(e,i){var s1="";var t1="",u1="";if(i.has("sap-iframe-hint")){s1=i.get("sap-iframe-hint");}var v1=i.mParams;if(e.getApplicationType()==="TR"||(s1==="GUI")){var p,w1;for(p in v1){if(p==="sap-iframe-hint"){continue;}w1=v1[p][0];t1="<input name=\""+p+"\" value=\""+a(w1)+"\">";u1+=t1;}}return u1;}function p1(e,i){var p=i.get("sap-iframe-hint");return e.split("?")[0]+(typeof p==="string"?"?sap-iframe-hint="+p:"");}function q1(e,i,p){if(p){e.write("<div").writeControlData(i).writeAttributeEscaped("sap-iframe-app","true").addClass("sapUShellApplicationContainer").writeClasses(i).addStyle("height",i.getHeight()).addStyle("width",i.getWidth()).writeStyles().write(">");}else{e.write("</div>");}}var r1=c.extend(s,{metadata:{properties:{additionalInformation:{defaultValue:"",type:"string"},application:{type:"object"},applicationConfiguration:{type:"object"},applicationType:{defaultValue:"URL",type:P+"ApplicationType"},height:{defaultValue:"100%",type:"sap.ui.core.CSSSize"},navigationMode:{defaultValue:"",type:"string"},targetNavigationMode:{defaultValue:"",type:"string"},text:{defaultValue:"",type:"string"},url:{defaultValue:"",type:"string"},visible:{defaultValue:true,type:"boolean"},active:{defaultValue:true,type:"boolean"},"sap-system":{type:"string"},applicationDependencies:{type:"object"},componentHandle:{type:"object"},ui5ComponentName:{type:"string"},width:{defaultValue:"100%",type:"sap.ui.core.CSSSize"},shellUIService:{type:"object"},appIsolationService:{type:"object"},reservedParameters:{type:"object"},coreResourcesFullyLoaded:{type:"boolean"},isStateful:{defaultValue:false,type:"boolean"},iframeHandlers:{defaultValue:"",type:"string"},iframeWithPost:{defaultValue:false,type:"boolean"},beforeAppCloseEvent:{type:"object"},isPostCapability:{defaultValue:false,type:"boolean"},extendedInfo:{type:"object"},systemAlias:{defaultValue:"",type:"string"},iframePostAllParams:{defaultValue:false,type:"boolean"}},events:{applicationConfiguration:{}},aggregations:{child:{multiple:false,type:"sap.ui.core.Control",visibility:"hidden"}},library:"sap.ushell",designtime:"sap/ushell/designtime/ApplicationContainer.designtime"},exit:function(){var e,i=this;if(sap.ushell.Container){e=r1.prototype._getLogoutHandler(i);if(e){sap.ushell.Container.detachLogoutEvent(e);n.remove(i.getId());}}localStorage.removeItem(i.globalDirtyStorageKey);if(i._unloadEventListener){removeEventListener("unload",i._unloadEventListener);}if(i._disableRouterEventHandler){sap.ui.getCore().getEventBus().unsubscribe("sap.ushell.components.container.ApplicationContainer","_prior.newUI5ComponentInstantion",i._disableRouterEventHandler);}if(i._storageEventListener){removeEventListener("storage",i._storageEventListener);}if(i._messageEventListener){removeEventListener("message",i._messageEventListener);}r1.prototype._destroyChild(i);if(c.exit){c.exit.apply(i);}},setHandleMessageEvent:function(i){H=i;},init:function(){var e=this;e.globalDirtyStorageKey=l+g();e._unloadEventListener=e.exit.bind(e);addEventListener("unload",e._unloadEventListener);e._storageEventListener=function(i){var p=e.getApplicationType();if(i.key===e.globalDirtyStorageKey&&i.newValue===sap.ushell.Container.DirtyState.PENDING&&k.isApplicationTypeEmbeddedInIframe(p)){var s1=e._getIFrame();if(s1){L.debug("getGlobalDirty() send pro54_getGlobalDirty ",null,"sap.ushell.components.container.ApplicationContainer");var t1=new f(e._getIFrameUrl(s1));var u1=t1.protocol()+"://"+t1.host();s1.contentWindow.postMessage(JSON.stringify({action:"pro54_getGlobalDirty"}),u1);}}};addEventListener("storage",e._storageEventListener);e._messageEventListener=r1.prototype._handleMessageEvent.bind(null,e);addEventListener("message",e._messageEventListener);},onAfterRendering:function(){var e=this;this.rerender=function(){};if(D.os.ios&&this.$().prop("tagName")==="IFRAME"){this.$().parent().css("overflow","auto");}if(this.oDeferredRenderer){this.oDeferredRenderer.done(function(){var i=document.getElementById(e.getId()+"-form");if(i){i.submit();}});}},renderer:function(e,i){var p=i.getApplication(),s1=i.launchpadData,t1;if(!i.getVisible()){r1.prototype._renderControlInDiv(e,i);return;}if(i.error){delete i.error;r1.prototype._renderControlInDiv(e,i,r1.prototype._createErrorControl());}else if(!p){r1.prototype._render(e,i,i.getApplicationType(),i.getUrl(),i.getAdditionalInformation());}else if(!p.isResolvable()){r1.prototype._render(e,i,p.getType(),p.getUrl(),"");}else if(s1){r1.prototype._render(e,i,s1.applicationType,s1.Absolute.url.replace(/\?$/,""),s1.applicationData);}else{L.debug("Resolving "+p.getUrl(),null,s);p.resolve(function(u1){L.debug("Resolved "+p.getUrl(),JSON.stringify(u1),s);i.launchpadData=u1;r1.prototype._destroyChild(i);},function(u1){var v1=p.getMenu().getDefaultErrorHandler();if(v1){v1(u1);}r1.prototype._destroyChild(i);i.error=u1;});t1=new T({text:r1.prototype._getTranslatedText("loading",[p.getText()])});r1.prototype._destroyChild(i);i.setAggregation("child",t1);r1.prototype._renderControlInDiv(e,i,t1);}}});r1.prototype.getFrameSource=function(e,i){if(!Object.prototype.hasOwnProperty.call(A.enum,e)){throw new Error("Illegal application type: "+e);}return i;};r1.prototype.setUrl=function(e){i1(this,"url",e);};r1.prototype.setAdditionalInformation=function(e){i1(this,"additionalInformation",e);};r1.prototype.setApplicationType=function(e){i1(this,"applicationType",e);};r1.prototype.createPostMessageRequest=function(e,i){var p=Date.now().toString();return{type:"request",request_id:p,service:e,body:i};};r1.prototype.setNewTRApplicationContext=function(e){var i=new jQuery.Deferred(),p=this._getIFrame(),s1,t1,u1=this;if(!p){return i.promise().reject({message:"Expected an existing TR application application frame but found none."});}function v1(){if(t1){t1["sap-flp-url"]=sap.ushell.Container.getFLPUrl(true);t1["system-alias"]=u1.getSystemAlias();s1["sap-flp-params"]=t1;}var z1=u1.createPostMessageRequest("sap.its.startService",s1);u1.postMessageToIframe(z1,p,true).then(function(){i.resolve();},function(A1){i.reject({eventData:A1,message:"Failed to change application context."});});}e=k.appendSapShellParam(e);s1={url:e};if(this.getIframeWithPost&&this.getIframeWithPost()===true){var w1=[];var x1=r1.prototype._getParamKeys(e,w1);if(x1.length>0){var y1=sap.ushell.Container.getService("CrossApplicationNavigation");y1.getAppStateData(x1).then(function(z1){t1={};w1.forEach(function(A1,B1){if(z1[B1][0]){t1[A1]=z1[B1][0];}});v1();},function(z1){v1();});}else{t1={};v1();}}else{v1();}return i.promise();};r1.prototype.postMessageToIframe=function(i,p,s1){var t1=this;var u1=i.request_id;return new Promise(function(v1,w1){function x1(B1){var C1;try{C1=JSON.parse(B1.data,t1);if(u1!==C1.request_id){return;}if(C1.status==="success"){v1(C1);}else{w1(C1);}window.removeEventListener("message",x1);}catch(e){v1();L.warning("Obtained bad response from framework in response to message "+i.request_id);L.debug("Underlying framework returned invalid response data: '"+B1.data+"'");}}var y1=JSON.stringify(i);L.debug("Sending postMessage "+y1+" to application container '"+t1.getId()+"'");var z1=new f(t1._getIFrameUrl(p));var A1=z1.protocol()+"://"+z1.host();if(s1){window.addEventListener("message",x1,false);p.contentWindow.postMessage(y1,A1);}else{p.contentWindow.postMessage(y1,A1);v1();}});};r1.prototype.postMessageToCurrentIframe=function(e,i){if(i===undefined){i=false;}var p=this._getIFrame();if(!p){if(i){return Promise.reject({message:"Expected opened iframe not found."});}return;}return this.postMessageToIframe(e,p,i);};r1.prototype.setNewApplicationContext=function(e,i){var p=this;var s1=this["setNew"+e+"ApplicationContext"];if(!s1){return Promise.reject({message:"Unsupported application type"});}var t1=this._getIFrame();if(!t1){return Promise.reject({message:"Expected an existing TR application application frame but found none."});}var u1=this.createPostMessageRequest("sap.gui.triggerCloseSessionImmediately",{});return this.postMessageToIframe(u1,t1,true).then(function(){return s1.call(p,i);},function(v1){return Promise.reject({eventData:v1,message:"Failed to change application context."});});};r1.prototype.onApplicationOpened=function(e){var i=this.getIsStateful();if(!i){return Promise.resolve();}var p=this.getApplicationType();if(p==="TR"&&e!=="TR"){var s1=this._getIFrame();if(!s1){return Promise.reject({message:"Expected an exisiting TR application application frame but found none."});}var t1=this.createPostMessageRequest("sap.gui.triggerCloseSession",{});return this.postMessageToIframe(t1,s1,false).catch(function(u1){return Promise.reject({eventData:u1,message:"Failed to change application context."});});}return Promise.resolve();};r1.prototype.postMessageRequest=function(e,i){var p=this._getIFrame();if(!p){return Promise.reject({message:"Expected an exisiting TR application application frame but found none."});}var s1=this.createPostMessageRequest(e,i||{});return this.postMessageToIframe(s1,p,false).catch(function(t1){return Promise.reject({eventData:t1,message:"Failed to post message."});});};r1.prototype.sendBeforeAppCloseEvent=function(){var e=this.getBeforeAppCloseEvent&&this.getBeforeAppCloseEvent(),i;if(e&&e.enabled&&e.enabled===true){i=this.createPostMessageRequest("sap.ushell.services.CrossApplicationNavigation.beforeAppCloseEvent",e.params);return this.postMessageToIframe(i,this._getIFrame(),true);}return undefined;};r1.prototype.getDeffedControlCreation=function(e){return this.oDeferredControlCreation?this.oDeferredControlCreation.promise():jQuery.Deferred().resolve().promise();};r1.prototype._getCommunicationHandlers=B;r1.prototype._adaptIsUrlSupportedResultForMessagePopover=x;r1.prototype._getLogoutHandler=z;r1.prototype._getParameterMap=F;r1.prototype._getTranslatedText=G;r1.prototype._createErrorControl=J;r1.prototype._destroyChild=N;r1.prototype._createUi5View=O;r1.prototype._publishExternalEvent=Q;r1.prototype._createUi5Component=V;r1.prototype._disableRouter=W;r1.prototype._createSystemForUrl=X;r1.prototype._isTrustedPostMessageSource=Y;r1.prototype._handleMessageEvent=a1;r1.prototype._logout=d1;r1.prototype._renderControlInDiv=e1;r1.prototype._checkNwbcUrlAdjustment=f1;r1.prototype._adjustNwbcUrl=g1;r1.prototype._render=j1;r1.prototype._getParamKeys=m1;r1.prototype._buildHTMLElements=n1;r1.prototype._buildHTMLForAllPostParams=o1;r1.prototype._generateRootElementForIFrame=q1;r1.prototype._backButtonPressedCallback=Z;r1.prototype._getIFrame=$;r1.prototype._getIFrameUrl=_;r1.prototype._filterURLParams=l1;r1.prototype._adjustURLForIsolationOpeningWithoutURLTemplate=k1;r1.prototype._resetPluginsLoadIndications=c1;r1.prototype._handlePostMessagesForPluginsPostLoading=b1;return r1;},true);
sap.ui.predefine('sap/ushell/components/tiles/utils',["sap/ushell/services/_ClientSideTargetResolution/PrelaunchOperations","sap/ushell/resources","sap/ui/thirdparty/datajs","sap/ui/model/json/JSONModel","sap/ui/core/library","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/core/IconPool","sap/ui/core/Icon","sap/m/SelectDialog","sap/m/StandardListItem","sap/m/Text","sap/ui/core/CustomData","sap/ui/core/Item","sap/m/Label","sap/ui/model/Sorter","sap/ui/thirdparty/jquery","sap/base/Log","sap/ushell/components/tiles/utilsRT"],function(P,r,O,J,c,F,d,I,e,S,f,T,C,g,L,h,q,k,u){"use strict";var M=c.MessageType;var V=c.ValueState;var l=c.mvc.ViewType;var U={};U.isInitial=function(s){return s==="App Launcher – Static"||s==="App Launcher – Dynamic"||s==="Target Mapping";};U.getResourceBundleModel=function(){return r.i18nModel;};U.getEmptyRowObj=function(E){return{name:"",mandatory:false,value:"",isRegularExpression:false,defaultValue:"",valEnabled:false||!E,defValEnabled:true,editable:E};};U.getEmptyTileActionsRowObj=function(E){var R=U.getResourceBundleModel().getResourceBundle();return{menu_title:"",target_type:R.getText("configuration.tile_actions.table.target_type.url"),navigation_target:"",action:"",icon:"",isTargetTypeIntent:false,editable:E};};U.getTileNavigationActionsRows=function(a,E){var b=[],j=[];j=this.getTileNavigationActions(a);if(j.length){for(var i=0;i<j.length;i++){b.push(t(j[i],E));}}else{b=[this.getEmptyTileActionsRowObj(E)];}return b;};U.getTileNavigationActions=function(a){var b=[],s="";var j=a.bag.getBag("tileNavigationActions");if(j.getPropertyNames().indexOf("tile_navigation_actions")>=0){b=JSON.parse(j.getProperty("tile_navigation_actions"));for(var i=0;i<b.length;i++){if(b[i].text){if(j.getTextNames().indexOf("action_tile_"+(i+1))>=0){s=j.getText("action_tile_"+(i+1));}b[i].text=s;}}}return b;};var t=function(a,E){var b={},R=U.getResourceBundleModel().getResourceBundle();b.menu_title=a.text;b.icon=a.icon;if((a.targetURL).charAt(0)==="#"){b.target_type=R.getText("configuration.tile_actions.table.target_type.intent");var N=a.targetURL.split("-");b.navigation_target=N[0].substring(1,N[0].length);b.action=N[1];b.isTargetTypeIntent=true;}else{b.target_type=R.getText("configuration.tile_actions.table.target_type.url");b.navigation_target=a.targetURL;b.action="";b.isTargetTypeIntent=false;}b.editable=E;return b;};U.tileActionsRows2TileActionsArray=function(a){var b=[];for(var i=0;i<a.length;i++){if(a[i].menu_title){b.push(m(a[i]));}}return b;};var m=function(a){var b={};b.text=a.menu_title;b.icon=a.icon;if(a.action){b.targetURL="#"+a.navigation_target+"-"+a.action;}else{b.targetURL=a.navigation_target;}return b;};U.populateTileNavigationActionsBag=function(a,N){a.setProperty("tile_navigation_actions",JSON.stringify(N));for(var i=0;i<N.length;i++){var A=N[i].text;a.setText("action_tile_"+(i+1),A);}};U.getDefaultFormFactors=function(){return{"appDefault":false,"manual":{"desktop":true,"tablet":true,"phone":true},"defaultParam":true};};U.buildFormFactorsObject=function(a){return{"appDefault":a.getProperty("/config/appFormFactor"),"manual":{"desktop":a.getProperty("/config/desktopChecked"),"tablet":a.getProperty("/config/tabletChecked"),"phone":a.getProperty("/config/phoneChecked")}};};U.tableHasDuplicateParameterNames=function(a){var p={};for(var i=0;i<a.length;i++){var b=a[i].name;if(b!==""){if(p[b]){return true;}p[b]=true;}}return false;};U.tableHasInvalidSapPrelaunchOperationValue=function(a){for(var i=0;i<a.length;i++){if(a[i].name==="sap-prelaunch-operations"){if(P.parseAndValidateOperations(a[i].defaultValue)===null){return false;}break;}}return true;};U.getMappingSignatureString=function(a,b){var j="";for(var i=0;i<a.length;i++){if(a[i].name){j+=(n(a[i])+"&");}}return b?j+"*=*":j.substring(0,j.length-1);};var n=function(a){var p="";if(a.mandatory){if(a.isRegularExpression){p="{"+a.name+"="+encodeURIComponent(a.value)+"}";}else{p=a.name+"="+encodeURIComponent(a.value);}}else{p="["+a.name+"="+encodeURIComponent(a.defaultValue)+"]";}return p;};U.getMappingSignatureTableData=function(a,E){var p=[];var b=a.split("&");for(var i=0;i<b.length;i++){var j=b[i];if(j!=="*=*"){p.push(o(b[i],E));}}return p;};var o=function(p,E){var a={};if(p.charAt(0)==="["){a.mandatory=false;a.isRegularExpression=false;a.value="";p=p.substring(1,p.length-1);a.name=p.substring(0,p.indexOf("="));a.defaultValue=decodeURIComponent(p.substring(p.indexOf("=")+1));}else{a.mandatory=true;a.defaultValue="";if(p.charAt(0)==="{"){a.isRegularExpression=true;p=p.substring(1,p.length-1);}else{a.isRegularExpression=false;}a.name=p.substring(0,p.indexOf("="));a.value=decodeURIComponent(p.substring(p.indexOf("=")+1));}a.editable=E;if(E){a.valEnabled=a.mandatory;a.defValEnabled=!a.mandatory;}else{a.valEnabled=true;a.defValEnabled=true;}return a;};U.getAllowUnknownParametersValue=function(a){if(a&&(a.substring(a.length-3,a.length)==="*=*")){return true;}return false;};U.getMappingSignature=function(R,a){var A=a?"allowed":"ignored";var b=new RegExp("%%UserDefault[.].+%%");var i=[];var j={"parameters":{},"additional_parameters":A};R.forEach(function(p){j.parameters[p.name]={"required":p.mandatory,"rename_to":p.rename_to};if(p.defaultValue){i=b.exec(p.defaultValue);if(i){p.defaultValue=i[0];}j.parameters[p.name].defaultValue={"value":p.defaultValue};}if(p.value){i=b.exec(p.value);if(i){p.value=i[0];}j.parameters[p.name].filter={"value":p.value};if(p.isRegularExpression){j.parameters[p.name].filter.format="regexp";}}});return j;};U.getSignatureTableData=function(s,E){var p=[];var R={};var a={};var b=s.parameters;for(var i in b){a=b[i];R={};R.editable=E;R.name=i;R.mandatory=a.required;if(a.rename_to){R.rename_to=a.rename_to;}else{R.rename_to=a.renameTo;}if(E){R.valEnabled=R.mandatory;R.defValEnabled=!R.mandatory;}else{R.valEnabled=true;R.defValEnabled=true;}if(a.filter){R.value=a.filter.value;if(a.filter.format&&a.filter.format==="regexp"){R.isRegularExpression=true;}}if(a.defaultValue){R.defaultValue=a.defaultValue.value;}p.push(R);}return p;};U.getTranslatedTitle=function(a){if(a.bag){var b=a.bag.getBag("tileProperties");if(b.getTextNames().indexOf("display_title_text")>=0){return b.getText("display_title_text");}}if(a.title){return a.title.getTitle();}if(a.preview){return a.preview.getTitle();}return"";};U.getTranslatedSubtitle=function(a,b){if(a.bag){var i=a.bag.getBag("tileProperties");if(i.getTextNames().indexOf("display_subtitle_text")>=0){return i.getText("display_subtitle_text");}}if(typeof b.display_subtitle_text==="string"){return b.display_subtitle_text;}if(a.preview&&a.preview.getDescription&&a.preview.getDescription()){return a.preview.getDescription();}return"";};U.getTranslatedProperty=function(a,b,p){if(a.bag){var i=a.bag.getBag("tileProperties");if(i.getTextNames().indexOf(p)>=0){return i.getText(p);}}return b[p];};U.getActionConfiguration=function(a,A){var s=a.configuration.getParameterValueAsString("tileConfiguration");var b=JSON.parse(s||"{}"),R;if(typeof A==="undefined"){A=a.configurationUi.isEnabled();}if(A){R=U.getResourceBundleModel().getResourceBundle();}b.semantic_object=b.semantic_object||(A?"["+R.getText("configuration.semantic_object")+"]":"");b.semantic_action=b.semantic_action||(A?"["+R.getText("configuration.semantic_action")+"]":"");b.navigation_provider=b.navigation_provider||"";b.navigation_provider_role=b.navigation_provider_role||"";b.navigation_provider_instance=b.navigation_provider_instance||"";b.target_application_id=b.target_application_id||"";b.target_application_alias=b.target_application_alias||"";b.display_info_text=b.display_info_text||"";b.editable=true;if(a.configurationUi&&a.configurationUi.isReadOnly){if(a.configurationUi.isReadOnly()){b.editable=false;}}return b;};U.getConfiguration=function(v){var a=v.getViewData();var b=a.chip;var i=u.getConfiguration(b,true,true);return i;};U.getConfigurationUi=function(v,s){var a,b,R,i,A,j;var p=v.getViewData();var w=U.getConfiguration(v);var x=new J({config:w,tileModel:v.getModel()});a=new sap.ui.view({type:l.XML,viewData:p,viewName:s});a.setModel(x);b=a.byId("navigation_semantic_objectInput")||a.byId("semantic_objectInput");if(b){b.getModel().setProperty("/enabled",w.navigation_use_semantic_object);b.getModel().setProperty("/value",w.semantic_object||w.navigation_semantic_object);}R=a.byId("navigation_provider_roleInput");if(R){R.getModel().setProperty("/value",w.navigation_provider_role);}i=a.byId("navigation_provider_instanceInput");if(i){i.getModel().setProperty("/value",w.navigation_provider_instance);}A=a.byId("target_application_aliasInput");if(A){A.getModel().setProperty("/value",w.target_application_alias);}j=a.byId("targetTypeInput");if(j){if(!a.getModel().getProperty("/config/transaction")){a.getModel().setProperty("/config/transaction",{});}if(!a.getModel().getProperty("/config/web_dynpro")){a.getModel().setProperty("/config/web_dynpro",{});}if(v.getModel().getProperty("/config/navigation_provider")==="LPD"){U.displayLpdCustApplicationTypeFields(a);}else if(v.getModel().getProperty("/config/navigation_provider")==="WCF"){j.setSelectedKey("WCF");U.displayWCFApplicationTypeFields(a);}else if(v.getModel().getProperty("/config/navigation_provider")==="SAPUI5"||v.getModel().getProperty("/config/navigation_provider")===""){j.setSelectedKey("SAPUI5");U.displaySapui5ApplicationTypeFields(a);}else if(v.getModel().getProperty("/config/navigation_provider")==="TR"){U.displayTransactionApplicationTypeFields(a);}else if(v.getModel().getProperty("/config/navigation_provider")==="WDA"){U.displayWebDynproApplicationTypeFields(a);}else if(v.getModel().getProperty("/config/navigation_provider")==="URL"){U.displayURLApplicationTypeFields(a);}else if(v.getModel().getProperty("/config/navigation_provider")==="URLT"){U.displayURLTApplicationTypeFields(a);x.setProperty("/config/editable",false);x.setProperty("/config/manualFormFactor",false);}}return a;};U._updateTilePropertiesTexts=function(v,a){var b=a.getTextNames(),i=v.getModel();b.forEach(function(p){i.setProperty("/data/"+p,a.getText(p));i.setProperty("/config/"+p,a.getText(p));});};U._updateTileConfiguration=function(v,a){var b=v.getModel();q.each(JSON.parse(a),function(p,s){b.setProperty("/data/"+p,s);b.setProperty("/config/"+p,s);if(p==="navigation_target_url"){b.setProperty("/nav/"+p,s);}});};U.aData=[];U.aActionData=[];U.aRoleData=[];U.aAliasData=[];U.objectSelectDoSearch=function(E){var a=[],v=E.getParameter("value"),i,s,b;if(v!==undefined){i=E.getParameter("itemsBinding");s=new F("name",d.Contains,v);b=new F("obj",d.Contains,v);a.push(b);a.push(s);i.filter(new F(a,false));}};U.actionSelectDoSearch=function(E){var a=[],v=E.getParameter("value"),i,s;if(v!==undefined){i=E.getParameter("itemsBinding");s=new F("text",d.Contains,v);a.push(s);i.filter(new F(a,false));}};U.roleSelectDoSearch=function(E){var a=[],v=E.getParameter("value"),i,s,b;if(v!==undefined){i=E.getParameter("itemsBinding");s=new F("role",d.Contains,v);b=new F("instance",d.Contains,v);a.push(s);a.push(b);i.filter(new F(a,false));}};U.instanceSelectDoSearch=function(E){var a=[],v=E.getParameter("value"),b,R,i,s,j;b=E.getSource().getCustomData();R=b[0].getValue();if(v!==undefined){i=E.getParameter("itemsBinding");if(v!==""){j=new F("instance",d.Contains,v);a.push(j);}if(R!==""){s=new F("role",d.EQ,R);a.push(s);}if(a.length>0){i.filter(new F(a,true));}}};U.instanceSuggest=function(a,E){var v=a.getView(),b=[],s=E.getParameter("value"),R,i,j,p,w;R=v.byId("navigation_provider_roleInput");i=R.getValue();s=E.getParameter("suggestValue");if(s!==""){w=new F("instance",d.Contains,s);b.push(w);}if(i!==""){p=new F("role",d.EQ,i);b.push(p);}if(b.length>0){j=E.oSource.getBinding("suggestionItems");j.filter(new F(b,true));}};U.aliasSuggest=function(a,E){var v=a.getView(),b=[],s=E.getParameter("value"),i,j,p,w,x;i=v.byId("navigation_provider_instanceInput");j=i.getValue();s=E.getParameter("suggestValue");if(s!==""){x=new F("alias",d.Contains,s);b.push(x);}if(j!==""){w=new F("instance",d.EQ,j);b.push(w);}if(b.length>0){p=E.oSource.getBinding("suggestionItems");p.filter(new F(b,true));}};U.aliasSelectDoSearch=function(E){var a=[],v=E.getParameter("value"),b,i,j,s,p;b=E.getSource().getCustomData();i=b[0].getValue();if(v!==undefined){j=E.getParameter("itemsBinding");s=new F("instance",d.EQ,i);if(v!==""){p=new F("alias",d.Contains,v);a.push(p);}a.push(s);j.filter(new F(a,true));}};U.objectSelectUpdateDialog=function(s,v){var a=[],i=s.getBinding("items"),b;if(v!==undefined){b=new F("name",d.Contains,v);a.push(b);i.filter(a);}};U.actionSelectUpdateDialog=function(s,v){var a=[],i=s.getBinding("items"),b;if(v!==undefined){b=new F("text",d.Contains,v);a.push(b);i.filter(a);}};U.roleSelectUpdateDialog=function(s,v){var a=[],i=s.getBinding("items"),b;if(v!==undefined){b=new F("role",d.Contains,v);a.push(b);i.filter(a);}};U.instanceSelectUpdateDialog=function(s,v){var a=[],b,i=s.getBinding("items"),j,R,p;b=s.getCustomData();R=b[0].getValue();if(v!==undefined){j=new F("instance",d.Contains,v);a.push(j);}if(R!==""){p=new F("role",d.EQ,R);a.push(p);}if(a.length>0){i.filter(a,true);}};U.aliasSelectUpdateDialog=function(s,v){var a=[],b,i,j=s.getBinding("items"),p,w;b=s.getCustomData();i=b[0].getValue();if(v!==undefined){w=new F("alias",d.Contains,v);a.push(w);}if(i!==""){p=new F("instance",d.EQ,i);a.push(p);}if(a.length>0){j.filter(a,true);}};U.sSelectedColor=(q(".sapMStdTileIconDiv").css("color")||"#007cc0").split(" ").join("");U.sDeselectedColor=(q(".sapMLabel:not(.sapFioriDropZoneText )").css("color")||"#666666").split(" ").join("");U.iconSelect=function(i,s){i.setColor(s?U.sSelectedColor:U.sDeselectedColor);i.setActiveColor(s?U.sDeselectedColor:U.sSelectedColor);};U.onSelectIcon=function(a,i,b,j){var p=a.getView().getModel(),s;if(i){s=p.getProperty("/config/tile_actions_selected_icon");}else{s=p.getProperty("/config/selected_icon");}if(s){U.iconSelect(s,false);}s=j.getSource();U.iconSelect(s,true);p.setProperty("/config/ok.enabled",true);if(i){p.setProperty("/config/tile_actions_selected_icon",s);}else{p.setProperty("/config/selected_icon",s);}a.byId("selectIconDialog").setTitle(s.getSrc());};U.onSelectIconClose=function(v){v.byId("selectIconDialog").close();};U.onSelectIconOk=function(v,a){var s=v.getModel().getProperty("/config/selected_icon");if(!a){v.getModel().setProperty("/config/display_icon_url",s.getSrc());v.byId("iconInput").setValueState(V.None);}else{s=v.getModel().getProperty("/config/tile_actions_selected_icon");if(s){a.setValue(s.getSrc());a.setValueState(V.None);}}U.onSelectIconClose(v);};U.iconSelectOnValueHelpRequest=function(a,E,b){var p=a.getView().getModel();var R=a.getView().byId("icons");var s=I.getIconCollectionNames();var D=a.getView().byId("selectIconDialog");var v=a.getView().byId("ok");var w,x,y,z,i,j,A,B=false;R.destroyContent();if(b){y=sap.ui.getCore().byId(E.getParameter("id"));x=y.getValue();}else{x=p.getProperty("/config/display_icon_url");}v.attachEventOnce("press",function(){U.onSelectIconOk(a.getView(),y);});s.sort();s=q.grep(s,function(G){if(G==="BusinessSuiteInAppSymbols"){B=true;return false;}return true;});if(B){s.push("BusinessSuiteInAppSymbols");}for(i=0;i<s.length;i+=1){z=I.getIconNames(s[i]);z.sort();for(j=0;j<z.length;j+=1){A=I.getIconURI(z[j],s[i]);R.addContent(new e({height:"38px",press:U.onSelectIcon.bind(null,a,b,y),size:"2rem",src:A,tooltip:A,width:"38px"}));}}w=R.getContent();p.setProperty("/config/ok.enabled",false);D.bindProperty("title",{model:"i18n",path:"configuration.select_icon"});for(i=0;i<w.length;i+=1){if(w[i].getSrc()===x){if(b){p.setProperty("/config/tile_actions_selected_icon",w[i]);}else{p.setProperty("/config/selected_icon",w[i]);}U.iconSelect(w[i],true);p.setProperty("/config/ok.enabled",true);D.setTitle(x);}else{U.iconSelect(w[i],false);}}D.open();};U.objectSelectOnValueHelpRequest=function(a,E,i){var v=a.getView(),s=U.getResourceBundleModel().getResourceBundle().getText("configuration.semantic_object"),b,j,p=new J(),w=new S("semantic_object_select_dialog",{title:s,search:U.objectSelectDoSearch,liveChange:U.objectSelectDoSearch}),x=new f({title:"{obj}"});if(i){b=sap.ui.getCore().byId(E.getParameter("id"));}else{b=v.byId("semantic_objectInput")||v.byId("navigation_semantic_objectInput");}j=b.getValue();w.open(j);p.setData(a.aDefaultObjects.concat(U.aData));w.bindAggregation("items","/",x);w.setModel(p);U.objectSelectUpdateDialog(w,j);w.attachCancel(function(y){b.setValue(j);if(!i){b.fireChange();}w.destroy();w=null;});w.attachConfirm(function(y){var z=y.getParameter("selectedItem");if(z){b.setValue(z.getTitle());if(!i){b.fireChange();}}w.destroy();w=null;});};U.actionSelectOnValueHelpRequest=function(a,E,i){var v=a.getView(),s=U.getResourceBundleModel().getResourceBundle().getText("configuration.semantic_action"),A,b,j=new J(),p=new S("semantic_action_select_dialog",{title:s,search:U.actionSelectDoSearch,liveChange:U.actionSelectDoSearch}),w=new f({title:"{text}"});if(i){A=sap.ui.getCore().byId(E.getParameter("id"));}else{A=v.byId("semantic_actionInput")||v.byId("navigation_semantic_actionInput");}b=A.getValue();p.open(b);j.setData(U.aActionData);p.bindAggregation("items","/items",w);p.setModel(j);U.actionSelectUpdateDialog(p,b);p.attachCancel(function(x){A.setValue(b);if(!i){A.fireChange();}p.destroy();p=null;});p.attachConfirm(function(x){var y=x.getParameter("selectedItem");if(y){A.setValue(y.getTitle());if(!i){A.fireChange();A.fireLiveChange({"newValue":y.getTitle()});}}p.destroy();p=null;});};U.roleSelectOnValueHelpRequest=function(a){var v=a.getView(),s=U.getResourceBundleModel().getResourceBundle().getText("configuration.navigation_provider_role"),R,i,b,j=new J(),p=new sap.m.TableSelectDialog("role_select_dialog",{title:s,search:U.roleSelectDoSearch,liveChange:U.roleSelectDoSearch,columns:[new sap.m.Column({header:[new T({text:U.getResourceBundleModel().getResourceBundle().getText("configuration.navigation_provider_role")})]}),new sap.m.Column({header:[new T({text:U.getResourceBundleModel().getResourceBundle().getText("configuration.navigation_provider_instance")})]})]}),w=new sap.m.ColumnListItem({cells:[new T({text:"{role}"}),new T({text:"{instance}"})]});R=v.byId("navigation_provider_roleInput");i=v.byId("navigation_provider_instanceInput");b=R.getValue();p.open(b);j.setData(a.aDefaultObjects.concat(U.aRoleData));p.bindAggregation("items","/",w);p.setModel(j);U.roleSelectUpdateDialog(p,b);p.attachCancel(function(x){R.setValue(b);R.fireChange();p.destroy();p=null;});p.attachConfirm(function(x){var y=x.getParameter("selectedItem");if(y){R.setValue(y.getCells()[0].getText());i.setValue(y.getCells()[1].getText());R.fireChange();i.fireChange();}p.destroy();p=null;});};U.instanceSelectOnValueHelpRequest=function(a){var v=a.getView(),R,s=U.getResourceBundleModel().getResourceBundle().getText("configuration.navigation_provider_instance"),i,b,j=new J(),p=new S("instance_select_dialog",{title:s,search:U.instanceSelectDoSearch,liveChange:U.instanceSelectDoSearch}),w=new f({title:"{instance}"});i=v.byId("navigation_provider_instanceInput");b=i.getValue();R=v.byId("navigation_provider_roleInput").getValue();p.addCustomData(new C({key:"role",value:R}));p.open(b);j.setData(a.aDefaultObjects.concat(U.aRoleData));p.bindAggregation("items","/",w);p.setModel(j);U.instanceSelectUpdateDialog(p,b);p.attachCancel(function(x){i.setValue(b);i.fireChange();p.destroy();p=null;});p.attachConfirm(function(x){var y=x.getParameter("selectedItem");if(y){i.setValue(y.getTitle());i.fireChange();}p.destroy();p=null;});};U.applicationAliasSelectOnValueHelpRequest=function(a){var v=a.getView(),s=U.getResourceBundleModel().getResourceBundle().getText("configuration.target_application_alias"),A,b,i,j=new J(),p=new S("alias_select_dialog",{title:s,search:U.aliasSelectDoSearch,liveChange:U.aliasSelectDoSearch}),w=new f({title:"{alias}"});A=v.byId("target_application_aliasInput");b=A.getValue();i=v.byId("navigation_provider_instanceInput").getValue();p.addCustomData(new C({key:"instance",value:i}));p.open(b);j.setData(a.aDefaultObjects.concat(U.aAliasData));p.bindAggregation("items","/",w);p.setModel(j);U.aliasSelectUpdateDialog(p,b);p.attachCancel(function(x){A.setValue(b);A.fireChange();p.destroy();p=null;});p.attachConfirm(function(x){var y=x.getParameter("selectedItem");if(y){A.setValue(y.getTitle());A.fireChange();}p.destroy();p=null;});};U.onTargetTypeChange=function(a){var i=a.getParameter("id");var p=sap.ui.getCore().byId(i).getParent().getCells();var s=a.getSource().getSelectedKey();if(s==="INT"){p[3].setEnabled(true);p[2].setShowValueHelp(true);p[2].setValue("");}else{p[2].setShowValueHelp(false);p[2].setValue("");p[3].setEnabled(false);p[3].setValue("");}};U.addTileActionsRow=function(a){var b=a.getModel();var i=b.getProperty("/config/tile_actions_rows");var j=this.getEmptyTileActionsRowObj();i.push(j);b.setProperty("/config/tile_actions_rows",i);};U.deleteTileActionsRow=function(j){var p=j.getModel();var s=p.getProperty("/config/tile_actions_rows");var v=j.byId("tileActions");var w=v.getSelectedIndices();var x=w.sort(function(a,b){return b-a;}).slice();for(var i=0;i<x.length;i++){v.removeSelectionInterval(x[i],x[i]);s.splice(x[i],1);}p.setProperty("/config/tile_actions_rows",s);};U.checkInput=function(a,b){var i=U.getResourceBundleModel().getResourceBundle(),j=a.byId("iconInput"),p=a.byId("useLpdCheckbox"),s=a.byId("navigation_semantic_objectInput")||a.byId("semantic_objectInput"),v=a.byId("navigation_semantic_actionInput")||a.byId("semantic_actionInput"),w=V.None,x=null,N=q.trim(b.getParameter("newValue"));switch(b.getSource()){case j:if(N!==""&&N.substring(0,11)!=="sap-icon://"){w=V.Error;x=i.getText("configuration.display_icon_url.warning");}break;case p:if(!p.getSelected()){v.setValueState(V.None);s.setValueState(V.None);}break;case s:if(/[-#&? ]/.test(N)){w=V.Error;x=i.getText("configuration.semantic_object.error_invalid_chars");}else if(N===""){w=V.Error;}break;case v:if(/[-#&? ]/.test(N)){w=V.Error;x=i.getText("configuration.semantic_action.error_invalid_chars");}else if(N===""){w=V.Error;}break;default:break;}if(w){b.getSource().setValueState(w);if(x!==null){b.getSource().setValueStateText(x||"");}}};U.checkInputOnSaveConfig=function(a){var i=a.byId("iconInput");var s=a.byId("navigation_semantic_objectInput");var b=a.byId("navigation_semantic_actionInput");var j=a.byId("useLpdCheckbox");var p=U.getResourceBundleModel().getResourceBundle();var R=false;if(i.getValue()!==""&&!U.isIconURIValid(i.getValue())){i.setValueState(V.Error);i.setValueStateText(p.getText("configuration.display_icon_url.warning"));R=true;}if(j.getSelected()&&/[-#&? ]/.test(s.getValue())){s.setValueState(V.Error);s.setValueStateText(p.getText("configuration.semantic_object.error_invalid_chars"));R=true;}else if(j.getSelected()&&s.getValue()===""){s.setValueState(V.Error);R=true;}if(/[-#&? ]/.test(b.getValue())){b.setValueState(V.Error);b.setValueStateText(p.getText("configuration.semantic_action.error_invalid_chars"));R=true;}else if(j.getSelected()&&b.getValue()===""){b.setValueState(V.Error);R=true;}return R;};U.checkTileActions=function(a){var b=a.getModel().getProperty("/config/tile_actions_rows");var j=U.getResourceBundleModel().getResourceBundle();var R=false;for(var i=0;i<b.length;i++){if(!b[i].menu_title&&(b[i].navigation_target||b.length>1)){b[i].valueState=V.Error;R=true;}else{b[i].valueState=V.None;}if(b[i].icon){if(!U.isIconURIValid(b[i].icon)){b[i].iconValueState=V.Error;b[i].iconValueStateText=j.getText("configuration.display_icon_url.warning");R=true;}}}a.getModel().setProperty("/config/tile_actions_rows",b);return R;};U.isIconURIValid=function(i){var R=[];var s="";var a="";var v="";R=/sap-icon:\/\/(.+)\//.exec(i);if(R){s=R[1];R=/\/\/.+\/(.+)/.exec(i);if(R){a=R[1];}else{a="";}v=I.getIconURI(a,s);if(v!==i){return false;}}else{R=/sap-icon:\/\/(.+)/.exec(i);if(R){a=R[1];if(!I.getIconInfo(a)){return false;}}else{return false;}}return true;};U.checkTMInput=function(a,b){var i=U.getResourceBundleModel().getResourceBundle(),s=a.byId("semantic_objectInput"),j=a.byId("semantic_actionInput"),p=a.byId("target_application_descriptionInput"),v=a.byId("target_application_urlInput"),w=a.byId("target_application_componentInput"),N=a.byId("navigation_provider_roleInput"),x=a.byId("navigation_provider_instanceInput"),y=a.byId("target_application_aliasInput"),z=a.byId("target_application_idInput"),A=q.trim(b.getParameter("newValue")),B=V.None,D=null;switch(b.getSource()){case s:if(/[-#&? ]/.test(A)){B=V.Error;D=i.getText("configuration.semantic_object.error_invalid_chars");}if(j.getValue()===""){j.setValueState(V.Error);}break;case j:if(/[-#&? ]/.test(A)){B=V.Error;D=i.getText("configuration.semantic_action.error_invalid_chars");}else if(A===""){B=V.Error;}break;case p:if(A===""){B=V.Error;}break;case v:if(A!==""&&!(/^[-~+,;:?%&#=/.\w]+$/.test(A))){B=V.Error;D=i.getText("configuration.target_application.url.error_invalid_chars");}break;case w:if(A===""){B=V.Error;}else if(A.substring(0,17)==="SAPUI5.Component="){B=V.Error;D=i.getText("configuration.target_application.component.error_invalid_input");}break;case N:if(A===""){B=V.Error;}else if(!(/^[\w/]+$/.test(A))){B=V.Error;D=i.getText("configuration.target_application.role.error_invalid_chars");}break;case x:if(A===""){B=V.Error;}else if(!(/^[\w/]+$/.test(A))){B=V.Error;D=i.getText("configuration.target_application.instance.error_invalid_chars");}break;case y:if(A===""&&z.getValue()===""){B=V.Error;D=i.getText("configuration.target_application.alias_id.warning");}else if(A!==""&&z.getValue()!==""){B=V.Error;D=i.getText("configuration.target_application.alias_id.warning");z.setValueState(B);z.setValueStateText(D);}else{z.setValueState(V.None);}break;case z:if(A===""&&y.getValue()===""){B=V.Error;D=i.getText("configuration.target_application.alias_id.warning");}else if(A!==""&&y.getValue()!==""){B=V.Error;D=i.getText("configuration.target_application.alias_id.warning");y.setValueState(B);y.setValueStateText(D);}else if(A!==""&&!(/^[A-Fa-f0-9]+$/.test(A))){B=V.Error;D=i.getText("configuration.target_application.alias_id.error_invalid_chars");}else{y.setValueState(V.None);}break;default:break;}if(B){b.getSource().setValueState(B);if(D!==null){b.getSource().setValueStateText(D||"");}}};U.checkTMInputOnSaveConfig=function(a){var b=U.getResourceBundleModel().getResourceBundle();var s=a.byId("semantic_objectInput");var i=a.byId("semantic_actionInput");var j=a.byId("target_application_descriptionInput");var p=a.byId("target_application_urlInput");var v=a.byId("target_application_componentInput");var N=a.byId("navigation_provider_roleInput");var w=a.byId("navigation_provider_instanceInput");var x=a.byId("target_application_aliasInput");var y=a.byId("target_application_idInput");var z=a.byId("targetTypeInput");var A=a.byId("target_transactionInput");var W=a.byId("target_web_dynpro_applicationInput");var B=a.byId("target_wcf_application_idInput");var D=a.byId("desktopCB");var E=a.byId("tabletCB");var G=a.byId("phoneCB");var R=false;s.setValue(s.getValue().trim());if(/[-#&? ]/.test(s.getValue())){s.setValueState(V.Error);s.setValueStateText(b.getText("configuration.semantic_object.error_invalid_chars"));R=true;}i.setValue(i.getValue().trim());if(/[-#&? ]/.test(i.getValue())){i.setValueState(V.Error);i.setValueStateText(b.getText("configuration.semantic_action.error_invalid_chars"));R=true;}else if(i.getValue()===""){i.setValueState(V.Error);R=true;}var H=a.getModel().getProperty("/config/navigation_provider"),K;if(H==="SAPUI5"){if(j.getValue()===""){j.setValueState(V.Error);R=true;}if(p.getValue()!==""&&!(/^[-~+,;:?%&#=/.\w]+$/.test(p.getValue()))){p.setValueState(V.Error);p.setValueStateText(b.getText("configuration.target_application.url.error_invalid_chars"));R=true;}if(v.getValue()===""){v.setValueState(V.Error);R=true;}else if(v.getValue().substring(0,17)==="SAPUI5.Component="){v.setValueState(V.Error);v.setValueStateText(b.getText("configuration.target_application.component.error_invalid_input"));R=true;}}else if(H==="LPD"){if(N.getValue()===""){N.setValueState(V.Error);R=true;}if(!(/^[\w]+$/.test(N.getValue()))){N.setValueState(V.Error);K=b.getText("configuration.target_application.role.error_invalid_chars");N.setValueStateText(K);R=true;}if(w.getValue()===""){w.setValueState(V.Error);R=true;}if(!(/^[\w]+$/.test(w.getValue()))){w.setValueState(V.Error);K=b.getText("configuration.target_application.instance.error_invalid_chars");w.setValueStateText(K);R=true;}if(x.getValue()===""&&y.getValue()===""){K=b.getText("configuration.target_application.alias_id.warning");x.setValueState(V.Error);x.setValueStateText(K);y.setValueState(V.Error);y.setValueStateText(K);R=true;}if(x.getValue()!==""&&y.getValue()!==""){K=b.getText("configuration.target_application.alias_id.warning");x.setValueState(V.Error);x.setValueStateText(K);y.setValueState(V.Error);y.setValueStateText(K);R=true;}if(y.getValue()!==""&&!(/^[A-Fa-f0-9]+$/.test(y.getValue()))){y.setValueState(V.Error);y.setValueStateText(b.getText("configuration.target_application.alias_id.error_invalid_chars"));R=true;}}else if(H==="TR"){if(A.getValue()===""){A.setValueState(V.Error);R=true;}}else if(H==="WDA"){if(W.getValue()===""){W.setValueState(V.Error);R=true;}}else if(H==="WCF"){if(B.getValue()===""){B.setValueState(V.Error);R=true;}}else if(H==="URL"){if(p.getValue()===""){p.setValueState(V.Error);R=true;}else if(!(/^[-~+,;:?%&#=/.\w]+$/.test(p.getValue()))){p.setValueState(V.Error);p.setValueStateText(b.getText("configuration.target_application.url.error_invalid_chars"));R=true;}}else{z.setValueState(V.Error);z.setValueStateText(b.getText("configuration.navigation_provider.error_invalid_provider"));R=true;}if(!D.getSelected()&&!E.getSelected()&&!G.getSelected()){K=b.getText("configuration.form_factor.warning");D.setValueState(V.Error);D.setValueStateText(K);E.setValueState(V.Error);E.setValueStateText(K);G.setValueState(V.Error);G.setValueStateText(K);R=true;}return R;};U.updateTooltipForDisabledProperties=function(a){var b=a.getModel();var i=b.getProperty("/config/isLocaleSuitable");if(!i){var j=U.getResourceBundleModel().getResourceBundle();var p=j.getText("edit_configuration.original_locale_not_fit_tooltip",[b.getProperty("/config/userLocale"),b.getProperty("/config/orgLocale")]);a.byId("titleInput").setTooltip(p);a.byId("subtitleInput").setTooltip(p);a.byId("keywordsInput").setTooltip(p);a.byId("infoInput").setTooltip(p);}};U.updateMessageStripForOriginalLanguage=function(a){var b=a.getModel();if(b.getProperty("/config/isLocaleSuitable")===false){var s=U.getResourceBundleModel().getResourceBundle().getText("edit_configuration.original_locale_not_fit_message",[b.getProperty("/config/orgLocale").toUpperCase(),b.getProperty("/config/userLocale").toUpperCase()]);var i=a.byId("messageStrip");i.setVisible(true);i.setText(s);i.setType(M.Warning);}};U.createSemanticObjectModel=function(a,s,D){var v=a.getView(),b="/sap/opu/odata/UI2/INTEROP/SemanticObjects",j=[{obj:"",name:""},{obj:"*",name:"*"}],p=(D||j).slice(0),w=new J();w.setSizeLimit(999999);w.setProperty("/value","");w.setProperty("/enabled",true);s.bindAggregation("suggestionItems","suggest>/items",new g({text:"{suggest>obj}"}));s.setModel(w,"suggest");if(U.aData.length>0){setTimeout(function(){w.setData({items:p.concat(U.aData)},true);},0);return;}O.read({requestUri:b,headers:{"Accept":"application/json"}},function(x){var y,z,i;for(i=0;i<x.results.length;i=i+1){y=x.results[i].id;z=x.results[i].text;U.aData.push({obj:y,name:z||y});}w.setData({items:p.concat(U.aData)},true);},function(E){var i=E&&E.message?E.message:E;if(E.response){i+=" - "+E.response.statusCode+" "+E.response.statusText;}k.error("Could not fetch data: "+b+": "+i,null,(v.getViewName()||"sap.ushell.components.tiles.utils"));});};U.createRoleModel=function(a,R,b){var v=a.getView(),s="/sap/opu/odata/UI2/INTEROP/GetLPDInstances",j=new J(),p=new J();j.setSizeLimit(999999);p.setSizeLimit(999999);j.setProperty("/value","");j.setProperty("/enabled",true);p.setProperty("/value","");p.setProperty("/enabled",true);var w=new sap.m.ColumnListItem({cells:[new L({text:"{role}"}),new L({text:"{instance}"})]});R.bindAggregation("suggestionRows","/items",w);b.bindAggregation("suggestionItems","/items",new g({text:"{instance}"}));b.setModel(p);R.setModel(j);R.attachSuggestionItemSelected(function(i){b.setValue(i.getParameter("selectedRow").getCells()[1].getText());b.fireChange();});if(U.aRoleData.length>0){j.setData({items:U.aRoleData},false);p.setData({items:U.aRoleData},false);return;}O.read({requestUri:s,headers:{"Accept":"application/json"}},function(D){var x,y,i;for(i=0;i<D.results.length;i=i+1){x=D.results[i].lpdRole;y=D.results[i].instance;U.aRoleData.push({role:x,instance:y});}j.setData({items:U.aRoleData},true);p.setData({items:U.aRoleData},true);},function(E){var i=E&&E.message?E.message:E;if(E.response){i+=" - "+E.response.statusCode+" "+E.response.statusText;}k.error("Could not fetch data: "+s+": "+i,null,(v.getViewName()||"sap.ushell.components.tiles.utils"));});};U.createAliasModel=function(a,A){var v=a.getView(),b,s="/sap/opu/odata/UI2/INTEROP/GetLPDAppAlias",j=new J();j.setSizeLimit(999999);j.setProperty("/value","");j.setProperty("/enabled",true);A.bindAggregation("suggestionItems","/items",new g({text:"{alias}"}));A.setModel(j);b=u.getConfiguration(v.oViewData.chip,true,true);if(b&&b.navigation_provider_role&&b.navigation_provider_instance){if(b.navigation_provider_role!==""&&b.navigation_provider_instance!==""){s=s+"?role='"+b.navigation_provider_role+"'&instance='"+b.navigation_provider_instance+"'";}}O.read({requestUri:s,headers:{"Accept":"application/json"}},function(D){var p,R,w,i,x;U.aAliasData=[];for(i=0;i<D.results.length;i=i+1){p=D.results[i].lpdApplicationAlias;R=D.results[i].lpdRole;w=D.results[i].lpdInstance;U.aAliasData.push({role:R,instance:w,alias:p});}x=j.getData();if(x){x.items=U.aAliasData;}else{x={items:U.aAliasData};}j.setData(x,false);},function(E){var i=E&&E.message?E.message:E;if(E.response){i+=" - "+E.response.statusCode+" "+E.response.statusText;}k.error("Could not fetch data: "+s+": "+i,null,(v.getViewName()||"sap.ushell.components.tiles.utils"));});};U.updateAliasModel=function(v,a){var s,b,R,j=a.getModel();b=v.byId("navigation_provider_instanceInput").getValue();R=v.byId("navigation_provider_roleInput").getValue();s="/sap/opu/odata/UI2/INTEROP/GetLPDAppAlias?role='"+R+"'&instance='"+b+"'";O.read({requestUri:s,headers:{"Accept":"application/json"}},function(D){var A,R,b,i,p;U.aAliasData=[];for(i=0;i<D.results.length;i=i+1){A=D.results[i].lpdApplicationAlias;R=D.results[i].lpdRole;b=D.results[i].lpdInstance;U.aAliasData.push({role:R,instance:b,alias:A});}p=j.getData();if(p){p.items=U.aAliasData;}else{p={items:U.aAliasData};}j.setData(p,false);},function(E){var i=E&&E.message?E.message:E;if(E.response){i+=" - "+E.response.statusCode+" "+E.response.statusText;}k.error("Could not fetch data: "+s+": "+i,null,(v.getViewName()||"sap.ushell.components.tiles.utils"));});};U.createActionModel=function(a,A){var i=new J();var v=a.getView(),b,s;i.setData({"items":[{"text":"display"},{"text":"approve"},{"text":"displayFactSheet"},{"text":"manage"},{"text":"create"},{"text":"monitor"},{"text":"track"},{"text":"change"},{"text":"register"},{"text":"release"},{"text":"analyzeKPIDetails"},{"text":"lookup"},{"text":"manageLineItems"}]});U.aActionData=i.getData();b=u.getConfiguration(v.oViewData.chip,true,true);s=b.navigation_semantic_action||b.semantic_action;if(s){if(!i.getData().items.some(function(j){return j.text===s;})){i.getData().items.push({"text":s});}}A.bindAggregation("suggestionItems","items>/items",new g({text:"{items>text}"}));A.setModel(i,"items");A.getBinding("suggestionItems").sort(new h("text",false));};U.createNavigationProviderModel=function(a,b){var i=new J();var R=U.getResourceBundleModel().getResourceBundle();var j=[{"key":"SAPUI5","text":R.getText("configuration.target_application.sapui5")},{"key":"LPD","text":R.getText("configuration.target_application.lpd_cust")},{"key":"TR","text":R.getText("configuration.target_application.transaction")},{"key":"WDA","text":R.getText("configuration.target_application.web_dynpro")},{"key":"URL","text":R.getText("configuration.target_application.url")}];var N=U.getConfiguration(a.getView()).navigation_provider;if(N==="WCF"){j.push({"key":"WCF","text":R.getText("configuration.target_application.wcf")});}else if(N==="URLT"){j.push({"key":"URLT","text":R.getText("configuration.target_application.urlt")});}i.setData({"items":j});b.bindItems("items>/items",new g({key:"{items>key}",text:"{items>text}"}));b.setModel(i,"items");b.getBinding("items").sort(new h("text",false));};U.displayApplicationTypeFields=function(a,b){switch(a){case"LPD":U.displayLpdCustApplicationTypeFields(b);break;case"SAPUI5":U.displaySapui5ApplicationTypeFields(b);break;case"TR":U.displayTransactionApplicationTypeFields(b);break;case"WDA":U.displayWebDynproApplicationTypeFields(b);break;case"URL":U.displayURLApplicationTypeFields(b);break;case"WCF":U.displayWCFApplicationTypeFields(b);break;case"URLT":U.displayURLTApplicationTypeFields(b);break;}};U.displayWCFApplicationTypeFields=function(a){a.byId("navigation_provider_role").setVisible(false);a.byId("navigation_provider_roleInput").setVisible(false);a.byId("navigation_provider_instance").setVisible(false);a.byId("navigation_provider_instanceInput").setVisible(false);a.byId("target_application_alias").setVisible(false);a.byId("target_application_aliasInput").setVisible(false);a.byId("target_application_id").setVisible(false);a.byId("target_application_idInput").setVisible(false);a.byId("application_description").setVisible(true);a.byId("target_application_descriptionInput").setVisible(true);a.byId("application_url").setVisible(false);a.byId("target_application_urlInput").setVisible(false);a.byId("application_component").setVisible(false);a.byId("target_application_componentInput").setVisible(false);a.byId("target_transaction").setVisible(false);a.byId("target_transactionInput").setVisible(false);a.byId("target_wcf_application_id").setVisible(true);a.byId("target_wcf_application_idInput").setVisible(true);a.byId("target_web_dynpro_application").setVisible(false);a.byId("target_web_dynpro_applicationInput").setVisible(false);a.byId("target_web_dynpro_configuration").setVisible(false);a.byId("target_web_dynpro_configurationInput").setVisible(false);a.byId("target_system_alias").setVisible(true);a.byId("target_system_aliasInput").setVisible(true);a.byId("urlt_application_component").setVisible(false);a.byId("urlt_application_componentInput").setVisible(false);a.byId("target_urlt_system_alias").setVisible(false);a.byId("target_urlt_system_aliasInput").setVisible(false);a.byId("application_type_deprecated").setVisible(false);};U.displaySapui5ApplicationTypeFields=function(a){a.byId("navigation_provider_role").setVisible(false);a.byId("navigation_provider_roleInput").setVisible(false);a.byId("navigation_provider_instance").setVisible(false);a.byId("navigation_provider_instanceInput").setVisible(false);a.byId("target_application_alias").setVisible(false);a.byId("target_application_aliasInput").setVisible(false);a.byId("target_application_id").setVisible(false);a.byId("target_application_idInput").setVisible(false);a.byId("application_description").setVisible(true);a.byId("target_application_descriptionInput").setVisible(true);a.byId("application_url").setVisible(true);a.byId("target_application_urlInput").setVisible(true);a.byId("application_component").setVisible(true);a.byId("target_application_componentInput").setVisible(true);a.byId("target_transaction").setVisible(false);a.byId("target_transactionInput").setVisible(false);a.byId("target_wcf_application_id").setVisible(false);a.byId("target_wcf_application_idInput").setVisible(false);a.byId("target_web_dynpro_application").setVisible(false);a.byId("target_web_dynpro_applicationInput").setVisible(false);a.byId("target_web_dynpro_configuration").setVisible(false);a.byId("target_web_dynpro_configurationInput").setVisible(false);a.byId("target_system_alias").setVisible(false);a.byId("target_system_aliasInput").setVisible(false);a.byId("urlt_application_component").setVisible(false);a.byId("urlt_application_componentInput").setVisible(false);a.byId("target_urlt_system_alias").setVisible(false);a.byId("target_urlt_system_aliasInput").setVisible(false);a.byId("application_type_deprecated").setVisible(false);};U.displayLpdCustApplicationTypeFields=function(a){a.byId("application_description").setVisible(false);a.byId("target_application_descriptionInput").setVisible(false);a.byId("application_url").setVisible(false);a.byId("target_application_urlInput").setVisible(false);a.byId("application_component").setVisible(false);a.byId("target_application_componentInput").setVisible(false);a.byId("navigation_provider_role").setVisible(true);a.byId("navigation_provider_roleInput").setVisible(true);a.byId("navigation_provider_instance").setVisible(true);a.byId("navigation_provider_instanceInput").setVisible(true);a.byId("target_application_alias").setVisible(true);a.byId("target_application_aliasInput").setVisible(true);a.byId("target_application_id").setVisible(true);a.byId("target_application_idInput").setVisible(true);a.byId("target_transaction").setVisible(false);a.byId("target_transactionInput").setVisible(false);a.byId("target_wcf_application_id").setVisible(false);a.byId("target_wcf_application_idInput").setVisible(false);a.byId("target_web_dynpro_application").setVisible(false);a.byId("target_web_dynpro_applicationInput").setVisible(false);a.byId("target_web_dynpro_configuration").setVisible(false);a.byId("target_web_dynpro_configurationInput").setVisible(false);a.byId("target_system_alias").setVisible(false);a.byId("target_system_aliasInput").setVisible(false);a.byId("urlt_application_component").setVisible(false);a.byId("urlt_application_componentInput").setVisible(false);a.byId("target_urlt_system_alias").setVisible(false);a.byId("target_urlt_system_aliasInput").setVisible(false);a.byId("application_type_deprecated").setVisible(true);};U.displayTransactionApplicationTypeFields=function(a){a.byId("application_description").setVisible(true);a.byId("target_application_descriptionInput").setVisible(true);a.byId("application_url").setVisible(false);a.byId("target_application_urlInput").setVisible(false);a.byId("application_component").setVisible(false);a.byId("target_application_componentInput").setVisible(false);a.byId("navigation_provider_role").setVisible(false);a.byId("navigation_provider_roleInput").setVisible(false);a.byId("navigation_provider_instance").setVisible(false);a.byId("navigation_provider_instanceInput").setVisible(false);a.byId("target_application_alias").setVisible(false);a.byId("target_application_aliasInput").setVisible(false);a.byId("target_application_id").setVisible(false);a.byId("target_application_idInput").setVisible(false);a.byId("target_transaction").setVisible(true);a.byId("target_transactionInput").setVisible(true);a.byId("target_wcf_application_id").setVisible(false);a.byId("target_wcf_application_idInput").setVisible(false);a.byId("target_web_dynpro_application").setVisible(false);a.byId("target_web_dynpro_applicationInput").setVisible(false);a.byId("target_web_dynpro_configuration").setVisible(false);a.byId("target_web_dynpro_configurationInput").setVisible(false);a.byId("target_system_alias").setVisible(true);a.byId("target_system_aliasInput").setVisible(true);a.byId("urlt_application_component").setVisible(false);a.byId("urlt_application_componentInput").setVisible(false);a.byId("target_urlt_system_alias").setVisible(false);a.byId("target_urlt_system_aliasInput").setVisible(false);a.byId("application_type_deprecated").setVisible(false);};U.displayWebDynproApplicationTypeFields=function(a){a.byId("application_description").setVisible(true);a.byId("target_application_descriptionInput").setVisible(true);a.byId("application_url").setVisible(false);a.byId("target_application_urlInput").setVisible(false);a.byId("application_component").setVisible(false);a.byId("target_application_componentInput").setVisible(false);a.byId("navigation_provider_role").setVisible(false);a.byId("navigation_provider_roleInput").setVisible(false);a.byId("navigation_provider_instance").setVisible(false);a.byId("navigation_provider_instanceInput").setVisible(false);a.byId("target_application_alias").setVisible(false);a.byId("target_application_aliasInput").setVisible(false);a.byId("target_application_id").setVisible(false);a.byId("target_application_idInput").setVisible(false);a.byId("target_transaction").setVisible(false);a.byId("target_transactionInput").setVisible(false);a.byId("target_wcf_application_id").setVisible(false);a.byId("target_wcf_application_idInput").setVisible(false);a.byId("target_web_dynpro_application").setVisible(true);a.byId("target_web_dynpro_applicationInput").setVisible(true);a.byId("target_web_dynpro_configuration").setVisible(true);a.byId("target_web_dynpro_configurationInput").setVisible(true);a.byId("target_system_alias").setVisible(true);a.byId("target_system_aliasInput").setVisible(true);a.byId("urlt_application_component").setVisible(false);a.byId("urlt_application_componentInput").setVisible(false);a.byId("target_urlt_system_alias").setVisible(false);a.byId("target_urlt_system_aliasInput").setVisible(false);a.byId("application_type_deprecated").setVisible(false);};U.displayURLApplicationTypeFields=function(a){a.byId("navigation_provider_role").setVisible(false);a.byId("navigation_provider_roleInput").setVisible(false);a.byId("navigation_provider_instance").setVisible(false);a.byId("navigation_provider_instanceInput").setVisible(false);a.byId("target_application_alias").setVisible(false);a.byId("target_application_aliasInput").setVisible(false);a.byId("target_application_id").setVisible(false);a.byId("target_application_idInput").setVisible(false);a.byId("application_description").setVisible(true);a.byId("target_application_descriptionInput").setVisible(true);a.byId("application_url").setVisible(true);a.byId("target_application_urlInput").setVisible(true);a.byId("application_component").setVisible(false);a.byId("target_application_componentInput").setVisible(false);a.byId("target_transaction").setVisible(false);a.byId("target_transactionInput").setVisible(false);a.byId("target_wcf_application_id").setVisible(false);a.byId("target_wcf_application_idInput").setVisible(false);a.byId("target_web_dynpro_application").setVisible(false);a.byId("target_web_dynpro_applicationInput").setVisible(false);a.byId("target_web_dynpro_configuration").setVisible(false);a.byId("target_web_dynpro_configurationInput").setVisible(false);a.byId("target_system_alias").setVisible(true);a.byId("target_system_aliasInput").setVisible(true);a.byId("urlt_application_component").setVisible(false);a.byId("urlt_application_componentInput").setVisible(false);a.byId("target_urlt_system_alias").setVisible(false);a.byId("target_urlt_system_aliasInput").setVisible(false);a.byId("application_type_deprecated").setVisible(false);};U.displayURLTApplicationTypeFields=function(a){a.byId("navigation_provider_role").setVisible(false);a.byId("navigation_provider_roleInput").setVisible(false);a.byId("navigation_provider_instance").setVisible(false);a.byId("navigation_provider_instanceInput").setVisible(false);a.byId("target_application_alias").setVisible(false);a.byId("target_application_aliasInput").setVisible(false);a.byId("target_application_id").setVisible(false);a.byId("target_application_idInput").setVisible(false);a.byId("application_description").setVisible(true);a.byId("target_application_descriptionInput").setVisible(true);a.byId("application_url").setVisible(false);a.byId("target_application_urlInput").setVisible(false);a.byId("application_component").setVisible(false);a.byId("target_application_componentInput").setVisible(false);a.byId("target_transaction").setVisible(false);a.byId("target_transactionInput").setVisible(false);a.byId("target_wcf_application_id").setVisible(false);a.byId("target_wcf_application_idInput").setVisible(false);a.byId("target_web_dynpro_application").setVisible(false);a.byId("target_web_dynpro_applicationInput").setVisible(false);a.byId("target_web_dynpro_configuration").setVisible(false);a.byId("target_web_dynpro_configurationInput").setVisible(false);a.byId("target_system_alias").setVisible(false);a.byId("target_system_aliasInput").setVisible(false);a.byId("urlt_application_component").setVisible(true);a.byId("urlt_application_componentInput").setVisible(true);a.byId("target_urlt_system_alias").setVisible(true);a.byId("target_urlt_system_aliasInput").setVisible(true);a.byId("application_type_deprecated").setVisible(false);};return U;},true);
sap.ui.predefine('sap/ushell/components/tiles/utilsRT',["sap/ushell/components/tiles/utils","sap/ui/core/format/NumberFormat","sap/ui/core/library","sap/m/library","sap/base/Log","sap/ui/model/json/JSONModel"],function(u,N,c,m,L,J){"use strict";var V=c.mvc.ViewType;var B=m.ButtonType;var a={};a.getConfiguration=function(t,A,E){var r;var C=t.configuration.getParameterValueAsString("tileConfiguration");try{var o=JSON.parse(C||"{}");}catch(e){L.error("Error while trying to parse tile configuration",e,"sap.ushell.components.tiles.utilsRT");return{};}var U=sap.ui.require("sap/ushell/components/tiles/utils");o.editable=true;if(t.configurationUi&&t.configurationUi.isReadOnly){if(t.configurationUi.isReadOnly()){o.editable=false;}}var T=U.getTranslatedTitle(t);var s=U.getTranslatedSubtitle(t,o);var i=U.getTranslatedProperty(t,o,"display_info_text");var k=U.getTranslatedProperty(t,o,"display_search_keywords");if(A){r=U.getResourceBundleModel().getResourceBundle();if(E&&t.bag){var b=t.bag.getOriginalLanguage();var l=sap.ui.getCore().getConfiguration().getLocale().getSAPLogonLanguage();var d=sap.ui.getCore().getConfiguration().getLanguage();o.isLocaleSuitable=b===""||b.toLowerCase()===l.toLowerCase()||b.toLowerCase()===d.toLowerCase();o.orgLocale=b;o.userLocale=l;}}o.display_icon_url=o.display_icon_url||"";if(i!==undefined){o.display_info_text=i;}else if(o.display_info_text===undefined){if(A&&!E){o.display_info_text="["+r.getText("configuration.display_info_text")+"]";}else{o.display_info_text="";}}o.navigation_semantic_object=o.navigation_semantic_object||"";o.navigation_semantic_action=o.navigation_semantic_action||"";o.navigation_semantic_parameters=o.navigation_semantic_parameters||"";o.display_number_unit=o.display_number_unit||"";o.display_number_factor=o.display_number_factor||"";o.service_refresh_interval=o.service_refresh_interval?parseInt(o.service_refresh_interval,10):0;o.service_url=o.service_url||"";o.navigation_target_url=o.navigation_target_url||"";if(A&&U.isInitial(T)){o.display_title_text=E?"":"["+r.getText("configuration.display_title_text")+"]";o.display_subtitle_text=E?"":"["+r.getText("configuration.display_subtitle_text")+"]";}else{o.display_title_text=T||o.display_title_text||"";if(s!==undefined){o.display_subtitle_text=s;}else if(o.display_subtitle_text===undefined){o.display_subtitle_text="";}}o.navigation_use_semantic_object=(o.navigation_use_semantic_object!==false);o.display_search_keywords=k||o.display_search_keywords||"";if(A){o.display_number_value=o.display_number_value||1234;}o.form_factors=o.form_factors?o.form_factors:U.getDefaultFormFactors();o.desktopChecked=o.form_factors.manual.desktop;o.tabletChecked=o.form_factors.manual.tablet;o.phoneChecked=o.form_factors.manual.phone;o.manualFormFactor=!(o.form_factors.appDefault)&&o.editable;o.appFormFactor=o.form_factors.appDefault;o.formFactorConfigDefault=!!o.form_factors.defaultParam;if(o.signature){o.rows=U.getSignatureTableData(o.signature,E&&o.editable);}else{o.rows=(o.mapping_signature&&o.mapping_signature!=="*=*")?U.getMappingSignatureTableData(o.mapping_signature,E&&o.editable):[U.getEmptyRowObj(o.editable)];}if(o.signature){o.isUnknownAllowed=(o.signature.additional_parameters==="allowed"||o.signature.additionalParameters==="allowed");}else{o.isUnknownAllowed=(o.mapping_signature!==undefined)?U.getAllowUnknownParametersValue(o.mapping_signature):true;}if(A){o.tile_actions_rows=U.getTileNavigationActionsRows(t,o.editable);}else if(!o.actions){o.actions=U.getTileNavigationActions(t);}if(A){var D=t.bag.getBag("deprecationProperties"),f=D.getProperty("deprecation"),g=null;if(f){g=r.getText(f==="D"?"configuration.app_deprecated":"configuration.app_archived",[D.getProperty("successor")]);}o.deprecation_text=g;}return o;};a.getDataToDisplay=function(C,d){var b=0,i,n,o,s,D={display_icon_url:d.icon||C.display_icon_url||"",display_title_text:d.title||C.display_title_text||"",display_number_value:!isNaN(d.number)?d.number:"...",display_number_unit:d.numberUnit||C.display_number_unit||"",display_info_text:d.info||C.display_info_text||"",display_info_state:d.infoState||"Neutral",display_subtitle_text:d.subtitle||C.display_subtitle_text||"",display_state_arrow:d.stateArrow||"None",display_number_state:d.numberState||"None",display_number_digits:d.numberDigits>=0?d.numberDigits:4,display_number_factor:d.numberFactor||"",display_search_keyword:d.keywords||C.display_search_keyword||"",targetParams:[]};if(d.infoStatus){D.display_info_state=d.infoStatus;}if(d.targetParams){D.targetParams.push(d.targetParams);}if(d.results){for(i=0,n=d.results.length;i<n;i=i+1){o=d.results[i].number||0;if(typeof o==="string"){o=parseFloat(o,10);}b=b+o;s=d.results[i].targetParams;if(s){D.targetParams.push(s);}}D.display_number_value=b;}if(!isNaN(d.number)){if(typeof d.number==="string"){d.number=d.number.trim();}if(d.number===""){D.display_number_value="...";}else{var S=this._shouldProcessDigits(d.number,d.numberDigits),e=D.display_icon_url?4:5;if(d.number&&d.number.length>=e||S){var f=this._normalizeNumber(d.number,e,d.numberFactor,d.numberDigits);D.display_number_factor=f.numberFactor;D.display_number_value=f.displayNumber;}else{var g=N.getFloatInstance({maxFractionDigits:e});D.display_number_value=g.format(d.number);}}}if(D&&D.display_number_state){switch(D.display_number_state){case"Positive":D.display_number_state="Good";break;case"Negative":D.display_number_state="Error";break;}}return D;};a.getTileSettingsAction=function(M,s,t){var U=sap.ui.require("sap/ushell/components/tiles/utils");var r=U.getResourceBundleModel().getResourceBundle();return{text:(!t||t==="tile")?r.getText("tileSettingsBtn"):r.getText("linkSettingsBtn"),press:function(){sap.ui.require(["sap/ui/layout/form/SimpleForm","sap/ui/layout/form/SimpleFormLayout","sap/m/Button","sap/m/Dialog"],function(S,b,d,D){var A={showGroupSelection:false,title:M.getProperty("/config/display_title_text"),subtitle:M.getProperty("/config/display_subtitle_text")};if(!t||t==="tile"){A.info=M.getProperty("/config/display_info_text");A.icon=M.getProperty("/config/display_icon_url");A.keywords=M.getProperty("/config/display_search_keywords");}else if(t==="link"){A.showInfo=false;A.showIcon=false;A.showPreview=false;}var o=sap.ui.view({type:V.JS,viewName:"sap.ushell.ui.footerbar.SaveAsTile"});var e=new J(A);o.setModel(e);var f=new S({id:"tileSettings",layout:b.GridLayout,content:[o]}).addStyleClass("sapUshellAddBookmarkForm");var g=new d("bookmarkOkBtn",{text:r.getText("okBtn"),type:B.Emphasized,press:function(){s(o);j.close();},enabled:true}),h=new d("bookmarkCancelBtn",{text:r.getText("cancelBtn"),press:function(){j.close();}});var i=function(k){g.setEnabled(!!k.trim());};o.getTitleInput().attachLiveChange(function(){i(this.getValue());});var j=new D({id:"settingsDialog",title:(!t||t==="tile")?r.getText("tileSettingsDialogTitle"):r.getText("linkSettingsDialogTitle"),contentWidth:"400px",content:f,beginButton:g,endButton:h,horizontalScrolling:false,afterClose:function(){j.destroy();}}).addStyleClass("sapContrastPlus");j.open();});}};};a.getSemanticNavigationUrl=function(C){var U="#"+jQuery.trim(C.navigation_semantic_object);U+="-"+jQuery.trim(C.navigation_semantic_action);if(C.navigation_semantic_parameters&&jQuery.trim(C.navigation_semantic_parameters).length>0){U+="?"+jQuery.trim(C.navigation_semantic_parameters);}return U;};a.addParamsToUrl=function(U,d){var p="",b=U.indexOf("?")!==-1,t=d.targetParams,i;if(t&&t.length>0){for(i=0;i<t.length;i=i+1){p+=t[i];if(i<t.length-1){p+="&";}}}if(p.length>0){if(!b){U+="?";}else{U+="&";}U+=p;}return U;};a._normalizeNumber=function(n,b,d,i){var e;if(isNaN(n)){e=n;}else{var o=N.getFloatInstance({maxFractionDigits:i});if(!d){var f=Math.abs(n);if(f>=1000000000){d="B";n/=1000000000;}else if(f>=1000000){d="M";n/=1000000;}else if(f>=1000){d="K";n/=1000;}}e=o.format(n);}var g=e;var h=g[b-1];b-=(h==="."||h===",")?1:0;g=g.substring(0,b);return{displayNumber:g,numberFactor:d};};a._shouldProcessDigits=function(d,D){var n;d=typeof(d)!=="string"?d.toString():d;if(d.indexOf(".")!==-1){n=d.split(".")[1].length;if(n>D){return true;}}return false;};return a;},true);
sap.ui.predefine('sap/ushell/iconfonts',["sap/ui/core/IconPool"],function(I){"use strict";var a={};a.registerFiori2IconFont=function(){I.registerFont({fontFamily:"BusinessSuiteInAppSymbols",fontURI:sap.ui.require.toUrl("sap/ushell/themes/base/fonts"),lazy:true});I.registerFont({fontFamily:"SAP-icons-TNT",fontURI:sap.ui.require.toUrl("sap/tnt/themes/base/fonts"),lazy:true});I.registerFont({fontFamily:"SAP-icons-TNT",collectionName:"TNTIcons",fontURI:sap.ui.require.toUrl("sap/tnt/themes/base/fonts"),lazy:true});var f={fontFamily:"SAP-Icons",collectionName:"Fiori2",icons:[["F0017","e05e"],["F0020","e0c3"],["F0021","e10d"],["F0392","e04f"],["F0394","e044"],["F0395","e132"],["F0396","e064"],["F0397","e0a4"],["F0398","e0a4"],["F0399","e044"],["F0401","e08d"],["F0402","e13e"],["F0403","e13e"],["F0404","e033"],["F0405","e0b3"],["F0406","e043"],["F0407","e043"],["F0408","e043"],["F0409","e075"],["F0410","e007"],["F0411","e075"]]},A={fontFamily:"Fiori2",collectionName:"Fiori2",icons:[["F0002","E236"],["F0003","E202"],["F0004","E203"],["F0005","E204"],["F0006","E205"],["F0009","E206"],["F0010","E207"],["F0012","E208"],["F0014","E209"],["F0018","e0c3"],["F0019","e0c3"],["F0023","E20A"],["F0024","E20B"],["F0025","E20C"],["F0026","E20D"],["F0072","E23A"],["F0100","E23B"],["F0101","E23C"],["F0102","E23D"],["F0106","E20F"],["F0144","E210"],["F0190","E23E"],["F0194","E23F"],["F0210","E242"],["F0211","E243"],["F0212","E244"],["F0217","E211"],["F0220","E213"],["F0243","E215"],["F0244","E216"],["F0245","E217"],["F0248","E21A"],["F0249","E21B"],["F0252","E21E"],["F0257","E21F"],["F0281","E220"],["F0282","E221"],["F0283","E222"],["F0284","E223"],["F0292","E224"],["F0295","E225"],["F0296","E226"],["F0316","E227"],["F0317","E228"],["F0321","E229"],["F0339","E22A"],["F0340","E22B"],["F0341","E22C"],["F0342","E22D"],["F0365","E212"],["F0366","e129"],["F0367","E230"],["F0368","E231"],["F0369","E235"],["F0370","E22E"],["F0372","E232"],["F0380","E233"],["F0381","E234"],["F0382","E246"],["F0390","E20E"],["F0412","E214"],["F0429","E2A6"],["F0013","E237"],["F0016","E238"],["F0028","E239"],["F0029","E283"],["F0030","E284"],["F0031","E285"],["F0032","E286"],["F0033","E287"],["F0034","E288"],["F0036","E289"],["F0038","E28A"],["F0039","E28B"],["F0041","E28C"],["F0044","E28D"],["F0293","E28E"],["F0294","E28F"],["F0297","E290"],["F0298","E291"],["F0299","E292"],["F0300","E293"],["F0301","E294"],["F0302","E295"],["F0303","E296"],["F0304","E297"],["F0305","E298"],["F0306","E299"],["F0323","E29A"],["F0324","E29B"],["F0326","E29C"],["F0327","E29D"],["F0328","E29E"],["F0329","E29F"],["F0331","E2A1"],["F0332","E2A2"],["F0343","E2A3"],["F0344","E2A4"],["F0345","E2A5"],["F0388","E2A7"],["F0391","E2A0"],["F0260","E2B4"],["FD10N","E2B5"],["FK10N","E2B6"],["FS10N","E2B7"],["FBL5N","E2B8"],["FBL1N","E2B9"],["FFS01","E2BA"],["FBL3N","E2BB"],["FCOA1","E2BC"]]},F={fontFamily:"Fiori2",collectionName:"Fiori3",icons:[["F0246","E218"],["F0247","E219"],["F0250","E21C"],["F0251","E21D"],["F0263","E2A8"],["F0508","E2A9"],["F0509","E2AA"],["F0510","E2AB"],["F0533","E2AC"],["F0534","E2AD"],["F0535","E2AE"],["F0536","E2AF"],["F0537","E2B0"],["F0538","E2B1"],["Lumira001","E2B2"]]},o={fontFamily:"Fiori2",collectionName:"Fiori4",icons:[["F0194","E2BD"],["F0260","E2B4"],["F0433","E2BE"],["F0499","E2BF"],["F0500","E2C0"],["F0501","E2C1"],["F0502","E2C2"],["F0503","E2C3"],["F0504","E2C4"],["F0507","E2C5"],["F0530","E2C6"],["F0531","E2C7"],["F0539","E2C8"],["F0544","E2C9"],["F0545","E2CA"],["F0547","E2CB"],["F0576","E2CC"],["F0578","E2CD"],["F0579","E2CE"],["F0580","E2CF"],["F0581","E2D0"],["F0582","E2D1"],["F0583","E2D2"],["F0584","E2D3"],["F0586","E2D4"],["F0587","E2D5"],["F0588","E2D6"],["F0589","E2D7"],["F0590","E2D8"],["F0591","E2D9"],["F0593","E2DA"],["F0594","E2DB"],["F0597","E2DC"],["F0603","E2DD"],["F0604","E2DE"],["F0605","E2DF"],["F0606","E2E0"],["F0607","E2E1"],["F0608","E2E2"],["F0609","E2E3"],["F0615","E2E4"],["F0616","E2E5"],["F0618","E2E6"],["F0617","E2E7"],["F0622","E2E8"],["F0623","E2E9"],["F0624","E2EA"],["F0625","E2EB"],["F0626","E2EC"],["F0627","E2ED"],["F0629","E2EE"],["F0630","E2EF"],["F0632","E2F0"],["F0633","E2F1"],["F0634","E2F2"],["F0635","E2F3"],["F0636","E2F4"],["F0638","E2F5"],["F0639","E2F6"],["F0643","E2F7"],["F0644","E2F8"],["F0645","E2F9"],["F0646","E2FA"],["F0648","E2FB"],["F0649","E2FC"],["F0650","E2FD"],["F0654","E2FE"],["F0655","E2FF"],["F0659","E300"],["F0660","E301"],["F0661","E302"],["F0665","E303"],["F0666","E304"],["F0667","E305"],["F0671","E306"],["F0672","E307"],["F0673","E308"],["F0675","E309"],["F0676","E30A"],["F0677","E30B"],["F0678","E30C"],["F0679","E30D"],["F0680","E30E"],["F0682","E30F"],["F0683","E310"],["F0684","E240"],["F0685","E312"],["F0686","E313"],["F0687","E314"],["F0690","E315"],["F0691","E316"],["F0692","E317"],["F0693","E318"],["F0694","E319"],["F0695","E31A"],["F0700","E31B"],["F0598","E31C"]]},b={fontFamily:"Fiori2",collectionName:"Fiori5",icons:[["F0263","E321"],["F0266","E322"],["F2001","E31E"],["F0839","E320"],["F0270","E323"],["F0273","E324"],["F0439","E325"],["F0443","E326"],["F0549","E327"],["F0550","E328"],["F0551","E329"],["F0577","E32A"],["F0585","E32B"],["F0637","E32C"],["F0668","E32D"],["F0669","E32E"],["F0670","E330"],["F0688","E331"],["F0689","E332"],["F0701","E333"],["F0702","E334"],["F0703","E335"],["F0706","E336"],["F0707","E337"],["F0708","E338"],["F0711","E339"],["F0712","E33A"],["F0731","E33B"],["F0732","E33C"],["F0733","E33D"],["F0735","E33E"],["F0736","E340"],["F0737","E341"],["F0742","E342"],["F0743","E343"],["F0744","E344"],["F0745","E345"],["F0746","E346"],["F0747","E347"],["F0748","E348"],["F0749","E349"],["F0750","E34A"],["F0751","E34B"],["F0755","E34C"],["F0756","E34D"],["F0757","E34E"],["F0758","E350"],["F0759","E351"],["F0760","E352"],["F0761","E353"],["F0763","E354"],["F0764","E355"],["F0765","E356"],["F0768","E357"],["F0770","E358"],["F0771","E359"],["F0772","E35A"],["F0774","E35B"],["F0776","E35C"],["F0777","E35D"],["F0778","E35E"],["F0788","E360"],["F0789","E361"],["F0790","E362"],["F0791","E363"],["F0792","E364"],["F0793","E365"],["F0794","E366"],["F0806","E367"],["F0807","E368"],["F0808","E369"],["F0809","E36A"],["F0810","E36B"],["F0811","E36C"],["F0812","E36D"],["F0813","E36E"],["F0814","E370"],["F0815","E371"],["F0816","E372"],["F0817","E373"],["F0818","E374"],["F0819","E375"],["F0820","E376"],["F0821","E377"],["F0822","E378"],["F0823","E379"],["F0824","E37A"],["F0825","E37B"],["F0826","E37C"],["F0827","E37D"],["F0828","E37E"],["F0829","E380"],["F0830","E381"],["F0831","E382"],["F0717","E384"],["F0718","E383"],["F0241","E385"],["F0246","E386"],["F0250","E387"],["F0248","E388"],["F0252","E389"],["F0600","E38A"],["F0674","E38B"],["F0247","E38E"],["F0251","E390"]]},c={fontFamily:"Fiori2",collectionName:"Fiori6",icons:[["F0795","E397"],["F0866","E3A0"],["F0865","E3A1"],["F0867","E3A2"],["F0868","E3A3"],["F0869","E3A4"],["F0870","E3A5"],["F0138","E3A6"],["F0752","E3A7"],["F0753","E3A8"],["F0773","E3A9"],["F0891","E3AA"],["F0892","E3AB"],["F1023","E3AC"],["F0767","E3AD"],["F0849","E3AE"],["F0670-1","E393"],["F0670-2","E394"],["F0670-3","E395"],["F0670-4","E396"]]},d={fontFamily:"Fiori2",collectionName:"Fiori7",icons:[["F1079","E3B0"],["F0738","E3B1"],["F1301","E3B2"],["F1302","E3B3"],["F1303","E3B4"],["F1338","E3B5"],["F1263","E3B6"],["F1373","E3B7"],["F0863","E3B8"],["F1068","E3BA"],["F0955","E3B9"],["F1242","E3BB"],["F1405","E3BC"],["F1406","E3BD"],["F1407","E3BE"],["F1408","E3BF"],["F1409","E3C0"],["F1410","E3C1"],["F1411","E3C2"],["F1412","E3C3"],["F1413","E3C4"],["F1414","E3C5"],["F1415","E3C6"],["F0797","E3C8"],["F0798","E3C9"],["F0800","E3CA"],["F0801","E3CB"],["F0804","E3CC"],["F0850","E3CD"],["F0890","E3CE"],["F1075","E3CF"],["F1394","E3D0"],["F1061","E3D1"],["F1062","E3D2"],["F1255","E3D3"],["F1077","E3D4"],["F0843","E3D5"],["F1076","E3D6"],["F0859","E3D7"],["F1060","E3D8"],["F1053","E3D9"],["F0900","E3DA"],["F0840","E3DB"],["F0842-1","E3A6"],["F0842-2","E22C"],["F1476","E3C7"]]},e={fontFamily:"Fiori2",collectionName:"Fiori8",icons:[["F1317","E3DC"],["F1318","E3DD"],["F1319","E3DE"],["F1369","E3DF"],["F1475","E3E0"],["F1345","E3E1"],["F1248","E3E2"],["F1067","E3E3"],["F1332","E3E4"],["F1333","E3E5"],["F1334","E3E6"],["F1335","E3E7"],["F1520","E3E8"],["F1457","E3E9"],["F1504","E3EA"],["F1505","E3EB"]]},g={fontFamily:"Fiori2",collectionName:"Fiori9",icons:[["F1094","E3EC"],["F1096","E3ED"],["F1353","E3EE"],["F1354","E3EF"],["F1428","E3F0"],["F1492","E3F1"],["F1515","E3F2"],["F1516","E3F3"],["F0997","E400"],["F1512","E401"],["F1562","E402"],["F1564","E403"],["F1599","E404"],["F1596","E405"],["F1254","E406"],["F1618","E407"],["F1561","E408"],["learning-compass","E409"],["partner-enablement","E40A"]]},s={fontFamily:"Fiori2",collectionName:"S4Hana",icons:[["S0001","E3F4"],["S0002","E3F5"],["S0003","E3F6"],["S0004","E3F7"],["S0005","E3F8"],["S0006","E3F9"],["S0007","E3FA"],["S0008","E3FB"],["S0009","E3FC"],["S0010","E3FD"],["S0011","E3FE"],["S0012","E3FF"]]},h={fontFamily:"FioriInAppIcons",collectionName:"FioriInAppIcons",icons:[["Hierarchal Tree","E700"],["Open","E701"],["Blocked","E702"],["Partially Blocked","E703"],["Open1","E704"],["Partially Adopted","E705"],["Due","E706"],["Overdue","E707"],["Sort","E708"],["Missing Parts","E709"],["Fire","E70A"],["Dangerous Chemicals","E70B"],["Share","E70C"],["Entertainment","E70D"],["Gift","E70E"],["QR Code","E70F"],["Wifi-Online","E710"],["Wifi-Offline","E711"],["Sunrise","E712"],["Sunset","E713"],["Afternoon","E714"],["Night","E715"],["Loading Date","E715"],["Cloudy","e717"],["Rain","e718"],["Storm","e719"],["Partly Sunny","e71A"],["Heavy Rain","e71B"],["Foggy","e71C"],["Snow","e71D"],["Risk Assessment","e71E"],["Database","e71f"],["Marine","e720"],["Blister","e721"],["Pills","e722"],["Main-Sequence","e723"],["Parallel Sequence","e724"],["Alternative Sequence","e725"],["3D","e726"],["Presentation","e727"],["Mute","e728"],["Windy","e729"],["Oil Tank","e72A"],["Location Assets","e72B"],["Transport Systems","e72C"],["Field","e72D"],["Field Group","e72E"],["Record","e730"],["Record Group","e731"]]},i={fontFamily:"Fiori2",collectionName:"FioriNonNative",icons:[["FN0001","E392"],["FN0002","E398"],["FN0003","E399"],["FN0004","E39A"],["FN0005","E39B"],["FN0006","E39C"],["FN0007","E39D"],["FN0008","E39E"],["FN0009","E39F"]]};this.registerFonts(f,F,A,h,o,b,i,c,d,e,g,s);};a.registerFonts=function(){var o,i,j,b;for(i=0;i<arguments.length;i=i+1){o=arguments[i];for(j=0;j<o.icons.length;j=j+1){b={};b.fontFamily=o.fontFamily;b.content=o.icons[j][1];b.overWrite=false;b.suppressMirroring=true;I.addIcon(o.icons[j][0],o.collectionName,b);}}};return a;},true);
sap.ui.predefine('sap/ushell/library',["sap/ui/core/Core"],function(){"use strict";sap.ui.getCore().initLibrary({name:"sap.ushell",version:"1.88.1",dependencies:["sap.f","sap.m","sap.ui.core","sap.ui.layout"],types:["sap.ushell.AllMyAppsState","sap.ushell.AppTitleState","sap.ushell.ContentNodeType","sap.ushell.components.container.ApplicationType","sap.ushell.DisplayFormat","sap.ushell.NavigationState","sap.ushell.ui.launchpad.ViewPortState","sap.ushell.ui.tile.State","sap.ushell.ui.tile.StateArrow","sap.ushell.VisualizationLoadState"],interfaces:[],controls:["sap.ushell.components.container.ApplicationContainer","sap.ushell.components.factsheet.controls.PictureTile","sap.ushell.components.factsheet.controls.PictureViewer","sap.ushell.components.factsheet.controls.PictureViewerItem","sap.ushell.components.shell.Settings.userDefaults.UserDefaultsForm","sap.ushell.components.tiles.sbtilecontent","sap.ushell.renderers.fiori2.search.controls.CustomSearchResultListItem","sap.ushell.renderers.fiori2.search.controls.CustomSearchResultListItemContent","sap.ushell.renderers.fiori2.search.controls.DivContainer","sap.ushell.renderers.fiori2.search.controls.SearchAdvancedCondition","sap.ushell.renderers.fiori2.search.controls.SearchButton","sap.ushell.renderers.fiori2.search.controls.SearchFacet","sap.ushell.renderers.fiori2.search.controls.SearchFacetBarChart","sap.ushell.renderers.fiori2.search.controls.SearchFacetDialog","sap.ushell.renderers.fiori2.search.controls.SearchFacetFilter","sap.ushell.renderers.fiori2.search.controls.SearchFacetItem","sap.ushell.renderers.fiori2.search.controls.SearchFacetPieChart","sap.ushell.renderers.fiori2.search.controls.SearchFacetTabBar","sap.ushell.renderers.fiori2.search.controls.SearchFieldGroup","sap.ushell.renderers.fiori2.search.controls.SearchFilterBar","sap.ushell.renderers.fiori2.search.controls.SearchInput","sap.ushell.renderers.fiori2.search.controls.SearchLabel","sap.ushell.renderers.fiori2.search.controls.SearchLayout","sap.ushell.renderers.fiori2.search.controls.SearchLink","sap.ushell.renderers.fiori2.search.controls.SearchMultiSelectionControl","sap.ushell.renderers.fiori2.search.controls.SearchNoResultScreen","sap.ushell.renderers.fiori2.search.controls.SearchObjectSuggestionImage","sap.ushell.renderers.fiori2.search.controls.SearchRelatedObjectsToolbar","sap.ushell.renderers.fiori2.search.controls.SearchResultGrid","sap.ushell.renderers.fiori2.search.controls.SearchResultList","sap.ushell.renderers.fiori2.search.controls.SearchResultListContainer","sap.ushell.renderers.fiori2.search.controls.SearchResultListItem","sap.ushell.renderers.fiori2.search.controls.SearchResultListItemDocument","sap.ushell.renderers.fiori2.search.controls.SearchResultListItemNote","sap.ushell.renderers.fiori2.search.controls.SearchResultMap","sap.ushell.renderers.fiori2.search.controls.SearchResultTable","sap.ushell.renderers.fiori2.search.controls.SearchSelect","sap.ushell.renderers.fiori2.search.controls.SearchText","sap.ushell.renderers.fiori2.search.controls.SearchTilesContainer","sap.ushell.renderers.fiori2.search.controls.twitter.SearchTweet","sap.ushell.renderers.fiori2.search.inputhelp.SearchInputHelp","sap.ushell.renderers.fiori2.search.inputhelp.SearchInputHelpDialog","sap.ushell.renderers.fiori2.search.inputhelp.SearchInputHelpPage","sap.ushell.renderers.fiori2.search.inputhelp.SearchInputHelpWizard","sap.ushell.ui.launchpad.VizInstance","sap.ushell.ui.launchpad.VizInstanceAbap","sap.ushell.ui.launchpad.VizInstanceCdm","sap.ushell.ui.launchpad.VizInstanceLaunchPage","sap.ushell.ui.launchpad.VizInstanceLink","sap.ushell.ui.AppContainer","sap.ushell.ui.ContentNodeSelector","sap.ushell.ui.bookmark.ContentNodeTreeItem","sap.ushell.ui.CustomGroupHeaderListItem","sap.ushell.ui.ShellHeader","sap.ushell.ui.appfinder.AppBox","sap.ushell.ui.appfinder.PinButton","sap.ushell.ui.footerbar.AboutButton","sap.ushell.ui.footerbar.AddBookmarkButton","sap.ushell.ui.footerbar.ContactSupportButton","sap.ushell.ui.footerbar.EndUserFeedback","sap.ushell.ui.footerbar.JamDiscussButton","sap.ushell.ui.footerbar.JamShareButton","sap.ushell.ui.footerbar.LogoutButton","sap.ushell.ui.footerbar.SendAsEmailButton","sap.ushell.ui.footerbar.SettingsButton","sap.ushell.ui.footerbar.UserPreferencesButton","sap.ushell.ui.launchpad.ActionItem","sap.ushell.ui.launchpad.AnchorItem","sap.ushell.ui.launchpad.AnchorNavigationBar","sap.ushell.ui.launchpad.CatalogEntryContainer","sap.ushell.ui.launchpad.CatalogsContainer","sap.ushell.ui.launchpad.DashboardGroupsContainer","sap.ushell.ui.launchpad.GridContainer","sap.ushell.ui.launchpad.GroupHeaderActions","sap.ushell.ui.launchpad.GroupListItem","sap.ushell.ui.launchpad.LinkTileWrapper","sap.ushell.ui.launchpad.LoadingDialog","sap.ushell.ui.launchpad.Page","sap.ushell.ui.launchpad.Panel","sap.ushell.ui.launchpad.PlusTile","sap.ushell.ui.launchpad.Section","sap.ushell.ui.launchpad.Tile","sap.ushell.ui.launchpad.TileContainer","sap.ushell.ui.launchpad.TileState","sap.ushell.ui.launchpad.section.CompactArea","sap.ushell.ui.shell.FloatingContainer","sap.ushell.ui.shell.NavigationMiniTile","sap.ushell.ui.shell.OverflowListItem","sap.ushell.ui.shell.RightFloatingContainer","sap.ushell.ui.shell.ShellAppTitle","sap.ushell.ui.shell.ShellFloatingAction","sap.ushell.ui.shell.ShellFloatingActions","sap.ushell.ui.shell.ShellHeadItem","sap.ushell.ui.shell.ShellLayout","sap.ushell.ui.shell.ShellNavigationMenu","sap.ushell.ui.shell.ToolArea","sap.ushell.ui.shell.ToolAreaItem","sap.ushell.ui.tile.DynamicTile","sap.ushell.ui.tile.ImageTile","sap.ushell.ui.tile.StaticTile","sap.ushell.ui.tile.TileBase"],elements:["sap.ushell.ui.launchpad.AccessibilityCustomData"],extensions:{"sap.ui.support":{diagnosticPlugins:["sap/ushell/support/plugins/flpConfig/FlpConfigurationPlugin"]}}});var u=sap.ushell;u.AllMyAppsState={FirstLevel:"FirstLevel",SecondLevel:"SecondLevel",Details:"Details",FirstLevelSpread:"FirstLevelSpread"};u.AppTitleState={ShellNavMenuOnly:"ShellNavMenuOnly",AllMyAppsOnly:"AllMyAppsOnly",ShellNavMenu:"ShellNavMenu",AllMyApps:"AllMyApps"};u.ContentNodeType={HomepageGroup:"HomepageGroup",Space:"Space",Page:"Page"};u.components.container.ApplicationType={NWBC:"NWBC",SAPUI5:"SAPUI5",TR:"TR",URL:"URL",WCF:"WCF",WDA:"WDA"};u.DisplayFormat={Standard:"standard",Compact:"compact",Flat:"flat",FlatWide:"flatWide",StandardWide:"standardWide"};u.NavigationState={InProgress:"InProgress",Finished:"Finished"};u.ui.launchpad.ViewPortState={Left:"Left",Center:"Center",Right:"Right",LeftCenter:"LeftCenter",CenterLeft:"CenterLeft",RightCenter:"RightCenter",CenterRight:"CenterRight"};u.ui.tile.State={Neutral:"Neutral",None:"None",Negative:"Negative",Error:"Error",Positive:"Positive",Success:"Success",Critical:"Critical",Warning:"Warning"};u.ui.tile.StateArrow={None:"None",Up:"Up",Down:"Down"};u.VisualizationLoadState={Loading:"Loading",Loaded:"Loaded",InsufficientRoles:"InsufficientRoles",OutOfRoleContext:"OutOfRoleContext",NoNavTarget:"NoNavTarget",Failed:"Failed",Disabled:"Disabled"};return u;});
sap.ui.predefine('sap/ushell/navigationMode',["sap/base/Log"],function(L){"use strict";var e={};var _=function(E){var i=true;if(E){if(typeof E!=="object"){i=false;}else{Object.keys(E).forEach(function(k){if(["GUI","WDA","WCF"].indexOf(k)===-1){i=false;}else if(typeof E[k]!=="boolean"){i=false;}});}}if(!i){L.error("Invalid parameter: 'enableInPlaceForClassicUIs' must be an object; allowed properties: GUI|WDA, type boolean","Actual parameter: "+JSON.stringify(E),"sap.ushell.services.navigationMode");}};e._isLegacyApplicationType=function(A){switch(A){case"WDA":case"TR":case"NWBC":case"WCF":return true;default:return false;}};var a=function(A){switch(A){case"TR":return"GUI";case"WDA":return"WDA";case"WCF":return"WCF";default:return undefined;}};var b=function(E,A){if(jQuery.isPlainObject(E)){return E[a(A)];}return false;};e.compute=function(n,E,s,A,o){var i,l;_(o);var N={};if(["inplace","explace"].indexOf(E)>=0){N["sap-ushell-next-navmode"]=E;}if(["inplace","explace","frameless"].indexOf(s)>=0){i=e._getInternalNavigationMode(s,n);L.debug("Navigation mode was forced to "+i,"because sap-ushell-navmode parameter was set to "+s+" for target with applicationType: "+A,"sap.ushell.navigationMode");N.navigationMode=i;N.explicitNavMode=true;return N;}l=e._isLegacyApplicationType(A)&&e._isLegacyApplicationType(n);if(b(o,n)===true&&!l){N.navigationMode="embedded";}return N;};e._getInternalNavigationMode=function(E,A){var i={SAPUI5:{inplace:"embedded",explace:"newWindowThenEmbedded",frameless:"newWindowThenEmbedded"},WDA:{inplace:"embedded",explace:"newWindowThenEmbedded",frameless:"newWindow"},TR:{inplace:"embedded",explace:"newWindowThenEmbedded",frameless:"newWindow"},URL:{inplace:"embedded",explace:"newWindow",frameless:"newWindow"},WCF:{inplace:"embedded",explace:"newWindowThenEmbedded",frameless:"newWindow"}};if(!i.hasOwnProperty(A)){L.error(A+" is not a valid application type","expected one of "+Object.keys(i).join(", "),"sap.ushell.navigationMode");return null;}if(E!=="inplace"&&E!=="explace"&&E!=="frameless"){L.error(E+" is not a valid external navigation mode","expected one of 'inplace', 'explace' or 'frameless'","sap.ushell.navigationMode");return null;}if(A==="SAPUI5"&&E==="frameless"){L.error("'"+E+"' is not a valid external navigation mode for application type '"+A+"'","falling back to internal navigation mode '"+i.SAPUI5.frameless+"'","sap.ushell.navigationMode");}return i[A][E];};e.getExternalNavigationMode=function(i){var E={embedded:"inplace",newWindowThenEmbedded:"explace",replace:"inplace",newWindow:"explace"};if(!E.hasOwnProperty(i)){L.error(i+" is not a recognized internal navigation mode","expected one of "+Object.keys(E).join(","),"sap.ushell.navigationMode");return null;}return E[i];};var w=["NWBC","WDA","TR","WCF"];e.getNavigationMode=function(r,c){var A=r.additionalInformation,s=r.applicationType,u,U;if(w.indexOf((c||{}).applicationType)>-1&&!(c||{}).explicitNavMode){return"newWindowThenEmbedded";}if(r.appCapabilities&&r.appCapabilities.navigationMode){return r.appCapabilities.navigationMode;}if((A===null||typeof A==="string"||typeof A==="undefined")&&(s==="URL"||s==="SAPUI5")){if(A&&A.indexOf("managed=")===0){if(A==="managed=FioriWave1"){return"embedded";}if(A==="managed="){return"newWindow";}return undefined;}if(A&&A.indexOf("SAPUI5.Component=")===0){u="[a-zA-Z0-9_]+";U=["^SAPUI5.Component=",u,"([.]",u,")*$"].join("");if(!(new RegExp(U)).test(A)){L.warning(["The UI5 component name in",A,"is not valid.","Please use names satisfying",U].join(" "));}return"embedded";}return"newWindow";}if(w.indexOf(s)>-1){return"newWindowThenEmbedded";}return undefined;};e.computeNavigationModeForHomepageTiles=function(A,s,i){var r={applicationType:A,additionalInformation:s};if(w.indexOf(A)>-1&&i){return"embedded";}return this.getNavigationMode(r);};return e;},true);
sap.ui.predefine('sap/ushell/override',["sap/m/GroupHeaderListItem","sap/ui/base/ManagedObject","sap/base/util/uid"],function(G,M,g){"use strict";var o={};o.updateAggregation=function(n){if(this.isTreeBinding(n)){M.prototype.updateAggregation.apply(this,arguments);}else{var b=this.mBindingInfos[n],B=b.binding,a=B.getContexts(),f=b.factory,A=this.getMetadata().getJSONKeys()[n],s=A._sMutator+"Group",c=B.isGrouped()&&this[s],i=[],d=function(C){var I=this.getId()+"-"+g(),e=f(I,C);e.setBindingContext(C,b.model);this[A._sMutator](e);}.bind(this);if(c){M.prototype.updateAggregation.apply(this,arguments);}else{i=this[A._sGetter]();o._adaptCurrentGroup(a,i);o._updateCurrentGroup(a,i,b.model,d);i.length=a.length;}}};o._adaptCurrentGroup=function(b,I){var i,a,c;for(i=0;i<b.length;i++){a=!!(I[i]&&I[i].isA("sap.ui.integration.widgets.Card"));c=!!b[i].getProperty(b[i].sPath+"/isCard");if(a||c){var j=i;for(;j<I.length;j++){I[j].destroy();}break;}}};o._updateCurrentGroup=function(b,I,B,a){var i;for(i=0;i<b.length;i++){if(i<I.length&&!I[i].bIsDestroyed){I[i].setBindingContext(b[i],B);}else{a(b[i]);}}for(;i<I.length;++i){I[i].destroy();}};o.updateAggregationGrouped=function(n){var b=this.mBindingInfos[n],B=b.binding,f=b.factory,c,N=null,a=null,s=null,t=this,I=t.getItems(),l=0,L=0,i,d,T=[];a=B.isGrouped()&&this.addItemGroup;jQuery.each(B.getContexts(),function(e,C){if(a&&B.aSorters.length>0){N=B.aSorters[0].fnGroup(C);if(typeof N==="string"){N={key:N};}if(N.key!==s){var h,H;if(b.groupHeaderFactory){h=b.groupHeaderFactory(N);}H=h||new G({title:N.text||N.key}).addStyleClass("sapMListHdr");t.insertAggregation("items",H,L,true);L=L+1;s=N.key;}}I=t.getItems();for(i=L;i<I.length;i=i+1){if(I[i].constructor===G){T.push(t.removeItem(I[i]));I=t.getItems();}}if(L<I.length){I[L].setBindingContext(C,b.model);if(I[L].aDelegates){jQuery.each(I[L].aDelegates,function(i,v){v.vThis=C;});}}else{d=t.getId()+"-"+L;c=f(d,C);c.setBindingContext(C,b.model);t.addItem(c);}L=L+1;l=L;});for(i=I.length-1;i>=l;i=i-1){T.push(t.removeItem(I[i]));}setTimeout(function(){jQuery.each(T,function(i,v){v.destroy();});},1);};o.updateAggregatesFactory=function(n){return function(){o.updateAggregation.bind(this)(n);};};return o;},true);
sap.ui.predefine('sap/ushell/performance/FesrEnhancer',["sap/ui/performance/trace/FESR","sap/ushell/utils/clone","sap/base/Log","sap/ushell/performance/ShellAnalytics"],function(F,c,U,S){"use strict";var a={HOME_INITIAL:"FLP@LOAD",FINDER_INITIAL:"FLP@LOAD_FINDER",APP_INITIAL:"FLP@DEEP_LINK",NAVIGATION:"NAVIGATION"};var I={APP_START:1,STEP_IN_APP:2,FLP_INITIAL_START:3};var f={_fnOriginalOnBeforeCreated:null,_lastTrackedRecord:null,init:function(){if(F.getActive()){S.enable();this._fnOriginalOnBeforeCreated=F.onBeforeCreated;F.onBeforeCreated=this._onBeforeCreatedHandler.bind(this);}},reset:function(){F.onBeforeCreated=this._fnOriginalOnBeforeCreated;S.disable();this._setLastTrackedRecord(null);},_getPerformanceEntries:function(e){return performance.getEntriesByName(e);},_getLastTrackedApplicationId:function(){var C=S.getCurrentApplication();if(C){return C.id;}return null;},_getLastTrackedRecord:function(){return this._lastTrackedRecord;},_setLastTrackedRecord:function(n){this._lastTrackedRecord=n;},_onBeforeCreatedHandler:function(u,o){var d=this._detectScenario(u,o),A=this._getLastTrackedApplicationId();if(A){u.appNameShort=A;}if(!d.scenario){return u;}return this._enhanceRecord(d.scenario,u,d.relatedEvent);},_detectScenario:function(u,o){function b(s,e){var r={scenario:s};if(e){r.relatedEvent=e;}return r;}if(u.stepName==="undetermined_startup"){var l=S.getLastClosedRecord();this._setLastTrackedRecord(l);switch(u.appNameLong){case"sap.ushell.components.homepage":return b(a.HOME_INITIAL);case"sap.ushell.components.pages":return b(a.HOME_INITIAL);case"sap.ushell.components.appfinder":return b(a.FINDER_INITIAL);default:break;}return b(a.APP_INITIAL,l);}var L=this._getLastTrackedRecord(),n=S.getNextNavigationRecords(L);if(n.length===1){var N=n[0];if((N&&L&&!N.isEqual(L))||(!L&&N)){this._setLastTrackedRecord(N);return b(a.NAVIGATION,N);}}else if(n.length>1){this._setLastTrackedRecord(n.pop());return b(a.NAVIGATION,n[0]);}return b(null);},_enhanceRecord:function(d,i,r){switch(d){case a.HOME_INITIAL:return this._enhanceInitialStart(i,d,"FLP-TTI-Homepage");case a.FINDER_INITIAL:return this._enhanceInitialStart(i,d,"FLP-TTI-AppFinder");case a.APP_INITIAL:return this._enhanceInitialAppStart(i,d,r||{});case a.NAVIGATION:return this._enhanceNavigationRecord(i,r||{});default:break;}U.warning("Unknown scenario at the end of execution, unnecessary code executed",null,"sap.ushell.performance.FesrEnhancer");return i;},_enhanceInitialStart:function(i,s,p){var m,e=c(i);e.stepName=s;e.interactionType=s==="FLP@LOAD"?I.FLP_INITIAL_START:I.APP_START;if(p){m=this._getPerformanceEntries(p)[0];if(m){e.timeToInteractive=m.startTime;return e;}U.warning("Scenario '"+s+"' detected but expected performance mark '"+p+"' does not exist",null,"sap.ushell.performance.FesrEnhancer");}return e;},_enhanceNavigationRecord:function(i,r){var e=c(i);e.stepName=r.step||i.stepName;e.appNameShort=r.targetApplication||"";if(r.applicationType==="UI5"){e.interactionType=I.APP_START;}if(/^FLP_BACK/.test(e.stepName)){var m=this._getPerformanceEntries("FLP-TTI-Homepage")[0];if(m){if(m.startTime>r.getTimeStart()){e.timeToInteractive=m.startTime-r.getTimeStart();}}}return e;},_enhanceInitialAppStart:function(i,s,r){var e=c(i);e.stepName=s;e.appNameShort=i.appNameShort;if(r.applicationType==="UI5"){e.interactionType=I.APP_START;}else{e.interactionType=I.STEP_IN_APP;}return e;}};return f;},true);
sap.ui.predefine('sap/ushell/performance/ShellAnalytics',["sap/ushell/EventHub","sap/ushell/services/AppConfiguration","sap/ushell/performance/StatisticalRecord"],function(E,A,S){"use strict";var s=[],d=[],o,c,l,h=false,i=false;var T={"dashboardTileClick":"HOMEPAGE_TILE","dashboardTileLinkClick":"HOMEPAGE_LINK","catalogTileClick":"FINDER_TILE"};var N={EXPLACE:"EXPLACE",INPLACE:"INPLACE"};var F={"sap.ushell.components.appfinder":"FLP_FINDER","sap.ushell.components.pages":"FLP_PAGE","sap.ushell.components.homepage":"FLP_HOME"};var t=["dashboardTileClick","dashboardTileLinkClick","catalogTileClick"];function _(){return sap.ui.getCore().getEventBus();}function a(D){return D&&(D==="FLP_HOME"||D==="FLP_PAGE");}function g(){return s;}function b(){var D=g().filter(function(R){return R.isClosed();});if(D.length>0){return D[D.length-1];}return null;}function e(L){if(!L){return g();}return g().filter(function(R){return L.getTimeStart()<R.getTimeStart()&&R.isClosed();});}function f(){return c;}function j(D){c=D;}function k(){l=performance.now();}function m(){if(!o){o=new S();s.push(o);}return o;}function n(D,G){m().setTrigger(T[G]);}function p(D){m().setTargetHash(D);m().setTimeStart(l||performance.now());}function q(D){var G="";var H=D&&D.componentInstance&&D.componentInstance.getManifest();if(H&&H["sap.app"]&&H["sap.app"].id){G=H["sap.app"].id;}return G;}function r(){return new Promise(function(D,G){sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(H){var I=H.getCurrentApplication();if(!I){D({});return;}if(I.homePage){var J=F[q(I)]||"FLP_HOME";D({type:"UI5",id:J});return;}if(I.applicationType==="UI5"){I.getTechnicalParameter("sap-fiori-id").then(function(L){var M=L[0];if(!M){M=q(I);M=F[M]||M;}M=M.replace(/,/g,"");D({type:"UI5",id:M});});}else{var K=A.getMetadata().technicalName||A.getCurrentApplication().text||I.applicationType;K=K.replace(/,/g,"");D({type:I.applicationType,id:K});}});});}function u(D,G,H){if(o){var I=G?G.id:null;o.setSourceApplication(D);o.setTargetApplication(I);o.setApplicationType(G?G.type:null);o.setNavigationMode(H);if(!h&&a(I)){h=true;o.setHomepageLoading(true);}o.closeRecord();o=null;}}function v(){if(!o){return;}r().then(function(D){var G=f();j(D);u(G?G.id:undefined,D,N.INPLACE);});}function w(){var D=f();u(D?D.id:undefined,null,N.EXPLACE);}function x(){if(o){var D=f();o.setSourceApplication(D?D.id:undefined);o.closeRecordWithError();o=null;}}function y(){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(D){D.hashChanger.attachEvent("hashChanged",k);D.hashChanger.attachEvent("shellHashChanged",k);});}function z(){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(D){D.hashChanger.detachEvent("hashChanged",k);D.hashChanger.detachEvent("shellHashChanged",k);});}function B(){if(i){return;}i=true;t.forEach(function(G){_().subscribe("launchpad",G,n);});var D;D=E.once("ShellNavigationInitialized").do(y);d.push(D);D=E.on("trackHashChange").do(p);d.push(D);D=E.on("AppRendered").do(v);d.push(D);D=E.on("openedAppInNewWindow").do(w);d.push(D);D=E.on("firstSegmentCompleteLoaded").do(v);d.push(D);D=E.on("doHashChangeError").do(x);d.push(D);D=E.on("PagesRuntimeRendered").do(v);d.push(D);D=E.on("CloseFesrRecord").do(v);d.push(D);}function C(){if(!i){return;}t.forEach(function(D){_().unsubscribe("launchpad",D,n);});d.forEach(function(D){D.off();});z();j(null);s=[];o=null;i=false;}return{enable:B,disable:C,getAllRecords:g,getCurrentApplication:f,getLastClosedRecord:b,getNextNavigationRecords:e};},false);
sap.ui.predefine('sap/ushell/performance/StatisticalRecord',[],function(){"use strict";var S={OPEN:"OPEN",CLOSED:"CLOSED",ERROR:"ERROR"};function _(A){return A&&(A==="FLP_HOME"||A==="FLP_PAGE");}function a(){this.status=S.OPEN;this.targetHash=null;this.trigger=null;this.timeStart=null;this.timeEnd=null;this.duration=null;this.step=null;this.sourceApplication=undefined;this.targetApplication=undefined;this.navigationMode=null;this.homepageLoading=false;this.applicationType=null;}a.prototype._calculateStep=function(){if(this.targetApplication===undefined&&this.sourceApplication===undefined){return"";}if(this.sourceApplication===undefined&&_(this.targetApplication)){return"FLP@LOAD";}if(this.sourceApplication===undefined&&!_(this.targetApplication)){return"FLP@DEEP_LINK";}if(this.sourceApplication&&!_(this.targetApplication)&&!_(this.sourceApplication)){return"A2A@"+this.sourceApplication;}if(this.sourceApplication&&_(this.targetApplication)&&!_(this.sourceApplication)){return"FLP_BACK@"+this.sourceApplication;}if(_(this.sourceApplication)){return"FLP@HOMEPAGE_TILE";}return"";};a.prototype.isEqual=function(o){return this.timeStart===o.timeStart;};a.prototype.closeRecord=function(){this.step=this._calculateStep();this.status=S.CLOSED;this.timeEnd=performance.now();if(this.timeStart){this.duration=this.timeEnd-this.timeStart;}};a.prototype.closeRecordWithError=function(){this.status=S.ERROR;this.timeEnd=performance.now();this.duration=this.timeEnd-this.timeStart;};a.prototype.isClosed=function(){return this.status===S.CLOSED;};a.prototype.getStep=function(){return this.step;};a.prototype.setTrigger=function(t){this.trigger=t;};a.prototype.setTargetHash=function(t){this.targetHash=t;};a.prototype.setTimeStart=function(t){this.timeStart=t;};a.prototype.getTimeStart=function(){return this.timeStart;};a.prototype.getTimeEnd=function(){return this.timeEnd;};a.prototype.setSourceApplication=function(s){this.sourceApplication=s;};a.prototype.setTargetApplication=function(t){this.targetApplication=t;};a.prototype.setNavigationMode=function(n){this.navigationMode=n;};a.prototype.setHomepageLoading=function(h){this.homepageLoading=h;};a.prototype.setApplicationType=function(b){this.applicationType=b;};return a;},false);
sap.ui.predefine('sap/ushell/renderers/fiori2/AccessKeysHandler',["sap/ui/base/EventProvider","sap/ui/Device","sap/ui/thirdparty/hasher","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/resources"],function(E,D,h,C,a,r){"use strict";var A=E.extend("sap.ushell.renderers.fiori2.AccessKeysHandler",{constructor:function(){E.apply(this,arguments);a.on("AppRendered").do(this.appOpenedHandler.bind(this));this.bFocusOnShell=true;this.bFocusPassedToExternalHandlerFirstTime=true;this.isFocusHandledByAnotherHandler=false;this.fnExternalKeysHandler=null;this.sLastExternalKeysHandlerUrl=null;this.fnExternalShortcuts=null;this.bForwardNavigation=true;this.aShortcutsDescriptions=[];}});A.prototype.init=function(m){this.oModel=m;document.addEventListener("keydown",function(e){if(e.keyCode===16){return;}this.bForwardNavigation=!e.shiftKey;if(e.key==="Tab"||e.key==="F6"){setTimeout(function(){this._handleEventUsingExternalKeysHandler(e);}.bind(this),0);}else{this._handleEventUsingExternalKeysHandler(e);}var c=C.last("/core/shell/model/currentState/stateName");if(c!=="headerless"&&c!=="headerless-home"){var b=(c==="home"||c==="app"||c==="minimal");this.handleShortcuts(e,b);}if(this.fnExternalShortcuts){this.fnExternalShortcuts(e);}}.bind(this),true);this._cancelHelpEvent=this._cancelHelpEvent.bind(this);};A.prototype.appOpenedHandler=function(){var c=h.getHash();if(c!==this.sLastExternalKeysHandlerUrl){this.fnExternalKeysHandler=null;}this.sLastExternalKeysHandlerUrl=c;};A.prototype._focusItemInOverflowPopover=function(i,c){var o=sap.ui.getCore().byId("headEndItemsOverflow");if(o&&o.isOpen()){if(o.getContent().length){this._focusItemInPopover(i,o.getContent()[0].getItems());}}else if(c<10){var O=window.document.getElementById("endItemsOverflowBtn");if(O){O.click();var t=this;window.setTimeout(function(){t._focusItemInOverflowPopover(i,++c);},300);}}};A.prototype._focusItemInUserMenu=function(i,c){var u=sap.ui.getCore().byId("sapUshellMeAreaPopover");if(u&&u.isOpen()){if(u.getContent().length){this._focusItemInPopover(i,u.getContent()[0].getItems());}}else if(c<10){var t=this;a.emit("showMeArea",Date.now());window.setTimeout(function(){t._focusItemInUserMenu(i,++c);},300);}};A.prototype._focusItemInPopover=function(I,b){for(var i=0;i<b.length;i++){var c=b[i].getId().split("-");if(c[c.length-1]===I){b[i].getDomRef().focus();return;}}};A.prototype._handleAccessOverviewKey=function(b){var s=this.oModel.getProperty("/searchAvailable"),p=this.oModel.getProperty("/personalization"),e=C.last("/core/catalog/enabled"),c=C.last("/core/shell/model/enableNotifications");if(D.browser.msie){document.addEventListener("help",this._cancelHelpEvent);}var S=[];S=S.concat(this.aShortcutsDescriptions);var d,f;if(D.os.macintosh){d=r.i18n.getText("OptionKey");f=r.i18n.getText("CommandKey");}else{d=r.i18n.getText("AltKey");f=r.i18n.getText("ControlKey");}if(window.document.getElementById("shell-header")){if(e&&b){S.push({text:d+" + A",description:r.i18n.getText("hotkeyFocusOnAppFinderButton")});}if(s){S.push({text:d+" + F",description:r.i18n.getText("hotkeyFocusOnSearchButton")});}S.push({text:d+" + H",description:r.i18n.getText("hotkeyHomePage")});S.push({text:d+" + M",description:r.i18n.getText("hotkeyFocusOnUserActionMenu")});if(c){S.push({text:d+" + N",description:r.i18n.getText("hotkeyFocusOnNotifications")});}if(b){S.push({text:d+" + S",description:r.i18n.getText("hotkeyFocusOnSettingsButton")});S.push({text:r.i18n.getText("ControlKey")+" + "+r.i18n.getText("CommaKey"),description:r.i18n.getText("hotkeyOpenSettings")});}if(p&&e){S.push({text:r.i18n.getText("ControlKey")+" + "+r.i18n.getText("EnterKey"),description:r.i18n.getText("hotkeyExitEditing")});}if(s){S.push({text:f+" + "+r.i18n.getText("ShiftKey")+" + F",description:r.i18n.getText("hotkeyFocusOnSearchField")});}}sap.ui.require(["sap/m/Label","sap/m/MessageBox","sap/m/Text","sap/m/VBox"],function(L,M,T,V){var v=new V();S.forEach(function(o){v.addItem(new L({text:o.description}));v.addItem(new T({text:o.text}).addStyleClass("sapUiSmallMarginBottom"));});M.show(v,{id:"hotKeysGlossary",title:r.i18n.getText("hotKeysGlossary"),styleClass:"sapContrastPlus"});});};A.prototype._focusAppFinderButton=function(){if(!C.last("/core/catalog/enabled")){return;}if(this._isFocusInDialog()){return;}var o=window.document.getElementById("openCatalogBtn");if(o){o.focus();return;}var c=sap.ushell.Container.getRenderer("fiori2").getShellConfig();if(c.moveAppFinderActionToShellHeader){this._focusItemInOverflowPopover("openCatalogBtn",0);return;}this._focusItemInUserMenu("openCatalogBtn",0);};A.prototype._focusSettingsButton=function(){if(this._isFocusInDialog()){return;}var s=window.document.getElementById("userSettingsBtn");if(s){s.focus();return;}var c=sap.ushell.Container.getRenderer("fiori2").getShellConfig();if(c.moveUserSettingsActionToShellHeader){this._focusItemInOverflowPopover("userSettingsBtn",0);return;}this._focusItemInUserMenu("userSettingsBtn",0);};A.prototype._blockBrowserDefault=function(e){return new Promise(function(b){if(D.browser.name==="ie"){var s=window.document.getElementById("shell-header");if(s){s.setAttribute("accesskey",e.key);window.setTimeout(function(){s=window.document.getElementById("shell-header");if(s){s.removeAttribute("accesskey");b();}},0);}}else{b();}e.preventDefault();});};A.prototype._handleAltShortcutKeys=function(e,b){var s=sap.ui.getCore().byId("shell-header"),u=sap.ui.getCore().byId("sapUshellMeAreaPopover"),n=sap.ui.getCore().byId("shellNotificationsPopover");if(this._isFocusInInput()){return;}if(s){if(b){if(e.keyCode===65){this._blockBrowserDefault(e).then(this._focusAppFinderButton.bind(this));}else if(e.keyCode===83){this._blockBrowserDefault(e).then(this._focusSettingsButton.bind(this));}}if(e.keyCode===70){this._blockBrowserDefault(e).then(function(){if(this._isFocusInDialog()){return;}var S=window.document.getElementById("sf"),o=window.document.getElementById("searchFieldInShell-button");if(S){S.focus();}else if(o){o.focus();}else{this._focusItemInOverflowPopover("sf",0);}}.bind(this));}else if(e.keyCode===72){this._blockBrowserDefault(e).then(function(){if(this._isFocusInDialog()){return;}var l=document.getElementById("shell-header-logo");if(l){l.focus();return;}var H=document.getElementById("homeBtn");if(H){H.focus();}}.bind(this));}else if(e.keyCode===77){this._blockBrowserDefault(e).then(function(){if(this._isFocusInDialog()){return;}if(!(u&&u.isOpen())){a.emit("showMeArea",Date.now());}}.bind(this));}else if(e.keyCode===78){this._blockBrowserDefault(e).then(function(){if(this._isFocusInDialog()){return;}if(!(n&&n.isOpen())){a.emit("showNotifications",Date.now());}}.bind(this));}}};A.prototype._handleCtrlShortcutKeys=function(e,b){if(e.shiftKey){if(e.keyCode===70){if(this._isFocusInDialog()){e.preventDefault();e.stopPropagation();return;}var s=sap.ui.getCore().byId("sf");if(s){s.firePress();e.preventDefault();e.stopPropagation();}}}else if(e.keyCode===188&&b){if(this._isFocusInDialog()){e.preventDefault();e.stopPropagation();return;}var S=sap.ui.getCore().byId("userSettingsBtn");if(S&&!this._isFocusInSmartTable()){S.firePress();e.preventDefault();e.stopPropagation();}}else if(e.keyCode===112){if(this._isFocusInDialog()){e.preventDefault();e.stopPropagation();return;}this._handleAccessOverviewKey(b);}else if(e.keyCode===83){if(this._isFocusInDialog()){e.preventDefault();e.stopPropagation();return;}var c=window.document.getElementById("appFinderSearch-I");if(c){c.focus();e.preventDefault();e.stopPropagation();}}else if(e.keyCode===13){if(this._isFocusInDialog()){e.preventDefault();e.stopPropagation();return;}if(C.last("/core/spaces/enabled")){this.fireEvent("editModeDone");}else{var d=sap.ui.getCore().byId("sapUshellDashboardFooterDoneBtn");if(d&&d.getDomRef()){d.firePress();e.preventDefault();e.stopPropagation();}}}};A.prototype.handleShortcuts=function(e,b){if(D.os.macintosh&&e.metaKey&&e.shiftKey&&e.keyCode===70){var s=window.document.getElementById("sf");if(s){s.firePress();e.preventDefault();e.stopPropagation();}e.preventDefault();}else if(e.altKey&&!e.shiftKey&&!e.ctrlKey){this._handleAltShortcutKeys(e,b);}else if(e.ctrlKey&&!e.altKey){this._handleCtrlShortcutKeys(e,b);}};A.prototype.registerAppKeysHandler=function(H){this.fnExternalKeysHandler=H;this.sLastExternalKeysHandlerUrl=h.getHash();};A.prototype.resetAppKeysHandler=function(){this.fnExternalKeysHandler=null;};A.prototype.getAppKeysHandler=function(){return this.fnExternalKeysHandler;};A.prototype.registerAppShortcuts=function(H,s){this.fnExternalShortcuts=H;this.aShortcutsDescriptions=s;};A.prototype._handleFocusBackToMe=function(e,i){this.bFocusOnShell=true;var f;if(i){f=window.document.getElementById(i);}else{this.fromOutside=true;if(e){e.preventDefault();this.bForwardNavigation=!e.shiftKey||e.key==="F6";}f=window.document.getElementById("sapUshellHeaderAccessibilityHelper");}if(f){f.focus();this.fromOutside=false;}this.bFocusPassedToExternalHandlerFirstTime=true;};A.prototype.setIsFocusHandledByAnotherHandler=function(H){this.isFocusHandledByAnotherHandler=H;};A.prototype.sendFocusBackToShell=function(p){var e,i;if(typeof p==="string"){i=p;}else if(typeof p==="object"){e=p;}this._handleFocusBackToMe(e,i);};A.prototype._handleEventUsingExternalKeysHandler=function(e){if(!this.bFocusOnShell&&!this.isFocusHandledByAnotherHandler){if(typeof this.fnExternalKeysHandler==="function"){this.fnExternalKeysHandler(e,this.bFocusPassedToExternalHandlerFirstTime);this.bFocusPassedToExternalHandlerFirstTime=false;}}this.setIsFocusHandledByAnotherHandler(false);};A.prototype._cancelHelpEvent=function(e){e.preventDefault();document.removeEventListener("help",this._cancelHelpEvent);};A.prototype._isFocusInInput=function(){var t=(document.activeElement||{}).tagName;return t==="INPUT"||t==="TEXTAREA";};A.prototype._isFocusInDialog=function(){var e=document.activeElement;for(;e!==document.body;e=e.parentNode){if(e.classList.contains("sapMDialog")){return true;}}return false;};A.prototype._isFocusInSmartTable=function(){var e=document.activeElement;var c;for(;e!==document.body;e=e.parentNode){c=e.classList;if(c.contains("sapUiCompSmartTable")||c.contains("sapUiMdcTable")){return true;}}return false;};return new A();});
sap.ui.predefine('sap/ushell/renderers/fiori2/History',function(){"use strict";var H=function(){this._history=[];this.backwards=false;this._historyPosition=-1;this._virtual={};};H.prototype.hashChange=function(n){var h=this._history.indexOf(n);if(h===-1){if(this._historyPosition+1<this._history.length){this._history=this._history.slice(0,this._historyPosition+1);}this._history.push(n);this._historyPosition+=1;this.backwards=false;this.forwards=false;}else{this.backwards=this._historyPosition>h;this.forwards=this._historyPosition<h;this._historyPosition=h;}};H.prototype.pop=function(){var l;if(this._history.length>0){l=this._history.pop();this._historyPosition--;}return l;};H.prototype.isVirtualHashchange=function(n,o){return this._virtual.hasOwnProperty(o)&&this.getCurrentHash()===n&&this._history.length-1>this._historyPosition&&this._history[this._historyPosition+1]===o;};H.prototype.setVirtualNavigation=function(h){this._virtual[h]=true;};H.prototype.getCurrentHash=function(){return this._history[this._historyPosition]||null;};H.prototype.getHashIndex=function(h){return this._history.indexOf(h);};H.prototype.getHistoryLength=function(){return this._history.length;};return H;},true);
sap.ui.predefine('sap/ushell/renderers/fiori2/LogonFrameProvider',["sap/m/Button","sap/m/Dialog","sap/ui/core/HTML","sap/ushell/ui/footerbar/ContactSupportButton","sap/ushell/Config","sap/ushell/resources"],function(B,D,H,C,a,r){"use strict";function c(){d();var o=new D({id:"SAMLDialog",title:r.i18n.getText("samlDialogTitle"),contentWidth:"50%",contentHeight:"50%",content:new H("SAMLDialogFrame",{content:"<iframe id=SAMLDialogFrame src=\"\"></iframe>"}),rightButton:new B({text:r.i18n.getText("samlCloseBtn"),press:sap.ushell.Container.cancelLogon.bind(sap.ushell.Container)})}).addStyleClass("sapUshellIframeDialog sapContrastPlus sapUshellSamlDialogHidden");if(a.last("/core/extension/SupportTicket")){var b=new C();b.setWidth("150px");b.setIcon("");o.setLeftButton(b);}o.open();t(true);return document.getElementById("SAMLDialogFrame");}function t(h){var b=document.getElementById("sap-ui-blocklayer-popup");if(b){if(h){b.classList.add("sapUshellSamlDialogHidden");}else{b.classList.remove("sapUshellSamlDialogHidden");}}}function d(){var o=sap.ui.getCore().byId("SAMLDialog");if(o){o.destroy();}}function s(){var o=sap.ui.getCore().byId("SAMLDialog");if(o){o.removeStyleClass("sapUshellSamlDialogHidden");t(true);}}return{create:c,show:s,destroy:d};},true);
sap.ui.predefine('sap/ushell/renderers/fiori2/Renderer',["sap/ui/core/UIComponent","sap/ushell/ui/shell/ToolAreaItem","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/utils","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ui/Device","sap/ui/model/json/JSONModel","sap/ushell/components/SharedComponentUtils","sap/ushell/services/AppConfiguration","sap/ushell/services/AppType","sap/ushell/resources","sap/base/util/UriParameters","sap/ui/thirdparty/jquery","sap/base/Log","sap/base/util/ObjectPath","sap/ui/core/library","sap/ushell/ui/shell/ShellHeadItem","sap/m/NotificationListItem","./RendererExtensions"],function(U,T,C,e,u,A,D,J,s,a,b,r,c,q,L,O,d,S,N){"use strict";var V=d.mvc.ViewType;var R=U.extend("sap.ushell.renderers.fiori2.Renderer",{metadata:{version:"1.88.1",dependencies:{version:"1.88.1",libs:["sap.ui.core","sap.m"],components:[]},routing:{config:{path:"sap.ushell.components",async:true,controlId:"viewPortContainer",clearAggregation:false,controlAggregation:"pages"},routes:[{name:"appfinder-legacy",pattern:"Shell-home&/appFinder/:menu:/:filter:"},{name:"home",pattern:["Shell-home?:hashParameters:","Shell-home&/:innerHash*:","Shell-home"],target:C.last("/core/spaces/enabled")?"pages":"home"},{name:"appfinder",pattern:["Shell-appfinder?:hashParameters:&/:innerHash*:","Shell-appfinder?:hashParameters*:","Shell-appfinder&/:innerHash*:","Shell-appfinder"],target:C.last("/core/catalog/enabled")?"appfinder":undefined},{name:"openFLPPage",pattern:["Launchpad-openFLPPage?:hashParameters:","Launchpad-openFLPPage"],target:C.last("/core/spaces/enabled")?"pages":"home"}],targets:{home:{name:"homepage",type:"Component",title:r.i18n.getText("homeBtn_tooltip"),id:"Shell-home-component",options:{manifest:false,asyncHints:{preloadBundles:C.last("/core/home/featuredGroup/enable")?["sap/fiori/flp-controls.js","sap/ushell/components/homepage/cards-preload.js"]:["sap/fiori/flp-controls.js"]},componentData:{config:{enablePersonalization:true,enableHomePageSettings:false}}}},appfinder:{name:"appfinder",type:"Component",id:"Shell-appfinder-component",options:{manifest:false,asyncHints:{preloadBundles:["sap/fiori/flp-controls.js"]},componentData:{config:{enablePersonalization:true,enableHomePageSettings:false}}}},pages:{name:"pages",type:"Component",id:"pages-component",componentData:{},options:{asyncHints:{preloadBundles:["sap/fiori/flp-controls.js"]}}}}}},init:function(){U.prototype.init.apply(this,arguments);var t=this,o=this.getRouter();var p=function(E){e.emit("trackHashChange","Shell-home");if(a.getCurrentApplication()){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(j){j.setIsInitialNavigation(false);});}var g=window.hasher.getHash();if(!C.last("/core/spaces/enabled")&&g.indexOf("Launchpad-openFLPPage")===0){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(j){j.replaceHashWithoutNavigation("Shell-home");});}var h=r.i18n.getText("homeBtn_tooltip");var i=t.getShellConfig().rootIntent;var I=!i||u.isFlpHomeIntent(i);A.switchViewState(I?"home":"app",false,"Shell-home");t.setCurrentCoreView("home");a.setCurrentApplication(null);A.getShellUIService().setTitle(h);A.getShellUIService().setHierarchy();A.getShellUIService().setRelatedApps();A.getAppMeta().setAppIcons();s.initializeAccessKeys();};o.getRoute("home").attachMatched(p);o.getRoute("openFLPPage").attachMatched(p);o.getRoute("appfinder-legacy").attachMatched(function(E){o.navTo("appfinder",{},true);});o.getRoute("appfinder").attachMatched(function(E){if(!C.last("/core/catalog/enabled")){L.warning("AppFinder is disabled. Re-route to the homepage.");o.navTo("home",null,true);return;}e.emit("trackHashChange","Shell-appFinder");var g=sap.ui.getCore().getComponent(t.createId("Shell-appfinder-component")),h=E.getParameter("arguments");if(sap.ushell.Container.getRenderer("fiori2")){A.getShellUIService().setBackNavigation();sap.ushell.Container.getRenderer("fiori2").setCurrentCoreView("appFinder");}a.setCurrentApplication(null);var i=g.getRouter();g.getRootControl().loaded().then(function(){i.parse(h["innerHash*"]||"");});A.switchViewState("app",false,"Shell-appfinder");A.getAppMeta().setAppIcons();s.initializeAccessKeys();});var f=new J(D);f.setDefaultBindingMode("OneWay");this.setModel(f,"device");this.setModel(r.i18nModel,"i18n");}});R.prototype.createContent=function(){var p=new c(window.location.href).get("appState")||new c(window.location.href).get("sap-ushell-config"),w,v=this.getComponentData()||{},o={applications:{"Shell-home":{}},rootIntent:"Shell-home"},f;w=(p==="headerless-opt")?"headerless":p;if(w){if(!v.config){v.config={};}v.config.appState=w;v.config.appStateOrig=p;v.config.inHeaderLessOpt=(p==="headerless-opt");}if(v.config){if(v.config.rootIntent===undefined){v.config.migrationConfig=true;}v.config=q.extend(true,o,v.config);q.extend(v.config.applications["Shell-home"],C.last("/core/home"),C.last("/core/catalog"));if(v.config.appState==="headerless"||v.config.appState==="merged"||v.config.appState==="blank"){v.config.enablePersonalization=false;C.emit("/core/shell/enablePersonalization",false);}else{v.config.enablePersonalization=C.last("/core/shell/enablePersonalization");}if(!v.config.enablePersonalization){v.config.moveEditHomePageActionToShellHeader=false;v.config.moveAppFinderActionToShellHeader=false;}}if(v.config&&v.config.customViews){Object.keys(v.config.customViews).forEach(function(h){var i=v.config.customViews[h];sap.ui.view(h,{type:i.viewType,viewName:i.viewName,viewData:i.componentData});});}var g=C.createModel("/core/shell/model",J);v.shellModel=g;f=sap.ui.view("mainShell",{type:V.JS,viewName:"sap.ushell.renderers.fiori2.Shell",height:"100%",viewData:v});f.setModel(g);this._oShellView=f;this.oShellModel=A.getElementsModel();f.loaded().then(function(h){sap.ushell.renderers.fiori2.utils.init(h.getController());this.shellCtrl=h.oController;}.bind(this));return f;};R.prototype.createExtendedShellState=function(f,g){return A.shellElements().createExtendedShellState(f,g);};R.prototype.applyExtendedShellState=function(f,g){this.oShellModel.applyExtendedShellState(f,g);};R.prototype.showLeftPaneContent=function(i,f,g){var I=typeof i==="string"?[i]:i;if(f){A.shellElements().addShellModelForApplications("paneContent",I);}else{this.oShellModel.addLeftPaneContent(I,false,g);}};R.prototype.showHeaderItem=function(i,f,g){var I=typeof i==="string"?[i]:i;if(f){A.shellElements().addShellModelForApplications("headItems",I);}else{this.oShellModel.addHeaderItem(I,false,g);}};R.prototype.showRightFloatingContainerItem=function(i,f,g){var I=typeof i==="string"?[i]:i;if(f){A.shellElements().addShellModelForApplications("RightFloatingContainerItems",I);}else{this.oShellModel.addRightFloatingContainerItem(I,false,g);}};R.prototype.showRightFloatingContainer=function(f){A.shellElements().setShellModelForApplications("showRightFloatingContainer",f);};R.prototype.showToolAreaItem=function(i,f,g){this.oShellModel.addToolAreaItem(i,true,f,g);};R.prototype.showActionButton=function(i,f,g){var B=[],h=[],o;if(typeof i==="string"){i=[i];}B=i.filter(function(I){o=sap.ui.getCore().byId(I);return o instanceof sap.m.Button&&!(o instanceof sap.ushell.ui.launchpad.ActionItem);});h=i.filter(function(I){o=sap.ui.getCore().byId(I);return o instanceof sap.ushell.ui.launchpad.ActionItem;});if(B.length){this.convertButtonsToActions(B,f,g);}if(h.length){if(f){A.shellElements().addShellModelForApplications("actions",i);}else{this.oShellModel.addActionButton(i,false,g);}}};R.prototype.showFloatingActionButton=function(i,f,g){if(f){A.shellElements().addShellModelForApplications("floatingActions",typeof i==="string"?[i]:i);}else{this.oShellModel.addFloatingActionButton(typeof i==="string"?[i]:i,false,g);}};R.prototype.showHeaderEndItem=function(i,f,g){if(f){A.shellElements().addShellModelForApplications("headEndItems",typeof i==="string"?[i]:i);}else{this.oShellModel.addHeaderEndItem(typeof i==="string"?[i]:i,false,g);}};R.prototype.setHeaderVisibility=function(v,f,g){if(f){A.shellElements().setShellModelForApplications("headerVisible",v);}else{this.oShellModel.setHeaderVisibility(v,false,g);}};R.prototype.showSubHeader=function(i,f,g){if(f){A.shellElements().addShellModelForApplications("subHeader",typeof i==="string"?[i]:i);}else{this.oShellModel.addSubHeader(typeof i==="string"?[i]:i,false,g);}};R.prototype.showSignOutItem=function(f,g){if(f){A.shellElements().addShellModelForApplications("actions",["logoutBtn"],false);}else{this.oShellModel.showSignOutButton(f,g);}};R.prototype.showSettingsItem=function(f,g){this.oShellModel.showSettingsButton(f,g);};R.prototype.setFooter=function(f){this.shellCtrl.setFooter(f);};R.prototype.setShellFooter=function(p){var o=new q.Deferred(),t=this,f,g,h=p.controlType,i=p.oControlProperties;if(i&&i.id&&sap.ui.getCore().byId(i.id)){g=sap.ui.getCore().byId(i.id);if(g){if(this.lastFooterId){this.removeFooter();}this.lastFooterId=g.getId();this.shellCtrl.setFooter(g);o.resolve(g);}}if(h){f=h.replace(/\./g,"/");sap.ui.require([f],function(j){g=new j(i);if(t.lastFooterId){t.removeFooter();}t.lastFooterId=g.getId();t.shellCtrl.setFooter(g);o.resolve(g);});}else{L.warning("You must specify control type in order to create it");}return o.promise();};R.prototype.setFooterControl=function(f,o){var g=f.replace(/\./g,"/"),h=sap.ui.require(g),i,j=false;if(h){j=true;}else if(!O.get(f||"")){q.sap.require(f);}i=this.createItem(o,undefined,function(p){if(f){if(j){return new h(p);}var k=O.get(f||"");return new k(p);}L.warning("You must specify control type in order to create it");return undefined;});if(this.lastFooterId){this.removeFooter();}this.lastFooterId=i.getId();this.shellCtrl.setFooter(i);return i;};R.prototype.hideHeaderItem=function(i,f,g){if(typeof i==="string"){this.oShellModel.removeHeaderItem([i],f,g);}else{this.oShellModel.removeHeaderItem(i,f,g);}};R.prototype.removeToolAreaItem=function(i,f,g){if(typeof i==="string"){i=[i];}this.oShellModel.removeToolAreaItem(i,f,g);};R.prototype.removeRightFloatingContainerItem=function(i,f,g){if(typeof i==="string"){this.oShellModel.removeRightFloatingContainerItem([i],f,g);}else{this.oShellModel.removeRightFloatingContainerItem(i,f,g);}};R.prototype.hideActionButton=function(i,f,g){if(typeof i==="string"){this.oShellModel.removeActionButton([i],f,g);}else{this.oShellModel.removeActionButton(i,f,g);}};R.prototype.hideLeftPaneContent=function(i,f,g){if(typeof i==="string"){this.oShellModel.removeLeftPaneContent([i],f,g);}else{this.oShellModel.removeLeftPaneContent(i,f,g);}};R.prototype.hideFloatingActionButton=function(i,f,g){if(typeof i==="string"){this.oShellModel.removeFloatingActionButton([i],f,g);}else{this.oShellModel.removeFloatingActionButton(i,f,g);}};R.prototype.hideHeaderEndItem=function(i,f,g){if(typeof i==="string"){this.oShellModel.removeHeaderEndItem([i],f,g);}else{this.oShellModel.removeHeaderEndItem(i,f,g);}};R.prototype.hideSubHeader=function(i,f,g){if(typeof i==="string"){this.oShellModel.removeSubHeader([i],f,g);}else{this.oShellModel.removeSubHeader(i,f,g);}};R.prototype.removeFooter=function(){this.shellCtrl.removeFooter();if(this.lastFooterId){var f=sap.ui.getCore().byId(this.lastFooterId);if(f){f.destroy();}this.lastFooterId=undefined;}};R.prototype.getCurrentViewportState=function(){return this.shellCtrl.getCurrentViewportState();};R.prototype.addShellSubHeader=function(p){var o=new q.Deferred(),t=this,f,g,h=p.controlType,i=p.oControlProperties,I=p.bIsVisible,j=p.bCurrentState,k=p.aStates;if(i&&i.id&&sap.ui.getCore().byId(i.id)){g=sap.ui.getCore().byId(i.id);if(g){if(I){this.showSubHeader(g.getId(),j,k);}o.resolve(g);}}if(h){f=h.replace(/\./g,"/");sap.ui.require([f],function(l){g=new l(i);if(I){t.showSubHeader(g.getId(),j,k);t.oShellModel.addElementToManagedQueue(g);}o.resolve(g);});}else{L.warning("You must specify control type in order to create it");}return o.promise();};R.prototype.addSubHeader=function(f,o,i,g,h){var j=f.replace(/\./g,"/"),k=sap.ui.require(j),l,m=false;if(k){m=true;}else if(!O.get(f||"")){q.sap.require(f);}l=this.createItem(o,g,function(p){if(f){if(m){return new k(p);}var n=O.get(f||"");return new n(p);}L.warning("You must specify control type in order to create it");return undefined;});if(i){this.showSubHeader(l.getId(),g,h);}return l;};R.prototype.addUserAction=function(p){var o=new q.Deferred(),t=this,f,g,h=p.controlType,i=p.oControlProperties,I=p.bIsVisible,j=p.bCurrentState,m=j?A.shellElements().getStateModelToUpdate():this.oShellModel.getModelToUpdate(),k=p.aStates,n;if(i){g=sap.ui.getCore().byId(i.id);}if(g){o.resolve(g);}if(h){if(h==="sap.m.Button"){h="sap.ushell.ui.launchpad.ActionItem";}f=h.replace(/\./g,"/");sap.ui.require([f],function(l){var v;if(j){v=A.shellElements().getStateModelToUpdate();A.shellElements().setStateModelToUpdate(m);}else{v=t.oShellModel.getModelToUpdate();t.oShellModel.setModelToUpdate(m,true);}g=g||new l(i);if(!g.getActionType){g=new l(i);}if(I){t.showActionButton(g.getId(),j,k);}if(j){A.shellElements().setStateModelToUpdate(v);}else{t.oShellModel.setModelToUpdate(v,false);}o.resolve(g);});}else{n="You must specify control type in order to create it";L.warning(n);o.reject(n);}return o.promise();};R.prototype.addActionButton=function(f,o,i,g,h){var j,k,l=false;if(f==="sap.m.Button"){f="sap.ushell.ui.launchpad.ActionItem";}j=f.replace(/\./g,"/");var m=sap.ui.require(j);if(m){l=true;}else if(!O.get(f||"")){q.sap.require(f);}k=this.createItem(o,g,function(p){if(f){if(l){return new m(p);}var n=O.get(f||"");return new n(p);}L.warning("You must specify control type in order to create it");return undefined;});if(i){this.showActionButton(k.getId(),g,h);}return k;};R.prototype.addFloatingButton=function(p){var o=new q.Deferred(),t=this,f,g,h=p.controlType,i=p.oControlProperties,I=p.bIsVisible,j=p.bCurrentState,k=p.aStates;if(i&&i.id&&sap.ui.getCore().byId(i.id)){g=sap.ui.getCore().byId(i.id);if(g){if(I){t.showFloatingActionButton(g.getId(),j,k);t.oShellModel.addElementToManagedQueue(g);}o.resolve(g);}}if(h){f=h.replace(/\./g,"/");}else{f="sap/m/Button";}sap.ui.require([f],function(l){g=new l(i);if(I){this.showFloatingActionButton(g.getId(),j,k);}o.resolve(g);});return o.promise();};R.prototype.addFloatingActionButton=function(f,o,i,g,h){var j,k,l,m=false;if(!f){f="sap.m.Button";}j=f.replace(/\./g,"/");k=sap.ui.require(j);if(k){m=true;}else if(!O.get(f||"")){q.sap.require(f);}l=this.createItem(o,g,function(p){if(f){if(m){return new k(p);}var n=O.get(f||"");return new n(p);}L.warning("You must specify control type in order to create it");return undefined;});if(i){this.showFloatingActionButton(l.getId(),g,h);}return l;};R.prototype.addSidePaneContent=function(p){var o=new q.Deferred(),t=this,f,g,h=p.controlType,i=p.oControlProperties,I=p.bIsVisible,j=p.bCurrentState,k=p.aStates;if(i&&i.id&&sap.ui.getCore().byId(i.id)){g=sap.ui.getCore().byId(i.id);if(g){o.resolve(g);}}if(h){f=h.replace(/\./g,"/");sap.ui.require([f],function(l){g=new l(i);if(I){t.oShellModel.addElementToManagedQueue(g);t.showLeftPaneContent(g.getId(),j,k);}o.resolve(g);});}else{L.warning("You must specify control type in order to create it");}return o.promise();};R.prototype.addLeftPaneContent=function(f,o,i,g,h){var j=f.replace(/\./g,"/"),k=sap.ui.require(j),l;if(k){l=true;}else if(!O.get(f||"")){q.sap.require(f);}var m=this.createItem(o,g,function(p){if(f){if(l){return new k(p);}var n=O.get(f||"");return new n(p);}L.warning("You must specify control type in order to create it");return undefined;});if(i){this.showLeftPaneContent(m.getId(),g,h);}return m;};R.prototype.addHeaderItem=function(f,o,i,g,h){if(typeof(arguments[0])==="object"&&typeof(arguments[1])==="boolean"){o=arguments[0];i=arguments[1];g=arguments[2];h=arguments[3];}else{L.error("sap.ushell.renderers.fiori2.Renderer: The parameter 'controlType' of the function 'addHeaderItem' is deprecated. Usage will be ignored!");}var I=this.createItem(o,g,function(p){return new S(p);});if(i){this.showHeaderItem(I.getId(),g,h);}return I;};R.prototype.addRightFloatingContainerItem=function(o,i,f,g){var I=this.createItem(o,f,function(p){return new N(p);});if(i){this.showRightFloatingContainerItem(I.getId(),f,g);}return I;};R.prototype.addToolAreaItem=function(o,i,f,g){o.visible=!!i;var h=function(p){return new T(p);},I=this.createItem(o,f,h);this.oShellModel.addToolAreaItem(I.getId(),!!i,f,g);return I;};R.prototype.addHeaderEndItem=function(f,o,i,g,h){if(typeof(arguments[0])==="object"&&typeof(arguments[1])==="boolean"){o=arguments[0];i=arguments[1];g=arguments[2];h=arguments[3];}var I=this.createItem(o,g,function(p){return new S(p);});if(i){this.showHeaderEndItem(I.getId(),g,h);}return I;};R.prototype.getModelConfiguration=function(){return this.shellCtrl.getModelConfiguration();};R.prototype.addEndUserFeedbackCustomUI=function(o,f){this.shellCtrl.addEndUserFeedbackCustomUI(o,f);};R.prototype.addUserPreferencesEntry=function(f){return this.shellCtrl.addUserPreferencesEntry(f);};R.prototype.setHeaderTitle=function(t){this.shellCtrl.setHeaderTitle(t);};R.prototype.setLeftPaneVisibility=function(l,v){this.oShellModel.setLeftPaneVisibility(v,false,[l]);};R.prototype.showToolArea=function(l,v){this.oShellModel.showShellItem("/toolAreaVisible",l,v);};R.prototype.setHeaderHiding=function(h){return this.oShellModel.setHeaderHiding(h);};R.prototype.setFloatingContainerContent=function(o,f,g){this.shellCtrl.setFloatingContainerContent("floatingContainerContent",[o.getId()],f,g);};R.prototype.setFloatingContainerVisibility=function(v){this.shellCtrl.setFloatingContainerVisibility(v);};R.prototype.getFloatingContainerState=function(){return this.shellCtrl.getFloatingContainerState();};R.prototype.getFloatingContainerVisiblity=function(){return this.shellCtrl.getFloatingContainerVisibility();};R.prototype.getRightFloatingContainerVisibility=function(){return this.shellCtrl.getRightFloatingContainerVisibility();};R.prototype.setFloatingContainerDragSelector=function(E){this.shellCtrl.setFloatingContainerDragSelector(E);};R.prototype.makeEndUserFeedbackAnonymousByDefault=function(E){this.shellCtrl.makeEndUserFeedbackAnonymousByDefault(E);};R.prototype.showEndUserFeedbackLegalAgreement=function(f){this.shellCtrl.showEndUserFeedbackLegalAgreement(f);};R.prototype.LaunchpadState={App:"app",Home:"home"};R.prototype.createTriggers=function(t,f,g){this.oShellModel.createTriggers(t,f,g);};R.prototype.convertButtonsToActions=function(i,f,g){var p={},B,t=this;i.forEach(function(I){B=sap.ui.getCore().byId(I);p.id=B.getId();p.text=B.getText();p.icon=B.getIcon();p.tooltip=B.getTooltip();p.enabled=B.getEnabled();p.visible=B.getVisible();if(B.mEventRegistry&&B.mEventRegistry.press){p.press=B.mEventRegistry.press[0].fFunction;}B.destroy();t.addActionButton("sap.ushell.ui.launchpad.ActionItem",p,p.visible,f,g);});};R.prototype.createItem=function(o,f,g){var i;if(o&&o.id){i=sap.ui.getCore().byId(o.id);}if(!i){i=g(o);if(f){this.oShellModel.addElementToManagedQueue(i);}}return i;};R.prototype.addEntryInShellStates=function(n,f,g,h,o){this.oShellModel.addEntryInShellStates(n,f,g,h,o);};R.prototype.removeCustomItems=function(f,i,g,h){if(typeof i==="string"){this.oShellModel.removeCustomItems(f,[i],g,h);}else{this.oShellModel.removeCustomItems(f,i,g,h);}};R.prototype.addCustomItems=function(f,i,g,h){if(typeof i==="string"){this.oShellModel.addCustomItems(f,[i],g,h);}else{this.oShellModel.addCustomItems(f,i,g,h);}};R.prototype.addRightViewPort=function(v){this.shellCtrl.getViewPortContainer().addRightViewPort(v,false);};R.prototype.addLeftViewPort=function(v){this.shellCtrl.getViewPortContainer().addLeftViewPort(v,false);};R.prototype.getShellController=function(){return this.shellCtrl;};R.prototype.getViewPortContainerCurrentState=function(){return this.shellCtrl.getViewPortContainer().getCurrentState();};R.prototype.ViewPortContainerNavTo=function(n,t,f){return this.shellCtrl.getViewPortContainer().navTo(n,t,f);};R.prototype.switchViewPortStateByControl=function(){};R.prototype.ViewPortContainerAttachAfterSwitchStateAnimationFinished=function(){};R.prototype.setMeAreaSelected=function(f){this.shellCtrl.setMeAreaSelected(f);};R.prototype.getMeAreaSelected=function(){return this.shellCtrl.getMeAreaSelected();};R.prototype.setNotificationsSelected=function(f){this.shellCtrl.setNotificationsSelected(f);};R.prototype.getNotificationsSelected=function(){return this.shellCtrl.getNotificationsSelected();};R.prototype.addShellDanglingControl=function(o){this.shellCtrl.getView().addDanglingControl(o);};R.prototype.getShellConfig=function(){return(this.shellCtrl.getView().getViewData()?this.shellCtrl.getView().getViewData().config||{}:{});};R.prototype.getEndUserFeedbackConfiguration=function(){return this.shellCtrl.oEndUserFeedbackConfiguration;};R.prototype.reorderUserPrefEntries=function(f){return this.shellCtrl._reorderUserPrefEntries(f);};R.prototype.addUserProfilingEntry=function(f){this.shellCtrl.addUserProfilingEntry(f);};R.prototype.logRecentActivity=function(o){if(!o.appType){o.appType=b.APP;}if(!o.appId){o.appId=o.url;}return this.shellCtrl._logRecentActivity(o);};R.prototype.setCurrentCoreView=function(f){this.currentCoreView=f;};R.prototype.getCurrentCoreView=function(){return this.currentCoreView;};R.prototype._isBuiltInIntent=function(p){if(!R._aBuiltInRoutes){var f=R.getMetadata().getRoutes();R._aBuiltInRoutes=f.reduce(function(g,o){return g.concat(o.pattern);},[]);}if(!p||!p.semanticObject||!p.action){return false;}var i=p.semanticObject+"-"+p.action;return R._aBuiltInRoutes.indexOf(i)!==-1;};return R;},true);
sap.ui.predefine('sap/ushell/renderers/fiori2/RendererExtensions',["sap/ushell/EventHub"],function(E){"use strict";function _(C){setTimeout(function(){sap.ui.getCore().getEventBus().publish("sap.ushell","rendererLoaded",{rendererName:"fiori2"});},0);E.emit("RendererLoaded",{rendererName:"fiori2"});}function a(t,D){setTimeout(function(){sap.ui.getCore().getEventBus().publish("sap.ushell.renderers.fiori2.Renderer",t,D);},0);}sap.ushell.renderers.fiori2.utils={};sap.ushell.renderers.fiori2.utils.publishExternalEvent=a;sap.ushell.renderers.fiori2.utils.init=_;function b(I,L,t){sap.ushell.Container.getRenderer("fiori2").hideHeaderItem(I.getId(),false,[L,t]);}function c(B,L,t){sap.ushell.Container.getRenderer("fiori2").showActionButton(B.getId(),false,[L,t]);}function d(B,L,t){sap.ushell.Container.getRenderer("fiori2").hideActionButton(B.getId(),false,[L,t]);}function e(C,L,t){sap.ushell.Container.getRenderer("fiori2").showLeftPaneContent(C.getId(),false,[L,t]);}function f(L,t){sap.ushell.Container.getRenderer("fiori2").hideLeftPaneContent(false,[L,t]);}function g(I,L,t){sap.ushell.Container.getRenderer("fiori2").showFloatingActionButton(I.getId(),false,[L,t]);}function h(I,L,t){sap.ushell.Container.getRenderer("fiori2").hideFloatingActionButton(I.getId(),false,[L,t]);}function i(I,L,t){sap.ushell.Container.getRenderer("fiori2").showHeaderEndItem(I.getId(),false,[L,t]);}function j(I,L,t){sap.ushell.Container.getRenderer("fiori2").hideHeaderEndItem(I.getId(),false,[L,t]);}function k(){return sap.ushell.Container.getRenderer("fiori2").getModelConfiguration();}function l(C,S){sap.ushell.Container.getRenderer("fiori2").addEndUserFeedbackCustomUI(C,S);}function m(t){sap.ushell.Container.getRenderer("fiori2").addUserPreferencesEntry(t);}function n(t){sap.ushell.Container.getRenderer("fiori2").setHeaderTitle(t);}function o(L,v){sap.ushell.Container.getRenderer("fiori2").setLeftPaneVisibility(L,v);}function p(H){sap.ushell.Container.getRenderer("fiori2").setHeaderHiding(H);}function q(F){sap.ushell.Container.getRenderer("fiori2").setFooter(F);}function r(){sap.ushell.Container.getRenderer("fiori2").removeFooter();}function R(){this.addHeaderItem=function(I,L,t){sap.ushell.Container.getRenderer("fiori2").showHeaderItem(I.getId(),false,[L,t]);};this.setHeaderItemVisibility=function(I,L,t,u){var v=sap.ui.getCore().byId(I);if(u){sap.ushell.Container.getRenderer("fiori2").showHeaderItem(v.getId(),t,[L]);}};this.addSubHeader=function(I,L,t){sap.ushell.Container.getRenderer("fiori2").showSubHeader(I.getId(),false,[L,t]);};this.removeSubHeader=function(I,L,t){sap.ushell.Container.getRenderer("fiori2").hideSubHeader(I.getId(),false,[L,t]);};this.addHeaderEndItem=i;this.removeHeaderItem=b;this.removeHeaderEndItem=j;this.addEndUserFeedbackCustomUI=l;this.addOptionsActionSheetButton=c;this.removeOptionsActionSheetButton=d;this.setFooter=q;this.removeFooter=r;this.addUserPreferencesEntry=m;this.setHeaderTitle=n;this.setHeaderHiding=p;this.LaunchpadState={App:"app",Home:"home"};this.addFloatingActionButton=g;this.removeFloatingActionButton=h;this.setLeftPaneContent=e;this.removeLeftPaneContent=f;this.setLeftPaneVisibility=o;this.getConfiguration=k;}var s=new R();return s;},true);
sap.ui.predefine('sap/ushell/renderers/fiori2/Shell.controller',["sap/ui/Device","./AccessKeysHandler","./History","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ushell/services/AppConfiguration","sap/ushell/services/AppType","sap/ushell/utils","sap/ushell/utils/WindowUtils","sap/ushell/resources","sap/ushell/UserActivityLog","sap/ushell/EventHub","sap/ushell/Config","sap/ui/core/Component","sap/ui/core/routing/History","sap/ui/core/routing/HashChanger","sap/ui/core/mvc/Controller","sap/ushell/components/HeaderManager","sap/ushell/components/_HeaderManager/ControlManager","sap/ushell/bootstrap/SchedulingAgent","sap/ui/core/library","sap/ushell/performance/FesrEnhancer","sap/base/Log","sap/ui/thirdparty/jquery","sap/ui/performance/Measurement","sap/base/util/isPlainObject","sap/base/util/UriParameters","sap/ui/util/Storage","sap/m/InstanceManager","sap/ushell/services/Message","sap/ui/thirdparty/hasher","sap/ushell/renderers/fiori2/LogonFrameProvider"],function(D,A,H,a,b,c,u,W,r,U,E,C,d,f,g,h,j,k,S,l,F,L,q,M,m,n,o,I,p,s,t){"use strict";var v=l.routing.HistoryDirection;var w=true,P=false,x,y=a.getElementsModel(),z,B={embedded:0,newWindowThenEmbedded:1,newWindow:1,replace:0},N={embedded:"embedded",newWindowThenEmbedded:"newWindowThenEmbedded",newWindow:"newWindow",replace:"replace"},G={};F.init();return h.extend("sap.ushell.renderers.fiori2.Shell",{_aDoableObjects:[],onComponentTargetDisplay:function(e){var i=e.getParameters(),J=i.control,K=i.object;J.navTo("centerViewPort",K.getId(),"show");},onInit:function(){var e=this;var R=d.getOwnerComponentFor(this.getView()).getRouter();R.getTarget("home").attachDisplay(this.onComponentTargetDisplay);R.getTarget("appfinder").attachDisplay(this.onComponentTargetDisplay);R.getTarget("pages").attachDisplay(this.onComponentTargetDisplay);R.oHashChanger=g.getInstance();R.initialize(true);this.bEnableHashChange=true;w=true;var V=this.getView();var i=window.matchMedia("(min-width: 600px)"),J;var G=(V.getViewData()?V.getViewData().config:{})||{};a.parseStatefulContainerConfiguration(G.statefulApplicationContainer);var K=a.shellElements().model();j.init(G,K);this.oEndUserFeedbackConfiguration={showAnonymous:true,anonymousByDefault:true,showLegalAgreement:true,showCustomUIContent:true,feedbackDialogTitle:true,textAreaPlaceholder:true,customUIContent:undefined};this.initShellModel(G,K);var O=this.getView().updateShellAggregation;sap.ui.getCore().byId("shell-header").updateAggregation=O;sap.ui.getCore().byId("shell").updateAggregation=O;sap.ui.getCore().byId("right-floating-container").updateAggregation=O;sap.ui.getCore().byId("shell-split").updateAggregation=O;J=function(Y){C.emit("/core/shell/model/isPhoneWidth",!Y.matches);};if(i.addListener){i.addListener(J);J(i);}V.setModel(r.i18nModel,"i18n");sap.ui.getCore().getEventBus().subscribe("externalSearch",this.externalSearchTriggered,this);sap.ui.getCore().getEventBus().subscribe("sap.ushell","appOpened",this.onAppOpened,this);sap.ui.getCore().getEventBus().subscribe("allSearchFinished",this._logSearchActivity,this);this._setConfigurationToModel();this._aDoableObjects=this._registerAndCreateEventHubDoables();sap.ushell.Container.getService("AppLifeCycle");x.addHeaderEndItem(["meAreaHeaderButton"],false,["home","app","minimal","standalone","embedded","embedded-home","lean"],true);var Q=[];if(G){if(!G.moveContactSupportActionToShellHeader){Q.push("ContactSupportBtn");}if(!G.moveGiveFeedbackActionToShellHeader){Q.push("EndUserFeedbackBtn");}}this.history=new H();this.oViewPortContainer=sap.ui.getCore().byId("viewPortContainer");a.init(G.appState,this.oViewPortContainer,G.rootIntent,G.disableHomeAppCache,{ownerComponent:this.getOwnerComponent()},Q,G.cacheConfiguration);var T=function(Y){this.oShellNavigation=Y;this.oShellNavigation.registerExtraRouter(R);this.oShellNavigation.registerNavigationFilter(this._handleEmptyHash.bind(this));this.oShellNavigation.init(this.doHashChange.bind(this));this.oShellNavigation.registerNavigationFilter(this._disableSourceAppRouter.bind(this));this.oShellNavigation.registerNavigationFilter(this.handleDataLoss.bind(this));this.oShellNavigation.hashChanger.attachEvent("hashChanged",function(Z){if(window.hasher.disableBlueBoxHashChangeTrigger===true){return;}if(Z.mParameters&&e.oShellNavigation.hashChanger.isInnerAppNavigation(Z.mParameters.newHash,Z.mParameters.oldHash)){a.postMessageToIframeApp("sap.ushell.appRuntime","innerAppRouteChange",{oHash:Z.mParameters});}a.postMessageToIframeApp("sap.ushell.appRuntime","hashChange",{sHash:Z.mParameters.fullHash});});E.emit("ShellNavigationInitialized");}.bind(this);Promise.all([sap.ushell.Container.getServiceAsync("URLParsing"),sap.ushell.Container.getServiceAsync("URLShortening")]).then(function(Y){this.oURLParsing=Y[0];return sap.ushell.Container.getServiceAsync("ShellNavigation");}.bind(this)).then(T);sap.ushell.Container.setLogonFrameProvider(this._getLogonFrameProvider());A.init(z);window.onbeforeunload=function(){if(sap.ushell.Container&&sap.ushell.Container.getDirtyFlag()&&!(D.browser.name===D.browser.BROWSER.INTERNET_EXPLORER&&a.getCurrentApplication().container.getApplicationType()===sap.ushell.ApplicationType.NWBC.type)){if(!r.browserI18n){r.browserI18n=r.getTranslationModel(window.navigator.language).getResourceBundle();}return r.browserI18n.getText("dataLossExternalMessage");}return undefined;};if(C.last("/core/shell/model/contentDensity")){a.getAppMeta()._applyContentDensityClass();}D.media.attachHandler(this.handleNavMenuTitleVisibility,this,D.media.RANGESETS.SAP_STANDARD);this.initShellUIService();if(!G.disableSignOut&&(G.sessionTimeoutTileStopRefreshIntervalInMinutes>0||G.sessionTimeoutReminderInMinutes>0)){var X=20000;window.setTimeout(function(){e._createSessionHandler(G);},X);}this.oViewPortContainer.onfocusin=function(){A.bFocusOnShell=false;A.bFocusPassedToExternalHandlerFirstTime=false;};this.oViewPortContainer.onfocusout=function(){A.bFocusOnShell=true;A.bFocusPassedToExternalHandlerFirstTime=true;};},shellUpdateAggItem:function(i,e){return sap.ui.getCore().byId(e.getObject());},getViewPortContainer:function(){return sap.ui.getCore().byId("viewPortContainer");},_registerAndCreateEventHubDoables:function(){var e=[E.once("CenterViewPointContentRendered").do(this._loadCoreExt.bind(this)),E.once("PagesRuntimeRendered").do(this._loadCoreExt.bind(this)),E.once("AppRendered").do(this._loadCoreExtNonUI5.bind(this)),E.on("toggleContentDensity").do(this.toggleContentDensity.bind(this)),E.on("ShellFloatingContainerDockedIsResized").do(this._onResizeWithDocking.bind(this)),E.on("LaunchpadCustomRouterRouteMatched").do(this._centerViewPort.bind(this)),E.once("CoreResourcesComplementLoaded").do(this._onCoreResourcesComplementLoaded.bind(this)),E.once("loadRendererExtensions").do(this._loadRendererExtensionPlugins.bind(this)),E.once("loadUsageAnalytics").do(this._loadUsageAnalytics.bind(this)),E.once("loadWarmupPlugins").do(this._loadWarmupPlugins.bind(this)),E.once("loadTrackingActivitiesSetting").do(this._loadTrackingActivitiesSetting.bind(this)),E.on("centerViewPort").do(this._centerViewPort.bind(this))];return e;},initShellModel:function(G,e){x=y;x.init(G,e);z=this.getView().getViewData().shellModel;C.emit("/core/shell/model/personalization",C.last("/core/shell/enablePersonalization"));},initShellUIService:function(){a.initShellUIService({fnOnBackNavigationChange:this.onBackNavigationChange.bind(this)});if(G.enableOnlineStatus){sap.ui.require(["sap/ushell/ui5service/UserStatus"],function(e){this.oUserStatus=new e({scopeObject:this.getOwnerComponent(),scopeType:"component"});}.bind(this));}},onBackNavigationChange:function(e){a.setBackNavigationChanged(true);var i=e.getParameters().data,J=C.last("/core/shell/model/currentState");if(i){a.service().setNavigateBack(i);if(J.stateName==="minimal"||J.stateName==="standalone"||J.stateName==="embedded"){sap.ushell.Container.getRenderer("fiori2").showHeaderItem("backBtn",true);}}else{a.service().resetNavigateBack();}},toggleContentDensity:function(e){var i=e.contentDensity==="compact";a.getAppMeta()._applyContentDensityByPriority(i,true);},_handleEmptyHash:function(e){e=(typeof e==="string")?e:"";e=e.split("?")[0];if(e.length===0){var V=this.getView()?this.getView().getViewData():{};G=V.config||{};if(G.migrationConfig){return this.oShellNavigation.NavigationFilterStatus.Continue;}if(G.rootIntent){window.setTimeout(function(){window.hasher.setHash(G.rootIntent);},0);return this.oShellNavigation.NavigationFilterStatus.Abandon;}}return this.oShellNavigation.NavigationFilterStatus.Continue;},_setConfigurationToModel:function(){var V=this.getView().getViewData();if(V){G=V.config||{};}if(G){if(G.states){y.extendStates(G.states);j.extendStates(G.states);}if(G.changeEndUserFeedbackTitle!==undefined){this.oEndUserFeedbackConfiguration.feedbackDialogTitle=G.changeEndUserFeedbackTitle;}if(G.changeEndUserFeedbackPlaceholder!==undefined){this.oEndUserFeedbackConfiguration.textAreaPlaceholder=G.changeEndUserFeedbackPlaceholder;}if(G.showEndUserFeedbackAnonymousCheckbox!==undefined){this.oEndUserFeedbackConfiguration.showAnonymous=G.showEndUserFeedbackAnonymousCheckbox;}if(G.makeEndUserFeedbackAnonymousByDefault!==undefined){this.oEndUserFeedbackConfiguration.anonymousByDefault=G.makeEndUserFeedbackAnonymousByDefault;}if(G.showEndUserFeedbackLegalAgreement!==undefined){this.oEndUserFeedbackConfiguration.showLegalAgreement=G.showEndUserFeedbackLegalAgreement;}if(G.enableSetTheme!==undefined){z.setProperty("/setTheme",G.enableSetTheme);}z.setProperty("/contentDensity",G.enableContentDensity===undefined?true:G.enableContentDensity);if(G.migrationConfig!==undefined){z.setProperty("/migrationConfig",G.migrationConfig);}if(G.enableUserDefaultParameters!==undefined){z.setProperty("/userDefaultParameters",G.enableUserDefaultParameters);}if(G.disableHomeAppCache!==undefined){z.setProperty("/disableHomeAppCache",G.disableHomeAppCache);}z.setProperty("/enableHelp",C.last("/core/extension/enableHelp"));z.setProperty("/searchAvailable",(G.enableSearch!==false));}},_loadTrackingActivitiesSetting:function(e){this._getPersData({container:"flp.settings.FlpSettings",item:"userActivitesTracking"}).then(function(i){if(i===undefined){i=true;}z.setProperty("/enableTrackingActivity",i);E.emit("StepDone",e.stepName);}).catch(function(i){E.emit("StepFailed",e.stepName);L.error("Failed to ltracking activities state state from the personalization",i,"sap.ushell.components.flp.settings.FlpSettings");});},_getPreviousPageDirty:function(){return P;},_setPreviousPageDirty:function(e){P=e;},getModelConfiguration:function(){var V=this.getView().getViewData(),e,i;if(V){e=V.config||{};i=q.extend({},e);}delete i.applications;return i;},_getLogonFrameProvider:function(){return t;},onExit:function(){this._aDoableObjects.forEach(function(i){i.off();});sap.ui.getCore().getEventBus().unsubscribe("externalSearch",this.externalSearchTriggered,this);sap.ui.getCore().getEventBus().unsubscribe("allSearchFinished",this._logSearchActivity,this);sap.ui.getCore().getEventBus().unsubscribe("sap.ushell","appOpened",this.onAppOpened,this);D.media.detachHandler(this.handleNavMenuTitleVisibility,this,D.media.RANGESETS.SAP_STANDARD);if(this.oShellNavigation){this.oShellNavigation.hashChanger.destroy();}if(this.getView()&&this.getView().destroyDanglingControls){this.getView().destroyDanglingControls();}var e=sap.ui.getCore().byId("shell-header");if(e&&e.destroy){e.destroy();}j.destroy();k.destroy();U.deactivate();x.destroy();a.shellElements().clean();a.destroy();x=undefined;},_getCurrentAppRouter:function(){var e=sap.ushell.Container.getService("AppLifeCycle"),i=e&&e.getCurrentApplication&&e.getCurrentApplication(),J=i&&i.componentInstance;if(J){return J.getRouter();}return null;},_disableSourceAppRouter:function(e,i){if(!this.bEnableHashChange){return this.oShellNavigation.NavigationFilterStatus.Continue;}var J=this.oShellNavigation.hashChanger.isInnerAppNavigation(e,i);if(!J){var K=this._getCurrentAppRouter();if(K){K.stop();}}return this.oShellNavigation.NavigationFilterStatus.Continue;},_resumeAppRouterIgnoringCurrentHash:function(){var e=this._getCurrentAppRouter();if(e){e.initialize(true);}},handleDataLoss:function(e,i){if(!this.bEnableHashChange&&!this.bRedoNavigation){this.bEnableHashChange=true;return this.oShellNavigation.NavigationFilterStatus.Custom;}var J=sap.ushell.Container.getDirtyFlag();P=J;if(this.bRedoNavigation){this.bRedoNavigation=false;this.bEnableHashChange=true;this.bExplaceNavigation=false;return this.oShellNavigation.NavigationFilterStatus.Continue;}var K=this.oURLParsing.parseShellHash(e);var O=sap.ushell.Container.getRenderer()._isBuiltInIntent(K);var Q=K.params["sap-ushell-navmode"];var R=Q&&Q[0];if(!D.browser.msie&&!O&&(this.bExplaceNavigation||R==="explace"||R==="frameless")){this.bExplaceNavigation=false;return this.oShellNavigation.NavigationFilterStatus.Continue;}if(J&&D.browser.msie){if(this._handleDirtyStateUserConfirm()){return this.oShellNavigation.NavigationFilterStatus.Continue;}return this._restoreHashUsingAction(i,"undo");}if(J){Promise.all([this._waitForHash(i),sap.ushell.Container.getServiceAsync("NavTargetResolution")]).then(function(T){var V=T[1];if(O){if(this._handleDirtyStateUserConfirm()){this.bRedoNavigation=true;this._restoreHashUsingAction(e,"redo");}}else{var X="#"+e;V.resolveHashFragment(X).then(function(Y){if(Y.targetNavigationMode==="explace"||Y.targetNavigationMode==="frameless"){this.bExplaceNavigation=true;this.bRedoNavigation=true;this._restoreHashUsingAction(e,"redo");}else if(this._handleDirtyStateUserConfirm()){this.bRedoNavigation=true;this._restoreHashUsingAction(e,"redo");}}.bind(this)).catch(function(){this.bRedoNavigation=true;this._restoreHashUsingAction(e,"redo");}.bind(this));}}.bind(this));return this._restoreHashUsingAction(i,"undo");}return this.oShellNavigation.NavigationFilterStatus.Continue;},_waitForHash:function(e){var i="#"+e;return new Promise(function(J){var K=function(){var O=i===decodeURIComponent(window.location.hash);if(O){window.removeEventListener("hashchange",K);J();}};window.addEventListener("hashchange",K);});},_handleDirtyStateUserConfirm:function(){if(window.confirm(r.i18n.getText("dataLossInternalMessage"))){sap.ushell.Container.setDirtyFlag(false);a.postMessageToIframeApp("sap.ushell.appRuntime","setDirtyFlag",{bIsDirty:false});P=true;return true;}return false;},_restoreHashUsingAction:function(e,i){var J=this.oShellNavigation.wasHistoryEntryReplaced();var R=this._getRestoreHashStrategy(J,i);this._resumeAppRouterIgnoringCurrentHash();return this._restoreHash(R,e);},_getRestoreHashStrategy:function(e,i){if(e){return{strategy:"replaceHash",stepCount:0};}var J;var K=f.getInstance().getHistoryStateOffset();if(K===undefined||K>=0){K=1;}else if(K<0){K=-1;}if(i==="undo"){if(K<0){J="historyForward";}else{J="historyBack";}this.sLastUndoStrategy=J;}else{switch(this.sLastUndoStrategy){case"historyBack":J="historyForward";break;case"historyForward":J="historyBack";break;default:J="replaceHash";}}return{strategy:J,stepCount:1};},_restoreHash:function(R,e){var i={status:this.oShellNavigation.NavigationFilterStatus.Custom,hash:""};switch(R.strategy){case"historyBack":this.bEnableHashChange=false;this._windowHistoryBack(R.stepCount);break;case"historyForward":this.bEnableHashChange=false;this._windowHistoryForward(R.stepCount);break;case"replaceHash":this.bEnableHashChange=false;s.replaceHash(e);break;default:throw new Error("Cannot execute unknown navigation strategy");}return i;},_isColdStart:function(){var R=sap.ushell.Container.getRenderer("fiori2");var e=!R||!R.getCurrentCoreView();if(this.history.getHistoryLength()<=1&&e){return true;}this._isColdStart=function(){return false;};return false;},_setEnableHashChange:function(V){this.bEnableHashChange=V;},_logRecentActivity:function(R){if(C.last("/core/shell/model/enableTrackingActivity")){return b.addActivity(R);}return Promise.reject("Tracking is not enabled");},_logApplicationUsage:function(e){if(sap.ushell.Container){sap.ushell.Container.getServiceAsync("UserRecents").then(function(i){i.addAppUsage(e);});}},doHashChange:function(e,i,O,J,K){M.start("FLP:ShellController.doHashChange","doHashChange","FLP");E.emit("trackHashChange",e);var Q=sap.ui.getCore().byId("sapUshellDashboardPage");if(Q){Q.setBlocked(true);Q.setBusy(true);}return this._doHashChange(this,e,i,O,J,K).then(function(){M.end("FLP:ShellController.doHashChange");},function(R){M.end("FLP:ShellController.doHashChange");E.emit("doHashChangeError",Date.now());if(Q){Q.setBlocked(false);Q.setBusy(false);}});},_doHashChange:function(e,i,J,O,K,Q){this._wasHistoryEntryReplaced=this.oShellNavigation.wasHistoryEntryReplaced();this.oShellNavigation.resetHistoryEntryReplaced();var R,T,V;if(!this.bEnableHashChange){this.bEnableHashChange=true;return q.when();}if(Q){e.hashChangeFailure(e.history.getHistoryLength(),Q.message,null,"sap.ushell.renderers.fiori2.Shell.controller",false);return q.when();}if(I&&w){I.closeAllDialogs();I.closeAllPopovers();}w=true;T=e.history.getHistoryLength();V=e.fixShellHash(i);e.history.hashChange(V,O);e.currentAppBeforeNav=b.getCurrentApplication();return e._resolveHashFragment(V).then(function(X,Y){var Z=Y?Y.semanticObject+"-"+Y.action:"",G=e._getConfig(),$=!!(X&&X.componentHandle),_=X&&X.ui5ComponentName;X=e._calculateNavigationMode(Y,X);if(e._handleEarlyNavigation(V,J,X)){return;}if(G&&G.applications&&G.applications[Z]){X.applicationConfiguration=G.applications[Z];}R=a.getInMemoryInstance(Z,V,J,O);if(R.isInstanceSupported){e._initiateApplication(X,V,Y,T,J);return;}if($||!_){e._initiateApplication(X,V,Y,T,J);return;}a.destroy(R.appId,R.container);a.removeApplication(Z);b.setApplicationInInitMode();sap.ui.getCore().getEventBus().publish("ApplicationContainer","_prior.newUI5ComponentInstantion",{name:_});M.start("FLP:ShellController.UI5createComponent","UI5 createComponent","FLP");sap.ushell.Container.getServiceAsync("Ui5ComponentLoader").then(function(){a.createComponent(X,Y).done(function(){M.end("FLP:ShellController.UI5createComponent");e._initiateApplication(X,V,Y,T,J);}).fail(function(a1){var b1=r.i18n.getText("cannot_load_ui5_component_details",[V]),c1="Failed to load UI5 component for navigation intent "+V;b.setCurrentApplication(e.currentAppBeforeNav);e.hashChangeFailure(T,{title:r.i18n.getText("error"),message:r.i18n.getText("failed_to_open_ui5_component"),technicalMessage:c1},{info:b1,technicalMessage:a1.message+"\n"+a1.stack},"sap.ushell.renderers.fiori2.Shell.controller",false);});});},function(X){var Y=r.i18n.getText("cannot_resolve_navigation_target_details",[V]),Z="Failed to resolve navigation target: "+V+". This is most likely caused by an incorrect SAP Fiori launchpad content configuration or by missing role assignment.";e.hashChangeFailure(T,{title:r.i18n.getText("error"),message:r.i18n.getText("failed_to_open_app_missing_configuration_or_role_assignment"),technicalMessage:Z},{info:Y,fixedShellHash:V,technicalMessage:X},"sap.ushell.renderers.fiori2.Shell.controller",false);});},_handleEarlyNavigation:function(e,i,R){var J=R&&(u.isNativeWebGuiNavigation(R)||R.nativeNWBCNavigation),K;if(J&&this._openAppViaNWBC(R)){R.sFixedShellHash=e;this.logOpenAppAction(R,i);K=sap.ui.getCore().byId("sapUshellDashboardPage");if(K){K.setBlocked(false);K.setBusy(false);}return true;}var O=R&&R.navigationMode===N.newWindow;if(O){R.sFixedShellHash=e;this.logOpenAppAction(R,i);this._openAppInNewWindowAndRestore(R);K=sap.ui.getCore().byId("sapUshellDashboardPage");if(K){K.setBlocked(false);K.setBusy(false);}return true;}if(C.last("/core/shell/model/migrationConfig")){G.migrationConfig=false;this.getModel().setProperty("/migrationConfig",false);if(R&&e==="#"){G.rootIntent="";}else if(e==="#"){window.setTimeout(function(){window.hasher.setHash(G.rootIntent);},0);return true;}}return false;},_initiateApplication:function(R,e,i,O){M.start("FLP:ShellController._initiateApplication","_initiateApplication","FLP");var J=b.getMetadata(R),K=C.last("/core/extension/SupportTicket"),Q;if(J.title){window.document.title=J.title;}else{L.debug("Shell controller._initiateApplication: the title of the window is not changed because most probably the application was resolved with undefined");}if(K){window.setTimeout(function(){U.activate();},0);}try{Q=this.oShellNavigation.isInitialNavigation();this.navigate(i,e,J,R);}catch(T){if(T.stack){L.error("Application initialization (Intent: \n"+e+"\n failed due to an Exception:\n"+T.stack);}this.oShellNavigation.setIsInitialNavigation(Q);this.hashChangeFailure(O,T.name,T.message,J?J.title:"",false);}M.end("FLP:ShellController._initiateApplication");},_resolveHashFragment:function(e){M.start("FLP:ShellController._resolveHashFragment","_resolveHashFragment","FLP");var R,i,J=this.oURLParsing.parseShellHash(e),K=new q.Deferred(),G=this._getConfig();i=J&&J.params||{};if(J&&J.contextRaw&&J.contextRaw==="navResCtx"&&i&&i.additionalInformation&&(i.additionalInformation[0]||i.additionalInformation[0]==="")&&i.applicationType&&i.applicationType[0]&&i.url&&i.url[0]&&i.navigationMode&&(i.navigationMode[0]||i.additionalInformation[0]==="")){i=J.params||{};R={additionalInformation:i.additionalInformation[0],applicationType:i.applicationType[0],url:i.url[0],navigationMode:i.navigationMode[0]};if(i.title){R.text=i.title[0];}K.resolve(R,J);}else{if(window["sap-ushell-async-libs-promise-directstart"]){window["sap-ushell-async-libs-promise-directstart"].then(function(O){K.resolve(O.resolvedHashFragment,J);delete window["sap-ushell-async-libs-promise-directstart"];},function(O){K.reject(O);delete window["sap-ushell-async-libs-promise-directstart"];});return K.promise();}sap.ushell.Container.getService("NavTargetResolution").resolveHashFragment(e).done(function(R){b.setCurrentApplication(R);if(J&&(J.semanticObject+"-"+J.action)===G.rootIntent){R.navigationMode="embedded";}M.end("FLP:ShellController._resolveHashFragment");K.resolve(R,J);}).fail(function(O){K.reject(O);});}return K.promise();},_calculateNavigationMode:function(e,R){if(!R){return undefined;}var i=R.navigationMode;if(i===N.newWindowThenEmbedded){if(this._isColdStart()||(e.contextRaw&&e.contextRaw==="navResCtx")||f.getInstance().getDirection()===v.Backwards){R.navigationMode=N.embedded;}else{R.navigationMode=N.newWindow;if(!u.isNativeWebGuiNavigation(R)){R.url=this._getCurrentLocationHash();}}return R;}if(i===N.newWindow&&this._isColdStart()){if(this._hasAppCapabilitiesNavigationMode(R)&&R.appCapabilities.navigationMode===N.embedded){R.navigationMode=N.embedded;return R;}R.navigationMode=N.replace;return R;}if(i===N.newWindow&&this._hasAppCapabilitiesNavigationMode(R)&&R.appCapabilities.navigationMode===N.embedded){R.url=this._getCurrentLocationHash();}return R;},_hasAppCapabilitiesNavigationMode:function(R){return u.isPlainObject(R.appCapabilities)&&R.appCapabilities.hasOwnProperty("navigationMode");},_usesNavigationRedirect:function(e){if(!e){return new q.Deferred().reject().promise();}var i=this,J=e.getInstance({});if(J&&typeof J.navigationRedirect==="function"){var K=new q.Deferred();var O=J.navigationRedirect();if(O&&typeof O.then==="function"){O.then(function(Q){L.warning("Performing navigation redirect to hash "+Q);J.destroy();i.history.pop();sap.ushell.Container.getService("ShellNavigation").toExternal({target:{shellHash:Q}},undefined,false);K.resolve(true);},function(){K.reject();});return K.promise();}}return new q.Deferred().reject().promise();},navigate:function(e,i,J,R){M.start("FLP:ShellController.navigate","navigate","FLP");var K=(m(R)?R.navigationMode:null),O=this;if(K===null){if(this._isColdStart()){window.hasher.setHash("");return;}this.bEnableHashChange=false;this.history.pop();this._windowHistoryBack(1);return Promise.resolve();}R=this._calculateNavigationMode(e,R);K=(m(R)?R.navigationMode:null);if(K===N.embedded){if(!this._isColdStart()&&!this._wasHistoryEntryReplaced){this.oShellNavigation.setIsInitialNavigation(false);}var Q=this._usesNavigationRedirect(R.componentHandle),T=new Promise(function(V,X){Q.then(null,function(){O._handleEmbeddedNavMode(i,e,J,R).then(function(){E.emit("CloseFesrRecord",Date.now());V();});if(e&&e.contextRaw==="navResCtx"){L.error(" This path will no longer be supported in 1.40");O.bEnableHashChange=false;if(e&&e.params&&e.params.original_intent&&e.params.original_intent[0]){window.hasher.replaceHash(e.params.original_intent[0]);O.history._history[0]=e.params.original_intent[0];}}});M.end("FLP:ShellController.navigate");});return T;}if(K===N.replace){this.oShellNavigation.setIsInitialNavigation(false);this.bEnableHashChange=false;this._changeWindowLocation(R.url);return Promise.resolve();}if(K===N.newWindow){this._openAppInNewWindowAndRestore(R);return Promise.resolve();}this.hashChangeFailure(this.history.getHistoryLength(),"Navigation mode is not recognized",null,"sap.ushell.renderers.fiori2.Shell.controller",false);return Promise.resolve();},_openAppViaNWBC:function(R){try{var i=u.appendUserIdToUrl("sap-user",R.url);var J=u.appendSapShellParam(i);var K=u.getPrivateEpcm();var O=B[R.navigationMode];var Q;if(u.hasNavigationModeCapability()){Q=O||B[N.embedded];}sap.ui.getCore().getEventBus().publish("launchpad","appOpening",R);if(!K.doNavigate(J,Q)){return false;}sap.ui.getCore().getEventBus().publish("sap.ushell","appOpened",R);}catch(e){if(e.stack){L.error("Application initialization failed due to an Exception:\n"+e.stack);}this.hashChangeFailure(this.history.getHistoryLength(),e.name,e.message,R.text,false);return false;}this.bEnableHashChange=false;this._restorePreviousHashAfterOpenNewWindow(R,true);return true;},_restorePreviousHashAfterOpenNewWindow:function(R,O){this.history.pop();var V=R.componentHandle&&R.componentHandle.getInstance&&R.componentHandle.getInstance({});if(V){V.destroy();}this._resumeAppRouterIgnoringCurrentHash();if(this.oShellNavigation.isInitialNavigation()&&O){this.bEnableHashChange=true;sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(e){e.toExternal({target:{shellHash:"#"},writeHistory:false});});}else{this._windowHistoryBack(1);}b.setCurrentApplication(this.currentAppBeforeNav);E.emit("openedAppInNewWindow",Date.now());},_openAppInNewWindowAndRestore:function(R){this.bEnableHashChange=false;sap.ui.getCore().getEventBus().publish("launchpad","appOpening",R);this._openAppNewWindow(R.url);sap.ui.getCore().getEventBus().publish("sap.ushell","appOpened",R);this._restorePreviousHashAfterOpenNewWindow(R);},_handleEmbeddedNavMode:function(e,i,J,R){M.start("FLP:ShellController._handleEmbeddedNavMode","_handleEmbeddedNavMode","FLP");var G=this._getConfig(),K,O,Q,T;this.resetShellUIServiceHandlers();a.getAppMeta().setAppIcons(J);K="-"+i.semanticObject+"-"+i.action;Q=e==="#"||(G.rootIntent&&u.getBasicHash(G.rootIntent)===i.semanticObject+"-"+i.action);T=i?i.semanticObject+"-"+i.action:"";a.switchViewState(a.shellElements().calculateElementsState(Q?"home":"app",R.applicationType,G.appState,R.explicitNavMode),undefined,K);if(Q){a.getShellUIService().setBackNavigation();}O=a.handleControl(T,K,i,R,this.getWrappedApplicationWithMoreStrictnessInIntention.bind(this),e);if(this.currentAppBeforeNav){var V=a.getStatefulContainer(this.currentAppBeforeNav.applicationType);if(V){V.onApplicationOpened(R.applicationType);}}M.end("FLP:ShellController._handleEmbeddedNavMode");return O;},_centerViewPort:function(){this.oViewPortContainer.switchState("Center");},_isShellHomeIntent:function(i){return i==="#"||i===G.rootIntent;},getWrappedApplicationWithMoreStrictnessInIntention:function(i,e,J,R,K,O,Q){var T,V=this;window.setTimeout(function(){window.setTimeout(function(){var X;if(C.last("/core/shell/model/currentState/stateName")==="app"){X="shellAppTitle";}A.sendFocusBackToShell(X);window.setTimeout(function(){V.readNavigationEnd();},500);},100);sap.ui.getCore().getEventBus().publish("launchpad","appOpening",R);L.info("app is being opened");},0);if(G.applications){R.applicationConfiguration=G.applications[i];}T=a.getAppContainer(K,R,this._isColdStart(),J,Q);R.sFixedShellHash=Q;a.publishNavigationStateEvents(T,R,this.onAppAfterRendering.bind(this,R));T.addStyleClass("sapUshellApplicationPage");if(!O){T.addStyleClass("sapUShellApplicationContainerLimitedWidth");}if(this._isDock()&&window.matchMedia("(min-width: 106.4rem)").matches){T.addStyleClass("sapUShellDockingContainer");T.removeStyleClass("sapUShellApplicationContainerLimitedWidth");}else if(this._isDock()){T.removeStyleClass("sapUShellApplicationContainerLimitedWidth");}T.toggleStyleClass("sapUshellDefaultBackground",!e.hideLightBackground);a.getAppMeta()._applyContentDensityByPriority();a.addControl(T);M.end("FLP:ShellController.getWrappedApplication");return T;},resetShellUIServiceHandlers:function(){a.getAppMeta().resetShellUIServiceHandlers();a.setBackNavigationChanged(false);},onAppAfterRendering:function(e){var i=a.getShellUIService();window.setTimeout(function(){sap.ui.getCore().getEventBus().publish("sap.ushell","appOpened",e);L.info("app was opened");},0);var J=a._publicEventDataFromResolutionResult(e);E.emit("AppRendered",J,true);sap.ushell.renderers.fiori2.utils.publishExternalEvent("appOpened",J);u.setPerformanceMark("FLP.appOpened");if(i){a.initAppMetaParams();}x.updateStateProperty("application/icon",a.getAppMeta().getAppIcon(),true);x.updateStateProperty("application/showNavMenuTitle",this.bNavMenuTitleVisible,true);},_saveHomePageComponent:function(){if(this.oHomeApp){return;}var e=this,i="sap.ushell",J=function(K,O,Q){e.oHomeApp=Q.component;sap.ui.getCore().getEventBus().unsubscribe(i,"appComponentLoaded",J);};sap.ui.getCore().getEventBus().subscribe(i,"appComponentLoaded",J);},hashChangeFailure:function(i,e,J,K,O){var Q=sap.ui.getCore().byId("sapUshellDashboardPage");if(Q){Q.setBlocked(false);Q.setBusy(false);}if(u.isPlainObject(e)){this.reportError(e.technicalMessage,J.technicalMessage,K);sap.ushell.Container.getService("Message").show(p.Type.ERROR,e.message,{title:e.title,details:J});}else{this.reportError(e,J,K);this.delayedMessageError(r.i18n.getText("fail_to_start_app_try_later"));}w=false;this._resumeAppRouterIgnoringCurrentHash();if(i===0){window.hasher.setHash("");}else if((new n(window.location.href)).get("bFallbackToShellHome")){window.hasher.setHash("");}else{this.bEnableHashChange=O;sap.ushell.Container.setDirtyFlag(P);a.postMessageToIframeApp("sap.ushell.appRuntime","setDirtyFlag",{bIsDirty:P});this._windowHistoryBack(1);}},reportError:function(e,i,J){L.error(e,i,J);},delayedMessageError:function(e){window.setTimeout(function(){if(sap.ushell.Container!==undefined){sap.ushell.Container.getService("Message").error(e);}},0);},fixShellHash:function(e){if(!e){e="#";}else if(e.charAt(0)!=="#"){e="#"+e;}return e;},_openAppNewWindow:function(e){if(e.trim().indexOf("sap-nwbc://")===0&&(D.browser.edge||D.browser.msie)){window.location.href=e;}else{var i=W.openURL(e);if(!i&&(!(D.browser.msie||D.browser.edge)&&!this._checkWindowLocationSearch("workzone-mobile-app=true"))){var J=r.i18n.getText("fail_to_start_app_popup_blocker",[window.location.hostname]);this.delayedMessageError(J);}}},_checkWindowLocationSearch:function(T){return window.location.search.indexOf(T)>-1;},_windowHistoryBack:function(i){window.history.go(-1*i);},_windowHistoryForward:function(i){window.history.go(i);},_changeWindowLocation:function(e){window.location.href=e;},_toggleMenu:function(V){var e=sap.ui.getCore().byId("menuBarComponentContainer");var i=e&&e.getComponentInstance&&e.getComponentInstance();if(i&&i.setVisible){i.setVisible(V);}},onAppOpened:function(e,i,R){if(R&&R.navigationMode!==N.newWindow){this._toggleMenu(false);}var J=this.oShellNavigation.hashChanger.getAppHash(),K=J?"&/"+J:null;this.logOpenAppAction(R,K);},externalSearchTriggered:function(e,i,J){C.emit("/core/shell/model/searchTerm",J.searchTerm);J.query=J.searchTerm;},onBeforeNavigate:function(e){var T=e.getParameter("to"),O=this.getOwnerComponent(),i=O.byId("Shell-home-component-container"),J=O.byId("pages-component-container"),K=T===i||T===J;this._toggleMenu(K);},onAfterNavigate:function(e){var T=e.mParameters?e.mParameters.toId:undefined;var i=sap.ui.getCore().byId("sapUshellDashboardPage");if(i){i.setBlocked(false);i.setBusy(false);}a.onAfterNavigate(e.getParameter("fromId"),e.getParameter("from"),T,e.getParameter("to"));sap.ui.getCore().getEventBus().publish("sap.ushell","navigated",{});},logOpenAppAction:function(R,e){var i=C.last("/core/shell/enableRecentActivity")&&C.last("/core/shell/enableRecentActivityLogging");if(!i){return;}var J={};var K=b.getMetadata(R);var O=R.sFixedShellHash;var Q=O;if(e){Q+=e;}J.title=K.title;J.appType=c.APP;J.url=Q;var T=this.oURLParsing.parseShellHash(O);if(T){J.appId="#"+this.oURLParsing.constructShellHash({semanticObject:T.semanticObject,action:T.action});}else{J.appId=O;}if(O&&O.indexOf("#Action-search")===-1){window.setTimeout(function(){this._logRecentActivity(J);}.bind(this),1500);}},_logSearchActivity:function(){if(C.last("/core/shell/enableRecentActivity")&&C.last("/core/shell/enableRecentActivityLogging")){var T="";try{T=sap.ui.getCore().byId("searchFieldInShell-input").getModel().getLastSearchTerm();}catch(e){L.error("Shell: last search term is not available to log a recent activity");}this._logRecentActivity({appId:"#Action-search",appType:c.SEARCH,title:T,url:"#"+window.hasher.getHash()});}},readNavigationEnd:function(){var e=document.getElementById("sapUshellLoadingAccessibilityHelper-loadingComplete");if(e){e.setAttribute("aria-live","polite");e.innerHTML=r.i18n.getText("loadingComplete");window.setTimeout(function(){e.setAttribute("aria-live","off");e.innerHTML="";},0);}},handleNavMenuTitleVisibility:function(e){this.bNavMenuTitleVisible=false;if(e.name!=="Desktop"){this.bNavMenuTitleVisible=true;}x.updateStateProperty("application/showNavMenuTitle",this.bNavMenuTitleVisible,true);},_loadCoreExtNonUI5:function(e){if(e&&e.applicationType!=="SAPUI5"){this._loadCoreExt();}},_loadUsageAnalytics:function(e){sap.ushell.Container.getServiceAsync("UsageAnalytics").then(function(i){i.init(r.i18n.getText("usageAnalytics"),r.i18n.getText("i_agree"),r.i18n.getText("i_disagree"),r.i18n.getText("remind_me_later"));E.emit("StepDone",e.stepName);},function(){E.emit("StepFailed",e.stepName);});},_onCoreResourcesComplementLoaded:function(){u.setPerformanceMark("SchedulingAgent-StartOfFlow");var V=this.getView();if(V){V.createPostCoreExtControls();}S._initialize();E.emit("startScheduler");},_loadRendererExtensionPlugins:function(e){var i=new n(window.location.href),J=i.get("sap-ushell-xx-pluginmode")==="delayed";function K(O){function Q(){E.emit("StepDone",e.stepName);}function R(){O.loadPlugins("RendererExtensions").always(Q);}if(!G.inHeaderLessOpt){if(J){window.setTimeout(R,5000);}else{R();}}else{Q();}}sap.ushell.Container.getServiceAsync("PluginManager").then(K.bind(this));},_loadWarmupPlugins:function(e){sap.ushell.Container.getService("PluginManager").loadPlugins("AppWarmup").always(function(){L.debug("WARMUP plugins loaded",null,"sap.ushell.renderers.fiori2.Shell");E.emit("StepDone",e.stepName);u.setPerformanceMark("SchedulingAgent-EndOfFlow");u.setPerformanceMeasure("SchedulingAgentTotalTime","SchedulingAgent-StartOfFlow","SchedulingAgent-EndOfFlow");});},_loadCoreExt:function(){M.end("FLP:Container.InitLoading");sap.ushell.Container.getServiceAsync("Ui5ComponentLoader").then(function(){E.emit("loadCoreResourcesComplement");});},getCurrentViewportState:function(){return C.last("/core/shell/model/currentViewPortState");},makeEndUserFeedbackAnonymousByDefault:function(e){this.oEndUserFeedbackConfiguration.anonymousByDefault=e;},showEndUserFeedbackLegalAgreement:function(e){this.oEndUserFeedbackConfiguration.showLegalAgreement=e;},_activateFloatingUIActions:function(i){if(i<417){this.oFloatingUIActions.disable();}else{this.oFloatingUIActions.enable();}},setFloatingContainerDragSelector:function(e){q(e).addClass("sapUshellShellFloatingContainerSelector");sap.ui.require(["sap/ushell/UIActions"],function(i){if(!this.oFloatingUIActions){this.oFloatingUIActions=new i({containerSelector:".sapUiBody",wrapperSelector:".sapUshellShellFloatingContainerWrapper",draggableSelector:".sapUshellShellFloatingContainerWrapper",rootSelector:".sapUiBody",cloneClass:"sapUshellFloatingContainer-clone",dragCallback:this._handleFloatingContainerUIStart.bind(this),endCallback:this._handleFloatingContainerDrop.bind(this),moveTolerance:3,onDragStartUIHandler:this._onDragStartUI.bind(this),onDragEndUIHandler:this._setFloatingContainerHeight.bind(this),dragAndScrollCallback:this._doDock.bind(this),switchModeDelay:1000,isLayoutEngine:false,isTouch:false,elementToCapture:e,defaultMouseMoveHandler:function(){},debug:q.sap.debug()});}else{this.oFloatingUIActions.elementsToCapture=q(e);}this._activateFloatingUIActions(q(window).width());var J;q(window).bind("resize",function(){clearTimeout(J);J=window.setTimeout(this._activateFloatingUIActions(q(window).width()),300);}.bind(this));}.bind(this));},_doDock:function(e){M.start("FLP:Shell.controller._doDock","dragging co-pilot element","FLP");var i=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD);if(i.name==="Desktop"){var J=q(window).width();if(e){e.docked={};var K=e.docked;if(e.moveX>=J-64){K.dockPos="right";K.setIsDockingAreaOpen=true;this._openDockingArea(e);}else if(e.moveX<64){K.dockPos="left";K.setIsDockingAreaOpen=true;this._openDockingArea(e);}else{if(this._isDockingAreaOpen()){this._closeDockingArea(e);}if(q("#canvas").hasClass("sapUshellContainerDocked")){this._handleCloseCanvas(e);}}}}M.end("FLP:Shell.controller._doDock");},_finishDoDock:function(e){this._openDockingArea(false);var i=new o(o.Type.local,"com.sap.ushell.adapters.local.CopilotLastState");i.put("lastState","docked:"+e.dockPos);this._handleOpenCanvas(e);var J=q("#sapUshellFloatingContainerWrapper");J.css("height","100%");q("#shell-floatingContainer").addClass("sapUshellShellFloatingContainerFullHeight");sap.ui.getCore().getEventBus().publish("launchpad","shellFloatingContainerIsDocked");},_onResizeWithDocking:function(){this.handleNavMenuTitleVisibility(D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD));window.setTimeout(function(){sap.ui.getCore().getEventBus().publish("launchpad","appFinderWithDocking");},300);},_onDragStartUI:function(e){M.start("FLP:Shell.controller._onDragStartUI","start drag","FLP");if(this._isDock()){var i=new o(o.Type.local,"com.sap.ushell.adapters.local.CopilotLastState");i.put("lastState","floating");q("#sapUshellFloatingContainerWrapper").removeClass("sapUshellContainerDocked");q(".sapUshellShellFloatingContainerFullHeight").removeClass("sapUshellShellFloatingContainerFullHeight");sap.ui.getCore().getEventBus().publish("launchpad","shellFloatingContainerIsUnDocked");q("#sapUshellFloatingContainerWrapper").removeClass("sapUshellContainerDockedMinimizeCoPilot sapUshellContainerDockedExtendCoPilot");q("#sapUshellFloatingContainerWrapper").addClass("sapUshellContainerDockedMinimizeCoPilot");q(q(".sapUshellContainerDockedMinimizeCoPilot")).on("webkitAnimationEnd oanimationend msAnimationEnd animationend",this._handleAnimations(false));this._handleCloseCanvas(e);}M.end("FLP:Shell.controller._onDragStartUI");},_handleAnimations:function(i){var e="sapUshellContainerDockedLaunchpad";var J=q("#sapUshellFloatingContainerWrapper");if(i){q("#canvas, #shell-header").addClass(e);J.addClass("sapUshellContainerDockedExtendCoPilot");this._onResizeWithDocking();}else{q("#sapUshellFloatingContainerWrapper").addClass("sapUshellContainerDockedExtendCoPilot");}},_openDockingArea:function(e){var i=e?e.docked:false;var J=i?i.setIsDockingAreaOpen:false;if(J&&q("#DockinaAreaDiv").length==0){var K=sap.ui.getCore().getConfiguration().getRTL();if((i.dockPos==="right"&&e.clone&&!K)||(i.dockPos==="left"&&e.clone&&K)){q("<div id=\"DockinaAreaDiv\"  class=\"sapUshellShellDisplayDockingAreaRight\">").appendTo(e.clone.parentElement);}else if((i.dockPos==="left"&&e.clone&&!K)||(i.dockPos==="right"&&e.clone&&K)){q("<div id=\"DockinaAreaDiv\"  class=\"sapUshellShellDisplayDockingAreaLeft\">").appendTo(e.clone.parentElement);}e.clone.oDockedProp={};e.clone.oDockedProp.dockPos=i.dockPos;}else if(!J){this._closeDockingArea();}},_closeDockingArea:function(){window.setTimeout(function(){q(".sapUshellShellDisplayDockingAreaRight").remove();q(".sapUshellShellDisplayDockingAreaLeft").remove();},150);},_isDock:function(){return q(".sapUshellContainerDocked").size()!==0;},_isDockingAreaOpen:function(){return q(".sapUshellShellDisplayDockingAreaRight").size()!==0||q(".sapUshellShellDisplayDockingAreaLeft").size()!==0;},_handleOpenCanvas:function(e){var i=q("#canvas");var J=q(".sapUshellShellHead");var K=sap.ui.getCore().getConfiguration().getRTL();if((e.dockPos==="right"&&!K)||(e.dockPos==="left"&&K)){i.addClass("sapUshellContainer-Narrow-Right sapUshellContainerDocked ");J.addClass("sapUshellHead-Narrow-Right sapUshellContainerDocked");}if((e.dockPos==="left"&&!K)||(e.dockPos==="right"&&K)){i.addClass("sapUshellContainer-Narrow-Left sapUshellContainerDocked ");J.addClass("sapUshellHead-Narrow-Left sapUshellContainerDocked");}var V=sap.ui.getCore().byId("viewPortContainer");if(V){V._handleSizeChange();}},_handleCloseCanvas:function(e){var i=q("#canvas");var J=q(".sapUshellShellHead");if(e){e.docked.setIsDockingAreaOpen=false;}if(i.hasClass("sapUshellContainer-Narrow-Right")){i.removeClass("sapUshellContainer-Narrow-Right sapUshellContainerDocked sapUshellMoveCanvasRight");J.removeClass("sapUshellHead-Narrow-Right sapUshellContainerDocked");this._openDockingArea(e);this._setFloatingContainerHeight();}if(i.hasClass("sapUshellContainer-Narrow-Left")){i.removeClass("sapUshellContainer-Narrow-Left sapUshellContainerDocked sapUshellMoveCanvasLeft");J.removeClass("sapUshellHead-Narrow-Left sapUshellContainerDocked");this._openDockingArea(e);this._setFloatingContainerHeight();}this._onResizeWithDocking();var V=sap.ui.getCore().byId("viewPortContainer");if(V){V._handleSizeChange();}},_setFloatingContainerHeight:function(e){var i=q(window).width();var J=q("#sapUshellFloatingContainerWrapper");if(this._isDock()){if(e&&(e.clientX>=i-64||e.clientX<64)){J.addClass(" sapUshellContainerDocked");J.addClass("sapUshellContainerDockedMinimizeCoPilot");q(J).on("webkitAnimationEnd oanimationend msAnimationEnd animationend",this._handleAnimations(true));}}else if(!this._isDock()){q("#sapUshellFloatingContainerWrapper").removeClass("sapUshellContainerDockedMinimizeCoPilot sapUshellContainerDockedExtendCoPilot");}},_handleFloatingContainerDrop:function(e,i,J){M.start("FLP:Shell.controller._handleFloatingContainerDrop","drop floating container","FLP");var K=i.firstChild?sap.ui.getCore().byId(i.firstChild.id):undefined,O=new o(o.Type.local,"com.sap.ushell.adapters.local.FloatingContainer"),Q=q(window).width(),R=q(window).height(),T=J.deltaX/Q,V=J.deltaY/R,X=i.style.visibility,Y=i.style.display,Z=parseFloat(i.style.left.replace("%","")),$=parseFloat(i.style.top.replace("%",""));i.style.visibility="hidden";i.style.display="block";if(typeof(Z)==="number"){T=Z+100*J.deltaX/Q;}if(typeof($)==="number"){V=$+100*J.deltaY/R;}if(this._isDockingAreaOpen()){V=0;}i.setAttribute("style","left:"+T+"%;top:"+V+"%;position:absolute;");i.visibility=X;i.display=Y;O.put("floatingContainerStyle",i.getAttribute("style"));if(K){K.handleDrop();if(!!J.clone.oDockedProp&&this._isDockingAreaOpen()){this._finishDoDock(J.clone.oDockedProp);}}M.end("FLP:Shell.controller.handleFloatingContainerDrop");},_handleFloatingContainerUIStart:function(i,J){M.start("FLP:Shell.controller._handleFloatingContainerUIStart","starts dragging floating container","FLP");var K=J;K.style.display="none";if(window.getSelection){var O=window.getSelection();try{O.removeAllRanges();}catch(e){}}M.end("FLP:Shell.controller._handleFloatingContainerUIStart");},getFloatingContainerState:function(){var e=new o(o.Type.local,"com.sap.ushell.adapters.local.CopilotLastState");var i="floating";if(e!=null){i=e.get("lastState");if(i==null){i="floating";}}return i;},setFloatingContainerVisibility:function(V){var e=this.getFloatingContainerState();if(e){if(e=="floating"){this.getView().getOUnifiedShell().setFloatingContainerVisible(V);}else if(e.indexOf("docked")!=-1){var i=sap.ui.getCore().byId("viewPortContainer");if(V==true){var J=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD);if(J.name=="Desktop"){var K=q("#sapUshellFloatingContainerWrapper");K.addClass("sapUshellContainerDocked");q("#canvas, .sapUshellShellHead").addClass("sapUshellContainerDocked");K.css("height","100%");sap.ui.getCore().byId("shell-floatingContainer").addStyleClass("sapUshellShellFloatingContainerFullHeight");if(i){i._handleSizeChange();}if(sap.ui.getCore().getConfiguration().getRTL()){if(e.indexOf("right")!=-1){q("#canvas").addClass("sapUshellContainer-Narrow-Left");q(".sapUshellShellHead").addClass("sapUshellHead-Narrow-Left");this._handleAnimations(true);}else{q("#canvas").addClass("sapUshellContainer-Narrow-Right");q(".sapUshellShellHead").addClass("sapUshellHead-Narrow-Right");this._handleAnimations(true);}}else if(e.indexOf("right")!=-1){q("#canvas").addClass("sapUshellContainer-Narrow-Right");q(".sapUshellShellHead").addClass("sapUshellHead-Narrow-Right");this._handleAnimations(true);}else{q("#canvas").addClass("sapUshellContainer-Narrow-Left");q(".sapUshellShellHead").addClass("sapUshellHead-Narrow-Left");this._handleAnimations(true);}window.setTimeout(function(){this.getView().getOUnifiedShell().setFloatingContainerVisible(V);}.bind(this),400);}else{new o(o.Type.local,"com.sap.ushell.adapters.local.CopilotLastState").put("lastState","floating");this.getView().getOUnifiedShell().setFloatingContainerVisible(V);}}else{this._handleAnimations(false);if(i){i._handleSizeChange();}window.setTimeout(function(){this.getView().getOUnifiedShell().setFloatingContainerVisible(V);}.bind(this),400);q("#canvas, .sapUshellShellHead").removeClass("sapUshellContainerDocked sapUshellContainer-Narrow-Right sapUshellContainer-Narrow-Left");}q("#sapUshellFloatingContainerWrapper").removeClass("sapUshellContainerDockedMinimizeCoPilot sapUshellContainerDockedExtendCoPilot");this._onResizeWithDocking();if(i){i._handleSizeChange();}}}},getFloatingContainerVisibility:function(){return this.getView().getOUnifiedShell().getFloatingContainerVisible();},setFloatingContainerContent:function(e,i,J,K){x.setFloatingContainerContent(e,i,J,K);},getRightFloatingContainerVisibility:function(){var R=this.getView().getOUnifiedShell().getRightFloatingContainer(),e=R&&R.getVisible();return e;},setHeaderTitle:function(T){j.updateStates({propertyName:"title",value:T||"",aStates:["home","app"],bCurrentState:false,bDoNotPropagate:false});},addEndUserFeedbackCustomUI:function(e,i){if(e){this.oEndUserFeedbackConfiguration.customUIContent=e;}if(i===false){this.oEndUserFeedbackConfiguration.showCustomUIContent=i;}},setFooter:function(e){var i=this.getView().getOUnifiedShell();if(typeof e!=="object"||!e.getId){throw new Error("oFooter value is invalid");}if(i.getFooter()!==null){q.sap.log.warning("You can only set one footer. Replacing existing footer: "+i.getFooter().getId()+", with the new footer: "+e.getId()+".");}i.setFooter(e);},removeFooter:function(){this.getView().getOUnifiedShell().setFooter(null);},addUserPreferencesEntry:function(e){this._validateUserPrefEntryConfiguration(e);this._updateUserPrefModel(e);},addUserProfilingEntry:function(e){this._validateUserPrefEntryConfiguration(e);this._updateProfilingModel(e);},_validateUserPrefEntryConfiguration:function(e){if((!e)||(typeof e!=="object")){throw new Error("object oConfig was not provided");}if(!e.title){throw new Error("title was not provided");}if(!e.value){throw new Error("value was not provided");}if(typeof e.entryHelpID!=="undefined"){if(typeof e.entryHelpID!=="string"){throw new Error("entryHelpID type is invalid");}else if(e.entryHelpID===""){throw new Error("entryHelpID type is invalid");}}if(e.title&&typeof e.title!=="string"){throw new Error("title type is invalid");}if(typeof e.value!=="function"&&typeof e.value!=="string"&&typeof e.value!=="number"){throw new Error("value type is invalid");}if(e.onSave&&typeof e.onSave!=="function"){throw new Error("onSave type is invalid");}if(e.content&&typeof e.content!=="function"){throw new Error("content type is invalid");}if(e.onCancel&&typeof e.onCancel!=="function"){throw new Error("onCancel type is invalid");}},_createSessionHandler:function(G){var e=this;sap.ui.require(["sap/ushell/SessionHandler"],function(i){e.oSessionHandler=new i(a);e.oSessionHandler.init({sessionTimeoutReminderInMinutes:G.sessionTimeoutReminderInMinutes,sessionTimeoutIntervalInMinutes:G.sessionTimeoutIntervalInMinutes,sessionTimeoutTileStopRefreshIntervalInMinutes:G.sessionTimeoutTileStopRefreshIntervalInMinutes,enableAutomaticSignout:G.enableAutomaticSignout});});},_getSessionHandler:function(){return this.oSessionHandler;},_navBack:function(){this.setMeAreaSelected(false);a.service().navigateBack();},_updateUserPrefModel:function(e){var i=this._getModelEntryFromEntryObject(e),J=C.last("/core/userPreferences/entries");J.push(i);J=this._reorderUserPrefEntries(J);C.emit("/core/userPreferences/entries",J);},_updateProfilingModel:function(e){var i=this._getModelEntryFromEntryObject(e),J=C.last("/core/userPreferences/profiling")||[];J.push(i);C.emit("/core/userPreferences/profiling",J);},_getModelEntryFromEntryObject:function(e){return{entryHelpID:e.entryHelpID,title:e.title,valueArgument:e.value,valueResult:null,onSave:e.onSave,onCancel:e.onCancel,contentFunc:e.content,contentResult:null,icon:e.icon,provideEmptyWrapper:e.provideEmptyWrapper};},_reorderUserPrefEntries:function(e){var J=[],O=["userAccountEntry","themes","homepageEntry","spacesEntry","userActivitiesEntry","userProfiling","language","notificationsEntry","userDefaultEntry"],K,Q={};for(var i=e.length-1;i>=0;i--){if(O.indexOf(e[i].id)!==-1){K=e.splice(i,1)[0];Q[K.id]=K;}}O.forEach(function(R){var T=Q[R];if(T){J.push(T);}});return J.concat(e);},getModel:function(){return z;},_getConfig:function(){return G||{};},_getPersData:function(e){var i=d.getOwnerComponentFor(this.getView());return new Promise(function(J,K){sap.ushell.Container.getServiceAsync("Personalization").then(function(O){var Q={keyCategory:O.constants.keyCategory.FIXED_KEY,writeFrequency:O.constants.writeFrequency.LOW,clientStorageAllowed:true};var R=O.getPersonalizer(e,Q,i);R.getPersData().then(J).fail(K);});});},_getCurrentLocationHash:function(){return window.location.hash;},setMeAreaSelected:function(e){E.emit("showMeArea",e);},getMeAreaSelected:function(){return C.last("/core/shell/model/currentViewPortState")==="LeftCenter";},setNotificationsSelected:function(e){E.emit("showNotifications",e);},getNotificationsSelected:function(){return C.last("/core/shell/model/currentViewPortState")==="RightCenter";}});});
sap.ui.require.preload({
	"sap/ushell/bootstrap/_SchedulingAgent/LoadingConfiguration.json":'{"OrderOfLoadingBlocks":["AfterCoreExtLight","FLPComponents","FLPPlugins","WarmUpPlugins"],"LoadingBlocks":{"AfterCoreExtLight":{"LoadingSteps":[{"LoadingStep":"StartScheduler","canBeLoadedAsync":false},{"LoadingStep":"MessagePopoverInit","canBeLoadedAsync":true},{"LoadingStep":"UsageAnalytics","canBeLoadedAsync":true},{"LoadingStep":"MenuBar","canBeLoadedAsync":true}],"maxWaitInMs":0},"FLPComponents":{"LoadingSteps":[{"LoadingStep":"ConditionalWaitForAppLoading","canBeLoadedAsync":false},{"LoadingStep":"PostLoadingHeaderEnhancement","canBeLoadedAsync":true},{"LoadingStep":"TrackingActivitiesSetting","canBeLoadedAsync":true},{"LoadingStep":"MeArea","canBeLoadedAsync":false},{"LoadingStep":"UserImage","canBeLoadedAsync":false},{"LoadingStep":"Notifications","canBeLoadedAsync":false},{"LoadingStep":"Search","canBeLoadedAsync":false},{"LoadingStep":"ProductSwitch","canBeLoadedAsync":false},{"LoadingStep":"UserSettings","canBeLoadedAsync":false}],"maxWaitInMs":0},"FLPPlugins":{"LoadingSteps":[{"LoadingStep":"LoadPlugins","canBeLoadedAsync":true},{"LoadingStep":"FirstSegmentCompleteLoaded","canBeLoadedAsync":false}],"maxWaitInMs":0},"WarmUpPlugins":{"LoadingSteps":[{"LoadingStep":"WarmupPlugins","canBeLoadedAsync":true}],"maxWaitInMs":0}}}',
	"sap/ushell/bootstrap/_SchedulingAgent/StepConfiguration.json":'{"StartScheduler":{"loadingMode":"continueOnEvent","continueOnEvent":{"eventName":"startScheduler"},"userCanTrigger":false,"canBeInterrupted":false},"LoadPlugins":{"loadingMode":"byEvent","byEvent":{"eventName":"loadRendererExtensions","eventData":""},"Dependencies":[]},"MessagePopoverInit":{"loadingMode":"byEvent","byEvent":{"eventName":"initMessagePopover","eventData":""},"Dependencies":[]},"TrackingActivitiesSetting":{"loadingMode":"byEvent","byEvent":{"eventName":"loadTrackingActivitiesSetting","eventData":""},"Dependencies":[]},"UsageAnalytics":{"loadingMode":"byEvent","byEvent":{"eventName":"loadUsageAnalytics","eventData":""},"Dependencies":[]},"MenuBar":{"loadingMode":"byComponentCreate","byComponentCreate":{"enabled":true,"ui5ComponentOptions":{"name":"sap.ushell.components.shell.MenuBar","manifest":true},"url":"sap/ushell/components/shell/MenuBar"},"configSwitch":[{"path":"/core/menu/enabled","assertionValue":true}],"userCanTrigger":false,"canBeInterrupted":false},"Notifications":{"loadingMode":"byComponentCreate","excludedFLPStates":["lean","lean-home"],"byComponentCreate":{"enabled":true,"ui5ComponentOptions":{"name":"sap.ushell.components.shell.Notifications","manifest":false},"url":"sap/ushell/components/shell/Notifications"},"configSwitch":[{"path":"/core/shell/model/enableNotifications","assertionValue":true}],"userCanTrigger":false,"canBeInterrupted":false},"PostLoadingHeaderEnhancement":{"loadingMode":"byComponentCreate","byComponentCreate":{"enabled":true,"ui5ComponentOptions":{"name":"sap.ushell.components.shell.PostLoadingHeaderEnhancement","manifest":false},"url":"sap/ushell/components/shell/PostLoadingHeaderEnhancement"},"userCanTrigger":false,"canBeInterrupted":false},"MeArea":{"loadingMode":"byComponentCreate","byComponentCreate":{"enabled":true,"ui5ComponentOptions":{"name":"sap.ushell.components.shell.MeArea","manifest":false},"url":"sap/ushell/components/shell/MeArea"},"Dependencies":["TrackingActivitiesSetting"],"userCanTrigger":false,"canBeInterrupted":false},"ProductSwitch":{"loadingMode":"byComponentCreate","byComponentCreate":{"enabled":true,"ui5ComponentOptions":{"name":"sap.ushell.components.shell.ProductSwitch","manifest":false},"url":"sap/ushell/components/shell/ProductSwitch"},"configSwitch":[{"path":"/core/productSwitch/enabled","assertionValue":true}],"userCanTrigger":false,"canBeInterrupted":false},"UserSettings":{"loadingMode":"byComponentCreate","byComponentCreate":{"enabled":true,"ui5ComponentOptions":{"name":"sap.ushell.components.shell.Settings","manifest":false},"url":"sap/ushell/components/shell/Settings"},"userCanTrigger":false,"canBeInterrupted":false},"UserImage":{"loadingMode":"byComponentCreate","byComponentCreate":{"enabled":true,"ui5ComponentOptions":{"name":"sap.ushell.components.shell.UserImage","manifest":false},"url":"sap/ushell/components/shell/UserImage"},"userCanTrigger":false,"canBeInterrupted":false},"Search":{"loadingMode":"byComponentCreate","excludedFLPStates":["lean","lean-home"],"byComponentCreate":{"enabled":true,"ui5ComponentOptions":{"name":"sap.ushell.components.shell.Search","manifest":false},"url":"sap/ushell/components/shell/Search"},"userCanTrigger":false,"canBeInterrupted":false},"FirstSegmentCompleteLoaded":{"loadingMode":"continueOnEvent","continueOnEvent":{"eventName":"firstSegmentCompleteLoaded"},"userCanTrigger":false,"canBeInterrupted":false},"WarmupPlugins":{"loadingMode":"byEvent","excludedFLPStates":["app"],"byEvent":{"eventName":"loadWarmupPlugins","eventData":""},"Dependencies":["FirstSegmentCompleteLoaded","LoadPlugins"]},"ConditionalWaitForAppLoading":{"loadingMode":"waitInMs","waitInMs":{"waitingTime":3000},"mandatoryFLPStates":["app"]}}',
	"sap/ushell/services/_VisualizationInstantiation/VizInstance.control.xml":'<FragmentDefinition xmlns="sap.ui.core" xmlns:m="sap.m"><m:GenericTile header="{$this&gt;title}" subheader="{$this&gt;subtitle}" sizeBehavior="{$this&gt;sizeBehavior}" scope="{= ${$this&gt;editable} ? \'Actions\' : \'Display\'}" state="{$this&gt;state}" frameType="{parts:[\'$this&gt;displayFormat\',\'$this&gt;tileSize\'],formatter:\'._formatPlaceholderFrameType\'}" press=".firePress(${$parameters&gt;/})"><m:TileContent footer="{$this&gt;footer}"><m:ImageContent src="{$this&gt;icon}"/></m:TileContent></m:GenericTile></FragmentDefinition>',
	"sap/ushell/services/_VisualizationInstantiation/VizInstanceAbap.control.xml":'<FragmentDefinition xmlns="sap.ui.core" xmlns:m="sap.m"><m:GenericTile frameType="{parts:[\'$this&gt;displayFormat\',\'$this&gt;tileSize\'],formatter:\'._formatPlaceholderFrameType\'}" state="{$this&gt;state}"/></FragmentDefinition>',
	"sap/ushell/services/_VisualizationInstantiation/VizInstanceCdm.control.xml":'<FragmentDefinition xmlns="sap.ui.core" xmlns:m="sap.m"><m:GenericTile frameType="{parts:[\'$this&gt;displayFormat\',\'$this&gt;tileSize\'],formatter:\'._formatPlaceholderFrameType\'}" state="{$this&gt;state}"/></FragmentDefinition>',
	"sap/ushell/services/_VisualizationInstantiation/VizInstanceLaunchPage.control.xml":'<FragmentDefinition xmlns="sap.ui.core" xmlns:m="sap.m"><m:GenericTile frameType="{parts:[\'$this&gt;displayFormat\',\'$this&gt;tileSize\'],formatter:\'._formatPlaceholderFrameType\'}" state="{$this&gt;state}"/></FragmentDefinition>',
	"sap/ushell/ui/ShellHeader.fragment.xml":'<core:FragmentDefinition xmlns="sap.ushell.ui" xmlns:core="sap.ui.core" xmlns:shell="sap.ushell.ui.shell"><ShellHeader id="shell-header" showLogo="{/showLogo}" visible="{/headerVisible}" homeUri="{/rootIntent}" headItems="{path:\'/headItems\',factory:\'.shellUpdateAggItem\'}" headEndItems="{path:\'/headEndItems\',factory:\'.shellUpdateAggItem\',filters:[{path:\'\',test:\'.isHeadEndItemNotInOverflow\'}]}" centralAreaElement="{/centralAreaElement}" title="{/title}"><appTitle><shell:ShellAppTitle id="shellAppTitle" text="{/application/title}" tooltip="{i18n&gt;shellNavMenu_openMenuTooltip}"/></appTitle></ShellHeader></core:FragmentDefinition>',
	"sap/ushell/ui/ShellLayout.fragment.xml":'<core:FragmentDefinition xmlns="sap.ushell.ui.shell" xmlns:core="sap.ui.core" xmlns:ui="sap.ushell.ui"><ShellLayout id="shell" floatingContainerVisible="false" toolAreaVisible="{/currentState/toolAreaVisible}" enableCanvasShapes="{/enableBackGroundShapes}"><canvasSplitContainer><SplitContainer id="shell-split" showSecondaryContent="{/currentState/showPane}" subHeader="{path:\'/currentState/subHeader\',factory:\'.shellUpdateAggItem\'}" secondaryContent="{path:\'/currentState/paneContent\',factory:\'.shellUpdateAggItem\'}"><content><core:ComponentContainer id="menuBarComponentContainer" async="true"/><ui:AppContainer id="viewPortContainer" beforeNavigate=".onBeforeNavigate" afterNavigate=".onAfterNavigate"/></content><secondaryContent/></SplitContainer></canvasSplitContainer><rightFloatingContainer><RightFloatingContainer id="right-floating-container" top="6.875" hideItemsAfterPresentation="true" visible="{/currentState/showRightFloatingContainer}" floatingContainerItems="{path:\'/currentState/RightFloatingContainerItems\',factory:\'.shellUpdateAggItem\'}"/></rightFloatingContainer></ShellLayout></core:FragmentDefinition>',
/*!!
 * Hasher <http://github.com/millermedeiros/hasher>
 * @author Miller Medeiros
 * @version 1.2.0 (2013/11/11 03:18 PM)
 * Released under the MIT License
 */
	"sap/ui/thirdparty/hasher.js":function(){;(function(){var f=function(s){var h=(function(w){var P=25,d=w.document,a=w.history,S=s.Signal,h,_,b,c,g,i,j=/#(.*)$/,k=/(\?.*)|(\#.*)/,l=/^\#/,m=(!+"\v1"),n=('onhashchange'in w)&&d.documentMode!==7,o=m&&!n,p=(location.protocol==='file:');function q(e){return String(e||'').replace(/\W/g,"\\$&");}function r(e){if(!e)return'';var D=new RegExp('^'+q(h.prependHash)+'|'+q(h.appendHash)+'$','g');return e.replace(D,'');}function t(){var D=j.exec(h.getURL());var E=(D&&D[1])||'';try{return h.raw?E:decodeURIComponent(E);}catch(e){return E;}}function u(){return(g)?g.contentWindow.frameHash:null;}function v(){g=d.createElement('iframe');g.src='about:blank';g.style.display='none';d.body.appendChild(g);}function x(){if(g&&_!==u()){var e=g.contentWindow.document;e.open();e.write('<html><head><title>'+d.title+'</title><script type="text/javascript">var frameHash="'+_+'";</script></head><body>&nbsp;</body></html>');e.close();}}function y(e,D){if(_!==e){var E=_;_=e;if(o){if(!D){x();}else{g.contentWindow.frameHash=e;}}return function(){h.changed.dispatch(r(e),r(E));};}}if(o){i=function(){var e=t(),D=u(),E;if(D!==_&&D!==e){h.setHash(r(D));}else if(e!==_){E=y(e);E&&E();}};}else{i=function(){var e=t(),D;if(e!==_){D=y(e);D&&D();}};}function z(e,D,E){if(e.addEventListener){e.addEventListener(D,E,false);}else if(e.attachEvent){e.attachEvent('on'+D,E);}}function A(e,D,E){if(e.removeEventListener){e.removeEventListener(D,E,false);}else if(e.detachEvent){e.detachEvent('on'+D,E);}}function B(e){e=Array.prototype.slice.call(arguments);var D=e.join(h.separator);D=D?h.prependHash+D.replace(l,'')+h.appendHash:D;return D;}function C(e){e=encodeURI(e);if(m&&p){e=e.replace(/\?/,'%3F');}return e;}h={VERSION:'1.2.0',raw:false,appendHash:'',prependHash:'/',separator:'/',changed:new S(),stopped:new S(),initialized:new S(),init:function(){if(c)return;_=t();if(n){z(w,'hashchange',i);}else{if(o){if(!g){v();}x();}b=setInterval(i,P);}c=true;h.initialized.dispatch(r(_));},stop:function(){if(!c)return;if(n){A(w,'hashchange',i);}else{clearInterval(b);b=null;}c=false;h.stopped.dispatch(r(_));},isActive:function(){return c;},getURL:function(){return w.location.href;},getBaseURL:function(){return h.getURL().replace(k,'');},setHash:function(e){var D;e=B.apply(null,arguments);if(e!==_){D=y(e);if(!h.raw){e=C(e);}w.location.hash='#'+e;D&&D();}},replaceHash:function(e){var D,E=w.location.href,F=E.indexOf("#");e=B.apply(null,arguments);if(e!==_){D=y(e);if(!h.raw){e=C(e);}if(F!==-1){E=E.slice(0,F);}w.location.replace(E+'#'+e);D&&D();}},getHash:function(){return r(_);},getHashAsArray:function(){return h.getHash().split(h.separator);},dispose:function(){h.stop();h.initialized.dispose();h.stopped.dispose();h.changed.dispose();g=h=w.hasher=null;},toString:function(){return'[hasher version="'+h.VERSION+'" hash="'+h.getHash()+'"]';}};h.initialized.memorize=true;return h;}(window));return h;};if(typeof define==='function'&&define.amd){define(['signals'],f);}else if(typeof exports==='object'){module.exports=f(require('signals'));}else{window['hasher']=f(window['signals']);}}());
},
/** @license
 * JS Signals <http://millermedeiros.github.com/js-signals/>
 * Released under the MIT license
 * Author: Miller Medeiros
 * Version: 1.0.0 - Build: 268 (2012/11/29 05:48 PM)
 */
	"sap/ui/thirdparty/signals.js":function(){(function(g){function S(b,l,i,c,p){this._listener=l;this._isOnce=i;this.context=c;this._signal=b;this._priority=p||0;}S.prototype={active:true,params:null,execute:function(p){var h,b;if(this.active&&!!this._listener){b=this.params?this.params.concat(p):p;h=this._listener.apply(this.context,b);if(this._isOnce){this.detach();}}return h;},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null;},isBound:function(){return(!!this._signal&&!!this._listener);},isOnce:function(){return this._isOnce;},getListener:function(){return this._listener;},getSignal:function(){return this._signal;},_destroy:function(){delete this._signal;delete this._listener;delete this.context;},toString:function(){return'[SignalBinding isOnce:'+this._isOnce+', isBound:'+this.isBound()+', active:'+this.active+']';}};function v(l,n){if(typeof l!=='function'){throw new Error('listener is a required param of {fn}() and should be a Function.'.replace('{fn}',n));}}function a(){this._bindings=[];this._prevParams=null;var b=this;this.dispatch=function(){a.prototype.dispatch.apply(b,arguments);};}a.prototype={VERSION:'1.0.0',memorize:false,_shouldPropagate:true,active:true,_registerListener:function(l,i,b,p){var c=this._indexOfListener(l,b),d;if(c!==-1){d=this._bindings[c];if(d.isOnce()!==i){throw new Error('You cannot add'+(i?'':'Once')+'() then add'+(!i?'':'Once')+'() the same listener without removing the relationship first.');}}else{d=new S(this,l,i,b,p);this._addBinding(d);}if(this.memorize&&this._prevParams){d.execute(this._prevParams);}return d;},_addBinding:function(b){var n=this._bindings.length;do{--n;}while(this._bindings[n]&&b._priority<=this._bindings[n]._priority);this._bindings.splice(n+1,0,b);},_indexOfListener:function(l,c){var n=this._bindings.length,b;while(n--){b=this._bindings[n];if(b._listener===l&&b.context===c){return n;}}return-1;},has:function(l,c){return this._indexOfListener(l,c)!==-1;},add:function(l,b,p){v(l,'add');return this._registerListener(l,false,b,p);},addOnce:function(l,b,p){v(l,'addOnce');return this._registerListener(l,true,b,p);},remove:function(l,c){v(l,'remove');var i=this._indexOfListener(l,c);if(i!==-1){this._bindings[i]._destroy();this._bindings.splice(i,1);}return l;},removeAll:function(){var n=this._bindings.length;while(n--){this._bindings[n]._destroy();}this._bindings.length=0;},getNumListeners:function(){return this._bindings.length;},halt:function(){this._shouldPropagate=false;},dispatch:function(p){if(!this.active){return;}var b=Array.prototype.slice.call(arguments),n=this._bindings.length,c;if(this.memorize){this._prevParams=b;}if(!n){return;}c=this._bindings.slice();this._shouldPropagate=true;do{n--;}while(c[n]&&this._shouldPropagate&&c[n].execute(b)!==false);},forget:function(){this._prevParams=null;},dispose:function(){this.removeAll();delete this._bindings;delete this._prevParams;},toString:function(){return'[Signal active:'+this.active+' numListeners:'+this.getNumListeners()+']';}};var s=a;s.Signal=a;if(typeof define==='function'&&define.amd){define(function(){return s;});}else{g['signals']=s;}}(this));
},
/** @license
 * crossroads <http://millermedeiros.github.com/crossroads.js/>
 * Author: Miller Medeiros | MIT License
 * v0.12.0 (2013/01/21 13:47)
 */
	"sap/ui/thirdparty/crossroads.js":function(){(function(){var f=function(s){var c,_,U;_=(/t(.+)?/).exec('t')[1]==='';function a(i,v){if(i.indexOf){return i.indexOf(v);}else{var n=i.length;while(n--){if(i[n]===v){return n;}}return-1;}}function b(l,m){var i=a(l,m);if(i!==-1){l.splice(i,1);}}function d(v,i){return'[object '+i+']'===Object.prototype.toString.call(v);}function e(v){return d(v,'RegExp');}function g(v){return d(v,'Array');}function h(v){return typeof v==='function';}function t(v){var r;if(v===null||v==='null'){r=null;}else if(v==='true'){r=true;}else if(v==='false'){r=false;}else if(v===U||v==='undefined'){r=U;}else if(v===''||isNaN(v)){r=v;}else{r=parseFloat(v);}return r;}function j(v){var n=v.length,r=[];while(n--){r[n]=t(v[n]);}return r;}function k(i,l){var q=(i||'').replace('?','').split('&'),n=q.length,o={},m,v;while(n--){m=q[n].split('=');v=l?t(m[1]):m[1];o[m[0]]=(typeof v==='string')?decodeURIComponent(v):v;}return o;}function C(){this.bypassed=new s.Signal();this.routed=new s.Signal();this._routes=[];this._prevRoutes=[];this._piped=[];this.resetState();}C.prototype={greedy:false,greedyEnabled:true,ignoreCase:true,ignoreState:false,shouldTypecast:false,normalizeFn:null,resetState:function(){this._prevRoutes.length=0;this._prevMatchedRequest=null;this._prevBypassedRequest=null;},create:function(){return new C();},addRoute:function(p,i,l){var r=new R(p,i,l,this);this._sortedInsert(r);return r;},removeRoute:function(r){b(this._routes,r);r._destroy();},removeAllRoutes:function(){var n=this.getNumRoutes();while(n--){this._routes[n]._destroy();}this._routes.length=0;},parse:function(r,l){r=r||'';l=l||[];if(!this.ignoreState&&(r===this._prevMatchedRequest||r===this._prevBypassedRequest)){return;}var m=this._getMatchedRoutes(r),i=0,n=m.length,o;if(n){this._prevMatchedRequest=r;this._notifyPrevRoutes(m,r);this._prevRoutes=m;while(i<n){o=m[i];o.route.matched.dispatch.apply(o.route.matched,l.concat(o.params));o.isFirst=!i;this.routed.dispatch.apply(this.routed,l.concat([r,o]));i+=1;}}else{this._prevBypassedRequest=r;this.bypassed.dispatch.apply(this.bypassed,l.concat([r]));}this._pipeParse(r,l);},_notifyPrevRoutes:function(m,r){var i=0,p;while(p=this._prevRoutes[i++]){if(p.route.switched&&this._didSwitch(p.route,m)){p.route.switched.dispatch(r);}}},_didSwitch:function(r,m){var l,i=0;while(l=m[i++]){if(l.route===r){return false;}}return true;},_pipeParse:function(r,l){var i=0,m;while(m=this._piped[i++]){m.parse(r,l);}},getNumRoutes:function(){return this._routes.length;},_sortedInsert:function(r){var i=this._routes,n=i.length;do{--n;}while(i[n]&&r._priority<=i[n]._priority);i.splice(n+1,0,r);},_getMatchedRoutes:function(r){var i=[],l=this._routes,n=l.length,m;while(m=l[--n]){if((!i.length||this.greedy||m.greedy)&&m.match(r)){i.push({route:m,params:m._getParamsArray(r)});}if(!this.greedyEnabled&&i.length){break;}}return i;},pipe:function(o){this._piped.push(o);},unpipe:function(o){b(this._piped,o);},toString:function(){return'[crossroads numRoutes:'+this.getNumRoutes()+']';}};c=new C();c.VERSION='0.12.0';c.NORM_AS_ARRAY=function(r,v){return[v.vals_];};c.NORM_AS_OBJECT=function(r,v){return[v];};function R(p,i,l,r){var m=e(p),n=r.patternLexer;this._router=r;this._pattern=p;this._paramsIds=m?null:n.getParamIds(p);this._optionalParamsIds=m?null:n.getOptionalParamsIds(p);this._matchRegexp=m?p:n.compilePattern(p,r.ignoreCase);this.matched=new s.Signal();this.switched=new s.Signal();if(i){this.matched.add(i);}this._priority=l||0;}R.prototype={greedy:false,rules:void(0),match:function(r){r=r||'';return this._matchRegexp.test(r)&&this._validateParams(r);},_validateParams:function(r){var i=this.rules,v=this._getParamsObject(r),l;for(l in i){if(l!=='normalize_'&&i.hasOwnProperty(l)&&!this._isValidParam(r,l,v)){return false;}}return true;},_isValidParam:function(r,p,v){var i=this.rules[p],l=v[p],m=false,n=(p.indexOf('?')===0);if(l==null&&this._optionalParamsIds&&a(this._optionalParamsIds,p)!==-1){m=true;}else if(e(i)){if(n){l=v[p+'_'];}m=i.test(l);}else if(g(i)){if(n){l=v[p+'_'];}m=this._isValidArrayRule(i,l);}else if(h(i)){m=i(l,r,v);}return m;},_isValidArrayRule:function(i,v){if(!this._router.ignoreCase){return a(i,v)!==-1;}if(typeof v==='string'){v=v.toLowerCase();}var n=i.length,l,m;while(n--){l=i[n];m=(typeof l==='string')?l.toLowerCase():l;if(m===v){return true;}}return false;},_getParamsObject:function(r){var i=this._router.shouldTypecast,v=this._router.patternLexer.getParamValues(r,this._matchRegexp,i),o={},n=v.length,p,l;while(n--){l=v[n];if(this._paramsIds){p=this._paramsIds[n];if(p.indexOf('?')===0&&l){o[p+'_']=l;l=k(l,i);v[n]=l;}if(_&&l===''&&a(this._optionalParamsIds,p)!==-1){l=void(0);v[n]=l;}o[p]=l;}o[n]=l;}o.request_=i?t(r):r;o.vals_=v;return o;},_getParamsArray:function(r){var n=this.rules?this.rules.normalize_:null,p;n=n||this._router.normalizeFn;if(n&&h(n)){p=n(r,this._getParamsObject(r));}else{p=this._getParamsObject(r).vals_;}return p;},interpolate:function(r){var i=this._router.patternLexer.interpolate(this._pattern,r);if(!this._validateParams(i)){throw new Error('Generated string doesn\'t validate against `Route.rules`.');}return i;},extrapolate:function(r){var i={};if(!r){return i;}var p=this._getParamsObject(r);this._paramsIds.forEach(function(l){if(p.hasOwnProperty(l)){i[l]=p[l];}});return i;},dispose:function(){this._router.removeRoute(this);},_destroy:function(){this.matched.dispose();this.switched.dispose();this.matched=this.switched=this._pattern=this._matchRegexp=null;},toString:function(){return'[Route pattern:"'+this._pattern+'", numListeners:'+this.matched.getNumListeners()+']';}};C.prototype.patternLexer=(function(){var E=/[\\.+*?\^$\[\](){}\/'#]/g,L=/^\/|\/$/g,i=/\/$/g,P=/(?:\{|:)([^}:]+)(?:\}|:)/g,r=function(z,A,B){var D=B.lastIndexOf("__CR_RS__"),F=B.indexOf("__CR_RQ__"),G=B.indexOf("__CR_OQ__"),H=B.indexOf("\\/",A),I=Math.min(G===-1?B.length:G,F===-1?B.length:F),J=A+z.length;if(J>=I||J<D||J<H){return T.OS.res_normal;}else{return T.OS.res_arsbq;}},T={'OS':{rgx:/([:})]|\w(?=\/))\/?(:|(?:\{\?))/g,save:'$1{{id}}$2',res:r,res_normal:'\\/?',res_arsbq:'(?:(?:\\/(?=(?:[^\\/?]+)?))|^\\/?|\\/?$)'},'RS':{rgx:/([:}])\/?(\{)/g,save:'$1{{id}}$2',res:'\\/'},'RQ':{rgx:/\{\?([^}]+)\}/g,res:'\\?([^#]+)'},'OQ':{rgx:/:\?([^:]+):/g,res:'(?:\\?([^#]*))?'},'OR':{rgx:/:([^:]+)\*:/g,res:'(.*)?'},'RR':{rgx:/\{([^}]+)\*\}/g,res:'(.+)'},'RP':{rgx:/\{([^}]+)\}/g,res:'([^\\/?]+)'},'OP':{rgx:/:([^:]+):/g,res:'([^\\/?]+)?(?:\\/(?!\\/))?'}},l=1,S=2,m=3,n=l;function p(){var z,A;for(z in T){if(T.hasOwnProperty(z)){A=T[z];A.id='__CR_'+z+'__';A.save=('save'in A)?A.save.replace('{{id}}',A.id):A.id;A.rRestore=new RegExp(A.id,'g');}}}p();function o(z,A){var B=[],D;z.lastIndex=0;while(D=z.exec(A)){B.push(D[1]);}return B;}function q(z){return o(P,z);}function u(z){return o(T.OP.rgx,z);}function v(z,A){z=z||'';if(z){if(n===l){z=z.replace(L,'');}else if(n===m){z=z.replace(i,'');}z=w(z,'rgx','save');z=z.replace(E,'\\$&');z=w(z,'rRestore','res');if(n===l){z='\\/?'+z;}}if(n!==S){z+='\\/?';}return new RegExp('^'+z+'$',A?'i':'');}function w(z,A,B){var D,F;for(F in T){if(T.hasOwnProperty(F)){D=T[F];z=z.replace(D[A],D[B]);}}return z;}function x(z,A,B){var D=A.exec(z);if(D){D.shift();if(B){D=j(D);}}return D;}function y(z,A){if(typeof z!=='string'){throw new Error('Route pattern should be a string.');}var B=function(D,F){var G,H;if(F.charAt(0)==='?'){H=A[F]||A[F.substring(1)];}else{H=A[F];}if(H!=null){if(typeof H==='object'){var I=[];for(var J in H){I.push(encodeURI(J+'='+H[J]));}G='?'+I.join('&');}else{G=String(H);}if(D.indexOf('*')===-1&&G.indexOf('/')!==-1){throw new Error('Invalid value "'+G+'" for segment "'+D+'".');}}else if(D.indexOf('{')!==-1){throw new Error('The segment '+D+' is required.');}else{G='';}return G;};if(!T.OS.trail){T.OS.trail=new RegExp('(?:'+T.OS.id+')+$');}return z.replace(T.OS.rgx,T.OS.save).replace(P,B).replace(T.OS.trail,'').replace(T.OS.rRestore,'/');}return{strict:function(){n=S;},loose:function(){n=l;},legacy:function(){n=m;},getParamIds:q,getOptionalParamsIds:u,getParamValues:x,compilePattern:v,interpolate:y};}());return c;};if(typeof define==='function'&&define.amd){define(['signals'],f);}else{window['crossroads']=f(window['signals']);}}());
},
// Copyright (c) 2009-2020 SAP SE, All Rights Reserved
	"sap/ushell/EventHub.js":function(){(function(){"use strict";var d=(!window.sap||!sap.ui||!sap.ui.define)?function(v,c){return c();}:sap.ui.define;return d([],function(){var _={pendingEvents:{},subscribers:{},dispatchOperations:{},store:c(),dispatchTimeoutIds:new Set()};function c(){return{nextKey:0,objectToKey:new WeakMap(),keyToObject:{}};}function l(M,D,C){if(jQuery&&jQuery.sap&&jQuery.sap.log&&jQuery.sap.log.error){jQuery.sap.log.error(M,D,"sap.ushell.EventHub");return;}if(window.console){var o=[M,D];if(C){o.push("error caused by:");o.push(C);}window.console.error.apply(window.console,o);}}function a(o){var M="An exception was raised while executing a registered callback on event '"+o.eventName+"'",D="Data passed to the event were: '"+o.eventData+"'";if(o.error.stack){D+=" Error details: "+o.error.stack;}l(M,D,o.fnCausedBy);}function s(o,C,D){var R;try{R=C(D);}catch(v){a({eventName:o,eventData:D,fnCausedBy:C,error:v});}return R;}function J(H){if(typeof arguments[2]==="function"){return y(H,arguments[2]);}return arguments[2];}function b(H){if(typeof arguments[2]==="string"&&arguments[2].indexOf("<function")===0){return z(H,arguments[2]);}return arguments[2];}function e(H,D,P){if(typeof D==="object"||typeof D==="function"){try{var S=[D,J.bind(null,H)];if(P){S.push(3);}return JSON.stringify.apply(JSON,S);}catch(o){l(""+o,o.stack,e);}}return D;}function f(H,D){try{return JSON.parse(D,b.bind(null,H));}catch(o){return D;}}function g(H,o,S){if(!H.subscribers[o]){H.subscribers[o]=[];}H.subscribers[o].push(S);}function u(H,o,v){H.subscribers[o]=(H.subscribers[o]||[]).map(function(S){return S.filter(function(L){return L.fn!==v;});}).filter(function(G){return G.length>0;});}function h(){var D,o=new Promise(function(R){D=R;}),v={dispatching:o,cancelled:false,cancel:function(){v.cancelled=true;},complete:function(){D();}};return v;}function i(H,o){if(!H.subscribers.hasOwnProperty(o)){return null;}var D=h(),S=H.subscribers[o],G=S.map(function(v){return j(H,o,v,D,0);});Promise.all(G).then(D.complete,D.complete);return D;}function j(H,o,S,D,v){var O=S.length,C=S.slice(v);return C.reduce(function(P,F){return P.then(function(G){if(D.cancelled){if(G){u(H,o,F.fn);}return G;}return n(H,o,F,S).then(function(I){if(I){D.cancelled=true;}return I;});});},Promise.resolve(false)).then(function(F){if(!F&&O<S.length){return j(H,o,S,D,O);}return F;});}function n(H,o,S,v){return new Promise(function(R){var D=f(H,H.pendingEvents[o]);var C=setTimeout(function(){H.dispatchTimeoutIds.delete(C);if(S.called&&v.offed){R(false);return;}S.called=true;var O=v.offed;s(o,S.fn,D);var F=v.offed;if(F){u(H,o,S.fn);}R(!O&&F);},0);H.dispatchTimeoutIds.add(C);});}function k(H,o,S){return function(){S.forEach(function(L){if(L.called){u(H,o,L.fn);}});S.offed=true;return{off:k(H,o,[])};};}function m(H,o,S){return function(C){var v={fn:C,called:false};S.push(v);if(H.pendingEvents.hasOwnProperty(o)){var D=H.dispatchOperations[o];if(!D){n(H,o,v,S);}else{D.dispatching.then(function(){if(!v.called){n(H,o,v,S);}});}}return{do:m(H,o,S),off:k(H,o,S)};};}function p(H,o){var S=[];g(H,o,S);return{do:m(H,o,S),off:k(H,o,S)};}function q(H,o){var D=p(H,o);D.off();return D;}function r(H,o,D,F){var S=e(H,D);if(!F&&H.pendingEvents.hasOwnProperty(o)&&H.pendingEvents[o]===S){return this;}H.pendingEvents[o]=S;var v=H.dispatchOperations[o];if(v){v.cancel();}var N=i(H,o);H.dispatchOperations[o]=N;return this;}function t(H,o){return f(H,H.pendingEvents[o]);}function w(){var o=Array.prototype.slice.call(arguments);o.shift();var C=0,O=new Array(o.length).join(",").split(",").map(function(){return 1;}),v=[],D={do:function(F){o.forEach(function(G,I){G.do(function(I,V){v[I]=V;C+=O[I];O[I]=0;if(C===o.length){F.apply(null,v);}}.bind(null,I));});return{off:D.off};},off:function(){var F=o.reduce(function(F,G){return G.off();},function(){});return{off:F};}};return D;}function x(H,o){var D=H.dispatchOperations[o];return D?D.dispatching:Promise.resolve();}function y(H,o){if(H.store.objectToKey.has(o)){return H.store.objectToKey.get(o);}H.store.nextKey++;var K="<"+typeof o+">#"+H.store.nextKey;H.store.keyToObject[K]=o;H.store.objectToKey.set(o,K);return K;}function z(H,K){return H.store.keyToObject[K];}function A(H){var o={};o.emit=r.bind(o,H);o.on=p.bind(null,H);o.once=q.bind(null,H);o.last=t.bind(null,H);o.join=w.bind(null,H);o.wait=x.bind(null,H);o._reset=function(H){H.pendingEvents={};H.subscribers={};H.dispatchOperations={};H.store=c();H.dispatchTimeoutIds.forEach(clearTimeout);H.dispatchTimeoutIds=new Set();}.bind(null,H);return o;}function B(C){var D={pendingEvents:{},subscribers:{},dispatchOperations:{},store:c(),dispatchTimeoutIds:new Set()},F=A(D),G=f(D,e(D,C));function H(o){var v=o.charAt(0);if(v.match(/[a-zA-Z0-9]/)){throw new Error("Invalid path separator '"+v+"'. Please ensure path starts with a non alphanumeric character");}var X=o.split(v);X.shift();return X;}function I(v,o){var X=v,Y="";if(arguments.length===2){X=o;Y=v;}return Y+"/"+X.join("/");}function K(v){return Object.prototype.toString.apply(v)==="[object Array]";}function L(v){return Object(v)!==v;}function M(v){return(K(v)?v.length:Object.keys(v).length)===0;}function N(v,X,Y,Z){var $="",a1=v,b1=[];Y.reduce(function(c1,d1,e1){$=I($,[d1]);a1=a1[d1];if(e1===Y.length-1){if(!L(Z)&&!L(a1)&&Object.keys(a1).length>0){var f1,g1=Object.keys(a1).reduce(function(o,d1){o[d1]=true;return o;},{}),h1=Object.keys(Z).some(function(d1){f1=d1;var o=g1.hasOwnProperty(d1);delete g1[d1];var m1=!L(a1[d1])&&Object.keys(a1[d1]).length>0;return!o||m1;}),i1=(Object.keys(g1).length>0),j1=(h1||i1);if(j1){var k1=h1?"One or more values are not defined in the channel contract or are defined as a non-empty object/array, for example, check '"+f1+"'.":"Some keys are missing in the event data: "+Object.keys(g1).join(", ")+".";throw new Error("Cannot write value '"+e(D,Z,true)+"' to path '"+$+"'. "+k1+" All childrens in the value must appear in the channel contract and must have a simple value or should be defined as an empty complex value");}var l1=Object.keys(Z).map(function(d1){return{serializedPath:I($,[d1]),value:Z[d1]};});Array.prototype.push.apply(b1,l1);}c1[d1]=Z;}else if(!c1.hasOwnProperty(d1)){c1[d1]=K(a1)?[]:{};}b1.push({serializedPath:$,value:c1[d1]});return c1[d1];},X);return b1;}function O(o,v){var X="",Y=v.reduce(function(Z,$){X+="/"+$;if(K(Z)&&!$.match(/^[0-9]+$/)){throw new Error("Invalid array index '"+$+"' provided in path '"+X+"'");}if(!Z.hasOwnProperty($)){throw new Error("The item '"+$+"' from path "+X+" cannot be accessed in the object: "+e(D,Z));}return Z[$];},o);return Y;}function P(o,v,X){return v.reduce(function(Y,Z,$){var a1=$===(v.length-1);if(Y.hasOwnProperty(Z)){return Y[Z];}return a1?X:{};},o);}function Q(o,v){v.pop();var X=o,Y=[];return v.reduce(function(Z,$){X=X[$];Y.push($);Z.push({serializedPath:I(Y),value:X});return Z;},[]);}function R(o){return o.map(function(v){var X=v.serializedPath;if(!D.subscribers.hasOwnProperty(X)||D.subscribers[X].length===0){return null;}return{path:X,value:v.value};}).filter(function(v){return!!v;});}function S(o,v){var X=H(o);O(C,X);var Y=N(C,G,X,v);Y.forEach(function(Z){F.emit(Z.serializedPath,Z.value);});}function T(o){var v=H(o),X=O(C,v);return P(G,v,X);}function U(o){var v=H(o),X=I(v),Y=F.last(X),Z=D.pendingEvents.hasOwnProperty(X);if(Z){return F.on(X);}Y=O(C,v);if(typeof Y!=="undefined"&&(L(Y)||!M(f(F,e(F,Y))))){F.emit(X,Y);}return F.on(X);}function V(o){var v=U(o);v.off();return v;}function W(o){var v=H(o),X=Q(G,v),Y=R(X).map(function(Z){return F.wait(Z.path,Z.value);});return Promise.all(Y.concat(F.wait(o)));}return{emit:S,on:U,once:V,last:T,wait:W,join:w.bind(null,F)};}var E=A(_);E.createChannel=B.bind(null);return E;},false);})();
}
},"sap/ushell/core-lib-preload"
);
//# sourceMappingURL=core-min-0.js.map