// Copyright (c) 2009-2020 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/Log"],function(L){"use strict";var S=function(){};S.prototype.convertTo=function(v,c){if(c._version==="3.0.0"||(c.identification&&c.payload)){switch(v){case"3.0.0":return this._convertPageToSite(c);case"3.1.0":return this._convertSiteToPage(c);default:L.error("The received version for the site/page conversion is not supported");return{};}}else{L.error("The site converter did not receive a correct page/site object.");return{};}};S.prototype._convertPageToSite=function(p){var c={groups:{},_version:"3.0.0",site:{identification:p.identification,payload:{groupsOrder:p.payload.layout.sectionOrder}}};var s=p.payload.sections;for(var i=0;i<Object.keys(s).length;i++){var a=Object.keys(s)[i];var o=p.payload.sections[a];c.groups[a]={identification:{id:o.id,title:o.title},payload:{tiles:this._convertVizPayloadObjectToArray(o)}};if("visible"in o){c.groups[a].identification.isVisible=o.visible;}if("preset"in o){c.groups[a].payload.isPreset=o.preset;}if("locked"in o){c.groups[a].payload.locked=o.locked;}if("default"in o){c.groups[a].payload.isDefaultGroup=o.default;}}return c;};S.prototype._convertSiteToPage=function(s){var c={identification:s.site.identification,payload:{layout:{sectionOrder:s.site.payload.groupsOrder},sections:{}}};var g=s.groups;var G;var o;var v;for(var i=0;i<Object.keys(g).length;i++){G=Object.keys(g)[i];o=s.groups[G];v=this._createVizPayloadObject(o.payload.tiles);c.payload.sections[G]={id:o.identification.id,title:o.identification.title,layout:v.layout,viz:v.viz};var a=c.payload.sections[G];if("isVisible"in o.identification){a.visible=o.identification.isVisible;}if("isPreset"in o.payload){a.preset=o.payload.isPreset;}if("locked"in o.payload){a.locked=o.payload.locked;}if("isDefaultGroup"in o.payload){a.default=o.payload.isDefaultGroup;}}return c;};S.prototype._createVizPayloadObject=function(t){var v=[];var p={};var V=t.reduce(function(r,T){v.push(T.id);r[T.id]=T;return r;},{});p.layout={vizOrder:v};p.viz=V;return p;};S.prototype._convertVizPayloadObjectToArray=function(s){return s.layout.vizOrder.reduce(function(t,v){t.push(s.viz[v]);return t;},[]);};return S;});
