/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/thirdparty/jquery","sap/ui/events/KeyCodes","sap/ui/core/Core","sap/gantt/library","./GanttExtension","./CoordinateUtils","./GanttUtils","sap/gantt/misc/Format"],function(q,K,C,l,G,a,b,F){"use strict";var _=".sapGanttDragDrop";var e=["mousemove","mouseup","keydown"];var m="mousedown";var B=e.reduce(function(g,n){g[n]=n;return g;},{});B[m]=m;var E=e.map(function(s){return s+_;});var M=m+_;var I=3;var c=l.dragdrop.GhostAlignment;var D=sap.gantt.DragOrientation;var d={dispatchEvent:function(o){var g=this._getDragDropExtension();if(o.type===B.mousedown){g.onMouseDown(o);}else if(o.type===B.mousemove){g.onMouseMove(o);}else if(o.type===B.mouseup){g.onMouseUp(o);}else if(o.type===B.keydown){g.onKeydown(o);}},addEventListeners:function(g){this.removeEventListeners(g);var s=q(g._getDragDropExtension().getDomRefs().ganttSvg);s.on(M,d.dispatchEvent.bind(g));var h=q(g._getDragDropExtension().getDomRefs().headerSvg);h.on(M,d.dispatchEvent.bind(g));},removeEventListeners:function(g){var s=q(g._getDragDropExtension().getDomRefs().ganttSvg);s.off(_);var h=q(g._getDragDropExtension().getDomRefs().headerSvg);h.off(_);},addDragDropEventListeners:function(g){this.removeDragDropEventListeners(g);E.forEach(function(s){q(document).on(s,d.dispatchEvent.bind(g));});},removeDragDropEventListeners:function(g){E.forEach(function(s){q(document).off(s);});}};var f=G.extend("sap.gantt.simple.GanttDragDropExtension",{_init:function(g,s){this._initDragStates();return"DragDropExtension";},_attachEvents:function(){var g=this.getGantt();d.addEventListeners(g);},_detachEvents:function(){var g=this.getGantt();d.removeEventListeners(g);}});f.prototype._initDragStates=function(){this.bDragging=false;this.adhocLineDrag=false;this.deltaLineDrag=false;this.adhocLineDragStart=false;this.deltaLineDragStart=false;this.isCursorlineDisabled=false;this.bElementDraggable=false;this.oAdhocLineElmDraggable=false;this.oDeltaLineElmDraggable=false;this.oMouseDownTarget=null;this.oLastDraggedShapeData=null;this.mDragPoint={};this.bDragging=false;this.$ghost=null;};f.prototype.onAdhocMarkerMouseDown=function(o){var p=a.getEventSVGPoint(this.getDomRefs().headerSvg,o),g=o.target.getBBox();this.oMouseDownTarget=o.target;this.mDragPoint={cursorX:p.x,cursorY:p.y,shapeX:g.x,shapeY:g.y,shapeWidth:g.width};d.addDragDropEventListeners(this.getGantt());this.adhocLineDrag=true;};f.prototype.onDeltaAreaMouseDown=function(o){var p=a.getEventSVGPoint(this.getDomRefs().headerSvg,o),g=o.target.getBBox();this.oMouseDownTarget=o.target;this.mDragPoint={cursorX:p.x,cursorY:p.y,shapeX:g.x,shapeY:g.y,shapeWidth:g.width};var h=q(o.target).control(0,true).getParent();this.oLastDraggedShapeData={timeStamp:h.getTimeStamp(),endTimeStamp:h.getEndTimeStamp()};d.addDragDropEventListeners(this.getGantt());this.deltaLineDrag=true;};f.prototype.onAdhocLineDrop=function(o){if(this.oMouseDownTarget){var g=q(this.oMouseDownTarget).control(0,true).getParent();var h=this._getAdhocDropData(o);if(h){g.fireAdhoclineDrop(h);}if(this.isCursorlineDisabled){this.getGantt().setEnableCursorLine(true);}this.stopDragging();}};f.prototype.onDeltaLineDrop=function(o){if(this.oMouseDownTarget){var g=q(this.oMouseDownTarget).control(0,true).getParent();var h=this._getDeltaMarkerDropEvent(o);if(h){g.fireDeltalineDrop(h);}if(this.isCursorlineDisabled){this.getGantt().setEnableCursorLine(true);}this.stopDragging();}};f.prototype.onAdhocLineMove=function(o){if(!this.adhocLineDragStart){this.$ghost=this.createDragGhost(this.oMouseDownTarget);this._hideScrollBarOnBody(true);this.adhocLineDragStart=true;if(this.getGantt().getEnableCursorLine()){this.getGantt().setEnableCursorLine(false);this.isCursorlineDisabled=true;}}else{this.onLineDrag(o);}};f.prototype.onDeltaLineMove=function(o){if(!this.deltaLineDragStart){this.$ghost=this.createDragGhost(this.oMouseDownTarget);this._hideScrollBarOnBody(true);this.deltaLineDragStart=true;if(this.getGantt().getEnableCursorLine()){this.getGantt().setEnableCursorLine(false);this.isCursorlineDisabled=true;}}else{this.onLineDrag(o);}};f.prototype.onLineDrag=function(o){if(this.isValidDropZoneForLines(o)){this.updateCursorStyle("Move");this.updateHeaderCursorStyle("Move");}else{this.updateCursorStyle("not-allowed");this.updateHeaderCursorStyle("not-allowed");}this.showGhost(o);};f.prototype.onMouseDown=function(o){if(this.isEventTargetAdhocLine(o)){this.oAdhocLineElmDraggable=this.isAdhocLineDraggable(o);if(this.oAdhocLineElmDraggable){this.onAdhocMarkerMouseDown(o);return;}}if(this.isEventTargetDeltaLine(o)){this.oDeltaLineElmDraggable=this.isDeltaLineDraggable(o);if(this.oDeltaLineElmDraggable){this.onDeltaAreaMouseDown(o);return;}}if(!this.getGantt().getEnableSelectAndDrag()){var g=this.getShapeElementByTarget(o.target);if(g){this.shapeSelectedOnMouseDown=true;this.initiallySelected=g.getSelected();this.getGantt().getSelection().updateShape(g.getShapeUid(),{selected:true,ctrl:o.ctrlKey||o.metaKey,draggable:g.getDraggable(),time:g.getTime(),endTime:g.getEndTime()});}}this.bElementDraggable=this.isEventTargetDraggable(o);if(this.bElementDraggable){var p=a.getEventSVGPoint(this.getDomRefs().ganttSvg,o);var h=this.getDraggableDOMElement(o.target),i=h.getBBox();this.mDragPoint={cursorX:p.x,cursorY:p.y,shapeX:i.x,shapeY:i.y,shapeWidth:i.width};var g=this.getShapeElementByTarget(h);this.oMouseDownTarget=h;this.oLastDraggedShapeData={shapeUid:g.getShapeUid(),startTime:g.getTime(),endTime:g.getEndTime()};this.oSourceRow=this.getRowByShape(g);if(this.getGantt().getDragOrientation()===D.Horizontal){this.oCurrentRow=b.getRowInstancefromShape(g);}d.addDragDropEventListeners(this.getGantt());}};f.prototype.updateCursorStyle=function(s){document.body.style.cursor=s;this.getDomRefs().ganttSvg.style.cursor=s;};f.prototype.updateHeaderCursorStyle=function(s){this.getDomRefs().headerSvg.style.cursor=s;};f.prototype.onMouseMove=function(o){if(this.skipEvent(o)){return;}if(!!this.adhocLineDrag&&!!this.oMouseDownTarget){this.onAdhocLineMove(o);return;}if(!!this.deltaLineDrag&&!!this.oMouseDownTarget){this.onDeltaLineMove(o);return;}if(this.bDragging===false){var n=a.getEventSVGPoint(this.getDomRefs().ganttSvg,o),g=this.isExceedDraggingThreshold(n),s=g&&this.isAllowedVerticalOrentationDrag();this.bDragging=s;if(s&&this.oMouseDownTarget){this._hideScrollBarOnBody(true);this.$ghost=this.createDragGhost(this.oMouseDownTarget);var h=this._getDragStartEventData(o);if(h){this.getGantt().fireDragStart(h);}}else if(g){this.updateCursorStyle("not-allowed");}}else{this.onDragging(o);}};f.prototype.onMouseUp=function(o){if(this.bElementDraggable===true&&this.bDragging===false){this.stopDragging(o);this._initDragStates();return;}if(!!this.adhocLineDragStart&&!!this.oMouseDownTarget){this.onAdhocLineDrop(o);this._initDragStates();return;}if(!!this.deltaLineDragStart&&!!this.oMouseDownTarget){this.onDeltaLineDrop(o);this._initDragStates();return;}var g=this._getShapeDropEventData(o);this.stopDragging(o);if(g){this.getGantt().fireShapeDrop(g);}if(this.oMouseDownTarget){var h=this.getShapeElementByTarget(this.oMouseDownTarget);if(h){b.rerenderAssociatedRelationships(this.getGantt(),h);}}this._initDragStates();};f.prototype._getDragStartEventData=function(o){return{sourceGanttChart:this.getGantt(),draggedShapeDates:this._getDraggedShapeDates(),lastDraggedShapeUid:this.oLastDraggedShapeData.shapeUid,cursorDateTime:this._getGhostTime(o).cursorTime};};f.prototype._getShapeDropEventData=function(o){if(this.isValidDropZone(o)){var g=this.getGantt();var h;var s=this._getDraggedShapeDates();var t=this.getGanttChartByTarget(o.target);if(this.getGantt().getDragOrientation()===D.Horizontal){h=this.oCurrentRow;}else{h=b.getRowInstance(o,t.getTable());}var T=this.getShapeElementByTarget(o.target);var i=this._getGhostTime(o);return{sourceGanttChart:g,targetGanttChart:t,draggedShapeDates:s,lastDraggedShapeUid:this.oLastDraggedShapeData.shapeUid,targetRow:h,cursorDateTime:i.cursorTime,newDateTime:i.newDateTime,targetShape:T,sourceRowData:this.oSourceRow};}};f.prototype._getAdhocDropData=function(o){if(this.isValidDropZoneForLines(o)){var g=this.getGantt();var A=g.getAxisTime();var p=a.getEventSVGPoint(this.getDomRefs().headerSvg,o);var h=F.dateToAbapTimestamp(A.viewToTime(this.mDragPoint.cursorX));var i=F.dateToAbapTimestamp(A.viewToTime(p.x));return{newTimeStamp:i,oldTimeStamp:h};}};f.prototype._getGhostTime=function(o){var g=this.getGantt();var t=this.getGanttChartByTarget(o.target);var h=t!=null?(t.getId()!==g.getId()):false;var A=h?t.getAxisTime():g.getAxisTime();var i=h?window.document.getElementById(t.getId()+"-svg"):window.document.getElementById(g.getId()+"-svg");var j=a.getEventSVGPoint(i,o).x;var k=A.viewToTime(j);var n=k;var r=C.getConfiguration().getRTL();var s=this.mDragPoint.shapeX,S=r?-this.mDragPoint.shapeWidth:this.mDragPoint.shapeWidth,p=this.mDragPoint.cursorX;var u=k;var v=k;var w=this.oLastDraggedShapeData.endTime-this.oLastDraggedShapeData.startTime;if(this.getGantt().getDragOrientation()===D.Vertical){u=this.oLastDraggedShapeData.startTime;v=this.oLastDraggedShapeData.endTime;n=u;}else{if(this.getGantt().getGhostAlignment()===c.Start){v=new Date(u.getTime()+w);n=k;}else if(this.getGantt().getGhostAlignment()===c.End){u=new Date(v.getTime()-w);n=k;}else if(this.getGantt().getGhostAlignment()===c.None){var N=r?(j-S-(p-s)):(j-(p-s));var x=A.viewToTime(N);u=x;v=new Date(u.getTime()+w);n=x;}}return{newDateTime:n,cursorTime:k,time:u,endTime:v};};f.prototype._getDeltaMarkerDropEvent=function(o){if(this.isValidDropZoneForLines(o)){var g=q(this.oMouseDownTarget).control(0,true).getParent();var r=C.getConfiguration().getRTL();var A=this.getGantt().getGhostAlignment();var h=this.getGantt().getAxisTime();var p=a.getEventSVGPoint(this.getDomRefs().headerSvg,o);var s,i;var S=this.mDragPoint.shapeWidth,j=this.mDragPoint.shapeX,k=this.mDragPoint.cursorX;if(A===c.Start){s=r?(p.x-S):p.x;i=r?p.x:p.x+S;}else if(A===c.None){s=p.x+(j-k);i=s+S;}else if(A===c.End){s=r?p.x:(p.x-S);i=r?p.x+S:p.x;}return{newStartTime:F.dateToAbapTimestamp(h.viewToTime(r?i:s)),newEndTime:F.dateToAbapTimestamp(h.viewToTime(r?s:i)),oldStartTime:g.getTimeStamp(),oldEndTime:g.getEndTimeStamp()};}};f.prototype._getDraggedShapeDates=function(){var s=this.getGantt().getSelection();var S=s.allSelectedDraggableUid();var o={};S.forEach(function(u){var g=s.getSelectedShapeDataByUid(u);o[u]={time:g.time,endTime:g.endTime};});return o;};f.prototype.getDroppedShapeStartTime=function(i,A,o){if(this.getGantt().getGhostAlignment()===c.None){var s=this.mDragPoint.shapeX,S=this.mDragPoint.shapeWidth,g=this.mDragPoint.cursorX;var r=C.getConfiguration().getRTL();var n=r?(i+S-(g-s)):(i-(g-s));var N=A.viewToTime(n),h=F.abapTimestampToDate(N);return h;}return o;};f.prototype.isValidDropZone=function(o){return q(o.target).closest("svg.sapGanttChartSvg").length===1;};f.prototype.isValidDropZoneForLines=function(o){return(q(o.target).closest("svg.sapGanttChartHeaderSvg").length===1||q(o.target).closest("svg.sapGanttChartSvg").length===1);};f.prototype._hideScrollBarOnBody=function(h){q(document.body).toggleClass("sapGanttDraggingOverflow",h);};f.prototype.onKeydown=function(o){if(this.skipEvent(o)){return;}if(o.keyCode===K.ESCAPE){this.stopDragging(o);this._initDragStates();}};f.prototype.stopDragging=function(o){this._enableTextSelection();this._avoidShapeSelectionAfterDragging();this.removeGhost();this.updateCursorStyle("default");this.updateHeaderCursorStyle("default");this._hideScrollBarOnBody(false);this._stopAutoScroll();d.removeDragDropEventListeners(this.getGantt());};f.prototype._avoidShapeSelectionAfterDragging=function(){if(this.bDragging&&this.oMouseDownTarget){var o=this.getShapeElementByTarget(this.oMouseDownTarget);window.setTimeout(function(){if(o){window.clearTimeout(o.iSingleClickTimer);}},100,this);}};f.prototype.isEventTargetDraggable=function(o){var s=this.getShapeElementByTarget(o.target);if(s){return s.getDraggable()&&(s.getSelected()||!this.getGantt().getEnableSelectAndDrag());}return false;};f.prototype.getShapeElementByTarget=function(t){return q(this.getDraggableDOMElement(t)).control(0,true);};f.prototype.getGanttChartByTarget=function(t){return q(t).closest("svg.sapGanttChartSvg").control(0,true);};f.prototype.isEventTargetAdhocLine=function(o){return(q(o.target).control(0,true)&&q(o.target).control(0,true).sParentAggregationName==='_marker');};f.prototype.isEventTargetDeltaLine=function(o){return(q(o.target).control(0,true)&&q(o.target).control(0,true).sParentAggregationName==='_headerDeltaArea');};f.prototype.isAdhocLineDraggable=function(o){var A=q(o.target).control(0,true).getParent();return A.getDraggable()&&A._getSelected();};f.prototype.isDeltaLineDraggable=function(o){var g=q(o.target).control(0,true).getParent();return(g.getDraggable()&&g._getIsSelected());};f.prototype.getDraggableDOMElement=function(t){return q(t).closest("["+b.SHAPE_ID_DATASET_KEY+"]").get(0);};f.prototype.isExceedDraggingThreshold=function(p){return Math.abs(p.x-this.mDragPoint.cursorX)>I||Math.abs(p.y-this.mDragPoint.cursorY)>I;};f.prototype.onDragging=function(o){if(this.$ghost){var p=this.getGantt()._getPointerExtension();if(p.isPointerInGanttChart()===false){this.updateCursorStyle("not-allowed");this._stopAutoScroll();}else{this.updateCursorStyle("move");}this.showGhost(o);this._disableTextSelection();}};f.prototype._stopAutoScroll=function(){var p=this.getGantt()._getPointerExtension();p._bAutoScroll=false;};f.prototype.isDragging=function(){return this.bDragging;};f.prototype.isAdhocLineDragging=function(){return this.adhocLineDragStart;};f.prototype.isDeltaLineDragging=function(){return this.deltaLineDragStart;};f.prototype.skipEvent=function(o){return this.bElementDraggable===false&&this.oAdhocLineElmDraggable===false&&this.oDeltaLineElmDraggable===false;};f.prototype.showGhost=function(o){var A=this.getGantt().getGhostAlignment();var O=(this.adhocLineDragStart||this.deltaLineDragStart)?this.calcGhostAligmentForLines(o,A):this.calcGhostOffsetByAlignment(o,A);if(this.adhocLineDragStart||this.deltaLineDragStart){var t=b.getTimeLabel(o,this.getGantt().getAxisTime(),this.getGantt().getLocale(),this.getDomRefs().headerSvg);document.getElementById("sapGanttDragText").innerHTML=t;}q(document.getElementById("sapGanttDragGhostWrapper")).css(O).css({"visibility":"visible"});};f.prototype.calcGhostAligmentForLines=function(o,A){var r=C.getConfiguration().getRTL();var i=a.xPosOfEvent(o);if(this.adhocLineDragStart){i-=(this.mDragPoint.shapeWidth/2);}if(this.deltaLineDragStart){var s=this.mDragPoint.shapeWidth,S=this.mDragPoint.shapeX,g=this.mDragPoint.cursorX;if(A===c.Start){i=r?(i-s):i;}else if(A===c.None){i=i+(S-g);}else if(A===c.End){i=r?i:(i-s);}}var h=a.getSvgScreenPoint(this.getDomRefs().headerSvg,{pageX:this.mDragPoint.cursorX,clientX:this.mDragPoint.cursorX,pageY:this.mDragPoint.cursorY,clientY:this.mDragPoint.cursorY});return{left:i+"px",top:h.y+"px"};};f.prototype.calcGhostOffsetByAlignment=function(o,A){var r=C.getConfiguration().getRTL();var s=this.mDragPoint.shapeWidth,S=this.mDragPoint.shapeX,i=this.mDragPoint.cursorX;var g;var h=a.xPosOfEvent(o);if(this.getGantt().getDragOrientation()===D.Vertical){var j=a.getSvgScreenPoint(this.getDomRefs().ganttSvg,{pageX:this.mDragPoint.shapeX,clientX:this.mDragPoint.shapeX,pageY:this.mDragPoint.shapeY,clientY:this.mDragPoint.shapeY});g=j.x;}else{if(A===c.Start){g=r?(h-s):h;}else if(A===c.None){g=h+(S-i);}else if(A===c.End){g=r?h:(h-s);}}var t=(a.getEventPosition(o).pageY-2);if(this.getGantt().getDragOrientation()===D.Horizontal){var k=a.getSvgScreenPoint(this.getDomRefs().ganttSvg,{pageX:this.mDragPoint.shapeX,clientX:this.mDragPoint.shapeX,pageY:this.mDragPoint.shapeY,clientY:this.mDragPoint.shapeY});t=k.y;}return{left:g+"px",top:t+"px"};};f.prototype.removeGhost=function(){this.$ghost=null;q(document.getElementById("sapGanttDragGhostWrapper")).remove();};f.prototype.createDragGhost=function(L){var $=q("<div id='sapGanttDragGhostWrapper'></div>");q(document.body).append($);var g=document.createElement("canvas");var h=L.getBBox();g.width=this.normalizeGhostImageWidth(h.width);g.height=h.height;if(this.adhocLineDrag){var i=q(this.oMouseDownTarget).control(0,true).getParent()._getLine();var j=document.getElementById(i.sId);var k=q(this.oMouseDownTarget).control(0,true).getParent()._getHeaderLine();var n=document.getElementById(k.sId);var o=j.getBBox();var p=n.getBBox();g.height+=o.height+p.height;}if(this.deltaLineDrag){var r=q(this.oMouseDownTarget).control(0,true).getParent();var s=r._getStartLine();var t=r._getEndLine();var H=r._getHeaderStartLine();var u=r._getHeaderEndLine();var v=document.getElementById(s.sId);var w=document.getElementById(t.sId);var x=document.getElementById(H.sId);var y=document.getElementById(u.sId);var z={headerStartLine:x,startLine:v,headerEndLine:y,endLine:w};var A=x.getBBox();var J=v.getBBox();g.height+=J.height+A.height;}this.createGhostImage(L,g,n,j,z);return $;};f.prototype.normalizeGhostImageWidth=function(w){return w;};f.prototype.createGhostImage=function(L,g,h,i,j){var s=this.serializeClonedSvg(g,L,h,i,j);var k=this._b64EncodeUnicode(s);var n="data:image/svg+xml;base64,"+k;this.appendGhostImageToWrapper(L,n);};f.prototype._b64EncodeUnicode=function(s){return btoa(encodeURIComponent(s).replace(/%([0-9A-F]{2})/g,function t(g,p){return String.fromCharCode('0x'+p);}));};f.prototype.appendGhostImageToWrapper=function(L,g){var n=this.getNumberOfDragObject(L);var $=q(document.getElementById("sapGanttDragGhostWrapper"));var s=this._getDragTextOverlayStyle(L);q("<div class='sapGanttDragGhost'>"+"<img class='sapGanttDragGhostImg' src='"+g+"'>"+"<div id='sapGanttDragText' class='sapGanttDragTextOverlay "+s.css+"' style='"+s.style+"'>"+n+"</div>"+"</div>").appendTo($);};f.prototype._getDragTextOverlayStyle=function(L){var r=C.getConfiguration().getRTL();var A=this.getGantt().getGhostAlignment();var s=this.mDragPoint.shapeWidth,S=this.mDragPoint.shapeX,i=this.mDragPoint.cursorX;var g=i-S;var h="";var j="";if(A===c.None){j=r?("right: "+(s-g)+"px;"):("left: "+(g)+"px;");}else if(A===c.End){h="sapGanttDragTextOverlayGhostAlignEnd";}var k="line-height: "+L.getBBox().height+"px;"+j;return{style:k,css:h};};f.prototype.serializeClonedSvg=function(g,o,h,i,j){var s=d3.ns.prefix.svg;var k=o.getBBox();var n=document.createElementNS(s,"svg");n.setAttribute("width",g.width);n.setAttribute("height",g.height);var p=o.cloneNode(true);this.removeOriginalTextNode(p);var r=document.createElementNS(s,"g");r.setAttribute("transform","translate("+-(k.x)+", "+-(k.y)+")");r.appendChild(p);if(this.adhocLineDrag){var t=h.cloneNode(true);var u=i.cloneNode(true);r.appendChild(t);r.appendChild(u);}if(this.deltaLineDrag){var v=j.headerStartLine.cloneNode(true);var w=j.startLine.cloneNode(true);var x=j.headerEndLine.cloneNode(true);var y=j.endLine.cloneNode(true);r.appendChild(v);r.appendChild(w);r.appendChild(x);r.appendChild(y);}var S=this.getGantt().getSvgDefs();if(S){var z=q(document.getElementById(S.getId())).get(0).cloneNode(true);n.appendChild(z);}n.appendChild(r);return new XMLSerializer().serializeToString(n);};f.prototype.removeOriginalTextNode=function(n){if(n.tagName==="text"){n.parentNode.removeChild(n);}var g=n.children||n.childNodes;for(var i=0;i<g.length;i++){this.removeOriginalTextNode(g[i]);}};f.prototype.getNumberOfDragObject=function(L){var s=this.getGantt().getSelection();var S=s.numberOfSelectedDraggableShapes();var r=C.getLibraryResourceBundle("sap.gantt");var o=r.getText("GNT_DRAGGED_OBJECT");var O=r.getText("GNT_DRAGGED_OBJECTS");var g=S>1?O:o;return S+" "+g;};f.prototype._disableTextSelection=function(){q(document.body).attr("unselectable","on").css({"-moz-user-select":"none","-webkit-user-select":"none","user-select":"none"}).bind("selectstart",function(o){o.preventDefault();return false;});};f.prototype._enableTextSelection=function(){q(document.body).attr("unselectable","off").css({"-moz-user-select":"","-webkit-user-select":"","user-select":""}).unbind("selectstart");};f.prototype.isAllowedVerticalOrentationDrag=function(){var g=this.getGantt();if(g.getDragOrientation()===D.Vertical){return g.oSelection.numberOfSelectedDraggableShapes()<2;}return true;};f.prototype.getRowByShape=function(s){var o=b.getRowInstancefromShape(s);var g=o.clone();g=this._addBackOriginalGanttRowProperties(o,g);return g;};f.prototype._addBackOriginalGanttRowProperties=function(o,g){g.oPropagatedProperties=o._getPropertiesToPropagate();g.propagateProperties(true);g.setParent(o.getParent());return g;};return f;});
