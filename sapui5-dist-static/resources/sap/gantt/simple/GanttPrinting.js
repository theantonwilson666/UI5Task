/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/gantt/library","sap/ui/thirdparty/jquery","sap/ui/core/Element","sap/ui/core/Core","sap/ui/core/format/NumberFormat","sap/m/Label","sap/m/Text","sap/m/Title","sap/m/Dialog","sap/m/Button","sap/m/Input","sap/m/FlexBox","sap/m/library","sap/m/FlexItemData","sap/m/ScrollContainer","sap/m/ComboBox","sap/m/RadioButton","sap/m/RadioButtonGroup","sap/m/CheckBox","sap/m/Slider","sap/m/ResponsiveScale","sap/m/StepInput","sap/m/DatePicker","sap/m/BusyDialog","sap/m/MessageStrip","sap/m/Switch","sap/m/Panel","sap/m/TextArea","sap/gantt/misc/Format","sap/gantt/simple/GanttChartContainer","sap/gantt/config/TimeHorizon","sap/gantt/axistime/FullScreenStrategy","sap/ui/core/Item","sap/ui/core/HTML","sap/ui/layout/VerticalLayout","sap/ui/layout/HorizontalLayout","sap/ui/layout/GridData","sap/ui/layout/form/SimpleForm","sap/ui/model/json/JSONModel","sap/ui/core/theming/Parameters","sap/ui/core/ResizeHandler","sap/gantt/thirdparty/jspdf","sap/gantt/thirdparty/html2canvas"],function(G,$,E,C,N,L,T,a,D,B,I,F,M,b,S,c,R,d,e,f,g,h,j,k,l,m,P,n,o,p,q,r,s,H,V,t,u,v,J,w,x,y,z){"use strict";var A=M.FlexDirection,K=G.simple.GanttChartWithTableDisplayType;z=window.html2canvas;y=window.jsPDF;var O=E.extend("sap.gantt.simple.GanttPrinting",{metadata:{library:"sap.gantt",associations:{ganttChart:{type:"sap.gantt.simple.GanttChartWithTable",multiple:false}}}});O._oPaperSizes={"A5":{width:X(148),height:X(210)},"A4":{width:X(210),height:X(297)},"A3":{width:X(297),height:X(420)},"A2":{width:X(420),height:X(594)},"A1":{width:X(594),height:X(841)},"A0":{width:X(841),height:X(1189)},"Letter":{width:Z(8.5),height:Z(11)},"Legal":{width:Z(8.5),height:Z(14)},"Tabloid":{width:Z(11),height:Z(17)},"Custom":{width:undefined,height:undefined}};var Q="9px Arial, Helvetica, sans-serif";var U="12px Arial, Helvetica, sans-serif";var W="16384";O.prototype.init=function(){this._oRb=C.getLibraryResourceBundle("sap.gantt");var i={"multiplePage":true,"portrait":true,"paperSize":"A4","paperWidth":O._oPaperSizes.A4.width,"paperHeight":O._oPaperSizes.A4.height,"unit":"mm","repeatSelectionPanel":false,"scale":100,"duration":"all","startDate":new Date(),"endDate":new Date(),"showPageNumber":false,"showHeaderText":false,"headerText":"","showFooterText":false,"footerText":"","exportAll":true,"exportRange":"","exportAsJPEG":true,"compressionQuality":75,"previewPageNumber":1,"lastPageNumber":undefined,"marginType":"default","marginLocked":false,"marginTop":X(5),"marginRight":X(5),"marginBottom":X(5),"marginLeft":X(5),"cropMarks":false,"cropMarksWeight":0.25,"cropMarksOffset":X(3)};this._oModel=new J(i);this._oGanttCanvas=undefined;this._iHeaderAndFooterHeight=X(8);this._ganttChartContainer=new p();};O.prototype.export=function(){this._savePdf();};O.prototype.open=function(){if(!this.getGanttChart()||!this._getOriginalGanttChart().isA("sap.gantt.simple.GanttChartWithTable")){throw new Error("Association 'ganttChart' of type 'sap.gantt.simple.GanttChartWithTable' is not set");}var i=this;this._createAndOpenDialog();this._oDialog.getContent()[0].setBusy(true);return this._drawClonedGantt().then(function(){return i._expandAndCollapse();}).then(function(){return i._expandRowSettings();}).then(function(){return i._createGanttCanvas();}).then(function(b1){i._oGanttCanvas=b1;i._updateDialogPreview();i._oDialog.getContent()[0].setBusy(false);});};O.prototype.close=function(){this._ganttChartClone.destroy();this._ganttChartClone=null;this._ganttChartContainer.destroy();this._ganttChartContainer=null;document.body.removeChild(this._oClonedGanttDiv);x.deregister(this._sResizeHandlerId);this._oDialog.close();this._oDialog.destroy();};O.prototype.setGanttChart=function(i){this.setAssociation("ganttChart",i);this._ganttChartClone=i.clone();this._addBackOriginalGanttRowBinding(this._ganttChartClone,i);this._originalHasRenderedShapes=i.getInnerGantt().hasRenderedShapes();this._ganttChartContainer.setParent(this._getOriginalGanttChart(),"originalGanttChart",true);this._ganttChartClone.mEventRegistry={};this._ganttChartClone.setHeight("100%");var b1=i._oSplitter._calculatedSizes[0];this._ganttChartClone.setSelectionPanelSize(b1.toString()+"px");var c1=i.getAxisTimeStrategy();if(!c1.isA("sap.gantt.axistime.FullScreenStrategy")){i.isPrint=true;i._getScrollExtension()._updateVisibleHorizonForce();var d1=this._ganttChartClone.getAxisTimeStrategy();d1.setVisibleHorizon(d1.getTotalHorizon());}var e1=c1.getVisibleHorizon();var f1=this._getHorizonDates(e1);var g1=this._horizonWidthInSec(f1);this._fPixelsBySec=i.getVisibleWidth()/g1;this._ganttChartClone.isPrint=true;this._ganttChartContainer.addGanttChart(this._ganttChartClone);return this;};O.prototype._expandAndCollapse=function(){var b1=this._getOriginalGanttChart().getTable().getBinding("rows"),c1=this._ganttChartClone.getTable().getBinding("rows"),d1=false;for(var i=0;i<b1.getLength();i++){if(b1.isExpanded(i)&&!c1.isExpanded(i)){c1.expand(i);d1=true;}else if(!b1.isExpanded(i)&&c1.isExpanded(i)){c1.collapse(i);d1=true;}}if(d1){return new Promise(function(e1){this._ganttChartClone.getTable().attachEventOnce("_rowsUpdated",e1,this);this._ganttChartClone.invalidate();}.bind(this));}else{return Promise.resolve();}};O.prototype._expandRowSettings=function(){var i=this._ganttChartClone.getShapeSchemes().find(function(b1){return!b1.getPrimary();});if(i){this._ganttChartClone.expand(i.getKey(),this._getOriginalGanttChart()._aExpandedIndices);}return this._ganttChartClone.getInnerGantt().resolveWhenReady(this._originalHasRenderedShapes);};O.prototype._onResize=function(){var i=this._oHTMLDialogPreview.getDomRef();i.style.overflow="hidden";this._resizePrintingPreviewPage();i.style.overflow="visible";};function X(i){return i*3.78;}function Y(i){return i/3.78;}function Z(i){return i/0.01042;}function _(i){return i*0.01042;}O.prototype._convertUnitToPx=function(i){var b1=this._oModel.getProperty("/unit");if(!b1){return undefined;}switch(b1){case"mm":return X(i);case"cm":return X(i)*10;case"in":return Z(i);default:return undefined;}};O.prototype._convertPxToUnit=function(i){var b1=this._oModel.getProperty("/unit");if(!b1){return undefined;}switch(b1){case"mm":return Y(i);case"cm":return Y(i)/10;case"in":return _(i);default:return undefined;}};O.prototype._onChangeUnitComboBox=function(){this._updatePaperSizeInputs();this._updateMarginInputs();};O.prototype._updatePaperSizeInputs=function(){var i=this._oModel.getProperty("/paperWidth"),b1=this._oModel.getProperty("/paperHeight");this._setPaperSizeInputs(i,b1);};O.prototype._setPaperSizeInputs=function(i,b1){if(this._oInputPaperWidth){this._oInputPaperWidth.setValue(this._convertPxToUnit(i));}if(this._oInputPaperHeight){this._oInputPaperHeight.setValue(this._convertPxToUnit(b1));}};O.prototype._setPaperSizesToModel=function(i,b1){this._oModel.setProperty("/paperWidth",i);this._oModel.setProperty("/paperHeight",b1);};O.prototype._updatePaperSizeValues=function(){var i=this._oModel.getProperty("/paperSize"),b1=this._oModel.getProperty("/portrait"),c1,d1;if(!i||i==="Custom"){return;}var e1=O._oPaperSizes[i];if(b1){c1=e1.width;d1=e1.height;}else{c1=e1.height;d1=e1.width;}this._setPaperSizeInputs(c1,d1);this._setPaperSizesToModel(c1,d1);if(i==="Letter"||i==="Legal"||i==="Tabloid"){this._oComboBoxUnit.setSelectedKey("in");}else{this._oComboBoxUnit.setSelectedKey("mm");}this._onChangeUnitComboBox();this._updateDialogPreview();};O.prototype._updatePaperOrientation=function(i){var b1=this._oModel.getProperty("/paperWidth"),c1=this._oModel.getProperty("/paperHeight");if(c1>b1){this._oModel.setProperty("/portrait",true);this._radioGroupOrientation.setSelectedIndex(0);}else{this._oModel.setProperty("/portrait",false);this._radioGroupOrientation.setSelectedIndex(1);}};O.prototype._onChangePaperSizeInput=function(i){var b1=i.getSource();var c1=this._convertUnitToPx(N.getFloatInstance().parse(b1.getValue()));if(b1===this._oInputPaperWidth){this._oModel.setProperty("/paperWidth",c1);}else{this._oModel.setProperty("/paperHeight",c1);}this._oComboBoxPaperSizes.setSelectedKey("Custom");this._updatePaperOrientation();this._updateDialogPreview();};O.prototype._onChangeCompressionSlider=function(i){var b1=i.getSource();var c1=b1.getValue();this._setCompressionComboBoxItem(c1);};O.prototype._setCompressionComboBoxItem=function(i){if(i===100){this._oComboBoxCompression.setSelectedKey("maximum");}else if(i>=75){this._oComboBoxCompression.setSelectedKey("high");}else if(i>=50){this._oComboBoxCompression.setSelectedKey("medium");}else{this._oComboBoxCompression.setSelectedKey("low");}};O.prototype._onChangeCompressionComboBox=function(i){var b1=i.getSource().getSelectedKey();var c1={maximum:100,high:75,medium:50,low:25};this._oModel.setProperty("/compressionQuality",c1[b1]);};O.prototype._onChangeOrientation=function(){var i=this._oModel.getProperty("/paperWidth"),b1=this._oModel.getProperty("/paperHeight");this._setPaperSizeInputs(b1,i);this._setPaperSizesToModel(b1,i);this._updateDialogPreview();};O.prototype._onChangeExportTypes=function(){this._updateDialogPreview();};O.prototype._setMarginInputs=function(i,b1,c1,d1){this._oInputMarginTop.setValue(this._convertPxToUnit(i));this._oInputMarginRight.setValue(this._convertPxToUnit(b1));this._oInputMarginBottom.setValue(this._convertPxToUnit(c1));this._oInputMarginLeft.setValue(this._convertPxToUnit(d1));};O.prototype._setMarginsToModel=function(i,b1,c1,d1){if(i!==undefined){this._oModel.setProperty("/marginTop",i);}if(b1!==undefined){this._oModel.setProperty("/marginRight",b1);}if(c1!==undefined){this._oModel.setProperty("/marginBottom",c1);}if(d1!==undefined){this._oModel.setProperty("/marginLeft",d1);}};O.prototype._onChangeMarginComboBox=function(i){var b1=i.getSource().getSelectedKey();var c1=X(5);if(b1==="none"){c1=0;}this._setMarginsToModel(c1,c1,c1,c1);this._setMarginInputs(c1,c1,c1,c1);this._updateDialogPreview();};O.prototype._updateModelFromMarginInputs=function(){var i,b1,c1,d1;if(this._oInputMarginTop.getValueState()!=="Error"){i=this._convertUnitToPx(this._oInputMarginTop.getValue());}if(this._oInputMarginRight.getValueState()!=="Error"){b1=this._convertUnitToPx(this._oInputMarginRight.getValue());}if(this._oInputMarginBottom.getValueState()!=="Error"){c1=this._convertUnitToPx(this._oInputMarginBottom.getValue());}if(this._oInputMarginLeft.getValueState()!=="Error"){d1=this._convertUnitToPx(this._oInputMarginLeft.getValue());}this._setMarginsToModel(i,b1,c1,d1);};O.prototype._updateMarginInputs=function(){var i=this._oModel.getProperty("/marginTop");var b1=this._oModel.getProperty("/marginRight");var c1=this._oModel.getProperty("/marginBottom");var d1=this._oModel.getProperty("/marginLeft");this._setMarginInputs(i,b1,c1,d1);};O.prototype._updateCropMarksOffsetInput=function(){var i=this._oModel.getProperty("/cropMarksOffset");this._oInputCropMarksOffset.setValue(this._convertPxToUnit(i));};O.prototype._onChangeMarginInput=function(i){var b1=i.getSource();if(b1.getValueState()==="Error"){return;}if(this._oModel.getProperty("/marginLocked")){var c1=this._convertUnitToPx(b1.getValue());this._setMarginInputs(c1,c1,c1,c1);this._setMarginsToModel(c1,c1,c1,c1);}else{this._updateModelFromMarginInputs();}this._updateDialogPreview();};O.prototype._onChangeCropMarksInput=function(i){var b1=i.getSource();var c1=this._convertUnitToPx(b1.getValue());this._oInputCropMarksOffset.setValue(this._convertPxToUnit(c1));this._oModel.setProperty("/cropMarksOffset",c1);};O.prototype._allRange=function(){this._oModel.setProperty("/startDate",this._oDatePickerFrom.getMinDate());this._oModel.setProperty("/endDate",this._oDatePickerTo.getMaxDate());};O.prototype._getFirstDayOfNextWeek=function(i){var b1=this._getOriginalGanttChart().getAxisTimeStrategy().getFirstDayOfWeek();var c1=(b1+7-i.getDay())%7;return new Date(i.getFullYear(),i.getMonth(),i.getDate()+(c1===0?7:c1));};O.prototype._nextWeekRange=function(){var i=new Date();var b1=this._getFirstDayOfNextWeek(i);this._oModel.setProperty("/startDate",this._validateDate(b1));this._oModel.setProperty("/endDate",this._validateDate(new Date(b1.getFullYear(),b1.getMonth(),b1.getDate()+7)));};O.prototype._getFirstDayOfNextMonth=function(i){return new Date(i.getFullYear(),i.getMonth()+1,1);};O.prototype._nextMonthRange=function(){var i=new Date();this._oModel.setProperty("/startDate",this._validateDate(this._getFirstDayOfNextMonth(i)));this._oModel.setProperty("/endDate",this._validateDate(new Date(i.getFullYear(),i.getMonth()+2,1)));};O.prototype._validateDate=function(i){var b1=this._oDatePickerTo.getMaxDate(),c1=this._oDatePickerFrom.getMinDate();if(i.getTime()>b1.getTime()){return b1;}if(i.getTime()<c1.getTime()){return c1;}return i;};O.prototype._onChangeDurationComboBox=function(){var i=this._oModel.getProperty("/duration");switch(i){case"all":{this._allRange();}break;case"week":{this._nextWeekRange();}break;case"month":{this._nextMonthRange();}break;case"custom":default:return;}this._updateGanttCanvas();};O.prototype._onChangeDurationDatePicker=function(){this._oComboBoxDuration.setSelectedKey("custom");this._updateGanttCanvas();};O.prototype._setEnabledPreviousButtons=function(i){this._oButtonFirst.setEnabled(i);this._oButtonPrevious.setEnabled(i);};O.prototype._setEnabledNextButtons=function(i){this._oButtonNext.setEnabled(i);this._oButtonLast.setEnabled(i);};O.prototype._updatePageNumberButtons=function(){if(!this._oGanttCanvas){this._setEnabledNextButtons(false);this._setEnabledPreviousButtons(false);return;}var i=this._oModel.getProperty("/previewPageNumber"),b1=this._oModel.getProperty("/lastPageNumber");if(!b1){b1=Number.MAX_SAFE_INTEGER;}if(i<=1){this._setEnabledPreviousButtons(false);}if(i>=b1){this._setEnabledNextButtons(false);}if(i>1){this._setEnabledPreviousButtons(true);}if(i<b1){this._setEnabledNextButtons(true);}};O.prototype._getHeaderHeight=function(){var i=this._oModel.getProperty("/showHeaderText");if(i){return this._iHeaderAndFooterHeight;}return 0;};O.prototype._isFooterMultiline=function(){if(!this._oModel.getProperty("/multiplePage")){return false;}var i=this._oModel.getProperty("/showPageNumber"),b1=this._oModel.getProperty("/showFooterText");if(!b1||!i){return false;}var c1=this._oModel.getProperty("/footerText"),d1=this._oModel.getProperty("/paperWidth"),e1;var f1=C.getConfiguration().getRTL();if(f1){e1=this._oModel.getProperty("/marginRight");}else{e1=this._oModel.getProperty("/marginLeft");}var g1=7;var h1=this._oGanttCanvas.getContext("2d");h1.font=Q;var i1=h1.measureText(c1).width;if(d1/2>(e1+X(4)+i1+X(10)+g1)){return false;}else{return true;}};O.prototype._getFooterHeight=function(){var i=this._oModel.getProperty("/showPageNumber"),b1=this._oModel.getProperty("/showFooterText");if(b1&&i){return this._isFooterMultiline()?2*this._iHeaderAndFooterHeight:this._iHeaderAndFooterHeight;}if(b1||i){return this._iHeaderAndFooterHeight;}return 0;};O.prototype._isShrinkableToOnePageByWidth=function(){var i=this._getPaperContentWidth()/this._getPaperContentHeight(),b1=this._oGanttCanvas.width/this._oGanttCanvas.height;return i<=b1;};O.prototype._getPaperContentWidth=function(){var i=this._oModel.getProperty("/paperWidth"),b1=this._oModel.getProperty("/marginLeft"),c1=this._oModel.getProperty("/marginRight");return i-b1-c1;};O.prototype._getPaperContentHeight=function(){var i=this._oModel.getProperty("/paperHeight"),b1=this._oModel.getProperty("/marginTop"),c1=this._oModel.getProperty("/marginBottom");return i-b1-this._getHeaderHeight()-c1-this._getFooterHeight();};O.prototype._getScale=function(){return(100/this._oModel.getProperty("/scale"))*2;};O.prototype._getCroppingWidth=function(){return this._getScale()*this._getPaperContentWidth();};O.prototype._getCroppingHeight=function(){return this._getScale()*this._getPaperContentHeight();};O.prototype._getPagesInARow=function(){return Math.ceil(this._oGanttCanvas.width/this._getCroppingWidth());};O.prototype._getPagesInAColumn=function(){return Math.ceil(this._oGanttCanvas.height/this._getCroppingHeight());};O.prototype._updateLastPageNumber=function(){if(!this._oGanttCanvas){return;}var i=this._getPagesInARow()*this._getPagesInAColumn();this._oModel.setProperty("/lastPageNumber",i);var b1=this._oModel.getProperty("/previewPageNumber");if(b1>i){this._oModel.setProperty("/previewPageNumber",i);}};O.prototype._onPressButtonFirst=function(){this._oModel.setProperty("/previewPageNumber",1);this._updatePageNumberButtons();this._updateDialogPreviewCanvas();};O.prototype._onPressButtonPrevious=function(){var i=this._oModel.getProperty("/previewPageNumber");this._oModel.setProperty("/previewPageNumber",i-1);this._updatePageNumberButtons();this._updateDialogPreviewCanvas();};O.prototype._onPressButtonNext=function(){var i=this._oModel.getProperty("/previewPageNumber");this._oModel.setProperty("/previewPageNumber",i+1);this._updatePageNumberButtons();this._updateDialogPreviewCanvas();};O.prototype._onPressButtonLast=function(){var i=this._oModel.getProperty("/lastPageNumber");if(!i){return;}this._oModel.setProperty("/previewPageNumber",i);this._updatePageNumberButtons();this._updateDialogPreviewCanvas();};O.prototype._getOriginalGanttChart=function(){return sap.ui.getCore().byId(this.getAssociation("ganttChart"));};O.prototype._setGanttCloneDivWidth=function(){var i=this._getOriginalGanttChart(),b1=this._ganttChartClone.getAxisTimeStrategy(),c1=b1.getTotalHorizon(),d1=this._getHorizonDates(c1),e1=this._horizonWidthInSec(d1),f1=Math.ceil(this._fPixelsBySec*e1);var g1=i.getDisplayType()===K.Both?i.getTable().getDomRef().offsetWidth:0;this._oClonedGanttDiv.style.width=(g1+f1+10).toString()+"px";};O.prototype._setGanttCloneDivHeight=function(){var i=this._getOriginalGanttChart().getTable();var b1=i._getTotalRowCount(),c1=i._aRowHeights;var d1=c1.reduce(function(f1,g1){return f1+g1;});var e1=Math.ceil((d1/c1.length)*b1);this._oClonedGanttDiv.style.height=(e1+102).toString()+"px";};O.prototype._createImgElementsFromSvgImages=function(){var b1=this._ganttChartClone.$().find("svg.sapGanttChartSvg");if(!b1.length){return;}var c1=this._ganttChartClone.$().find(".sapGanttChartCnt")[0];if(!c1){return;}c1.style.position="relative";var d1=b1.find("image");for(var i=0;i<d1.length;i++){var e1=d1[i];var f1=document.createElement("img");f1.src=e1.getAttribute("href");f1.style.position="absolute";f1.style.top=e1.getAttribute("y")+"px";f1.style.left=e1.getAttribute("x")+"px";f1.style.width=e1.getAttribute("width")+"px";f1.style.height=e1.getAttribute("height")+"px";c1.appendChild(f1);}};O.prototype._createGanttCanvas=function(){this._setStyleToGanttChartSvg(this._ganttChartClone);this._createImgElementsFromSvgImages();if(this._oClonedGanttDiv.offsetWidth>W||this._oClonedGanttDiv.offsetHeight>W){if(this._oGanttCanvas){delete this._oGanttCanvas;this._oGanttCanvas=null;}return Promise.resolve();}return z(this._oClonedGanttDiv,{allowTaint:true,scale:2,logging:false});};O.prototype._updateGanttCanvas=function(){var i=this._oModel;var b1=this._ganttChartClone.getAxisTimeStrategy();var c1=b1.getVisibleHorizon().clone();var d1=b1.getTotalHorizon().clone();c1.setStartTime(i.getProperty("/startDate"));c1.setEndTime(i.getProperty("/endDate"));d1.setStartTime(i.getProperty("/startDate"));d1.setEndTime(i.getProperty("/endDate"));b1.setVisibleHorizon(c1);b1.setTotalHorizon(d1);this._setGanttCloneDivWidth();this._ganttChartClone.invalidate();this._oFlexBoxPreview.setBusy(true);return this._ganttChartClone.getInnerGantt().resolveWhenReady(this._originalHasRenderedShapes).then(function(){this._createGanttCanvas().then(function(e1){this._oGanttCanvas=e1;this._updateDialogPreview();this._oFlexBoxPreview.setBusy(false);}.bind(this)).catch(function(){this._oFlexBoxPreview.setBusy(false);}.bind(this));}.bind(this)).catch(function(){this._oFlexBoxPreview.setBusy(false);}.bind(this));};O.prototype._drawClonedGantt=function(){if(this._oClonedGanttDiv){return Promise.reject();}this._oClonedGanttDiv=document.createElement("div");this._oClonedGanttDiv.id="clonedGanttDiv";if(this._getOriginalGanttChart().$().closest(".sapUiSizeCompact").length>0){this._oClonedGanttDiv.classList.add("sapUiSizeCompact");}this._oClonedGanttDiv.style.position="absolute";this._oClonedGanttDiv.style.top="-17000px";this._oClonedGanttDiv.style.left="-17000px";document.body.appendChild(this._oClonedGanttDiv);this._setGanttCloneDivWidth();this._setGanttCloneDivHeight();var i=this._oModel;var b1=this._ganttChartClone.getAxisTimeStrategy();b1.getVisibleHorizon().setStartTime(i.getProperty("/startDate"));b1.getVisibleHorizon().setEndTime(i.getProperty("/endDate"));this._ganttChartContainer.placeAt("clonedGanttDiv");this._addBackOriginalGanttRowBinding(this._ganttChartClone,this._getOriginalGanttChart());return this._ganttChartClone.getInnerGantt().resolveWhenReady(this._originalHasRenderedShapes);};O.prototype._addBackOriginalGanttRowBinding=function(i,b1){if(i.getTable().getBindingInfo("rows").binding==null){i.oPropagatedProperties=b1._getPropertiesToPropagate();i.propagateProperties(true);var c1=b1.getTable().getBinding("rows"),d1=i.getTable().getBinding("rows");if(c1){if(c1.sCustomParams){d1.sCustomParams=c1.sCustomParams;}if(c1.aApplicationFilters&&c1.aApplicationFilters.length>0){d1.filter(c1.aApplicationFilters,sap.ui.model.FilterType.Application);}if(c1.aSorters&&c1.aSorters.length>0){d1.sort(c1.aSorters);}}}};O.prototype._resizePrintingPreviewPage=function(){var i=this._oHTMLDialogPreview.getDomRef(),b1=this._oHTMLDialogPreview.$().find(".sapGanttPrintingPreviewPageDiv")[0],c1=i.offsetHeight,d1=this._oModel.getProperty("/paperHeight"),e1=this._oModel.getProperty("/paperWidth"),f1=this._oModel.getProperty("/portrait"),g1,h1;if(f1){g1=c1/d1;h1=e1*g1;}else{g1=c1/e1;h1=c1;c1=d1*g1;}b1.style.width=h1.toString()+"px";b1.style.height=c1.toString()+"px";};O.prototype._getCanvasOfPageN=function(i,b1){var c1=this._oModel.getProperty("/lastPageNumber");if(i>c1){return null;}var d1=document.createElement("canvas");var e1=d1.getContext("2d");e1.imageSmoothingEnabled=false;var f1=this._getCroppingWidth(),g1=this._getCroppingHeight();var h1=this._getPagesInARow();var i1=this._oModel.getProperty("/paperWidth"),j1=this._oModel.getProperty("/paperHeight");var k1=this._oModel.getProperty("/marginTop"),l1=this._oModel.getProperty("/marginRight"),m1=this._oModel.getProperty("/marginBottom"),n1=this._oModel.getProperty("/marginLeft");var o1=(i-1)%h1,p1=Math.floor((i-1)/h1);d1.width=i1;d1.height=j1;if(!b1){d1.style.height="100%";d1.style.width="auto";}e1.fillStyle="white";e1.fillRect(0,0,d1.width,d1.height);e1.fillStyle=w.get("sapUiBaseText");e1.textBaseline="middle";e1.font=Q;var q1;var r1=C.getConfiguration().getRTL();if(r1){e1.textAlign="right";q1=i1-l1-X(4);}else{e1.textAlign="left";q1=n1+X(4);}var s1=this._oModel.getProperty("/showHeaderText");if(s1){var t1=this._oModel.getProperty("/headerText");e1.fillText(t1,q1,k1+(this._iHeaderAndFooterHeight/2));}if(this._oModel.getProperty("/showFooterText")){e1.fillText(this._oModel.getProperty("/footerText"),q1,j1-m1-(this._iHeaderAndFooterHeight/2)-(this._isFooterMultiline()?this._iHeaderAndFooterHeight:0));}var u1=this._oModel.getProperty("/showPageNumber"),v1=this._oModel.getProperty("/multiplePage");if(v1&&u1){e1.font=U;e1.textAlign="center";e1.fillText(i.toString(),i1/2,j1-m1-(this._iHeaderAndFooterHeight/2));}if(v1){var w1=o1*f1,x1=p1*g1,y1=0,z1=0;var A1=false;if((w1+f1)>this._oGanttCanvas.width){A1=true;f1=(this._oGanttCanvas.width-w1);z1=f1/this._getScale();}var B1=false;if((x1+g1)>this._oGanttCanvas.height){B1=true;g1=(this._oGanttCanvas.height-x1);y1=g1/this._getScale();}e1.drawImage(this._oGanttCanvas,w1,x1,f1,g1,n1,k1+this._getHeaderHeight(),A1?z1:this._getPaperContentWidth(),B1?y1:this._getPaperContentHeight());}else{var C1=this._getPaperContentWidth(),D1=this._getPaperContentHeight();var E1=this._isShrinkableToOnePageByWidth();var F1;if(E1){F1=C1/this._oGanttCanvas.width;D1=this._oGanttCanvas.height*F1;}else{F1=D1/this._oGanttCanvas.height;C1=this._oGanttCanvas.width*F1;}e1.drawImage(this._oGanttCanvas,0,0,this._oGanttCanvas.width,this._oGanttCanvas.height,n1,k1+this._getHeaderHeight(),C1,D1);}return d1;};function a1(i){while(i.firstChild){i.removeChild(i.firstChild);}}O.prototype._createPreviewErrorMessageStrip=function(i){return new l({text:this._oRb.getText(i?"GNT_PRNTG_ERROR_TOOHIGHCHART":"GNT_PRNTG_ERROR_BIGCHART"),showIcon:true,type:"Error"});};O.prototype._updateDialogPreviewCanvas=function(){var i=this._oHTMLDialogPreview.$().find(".sapGanttPrintingPreviewPageDiv");var b1=i[0];if(this._oGanttCanvas){this._oButtonExport.setEnabled(true);var c1=this._oModel.getProperty("/multiplePage");var d1=this._getCanvasOfPageN(c1?this._oModel.getProperty("/previewPageNumber"):1,false);a1(b1);this._resizePrintingPreviewPage();b1.appendChild(d1);}else if(!this._oGanttCanvas&&(this._oClonedGanttDiv.offsetWidth>W||this._oClonedGanttDiv.offsetHeight>W)){this._oButtonExport.setEnabled(false);this._resizePrintingPreviewPage();if(!this._oHTMLDialogPreview.$().find("#"+this.getId()+"-previewErrorMessageStrip").length){a1(b1);if(!this._oPreviewErrorMessageStrip){this._oPreviewErrorMessageStrip=this._createPreviewErrorMessageStrip(this._oClonedGanttDiv.offsetHeight>W);}var e1=document.createElement("div");e1.id=this.getId()+"-previewErrorMessageStrip";e1.style.width="80%";b1.appendChild(e1);this._oPreviewErrorMessageStrip.placeAt(this.getId()+"-previewErrorMessageStrip");}}else{throw new Error("Gantt chart canvas does not exist.");}i.addClass("sapGanttPrintingPreviewPageDivBorder");};O.prototype._updateDialogPreview=function(){this._updateLastPageNumber();this._updatePageNumberButtons();this._updateDialogPreviewCanvas();};O.prototype._setStylesToDom=function(b1){function c1(e1){var f1=getComputedStyle(e1);var i,g1,h1,i1;var j1=["height","width","min-height","min-width"];var k1="";for(i=0,g1=f1.length;i<g1;i++){h1=f1[i];if(!((e1 instanceof SVGElement)&&j1.indexOf(h1)>=0)){i1=f1.getPropertyValue(h1);k1+=h1+":"+i1+";";}}e1.setAttribute("style",k1);}function d1(i){c1(i);e1(i);function e1(f1){if(f1&&f1.hasChildNodes()){var g1=f1.firstChild;while(g1){if(g1.nodeType===1&&g1.nodeName!="SCRIPT"){c1(g1);e1(g1);}g1=g1.nextSibling;}}}}d1(b1);};O.prototype._setStyleToGanttChartSvg=function(i){var b1=i.$().find("svg.sapGanttChartSvg")[0];var c1=i.$().find("svg.sapGanttChartHeaderSvg")[0];if(b1){this._setStylesToDom(b1);}if(c1){this._setStylesToDom(c1);}};O.prototype._getHorizonDates=function(i){var b1=i.getStartTime();var c1=i.getEndTime();return{"startTime":new Date(o.abapTimestampToDate(b1)),"endTime":new Date(o.abapTimestampToDate(c1))};};O.prototype._horizonWidthInSec=function(i){if(i&&i.startTime&&i.endTime){return i.endTime.getTime()-i.startTime.getTime();}return 0;};O.prototype._pageToBeExported=function(){if(!this._oModel.getProperty("/multiplePage")){return[1];}var b1=this._oModel.getProperty("/lastPageNumber"),c1=this._oModel.getProperty("/exportAll"),d1=[];if(c1){for(var i=1;i<=b1;i++){d1.push(i);}return d1;}else{var e1=this._oModel.getProperty("/exportRange");e1=e1.replace(/\s/g,"");var f1=N.getIntegerInstance();var g1=e1.split(",");g1.forEach(function(h1){if(h1.indexOf("-")!==-1){var i1=h1.split("-");var j1=f1.parse(i1[0]);var k1=f1.parse(i1[1]);for(var i=j1;i<=k1;i++){d1.push(i);}}else{d1.push(f1.parse(h1));}});return d1;}};O.prototype._validateFields=function(){var i=true;i&=this._validateExportRangeInput();i&=(this._oInputMarginTop.getValueState()!=="Error");i&=(this._oInputMarginRight.getValueState()!=="Error");i&=(this._oInputMarginBottom.getValueState()!=="Error");i&=(this._oInputMarginLeft.getValueState()!=="Error");return i;};O.prototype._savePdf=function(){if(!this._validateFields()){return;}var b1=this._oModel.getProperty("/portrait")?"p":"l",c1=this._oModel.getProperty("/paperWidth"),d1=this._oModel.getProperty("/paperHeight"),e1=this._oModel.getProperty("/exportAsJPEG"),f1=this._oModel.getProperty("/compressionQuality")/100,g1=this._oModel.getProperty("/paperSize");var h1=new y({orientation:b1,unit:"px",format:g1==="Custom"?[c1*0.75,d1*0.75]:g1.toLowerCase()});var i1=this._pageToBeExported();for(var i=0;i<i1.length;i++){var j1=this._getCanvasOfPageN(i1[i],true);if(!j1){continue;}if(i!==0){h1.addPage();}if(e1){h1.addImage(j1.toDataURL("image/jpeg",f1),"JPEG",0,0);}else{h1.addImage(j1.toDataURL("image/png"),"PNG",0,0);}}var k1=new Date();h1.save("GanttChartExport-"+k1.toISOString()+".pdf");};O.prototype._createPaperComboBox=function(){this._oComboBoxPaperSizes=new c({selectedKey:"{setting>/paperSize}",change:this._updatePaperSizeValues.bind(this),items:[new s({key:"A5",text:"A5"}),new s({key:"A4",text:"A4"}),new s({key:"A3",text:"A3"}),new s({key:"A2",text:"A2"}),new s({key:"A1",text:"A1"}),new s({key:"A0",text:"A0"}),new s({key:"Letter",text:"Letter"}),new s({key:"Legal",text:"Legal"}),new s({key:"Tabloid",text:"Tabloid"}),new s({key:"Custom",text:"Custom"})]});return this._oComboBoxPaperSizes;};O.prototype._createPaperSizeFields=function(){this._oInputPaperWidth=new I({width:"20%",type:"Number",change:this._onChangePaperSizeInput.bind(this)});this._oInputPaperHeight=new I({width:"20%",type:"Number",change:this._onChangePaperSizeInput.bind(this)});this._updatePaperSizeInputs();return new F({renderType:"Bare",alignItems:"Center",justifyContent:"SpaceBetween",items:[this._oInputPaperWidth,new T({text:"×"}),this._oInputPaperHeight,this._oComboBoxUnit=new c({width:"50%",selectedKey:"{setting>/unit}",change:this._onChangeUnitComboBox.bind(this),items:[new s({key:"mm",text:this._oRb.getText("GNT_PRNTG_MILLIMETERS")}),new s({key:"cm",text:this._oRb.getText("GNT_PRNTG_CENTIMETERS")}),new s({key:"in",text:this._oRb.getText("GNT_PRNTG_INCHES")})]})]});};O.prototype._createDurationComboBox=function(){var i=this._getOriginalGanttChart().getAxisTimeStrategy(),b1=i.getTotalHorizon(),c1=new Date(o.abapTimestampToDate(b1.getEndTime())),d1=new Date();this._oComboBoxDuration=new c({selectedKey:"{setting>/duration}",change:this._onChangeDurationComboBox.bind(this),items:[new s({key:"all",text:this._oRb.getText("GNT_PRNTG_DURATION_ALL")}),new s({key:"week",enabled:this._getFirstDayOfNextWeek(d1).getTime()<c1.getTime(),text:this._oRb.getText("GNT_PRNTG_DURATION_NEXT_WEEK")}),new s({key:"month",enabled:this._getFirstDayOfNextMonth(d1).getTime()<c1.getTime(),text:this._oRb.getText("GNT_PRNTG_DURATION_NEXT_MONTH")}),new s({key:"custom",text:this._oRb.getText("GNT_PRNTG_DURATION_CUSTOM")})]});return this._oComboBoxDuration;};O.prototype._createDatePicker=function(){var i=this._getOriginalGanttChart().getAxisTimeStrategy();var b1=i.getTotalHorizon();var c1=new Date(o.abapTimestampToDate(b1.getStartTime()));var d1=new Date(o.abapTimestampToDate(b1.getEndTime()));this._oModel.setProperty("/startDate",c1);this._oModel.setProperty("/endDate",d1);this._oDatePickerFrom=new j({width:"47%",minDate:c1,maxDate:"{setting>/endDate}",dateValue:"{setting>/startDate}",change:this._onChangeDurationDatePicker.bind(this),enabled:true});this._oDatePickerTo=new j({width:"47%",minDate:"{setting>/startDate}",maxDate:d1,dateValue:"{setting>/endDate}",change:this._onChangeDurationDatePicker.bind(this),enabled:true});return new F({renderType:"Bare",alignItems:"Center",justifyContent:"SpaceBetween",items:[this._oDatePickerFrom,new T({text:"~"}),this._oDatePickerTo]});};O.prototype._createScale=function(){return new f({min:50,max:200,step:1,width:"25rem",value:"{setting>/scale}",visible:"{setting>/multiplePage}",liveChange:this._updateDialogPreview.bind(this),showAdvancedTooltip:true,inputsAsTooltips:true});};O.prototype._validateExportRangeInput=function(){if(this._oModel.getProperty("/exportAll")){return true;}var i=this._oModel.getProperty("/exportRange").replace(/\s/g,"");if(/^((\d+),|(\d+-\d+),)*((\d+)|(\d+-\d+))+$/.test(i)){this._oInputRange.setValueState("None");return true;}this._oInputRange.setValueState("Error");this._oInputRange.setValueStateText(this._oRb.getText("GNT_PRNTG_PAGE_RANGE_ERROR"));return false;};O.prototype._createPageRange=function(){var i=function(b1){var c1=b1.getSource().getSelectedIndex();if(c1===0){this._oButtonExport.setEnabled(true);this._oInputRange.setValueState("None");}};return new F({renderType:"Bare",alignItems:"Center",visible:"{setting>/multiplePage}",justifyContent:"SpaceBetween",items:[new d({layoutData:new b({shrinkFactor:0,growFactor:1}),selectedIndex:this._oModel.getProperty("/exportAll")?0:1,columns:2,select:i.bind(this),buttons:[new R({id:"all",text:this._oRb.getText("GNT_PRNTG_PAGE_RANGE_ALL"),selected:"{setting>/exportAll}"}),new R({id:"range",text:this._oRb.getText("GNT_PRNTG_PAGE_RANGE_RANGE")+" "})]}),this._oInputRange=new I({layoutData:new b({growFactor:1}),value:"{setting>/exportRange}",change:this._validateExportRangeInput.bind(this),enabled:{path:"setting>/exportAll",formatter:function(b1){return!b1;}}}).addStyleClass("sapGanttPrintingPageRangeInput")]});};O.prototype._createLabelWithSwitch=function(i,b1){return new F({renderType:"Bare",visible:"{setting>/multiplePage}",alignItems:"Center",items:[new L({text:i}),new m({state:b1,change:this._updateDialogPreviewCanvas.bind(this)}).addStyleClass("sapGanttPrintingSwitchPadding")]});};O.prototype._createCheckBoxWithInput=function(i,b1,c1){return new F({renderType:"Bare",alignItems:"Start",justifyContent:"SpaceBetween",items:[new e({selected:b1,text:i,select:this._updateDialogPreviewCanvas.bind(this)}),new I({width:"65%",value:c1,enabled:b1,change:this._updateDialogPreviewCanvas.bind(this)})]});};O.prototype._createPanel=function(i,b1){return new P({expandable:true,expanded:false,headerText:i,content:[new F({renderType:"Bare",direction:A.Column,items:[b1]})]});};O.prototype._createCompressionSlider=function(){return new f({min:1,max:100,step:1,change:this._onChangeCompressionSlider.bind(this),value:{path:"setting>/compressionQuality",type:"sap.ui.model.type.Integer"},visible:"{setting>/exportAsJPEG}",showAdvancedTooltip:true,inputsAsTooltips:true});};O.prototype._createCompressionComboBox=function(){this._oComboBoxCompression=new c({visible:"{setting>/exportAsJPEG}",change:this._onChangeCompressionComboBox.bind(this),items:[new s({key:"maximum",text:this._oRb.getText("GNT_PRNTG_COMPRESSION_MAXIMUM")}),new s({key:"high",text:this._oRb.getText("GNT_PRNTG_COMPRESSION_HIGH")}),new s({key:"medium",text:this._oRb.getText("GNT_PRNTG_COMPRESSION_MEDIUM")}),new s({key:"low",text:this._oRb.getText("GNT_PRNTG_COMPRESSION_LOW")})]});var i=this._oModel.getProperty("/compressionQuality");this._setCompressionComboBoxItem(i);return this._oComboBoxCompression;};O.prototype._updateInputsStep=function(i){var b1=0.1;if(i==="mm"){b1=1;}return b1;};O.prototype._createMargin=function(){function i(b1){return Math.round(this._convertPxToUnit(b1/3));}return[new L({text:this._oRb.getText("GNT_PRNTG_MARGIN")+":"}),new c({change:this._onChangeMarginComboBox.bind(this),selectedKey:"{setting>/marginType}",items:[new s({key:"default",text:this._oRb.getText("GNT_PRNTG_MARGIN_DEFAULT")}),new s({key:"none",text:this._oRb.getText("GNT_PRNTG_MARGIN_NONE")}),new s({key:"custom",text:this._oRb.getText("GNT_PRNTG_MARGIN_CUSTOM")})]}),new F({renderType:"Bare",alignItems:"Center",visible:{path:"setting>/marginType",formatter:function(b1){return b1==="custom";}},items:[new F({direction:A.Column,layoutData:new b({shrinkFactor:0,growFactor:0,baseSize:"8rem"}),items:[new L({text:this._oRb.getText("GNT_PRNTG_MARGIN_TOP")}),this._oInputMarginTop=new h({min:0,step:{path:"setting>/unit",formatter:this._updateInputsStep},displayValuePrecision:1,change:this._onChangeMarginInput.bind(this),value:this._convertPxToUnit(this._oModel.getProperty("/marginTop")),fieldWidth:"7rem",validationMode:"LiveChange",valueStateText:this._oRb.getText("GNT_PRNTG_MARGIN_HEIGHT_ERROR"),max:{parts:[{path:"setting>/paperHeight"},{path:"setting>/unit"}],formatter:i.bind(this)},description:"{setting>/unit}"}).addStyleClass("sapGanttPrintingBottomMargin"),new L({text:this._oRb.getText("GNT_PRNTG_MARGIN_LEFT")}),this._oInputMarginLeft=new h({min:0,step:{path:"setting>/unit",formatter:this._updateInputsStep},displayValuePrecision:1,change:this._onChangeMarginInput.bind(this),value:this._convertPxToUnit(this._oModel.getProperty("/marginLeft")),fieldWidth:"7rem",validationMode:"LiveChange",valueStateText:this._oRb.getText("GNT_PRNTG_MARGIN_WIDTH_ERROR"),max:{parts:[{path:"setting>/paperWidth"},{path:"setting>/unit"}],formatter:i.bind(this)},description:"{setting>/unit}"})]}),new F({direction:A.Column,layoutData:new b({shrinkFactor:0,growFactor:0,baseSize:"8rem"}),items:[new L({text:this._oRb.getText("GNT_PRNTG_MARGIN_BOTTOM")}),this._oInputMarginBottom=new h({min:0,step:{path:"setting>/unit",formatter:this._updateInputsStep},displayValuePrecision:1,change:this._onChangeMarginInput.bind(this),value:this._convertPxToUnit(this._oModel.getProperty("/marginBottom")),fieldWidth:"7rem",validationMode:"LiveChange",valueStateText:this._oRb.getText("GNT_PRNTG_MARGIN_HEIGHT_ERROR"),max:{parts:[{path:"setting>/paperHeight"},{path:"setting>/unit"}],formatter:i.bind(this)},description:"{setting>/unit}"}).addStyleClass("sapGanttPrintingBottomMargin"),new L({text:this._oRb.getText("GNT_PRNTG_MARGIN_RIGHT")}),this._oInputMarginRight=new h({min:0,step:{path:"setting>/unit",formatter:this._updateInputsStep},displayValuePrecision:1,change:this._onChangeMarginInput.bind(this),value:this._convertPxToUnit(this._oModel.getProperty("/marginRight")),fieldWidth:"7rem",validationMode:"LiveChange",valueStateText:this._oRb.getText("GNT_PRNTG_MARGIN_WIDTH_ERROR"),max:{parts:[{path:"setting>/paperWidth"},{path:"setting>/unit"}],formatter:i.bind(this)},description:"{setting>/unit}"})]}).addStyleClass("sapGanttPrintingLeftMargin"),new B({icon:{path:"setting>/marginLocked",formatter:function(b1){if(b1){return"sap-icon://chain-link";}return"sap-icon://broken-link";}},press:function(){var b1=this._oModel.getProperty("/marginLocked");this._oModel.setProperty("/marginLocked",!b1);}.bind(this),type:"Transparent"}).addStyleClass("sapGanttPrintingLockButton sapGanttPrintingLeftMargin")]}).addStyleClass("sapGanttPrintingTopMargin sapGanttPrintingTopMargin")];};O.prototype._createCropMarks=function(){return[new m({state:"{setting>/cropMarks}"}),new F({renderType:"Bare",visible:"{setting>/cropMarks}",items:[new F({direction:A.Column,layoutData:new b({shrinkFactor:0,growFactor:0,baseSize:"8rem"}),items:[new L({text:"Weight:"}),new h({min:0,step:0.05,displayValuePrecision:2,value:"{setting>/cropMarksWeight}",fieldWidth:"7rem",description:"pt"})]}),new F({direction:A.Column,layoutData:new b({shrinkFactor:0,growFactor:0,baseSize:"8rem"}),items:[new L({text:"Offset:"}),this._oInputCropMarksOffset=new h({min:0,step:{path:"setting>/unit",formatter:this._updateInputsStep},displayValuePrecision:1,change:this._onChangeCropMarksInput.bind(this),value:this._convertPxToUnit(this._oModel.getProperty("/cropMarksOffset")),fieldWidth:"7rem",description:"{setting>/unit}"})]}).addStyleClass("sapGanttPrintingLeftMargin")]}).addStyleClass("sapGanttPrintingTopMargin")];};O.prototype._createCompression=function(){var i=this._oModel.getProperty("/exportAsJPEG");return[new L({text:this._oRb.getText("GNT_PRNTG_EXPORT_TYPES")}),new d({columns:2,selectedIndex:i?0:1,buttons:[new R({id:"jpeg",text:"JPEG",selected:"{setting>/exportAsJPEG}"}),new R({id:"png",text:"PNG"})]}).addStyleClass("sapGanttPrintingBottomMargin"),new L({text:this._oRb.getText("GNT_PRNTG_COMPRESSION_QUALITY"),visible:"{setting>/exportAsJPEG}"}),this._createCompressionComboBox(),this._createCompressionSlider().addStyleClass("sapGanttPrintingTopMargin sapGanttPrintingBottomMargin"),new l({text:this._oRb.getText("GNT_PRNTG_COMPRESSION_PNG_WARNING"),showIcon:true,type:"Warning",visible:{path:"setting>/exportAsJPEG",type:"sap.ui.model.type.Boolean",formatter:function(i){return!i;}}}).addStyleClass("sapGanttPrintingBottomMargin")];};O.prototype._createOptionsForm=function(){return new F({renderType:"Bare",direction:A.Column,items:[new L({text:this._oRb.getText("GNT_PRNTG_EXPORT_TYPES")}),new d({columns:2,selectedIndex:this._oModel.getProperty("/multiplePage")?0:1,select:this._onChangeExportTypes.bind(this),buttons:[new R({id:"Multiple",text:this._oRb.getText("GNT_PRNTG_MULTIPLE_PAGE"),selected:"{setting>/multiplePage}"}),new R({id:"Single",text:this._oRb.getText("GNT_PRNTG_SINGLE_PAGE")})]}).addStyleClass("sapGanttPrintingBottomMargin"),new L({text:this._oRb.getText("GNT_PRNTG_ORIENTATION")}),this._radioGroupOrientation=new d({columns:2,selectedIndex:this._oModel.getProperty("/portrait")?0:1,select:this._onChangeOrientation.bind(this),buttons:[new R({id:"Portrait",text:this._oRb.getText("GNT_PRNTG_PORTRAIT"),selected:"{setting>/portrait}"}),new R({id:"Landscape",text:this._oRb.getText("GNT_PRNTG_LANDSCAPE")})]}).addStyleClass("sapGanttPrintingBottomMargin"),new L({text:this._oRb.getText("GNT_PRNTG_PAPER_SIZE")}),this._createPaperComboBox(),this._createPaperSizeFields().addStyleClass("sapGanttPrintingBottomMargin"),new L({text:this._oRb.getText("GNT_PRNTG_DURATION")}),this._createDurationComboBox(),this._createDatePicker().addStyleClass("sapGanttPrintingBottomMargin"),new L({text:this._oRb.getText("GNT_PRNTG_SCALE"),visible:"{setting>/multiplePage}"}),this._createScale().addStyleClass("sapGanttPrintingBottomMargin"),new L({text:this._oRb.getText("GNT_PRNTG_PAGE_RANGE"),visible:"{setting>/multiplePage}"}),this._createPageRange().addStyleClass("sapGanttPrintingBottomMargin"),new L({text:this._oRb.getText("GNT_PRNTG_HEADER_AND_FOOTER")}),this._createCheckBoxWithInput(this._oRb.getText("GNT_PRNTG_HEADER"),"{setting>/showHeaderText}","{setting>/headerText}"),this._createCheckBoxWithInput(this._oRb.getText("GNT_PRNTG_FOOTER"),"{setting>/showFooterText}","{setting>/footerText}").addStyleClass("sapGanttPrintingBottomMargin"),this._createLabelWithSwitch(this._oRb.getText("GNT_PRNTG_SHOW_PAGE_NUMBER"),"{setting>/showPageNumber}").addStyleClass("sapGanttPrintingBottomMargin"),this._createPanel(this._oRb.getText("GNT_PRNTG_MARGIN"),this._createMargin()),this._createPanel(this._oRb.getText("GNT_PRNTG_COMPRESSION"),this._createCompression())]});};O.prototype._createDialogContent=function(){var i=new F({renderType:"Bare",fitContainer:true,items:[this._oFlexBoxPreview=new F({renderType:"Bare",layoutData:new b({shrinkFactor:1,growFactor:1,baseSize:"auto"}),direction:A.Column,items:[new F({renderType:"Bare",layoutData:new b({shrinkFactor:0,growFactor:0,baseSize:"3.5rem"})}),this._oHTMLDialogPreview=new H({content:"<div class=\"sapGanttPrintingPreviewContentDiv\"><div class=\"sapGanttPrintingPreviewPageDiv\"></div></div>"}),new F({renderType:"Bare",justifyContent:"Center",alignItems:"Center",layoutData:new b({shrinkFactor:0,growFactor:0,baseSize:"6rem"}),items:[this._oButtonFirst=new B({icon:"sap-icon://close-command-field",visible:"{setting>/multiplePage}",press:this._onPressButtonFirst.bind(this),type:"Transparent"}).addStyleClass("sapGanttPrintingPreviewIconMarginRight"),this._oButtonPrevious=new B({icon:"sap-icon://navigation-left-arrow",visible:"{setting>/multiplePage}",press:this._onPressButtonPrevious.bind(this),type:"Transparent"}),new T({textAlign:"Center",visible:"{setting>/multiplePage}",width:"7.25rem",text:{parts:[{path:"setting>/previewPageNumber"},{path:"setting>/lastPageNumber"}],formatter:function(b1,c1){return c1?this._oRb.getText("GNT_PRNTG_OF",[b1,c1]):b1.toString();}.bind(this)}}).addStyleClass("sapGanttPrintingPreviewText"),this._oButtonNext=new B({icon:"sap-icon://navigation-right-arrow",visible:"{setting>/multiplePage}",press:this._onPressButtonNext.bind(this),type:"Transparent"}).addStyleClass("sapGanttPrintingPreviewIconMarginRight"),this._oButtonLast=new B({icon:"sap-icon://open-command-field",visible:"{setting>/multiplePage}",press:this._onPressButtonLast.bind(this),type:"Transparent"})]}).addStyleClass("sapGanttPrintingPreviewFooter")]}).addStyleClass("sapGanttPrintingPreviewContent"),new S({horizontal:false,vertical:true,layoutData:new b({shrinkFactor:0,growFactor:0,baseSize:"27rem"}),content:[this._createOptionsForm().addStyleClass("sapGanttPrintingDialogSettings")]})]});this._updatePageNumberButtons();return i;};O.prototype._createAndOpenDialog=function(){this._oDialog=new D({title:this._oRb.getText("GNT_PRNTG_PDF_EXPORT_TITLE"),contentWidth:"100%",contentHeight:"100%",horizontalScrolling:false,verticalScrolling:false,content:[this._createDialogContent()],buttons:[this._oButtonExport=new B({text:this._oRb.getText("GNT_PRNTG_EXPORT"),type:M.ButtonType.Emphasized,press:this.export.bind(this)}),new B({text:this._oRb.getText("GNT_PRNTG_CANCEL"),press:function(){this.close();}.bind(this)})]}).addStyleClass("sapGanttPrintingDialog");this._oDialog.onsapescape=function(i){this.close();i.preventDefault();i.stopPropagation();}.bind(this);this._oDialog.setModel(this._oModel,"setting");this._oDialog.open();this._sResizeHandlerId=x.register(this._oDialog,this._onResize.bind(this));};return O;});
