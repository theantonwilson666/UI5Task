/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/gantt/misc/Utility","./RenderUtils","sap/gantt/simple/LegendShapeGroupOrientation","sap/ui/core/IconPool"],function(U,R,L,I){"use strict";var a={apiVersion:2};var d=function(){var D=32;var s=U.findSapUiSizeClass();return U.scaleBySapUiSize(s,D);};a.render=function(r,l){r.openStart("div",l).openEnd();var b=l.getItems();var h=b.some(function(o){return o.getInteractive();});for(var i=0;i<b.length;i++){this.renderLegendItem(r,b[i],h);}r.close("div");};a.renderLegendItem=function(r,i,h){var b=i.getAggregation('legendShapeGroup');if(b){this.renderShapeGroup(r,i,h);}else{this.renderShape(r,i,h);}};a.renderShape=function(r,i,h){var s=i.getShape();var l=d(),b=l+"px";var H=l/2,w=H;this.normalizeShape(s,w,H);r.openStart("div",i);r.attr("title",s.getTitle());r.class("sapGanttLLItem");r.style("height",b);r.style("line-height",b);var m="margin-"+(sap.ui.getCore().getConfiguration().getRTL()?"right":"left");if(h&&!i.getInteractive()){r.style(m,b);}else if(!i.getInteractive()){r.style(m,(w/2)+"px");}r.openEnd();r.renderControl(i.getAggregation("_checkbox"));this.renderSvgPart(r,[s],w);this.renderLegendText(r,s.getTitle());r.close("div");};a.renderShapeGroup=function(r,i,h){var l=i.getAggregation('legendShapeGroup');var s=l.getAggregation('shapes');var o=l.getOrientation();var t=l.getTitle();var b=d(),c=b+"px";var H=b/2,w=H;r.openStart("div",i);r.attr("title",t);r.class("sapGanttLLItem");r.style("height",c).style("line-height",c);var m="margin-"+(sap.ui.getCore().getConfiguration().getRTL()?"right":"left");if(h&&!i.getInteractive()){r.style(m,c);}else if(!i.getInteractive()){r.style(m,(w/2)+"px");}r.openEnd();r.renderControl(i.getAggregation("_checkbox"));s.forEach(function(S,e){this.normalizeShapeGroup(s,S,o,w,H,e);}.bind(this));this.renderSvgPart(r,s,w);this.renderLegendText(r,t,true,c);r.close("div");};a.normalizeShapeGroup=function(b,s,o,w,l,i){if(s.isA('sap.gantt.simple.LegendShapeGroup')){var S=s.getAggregation('shapes');var O=s.getOrientation();S.forEach(function(e,i){this.normalizeShapeGroup(S,e,O,w,l,i);}.bind(this));return;}var h=l/2;var c=s.getStrokeWidth()||0;var y=0;var x=0;var X=0;var Y=0;if(o===L.Vertical){if(i>0){if(b[i-1].isA('sap.gantt.simple.BaseLine')){y=parseFloat(b[i-1].getStrokeWidth())+Math.max(parseFloat(b[i-1].getY1()),parseFloat(b[i-1].getY2()));}else if(b[i-1].isA('sap.gantt.simple.BaseCursor')){y=b[i-1].getLength()+(b[i-1].getRowYCenter()-(w/4));}else if(b[i-1].isA('sap.gantt.simple.BaseImage')){y=parseFloat(b[i-1].getY());}else if(b[i-1].isA("sap.gantt.simple.BasePath")){y=0;}else{y=parseFloat(b[i-1].getHeight())+parseFloat(b[i-1].getY());}}}else if(o===L.Horizontal){if(i>0){if(b[i-1].isA('sap.gantt.simple.BaseLine')){x=parseFloat(b[i-1].getStrokeWidth())+Math.max(parseFloat(b[i-1].getX1()),parseFloat(b[i-1].getX2()));}else if(b[i-1].isA('sap.gantt.simple.BaseDiamond')){x=parseFloat(b[i-1].getWidth())+parseFloat(b[i-1].getX());x-=b[i-1].getWidth()/2;}else if(b[i-1].isA("sap.gantt.simple.BaseCursor")){x=parseFloat(b[i-1].getWidth())+parseFloat(b[i-1].getX());x-=b[i-1].getLength();}else if(b[i-1].isA("sap.gantt.simple.BasePath")){x=0;}else{x=parseFloat(b[i-1].getWidth())+parseFloat(b[i-1].getX());}}if(s.isA('sap.gantt.simple.BaseCursor')){x+=(s.getLength()/2);}}if(s.isA('sap.gantt.simple.BaseLine')){x=s.getX1();X=s.getX2();y=s.getY1();Y=s.getY2();}var v={x:x,y:y,x1:x,y1:y,x2:X,y2:Y,yBias:h,rowYCenter:parseFloat(y)};if(s.getWidth){if(!s.getWidth()){v.width=w-2*c;}else{v.width=s.getWidth();}}if(s.getHeight){if(!s.getHeight()){v.height=l-2*c;}else{v.height=s.getHeight();}}if(s.isA("sap.gantt.simple.BaseCursor")){if(o===L.Horizontal){v.rowYCenter=parseFloat((s.getWidth()+s.getPointHeight())/2);}else if(o===L.Vertical){v.x=w/2;v.rowYCenter=y+(w/4);}}else if(s.isA("sap.gantt.simple.BaseDiamond")){v.x+=(v.width)/2;if(o===L.Vertical){v.rowYCenter=y+(w/4);}else if(o===L.Horizontal){v.rowYCenter=parseFloat(v.height/2);}}else if(s.isA('sap.gantt.simple.BaseChevron')){v.rowYCenter=y+parseFloat(v.height/2);}else if(s.isA('sap.gantt.simple.BaseImage')){if(o===L.Vertical){v.y=y+parseFloat(v.height);}else if(o===L.Horizontal){v.y=y+parseFloat(v.height/2);}}Object.keys(v).forEach(function(p){var P=p.split("-").reduce(function(e,n){return e+n.charAt(0).toUpperCase()+n.slice(1);},"set");if(s[P]){s[P](v[p]);}});};a.normalizeShape=function(s,w,h){var H=h/2;var S=s.getStrokeWidth()||0;var v={x:S,y:S,x1:S,y1:H+S,x2:w,y2:H,yBias:H,rowYCenter:H};if(s.getWidth){if(!s.getWidth()){v.width=w-2*S;}else{v.width=s.getWidth();}}if(s.getHeight){if(!s.getHeight()){v.height=h-2*S;}else{v.height=s.getHeight();}}if(s.isA("sap.gantt.simple.BaseCursor")||s.isA("sap.gantt.simple.BaseDiamond")){v.x+=w/2;}if(s.isA("sap.gantt.simple.shapes.Shape")){s.setWidth(w);s.setHeight(h);s.setStartX(0);s.setRowYCenter(h);}else{Object.keys(v).forEach(function(p){var P=p.split("-").reduce(function(b,n){return b+n.charAt(0).toUpperCase()+n.slice(1);},"set");if(s[P]){s[P](v[p]);}});}};a.renderSvgPart=function(r,s,w){r.openStart("svg");r.attr("tabindex",-1);r.attr("focusable",false);r.class("sapGanttLLSvg");r.style("width",w+"px");r.openEnd();s.forEach(function(S){this.renderShapeGroupRecursively(r,S);}.bind(this));r.close("svg");};a.renderShapeGroupRecursively=function(r,s){if(s.isA('sap.gantt.simple.LegendShapeGroup')){var S=s.getAggregation('shapes');S.forEach(function(o){this.renderShapeGroupRecursively(r,o);}.bind(this));return;}r.openStart("g").openEnd();if(s.isA('sap.gantt.simple.BaseImage')){this.renderImage(r,s);}else{s.renderElement(r,s);}r.close("g");};a.renderLegendText=function(r,t,i,l){r.openStart("div");r.class("sapGanttLLItemTxt");if(i){r.style("line-height",l);}r.openEnd();if(t){r.text(t);}r.close("div");};a.renderImage=function(r,e){if(I.isIconURI(e.getSrc())){var A=["x","y","text-anchor","style","filter","transform"];r.openStart("text",e);R.renderAttributes(r,e,A);r.openEnd();var i=I.getIconInfo(e.getSrc());if(i){r.text(i.content);}r.close('text');}else{var m=["x","y","width","height"];r.openStart("image",e);R.renderAttributes(r,e,m);r.attr("href",e.getProperty("src"));r.openEnd();R.renderTooltip(r,e);r.close("image");}};return a;},true);
