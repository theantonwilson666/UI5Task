/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/base/Log","sap/gantt/library","sap/ui/core/Element","sap/base/util/ObjectPath","./AxisTimeStrategyBase","../misc/Utility","../misc/Format"],function(L,l,E,O,A,U,F){"use strict";sap.gantt.axistime.FullScreenTimeLineOptions=l.config.DEFAULT_TIME_ZOOM_STRATEGY;var a=A.extend("sap.gantt.axistime.FullScreenStrategy",{metadata:{library:"sap.gantt"}});a.prototype.init=function(){this.setProperty("coarsestTimeLineOption",sap.gantt.axistime.FullScreenTimeLineOptions["1month"],true);this.setProperty("finestTimeLineOption",sap.gantt.axistime.FullScreenTimeLineOptions["5min"],true);this.setProperty("timeLineOptions",sap.gantt.axistime.FullScreenTimeLineOptions,true);this.setProperty("timeLineOption",sap.gantt.axistime.FullScreenTimeLineOptions["4day"],true);this.setProperty("zoomLevel",0,true);this.setProperty("zoomLevels",0,true);this.setProperty("mouseWheelZoomType",sap.gantt.MouseWheelZoomType.None,true);};a.prototype.applySettings=function(s){s=s||{};this.checkFirstDayOfWeek(s);E.prototype.applySettings.call(this,s);this.calZoomBase();return this;};a.prototype.isTimePeriodZoomEnabled=function(){return false;};a.prototype.setMouseWheelZoomType=function(m){L.warning("FullScreenStrategy does not support zoom, its zoom type is None and can not be set",null,"FullScreenStrategy.prototype.setMouseWheelZoomType()");return this;};a.prototype.setVisibleHorizon=function(v){this.setVisibleHorizonWithReason(v,"visibleHorizonUpdated");return this;};a.prototype.setTotalHorizon=function(t){var c=this.getTotalHorizon();if(c===t||(c&&c.equals(t))){return;}this.setAggregation("totalHorizon",t);};a.prototype.setVisibleHorizonWithReason=function(v,r,o){if(!this.getTotalHorizon()||!this.getTotalHorizon().equals(v)){this.setTotalHorizon(v.clone());}var b=this.getVisibleHorizon();if(b){b=b.clone();}A.prototype._setVisibleHorizon.call(this,v);if(b){this.fireRedrawRequest(true,r,b,o);}return this;};a.prototype.syncContext=function(n){var b=false;var r={zoomLevel:undefined,axisTimeChanged:false};var s=this._calSuitableRateByChartWidth(n);if(s!==undefined){var f=this._oZoom.rate||-1;this._oZoom.rate=s;this.getParent().getAxisTime().setZoomRate(this._oZoom.rate);b=!U.floatEqual(f,this._oZoom.rate);if(b){r.axisTimeChanged=true;}}r.zoomLevel=this.getZoomLevel();this._updateTimeLineOption();return r;};a.prototype._calSuitableRateByChartWidth=function(n){var i=this.getVisibleHorizon(),s;if(i&&i.getStartTime()&&i.getEndTime()){var S=this.calZoomScaleByDate(F.abapTimestampToDate(i.getStartTime()),F.abapTimestampToDate(i.getEndTime()),n);s=this._oZoom.base.scale/S;}return s;};a.prototype._updateTimeLineOption=function(){var s=F.getTimeStampFormatter().parse("20000101000000"),c,i,t=this.getTimeLineOptions(),T=this.getProperty("timeLineOption");var o=this.getAxisTime();if(o){var b=o.timeToView(s);for(i in t){var d=t[i].innerInterval;var e=o.timeToView(O.get(d.unit).offset(s,d.span));var r=Math.abs(Math.ceil((e-b)));if(r>=d.range){c=i;break;}}T=c?t[c]:t[i];this.setProperty("timeLineOption",T,true);}};return a;},true);
