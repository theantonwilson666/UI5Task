sap.ui.define(["sap/base/util/merge","./TemplatePage","sap/ui/test/OpaBuilder","sap/ui/test/Opa5","sap/fe/test/Utils","sap/fe/test/builder/FEBuilder","sap/fe/test/builder/MacroFieldBuilder","sap/fe/test/builder/OverflowToolbarBuilder","sap/fe/test/api/FooterActionsOP","sap/fe/test/api/FooterAssertionsOP","sap/fe/test/api/HeaderActions","sap/fe/test/api/HeaderAssertions","sap/fe/test/api/FormActions","sap/fe/test/api/FormAssertions"],function(m,T,O,a,U,F,b,c,d,e,H,f,g,h){"use strict";function i(N){return"fe::table::"+N.split("/").join("::")+"::LineItem";}function j(E){return"fe::Chart::"+E+"::Chart";}function _(o,v){return c.create(o).hasId(v.id);}function k(o,v){return F.create(o).hasId(v.id);}function l(o,v){var p=F.create(o);if(U.isOfType(v,String)){p.hasType("sap.uxap.ObjectPageSubSection");p.hasProperties({title:v});}else if(v.fieldGroupId){p.hasId(v.fieldGroupId);if(v.fullSubSectionId){p.has(O.Matchers.ancestor(v.fullSubSectionId,false));}}else{p.hasId(v.id);}return p;}function n(p,A){var s=p.appId,C=p.componentId,V=s+"::"+C,o=V+"--fe::ObjectPage",q="fe::HeaderFacet",r="fe::ObjectPage-OPHeaderContent",t="fe::FooterBar",u="fe::FacetSubSection",v="fe::Form",w="fe::FormContainer",x="fe::HeaderFacet::FormContainer",B=V+"--fe::Breadcrumbs",y="fe::ObjectPage-anchBar",P="fe::Paginator",z={DISPLAY:"Display",EDITABLE:"Editable"},R=sap.ui.getCore().getLibraryResourceBundle("sap.fe.core"),D=Array.prototype.slice.call(arguments,1);return T.apply(T,[V,{actions:{onTable:function(E){if(!U.isOfType(E,String)){E={id:i(E.property)};}return this._onTable(E);},onChart:function(E){var G;if(E){G=!U.isOfType(E,String)?j(E.property):E;}return this._onChart({id:G});},onFooter:function(){return new d(_(this,{id:t}),{id:t});},onHeader:function(){return new H(k(this,{id:o}),{id:o,headerId:q,headerContentId:r,viewId:V,paginatorId:P,breadCrumbId:B});},onForm:function(E){if(!U.isOfType(E,String)){if(E.section){E.id=u+"::"+E.section;E.fullSubSectionId=V+"--"+E.id;}if(E.fieldGroup){if(E.isHeaderFacet){E.fieldGroupId=x+"::"+E.fieldGroup;}else{E.fieldGroupId=w+"::"+E.fieldGroup;}}}return new g(l(this,E),E);},iCollapseExpandPageHeader:function(E){return this._iCollapseExpandPageHeader(E);},iClickQuickViewMoreLinksButton:function(){return O.create(this).hasType("sap.m.Button").has(O.Matchers.resourceBundle("text","sap.ui.mdc","info.POPOVER_DEFINE_LINKS")).doPress().description("Pressing 'More Links' button").execute();},iClickLinkWithText:function(E){return O.create(this).hasType("sap.m.Link").hasProperties({text:E}).doPress().description("Navigating via link '"+E+"'").execute();},iEnableLink:function(E){return O.create(this).hasType("sap.m.ColumnListItem").hasAggregationProperties("cells",{text:E}).isDialogElement().doPress("selectMulti").description("The CheckBox for link "+E+" is selected").execute();},iPressKeyboardShortcutOnSection:function(S,E){return this._iPressKeyboardShortcut(undefined,S,E,"sap.uxap.ObjectPageSection");},iGoToSection:function(S){return this.iOpenSectionWithTitle(S);},iOpenSectionWithTitle:function(N){return O.create(this).hasId(y).has(O.Matchers.children(F.Matchers.states({controlType:"sap.m.Button",text:N}))).doPress().description("Selecting section "+N).execute();},iOpenVHDInDialog:function(E){return O.create(this).isDialogElement().hasId(E+"-inner-vhi").doPress().description("Opening value help for '"+E+"' from within a dialog").execute();},iConfirmVHDInDialog:function(E){return O.create(this).isDialogElement().hasId(E+"-ok").doPress().description("Comfirmed VHD opened in dialog").execute();},iEnterValueForFieldInCreateDialog:function(E,G){return O.create(this).isDialogElement().hasId(E).doEnterText(G).description("Entering Text in the field '"+E+"'in the create dialog with value '"+G+"'").execute();},iClickOnMessageButton:function(){return O.create(this).hasType("sap.fe.templates.controls.messages.MessageButton").doPress().description("Clicked on Message Button").execute();},iClickOnMessage:function(M){return O.create(this).hasType("sap.m.MessageListItem").hasProperties({title:M.MessageText,groupAnnouncement:M.GroupLabel}).isDialogElement(true).description("MessageItem with correct text and group label").doOnChildren(O.create(this).hasType("sap.m.Link").hasProperties({text:M.MessageText}).doPress().description("Click on the message")).execute();}},assertions:{onTable:function(E){if(!U.isOfType(E,String)){E={id:i(E.property)};}return this._onTable(E);},onChart:function(E){var G;if(E){G=!U.isOfType(E,String)?j(E.property):E;}return this._onChart({id:G});},onFooter:function(){return new e(_(this,{id:t}),{id:t});},onHeader:function(){return new f(k(this,{id:o}),{id:o,headerId:q,headerContentId:r,viewId:V,paginatorId:P,breadCrumbId:B});},onForm:function(E){if(!U.isOfType(E,String)){if(E.section){E.id=u+"::"+E.section;E.fullSubSectionId=V+"--"+E.id;}if(E.fieldGroup){E.fieldGroupId=w+"::"+E.fieldGroup;}}return new h(l(this,E),E);},iSeeLinkWithText:function(E){return O.create(this).hasType("sap.m.Link").hasProperties({text:E}).description("Seeing link with text '"+E+"'").execute();},iSeeTextWithText:function(E){return O.create(this).hasType("sap.m.Text").hasProperties({text:E}).description("Seeing Text with text '"+E+"'").execute();},iSeeTitleWithText:function(E){return O.create(this).hasType("sap.m.Title").hasProperties({text:E}).description("Seeing Title with text '"+E+"'").execute();},iSeeContactDetailsPopover:function(E){return(O.create(this).hasType("sap.ui.mdc.link.Panel").description("Contact card with title '"+E+"' is present").execute());},iSeeQuickViewPopover:function(){return O.create(this).hasType("sap.ui.mdc.link.Panel").description("Seeing Quick View Details in ObjectPage").execute();},iSeeContactPopoverWithAvatarImage:function(I){return O.create(this).hasType("sap.ui.mdc.link.Panel").check(function(E){var G=E.some(function(J){return J.src===I;});return G===false;},true).description("Seeing Contact Card with Avatar Image in ObjectPage").execute();},iSeeQuickViewMoreLinksButton:function(){return O.create(this).isDialogElement(true).hasType("sap.m.Button").has(O.Matchers.resourceBundle("text","sap.ui.mdc","info.POPOVER_DEFINE_LINKS")).description("The 'More Links' button found").execute();},iSeeObjectPageInDisplayMode:function(){return this._iSeeObjectPageInMode(z.DISPLAY);},iSeeObjectPageInEditMode:function(){return this._iSeeObjectPageInMode(z.EDITABLE);},_iSeeObjectPageInMode:function(M){return O.create(this).hasId(V).viewId(null).has(function(E){return E.getModel("ui").getProperty("/editMode")===M;}).description("Object Page is in mode '"+M+"'").execute();},iSeeSectionWithTitle:function(E){return O.create(this).hasType("sap.uxap.ObjectPageSection").hasProperties({title:E}).description("Seeing section with title '"+E+"'").execute();},iSeeSubSectionWithTitle:function(E){return O.create(this).hasType("sap.uxap.ObjectPageSubSection").hasProperties({title:E}).description("Seeing sub-section with title '"+E+"'").execute();},iSeeSectionButtonWithTitle:function(E,S){return F.create(this).hasId(y).has(O.Matchers.children(F.Matchers.states(m({},{controlType:"sap.m.Button",text:E},S)))).description(U.formatMessage("Seeing section button with title '{0}' and state='{1}'",E,S)).execute();},iSeeFlpLink:function(E){return O.create(this).hasType("sap.ui.mdc.link.PanelListItem").isDialogElement(true).hasProperties({text:E}).description("FLP link with text '"+E+"' is present").execute();},iSeeSelectLinksDialog:function(){return O.create(this).hasType("sap.m.Title").isDialogElement(true).has(O.Matchers.resourceBundle("text","sap.ui.mdc","info.SELECTION_DIALOG_ALIGNEDTITLE")).description("Seeing dialog open").execute();},iDoNotSeeFlpLink:function(E){return O.create(this).hasType("sap.m.Link").isDialogElement(true).check(function(G){var I=G.some(function(J){return J.getText()===E;});return I===false;},true).description("FLP link with text '"+E+"' is not found").execute();},iSeeTitleLink:function(E,I){return O.create(this).hasType("sap.m.Link").isDialogElement(true).hasProperties({text:E,href:I}).description("QuickView Title link with text '"+E+"' is found").execute();},iSeeCreateConfirmation:function(){return this._iSeeTheMessageToast(R.getText("C_TRANSACTION_HELPER_OBJECT_CREATED"));},iSeeSaveConfirmation:function(){return this._iSeeTheMessageToast(R.getText("C_TRANSACTION_HELPER_OBJECT_SAVED"));},iSeeDeleteConfirmation:function(){return this._iSeeTheMessageToast(R.getText("C_TRANSACTION_HELPER_OBJECT_PAGE_DELETE_TOAST_SINGULAR"));},iSeeConfirmMessageBoxWithTitle:function(E){return O.create(this).hasType("sap.m.Dialog").isDialogElement(true).hasProperties({title:E}).description("Seeing Message dialog open").execute();},iSeeMoreFormContent:function(S){return O.create(this).hasId(v+"::"+S+"::MoreContent").description("Seeing More Form Content in "+S).execute();},iDoNotSeeMoreFormContent:function(S){return O.create(this).hasType("sap.ui.layout.form.Form").check(function(E){var G=E.some(function(I){return I.getId().includes(S+"::MoreContent");});return G===false;}).description("Not Seeing More Form Content in "+S).execute();},iSeeControlVMTableTitle:function(E,N){return O.create(this).hasType("sap.m.Title").hasId(i(N)+"::VM-text").hasProperties({text:E}).description("Seeing variant title '"+E+"'").execute();},iCheckValueOfFieldInCreateDialog:function(E,G,I,J){return b.create(this).isDialogElement().hasId(E).hasValue(G,I).hasProperties({required:!!J}).description(U.formatMessage("Seeing field '{0}' with value '{1}'",E,[].concat(G,I||[]))).execute();},iSeeMessageView:function(){return O.create(this).hasType("sap.m.MessageView").isDialogElement(true).description("MessageView is visible").execute();},iCheckMessageItemsOrder:function(E){return O.create(this).hasType("sap.m.MessageView").check(function(M){var G=M[0].getItems();return(G[0].getGroupName()===E[0].GroupLabel&&G[1].getGroupName()===E[1].GroupLabel&&G[0].getTitle()===E[0].MessageText&&G[1].getTitle()===E[1].MessageText);},true).isDialogElement(true).description("MessageItems are correctly ordered").execute();},iClickBackOnMessageView:function(){return O.create(this).hasType("sap.m.MessageView").isDialogElement(true).doOnChildren(O.create(this).hasType("sap.m.Button").hasProperties({icon:"sap-icon://nav-back"}).doPress().description("Click on the message view back")).execute();}}}].concat(D));}return n;});
