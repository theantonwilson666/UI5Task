sap.ui.define(["./HeaderAPI","sap/fe/test/Utils","sap/ui/test/OpaBuilder","sap/fe/test/builder/FEBuilder","sap/fe/test/builder/MacroFieldBuilder","./APIHelper"],function(H,U,O,F,a,A){"use strict";var b=function(h,v){this._sObjectPageLayoutId=v.id;this._sHeaderId=v.headerId;this._sHeaderContentId=v.headerContentId;this._sViewId=v.viewId;this._sPaginatorId=v.paginatorId;this._sBreadCrumbId=v.breadCrumbId;return H.call(this,h,v);};b.prototype=Object.create(H.prototype);b.prototype.constructor=b;b.prototype.isAction=false;b.prototype.iCheckAction=function(v,s){var o=this.createOverflowToolbarBuilder(this._sObjectPageLayoutId);return this.prepareResult(o.hasContent(this.createActionMatcher(v),s).description(U.formatMessage("Checking header action '{0}' in state '{1}'",v,s)).execute());};b.prototype.iCheckEdit=function(s){return this.iCheckAction({service:"StandardAction",action:"Edit",unbound:true},s);};b.prototype.iCheckDelete=function(s){return this.iCheckAction({service:"StandardAction",action:"Delete",unbound:true},s);};b.prototype.iCheckRelatedApps=function(s){return this.iCheckAction({service:"fe",action:"RelatedApps",unbound:true},s);};b.prototype.iCheckMenuAction=function(v){return this.prepareResult(A.createMenuActionCheckBuilder(v).execute());};b.prototype.iCheckNumberOfHeaderContentItems=function(n,i){var h=this.getObjectPageDynamicHeaderContentBuilder(this._sHeaderContentId);return this.prepareResult(h.has(function(o){var I=o.getContent()[0].getItems();if(!i){I=I.filter(function(c){return c.getVisible();});}return I.length===n;}).description(U.formatMessage("Checking number of header content with '{0}' items",n)).execute());};b.prototype.iCheckFieldInFieldGroup=function(f,v,s){var c=U.parseArguments([Object,[Array,String],Object],arguments),d=(f.targetAnnotation?this.getDataFieldForAnnotationId(f,this._sViewId):this.getFieldGroupFieldId(f,this._sViewId))+"-content";return this.prepareResult(a.create(this).hasId(d).hasValue(c[1]).hasState(c[2]).description(U.formatMessage("Seeing field '{0}' with value '{1}' and state='{2}'",c[0],c[1],c[2])).execute());};b.prototype.iCheckDataPoint=function(t,v){var h=this.getObjectPageDynamicHeaderContentBuilder(this._sHeaderContentId);return this.prepareResult(h.has(O.Matchers.childrenMatcher(O.create(this).hasType("sap.m.ObjectNumber").hasProperties({number:v}).has(function(o){return o.getParent();}).hasAggregationProperties("items",{text:t}))).description(U.formatMessage("Seeing header data point '{0}' with value '{1}'",t,v)).execute());};b.prototype.iCheckTitle=function(t,d){var h=this.getObjectPageDynamicHeaderTitleBuilder(this._sObjectPageLayoutId);return this.prepareResult(h.hasConditional(t!==undefined,O.Matchers.childrenMatcher(O.create(this).hasType("sap.m.Title").hasProperties({text:t}))).hasConditional(d!==undefined,O.Matchers.childrenMatcher(O.create(this).hasType("sap.m.Label").hasProperties({text:d}))).description(!d?"Seeing Object Page header title '"+t+"'":"Seeing Object Page header title '"+t+"' and subtitle '"+d+"'").execute());};b.prototype.iCheckPaginatorDown=function(s){return this.prepareResult(this.createPaginatorBuilder(O.Matchers.properties({icon:"sap-icon://navigation-down-arrow"}),this._sViewId+"--"+this._sPaginatorId,s).description(U.formatMessage("Checking paginator down action with state='{0}'",s)).execute());};b.prototype.iCheckPaginatorUp=function(s){return this.prepareResult(this.createPaginatorBuilder(O.Matchers.properties({icon:"sap-icon://navigation-up-arrow"}),this._sViewId+"--"+this._sPaginatorId,s).description(U.formatMessage("Checking paginator up action with state='{0}'",s)).execute());};b.prototype.iCheckMicroChart=function(m){var o=O.create(this.getOpaInstance());if(!U.isOfType(m,String)){o.hasId(this._sViewId+"--"+this._sHeaderId+"::MicroChart::"+m.chartId+"::"+m.chartType);o.description(U.formatMessage("Seeing Micro Chart of type '{0}' with identifier '{1}'",m.chartType,m.chartId));}else{o.hasProperties({chartTitle:m});o.description(U.formatMessage("Seeing Micro Chart with title '{0}'",m));}return this.prepareResult(o.execute());};b.prototype.iCheckHeaderFacet=function(f,s){var c=U.parseArguments([[Object,String],Object],arguments),h=this.getObjectPageDynamicHeaderContentBuilder(this._sHeaderContentId),i=new RegExp("fe::HeaderFacetContainer::"+f.facetId+"$");if(f.custom){i=new RegExp("fe::HeaderFacetCustomContainer::"+f.facetId+"$");}else if(f.collection){i=new RegExp("fe::HeaderCollectionFacetContainer::"+f.facetId+"$");}return this.prepareResult(h.has(O.Matchers.childrenMatcher(F.create(this.getOpaInstance()).hasId(i).hasState(s))).description(U.formatMessage("Checking Header Facet '{0}' with state='{1}'",c[0],c[1])).execute());};b.prototype.iCheckBreadCrumb=function(l){var f=F.create(this.getOpaInstance()).hasId(this._sBreadCrumbId);if(l!==undefined&&l.length>0){f.hasAggregationProperties("links",{text:l});f.description(U.formatMessage("Checking breadcrumb link '{0}'",l));}else if(l!==undefined&&l.length===0){f.hasAggregationLength("links",0);f.hasState({visible:true});f.description("Checking for existing but empty breadcrumbs");}else if(l===undefined){f.hasState({visible:false});f.description("Checking for non-existent breadcrumbs");}return this.prepareResult(f.execute());};b.prototype.iCheckSaveAsTile=function(s){var o=this.createOverflowToolbarBuilder(this._sObjectPageLayoutId),S="fe::Share";if(s&&s.visible===false){o.hasContent(F.Matchers.id(new RegExp(U.formatMessage("{0}$",S))),s).description(U.formatMessage("Checking header '{0}' Share button with state='{1}'",this.getIdentifier(),s));}else{o.doOnContent(F.Matchers.id(new RegExp(U.formatMessage("{0}$",S))),O.Actions.press()).description(U.formatMessage("Pressing header '{0}' Share button",this.getIdentifier())).success(A.createSaveAsTileCheckBuilder(s));}return this.prepareResult(o.execute());};b.prototype.iCheckSendEmail=function(s){var o=this.createOverflowToolbarBuilder(this._sObjectPageLayoutId),S="fe::Share";if(s&&s.visible===false){o.hasContent(F.Matchers.id(new RegExp(U.formatMessage("{0}$",S))),s).description(U.formatMessage("Checking header '{0}' Share button with state='{1}'",this.getIdentifier(),s));}else{o.doOnContent(F.Matchers.id(new RegExp(U.formatMessage("{0}$",S))),O.Actions.press()).description(U.formatMessage("Pressing header '{0}' Share button",this.getIdentifier())).success(A.createSendEmailCheckBuilder(s));}return this.prepareResult(o.execute());};b.prototype.iCheckLink=function(l,s){var c=U.parseArguments([String,Object],arguments),h=this.getObjectPageDynamicHeaderContentBuilder(this._sHeaderContentId);return this.prepareResult(h.has(O.Matchers.childrenMatcher(F.create().hasType("sap.m.Link").hasProperties({text:l}).hasState(c[1]))).description(U.formatMessage("Checking link '{0}' with state='{1}'",c[0],c[1])).execute());};return b;});
