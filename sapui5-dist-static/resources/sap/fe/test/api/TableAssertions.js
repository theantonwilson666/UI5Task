sap.ui.define(["./TableAPI","sap/fe/test/Utils","sap/ui/test/OpaBuilder","sap/fe/test/builder/FEBuilder","sap/fe/test/builder/MdcTableBuilder","sap/fe/test/builder/MdcFilterFieldBuilder","sap/ui/core/SortOrder","./APIHelper"],function(T,U,O,F,a,b,S,A){"use strict";var c=function(B,t){return T.call(this,B,t);};c.prototype=Object.create(T.prototype);c.prototype.constructor=c;c.prototype.isAction=false;c.prototype.iCheckState=function(s){var t=this.getBuilder();return this.prepareResult(t.hasState(s).description(U.formatMessage("Checking table '{0}' in state '{1}'",this.getIdentifier(),s)).execute());};c.prototype.iCheckRows=function(r,e,s){var d=U.parseArguments([Object,Number,Object],arguments),n=d[1],R=T.createRowMatchers(d[0],d[2]),t=this.getBuilder();if(R.length){t.hasRows(R,true).has(function(f){return U.isOfType(n,Number)?f.length===n:f.length>0;});}else{t.hasNumberOfRows(n).hasRows(null,true);}return this.prepareResult(t.description(U.formatMessage("Checking table '{0}' having {1} rows with values='{2}' and state='{3}'",this.getIdentifier(),n===undefined?"> 0":n,d[0],d[2])).execute());};c.prototype.iCheckCreationRow=function(r,s){var t=this.getBuilder();return this.prepareResult(t.has(O.Matchers.childrenMatcher(F.create(this).hasType("sap.ui.table.CreationRow").has(a.Row.Matchers.cellValues(r)).hasState(s))).description(U.formatMessage("Checking table '{0}' having a CreationRow with values='{1}' and state='{2}'",this.getIdentifier(),r,s)).execute());};c.prototype.iCheckQuickFilterItems=function(e){return this.prepareResult(this.getBuilder().hasQuickFilterItems(e).description(U.formatMessage("Checking table '{0}' having  '{1}' item(s)",this.getIdentifier(),e)).execute());};c.prototype.iCheckColumns=function(e,C){var d=U.parseArguments([Number,Object],arguments),m=d[1],n=d[0],t=this.getBuilder();if(n!==undefined){t.hasAggregationLength("columns",n);}else{t.hasAggregation("columns");}t.hasColumns(m);return this.prepareResult(t.description(U.formatMessage("Checking table '{0}' having {1} columns and column states='{2}'",this.getIdentifier(),n===undefined?"> 0":n,m)).execute());};c.prototype.iCheckCells=function(r,C){var R=arguments.length>1?arguments[0]:undefined,m=arguments.length>1?arguments[1]:arguments[0],d=T.createRowMatchers(R,a.Row.Matchers.cellProperties(m)),t=this.getBuilder();return this.prepareResult(t.hasRows(d).description(U.formatMessage("Checking table '{0}' having cells properties '{2}' of rows with values '{1}'",this.getIdentifier(),R,m)).execute());};c.prototype.iCheckAction=function(v,s){var t=this.getBuilder(),d=this.createActionMatcher(v),e=O.Matchers.aggregationMatcher("actions",[d,F.Matchers.states(s)]);if(s&&s.visible===false){e=O.Matchers.some(e,O.Matchers.not(O.Matchers.aggregationMatcher("actions",d)));}return this.prepareResult(t.has(e).description(U.formatMessage("Checking table '{0}' having action '{1}' with state='{2}'",this.getIdentifier(),v.service==="StandardAction"?v.action:v,s)).execute());};c.prototype.iCheckMenuAction=function(v){return this.prepareResult(A.createMenuActionCheckBuilder(v).execute());};c.prototype.iCheckDelete=function(s){return this.iCheckAction({service:"StandardAction",action:"Delete",unbound:true},s);};c.prototype.iCheckCreate=function(s){return this.iCheckAction({service:"StandardAction",action:"Create",unbound:true},s);};c.prototype.iCheckPaste=function(s){return this.iCheckAction({service:"StandardAction",action:"Paste",unbound:true},s);};c.prototype.iCheckFullScreen=function(s){return this.iCheckAction({service:"StandardAction",action:"FullScreen",unbound:true},s);};c.prototype._iCheckTableProvidedAction=function(p){var t=this.getBuilder();return this.prepareResult(t["has"+p]().description(U.formatMessage("Checking table '{0}' having button available for '{1}'",this.getIdentifier(),p)).execute());};c.prototype.iCheckColumnAdaptation=function(){return this._iCheckTableProvidedAction("ColumnAdaptation");};c.prototype.iCheckColumnSorting=function(){return this._iCheckTableProvidedAction("ColumnSorting");};c.prototype.iCheckColumnFiltering=function(){return this._iCheckTableProvidedAction("ColumnFiltering");};c.prototype.iCheckExport=function(){return this._iCheckTableProvidedAction("ColumnExport");};c.prototype.iCheckQuickFilter=function(s){var t=this.getBuilder();return this.prepareResult(t.hasAggregation("quickFilter",F.Matchers.states(s)).description(U.formatMessage("Checking that table '{0}' has a QuickFilter Control with state='{1}'",this.getIdentifier(),s)).execute());};c.prototype.iCheckColumnAdaptationDialog=function(){var o=a.createAdaptationDialogBuilder(this.getOpaInstance());return this.prepareResult(o.description(U.formatMessage("Checking column adaptation dialog for table '{0}'",this.getIdentifier())).execute());};c.prototype.iCheckAdaptationColumn=function(C,s){return this.columnAdaptation(C,s,undefined,U.formatMessage("Checking adaptation column '{1}' on table '{0}' for state='{2}'",this.getIdentifier(),C,s));};c.prototype.iCheckSortOrder=function(C,s,d){var e=U.parseArguments([[String,Object],String,Boolean],arguments);s=e[1]||S.Ascending;d=e[2];var D=U.formatMessage("Checking column '{1}' on table '{0}' to be sorted '{2}'",this.getIdentifier(),C,s);if(d){var m={};if(s===S.None){m.selected=false;}else{m.selected=true;m.content={selectedKey:s===S.Descending?"true":"false"};}return this.columnSorting(C,m,undefined,D);}var f={};f[U.isOfType(C,Object)?C.name:C]={sortOrder:s};return this.prepareResult(this.getBuilder().hasColumns(f).description(D).execute());};c.prototype.iCheckFilterField=function(C,s){var f=b.create(this.getOpaInstance()).isDialogElement().hasType("sap.ui.mdc.FilterField").description(U.formatMessage("Checking the filter field '{0}' of table '{1}' in state '{2}'",C,this.getIdentifier(),s)),o=U.isOfType(C,String)?O.Matchers.properties({label:C}):O.Matchers.properties({fieldPath:C.name}),d,e=s&&s.visible===false,g=this.iOpenFilterDialog.bind(this),h=this.iConfirmFilterDialog.bind(this);if(e){f.check(function(i){return i.every(function(j){return O.Matchers.not(o)(j);});});}else{f.has(o).checkNumberOfMatches(1);if(!U.isOfType(s,[null,undefined])){f.hasState(s);}}return this.prepareResult(F.create(this.getOpaInstance()).success(function(){d=F.controlsExist(f);if(!d){g();f.success(h);}return f.execute();}).execute());};return c;});
