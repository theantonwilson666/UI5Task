sap.ui.define(["sap/ui/test/Opa5","sap/ui/test/OpaBuilder","sap/ui/qunit/QUnitUtils"],function(O,a,Q){"use strict";function g(f){var i=new RegExp("fe::HeaderFacetContainer::"+f+"$");return i;}function b(i){var I=new RegExp("fe::FacetSection::"+i+"-anchor$");return I;}function c(i){return new RegExp("fe::Form::(.+)"+i+"_FormElement"+"$");}function d(i,C){var h=function(o){var e=C?o.getElementInstance().getParent():o.getElementInstance(),E=e&&e.getId();return typeof i==="string"?E===i:i.test(E);};return h;}return{actions:{iExecuteById:function(i,D){return a.create(this).viewId(null).hasId(i).doPress().description(D).execute();},iExecuteMeArea:function(){return this.iExecuteById("meAreaHeaderButton","Me Area");},iExecuteAdaptUI:function(){return this.iExecuteById(/RTA_Plugin_ActionButton$/,"Adapt UI");},iExecuteAdaptation:function(){return this.iExecuteById(/adaptationSwitcherButton$/,"Adaptation");},iExecuteNavigation:function(){return this.iExecuteById(/navigationSwitcherButton$/,"Navigation");},iWaitUntilTheBusyIndicatorIsGone:function(){return a.create(this).viewId(null).hasId("mainShell").has(function(r){return r.getBusy()===false;}).timeout(180).description("Busy indicator is gone").execute();},iExecuteRightContextMenuById:function(i,D,C){var h=d(i,C);return a.create(this).viewId(null).hasType("sap.ui.dt.ElementOverlay").has(h).do(function(o){o.$().trigger("contextmenu");}).description(D).execute();},iExecuteLeftContextMenuById:function(i,D,C){var h=d(i,C);return a.create(this).viewId(null).hasType("sap.ui.dt.ElementOverlay").has(h).doPress().description(D).execute();},iExecuteRightContextMenuOnHeaderContainer:function(){return this.iExecuteRightContextMenuById(/fe::HeaderContentContainer$/,"Context menu for Header Container");},iExecuteRightContextMenuOnVariantManagement:function(){return this.iExecuteRightContextMenuById(/fe::PageVariantManagement$/,"Context menu for Variant Management");},iExecuteRightContextMenuOnTable:function(){return this.iExecuteRightContextMenuById(/fe::table::SalesOrderManage::LineItem$/,"Context menu for Table");},iExecuteRightContextMenuOnFilterBar:function(){return this.iExecuteRightContextMenuById(/fe::FilterBar::SalesOrderManage$/,"Context menu for FilterBar");},iExecuteRightContextMenuOnHeaderFacet:function(f){return this.iExecuteRightContextMenuById(g(f),"Context menu for "+f,true);},iExecuteRightContextMenuOnSection:function(i){return this.iExecuteRightContextMenuById(b(i),"Context menu for "+i,false);},iExecuteRightContextMenuOnFormContainer:function(i){return this.iExecuteRightContextMenuById(new RegExp("fe::FormContainer::FieldGroup::"+i+"$"),"Context menu for Form Container "+i);},iExecuteLeftContextMenuOnSection:function(i){return this.iExecuteLeftContextMenuById(b(i),"Left context menu for "+i,false);},iExecuteLeftContextMenuOnHeaderFacet:function(f){return this.iExecuteLeftContextMenuById(g(f),"Left Context menu for "+f,true);},iExecuteRightContextMenuOnFieldAddedViaRTA:function(i){return this.iExecuteRightContextMenuById(c("_"+i),"Context menu for Field "+i);},iExecuteFocusOnAnchorBar:function(){return a.create(this).viewId(null).hasId(/fe::ObjectPage-anchBar$/).doPress().description("Focus on AnchorBar").execute();},iExecutePopOverActionByIcon:function(i,D){return a.create(this).viewId(null).hasType("sap.m.Button").hasProperties({icon:"sap-icon://"+i}).isDialogElement().doPress().description(D).execute();},iExecutePopOverActionRename:function(i){return this.iExecutePopOverActionByIcon("edit","Press rename on "+i);},iExecutePopOverActionAdd:function(D){return this.iExecutePopOverActionByIcon("add",D);},iExecutePopOverActionRemove:function(D){return this.iExecutePopOverActionByIcon("less",D);},iExecutePopOverActionCut:function(D){return this.iExecutePopOverActionByIcon("scissors",D);},iExecutePopOverActionPaste:function(D){return this.iExecutePopOverActionByIcon("paste",D);},iExecutePopOverActionDuplicate:function(D){return this.iExecutePopOverActionByIcon("duplicate","Duplicate Variant '"+D+"'");},iExecutePopOverActionSettings:function(D){return this.iExecutePopOverActionByIcon("key-user-settings","Open "+D+" Settings");},iExecutePopOverActionEmbedContent:function(D){return this.iExecutePopOverActionByIcon("tnt/content-enricher","Open "+D+" Settings");},iSwitchToGroupViewInTheFilterBarDialog:function(){return this.iExecutePopOverActionByIcon("group-2","Switch to grouped view in filter bar dialog");},iSelectExpandFiltersgroupInTheFilterBarDialog:function(f){return a.create(this).viewId(null).hasType("sap.m.Panel").hasChildren(a.create(this).hasType("sap.m.Label").hasProperties({text:f})).doOnChildren(a.create(this).hasType("sap.m.Button").doPress()).description("Expanding filter group wiht name '"+f+"'").execute();},iSelectCheckBoxInTheFilterBarDialog:function(t){return a.create(this).viewId(null).hasType("sap.m.CustomListItem").doOnChildren(a.create(this).hasType("sap.m.CustomListItem").hasChildren(a.create(this).hasType("sap.m.Label").hasProperties({text:t})).doOnChildren(a.create(this).hasType("sap.m.CheckBox").doPress())).description("Selected Checkbox next to '"+t+"'").execute();},iChangeVisibilityFilter:function(s){return a.create(this).viewId(null).hasType("sap.m.Bar").isDialogElement().doOnChildren(a.create(this).hasType("sap.m.Select").checkNumberOfMatches(1).doEnterText(s)).description("Changed displayed fields to '"+s+"'").execute();},iEnterUrlInTheTextArea:function(u){return a.create(this).viewId(null).hasType("sap.m.TextArea").hasId("sapUiRtaAddIFrameDialog_EditUrlTA").isDialogElement().doEnterText(u).description("Added URL '"+u+"' to Text Area").execute();},iSwitchToReorderOnDialog:function(){return a.create(this).viewId(null).hasType("sap.m.Button").isDialogElement().hasProperties({text:"Reorder"}).doPress().description("Switch to reorder view").execute();},_iSelectALabelOnTheReorderDialog:function(t){return a.create(this).viewId(null).hasType("sap.m.Label").isDialogElement().hasProperties({text:t}).doPress().execute();},iReorderTableColumn:function(l,n){this._iSelectALabelOnTheReorderDialog(l);var i,I="sap-icon://";if(n===0){i="collapse-group";}else if(n===1){i="slim-arrow-up";}else if(!n===2){i="slim-arrow-down";}else if(!n===3){i="expand-group";}I+=i;return a.create(this).viewId(null).hasType("sap.m.Button").isDialogElement().hasProperties({icon:I}).doPress().description("Reorder '"+l+"'").execute();},iEnterTextInSearchfield:function(n){return a.create(this).hasType("sap.m.SearchField").checkNumberOfMatches(1).doEnterText(n).description("Enter text: '"+n+"'").execute();},iEnterTextinFilterField:function(t){return a.create(this).hasType("sap.ui.mdc.field.FieldMultiInput").checkNumberOfMatches(1).doEnterText(t).description("Enter text: '"+t+"'").execute();},iSelectAFieldInTheDialog:function(t){return a.create(this).viewId(null).hasType("sap.m.CustomListItem").isDialogElement().has(function(l){var T=l.getTooltip();return T.endsWith(t);}).doPress().description("Select "+t).execute();},iExecutePopOverOk:function(){return a.create(this).viewId(null).hasType("sap.m.Button").hasProperties({text:"OK"}).isDialogElement().doPress().description("OK Button").execute();},iExecuteSaveAndExit:function(){return this.iExecuteById(/sapUiRta_exit$/,"Save&Exit");},iExecuteUndo:function(){return this.iExecuteById(/sapUiRta_undo$/,"Undo");},iEnterTextForRTAEditableField:function(n){return a.create(this).hasType("sap.ui.dt.ElementOverlay").has(function(o){if(o.$().hasClass("sapUiDtOverlaySelected")){var $=o.$().find(".sapUiRtaEditableField");var e=$.children()[0];return e;}return null;}).do(function(e){e.innerHTML=n;Q.triggerEvent("keypress",e,{which:13,keyCode:13});e.blur();}).description("Enter text: "+n).execute();},iEnterTextForTitle:function(n){return this.iEnterTextForRTAEditableField(n);},iEnterTextForViewField:function(n){return a.create(this).hasType("sap.m.Input").isDialogElement().doEnterText(n,true).description("Entering text: "+n+" as variant name").execute();}},assertions:{iSeeTheFLPToolbar:function(){return a.create(this).hasType("sap.ushell.ui.ShellHeader").hasId("shell-header").description("Seeing the FLP toolbar").execute();},iSeeTheRTAToolbar:function(){return a.create(this).hasType("sap.ui.rta.toolbar.Fiori").description("Seeing the RTA toolbar").execute();},iSeeTheHeaderFacet:function(f){return a.create(this).hasType("sap.fe.templates.ObjectPage.controls.StashableHBox").hasId(g(f)).description("Seeing the Header Facet "+f).execute();},iSeeTheFieldAddedViaRTA:function(i){return a.create(this).hasType("sap.ui.layout.form.FormElement").hasId(c("_"+i)).description("Seeing the Field "+i).execute();},iDoNotSeeTheHeaderFacet:function(f){var i=g(f);return a.create(this).hasType("sap.fe.templates.ObjectPage.controls.StashableHBox").check(function(e){var F=e.some(function(o){return typeof i==="string"?o.getId()===i:i.test(o.getId());});return F===false;},true).description("Not seeing the Header Facet "+f).execute();},iDoNotSeeTheField:function(i){return a.create(this).hasType("sap.ui.layout.form.FormElement").check(function(e){var f=e.some(function(h){return h.getId().indexOf(i)>-1;});return f===false;},true).description("Not seeing the Field "+i).execute();},iSeeTheElementOverlayById:function(i,D,C){var h=d(i,C);return a.create(this).hasType("sap.ui.dt.ElementOverlay").has(h).description(D).execute();},iDoNotSeeTheElementOverlayById:function(i,D,C){var h=d(i,C);return a.create(this).hasType("sap.ui.dt.ElementOverlay").check(function(o){var f=o.some(h);return f===false;},true).description(D).execute();},iSeeTheElementOverlayForTheApp:function(){return this.iSeeTheElementOverlayById(/component---appRootView--appContent$/,"Seeing the ElementOverlay for the App");},iSeeThePopover:function(){return a.create(this).hasType("sap.m.Popover").description("Seeing the Popover").execute();},iDoNotSeeButtonByIcon:function(i,D){return a.create(this).hasType("sap.m.Button").isDialogElement().check(function(B){var f=B.some(function(o){return o.getProperty("icon")===i;});return f===false;},true).description("Not seeing "+D).execute();},iDoNotSeeTheVariantManagementPopover:function(){return this.iDoNotSeeButtonByIcon("sap-icon://duplicate","The Popover");},iDoNotSeeTheRTAPopover:function(){return this.iDoNotSeeButtonByIcon("sap-icon://key-user-settings","The RTAPopover");},iDoNotSeeTheRemoveButton:function(){return this.iDoNotSeeButtonByIcon("sap-icon://less","the button 'remove'");},iSeeThePopoverDialog:function(){return a.create(this).hasType("sap.m.Dialog").description("Seeing the Popover Dialog").execute();},iSeeThePopoverDialogWithId:function(i){return a.create(this).hasType("sap.m.Dialog").hasId(i).description("Seeing the Popover Dialog with Id:",i).execute();},iSeeTheHeaderFacetOverlay:function(f){return this.iSeeTheElementOverlayById(g(f),"Seeing the Header Facet: "+f,true);},iDoNotSeeTheHeaderFacetOverlay:function(f){return this.iDoNotSeeTheElementOverlayById(g(f),"Not seeing the Header Facet: "+f,true);},iSeeTheTitleOnTheUI:function(t){return a.create(this).hasType("sap.m.Title").hasProperties({text:t}).checkNumberOfMatches(1).description("Seeing the Title "+t).execute();},iSeeTheLinkOnTheUI:function(t){return a.create(this).hasType("sap.m.Link").hasProperties({text:t}).checkNumberOfMatches(1).description("Seeing the Link "+t).execute();},iCheckTheHeaderFacetTitle:function(f,t){return a.create(this).hasType("sap.fe.templates.ObjectPage.controls.StashableHBox").hasId(g(f)).hasProperties({title:t}).description("The Header Facet  "+f+" has title "+t).execute();},iSeeTheSectionTextById:function(i,t){var I=b(i);return a.create(this).hasId(I).hasProperties({text:t}).description("Seeing the section "+i+" with text "+t).execute();},iSeeTheSectionAtPosition:function(i,p){var I=b(i);return a.create(this).hasType("sap.m.Button").hasId(I).has(function(e){var C=e.getParent().getContent(),f=C.findIndex(function(s){return I.test(s.getId());});return f===p;}).description("Seeing the section "+i+" at position "+p).execute();},iSeeTheAddedIFrameInHeader:function(u){return a.create(this).hasType("sap.ui.dt.AggregationOverlay").hasProperties({aggregationName:"headerContent"}).doOnChildren(a.create(this).hasType("sap.ui.fl.util.IFrame")).description("Seeing the application with URL: "+u+" in iFrame in header content container").execute();},iSeeTheIFrameInSectionWithTitle:function(s){return a.create(this).hasType("sap.uxap.ObjectPageSection").hasProperties({title:s}).doOnChildren(a.create(this).hasType("sap.ui.fl.util.IFrame")).description("Seeing iFrame in section with title '"+s+"'").execute();}}};});
