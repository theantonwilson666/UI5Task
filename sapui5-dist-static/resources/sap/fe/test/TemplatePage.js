sap.ui.define(["sap/ui/test/OpaBuilder","sap/ui/test/Opa5","sap/ui/core/util/ShortcutHelper","sap/fe/test/Utils","sap/fe/test/builder/FEBuilder","sap/fe/test/builder/MdcFieldBuilder","sap/fe/test/builder/MacroFieldBuilder","sap/fe/test/builder/MdcTableBuilder","sap/fe/test/builder/DialogBuilder","sap/fe/test/api/DialogType","sap/fe/test/api/DialogActions","sap/fe/test/api/DialogAssertions","sap/fe/test/api/DialogMessageActions","sap/fe/test/api/DialogMessageAssertions","sap/fe/test/api/DialogValueHelpActions","sap/fe/test/api/DialogValueHelpAssertions","sap/fe/test/api/DialogCreateActions","sap/fe/test/api/DialogCreateAssertions","sap/fe/test/api/TableAssertions","sap/fe/test/api/TableActions","sap/fe/test/api/ChartAssertions","sap/fe/test/api/ChartActions","sap/fe/test/builder/MdcFilterBarBuilder","sap/fe/test/api/FilterBarAssertions","sap/fe/test/api/FilterBarActions","sap/base/util/deepEqual","sap/ushell/resources"],function(O,a,S,U,F,b,M,T,D,c,d,e,f,g,h,i,j,k,l,m,C,n,o,p,q,r,s){"use strict";function _(x,y){var z=T.create(x);if(U.isOfType(y,String)){z.hasProperties({header:y});}else{z.hasId(y.id);}return z;}function t(x,y){return o.create(x).hasId(y.id);}function u(x,y,A){if(U.isOfType(y,String,true)){y={type:c.Confirmation,title:y};}var z=D.create(x);switch(y.type){case c.ValueHelp:if(y.property){z.has(F.Matchers.id(RegExp(U.formatMessage("::FieldValueHelp::{0}-dialog$",y.property.replaceAll("/","::")))));}return A?new h(z,y):new i(z,y);case c.Error:z.hasProperties({icon:"sap-icon://message-error",title:"Error"});return A?new d(z,y):new e(z,y);case c.Message:z.hasAggregation("content",F.Matchers.state("controlType","sap.m.MessageView"));return A?new f(z,y):new g(z,y);case c.Create:return A?new j(z,y):new k(z,y);default:return A?new d(z,y):new e(z,y);}}function v(){var x={};Object.keys(c).forEach(function(y){x["on"+y+"Dialog"]=function(){return this.onDialog({type:y});};});return x;}function w(V,A){var x=U.isOfType(V,String)?V:V.viewId,y=Array.prototype.slice.call(arguments,1);return U.mergeObjects.apply(U,[{viewId:x,actions:U.mergeObjects({_onTable:function(z){return new m(_(this,z),z);},_onChart:function(z){return new n(F,z);},_onFilterBar:function(z){return new q(t(this,z),z);},onDialog:function(z){return u(this,z,true);},iOpenVHOnActionDialog:function(z){var B="APD_::"+z+"-inner-vhi";return O.create(this).hasId(B).isDialogElement().doPress().description("Opening value help for '"+z+"'").execute();},_iPressKeyboardShortcut:function(I,z,P,B){return O.create(this).hasId(I).hasProperties(P?P:{}).hasType(B).do(function(E){var N=S.parseShortcut(z);N.type="keydown";E.$().trigger(N);}).description("Execute keyboard shortcut "+z).execute();},_iCollapseExpandPageHeader:function(z){var E=O.Matchers.resourceBundle("tooltip","sap.f","COLLAPSE_HEADER_BUTTON_TOOLTIP"),B=O.Matchers.resourceBundle("tooltip","sap.f","EXPAND_HEADER_BUTTON_TOOLTIP");return O.create(this).hasType("sap.m.Button").has(O.Matchers.some(E,B)).doConditional(z?E:B,O.Actions.press()).description(U.formatMessage("{0} the current Page Header",z?"Collapsing":"Expanding")).execute();}},v()),assertions:U.mergeObjects({_onTable:function(z){return new l(_(this,z),z);},_onChart:function(z){return new C(F,z);},_onFilterBar:function(z){return new p(t(this,z),z);},onDialog:function(z){return u(this,z,false);},iSeeThisPage:function(){return O.create(this).hasId(x).viewId(null).viewName(null).description(U.formatMessage("Seeing the page '{0}'",x)).execute();},iSeeFilterDefinedOnActionDialogValueHelp:function(z,B,E,G){return O.create(this).hasId(z+"::"+B+"::FilterBar::FilterField::"+E+"-inner").isDialogElement().hasAggregationProperties("tokens",{text:G}).description("Seeing filter for '"+E+"' set to '"+G+"'").execute();},_iSeeTheMessageToast:function(z){return F.createMessageToastBuilder(z).execute(this);},_iSeeButtonWithText:function(z,B){return F.create(this).hasType("sap.m.Button").hasProperties({text:z}).hasState(B).checkNumberOfMatches(1).description(U.formatMessage("Seeing Button with text '{0}'"+(B?" with state: '{1}'":""),z,B)).execute();},iSeeActionParameterContent:function(z,B){var E="APD_::"+z+"-inner",G=O.create(this).hasId(E).isDialogElement().description("Seeing Action parameter '"+z+"' with content '"+B+"'");if(B){G.hasProperties({value:B});}return G.execute();},iSeePageHeaderButton:function(z){return O.create(this).hasType("sap.m.Button").has(O.Matchers.resourceBundle("tooltip","sap.f",z?"COLLAPSE_HEADER_BUTTON_TOOLTIP":"EXPAND_HEADER_BUTTON_TOOLTIP")).description("Seeing the "+(z?"Collapse":"Expand")+" Page Header Button").execute();},iSeeTileCreationMessage:function(){return this._iSeeTheMessageToast(s.i18n.getText("tile_created_msg"));},iSeeMessageStrip:function(P){return O.create(this).hasType("sap.m.MessageStrip").hasProperties(P).description(U.formatMessage("Seeing message strip with properties='{0}'",P)).execute();}},v())}].concat(y));}return w;});
