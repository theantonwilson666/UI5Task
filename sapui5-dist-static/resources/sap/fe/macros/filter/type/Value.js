sap.ui.define(["sap/ui/model/SimpleType","sap/ui/model/type/Boolean","sap/ui/model/type/Date","sap/ui/model/type/Float","sap/ui/model/type/Integer","sap/ui/model/type/String","sap/ui/mdc/condition/FilterOperatorUtil","sap/ui/mdc/condition/Operator","sap/ui/mdc/enum/FieldDisplay"],function(S,B,D,F,I,a,b,O,c){"use strict";return S.extend("sap.fe.macros.filter.type.Value",{constructor:function(f,C){var o=(f&&f.operator)||this.getDefaultOperatorName();this._oOperator=b.getOperator(o);if(!this._oOperator&&o.includes(".")){this.registerCustomOperator(o);}return S.apply(this,arguments);},getElementTypeName:function(t){if(t.endsWith("[]")){return t.substring(0,t.length-2);}return null;},getTypeInstance:function(t,f){if(!t){return null;}t=this.getElementTypeName(t)||t;switch(t){case"string":return new a(f);case"int":return new I(f);case"float":return new F(f);case"date":return new D(f);case"boolean":return new B(f);default:return null;}},isArrayType:function(t){if(!t){return false;}return t==="array"||t.endsWith("[]");},getTypedValue:function(v,t){if(v===undefined){return undefined;}var i=this.isArrayType(t),T=this.getTypeInstance(t);if(i){if(!Array.isArray(v)){v=[v];}v=v.map(function(V){return T?T.parseValue(V,"string"):V;});}else{v=T?T.parseValue(v,"string"):v;}return v;},formatConditionValues:function(v){return Array.isArray(v)&&v.length?v[0]:v;},registerCustomOperator:function(o){var t=this;sap.ui.require([o.substring(0,o.lastIndexOf(".")).replaceAll(".","/")],function(h){if(h){var m=o.substring(o.lastIndexOf(".")+1);t._oOperator=new O({name:o,valueTypes:["self"],tokenParse:"^(.*)$",format:function(v){return{operator:o,values:v.values};},parse:function(T,d,s,e){if(typeof T==="object"){if(T.operator!==o){throw Error("not matching operator");}return T.values;}return O.prototype.parse.apply(this,arguments);},getModelFilter:function(C){return h[m].call(h,t.formatConditionValues(C.values));}});b.addOperator(t._oOperator);}});},getOperator:function(){return this._oOperator;},getDefaultOperatorName:function(){return b.getEQOperator().name;},isMultiValueOperator:function(o){return(o.valueTypes.filter(function(v){return!!v&&v!==O.ValueType.Static;}).length>1);},formatValue:function(v,i){if(v===undefined||v===null){return undefined;}var o=this.getOperator(),r=o.parse(v||"",undefined,c.Value);if(Array.isArray(r)&&!this.isMultiValueOperator(o)){r=r[0];}return this.getTypedValue(r,i);},parseValue:function(v,s){if(v===undefined||v===null){return undefined;}var o=this.getOperator(),r=o.format({values:this.isMultiValueOperator(o)?v:[v]});return r;},validateValue:function(v){return true;}});},true);
