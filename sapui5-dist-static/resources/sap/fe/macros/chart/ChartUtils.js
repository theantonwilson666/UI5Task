/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2017 SAP SE. All rights reserved
    
 */
sap.ui.define(["sap/ui/model/Filter","sap/fe/macros/filter/FilterUtils","sap/ui/model/FilterOperator","sap/fe/core/CommonUtils"],function(F,a,b,C){"use strict";var p=[];var c={getChartSelectionsExist:function(m,s){s=s||m;if(m){var o=m.getAggregation("_chart");if(o){var d=c.getDimensionsFromDrillStack(o);var i=d.length>p.length;var I=d.length<p.length;var n=d.toString()===p.toString();var f;if(I&&d.length===1){f=c.getChartSelections(m,true);}else{f=c.getChartSelections(m);}if(i||I){p=d;return f.length>0;}else if(n&&s.isA("sap.ui.mdc.Table")){return f.length>0;}}}return false;},getChartSelections:function(m,d){if(d){c.getChartModel(m,"",{});}var v=c.getChartModel(m,"filters");return v||[];},getChartFilters:function(m){var f=c.getChartSelections(m)||[];return new F(f);},setChartFilters:function(m){var o=m.getAggregation("_chart");var d=[];function e(s){for(var h in s){var j=[];for(var i in V){var k=V[i];var l=s[h].data[k];if(l!==undefined){j.push(new F({path:k,operator:b.EQ,value1:l}));}}if(j.length>0){d.push(new F(j,true));}}}if(o){var v=c.getVizSelection(o);var V=o.getVisibleDimensions();var D=c.getDimensionsFromDrillStack(o);if(D.length>0){var f=c.getChartModel(m,"drillStack")||{};c.getChartModel(m,"drillStack",{});f[D.toString()]=v;c.getChartModel(m,"drillStack",f);}if(v.length>0){e(v);}else{var g=Object.keys(f)||[];var P=f[g[g.length-2]]||[];e(P);}c.getChartModel(m,"filters",d);}},getFilterBarFilterInfo:function(o){return a.getFilterInfo(o.getFilter());},getAllFilterInfo:function(o){var f=c.getFilterBarFilterInfo(o);var d=c.getChartFilters(o);if(d&&d.aFilters&&d.aFilters.length){f.filters.push(d);}return f;},getChartSelectedData:function(o){var s=[];switch(o.getSelectionBehavior()){case"DATAPOINT":s=o.getSelectedDataPoints().dataPoints;break;case"CATEGORY":s=o.getSelectedCategories().categories;break;case"SERIES":s=o.getSelectedSeries().series;break;}return s;},getChartModel:function(m,P,d){var i=m.getBindingContext("internal");if(!i){return false;}if(d){i.setProperty(P,d);}return i&&i.getObject(P);},getDimensionsFromDrillStack:function(o){var d=o.getDrillStack()||[];var e=d.pop()||{};var D=e.dimension||[];return D;},getVizSelection:function(o){return(o&&o._getVizFrame()&&o._getVizFrame().vizSelection())||[];}};return c;});
