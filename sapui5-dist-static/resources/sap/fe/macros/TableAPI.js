sap.ui.define(["sap/fe/core/helpers/ClassSupport","sap/fe/core/helpers/PasteHelper","sap/m/MessageBox","sap/ui/Device","sap/base/Log","./MacroAPI"],function(C,P,M,D,L,a){"use strict";var _,b,c,d,f,g;var h=P.parseDataForTablePaste;var j=C.MacroContext;var E=C.EventHandler;var A=C.APIClass;function k(e,p,i,o){if(!i)return;Object.defineProperty(e,p,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(o):void 0});}function l(i,e){if(!(i instanceof e)){throw new TypeError("Cannot call a class as a function");}}function m(e,p){for(var i=0;i<p.length;i++){var o=p[i];o.enumerable=o.enumerable||false;o.configurable=true;if("value"in o)o.writable=true;Object.defineProperty(e,o.key,o);}}function n(e,p,i){if(p)m(e.prototype,p);if(i)m(e,i);return e;}function q(e,i){if(typeof i!=="function"&&i!==null){throw new TypeError("Super expression must either be null or a function");}e.prototype=Object.create(i&&i.prototype,{constructor:{value:e,writable:true,configurable:true}});if(i)r(e,i);}function r(o,p){r=Object.setPrototypeOf||function r(o,p){o.__proto__=p;return o;};return r(o,p);}function s(e){return function(){var S=w(e),i;if(v()){var N=w(this).constructor;i=Reflect.construct(S,arguments,N);}else{i=S.apply(this,arguments);}return t(this,i);};}function t(e,i){if(i&&(typeof i==="object"||typeof i==="function")){return i;}return u(e);}function u(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return e;}function v(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}function w(o){w=Object.setPrototypeOf?Object.getPrototypeOf:function w(o){return o.__proto__||Object.getPrototypeOf(o);};return w(o);}function x(o,e,i){if(e in o){Object.defineProperty(o,e,{value:i,enumerable:true,configurable:true,writable:true});}else{o[e]=i;}return o;}function y(e,p,i,o,B){var F={};Object.keys(o).forEach(function(G){F[G]=o[G];});F.enumerable=!!F.enumerable;F.configurable=!!F.configurable;if('value'in F||F.initializer){F.writable=true;}F=i.slice().reverse().reduce(function(F,G){return G(e,p,F)||F;},F);if(B&&F.initializer!==void 0){F.value=F.initializer?F.initializer.call(B):void 0;F.initializer=undefined;}if(F.initializer===void 0){Object.defineProperty(e,p,F);F=null;}return F;}function z(e,i){throw new Error('Decorating class property failed. Please ensure that '+'proposal-class-properties is enabled and runs after the decorators transform.');}var T=(_=A("sap.fe.macros.TableAPI"),b=j(),_(c=(d=(g=function(e){q(T,e);var i=s(T);function T(){var o;l(this,T);for(var p=arguments.length,B=new Array(p),F=0;F<p;F++){B[F]=arguments[F];}o=i.call.apply(i,[this].concat(B));k(u(o),"tableDefinition",f,u(o));return o;}n(T,[{key:"onPaste",value:function I(o,p){var B=this;if(!this.tableDefinition.control.enablePaste||!this.getModel("ui").getProperty("/isEditable")){return;}var R=o.getParameter("data"),F=o.getSource(),G=F.data()["pasteEnabled"];var H;if(G===true||G==="true"){h(R,F).then(function(J){if(J&&J.length>0){return p.editFlow.createMultipleDocuments(F.getRowBinding(),J,B.tableDefinition.control.createAtEnd);}}).catch(function(J){L.error("Error while pasting data",J);});}else{H=sap.ui.getCore().getLibraryResourceBundle("sap.fe.core");M.error(H.getText("T_OP_CONTROLLER_SAPFE_PASTE_DISABLED_MESSAGE"),{title:H.getText("C_COMMON_SAPFE_ERROR")});}}},{key:"onPasteButtonPressed",value:function H(){var o=this;var R=sap.ui.getCore().getLibraryResourceBundle("sap.fe.templates"),p=D.os.name,B=D.browser,F=D.system;var G=R.getText("T_OP_CONTROLLER_TABLE_PASTE_BUTTON_ACTION_MESSAGE_WINDOWS_DESKTOP");if(B.mobile){G=R.getText("T_OP_CONTROLLER_TABLE_PASTE_BUTTON_ACTION_MESSAGE_TOUCH_DEVICE");}else if(F.desktop){switch(p){case"win":G=R.getText("T_OP_CONTROLLER_TABLE_PASTE_BUTTON_ACTION_MESSAGE_WINDOWS_DESKTOP");break;case"mac":G=R.getText("T_OP_CONTROLLER_TABLE_PASTE_BUTTON_ACTION_MESSAGE_IOS_DESKTOP");break;}}M.information(G,{onClose:function(){if(o.content){var I;(I=o.content.getAggregation("_content"))===null||I===void 0?void 0:I.applyFocusInfo({preventScroll:true});}}});}}]);return T;}(a),g),(f=y(d.prototype,"tableDefinition",[b],{configurable:true,enumerable:true,writable:true,initializer:null}),y(d.prototype,"onPaste",[E],Object.getOwnPropertyDescriptor(d.prototype,"onPaste"),d.prototype),y(d.prototype,"onPasteButtonPressed",[E],Object.getOwnPropertyDescriptor(d.prototype,"onPasteButtonPressed"),d.prototype)),d))||c);return T;},false);
