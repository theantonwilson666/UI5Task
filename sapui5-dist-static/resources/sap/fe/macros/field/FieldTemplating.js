sap.ui.define(["sap/fe/core/templating/UIFormatters","sap/fe/core/templating/DataModelPathHelper","sap/fe/core/helpers/BindingExpression","sap/fe/core/templating/PropertyHelper","sap/fe/core/formatters/ValueFormatter"],function(U,D,B,P,v){"use strict";var _={};var g=P.getAssociatedTextPropertyPath;var h=P.hasValueHelp;var a=P.getAssociatedCurrencyPropertyPath;var b=P.getAssociatedUnitPropertyPath;var i=P.isProperty;var c=P.getAssociatedCurrencyProperty;var d=P.getAssociatedUnitProperty;var e=P.isPathExpression;var f=B.bindingExpression;var j=B.constant;var k=B.compileBinding;var t=B.transformRecursively;var l=B.addTypeInformation;var m=B.formatResult;var n=B.annotationExpression;var o=D.getContextRelativeTargetObjectPath;var p=D.getPathRelativeLocation;var q=D.enhanceDataModelPath;var r=U.getDisplayMode;var s=function(f,I){return t(f,"Binding",function(J){var K=J;if(J.modelName===undefined){var L=q(I,J.path);K=w(L,J);}return K;});};_.addTextArrangementToBindingExpression=s;var u=function(I,J){var K,L;var M=I.targetObject;var N=(K=M.annotations)===null||K===void 0?void 0:(L=K.Measures)===null||L===void 0?void 0:L.Unit;var O=p(I.contextLocation,I.navigationProperties);J=y(M,J);var Q=J;if(N){Q=l([J,y(N.$target,n(N,O))],"sap.ui.model.odata.type.Unit");}else{var R,S;var T=(R=M.annotations)===null||R===void 0?void 0:(S=R.Measures)===null||S===void 0?void 0:S.ISOCurrency;if(T){Q=l([J,n(T,O)],"sap.ui.model.odata.type.Currency");}}return Q;};_.getBindingWithUnitOrCurrency=u;var w=function(I,J,K){var L,M;var N=K===null||K===void 0?void 0:K.displayMode;var O=J;var Q=I.targetObject;var R;if(Q.type==="Edm.Date"&&(K===null||K===void 0?void 0:K.valueFormat)){R={style:K.valueFormat};}var S=N||r(Q,I);var T=(L=Q.annotations)===null||L===void 0?void 0:(M=L.Common)===null||M===void 0?void 0:M.Text;var V=p(I.contextLocation,I.navigationProperties);J=y(Q,J,R);if(S!=="Value"&&T){switch(S){case"Description":O=n(T,V);break;case"DescriptionValue":O=m([n(T,V),J],v.formatWithBrackets);break;case"ValueDescription":O=m([J,n(T,V)],v.formatWithBrackets);break;}}return O;};_.getBindingWithTextArrangement=w;var x=function(f,I){return t(f,"Binding",function(J){var K=J;if(J.modelName===undefined){var L=q(I,J.path);K=y(L.targetObject,J);}return K;});};_.formatValueRecursively=x;var E={"Edm.Boolean":{type:"sap.ui.model.odata.type.Boolean"},"Edm.Byte":{type:"sap.ui.model.odata.type.Byte"},"Edm.Date":{type:"sap.ui.model.odata.type.Date"},"Edm.DateTimeOffset":{constraints:{"$Precision":"precision"},type:"sap.ui.model.odata.type.DateTimeOffset"},"Edm.Decimal":{constraints:{"@Org.OData.Validation.V1.Minimum/$Decimal":"minimum","@Org.OData.Validation.V1.Minimum@Org.OData.Validation.V1.Exclusive":"minimumExclusive","@Org.OData.Validation.V1.Maximum/$Decimal":"maximum","@Org.OData.Validation.V1.Maximum@Org.OData.Validation.V1.Exclusive":"maximumExclusive","$Precision":"precision","$Scale":"scale"},type:"sap.ui.model.odata.type.Decimal"},"Edm.Double":{type:"sap.ui.model.odata.type.Double"},"Edm.Guid":{type:"sap.ui.model.odata.type.Guid"},"Edm.Int16":{type:"sap.ui.model.odata.type.Int16"},"Edm.Int32":{type:"sap.ui.model.odata.type.Int32"},"Edm.Int64":{type:"sap.ui.model.odata.type.Int64"},"Edm.SByte":{type:"sap.ui.model.odata.type.SByte"},"Edm.Single":{type:"sap.ui.model.odata.type.Single"},"Edm.Stream":{type:"sap.ui.model.odata.type.Stream"},"Edm.String":{constraints:{"@com.sap.vocabularies.Common.v1.IsDigitSequence":"isDigitSequence","$MaxLength":"maxLength","$Nullable":"nullable"},type:"sap.ui.model.odata.type.String"},"Edm.TimeOfDay":{constraints:{"$Precision":"precision"},type:"sap.ui.model.odata.type.TimeOfDay"}};var y=function(I,J,K){var L=J;if(I._type==="Property"){var T=E[I.type];if(T){L.type=T.type;if(T.constraints){L.constraints={};if(T.constraints.$Scale&&I.scale!==undefined){L.constraints.scale=I.scale;}if(T.constraints.$Precision&&I.precision!==undefined){L.constraints.precision=I.precision;}if(T.constraints.$MaxLength&&I.maxLength!==undefined){L.constraints.maxLength=I.maxLength;}if(T.constraints.$Nullable&&I.nullable===false){L.constraints.nullable=I.nullable;}}if(K&&L.type==="sap.ui.model.odata.type.Date"){L.formatOptions=K;}if(L.type==="sap.ui.model.odata.type.String"){if(!L.formatOptions){L.formatOptions={};}L.formatOptions.parseKeepsEmptyString=true;}}}return L;};_.formatWithTypeInformation=y;var z=function(I,J){var K,L,M,N;if(((K=I.targetObject)===null||K===void 0?void 0:K.$Type)==="com.sap.vocabularies.UI.v1.DataField"||((L=I.targetObject)===null||L===void 0?void 0:L.$Type)==="com.sap.vocabularies.UI.v1.DataPointType"||((M=I.targetObject)===null||M===void 0?void 0:M.$Type)==="com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath"||((N=I.targetObject)===null||N===void 0?void 0:N.$Type)==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){var O=I.targetObject.Value||"";return k(j(O));}if(e(I.targetObject)&&I.targetObject.$target){var Q=I.targetEntityType.resolvePath(I.targetObject.path,true);I.targetObject=Q.target;Q.visitedObjects.forEach(function(W){if(W&&W._type==="NavigationProperty"){I.navigationProperties.push(W);}});}var R=f(o(I));var S=d(I.targetObject);var T=c(I.targetObject);var V;if(S||T){V=u(I,R);}else{V=w(I,R,J);}return k(V);};_.getTextBinding=z;var A=function(I,J){var K=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var L=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var M=arguments.length>4?arguments[4]:undefined;var N=arguments.length>5?arguments[5]:undefined;if(e(I.targetObject)&&I.targetObject.$target){var O=I.targetEntityType.resolvePath(I.targetObject.path,true);I.targetObject=O.target;O.visitedObjects.forEach(function(X){if(X&&X._type==="NavigationProperty"){I.navigationProperties.push(X);}});}var Q=I.targetObject;if(i(Q)){var R,S;var T=f(o(I));if((R=Q.annotations)===null||R===void 0?void 0:(S=R.Communication)===null||S===void 0?void 0:S.IsEmailAddress){T.type="sap.fe.core.type.Email";}else{var V=d(I.targetObject);var W=c(I.targetObject);if(!K&&(V||W)){T=u(I,T);if(V&&!h(V)||W&&!h(W)){T.formatOptions={showMeasure:false};}}else{T=y(Q,T);if(T.type==="sap.ui.model.odata.type.String"){T.formatOptions={parseKeepsEmptyString:true};}}}if(L){delete T.formatOptions;delete T.constraints;delete T.type;}if(M){T.parameters=M;}if(N){T.targetType="any";}return k(T);}else{if(Q&&Q.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){return k(n(Q.Value));}else{return"";}}};_.getValueBinding=A;var C=function(I,J){var K=b(I.targetObject);var L=a(I.targetObject);if(K||L){var M=K||L;var N=q(I,M);return A(N,J);}return undefined;};_.getUnitBinding=C;var F=function(I,J){var K=g(I.targetObject);if(K){var T=q(I,K);var V=A(T,J,true,true,{$$noPatch:true});return V;}return undefined;};_.getAssociatedTextBinding=F;var G=function(I,J,K,L){var M,N,O,Q,R,S,T,V,W,X,Y,Z,$,a1,b1,c1,d1,e1,f1,g1,h1,i1;if(!I||typeof I==="string"){return"Text";}var j1=e(I)&&I.$target||I;if((M=j1.annotations)===null||M===void 0?void 0:(N=M.UI)===null||N===void 0?void 0:N.IsImageURL){return"Avatar";}if(j1.type==="Edm.Stream"){return"Avatar";}switch(J.$Type){case"com.sap.vocabularies.UI.v1.DataPointType":return"DataPoint";case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":if(((O=J.Target)===null||O===void 0?void 0:(Q=O.$target)===null||Q===void 0?void 0:Q.$Type)==="com.sap.vocabularies.UI.v1.DataPointType"){return"DataPoint";}else if(((R=J.Target)===null||R===void 0?void 0:(S=R.$target)===null||S===void 0?void 0:S.$Type)==="com.sap.vocabularies.Communication.v1.ContactType"){return"Contact";}break;case"com.sap.vocabularies.UI.v1.DataFieldForAction":case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":return"Button";case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":return"Link";}if(J.Criticality){return"ObjectStatus";}if((T=j1.annotations)===null||T===void 0?void 0:(V=T.Measures)===null||V===void 0?void 0:V.ISOCurrency){return"AmountWithCurrency";}if(((W=j1.annotations)===null||W===void 0?void 0:(X=W.Communication)===null||X===void 0?void 0:X.IsEmailAddress)||((Y=j1.annotations)===null||Y===void 0?void 0:(Z=Y.Communication)===null||Z===void 0?void 0:Z.IsPhoneNumber)){return"Link";}if(K===null||K===void 0?void 0:($=K.targetEntitySet)===null||$===void 0?void 0:(a1=$.entityType)===null||a1===void 0?void 0:(b1=a1.annotations)===null||b1===void 0?void 0:(c1=b1.Common)===null||c1===void 0?void 0:c1.SemanticKey){var k1=K.targetEntitySet.entityType.annotations.Common.SemanticKey;var l1=!k1.every(function(r1){var s1;return(r1===null||r1===void 0?void 0:(s1=r1.$target)===null||s1===void 0?void 0:s1.name)!==j1.name;});if(l1&&L.semanticKeyStyle){var m1,n1,o1;if((m1=K.targetEntitySet)===null||m1===void 0?void 0:(n1=m1.annotations)===null||n1===void 0?void 0:(o1=n1.Common)===null||o1===void 0?void 0:o1.DraftRoot){return"SemanticKeyWithDraftIndicator";}return L.semanticKeyStyle==="ObjectIdentifier"?"ObjectIdentifier":"LabelSemanticKey";}}if((d1=j1.annotations)===null||d1===void 0?void 0:(e1=d1.UI)===null||e1===void 0?void 0:e1.MultiLineText){return"Text";}var p1=(K===null||K===void 0?void 0:(f1=K.targetEntitySet)===null||f1===void 0?void 0:(g1=f1.entityType)===null||g1===void 0?void 0:g1.navigationProperties)||[];var q1=false;p1.forEach(function(r1){if(r1.referentialConstraint&&r1.referentialConstraint.length){r1.referentialConstraint.forEach(function(s1){if((s1===null||s1===void 0?void 0:s1.sourceProperty)===j1.name){var t1,u1,v1;if(r1===null||r1===void 0?void 0:(t1=r1.targetType)===null||t1===void 0?void 0:(u1=t1.annotations)===null||u1===void 0?void 0:(v1=u1.UI)===null||v1===void 0?void 0:v1.QuickViewFacets){q1=true;}}});}});if(q1){return"LinkWithQuickViewForm";}if((h1=j1.annotations)===null||h1===void 0?void 0:(i1=h1.Common)===null||i1===void 0?void 0:i1.SemanticObject){return"LinkWrapper";}if(J.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){return"Link";}return"Text";};_.getDisplayStyle=G;var H=function(I,J){var K,L,M,N,O,Q,R,S;if(!I||typeof I==="string"){return null;}var T=e(I)&&I.$target||I;switch(J.$Type){case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":if(((K=J.Target)===null||K===void 0?void 0:(L=K.$target)===null||L===void 0?void 0:L.$Type)==="com.sap.vocabularies.Communication.v1.ContactType"){return null;}break;case"com.sap.vocabularies.UI.v1.DataFieldForAction":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":return null;}var V=d(T);var W=c(T);if(P.hasValueHelp(T)||V&&P.hasValueHelp(V)||W&&P.hasValueHelp(W)){return"InputWithValueHelp";}if(((M=T.annotations)===null||M===void 0?void 0:(N=M.UI)===null||N===void 0?void 0:N.MultiLineText)&&T.type==="Edm.String"){return"TextArea";}switch(T.type){case"Edm.Date":return"DatePicker";case"Edm.Time":case"Edm.TimeOfDay":return"TimePicker";case"Edm.DateTime":case"Edm.DateTimeOffset":return"DateTimePicker";case"Edm.Boolean":return"CheckBox";}if(((O=T.annotations)===null||O===void 0?void 0:(Q=O.Measures)===null||Q===void 0?void 0:Q.ISOCurrency)||((R=T.annotations)===null||R===void 0?void 0:(S=R.Measures)===null||S===void 0?void 0:S.Unit)){return"InputWithUnit";}return"Input";};_.getEditStyle=H;return _;},false);
