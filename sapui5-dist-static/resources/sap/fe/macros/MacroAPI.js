sap.ui.define(["sap/fe/core/helpers/ClassSupport","sap/ui/core/Control","sap/fe/core/converters/ConverterContext","sap/base/util/merge","sap/base/util/uid","sap/fe/macros/PhantomUtil","sap/ui/core/util/XMLPreprocessor"],function(C,a,b,m,u,P,X){"use strict";var _,c,d,f,g,h,j,k,l,n,q;var r=b.createConverterContextForMacro;var s=C.Property;var A=C.Aggregation;var t=C.APIClass;function v(e,p,i,o){if(!i)return;Object.defineProperty(e,p,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(o):void 0});}function w(i,e){if(!(i instanceof e)){throw new TypeError("Cannot call a class as a function");}}function x(e,p){for(var i=0;i<p.length;i++){var o=p[i];o.enumerable=o.enumerable||false;o.configurable=true;if("value"in o)o.writable=true;Object.defineProperty(e,o.key,o);}}function y(e,p,i){if(p)x(e.prototype,p);if(i)x(e,i);return e;}function z(e,p,i){if(typeof Reflect!=="undefined"&&Reflect.get){z=Reflect.get;}else{z=function z(e,p,i){var o=B(e,p);if(!o)return;var O=Object.getOwnPropertyDescriptor(o,p);if(O.get){return O.get.call(i);}return O.value;};}return z(e,p,i||e);}function B(o,p){while(!Object.prototype.hasOwnProperty.call(o,p)){o=J(o);if(o===null)break;}return o;}function D(e,i){if(typeof i!=="function"&&i!==null){throw new TypeError("Super expression must either be null or a function");}e.prototype=Object.create(i&&i.prototype,{constructor:{value:e,writable:true,configurable:true}});if(i)E(e,i);}function E(o,p){E=Object.setPrototypeOf||function E(o,p){o.__proto__=p;return o;};return E(o,p);}function F(e){return function(){var S=J(e),i;if(I()){var o=J(this).constructor;i=Reflect.construct(S,arguments,o);}else{i=S.apply(this,arguments);}return G(this,i);};}function G(e,i){if(i&&(typeof i==="object"||typeof i==="function")){return i;}return H(e);}function H(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return e;}function I(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}function J(o){J=Object.setPrototypeOf?Object.getPrototypeOf:function J(o){return o.__proto__||Object.getPrototypeOf(o);};return J(o);}function K(o,e,i){if(e in o){Object.defineProperty(o,e,{value:i,enumerable:true,configurable:true,writable:true});}else{o[e]=i;}return o;}function L(e,p,i,o,O){var Q={};Object.keys(o).forEach(function(R){Q[R]=o[R];});Q.enumerable=!!Q.enumerable;Q.configurable=!!Q.configurable;if('value'in Q||Q.initializer){Q.writable=true;}Q=i.slice().reverse().reduce(function(Q,R){return R(e,p,Q)||Q;},Q);if(O&&Q.initializer!==void 0){Q.value=Q.initializer?Q.initializer.call(O):void 0;Q.initializer=undefined;}if(Q.initializer===void 0){Object.defineProperty(e,p,Q);Q=null;}return Q;}function M(e,i){throw new Error('Decorating class property failed. Please ensure that '+'proposal-class-properties is enabled and runs after the decorators transform.');}var N=(_=t("sap.fe.macros.MacroAPI"),c=s({type:"string"}),d=s({type:"string"}),f=A({type:"sap.ui.core.Control",multiple:false,isDefault:true}),_(g=(h=(q=n=function(e){D(N,e);var i=F(N);function N(){var o;w(this,N);for(var p=arguments.length,O=new Array(p),Q=0;Q<p;Q++){O[Q]=arguments[Q];}o=i.call.apply(i,[this].concat(O));v(H(o),"contextPath",j,H(o));v(H(o),"metaPath",k,H(o));v(H(o),"content",l,H(o));K(H(o),"modelResolved",false);return o;}y(N,[{key:"rerender",value:function o(){this.content.rerender();}},{key:"getDomRef",value:function p(){var o=this.content;return o?o.getDomRef():z(J(N.prototype),"getDomRef",this).call(this);}},{key:"propagateProperties",value:function Q(o){var p=this;z(J(N.prototype),"propagateProperties",this).call(this,o);if(this.metadata.macroContexts&&!this.modelResolved){var O=this.getModel("_pageModel");if(O){Object.keys(this.metadata.macroContexts).forEach(function(R){p[R]=O.getObject(p[R]);});this.modelResolved=true;}}}}],[{key:"getAPI",value:function p(o){var S=o.getSource();while(S&&!S.isA("sap.fe.macros.MacroAPI")){S=S.getParent();}return S&&S.isA("sap.fe.macros.MacroAPI")&&S;}},{key:"setDefaultValue",value:function Q(p,o,O){if(p[o]===undefined){p[o]=O;}}},{key:"register",value:function o(){P.register(this);}},{key:"unregister",value:function o(){X.plugIn(null,this.namespace,this.macroName);}}]);return N;}(a),K(n,"namespace","sap.fe.macros"),K(n,"macroName","Macro"),K(n,"fragment","sap.fe.macros.Macro"),K(n,"hasValidation",true),K(n,"getConverterContext",function(o,e,S){var i=S.appComponent;var p=S.models.viewData&&S.models.viewData.getData();var O=r(o.startingEntitySet.name,S.models.metaModel,p.converterType,i&&i.getShellServices(),i&&i.getDiagnostics(),m,o.contextLocation,p);return O;}),K(n,"createBindingContext",function(o,S){var e="/"+u();S.models.converterContext.setProperty(e,o);return S.models.converterContext.createBindingContext(e);}),q),(j=L(h.prototype,"contextPath",[c],{configurable:true,enumerable:true,writable:true,initializer:null}),k=L(h.prototype,"metaPath",[d],{configurable:true,enumerable:true,writable:true,initializer:null}),l=L(h.prototype,"content",[f],{configurable:true,enumerable:true,writable:true,initializer:null})),h))||g);return N;},false);
