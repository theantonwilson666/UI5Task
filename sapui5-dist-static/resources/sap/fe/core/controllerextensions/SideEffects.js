sap.ui.define(["sap/ui/core/mvc/ControllerExtension"],function(C){"use strict";return C.extend("sap.fe.core.controllerextensions.SideEffects",{metadata:{methods:{"addControlSideEffects":{"public":true,"final":true},"getEntitySideEffects":{"public":true,"final":true},"getControlSideEffects":{"public":false,"final":true},"getEmptyPropertySideEffects":{"public":false,"final":true},"removeControlSideEffects":{"public":true,"final":true},"setControlSideEffects":{"public":false,"final":true}}},destroy:function(){delete this._mAppSideEffects;C.prototype.destroy.apply(this);},getEmptyPropertySideEffects:function(){return{TargetEntities:[],TargetProperties:[]};},getEntitySideEffects:function(e){var E={},t=this;Object.keys(this._mAppSideEffects).forEach(function(c){var m=t._mAppSideEffects[c],a=m[e];if(a){E=t._aggregateEntitySideEffects(a,E);}});return E;},getControlSideEffects:function(c){return this._mAppSideEffects[c]||{};},setControlSideEffects:function(c,m){this._mAppSideEffects[c]=m;},addControlSideEffects:function(a,c){var v=this._isValidControl(c),s=a.entityType,S=a.property;if(v&&s&&a.property){var b=c.getId(),m=this.getControlSideEffects(b),e=m[s]||{};e[S]=this._aggregatePropertySideEffects(a,e[S]);m[s]=e;this.setControlSideEffects(b,m);}},removeControlSideEffects:function(c){if(this._isValidControl(c)){delete this._mAppSideEffects[c.getId()];}},_aggregateEntitySideEffects:function(n,t){var a=this,A={},T=t||{};Object.keys(n).forEach(function(e){A[e]=a._aggregatePropertySideEffects(n[e],T[e]);});return A;},_aggregatePropertySideEffects:function(n,t){var a=this.getEmptyPropertySideEffects(),T=t||this.getEmptyPropertySideEffects();Object.keys(a).forEach(function(s){var A=n[s],b=T[s]||[];if(A){a[s]=b.concat(A.filter(function(v){if(v.$NavigationPropertyPath){return b.map(function(o){return o.$NavigationPropertyPath;}).indexOf(v.$NavigationPropertyPath);}else if(typeof v==="string"){return b.indexOf(v)<0;}else{throw new Error("Unsupported SideEffect type for "+s);}}));}});return a;},_isValidControl:function(c){return c&&c.isA&&c.isA("sap.ui.base.ManagedObject");},override:{onInit:function(){this._mAppSideEffects={};}}});});
