sap.ui.define(["sap/fe/core/helpers/BindingExpression","sap/fe/core/templating/PropertyHelper"],function(B,P){"use strict";var _={};var i=P.isPathExpression;var e=B.equal;var c=B.constant;var a=B.annotationExpression;var g=function(o){var v=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];if(!o){return v.map(function(q){return q.name;});}else{if(v.length>=o.navigationProperties.length){var r=[];o.navigationProperties.forEach(function(q,s){if(v[s]!==q){r.push(v[s]);}});r=r.concat(v.slice(o.navigationProperties.length));return r.map(function(q){return q.name;});}else{var p=[];v.forEach(function(q,s){if(o.navigationProperties[s]!==q){p.push(v[s]);}});p=p.concat(o.navigationProperties.slice(v.length));return p.map(function(q){return q.partner;});}}};_.getPathRelativeLocation=g;var b=function(o,p){var s="";if(i(p)&&p.path){s=p.path;}else if(typeof p==="string"){s=p;}var t;if(i(p)){t=p.$target;}else if(o.targetEntityType){t=o.targetEntityType.resolvePath(s);}else{t=o.targetObject;}var q=s.split("/");var r=o.targetEntitySet;var u=o.targetEntityType;var v=o.navigationProperties.concat();q.reduce(function(w,x){if(!w){return undefined;}var y=w.navigationProperties.find(function(z){return z.name===x;});if(y){v.push(y);u=y.targetType;if(r&&r.navigationPropertyBinding.hasOwnProperty(x)){r=r.navigationPropertyBinding[x];}return u;}return undefined;},o.targetEntityType);return{startingEntitySet:o.startingEntitySet,navigationProperties:v,contextLocation:o.contextLocation,targetEntitySet:r,targetEntityType:u,targetObject:t};};_.enhanceDataModelPath=b;var d=function(o){var t="/".concat(o.startingEntitySet.name);var p=o.startingEntitySet;var q=[];o.navigationProperties.forEach(function(r){q.push(r.name);if(p&&p.navigationPropertyBinding.hasOwnProperty(q.join("/"))){t+="/$NavigationPropertyBinding/".concat(q.join("/"),"/$");p=p.navigationPropertyBinding[q.join("/")];q=[];}});return t;};_.getTargetEntitySetPath=d;var f=function(o){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var p="";if(!r){p+="/".concat(o.startingEntitySet.name);}if(o.navigationProperties.length>0){if(p.length>0){p+="/";}p+=o.navigationProperties.map(function(q){return q.name;}).join("/");}if(o.targetObject&&o.targetObject.name&&o.targetObject._type!=="NavigationProperty"&&o.targetObject._type!=="EntityType"&&o.targetObject!==o.startingEntitySet){if(!p.endsWith("/")){p+="/";}p+="".concat(o.targetObject.name);}else if(o.targetObject&&o.targetObject.hasOwnProperty("term")){if(p.length>0&&!p.endsWith("/")){p+="/";}p+="@".concat(o.targetObject.term);}return p;};_.getTargetObjectPath=f;var h=function(o){var p=g(o.contextLocation,o.navigationProperties).join("/");if(o.targetObject&&o.targetObject.name&&o.targetObject._type!=="NavigationProperty"&&o.targetObject!==o.startingEntitySet){if(p.length>0&&!p.endsWith("/")){p+="/";}p+="".concat(o.targetObject.name);}else if(o.targetObject&&o.targetObject.hasOwnProperty("term")){if(p.length>0&&!p.endsWith("/")){p+="/";}p+="@".concat(o.targetObject.term);}return p;};_.getContextRelativeTargetObjectPath=h;var j=function(o,p){return n(o,function(q){var r;return q===null||q===void 0?void 0:(r=q.UpdateRestrictions)===null||r===void 0?void 0:r.Updatable;},p);};_.isPathUpdatable=j;var k=function(o,p,t){return n(o,function(q){var r;return q===null||q===void 0?void 0:(r=q.DeleteRestrictions)===null||r===void 0?void 0:r.Deletable;},p,t);};_.isPathDeletable=k;var l=function(o,p){return n(o,function(q){var r;return q===null||q===void 0?void 0:(r=q.InsertRestrictions)===null||r===void 0?void 0:r.Insertable;},p);};_.isPathInsertable=l;var m=function(o,p){return n(o,function(q){var r;var s=(q===null||q===void 0?void 0:(r=q.FilterRestrictions)===null||r===void 0?void 0:r.FilterExpressionRestrictions)||[];var t=s.find(function(v){return v.Property.$target===o.targetObject;});if(t){var u;return p.indexOf(t===null||t===void 0?void 0:(u=t.AllowedExpressions)===null||u===void 0?void 0:u.toString())!==-1;}else{return false;}});};_.checkFilterExpressionRestrictions=m;var n=function(o,p,q,t){var r,s;if(!o||!o.startingEntitySet){return c(true);}o=b(o,q);var u=o.startingEntitySet;var v=null;var w=[];var x=[];var y=u;var z=false;o.navigationProperties.forEach(function(J){if(z){w=[];}w.push(J.name);x.push(J);if(!J.containsTarget){var K=w.join("/");if(u&&u.navigationPropertyBinding.hasOwnProperty(K)){v=u;u=u.navigationPropertyBinding[K];y=u;z=true;}else{v=u;u=null;z=true;}}else{v=u;y=null;}});var A=w.join("/");var C;if(v!==null){var D,E,F;var G=v;(D=G.annotations)===null||D===void 0?void 0:(E=D.Capabilities)===null||E===void 0?void 0:(F=E.NavigationRestrictions)===null||F===void 0?void 0:F.RestrictedProperties.forEach(function(J){var K;if(((K=J.NavigationProperty)===null||K===void 0?void 0:K.type)==="NavigationPropertyPath"){var L=p(J);if(A===J.NavigationProperty.value&&L!==undefined){var M;C=e(a(L,g((M=o)===null||M===void 0?void 0:M.contextLocation,x.slice(0,-1))),true);}}});}var H;var I=p((r=y)===null||r===void 0?void 0:(s=r.annotations)===null||s===void 0?void 0:s.Capabilities);if(I!==undefined){H=e(a(I,g(o.contextLocation,x)),true);}if(t&&!C&&(I===null||I===void 0?void 0:I.path)){var R={"currentEntityRestriction":H};return R;}return C||H||c(true);};_.checkOnPath=n;return _;},false);
