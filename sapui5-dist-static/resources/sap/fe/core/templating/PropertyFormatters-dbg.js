sap.ui.define(["./PropertyHelper", "./UIFormatters", "sap/fe/core/converters/MetaModelConverter", "sap/fe/core/templating/DataModelPathHelper"], function (PropertyHelper, UIFormatters, MetaModelConverter, DataModelPathHelper) {
  "use strict";

  var _exports = {};
  var getTargetObjectPath = DataModelPathHelper.getTargetObjectPath;
  var enhanceDataModelPath = DataModelPathHelper.enhanceDataModelPath;
  var getInvolvedDataModelObjects = MetaModelConverter.getInvolvedDataModelObjects;
  var getConverterContext = UIFormatters.getConverterContext;

  var getProperty = function (oContext, oInterface) {
    var sPath = oInterface.context.getPath();

    if (!oContext) {
      throw new Error("Unresolved context path " + sPath);
    }

    var isPath = false;

    if (typeof oContext === "object" && oContext.hasOwnProperty("$Path")) {
      isPath = true;
    } else if (typeof oContext === "object" && oContext.hasOwnProperty("$kind") && oContext.$kind !== "Property") {
      throw new Error("Context does not resolve to a Property object but to a " + oContext.$kind);
    }

    var oConverterContext = getConverterContext(oContext, oInterface);

    if (isPath) {
      oConverterContext = oConverterContext.$target;
    }

    return oConverterContext;
  };

  _exports.getProperty = getProperty;

  var getPropertyObjectPath = function (oContext, oInterface) {
    var sPath = oInterface.context.getPath();

    if (!oContext) {
      throw new Error("Unresolved context path " + sPath);
    }

    if (typeof oContext === "object" && oContext.hasOwnProperty("$kind") && oContext.$kind !== "Property") {
      throw new Error("Context does not resolve to a Property object but to a " + oContext.$kind);
    }

    var involvedDataModelObjects = getInvolvedDataModelObjects(oInterface.context);

    if (involvedDataModelObjects.targetObject && involvedDataModelObjects.targetObject.type === "Path") {
      involvedDataModelObjects = enhanceDataModelPath(involvedDataModelObjects, involvedDataModelObjects.targetObject.path);
    }

    if (sPath.endsWith("$Path")) {
      involvedDataModelObjects = enhanceDataModelPath(involvedDataModelObjects, oContext);
    }

    return involvedDataModelObjects;
  };

  _exports.getPropertyObjectPath = getPropertyObjectPath;

  var isKey = function (oContext, oInterface) {
    var oProperty = getProperty(oContext, oInterface);
    return PropertyHelper.isKey(oProperty);
  };

  _exports.isKey = isKey;

  var hasValueHelp = function (oContext, oInterface) {
    var oProperty = getProperty(oContext, oInterface);
    return PropertyHelper.hasValueHelp(oProperty);
  };

  _exports.hasValueHelp = hasValueHelp;

  var hasDateType = function (oContext, oInterface) {
    var oProperty = getProperty(oContext, oInterface);
    return PropertyHelper.hasDateType(oProperty);
  };

  _exports.hasDateType = hasDateType;

  var hasValueHelpWithFixedValues = function (oContext, oInterface) {
    var oProperty = getProperty(oContext, oInterface);
    return PropertyHelper.hasValueHelpWithFixedValues(oProperty);
  };

  _exports.hasValueHelpWithFixedValues = hasValueHelpWithFixedValues;

  var getName = function (oContext, oInterface) {
    var oProperty = getProperty(oContext, oInterface);
    return oProperty.name;
  };

  _exports.getName = getName;

  var getLabel = function (oContext, oInterface) {
    var oProperty = getProperty(oContext, oInterface);
    return PropertyHelper.getLabel(oProperty);
  };

  _exports.getLabel = getLabel;

  var getPropertyPath = function (oContext, oInterface) {
    var propertyPath = getPropertyObjectPath(oContext, oInterface);
    return getTargetObjectPath(propertyPath);
  };

  _exports.getPropertyPath = getPropertyPath;

  var getRelativePropertyPath = function (oContext, oInterface) {
    var propertyPath = getPropertyObjectPath(oContext, oInterface);
    return getTargetObjectPath(propertyPath, true);
  };

  _exports.getRelativePropertyPath = getRelativePropertyPath;
  return _exports;
}, false);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlByb3BlcnR5Rm9ybWF0dGVycy50cyJdLCJuYW1lcyI6WyJnZXRQcm9wZXJ0eSIsIm9Db250ZXh0Iiwib0ludGVyZmFjZSIsInNQYXRoIiwiY29udGV4dCIsImdldFBhdGgiLCJFcnJvciIsImlzUGF0aCIsImhhc093blByb3BlcnR5IiwiJGtpbmQiLCJvQ29udmVydGVyQ29udGV4dCIsImdldENvbnZlcnRlckNvbnRleHQiLCIkdGFyZ2V0IiwiZ2V0UHJvcGVydHlPYmplY3RQYXRoIiwiaW52b2x2ZWREYXRhTW9kZWxPYmplY3RzIiwiZ2V0SW52b2x2ZWREYXRhTW9kZWxPYmplY3RzIiwidGFyZ2V0T2JqZWN0IiwidHlwZSIsImVuaGFuY2VEYXRhTW9kZWxQYXRoIiwicGF0aCIsImVuZHNXaXRoIiwiaXNLZXkiLCJvUHJvcGVydHkiLCJQcm9wZXJ0eUhlbHBlciIsImhhc1ZhbHVlSGVscCIsImhhc0RhdGVUeXBlIiwiaGFzVmFsdWVIZWxwV2l0aEZpeGVkVmFsdWVzIiwiZ2V0TmFtZSIsIm5hbWUiLCJnZXRMYWJlbCIsImdldFByb3BlcnR5UGF0aCIsInByb3BlcnR5UGF0aCIsImdldFRhcmdldE9iamVjdFBhdGgiLCJnZXRSZWxhdGl2ZVByb3BlcnR5UGF0aCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBTU8sTUFBTUEsV0FBVyxHQUFHLFVBQVNDLFFBQVQsRUFBcUNDLFVBQXJDLEVBQXdGO0FBQ2xILFFBQU1DLEtBQUssR0FBR0QsVUFBVSxDQUFDRSxPQUFYLENBQW1CQyxPQUFuQixFQUFkOztBQUNBLFFBQUksQ0FBQ0osUUFBTCxFQUFlO0FBQ2QsWUFBTSxJQUFJSyxLQUFKLENBQVUsNkJBQTZCSCxLQUF2QyxDQUFOO0FBQ0E7O0FBQ0QsUUFBSUksTUFBTSxHQUFHLEtBQWI7O0FBQ0EsUUFBSSxPQUFPTixRQUFQLEtBQW9CLFFBQXBCLElBQWdDQSxRQUFRLENBQUNPLGNBQVQsQ0FBd0IsT0FBeEIsQ0FBcEMsRUFBc0U7QUFDckVELE1BQUFBLE1BQU0s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SE07Ozs7QUFLQSxNQUFNSyxPQUFPLEdBQUcsVUFBUzFCLFFBQVQsRUFBcUNDLFVBQXJDLEVBQXNGO0FBQzVHLFFBQU1vQixTQUFtQixHQUFHdEIsV0FBVyxDQUFDQyxRQUFELEVBQVdDLFVBQVgsQ0FBdkM7QUFDQSxXQUFPb0IsU0FBUyxDQUFDTSxJQUFqQjtBQUNBLEdBSE07Ozs7QUFLQSxNQUFNQyxRQUFRLEdBQUcsVUFBUzVCLFFBQVQsRUFBcUNDLFVBQXJDLEVBQXNGO0FBQzdHLFFBQU1vQixTQUFtQixHQUFHdEIsV0FBVyxDQUFDQyxRQUFELEVBQVdDLFVBQVgsQ0FBdkM7QUFDQSxXQUFPcUIsY0FBYyxDQUFDTSxRQUFmLENBQXdCUCxTQUF4QixDQUFQO0FBQ0EsR0FITTs7OztBQUtBLE1BQU1RLGVBQWUsR0FBRyxVQUFTN0IsUUFBVCxFQUFxQ0MsVUFBckMsRUFBc0Y7QUFDcEgsUUFBTTZCLFlBQVksR0FBR2xCLHFCQUFxQixDQUFDWixRQUFELEVBQVdDLFVBQVgsQ0FBMUM7QUFDQSxXQUFPOEIsbUJBQW1CLENBQUNELFlBQUQsQ0FBMUI7QUFDQSxHQUhNOzs7O0FBS0EsTUFBTUUsdUJBQXVCLEdBQUcsVUFBU2hDLFFBQVQsRUFBcUNDLFVBQXJDLEVBQXNGO0FBQzVILFFBQU02QixZQUFZLEdBQUdsQixxQkFBcUIsQ0FBQ1osUUFBRCxFQUFXQyxVQUFYLENBQTFDO0FBQ0EsV0FBTzhCLG1CQUFtQixDQUFDRCxZQUFELEVBQWUsSUFBZixDQUExQjtBQUNBLEdBSE0iLCJzb3VyY2VSb290IjoiLiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFByb3BlcnR5SGVscGVyIGZyb20gXCIuL1Byb3BlcnR5SGVscGVyXCI7XG5pbXBvcnQgeyBnZXRDb252ZXJ0ZXJDb250ZXh0LCBNZXRhTW9kZWxDb250ZXh0LCBDb21wdXRlZEFubm90YXRpb25JbnRlcmZhY2UgfSBmcm9tIFwiLi9VSUZvcm1hdHRlcnNcIjtcbmltcG9ydCB7IFByb3BlcnR5IH0gZnJvbSBcIkBzYXAtdXgvdm9jYWJ1bGFyaWVzLXR5cGVzL2Rpc3QvQ29udmVydGVyXCI7XG5pbXBvcnQgeyBnZXRJbnZvbHZlZERhdGFNb2RlbE9iamVjdHMgfSBmcm9tIFwic2FwL2ZlL2NvcmUvY29udmVydGVycy9NZXRhTW9kZWxDb252ZXJ0ZXJcIjtcbmltcG9ydCB7IERhdGFNb2RlbE9iamVjdFBhdGgsIGVuaGFuY2VEYXRhTW9kZWxQYXRoLCBnZXRUYXJnZXRPYmplY3RQYXRoIH0gZnJvbSBcInNhcC9mZS9jb3JlL3RlbXBsYXRpbmcvRGF0YU1vZGVsUGF0aEhlbHBlclwiO1xuXG5leHBvcnQgY29uc3QgZ2V0UHJvcGVydHkgPSBmdW5jdGlvbihvQ29udGV4dDogTWV0YU1vZGVsQ29udGV4dCwgb0ludGVyZmFjZTogQ29tcHV0ZWRBbm5vdGF0aW9uSW50ZXJmYWNlKTogUHJvcGVydHkge1xuXHRjb25zdCBzUGF0aCA9IG9JbnRlcmZhY2UuY29udGV4dC5nZXRQYXRoKCk7XG5cdGlmICghb0NvbnRleHQpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJVbnJlc29sdmVkIGNvbnRleHQgcGF0aCBcIiArIHNQYXRoKTtcblx0fVxuXHRsZXQgaXNQYXRoID0gZmFsc2U7XG5cdGlmICh0eXBlb2Ygb0NvbnRleHQgPT09IFwib2JqZWN0XCIgJiYgb0NvbnRleHQuaGFzT3duUHJvcGVydHkoXCIkUGF0aFwiKSkge1xuXHRcdGlzUGF0aCA9IHRydWU7XG5cdH0gZWxzZSBpZiAodHlwZW9mIG9Db250ZXh0ID09PSBcIm9iamVjdFwiICYmIG9Db250ZXh0Lmhhc093blByb3BlcnR5KFwiJGtpbmRcIikgJiYgb0NvbnRleHQuJGtpbmQgIT09IFwiUHJvcGVydHlcIikge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIkNvbnRleHQgZG9lcyBub3QgcmVzb2x2ZSB0byBhIFByb3BlcnR5IG9iamVjdCBidXQgdG8gYSBcIiArIG9Db250ZXh0LiRraW5kKTtcblx0fVxuXHRsZXQgb0NvbnZlcnRlckNvbnRleHQgPSBnZXRDb252ZXJ0ZXJDb250ZXh0KG9Db250ZXh0LCBvSW50ZXJmYWNlKSBhcyBQcm9wZXJ0eTtcblx0aWYgKGlzUGF0aCkge1xuXHRcdG9Db252ZXJ0ZXJDb250ZXh0ID0gKG9Db252ZXJ0ZXJDb250ZXh0IGFzIGFueSkuJHRhcmdldDtcblx0fVxuXHRyZXR1cm4gb0NvbnZlcnRlckNvbnRleHQ7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0UHJvcGVydHlPYmplY3RQYXRoID0gZnVuY3Rpb24oXG5cdG9Db250ZXh0OiBNZXRhTW9kZWxDb250ZXh0IHwgc3RyaW5nLFxuXHRvSW50ZXJmYWNlOiBDb21wdXRlZEFubm90YXRpb25JbnRlcmZhY2Vcbik6IERhdGFNb2RlbE9iamVjdFBhdGgge1xuXHRjb25zdCBzUGF0aCA9IG9JbnRlcmZhY2UuY29udGV4dC5nZXRQYXRoKCk7XG5cdGlmICghb0NvbnRleHQpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJVbnJlc29sdmVkIGNvbnRleHQgcGF0aCBcIiArIHNQYXRoKTtcblx0fVxuXHRpZiAodHlwZW9mIG9Db250ZXh0ID09PSBcIm9iamVjdFwiICYmIG9Db250ZXh0Lmhhc093blByb3BlcnR5KFwiJGtpbmRcIikgJiYgb0NvbnRleHQuJGtpbmQgIT09IFwiUHJvcGVydHlcIikge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIkNvbnRleHQgZG9lcyBub3QgcmVzb2x2ZSB0byBhIFByb3BlcnR5IG9iamVjdCBidXQgdG8gYSBcIiArIG9Db250ZXh0LiRraW5kKTtcblx0fVxuXHRsZXQgaW52b2x2ZWREYXRhTW9kZWxPYmplY3RzID0gZ2V0SW52b2x2ZWREYXRhTW9kZWxPYmplY3RzKG9JbnRlcmZhY2UuY29udGV4dCk7XG5cdGlmIChpbnZvbHZlZERhdGFNb2RlbE9iamVjdHMudGFyZ2V0T2JqZWN0ICYmIGludm9sdmVkRGF0YU1vZGVsT2JqZWN0cy50YXJnZXRPYmplY3QudHlwZSA9PT0gXCJQYXRoXCIpIHtcblx0XHRpbnZvbHZlZERhdGFNb2RlbE9iamVjdHMgPSBlbmhhbmNlRGF0YU1vZGVsUGF0aChpbnZvbHZlZERhdGFNb2RlbE9iamVjdHMsIGludm9sdmVkRGF0YU1vZGVsT2JqZWN0cy50YXJnZXRPYmplY3QucGF0aCk7XG5cdH1cblx0aWYgKHNQYXRoLmVuZHNXaXRoKFwiJFBhdGhcIikpIHtcblx0XHRpbnZvbHZlZERhdGFNb2RlbE9iamVjdHMgPSBlbmhhbmNlRGF0YU1vZGVsUGF0aChpbnZvbHZlZERhdGFNb2RlbE9iamVjdHMsIG9Db250ZXh0IGFzIHN0cmluZyk7XG5cdH1cblx0cmV0dXJuIGludm9sdmVkRGF0YU1vZGVsT2JqZWN0cztcbn07XG5cbmV4cG9ydCBjb25zdCBpc0tleSA9IGZ1bmN0aW9uKG9Db250ZXh0OiBNZXRhTW9kZWxDb250ZXh0LCBvSW50ZXJmYWNlOiBDb21wdXRlZEFubm90YXRpb25JbnRlcmZhY2UpOiBib29sZWFuIHtcblx0Y29uc3Qgb1Byb3BlcnR5OiBQcm9wZXJ0eSA9IGdldFByb3BlcnR5KG9Db250ZXh0LCBvSW50ZXJmYWNlKTtcblx0cmV0dXJuIFByb3BlcnR5SGVscGVyLmlzS2V5KG9Qcm9wZXJ0eSk7XG59O1xuXG5leHBvcnQgY29uc3QgaGFzVmFsdWVIZWxwID0gZnVuY3Rpb24ob0NvbnRleHQ6IE1ldGFNb2RlbENvbnRleHQsIG9JbnRlcmZhY2U6IENvbXB1dGVkQW5ub3RhdGlvbkludGVyZmFjZSk6IGJvb2xlYW4ge1xuXHRjb25zdCBvUHJvcGVydHk6IFByb3BlcnR5ID0gZ2V0UHJvcGVydHkob0NvbnRleHQsIG9JbnRlcmZhY2UpO1xuXHRyZXR1cm4gUHJvcGVydHlIZWxwZXIuaGFzVmFsdWVIZWxwKG9Qcm9wZXJ0eSk7XG59O1xuXG5leHBvcnQgY29uc3QgaGFzRGF0ZVR5cGUgPSBmdW5jdGlvbihvQ29udGV4dDogTWV0YU1vZGVsQ29udGV4dCwgb0ludGVyZmFjZTogQ29tcHV0ZWRBbm5vdGF0aW9uSW50ZXJmYWNlKTogYm9vbGVhbiB7XG5cdGNvbnN0IG9Qcm9wZXJ0eTogUHJvcGVydHkgPSBnZXRQcm9wZXJ0eShvQ29udGV4dCwgb0ludGVyZmFjZSk7XG5cdHJldHVybiBQcm9wZXJ0eUhlbHBlci5oYXNEYXRlVHlwZShvUHJvcGVydHkpO1xufTtcblxuZXhwb3J0IGNvbnN0IGhhc1ZhbHVlSGVscFdpdGhGaXhlZFZhbHVlcyA9IGZ1bmN0aW9uKG9Db250ZXh0OiBNZXRhTW9kZWxDb250ZXh0LCBvSW50ZXJmYWNlOiBDb21wdXRlZEFubm90YXRpb25JbnRlcmZhY2UpOiBib29sZWFuIHtcblx0Y29uc3Qgb1Byb3BlcnR5OiBQcm9wZXJ0eSA9IGdldFByb3BlcnR5KG9Db250ZXh0LCBvSW50ZXJmYWNlKTtcblx0cmV0dXJuIFByb3BlcnR5SGVscGVyLmhhc1ZhbHVlSGVscFdpdGhGaXhlZFZhbHVlcyhvUHJvcGVydHkpO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldE5hbWUgPSBmdW5jdGlvbihvQ29udGV4dDogTWV0YU1vZGVsQ29udGV4dCwgb0ludGVyZmFjZTogQ29tcHV0ZWRBbm5vdGF0aW9uSW50ZXJmYWNlKTogc3RyaW5nIHtcblx0Y29uc3Qgb1Byb3BlcnR5OiBQcm9wZXJ0eSA9IGdldFByb3BlcnR5KG9Db250ZXh0LCBvSW50ZXJmYWNlKTtcblx0cmV0dXJuIG9Qcm9wZXJ0eS5uYW1lO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldExhYmVsID0gZnVuY3Rpb24ob0NvbnRleHQ6IE1ldGFNb2RlbENvbnRleHQsIG9JbnRlcmZhY2U6IENvbXB1dGVkQW5ub3RhdGlvbkludGVyZmFjZSk6IHN0cmluZyB7XG5cdGNvbnN0IG9Qcm9wZXJ0eTogUHJvcGVydHkgPSBnZXRQcm9wZXJ0eShvQ29udGV4dCwgb0ludGVyZmFjZSk7XG5cdHJldHVybiBQcm9wZXJ0eUhlbHBlci5nZXRMYWJlbChvUHJvcGVydHkpO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldFByb3BlcnR5UGF0aCA9IGZ1bmN0aW9uKG9Db250ZXh0OiBNZXRhTW9kZWxDb250ZXh0LCBvSW50ZXJmYWNlOiBDb21wdXRlZEFubm90YXRpb25JbnRlcmZhY2UpOiBzdHJpbmcge1xuXHRjb25zdCBwcm9wZXJ0eVBhdGggPSBnZXRQcm9wZXJ0eU9iamVjdFBhdGgob0NvbnRleHQsIG9JbnRlcmZhY2UpO1xuXHRyZXR1cm4gZ2V0VGFyZ2V0T2JqZWN0UGF0aChwcm9wZXJ0eVBhdGgpO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldFJlbGF0aXZlUHJvcGVydHlQYXRoID0gZnVuY3Rpb24ob0NvbnRleHQ6IE1ldGFNb2RlbENvbnRleHQsIG9JbnRlcmZhY2U6IENvbXB1dGVkQW5ub3RhdGlvbkludGVyZmFjZSk6IHN0cmluZyB7XG5cdGNvbnN0IHByb3BlcnR5UGF0aCA9IGdldFByb3BlcnR5T2JqZWN0UGF0aChvQ29udGV4dCwgb0ludGVyZmFjZSk7XG5cdHJldHVybiBnZXRUYXJnZXRPYmplY3RQYXRoKHByb3BlcnR5UGF0aCwgdHJ1ZSk7XG59O1xuIl19