sap.ui.define(["sap/ui/core/service/ServiceFactory","sap/ui/core/service/Service"],function(S,a){"use strict";function _(e,i){return g(e)||f(e,i)||c(e,i)||b();}function b(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function c(o,e){if(!o)return;if(typeof o==="string")return d(o,e);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(o,e);}function d(e,j){if(j==null||j>e.length)j=e.length;for(var i=0,k=new Array(j);i<j;i++){k[i]=e[i];}return k;}function f(e,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(e)))return;var j=[];var k=true;var n=false;var o=undefined;try{for(var p=e[Symbol.iterator](),B;!(k=(B=p.next()).done);k=true){j.push(B.value);if(i&&j.length===i)break;}}catch(C){n=true;o=C;}finally{try{if(!k&&p["return"]!=null)p["return"]();}finally{if(n)throw o;}}return j;}function g(e){if(Array.isArray(e))return e;}function h(i,C){if(!(i instanceof C)){throw new TypeError("Cannot call a class as a function");}}function l(e,p){for(var i=0;i<p.length;i++){var j=p[i];j.enumerable=j.enumerable||false;j.configurable=true;if("value"in j)j.writable=true;Object.defineProperty(e,j.key,j);}}function m(C,p,e){if(p)l(C.prototype,p);if(e)l(C,e);return C;}function q(e,i){if(typeof i!=="function"&&i!==null){throw new TypeError("Super expression must either be null or a function");}e.prototype=Object.create(i&&i.prototype,{constructor:{value:e,writable:true,configurable:true}});if(i)r(e,i);}function r(o,p){r=Object.setPrototypeOf||function r(o,p){o.__proto__=p;return o;};return r(o,p);}function s(D){return function(){var e=w(D),i;if(v()){var N=w(this).constructor;i=Reflect.construct(e,arguments,N);}else{i=e.apply(this,arguments);}return t(this,i);};}function t(e,i){if(i&&(typeof i==="object"||typeof i==="function")){return i;}return u(e);}function u(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return e;}function v(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}function w(o){w=Object.setPrototypeOf?Object.getPrototypeOf:function w(o){return o.__proto__||Object.getPrototypeOf(o);};return w(o);}var x=function(e){q(x,e);var i=s(x);function x(){h(this,x);return i.apply(this,arguments);}m(x,[{key:"init",value:function j(){this.initPromise=Promise.resolve(this);this.instanceType="mock";}},{key:"getLinks",value:function j(o){return Promise.resolve([]);}},{key:"getLinksWithCache",value:function j(o){return Promise.resolve([]);}},{key:"toExternal",value:function j(n,C){return;}},{key:"getStartupAppState",value:function j(o){return Promise.resolve(null);}},{key:"backToPreviousApp",value:function j(){return;}},{key:"hrefForExternal",value:function k(o,C,j){return"";}},{key:"getAppState",value:function k(C,j){return Promise.resolve({});}},{key:"createEmptyAppState",value:function j(C){return Promise.resolve({});}},{key:"isNavigationSupported",value:function j(n,C){return Promise.resolve({});}},{key:"isInitialNavigation",value:function j(){return false;}},{key:"expandCompactHash",value:function j(H){return Promise.resolve({});}},{key:"parseShellHash",value:function p(H){return{};}},{key:"splitHash",value:function j(H){return Promise.resolve({});}},{key:"constructShellHash",value:function j(n){return"";}},{key:"setDirtyFlag",value:function j(D){return;}},{key:"registerDirtyStateProvider",value:function j(D){return;}},{key:"deregisterDirtyStateProvider",value:function j(D){return;}},{key:"createRenderer",value:function j(){return{};}},{key:"getUser",value:function j(){return{};}},{key:"hasUShell",value:function j(){return false;}},{key:"registerNavigationFilter",value:function j(n){return;}},{key:"unregisterNavigationFilter",value:function j(n){return;}},{key:"setBackNavigation",value:function j(C){return;}},{key:"setHierarchy",value:function j(H){return;}},{key:"setTitle",value:function j(T){return;}},{key:"getContentDensity",value:function j(){if(document.body.classList.contains("sapUiSizeCozy")){return"cozy";}else if(document.body.classList.contains("sapUiSizeCompact")){return"compact";}else{return"";}}}]);return x;}(a);function y(j){return new Promise(function(e,i){j.done(e).fail(i);});}var z=function(e){q(z,e);var n=s(z);function z(){h(this,z);return n.apply(this,arguments);}m(z,[{key:"init",value:function D(){var j=this;var C=this.getContext();var o=C.scopeObject;this.oShellContainer=C.settings.shellContainer;this.instanceType="real";this.linksCache={};this.fnFindSemanticObjectsInCache=function(E){var F=E;var G=[];var N=[];var H;for(var i=0;i<F.length;i++){if(this.linksCache[F[i][0].semanticObject]){G.push(this.linksCache[F[i][0].semanticObject].links);Object.defineProperty(E[i][0],"links",{value:this.linksCache[F[i][0].semanticObject].links});}else{N.push(F[i]);}}return{oldArgs:E,newArgs:N,cachedLinks:G};};this.initPromise=new Promise(function(i,E){j.resolveFn=i;j.rejectFn=E;});var k=this.oShellContainer.getServiceAsync("CrossApplicationNavigation");var U=this.oShellContainer.getServiceAsync("URLParsing");var p=this.oShellContainer.getServiceAsync("ShellNavigation");var B=o.getService("ShellUIService");Promise.all([k,U,p,B]).then(function(i){var E=_(i,4),F=E[0],G=E[1],H=E[2],I=E[3];j.crossAppNavService=F;j.urlParsingService=G;j.shellNavigation=H;j.shellUIService=I;j.resolveFn();}).catch(this.rejectFn);}},{key:"getLinks",value:function j(o){var i=this;return new Promise(function(k,p){i.crossAppNavService.getLinks(o).fail(function(E){p(new Error(E+" sap.fe.core.services.NavigationServiceFactory.getLinks"));}).then(k);});}},{key:"getLinksWithCache",value:function B(o){var p=this;return new Promise(function(C,D){if(o.length===0){C([]);}else{var L;var E=p.fnFindSemanticObjectsInCache(o);if(E.newArgs.length===0){C(E.cachedLinks);}else{p.crossAppNavService.getLinks(E.newArgs).fail(function(i){D(new Error(i+" sap.fe.core.services.NavigationServiceFactory.getLinksWithCache"));}).then(function(L){if(L.length!==0){var F={};for(var i=0;i<L.length;i++){if(E.newArgs[i][0].links===undefined){F[E.newArgs[i][0].semanticObject]={links:L[i]};p.linksCache=Object.assign(p.linksCache,F);}}}if(E.cachedLinks.length===0){C(L);}else{var M=[];var j=0;for(var k=0;k<E.oldArgs.length;k++){if(j<L.length){if(E.oldArgs[k][0].semanticObject===E.newArgs[j][0].semanticObject){M.push(L[j]);j++;}else{M.push(E.oldArgs[k][0].links);}}else{M.push(E.oldArgs[k][0].links);}}C(M);}});}}});}},{key:"getShellContainer",value:function i(){return this.oShellContainer;}},{key:"toExternal",value:function i(N,C){this.crossAppNavService.toExternal(N,C);}},{key:"getStartupAppState",value:function j(o){var i=this;return new Promise(function(k,p){i.crossAppNavService.getStartupAppState(o).fail(function(E){p(new Error(E+" sap.fe.core.services.NavigationServiceFactory.getStartupAppState"));}).then(k);});}},{key:"backToPreviousApp",value:function i(){return this.crossAppNavService.backToPreviousApp();}},{key:"hrefForExternal",value:function j(o,C,i){return this.crossAppNavService.hrefForExternal(o,C,i);}},{key:"getAppState",value:function j(C,i){return y(this.crossAppNavService.getAppState(C,i));}},{key:"createEmptyAppState",value:function i(C){return this.crossAppNavService.createEmptyAppState(C);}},{key:"isNavigationSupported",value:function i(N,C){return y(this.crossAppNavService.isNavigationSupported(N,C));}},{key:"isInitialNavigation",value:function i(){return this.crossAppNavService.isInitialNavigation();}},{key:"expandCompactHash",value:function i(H){return this.crossAppNavService.expandCompactHash(H);}},{key:"parseShellHash",value:function p(H){return this.urlParsingService.parseShellHash(H);}},{key:"splitHash",value:function i(H){return this.urlParsingService.splitHash(H);}},{key:"constructShellHash",value:function i(N){return this.urlParsingService.constructShellHash(N);}},{key:"setDirtyFlag",value:function i(D){this.oShellContainer.setDirtyFlag(D);}},{key:"registerDirtyStateProvider",value:function i(D){this.oShellContainer.registerDirtyStateProvider(D);}},{key:"deregisterDirtyStateProvider",value:function i(D){this.oShellContainer.deregisterDirtyStateProvider(D);}},{key:"createRenderer",value:function i(){return this.oShellContainer.createRenderer();}},{key:"getUser",value:function i(){return this.oShellContainer.getUser();}},{key:"hasUShell",value:function i(){return true;}},{key:"registerNavigationFilter",value:function i(N){this.shellNavigation.registerNavigationFilter(N);}},{key:"unregisterNavigationFilter",value:function i(N){this.shellNavigation.unregisterNavigationFilter(N);}},{key:"setBackNavigation",value:function i(C){this.shellUIService.setBackNavigation(C);}},{key:"setHierarchy",value:function i(H){this.shellUIService.setHierarchy(H);}},{key:"setTitle",value:function i(T){this.shellUIService.setTitle(T);}},{key:"getContentDensity",value:function i(){return this.oShellContainer.getUser().getContentDensity();}}]);return z;}(a);var A=function(e){q(A,e);var i=s(A);function A(){h(this,A);return i.apply(this,arguments);}m(A,[{key:"createInstance",value:function k(o){o.settings.shellContainer=sap.ushell&&sap.ushell.Container;var j=o.settings.shellContainer?new z(o):new x(o);return j.initPromise.then(function(){o.scopeObject.getShellServices=function(){return j;};return j;});}}]);return A;}(S);return A;},false);
