sap.ui.define(["sap/ui/core/service/Service","sap/ui/core/service/ServiceFactory","sap/ui/model/resource/ResourceModel","sap/base/i18n/ResourceBundle"],function(S,a,R,b){"use strict";var c=S.extend("sap.fe.core.services.ResourceModelService",{initPromise:Promise.resolve(),init:function(){var C=this.getContext();var s=C.settings;this.oFactory=C.factory;var B=s.bundles.concat(s.enhanceI18n||[]).map(function(i){return typeof i.isA==="function"&&i.isA("sap.ui.model.resource.ResourceModel")?i.getResourceBundle():{bundleName:i.replace(/\//g,".")};});this.oResourceModel=new R({bundleName:B[0].bundleName,enhanceWith:B.slice(1),async:true});if(C.scopeType==="component"){var o=C.scopeObject;o.setModel(this.oResourceModel,s.modelName);}this.initPromise=this.oResourceModel.getResourceBundle().then(function(d){this.oResourceModel.__bundle=d;return this;}.bind(this));},getResourceModel:function(){return this.oResourceModel;},exit:function(){this.oFactory.removeGlobalInstance();}});return a.extend("sap.fe.core.services.ResourceModelServiceFactory",{_oInstances:{},createInstance:function(s){var k=s.settings.bundles.join(",")+(s.settings.enhanceI18n?","+s.settings.enhanceI18n.join(","):"");if(!this._oInstances[k]){this._oInstances[k]=new c(Object.assign({factory:this},s));}return this._oInstances[k].initPromise;},removeGlobalInstance:function(){this._oInstances={};}});},true);
