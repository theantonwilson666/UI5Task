/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2020 SAP SE. All rights reserved
    
 */
sap.ui.define(["sap/ui/core/util/PasteHelper","sap/m/MessageBox"],function(C,M){"use strict";var _=function(P,r,m,o){var b=m.getProperty(P),f={parseKeepsEmptyString:true},t=o.getUI5Type(r+"/"+P,f),i=!b||m.getProperty(P+"@Org.OData.Core.V1.Computed");return{property:P,ignore:i,type:t};};var a=function(t){var m=t.getRowBinding().getModel(),o=m.getMetaModel(),r=m.resolve(t.getRowBinding().getPath(),t.getRowBinding().getContext()),b=o.getMetaContext(r);return t.getControlDelegate().fetchProperties(t).then(function(P){var c=[];t.getColumns().forEach(function(d){var i=P.find(function(e){return e.name===d.getDataProperty();});if(i.propertyInfos){i.propertyInfos.forEach(function(e){var D=P.find(function(f){return f.name===e;});if((D&&D.path.indexOf("@com.sap.vocabularies.UI.v1.DataPoint")>-1)||e.indexOf("/")>-1){c.push({property:D.path,ignore:true});}else{c.push(_(D.path,r,b,o));}});}else if(i.path){c.push(_(i.path,r,b,o));}else{c.push({property:"unused",type:null,ignore:true});}});return c;});};var p={parseDataForTablePaste:function(r,t){return a(t).then(function(P){var i=r.length?r[0].length:0;var f=-1;for(var I=0;I<P.length&&f<0;I++){if(!P[I].ignore){f=I;}}if(f<0||f>i-1){return Promise.resolve([]);}else{return C.parse(r,P).then(function(o){if(o.errors){var e=o.errors.map(function(b){return b.message;});var R=sap.ui.getCore().getLibraryResourceBundle("sap.fe.core"),s,E=R.getText("C_PASTE_HELPER_SAPFE_PASTE_ERROR_CORRECTION_MESSAGE"),n=R.getText("C_PASTE_HELPER_SAPFE_PASTE_ERROR_CORRECTION_NOTE");if(e.length>1){s=R.getText("C_PASTE_HELPER_SAPFE_PASTE_ERROR_MESSAGE_PLURAL",[e.length]);}else{s=R.getText("C_PASTE_HELPER_SAPFE_PASTE_ERROR_MESSAGE_SINGULAR");}e.unshift("");e.unshift(n);e.unshift(E);M.error(s,{icon:M.Icon.ERROR,title:R.getText("C_COMMON_SAPFE_ERROR_MESSAGES_PAGE_TITLE_ERROR"),details:e.join("<br>")});return[];}else{return o.parsedData?o.parsedData:[];}});}});}};return p;});
