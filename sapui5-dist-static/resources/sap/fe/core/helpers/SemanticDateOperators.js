/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2020 SAP SE. All rights reserved
    
 */
sap.ui.define(["sap/ui/mdc/condition/FilterOperatorUtil","sap/ui/mdc/condition/Operator","sap/ui/model/FilterOperator","sap/ui/model/ValidateException"],function(F,O,M,V){"use strict";var s=["DATE","FROM","TO","DATERANGE"];var S={"DATE":{"key":"DATE","category":"DYNAMIC.DATE"},"FROM":{"key":"FROM","category":"DYNAMIC.DATE"},"TO":{"key":"TO","category":"DYNAMIC.DATE"},"DATERANGE":{"key":"DATERANGE","category":"DYNAMIC.DATERANGE"},"SPECIFICMONTH":{"key":"SPECIFICMONTH","category":"DYNAMIC.MONTH"},"TODAY":{"key":"TODAY","category":"FIXED.DATE"},"TODAYFROMTO":{"key":"TODAYFROMTO","category":"DYNAMIC.DATE.INT"},"YESTERDAY":{"key":"YESTERDAY","category":"FIXED.DATE"},"TOMORROW":{"key":"TOMORROW","category":"FIXED.DATE"},"LASTDAYS":{"key":"LASTDAYS","category":"DYNAMIC.DATE.INT"},"NEXTDAYS":{"key":"NEXTDAYS","category":"DYNAMIC.DATE.INT"},"THISWEEK":{"key":"THISWEEK","category":"FIXED.WEEK"},"LASTWEEK":{"key":"LASTWEEK","category":"FIXED.WEEK"},"LASTWEEKS":{"key":"LASTWEEKS","category":"DYNAMIC.WEEK.INT"},"NEXTWEEK":{"key":"NEXTWEEK","category":"FIXED.WEEK"},"NEXTWEEKS":{"key":"NEXTWEEKS","category":"DYNAMIC.WEEK.INT"},"THISMONTH":{"key":"THISMONTH","category":"FIXED.MONTH"},"LASTMONTH":{"key":"LASTMONTH","category":"FIXED.MONTH"},"LASTMONTHS":{"key":"LASTMONTHS","category":"DYNAMIC.MONTH.INT"},"NEXTMONTH":{"key":"NEXTMONTH","category":"FIXED.MONTH"},"NEXTMONTHS":{"key":"NEXTMONTHS","category":"DYNAMIC.MONTH.INT"},"THISQUARTER":{"key":"THISQUARTER","category":"FIXED.QUARTER"},"LASTQUARTER":{"key":"LASTQUARTER","category":"FIXED.QUARTER"},"LASTQUARTERS":{"key":"LASTQUARTERS","category":"DYNAMIC.QUARTER.INT"},"NEXTQUARTER":{"key":"NEXTQUARTER","category":"FIXED.QUARTER"},"NEXTQUARTERS":{"key":"NEXTQUARTERS","category":"DYNAMIC.QUARTER.INT"},"QUARTER1":{"key":"QUARTER1","category":"FIXED.QUARTER"},"QUARTER2":{"key":"QUARTER2","category":"FIXED.QUARTER"},"QUARTER3":{"key":"QUARTER3","category":"FIXED.QUARTER"},"QUARTER4":{"key":"QUARTER4","category":"FIXED.QUARTER"},"THISYEAR":{"key":"THISYEAR","category":"FIXED.YEAR"},"LASTYEAR":{"key":"LASTYEAR","category":"FIXED.YEAR"},"LASTYEARS":{"key":"LASTYEARS","category":"DYNAMIC.YEAR.INT"},"NEXTYEAR":{"key":"NEXTYEAR","category":"FIXED.YEAR"},"NEXTYEARS":{"key":"NEXTYEARS","category":"DYNAMIC.YEAR.INT"},"YEARTODATE":{"key":"YEARTODATE","category":"FIXED.YEAR"}};function _(r){var D=r&&r.getText("C_DATE_RANGE");return new O({name:"DATERANGE",filterOperator:M.BT,tokenParse:"^#tokenText# \\(([^!].*) \\- (.+)\\)$",tokenFormat:"#tokenText# ({0} - {1})",valueTypes:[O.ValueType.Self,O.ValueType.Self],longText:D,tokenText:D,additionalInfo:"",validate:function(v,t){if(v.length<2){throw new V("Date Range must have two values");}else{var f=new Date(v[0]);var g=new Date(v[1]);if(f.getTime()>g.getTime()){throw new V("From Date Should Be Less Than To Date");}}O.prototype.validate.apply(this,[v,t]);}});}function a(r){var D=r&&r.getText("C_DATE");return new O({name:"DATE",filterOperator:M.EQ,tokenParse:"^#tokenText# \\((.+)\\)$",tokenFormat:"#tokenText# ({0})",valueTypes:[O.ValueType.Self],longText:D,tokenText:D,additionalInfo:""});}function b(r){var f=r&&r.getText("C_FROM");return new O({name:"FROM",filterOperator:M.GE,tokenParse:"^#tokenText# \\((.+)\\)$",tokenFormat:"#tokenText# ({0})",valueTypes:[O.ValueType.Self],longText:f,tokenText:f,additionalInfo:""});}function c(r){var t=r&&r.getText("C_TO");return new O({name:"TO",filterOperator:M.LE,tokenParse:"^#tokenText# \\((.+)\\)$",tokenFormat:"#tokenText# ({0})",valueTypes:[O.ValueType.Self],longText:t,tokenText:t,additionalInfo:""});}function d(o,f){if(!f){return true;}var f=Array.isArray(f)?f:[f],r;f.some(function(g){if(!g.path){return false;}var v=o[g.path];var E=g.exclude||false;var h;if(g.contains&&v){h=g.contains.split(",");r=E;for(var j=0;j<h.length;j++){if(E&&v.indexOf(h[j])>-1){r=false;return true;}else if(!E&&v.indexOf(h[j])>-1){r=true;return true;}}}if(g.equals&&v){h=g.equals.split(",");r=E;for(var j=0;j<h.length;j++){if(E&&v===h[j]){r=false;return true;}else if(!E&&v===h[j]){r=true;return true;}}}return false;});return r;}var e={addSemanticDateOperators:function(){var r=sap.ui.getCore().getLibraryResourceBundle("sap.fe.core");F.addOperator(_(r));F.addOperator(a(r));F.addOperator(b(r));F.addOperator(c(r));},getSupportedOperations:function(){return s;},getSemanticDateOperations:function(){return Object.keys(S);},removeSemanticDateOperators:function(){},getFilterOperations:function(o){var f=[];for(var n in S){var g=S[n];if(d(g,o)){f.push(g);}}return f.map(function(g){return g.key;});},hasSemanticDateOperations:function(C){var f=this.getSemanticDateOperations();for(var n in C){var g=C[n];var o=g.find(function(h){return f.indexOf(h.operator)>-1;});if(o){return false;}}return true;}};return e;},true);
