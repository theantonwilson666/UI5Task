/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2020 SAP SE. All rights reserved
    
 */
sap.ui.define(["sap/ui/core/mvc/View","sap/ui/core/Component","sap/m/MessageBox","sap/base/Log","sap/fe/navigation/SelectionVariant","sap/ui/mdc/condition/FilterOperatorUtil","sap/ui/mdc/odata/v4/TypeUtil","sap/fe/core/helpers/StableIdHelper","sap/fe/core/library","sap/fe/core/helpers/ModelHelper","sap/fe/core/helpers/SemanticDateOperators","sap/fe/core/templating/FilterHelper","sap/ui/mdc/condition/Condition","sap/ui/mdc/enum/ConditionValidated"],function(V,C,M,L,S,F,T,a,b,c,d,e,f,g){"use strict";var P=b.ProgrammingModel;var v=["Edm.Boolean","Edm.Byte","Edm.Date","Edm.DateTime","Edm.DateTimeOffset","Edm.Decimal","Edm.Double","Edm.Float","Edm.Guid","Edm.Int16","Edm.Int32","Edm.Int64","Edm.SByte","Edm.Single","Edm.String","Edm.Time","Edm.TimeOfDay"];function h(i){var j=i.getProperty("$Type");if(!i.getProperty("$kind")){switch(j){case"com.sap.vocabularies.UI.v1.DataFieldForAction":case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":j=undefined;break;case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":j=i.getProperty("Value/$Path/$Type");break;case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":default:var l1=i.getProperty("Target/$AnnotationPath");if(l1){if(l1.indexOf("com.sap.vocabularies.Communication.v1.Contact")>-1){j=i.getProperty("Target/$AnnotationPath/fn/$Path/$Type");}else if(l1.indexOf("com.sap.vocabularies.UI.v1.DataPoint")>-1){j=i.getProperty("Value/$Path/$Type");}else{j=undefined;}}else{j=undefined;}break;}}return j;}function H(i){var j=false;if(i){i.getCurrentContexts().forEach(function(l1){if(l1&&l1.isTransient()){j=true;}});}return j;}function k(i,j,l1){var m1=i.getObject(j+"@Org.OData.Capabilities.V1.NavigationRestrictions");var n1=m1&&m1.RestrictedProperties;return(n1&&n1.find(function(o1){return o1.NavigationProperty.$NavigationPropertyPath===l1;}));}function _(i,j,l1){var m1=false;var n1=i.getObject(j+"@Org.OData.Capabilities.V1.FilterRestrictions");if(n1&&n1.NonFilterableProperties){m1=n1.NonFilterableProperties.some(function(o1){return o1.$NavigationPropertyPath===l1||o1.$PropertyPath===l1;});}return m1;}function l(i,j,l1){var m1=l1.split("/"),n1=false,o1="";m1.some(function(p1,q1,r1){if(o1.length>0){o1+="/"+p1;}else{o1=p1;}if(q1===r1.length-2){var s1=k(i,j,p1);var t1=s1&&s1.FilterRestrictions;var u1=t1&&t1.NonFilterableProperties;var v1=r1[r1.length-1];if(u1&&u1.find(function(w1){return w1.$PropertyPath===v1;})){return false;}}if(q1===r1.length-1){n1=_(i,j,o1);}else if(i.getObject(j+"/$NavigationPropertyBinding/"+p1)){n1=_(i,j,o1);o1="";j="/"+i.getObject(j+"/$NavigationPropertyBinding/"+p1);}return n1===true;});return n1;}function m(i,j,l1,m1){if(typeof l1!=="string"){throw new Error("sProperty parameter must be a string",l1);}var n1;var o1=i.createBindingContext(j+"/"+l1);if(o1.getProperty("@com.sap.vocabularies.UI.v1.Hidden")===true){return false;}if(!m1&&o1.getProperty("@com.sap.vocabularies.UI.v1.HiddenFilter")){return false;}if(l1.indexOf("/")<0){n1=!_(i,j,l1);}else{n1=!l(i,j,l1);}if(n1&&o1){var p1=h(o1);if(p1){n1=v.indexOf(p1)!==-1;}else{n1=false;}}return n1;}function n(i){return w(i).getShellServices();}function o(i,j,l1){var m1=k1.getShellServices(i);return m1.getLinks({semanticObject:j,params:l1});}function p(j){var l1=[];var m1=Object.keys(j);for(var i=0;i<m1.length;i++){var n1={"LocalProperty":{"$PropertyPath":m1[i]},"SemanticObjectProperty":j[m1[i]]};l1.push(n1);}return l1;}function q(j,l1,m1,n1){for(var i=0;i<j.length;i++){var o1=j[i];var p1=o1.intent;var q1=p1.split("-")[1].split("?")[0];if(l1&&l1.indexOf(q1)===-1){n1.push({text:o1.text,targetSemObject:p1.split("#")[1].split("-")[0],targetAction:q1.split("~")[0],targetParams:m1});}}}function r(i,j,l1,m1){if(m1&&m1.length>0){var n1=i.unavailableActions?i.unavailableActions:[];var o1=i.mapping?p(i.mapping):[];var p1={navigationContexts:j,semanticObjectMapping:o1};q(m1,n1,p1,l1);}}function u(i,l1,m1,n1,o1,p1){var q1=n(m1),r1={},s1="",t1="";var u1;var v1=[];var w1=[];if(l1){if(n1&&n1.length>0){for(var j=0;j<n1.length;j++){var x1=n1[j].$PropertyPath;if(!r1[x1]){r1[x1]={value:l1[x1]};}}}else{var y1=o1.getObject(p1+"/$Type/$Key");for(var z1 in y1){var A1=y1[z1];if(!r1[A1]){r1[A1]={value:l1[A1]};}}}}var B1=x(m1).getViewData();var C1=[];if(B1.additionalSemanticObjects){var D1=Object.keys(B1.additionalSemanticObjects);for(var z1=0;z1<D1.length;z1++){o(m1,D1[z1],r1).then(r.bind(this,B1.additionalSemanticObjects[D1[z1]],i,C1)).catch(function(F1){L.error("Error while retrieving SO Intents",F1);});}}function E1(){var F1=q1.parseShellHash(document.location.hash);s1=F1.semanticObject;t1=F1.action;return o(m1,s1,r1);}E1().then(function(F1){if(F1&&F1.length>0){var G1={};var H1=[];var I1=p1+"@";var J1=p1+"/@";var K1=o1.getObject(I1);u1=s(K1,s1);if(!u1.bHasEntitySetSO){var L1=o1.getObject(J1);u1=s(L1,s1);}w1=u1.aUnavailableActions;w1.push(t1);G1.navigationContexts=i;G1.semanticObjectMapping=u1.aMappings;q(F1,w1,G1,H1);v1=H1.concat(C1);m1.getBindingContext("internal").setProperty("relatedApps/visibility",v1.length>0);m1.getBindingContext("internal").setProperty("relatedApps/items",v1);}else{m1.getBindingContext("internal").setProperty("relatedApps/visibility",false);}}).catch(function(F1){L.error("Cannot read links",F1);});return v1;}function s(i,j){var l1={bHasEntitySetSO:false,aUnavailableActions:[],aMappings:[]};var m1,n1;var o1;for(var p1 in i){if(p1.indexOf("com.sap.vocabularies.Common.v1.SemanticObject")>-1&&i[p1]===j){l1.bHasEntitySetSO=true;m1="@com.sap.vocabularies.Common.v1.SemanticObjectMapping";n1="@com.sap.vocabularies.Common.v1.SemanticObjectUnavailableActions";if(p1.indexOf("#")>-1){o1=p1.split("#")[1];m1=m1+"#"+o1;n1=n1+"#"+o1;}l1.aMappings=l1.aMappings.concat(i[m1]);l1.aUnavailableActions=l1.aUnavailableActions.concat(i[n1]);break;}}return l1;}function U(i){var j=i.getModel().getMetaModel();var l1=i.getBindingContext();var m1=l1&&l1.getPath();var n1=j.getMetaPath(m1);var o1=n1+"/"+"@com.sap.vocabularies.Common.v1.SemanticKey";var p1=j.getObject(o1);var q1=l1.getObject();if(!q1){l1.requestObject().then(function(q1){return u(l1,q1,i,p1,j,n1);}).catch(function(r1){L.error("Cannot update the related app details",r1);});}else{return u(l1,q1,i,p1,j,n1);}}function t(i){var j=["sap.m.Button","sap.m.OverflowToolbarButton"];if(i&&j.indexOf(i.getMetadata().getName())!==-1&&i.getVisible()&&i.getEnabled()){i.firePress();}}function R(i){if(i==="true"||i===true){return true;}else{return false;}}function w(i){if(i.isA("sap.fe.core.AppComponent")){return i;}var j=C.getOwnerComponentFor(i);if(!j){return i;}else{return w(j);}}function x(i){if(i&&i.isA("sap.ui.core.ComponentContainer")){i=i.getComponentInstance();i=i&&i.getRootControl();}while(i&&!(i instanceof V)){i=i.getParent();}return i;}function y(i,j,l1,m1){var n1=j.getModel("ui").getProperty("/isEditable"),o1=sap.ui.getCore().getLibraryResourceBundle("sap.fe.templates"),p1=o1&&o1.getText("T_COMMON_UTILS_NAVIGATION_AWAY_MSG"),q1=o1&&o1.getText("T_COMMON_UTILS_NAVIGATION_AWAY_CONFIRM_BUTTON"),r1=o1&&o1.getText("T_COMMON_UTILS_NAVIGATION_AWAY_CANCEL_BUTTON");if(l1===P.Sticky&&n1){return M.warning(p1,{actions:[q1,r1],onClose:function(s1){if(s1===q1){var t1=j&&j.getModel("internal");L.info("Navigation confirmed.");if(t1){t1.setProperty("/sessionOn",false);}else{L.warning("Local UIModel couldn't be found.");}i();}else{L.info("Navigation rejected.");}}});}return i();}function z(i,j){var l1=false,m1=i.split("/");if(m1.length>1){l1=j[m1[0]]&&j[m1[0]].hasOwnProperty(m1[1])&&j[m1[0]][m1[1]]===0;}else{l1=j[i]===0;}return l1;}function A(l1,m1){var n1=[];for(var i=0;i<l1.length;i++){var o1=l1[i].entitySet,p1=l1[i].contextData,q1;delete p1["@odata.context"];delete p1["@odata.metadataEtag"];delete p1["SAP__Messages"];q1=Object.keys(p1);for(var j=0;j<q1.length;j++){var r1=q1[j],s1=m1.getObject("/"+o1+"/"+r1+"@");if(s1){if(s1["@com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive"]||s1["@com.sap.vocabularies.UI.v1.ExcludeFromNavigationContext"]||s1["@com.sap.vocabularies.Analytics.v1.Measure"]){delete p1[r1];}else if(s1["@com.sap.vocabularies.Common.v1.FieldControl"]){var t1=s1["@com.sap.vocabularies.Common.v1.FieldControl"];if(t1["$EnumMember"]&&t1["$EnumMember"].split("/")[1]==="Inapplicable"){delete p1[r1];}else if(t1["$Path"]&&k1.isFieldControlPathInapplicable(t1["$Path"],p1)){delete p1[r1];}}}}n1.push(p1);}return n1;}function G(i,j){var l1=i.getObject("/"+j+"/")||{},m1={};for(var n1 in l1){if(l1.hasOwnProperty(n1)&&!/^\$/i.test(n1)&&l1[n1].$kind&&l1[n1].$kind==="Property"){m1[n1]=l1[n1];}}return m1;}function B(i,j){var l1;if(i&&j){l1=i.getObject("/"+j+"@Org.OData.Capabilities.V1.FilterRestrictions/RequiredProperties");}return l1;}function D(i,j){var l1=i&&i.getActions();if(l1){l1.forEach(function(m1){if(m1.data("IBNData")){j.push(m1);}});}return j;}function E(i,j){var l1=this;var m1={};var n1=function(o1){if(o1){var p1=Object.keys(o1);p1.map(function(q1){if(q1.indexOf("_")!==0&&q1.indexOf("odata.context")===-1){m1[q1]={value:o1[q1]};}});}if(i.length){i.forEach(function(q1){var r1=q1.data("IBNData").semanticObject;var s1=q1.data("IBNData").action;l1.getShellServices(j).getLinks({semanticObject:r1,action:s1,params:m1}).then(function(t1){q1.setVisible(t1&&t1.length===1);}).catch(function(t1){L.error("Cannot retrieve the links from the shell service",t1);});});}};if(j&&j.getBindingContext()){j.getBindingContext().requestObject().then(function(o1){return n1(o1);}).catch(function(o1){L.error("Cannot retrieve the links from the shell service",o1);});}else{n1();}}function I(i,j,l1,m1){var n1=i;if(j){if(m1){var o1=J(j.aCustomBundles,i+"|"+m1);n1=o1?i+"|"+m1:i;}return j.getText(n1,l1);}j=sap.ui.getCore().getLibraryResourceBundle("sap.fe.core");return j.getText(n1,l1);}function J(j,l1){if(j.length){for(var i=j.length-1;i>=0;i--){var m1=j[i].hasText(l1);if(m1){return true;}J(j[i].aCustomBundles,l1);}}return false;}function K(i,j,l1,m1){l1=!l1?i.getObject(i.getPath()):l1;var n1=i.getPath().split("/@")[0];n1=i.getObject(n1).$Type;n1=N(i.getModel(),n1);if(m1){return i.getObject("/"+n1+"/"+l1+"@Org.OData.Core.V1.OperationAvailable");}if(j){return"/"+n1+"/"+l1;}else{return{sEntityName:n1,sProperty:i.getObject("/"+n1+"/"+l1+"@Org.OData.Core.V1.OperationAvailable/$Path"),sBindingParameter:i.getObject("/"+n1+"/"+l1+"/@$ui5.overload/0/$Parameter/0/$Name")};}}function N(i,j){var l1=i.getObject("/");for(var m1 in l1){if(typeof l1[m1]==="object"&&l1[m1].$Type===j){return m1;}}}function O(i,j){var l1=i["@com.sap.vocabularies.Common.v1.Text"],m1=l1&&((i&&i["@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement"])||(j&&j["@com.sap.vocabularies.UI.v1.TextArrangement"]));if(m1){if(m1.$EnumMember==="com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly"){return"Description";}else if(m1.$EnumMember==="com.sap.vocabularies.UI.v1.TextArrangementType/TextLast"){return"ValueDescription";}else if(m1.$EnumMember==="com.sap.vocabularies.UI.v1.TextArrangementType/TextSeparate"){return"Value";}return"DescriptionValue";}return l1?"DescriptionValue":"Value";}function Q(j,l1,m1){for(var n1 in l1){j.setProperty("dynamicActions/"+n1,{bEnabled:false,aApplicable:[],aNotApplicable:[]});var o1=[],p1=[];var q1=l1[n1];for(var i=0;i<m1.length;i++){var r1=m1[i];var s1=r1.getObject();if(q1===null&&!!s1["#"+n1]){j.getModel().setProperty(j.getPath()+"/dynamicActions/"+n1+"/bEnabled",true);break;}else if(r1.getObject(q1)){j.getModel().setProperty(j.getPath()+"/dynamicActions/"+n1+"/bEnabled",true);o1.push(r1);}else{p1.push(r1);}}j.getModel().setProperty(j.getPath()+"/dynamicActions/"+n1+"/aApplicable",o1);j.getModel().setProperty(j.getPath()+"/dynamicActions/"+n1+"/aNotApplicable",p1);}}function W(i){var j=T.getDataTypeClassName(i);var l1=T.getBaseType(j);return F.getOperatorsForType(l1);}function X(i,j){var l1=i.filter(function(m1){return j.indexOf(m1)>-1;});return l1.toString()||undefined;}function Y(i,j,l1,m1,n1,o1){var p1=l1.getObject(j+"@Org.OData.Capabilities.V1.FilterRestrictions");var q1=["EQ"];var r1=["EQ","GE","LE","LT","GT","BT","NOTLE","NOTLT","NOTGE","NOTGT"];var s1=["EQ","GE","LE","LT","GT","BT","NE","NOTBT","NOTLE","NOTLT","NOTGE","NOTGT"];var t1=["Contains","NotContains","StartsWith","NotStartsWith","EndsWith","NotEndsWith"];var u1=d.getSupportedOperations();var v1=n1==="true"||n1===true;var w1=[];var x1=typeof o1==="string"?JSON.parse(o1).customData:o1;if(x1&&x1.operatorConfiguration&&x1.operatorConfiguration.length>0){w1=d.getFilterOperations(x1.operatorConfiguration);}else{w1=d.getSemanticDateOperations();}var y1=W(m1);if(p1&&p1.FilterExpressionRestrictions&&p1.FilterExpressionRestrictions.some(function(C1){return C1.Property.$PropertyPath===i;})){if(v1){y1=u1.concat(y1);}var z1=p1.FilterExpressionRestrictions.filter(function(C1){return C1.Property.$PropertyPath===i;});if(z1.some(function(C1){return C1.AllowedExpressions==="SingleValue"||C1.AllowedExpressions==="MultiValue";})){return X(y1,q1);}if(z1.some(function(C1){return C1.AllowedExpressions==="SingleRange";})){var A1=X(y1,m1==="Edm.Date"&&v1?w1:r1);return A1?A1:"";}if(z1.some(function(C1){return C1.AllowedExpressions==="MultiRange";})){return X(y1,s1);}if(z1.some(function(C1){return C1.AllowedExpressions==="SearchExpression";})){return X(y1,t1);}if(z1.some(function(C1){return C1.AllowedExpressions==="MultiRangeOrSearchExpression";})){return X(y1,t1.concat(s1));}return undefined;}else if(m1==="Edm.Date"){w1=d.getSemanticDateOperations();var B1=y1.filter(function(C1){return w1.indexOf(C1)<0;});return B1.toString();}}function Z(i,j,l1,m1){var n1=i.getSelectOptionsPropertyNames(),o1=k1.getEntitySetProperties(l1,m1),p1=i.getParameterNames();p1.forEach(function(q1){if(q1.substring(0,2)==="P_"){var r1=q1;q1=q1.slice(2,q1.length);if(n1.indexOf(q1)==-1){if(q1 in o1){var s1=i.getParameter(r1),t1=e.getTypeCompliantValue(s1,o1[q1].$Type),u1;if(t1!==undefined||t1!==null){u1={isEmpty:null,operator:"EQ",values:[t1]};j[q1]=j.hasOwnProperty(q1)?j[q1].concat([u1]):[u1];}}}}});n1.forEach(function(q1){var r1=q1;if(q1.substring(0,2)==="P_"){q1=q1.slice(2,q1.length);if(n1.indexOf(q1)>-1){q1="";}}if(q1 in o1){var s1=[],t1,u1;if(k1.isPropertyFilterable(l1,"/"+m1,q1,true)){t1=i.getSelectOption(r1==q1?q1:r1);u1=k1.getOperatorsForProperty(q1,"/"+m1,l1);s1=t1.reduce(function(v1,w1){var x1=e.getConditions(w1,o1[q1]);if(x1){if(!u1||u1.indexOf(x1.operator)>-1){v1.push(x1);}}return v1;},s1);if(s1.length){j[q1]=j.hasOwnProperty(q1)?j[q1].concat(s1):s1;}}}});return j;}function $(i,j,l1){var m1=k1.getAppComponent(l1);var n1=m1.getNavigationService();return n1.mixAttributesAndSelectionVariant(j,i.toJSONString());}function a1(i,j){var l1,m1="",n1=null;var o1=function(t1,u1,v1){var w1={option:"",sign:"I",low:u1,high:v1};switch(t1){case"Contains":w1.option="CP";break;case"StartsWith":w1.option="CP";w1.low+="*";break;case"EndsWith":w1.option="CP";w1.low="*"+w1.low;break;case"BT":case"LE":case"LT":case"GT":case"NE":case"EQ":w1.option=t1;break;case"EEQ":w1.option="EQ";break;case"Empty":w1.option="EQ";w1.low="";break;case"NotContains":w1.option="CP";w1.sign="E";break;case"NOTBT":w1.option="BT";w1.sign="E";break;case"NotStartsWith":w1.option="CP";w1.low+="*";w1.sign="E";break;case"NotEndsWith":w1.option="CP";w1.low="*"+w1.low;w1.sign="E";break;case"NotEmpty":w1.option="NE";w1.low="";break;case"NOTLE":w1.option="LE";w1.sign="E";break;case"NOTGE":w1.option="GE";w1.sign="E";break;case"NOTLT":w1.option="LT";w1.sign="E";break;case"NOTGT":w1.option="GT";w1.sign="E";break;default:L.warning(t1+" is not supported. "+l1+" could not be added to the navigation context");}return w1;};j=j.filter||j;for(var l1 in j){if(!i.getSelectOption(l1)){if(l1==="$editState"){continue;}var p1=j[l1];for(var q1 in p1){var r1=p1[q1];m1=(r1.values[0]&&r1.values[0].toString())||"";n1=(r1.values[1]&&r1.values[1].toString())||null;var s1=o1(r1.operator,m1,n1);if(s1.option){i.addSelectOption(l1,s1.sign,s1.option,s1.low,s1.high);}}}}return i;}function b1(i){var j=c.isStickySessionSupported(i.getModel().getMetaModel());var l1=i.getModel("ui").getProperty("/isEditable");return j&&l1;}function c1(j,l1,m1){if(l1&&j&&j.length){for(var i=0;i<j.length;i++){var n1=l1.getSelectOption("DisplayCurrency"),o1=m1&&m1.getSelectOption("DisplayCurrency");if(j[i].$PropertyPath==="DisplayCurrency"&&(!n1||!n1.length)&&o1&&o1.length){var p1=o1[0];var q1=p1["Sign"];var r1=p1["Option"];var s1=p1["Low"];var t1=p1["High"];l1.addSelectOption("DisplayCurrency",q1,r1,s1,t1);}}}}function d1(i,j){var l1=i.getObject(j+"/").$Key;var m1=[];var n1=i.getObject(j+"/");for(var o1 in n1){if(n1[o1].$kind&&n1[o1].$kind==="Property"){var p1=i.getObject(j+"/"+o1+"@")||{},q1=l1.indexOf(o1)>-1,r1=q1||p1["@Org.OData.Core.V1.Immutable"],s1=!p1["@Org.OData.Core.V1.Computed"],t1=!p1["@com.sap.vocabularies.UI.v1.Hidden"];if(r1&&s1&&t1){m1.push(o1);}}}return m1;}function e1(j,l1,m1,n1){return new Promise(function(o1,p1){var q1=j.getComponentData(),r1=(q1&&q1.startupParameters)||{},s1=j.getShellServices();if(!s1.hasUShell()){l1.map(function(i){var t1=n1?"/"+i.$Name:i.getPath().slice(i.getPath().lastIndexOf("/")+1);var u1=n1?t1.slice(1):t1;if(r1[u1]){m1.setProperty(t1,r1[u1][0]);}});return o1(true);}return s1.getStartupAppState(j).then(function(t1){var u1=t1.getData()||{},v1=(u1.selectionVariant&&u1.selectionVariant.SelectOptions)||[];l1.map(function(w1){var x1=n1?"/"+w1.$Name:w1.getPath().slice(w1.getPath().lastIndexOf("/")+1);var y1=n1?x1.slice(1):x1;if(r1[y1]){m1.setProperty(x1,r1[y1][0]);}else if(v1.length>0){for(var i in v1){var z1=v1[i];if(z1.PropertyName===y1){var A1=z1.Ranges.length?z1.Ranges[0]:undefined;if(A1&&A1.Sign==="I"&&A1.Option==="EQ"){m1.setProperty(x1,A1.Low);}}}}});return o1(true);});});}function f1(j){var l1=[];if(j.parameters){var m1=Object.keys(j.parameters)||[];if(m1.length>0){m1.forEach(function(n1){var o1=j.parameters[n1];if(o1.value&&o1.value.value&&o1.value.format==="binding"){var p1={"LocalProperty":{"$PropertyPath":o1.value.value},"SemanticObjectProperty":n1};if(l1.length>0){for(var i=0;i<l1.length;i++){if(l1[i]["LocalProperty"]["$PropertyPath"]!==p1["LocalProperty"]["$PropertyPath"]){l1.push(p1);}}}else{l1.push(p1);}}});}}return l1;}function g1(i,j){var l1=[];var m1={};var n1;var o1=i.controlConfiguration;for(var p1 in o1){if(p1.indexOf("@com.sap.vocabularies.UI.v1.DataPoint")>-1||p1.indexOf("@com.sap.vocabularies.UI.v1.Chart")>-1){if(o1[p1].navigation&&o1[p1].navigation.targetOutbound&&o1[p1].navigation.targetOutbound.outbound){var q1=o1[p1].navigation.targetOutbound.outbound;var r1=j[q1];if(r1.semanticObject&&r1.action){if(p1.indexOf("Chart")>-1){n1=a.generate(["fe","MicroChartLink",p1]);}else{n1=a.generate(["fe","HeaderDPLink",p1]);}var l1=k1.getSemanticObjectMapping(r1);m1[n1]={semanticObject:r1.semanticObject,action:r1.action,semanticObjectMapping:l1};}else{L.error("Cross navigation outbound is configured without semantic object and action for "+q1);}}}}return m1;}function h1(j,l1){var m1=typeof l1==="string"?JSON.parse(l1):l1;for(var i=0;i<m1.length;i++){var n1=(m1[i]["LocalProperty"]&&m1[i]["LocalProperty"]["$PropertyPath"])||(m1[i]["@com.sap.vocabularies.Common.v1.LocalProperty"]&&m1[i]["@com.sap.vocabularies.Common.v1.LocalProperty"]["$Path"]);var o1=m1[i]["SemanticObjectProperty"]||m1[i]["@com.sap.vocabularies.Common.v1.SemanticObjectProperty"];if(j.getSelectOption(n1)){var p1=j.getSelectOption(n1);j.removeSelectOption(n1);j.massAddSelectOption(o1,p1);}}return j;}function i1(i,j){var l1=i.getObject(j+"@com.sap.vocabularies.Common.v1.SemanticObject");var m1=i.getObject(j+"@com.sap.vocabularies.Common.v1.SemanticObjectUnavailableActions");var n1;var o1;if(!(l1===undefined)){n1=[{semanticObject:l1}];o1={semanticObject:l1};}return{semanticObjectForGetLinks:n1,semanticObject:o1,unavailableActions:m1};}function j1(j,l1){var m1=function(E1,F1){return n1(E1,F1,[]);};var n1=function(E1,F1,G1){if(!E1){return G1;}if(E1 instanceof Array){for(var i in E1){G1=G1.concat(n1(E1[i],F1,[]));}return G1;}if(E1[F1]){G1.push(E1[F1]);}if(typeof E1=="object"&&E1!==null){var H1=Object.keys(E1);if(H1.length>0){for(i=0;i<H1.length;i++){G1=G1.concat(n1(E1[H1[i]],F1,[]));}}}return G1;};var o1=function(E1){return E1.filter(function(F1,G1){return E1.indexOf(F1)===G1;});};var p1=function(u1,C1){var E1=C1.substring(0,C1.lastIndexOf("/"));if(E1.lastIndexOf("/")===0){return C1;}else{var F1=C1.substring(C1.lastIndexOf("/")+1),G1=u1.getContext(E1),H1=c.getTargetEntitySet(G1);return H1+"/"+F1;}};var q1=j.getView();var r1=q1.getBindingContext("internal");if(r1){var s1=j.getOwnerComponent();var t1=sap.ui.core.Component.getOwnerComponentFor(s1);var u1=t1.getMetaModel();var v1=s1.getModel(l1).getData();if(JSON.stringify(v1)==="{}"){v1=s1.getModel(l1)._getObject("/",undefined);}var w1=m1(v1,"semanticObjectPath");w1=o1(w1);var x1=k1.getShellServices(t1);var y1=x1.hrefForExternal();var z1=[];var A1=[];var B1=[];var C1;var D1;if(y1&&y1.indexOf("?")!==-1){y1=y1.split("?")[0];}for(var i=0;i<w1.length;i++){C1=w1[i];D1=k1.getSemanticObjectsFromPath(u1,C1);if(D1.semanticObject){z1.push(D1.semanticObjectForGetLinks);A1.push({semanticObject:D1.semanticObject.semanticObject,unavailableActions:D1.unavailableActions,path:p1(u1,C1)});}}x1.getLinksWithCache(z1).then(function(E1){if(E1&&E1.length>0&&E1[0]!==undefined){var F1={};var G1={};var H1;var I1=function(J1){if(!(y1===J1.intent)){if(A1[i].unavailableActions&&A1[i].unavailableActions.find(function(K1){if(K1===J1.intent.split("-")[1]){return true;}})){return false;}else{B1[i].push(J1);}}};for(var i=0;i<E1.length;i++){B1.push([]);E1[i][0].forEach(I1);G1={semanticObject:A1[i].semanticObject,HasTargets:B1[i].length>0?true:false,HasTargetsNotFiltered:E1[i][0].length>0?true:false};if(F1[A1[i].semanticObject]===undefined){F1[A1[i].semanticObject]={};}H1=A1[i].path.replace(/\//g,"_");if(F1[A1[i].semanticObject][H1]===undefined){F1[A1[i].semanticObject][H1]={};}F1[A1[i].semanticObject][H1]=Object.assign(F1[A1[i].semanticObject][H1],G1);}r1.setProperty("semanticsTargets",F1);}}).catch(function(E1){L.error("fnGetSemanticTargets: Cannot read links",E1);});}}var k1={isPropertyFilterable:m,isFieldControlPathInapplicable:z,removeSensitiveData:A,fireButtonPress:t,getTargetView:x,hasTransientContext:H,updateRelatedAppsDetails:U,resolveStringtoBoolean:R,getAppComponent:w,processDataLossConfirmation:y,getMandatoryFilterFields:B,getEntitySetProperties:G,updateDataFieldForIBNButtonsVisibility:E,getTranslatedText:I,getEntitySetName:N,getActionPath:K,computeDisplayMode:O,setActionEnablement:Q,isStickyEditMode:b1,getOperatorsForProperty:Y,addSelectionVariantToConditions:Z,addExternalStateFiltersToSelectionVariant:a1,addPageContextToSelectionVariant:$,addDefaultDisplayCurrency:c1,getNonComputedVisibleFields:d1,setUserDefaults:e1,getShellServices:n,getIBNActions:D,getHeaderFacetItemConfigForExternalNavigation:g1,getSemanticObjectMapping:f1,setSemanticObjectMappings:h1,getSemanticTargetsFromPageModel:j1,getSemanticObjectsFromPath:i1,getPropertyDataType:h,getNavigationRestrictions:k};return k1;});
