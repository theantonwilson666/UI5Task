sap.ui.define(["sap/fe/core/converters/ManifestSettings","sap/fe/core/converters/MetaModelConverter","sap/fe/core/templating/DataModelPathHelper"],function(M,a,D){"use strict";var _={};var g=D.getTargetObjectPath;var c=a.convertTypes;var b=M.createManifestWrapper;var d=function(A){return typeof A==="object";};var e=function(i){var j={startingEntitySet:i,targetEntityType:i.entityType,targetEntitySet:i,navigationProperties:[],contextLocation:undefined,targetObject:i};j.contextLocation=j;return j;};function f(C,m,t,s,j,k,l){var o=b(m,k);var B=g(l);var n=function(i){var R=C.entityTypes.find(function(S){if(i.startsWith(S.fullyQualifiedName)){var T=i.replace(S.fullyQualifiedName,"");return T.startsWith("/")||T.startsWith("@");}return false;});return R;};var p=function(i){if(i){var R=i.fullyQualifiedName;var S=n(R);if(!S){throw new Error("Cannot find Entity Type for "+i.fullyQualifiedName);}return S;}else{return l.targetEntityType;}};var q=function(i){if(d(i)){return o.getControlConfiguration(G(i.fullyQualifiedName,l.targetEntityType));}return o.getControlConfiguration(i);};var r=function(i){if(!i){return i;}if(i[0]==="/"){return i;}return B+"/"+i;};var u=function(){return l.targetEntitySet;};var v=function(){return l;};var w=function(i){if(i===undefined){return l.targetEntitySet;}return C.entitySets.find(function(R){return R.name===i;});};var x=function(i){return C.entitySets.find(function(R){return R.entityType===i;});};var y=function(){return C.entityContainer;};var z=function(){return l.targetEntityType;};var A=function(i){if(i){var R;var S=n(i);return S===null||S===void 0?void 0:(R=S.entityProperties)===null||R===void 0?void 0:R.find(function(T){return T.name===i.split("/").pop();});}return undefined;};var E=function(R){if(R.indexOf("@")===-1){R="@"+R;}var S=l.targetEntityType.resolvePath(R,true);var T=l.targetEntitySet;var U=l.targetEntityType;var V=l.navigationProperties.concat();var i=1;var W;var X=[];while(i<S.visitedObjects.length){W=S.visitedObjects[i++];if(W._type==="NavigationProperty"){X.push(W.name);V.push(W);U=W.targetType;if(T&&T.navigationPropertyBinding.hasOwnProperty(X.join("/"))){T=T.navigationPropertyBinding[W.name];X=[];}}if(W._type==="EntitySet"){T=W;U=T.entityType;}}var Y={startingEntitySet:l.startingEntitySet,targetEntitySet:T,targetEntityType:U,targetObject:V[V.length-1],navigationProperties:V,contextLocation:l.contextLocation};return{annotation:S.target,converterContext:f(C,m,t,s,j,k,Y)};};var F=function(){return t;};var G=function(i,R){return i.replace(R.fullyQualifiedName,"");};var H=function(i){if(!i){return i;}var R=l.targetEntityType.fullyQualifiedName;if(l.targetEntitySet||(B.startsWith("/")&&B.match(/\//g)||[]).length>1){var S=i.replace(R,"/");if(S.length>2&&S[0]==="/"&&S[1]==="/"){S=S.substr(1);}return B+S;}else{return"/"+i;}};var I=function(){return o;};var J=function(){return s;};var K=function(){return j;};var L=function(i){var R=e(i);return f(C,m,t,s,j,k,R);};var N=function(i,R,S){var T=[];if(i){T=Object.keys(i).filter(function(U){return i[U].term===S;}).reduce(function(U,V){U.push(i[V]);return U;},[]);}return T;};var O=function(i,R){var S=arguments.length>2&&arguments[2]!==undefined?arguments[2]:z();var T=(S===null||S===void 0?void 0:S.annotations[i])||{};return N(T,i,R);};var P=function(i,R){var S;var T=((S=u())===null||S===void 0?void 0:S.annotations[i])||{};return N(T,i,R);};var Q=function(i,R){var S,T;var U=((S=y())===null||S===void 0?void 0:(T=S.annotations)===null||T===void 0?void 0:T[i])||{};return N(U,i,R);};return{getAnnotationEntityType:p,getManifestControlConfiguration:q,getAbsoluteAnnotationPath:r,getEntitySet:u,getDataModelObjectPath:v,findEntitySet:w,getEntitySetForEntityType:x,getEntityContainer:y,getEntityType:z,getEntityTypeAnnotation:E,getTemplateType:F,getRelativeAnnotationPath:G,getEntitySetBasedAnnotationPath:H,getManifestWrapper:I,getShellServices:J,getDiagnostics:K,getConverterContextFor:L,getEntityPropertyFromFullyQualifiedName:A,getAnnotationsByTerm:O,getEntitySetAnnotationsByTerm:P,getEntityContainerAnnotationsByTerm:Q};}_.createConverterContext=f;function h(E,m,t,s,i,j,k){var l=arguments.length>7&&arguments[7]!==undefined?arguments[7]:{};var o=m.isA("sap.ui.model.odata.v4.ODataMetaModel")?m:m.getModel();var C=c(o);var n=C.entitySets.find(function(p){return p.name===E;});if(!k){k={startingEntitySet:n,navigationProperties:[],targetEntitySet:n,targetEntityType:n.entityType,targetObject:n};}return f(C,l,t,s,i,j,k);}_.createConverterContextForMacro=h;return _;},false);
