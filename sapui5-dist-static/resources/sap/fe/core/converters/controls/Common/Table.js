sap.ui.define(["../../ManifestSettings","../../templates/BaseConverter","../../helpers/ID","sap/fe/core/converters/controls/Common/Action","sap/fe/core/converters/helpers/ConfigurableObject","sap/fe/core/converters/annotations/DataField","sap/fe/core/helpers/BindingExpression","sap/fe/core/converters/helpers/BindingHelper","sap/fe/core/converters/helpers/Key","sap/fe/core/formatters/TableFormatter","sap/fe/core/formatters/TableFormatterTypes","sap/fe/core/templating/DataModelPathHelper","sap/fe/core/helpers/StableIdHelper","sap/fe/core/converters/helpers/IssueManager","sap/fe/core/templating/PropertyHelper","../../helpers/Aggregation"],function(M,B,I,A,C,D,a,b,K,t,T,c,S,d,P,e){"use strict";var _={};var f=e.AggregationHelper;var g=P.getAssociatedCurrencyProperty;var h=P.getAssociatedUnitProperty;var j=P.isProperty;var k=d.IssueType;var l=d.IssueSeverity;var m=d.IssueCategory;var r=S.replaceSpecialChars;var p=c.isPathUpdatable;var q=c.isPathInsertable;var s=c.isPathDeletable;var u=c.getTargetObjectPath;var v=T.MessageType;var w=K.KeyHelper;var U=b.UI;var x=b.Draft;var y=a.resolveBindingString;var z=a.or;var E=a.not;var F=a.isConstant;var G=a.ifElse;var H=a.formatResult;var J=a.equal;var L=a.constant;var N=a.compileBinding;var O=a.bindingExpression;var Q=a.annotationExpression;var R=a.and;var V=D.collectRelatedProperties;var W=D.getSemanticObjectPath;var X=D.isDataFieldTypes;var Y=D.isDataFieldForActionAbstract;var Z=D.isDataFieldAlwaysHidden;var $=D.collectRelatedPropertiesRecursively;var a1=C.Placement;var b1=C.insertCustomElements;var c1=A.removeDuplicateActions;var d1=A.isActionNavigable;var e1=A.getActionsFromManifest;var f1=I.TableID;var g1=B.TemplateType;var h1=M.VisualizationType;var i1=M.VariantManagementType;var j1=M.SelectionMode;var k1=M.HorizontalAlign;var l1=M.CreationMode;var m1=M.AvailabilityType;var n1=M.ActionType;function o1(n,i){return r1(n)||q1(n,i)||x1(n,i)||p1();}function p1(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function q1(n,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(n)))return;var o=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=n[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){o.push(_s.value);if(i&&o.length===i)break;}}catch(v2){_d=true;_e=v2;}finally{try{if(!_n&&_i["return"]!=null)_i["return"]();}finally{if(_d)throw _e;}}return o;}function r1(i){if(Array.isArray(i))return i;}function s1(o,i){var n=Object.keys(o);if(Object.getOwnPropertySymbols){var v2=Object.getOwnPropertySymbols(o);if(i)v2=v2.filter(function(w2){return Object.getOwnPropertyDescriptor(o,w2).enumerable;});n.push.apply(n,v2);}return n;}function t1(n){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};if(i%2){s1(Object(o),true).forEach(function(v2){u1(n,v2,o[v2]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(n,Object.getOwnPropertyDescriptors(o));}else{s1(Object(o)).forEach(function(v2){Object.defineProperty(n,v2,Object.getOwnPropertyDescriptor(o,v2));});}}return n;}function u1(o,i,n){if(i in o){Object.defineProperty(o,i,{value:n,enumerable:true,configurable:true,writable:true});}else{o[i]=n;}return o;}function v1(i){return z1(i)||y1(i)||x1(i)||w1();}function w1(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function x1(o,i){if(!o)return;if(typeof o==="string")return A1(o,i);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A1(o,i);}function y1(i){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(i))return Array.from(i);}function z1(i){if(Array.isArray(i))return A1(i);}function A1(n,o){if(o==null||o>n.length)o=n.length;for(var i=0,v2=new Array(o);i<o;i++){v2[i]=n[i];}return v2;}var B1;(function(B1){B1["Default"]="Default";B1["Annotation"]="Annotation";})(B1||(B1={}));function C1(i,n,o,v2){var w2=Q1(i,n,o);var x2=w2.tableActions;var y2=w2.hiddenTableActions;return b1(x2,e1(o.getManifestControlConfiguration(n).actions,o,x2,v2,true,y2),{isNavigable:"overwrite",enableOnSelect:"overwrite",enableAutoScroll:"overwrite",enabled:"overwrite"});}_.getTableActions=C1;function D1(i,n,o,v2){var w2=d2(i,n,o);var x2=g2(o.getManifestControlConfiguration(n).columns,w2,o,o.getAnnotationEntityType(i),v2);return b1(w2,x2,{width:"overwrite",isNavigable:"overwrite",availability:"overwrite",settings:"overwrite",horizontalAlign:"overwrite",formatOptions:"overwrite"});}_.getTableColumns=D1;var E1=function(i,n,o){var v2=new f(i,o);function w2(A2){return n.find(function(B2){var C2=B2;return C2.propertyInfos===undefined&&C2.relativePath===A2;});}if(!v2.isAnalyticsSupported()){return undefined;}var x2=new Set();n.forEach(function(A2){var B2=A2;if(B2.unit){x2.add(B2.unit);}});var y2=v2.getCustomAggregateDefinitions();var z2={};n.forEach(function(A2){var B2=A2;if(B2.propertyInfos===undefined&&B2.relativePath){var C2=y2[B2.relativePath];if(C2&&!x2.has(B2.name)){z2[B2.name]={defaultAggregate:{},relativePath:B2.relativePath};var D2=[];C2.forEach(function(E2){var A2=w2(E2);if(A2){D2.push(A2.name);}});if(D2.length){z2[B2.name].defaultAggregate.contextDefiningProperties=D2;}}}});return z2;};_.getAggregateDefinitionsFromEntityType=E1;function F1(i,n,o,v2){if(i.control.type==="AnalyticalTable"){var w2=E1(n,i.columns,o);if(w2){i.enableAnalytics=true;i.aggregates=w2;i.annotation.groupConditions=o2(v2,i.columns);i.annotation.aggregateConditions=p2(v2,i.columns);}i.control.type="GridTable";}}function G1(i,n){n.forEach(function(o){var v2=o;if(v2.propertyInfos===undefined&&v2.relativePath){var w2=i.entityProperties.find(function(B2){return B2.name===v2.relativePath;});if(w2){var x2,y2;var z2=((x2=g(w2))===null||x2===void 0?void 0:x2.name)||((y2=h(w2))===null||y2===void 0?void 0:y2.name);if(z2){var A2=n.find(function(B2){var C2=B2;return C2.propertyInfos===undefined&&C2.relativePath===z2;});v2.unit=A2===null||A2===void 0?void 0:A2.name;}}}});}function H1(i,n,o,v2,w2){var x2=u2(i,n,o,w2);var y2=s2(n),z2=y2.navigationPropertyPath;var A2=o.getDataModelObjectPath();var B2=A2.targetEntitySet?A2.targetEntitySet.name:A2.startingEntitySet.name,C2=z2.length===0;var D2=C2?B2:z2;var E2=o.getManifestWrapper().getNavigationConfiguration(D2);var F2=D1(i,n,o,E2);var G2={type:h1.Table,annotation:q2(i,n,o,x2,F2,v2),control:x2,actions:c1(C1(i,n,o,E2)),columns:F2};G1(o.getAnnotationEntityType(i),F2);F1(G2,o.getAnnotationEntityType(i),o,v2);return G2;}_.createTableVisualization=H1;function I1(i){var n=u2(undefined,"",i,false);var o=V1({},i.getEntityType(),[],[],i);var v2={type:h1.Table,annotation:q2(undefined,"",i,n,o),control:n,actions:[],columns:o};G1(i.getEntityType(),o);F1(v2,i.getEntityType(),i);return v2;}_.createDefaultTableVisualization=I1;function J1(i,n,o){var v2=[];i.forEach(function(w2){var x2,y2;if(w2.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"&&(w2===null||w2===void 0?void 0:(x2=w2.ActionTarget)===null||x2===void 0?void 0:x2.isBound)||w2.$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"&&w2.RequiresContext&&(w2===null||w2===void 0?void 0:(y2=w2.Inline)===null||y2===void 0?void 0:y2.valueOf())!==true){var z2,A2,B2;if(typeof((z2=w2.annotations)===null||z2===void 0?void 0:(A2=z2.UI)===null||A2===void 0?void 0:(B2=A2.Hidden)===null||B2===void 0?void 0:B2.valueOf())==="object"){v2.push(J(K1(w2,n,o),false));}}});return v2;}function K1(i,n,o){var v2,w2,x2;var y2;if(((v2=i)===null||v2===void 0?void 0:v2.$Type)==="com.sap.vocabularies.UI.v1.DataFieldForAction"||((w2=i)===null||w2===void 0?void 0:w2.$Type)==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){var z2,A2,B2;y2=(z2=i)===null||z2===void 0?void 0:(A2=z2.annotations)===null||A2===void 0?void 0:(B2=A2.UI)===null||B2===void 0?void 0:B2.Hidden;}else{var C2;y2=(C2=i)===null||C2===void 0?void 0:C2.visible;}var D2;if((x2=y2)===null||x2===void 0?void 0:x2.path){D2=y2.path;}else{D2=y2;}if(D2){var E2;if((E2=i)===null||E2===void 0?void 0:E2.visible){D2=D2.substring(1,D2.length-1);}if(D2.indexOf("/")>0){var F2;var G2=D2.split("/");var H2=G2[0];if((n===null||n===void 0?void 0:(F2=n.targetObject)===null||F2===void 0?void 0:F2._type)==="NavigationProperty"&&n.targetObject.partner===H2){return O(G2.slice(1).join("/"));}else{return L(true);}}else if(o){return O(D2);}else{return L(true);}}return L(true);}function L1(i){return i.some(function(n){var o,v2,w2,x2,y2,z2,A2;if((n.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"||n.$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation")&&(n===null||n===void 0?void 0:(o=n.Inline)===null||o===void 0?void 0:o.valueOf())!==true&&(((v2=n.annotations)===null||v2===void 0?void 0:(w2=v2.UI)===null||w2===void 0?void 0:(x2=w2.Hidden)===null||x2===void 0?void 0:x2.valueOf())===false||((y2=n.annotations)===null||y2===void 0?void 0:(z2=y2.UI)===null||z2===void 0?void 0:(A2=z2.Hidden)===null||A2===void 0?void 0:A2.valueOf())===undefined)){if(n.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"){var B2;return n===null||n===void 0?void 0:(B2=n.ActionTarget)===null||B2===void 0?void 0:B2.isBound;}else if(n.$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){return n.RequiresContext;}}return false;});}function M1(i){return Object.keys(i).some(function(n){var o;var v2=i[n];if(v2.requiresSelection&&((o=v2.visible)===null||o===void 0?void 0:o.toString())==="true"){return true;}return false;});}function N1(i){var n=[];if(i){Object.keys(i).forEach(function(o){var v2=i[o];if(v2.requiresSelection===true&&v2.visible!==undefined){if(typeof v2.visible==="string"){var w2;n.push(y(v2===null||v2===void 0?void 0:(w2=v2.visible)===null||w2===void 0?void 0:w2.valueOf()));}}});}return n;}function O1(i){var n=s(i.getDataModelObjectPath());var o=p(i.getDataModelObjectPath());return{isDeletable:!(F(n)&&n.value===false),isUpdatable:!(F(o)&&o.value===false)};}_.getCapabilityRestriction=O1;function P1(i,n,o,v2,w2){var x2;if(!i){return j1.None;}var y2=o.getManifestControlConfiguration(n);var z2=(x2=y2.tableSettings)===null||x2===void 0?void 0:x2.selectionMode;var A2=[],B2=[];var C2=e1(o.getManifestControlConfiguration(n).actions,o,[],undefined,false);var D2,E2;if(o.getTemplateType()===g1.ObjectPage){D2=s(o.getDataModelObjectPath(),undefined);E2=D2?N(D2,true):D2;}if(z2&&z2===j1.None){if(!v2){if(w2.isDeletable||E2!=="false"){z2=j1.Multi;return N(G(J(O("/editMode","ui"),"Editable"),L(z2),L("None")));}else{z2=j1.None;}}else if(v2){if(w2.isDeletable){z2=j1.Multi;return z2;}else{z2=j1.None;}}}else if(!z2||z2===j1.Auto){z2=j1.Multi;}if(L1(i)||M1(C2)){return z2;}A2=J1(i,o.getDataModelObjectPath(),v2);B2=N1(C2);if(A2.length===0&&B2.length===0){if(!v2){if(w2.isDeletable||E2!=="false"){return N(G(J(O("/editMode","ui"),"Editable"),L(z2),L(j1.None)));}else{return j1.None;}}else if(w2.isDeletable){return z2;}else{return j1.None;}}else if(!v2){if(w2.isDeletable||E2!=="false"){return N(G(J(O("/editMode","ui"),"Editable"),L(z2),G(z.apply(void 0,v1(A2.concat(B2))),L(z2),L(j1.None))));}else{return N(G(z.apply(void 0,v1(A2.concat(B2))),L(z2),L(j1.None)));}}else if(w2.isDeletable){return j1.Multi;}else{return N(G(z.apply(void 0,v1(A2.concat(B2))),L(z2),L(j1.None)));}}_.getSelectionMode=P1;function Q1(i,n,o){var v2=[];var w2=[];if(i){i.forEach(function(x2){var y2,z2,A2,B2,C2,D2,E2,F2,G2,H2;var I2;if(Y(x2)&&!(((y2=x2.annotations)===null||y2===void 0?void 0:(z2=y2.UI)===null||z2===void 0?void 0:(A2=z2.Hidden)===null||A2===void 0?void 0:A2.valueOf())===true)&&!x2.Inline&&!x2.Determining){var J2=w.generateKeyFromDataField(x2);switch(x2.$Type){case"com.sap.vocabularies.UI.v1.DataFieldForAction":I2={type:n1.DataFieldForAction,annotationPath:o.getEntitySetBasedAnnotationPath(x2.fullyQualifiedName),key:J2,visible:N(E(J(Q((B2=x2.annotations)===null||B2===void 0?void 0:(C2=B2.UI)===null||C2===void 0?void 0:C2.Hidden),true))),isNavigable:true};break;case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":I2={type:n1.DataFieldForIntentBasedNavigation,annotationPath:o.getEntitySetBasedAnnotationPath(x2.fullyQualifiedName),key:J2,visible:N(E(J(Q((D2=x2.annotations)===null||D2===void 0?void 0:(E2=D2.UI)===null||E2===void 0?void 0:E2.Hidden),true)))};break;default:break;}}else if(((F2=x2.annotations)===null||F2===void 0?void 0:(G2=F2.UI)===null||G2===void 0?void 0:(H2=G2.Hidden)===null||H2===void 0?void 0:H2.valueOf())===true){w2.push({type:n1.Default,key:w.generateKeyFromDataField(x2)});}if(I2){v2.push(I2);}});}return{tableActions:v2,hiddenTableActions:w2};}function R1(i){var n;switch(i){case"UI.CriticalityType/Negative":n=v.Error;break;case"UI.CriticalityType/Critical":n=v.Warning;break;case"UI.CriticalityType/Positive":n=v.Success;break;case"UI.CriticalityType/Information":n=v.Information;break;case"UI.CriticalityType/Neutral":default:n=v.None;}return n;}function S1(i,n){var o=v.None;if(i){if(typeof i==="object"){o=Q(i);}else{o=R1(i);}}return G(n&&x.IsNewObject,v.Information,H([o],t.rowHighlighting));}function T1(i,n,o,v2){var w2;var x2=(v2===null||v2===void 0?void 0:v2.create)||(v2===null||v2===void 0?void 0:v2.detail);if((x2===null||x2===void 0?void 0:x2.outbound)&&x2.outboundDetail&&(v2===null||v2===void 0?void 0:v2.create)){return{mode:"External",outbound:x2.outbound,outboundDetail:x2.outboundDetail,navigationSettings:v2};}var y2;if(i){var z2,A2,B2,C2,D2;var E2=o.getAnnotationEntityType(i);var F2=(z2=o.getEntitySetForEntityType(E2))===null||z2===void 0?void 0:z2.annotations;y2=(F2===null||F2===void 0?void 0:(A2=F2.Common)===null||A2===void 0?void 0:(B2=A2.DraftRoot)===null||B2===void 0?void 0:B2.NewAction)||(F2===null||F2===void 0?void 0:(C2=F2.Session)===null||C2===void 0?void 0:(D2=C2.StickySessionSupported)===null||D2===void 0?void 0:D2.NewAction);if(n.creationMode===l1.CreationRow&&y2){throw Error("Creation mode '".concat(l1.CreationRow,"' can not be used with a custom 'new' action (").concat(y2,")"));}if(x2===null||x2===void 0?void 0:x2.route){var G2;return{mode:n.creationMode,append:n.createAtEnd,newAction:(G2=y2)===null||G2===void 0?void 0:G2.toString(),navigateToTarget:n.creationMode===l1.NewPage?x2.route:undefined};}}if(n.creationMode===l1.NewPage){n.creationMode=l1.Inline;}return{mode:n.creationMode,append:n.createAtEnd,newAction:(w2=y2)===null||w2===void 0?void 0:w2.toString()};}var U1=function(i,n,o,v2,w2){var x2,y2;var z2=v.None;var A2=o.getAnnotationEntityType(i);if(v2&&i){var B2,C2;y2=((B2=v2.display)===null||B2===void 0?void 0:B2.target)||((C2=v2.detail)===null||C2===void 0?void 0:C2.outbound);if(y2){x2=".handlers.onChevronPressNavigateOutBound( $controller ,'"+y2+"', ${$parameters>bindingContext})";}else if(A2){var D2;var E2=o.getEntitySetForEntityType(A2);y2=(D2=v2.detail)===null||D2===void 0?void 0:D2.route;if(y2){var F2,G2,H2,I2,J2,K2,L2,M2,N2,O2;z2=S1((F2=i.annotations)===null||F2===void 0?void 0:(G2=F2.UI)===null||G2===void 0?void 0:G2.Criticality,!!(E2===null||E2===void 0?void 0:(H2=E2.annotations)===null||H2===void 0?void 0:(I2=H2.Common)===null||I2===void 0?void 0:I2.DraftRoot)||!!(E2===null||E2===void 0?void 0:(J2=E2.annotations)===null||J2===void 0?void 0:(K2=J2.Common)===null||K2===void 0?void 0:K2.DraftNode));x2="._onTableRowPress(${$parameters>bindingContext}, { callExtension: true, targetPath: '"+w2+"', editable : "+((E2===null||E2===void 0?void 0:(L2=E2.annotations)===null||L2===void 0?void 0:(M2=L2.Common)===null||M2===void 0?void 0:M2.DraftRoot)||(E2===null||E2===void 0?void 0:(N2=E2.annotations)===null||N2===void 0?void 0:(O2=N2.Common)===null||O2===void 0?void 0:O2.DraftNode)?"!${$parameters>bindingContext}.getProperty('IsActiveEntity')":"undefined")+"})";}else{var P2,Q2;z2=S1((P2=i.annotations)===null||P2===void 0?void 0:(Q2=P2.UI)===null||Q2===void 0?void 0:Q2.Criticality,false);}}}var R2=H([O("/deepestPath","internal")],t.navigatedRow,A2);return{press:x2,action:x2?"Navigation":undefined,rowHighlighting:N(z2),rowNavigated:N(R2)};};var V1=function(i,n){var o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];var v2=arguments.length>3?arguments[3]:undefined;var w2=arguments.length>4?arguments[4]:undefined;var x2=[];var y2=new f(n,w2);n.entityProperties.forEach(function(z2){var A2=o.some(function(G2){return G2.name===z2.name;});if(!z2.targetType&&!A2){var B2=i.hasOwnProperty(z2.name)?i[z2.name].description:undefined;var C2=i.hasOwnProperty(z2.name)?i[z2.name].fieldGroup:undefined;var D2=V(z2.name,z2,w2,true);var E2=Object.keys(D2.properties);var F2=W1(z2,w2.getEntitySetBasedAnnotationPath(z2.fullyQualifiedName),z2.name,true,true,v2,y2,w2,B2,C2);if(E2.length>0){F2.propertyInfos=E2;F2.exportSettings=t1({},F2.exportSettings,{template:D2.exportSettingsTemplate});E2.forEach(function(G2){i[G2]=D2.properties[G2];});}x2.push(F2);}});return x2;};_.getColumnsFromEntityType=V1;var W1=function(i,n,o,v2,w2,x2,y2,z2,A2,B2){var C2,D2,E2;var F2=v2?o:"Property::"+o;var G2=(v2?"DataField::":"Property::")+r(o);var H2=W(z2,i.fullyQualifiedName);var I2=((C2=i.annotations)===null||C2===void 0?void 0:(D2=C2.UI)===null||D2===void 0?void 0:(E2=D2.Hidden)===null||E2===void 0?void 0:E2.valueOf())===true;var J2=i.name?b2(i.name,true,false):undefined;var K2=J2!=i.name;var L2=Y1(i,K2);var M2=A2||B2||F2.indexOf("@com.sap.vocabularies.UI.v1.DataPoint")>-1?Z1(L2,F2,{value:i,description:A2,fieldGroup:B2}):undefined;return{key:G2,isGroupable:y2.isPropertyGroupable(i),type:B1.Annotation,label:L2,groupLabel:K2?Y1(i):null,group:K2?J2:null,annotationPath:n,semanticObjectPath:H2,availability:!w2||I2||F2.indexOf("@com.sap.vocabularies.UI.v1.DataPoint")>-1?m1.Hidden:m1.Adaptation,name:F2,relativePath:o,sortable:!I2&&x2.indexOf(o)===-1&&!(F2.indexOf("@com.sap.vocabularies.UI.v1.DataPoint")>-1),exportSettings:{labels:M2},isKey:i.isKey};};var X1=function(i){switch(i.$Type){case"com.sap.vocabularies.UI.v1.DataFieldForAction":case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":return!!i.Inline;case"com.sap.vocabularies.UI.v1.DataFieldWithAction":case"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation":return false;case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":return true;default:}};var Y1=function(i){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!i){return undefined;}if(j(i)){var o,v2,w2,x2,y2;var z2=(o=i.annotations)===null||o===void 0?void 0:(v2=o.UI)===null||v2===void 0?void 0:v2.DataFieldDefault;if(z2&&!z2.qualifier&&((w2=z2.Label)===null||w2===void 0?void 0:w2.valueOf())){var A2;return N(Q((A2=z2.Label)===null||A2===void 0?void 0:A2.valueOf()));}return N(Q(((x2=i.annotations.Common)===null||x2===void 0?void 0:(y2=x2.Label)===null||y2===void 0?void 0:y2.valueOf())||i.name));}else if(X(i)){var B2,C2,D2,E2,F2,G2,H2,I2;if(!!n&&i.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation"){var J2;return N(Q((J2=i.Label)===null||J2===void 0?void 0:J2.valueOf()));}return N(Q(((B2=i.Label)===null||B2===void 0?void 0:B2.valueOf())||((C2=i.Value)===null||C2===void 0?void 0:(D2=C2.$target)===null||D2===void 0?void 0:(E2=D2.annotations)===null||E2===void 0?void 0:(F2=E2.Common)===null||F2===void 0?void 0:(G2=F2.Label)===null||G2===void 0?void 0:G2.valueOf())||((H2=i.Value)===null||H2===void 0?void 0:(I2=H2.$target)===null||I2===void 0?void 0:I2.name)));}else if(i.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){var K2,L2,M2,N2,O2,P2,Q2,R2;return N(Q(((K2=i.Label)===null||K2===void 0?void 0:K2.valueOf())||((L2=i.Target)===null||L2===void 0?void 0:(M2=L2.$target)===null||M2===void 0?void 0:(N2=M2.Value)===null||N2===void 0?void 0:(O2=N2.$target)===null||O2===void 0?void 0:(P2=O2.annotations)===null||P2===void 0?void 0:(Q2=P2.Common)===null||Q2===void 0?void 0:(R2=Q2.Label)===null||R2===void 0?void 0:R2.valueOf())));}else{var S2;return N(Q((S2=i.Label)===null||S2===void 0?void 0:S2.valueOf()));}};var Z1=function(i,n,o){var v2=[];if(o.description){var w2=Y1(o.description);v2.push(w2);}if(o.fieldGroup){var x2=Y1(o.fieldGroup);v2.push(x2);}v2.push(i);v2=v2.filter(function(y2,z2){if(v2.indexOf(y2)==z2){return y2;}});if((n===null||n===void 0?void 0:n.indexOf("@com.sap.vocabularies.UI.v1.DataPoint"))>-1){v2.push("DataPoint.TargetValue");}return v2;};var $1=function(i,n,o,v2,w2){var x2=[];var y2={};var z2=new f(w2,v2);Object.keys(i).forEach(function(A2){var B2=i[A2],C2=B2.value,D2=B2.description,E2=B2.fieldGroup,F2=v2.getAbsoluteAnnotationPath(A2),G2=n.find(function(I2){return I2.name===A2;});if(G2===undefined){x2.push(W1(C2,F2,A2,true,false,o,z2,v2,D2,E2));}else if(G2.annotationPath!==F2||G2.propertyInfos&&G2.propertyInfos.indexOf(A2)!==-1){var H2="Property::"+A2;if(!n.some(function(I2){return I2.name===H2;})){x2.push(W1(C2,F2,A2,false,false,o,z2,v2,D2));y2[A2]=H2;}}});n.forEach(function(A2){var B2;A2.propertyInfos=(B2=A2.propertyInfos)===null||B2===void 0?void 0:B2.map(function(C2){var D2;return(D2=y2[C2])!==null&&D2!==void 0?D2:C2;});});return x2;};var _1=function(i){var n,o,v2;if(X(i)){var w2;return(w2=i.Value)===null||w2===void 0?void 0:w2.path;}else if(i.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&((n=i.Target)===null||n===void 0?void 0:(o=n.$target)===null||o===void 0?void 0:(v2=o.Value)===null||v2===void 0?void 0:v2.path)){return i.Target.$target.Value.path;}else{return w.generateKeyFromDataField(i);}};var a2=function(i){var n,o,v2,w2;var x2="";switch(i.$Type){case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":x2=(n=i)===null||n===void 0?void 0:(o=n.Value)===null||o===void 0?void 0:o.path;break;case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":x2=(v2=i)===null||v2===void 0?void 0:(w2=v2.Target)===null||w2===void 0?void 0:w2.value;break;case"com.sap.vocabularies.UI.v1.DataFieldForAction":case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":x2=w.generateKeyFromDataField(i);break;}return x2;};var b2=function(i,n,o){var v2=n?i.lastIndexOf("/"):i.indexOf("/");if(v2===-1){return i;}return o?i.substring(v2+1,i.length):i.substring(0,v2);};var c2=function(i,n,o){var v2=false;if(o.indexOf(n)===-1){switch(i.$Type){case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":v2=true;break;case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldForAction":v2=false;break;}}return v2;};var d2=function(i,n,o){var v2,w2,x2,y2,z2,A2;var B2=o.getAnnotationEntityType(i),C2=[],D2={},E2=(v2=(w2=(x2=o.getEntitySet())===null||x2===void 0?void 0:(y2=x2.annotations)===null||y2===void 0?void 0:(z2=y2.Capabilities)===null||z2===void 0?void 0:(A2=z2.SortRestrictions)===null||A2===void 0?void 0:A2.NonSortableProperties)===null||w2===void 0?void 0:w2.map(function(H2){return H2.value;}))!==null&&v2!==void 0?v2:[];if(i){i.forEach(function(H2){var I2,J2,K2,L2,M2;if(!X1(H2)){return;}var N2=X(H2)&&((I2=H2.Value)===null||I2===void 0?void 0:(J2=I2.$target)===null||J2===void 0?void 0:J2.fullyQualifiedName)?W(o,H2):undefined;var O2=a2(H2);var P2=$(H2,o);var Q2=Object.keys(P2.properties);var R2=b2(O2,true,false);var S2=R2!=O2;var T2=Y1(H2,S2);C2.push({key:w.generateKeyFromDataField(H2),type:B1.Annotation,label:T2,groupLabel:S2?Y1(H2):null,group:S2?R2:null,annotationPath:o.getEntitySetBasedAnnotationPath(H2.fullyQualifiedName),semanticObjectPath:N2,availability:Z(H2)?m1.Hidden:m1.Default,name:_1(H2),relativePath:O2,sortable:c2(H2,O2,E2),propertyInfos:Q2.length>0?Q2:undefined,exportSettings:{template:P2.exportSettingsTemplate},width:((K2=H2.annotations)===null||K2===void 0?void 0:(L2=K2.HTML5)===null||L2===void 0?void 0:(M2=L2.CssDefaults)===null||M2===void 0?void 0:M2.width)||undefined,isNavigable:true,formatOptions:{textLinesDisplay:4,textLinesEdit:4}});Q2.forEach(function(U2){D2[U2]=P2.properties[U2];});});}var F2=V1(D2,B2,C2,E2,o);F2=F2.concat(C2);var G2=$1(D2,F2,E2,o,B2);F2=F2.concat(G2);return F2;};var e2=function(i,n,o,v2){var w2;if(i){w2=i.map(function(x2){var y2=n.find(function(y2){return y2.relativePath===x2&&y2.propertyInfos===undefined;});if(y2){return y2.name;}else{var z2=$1(u1({},x2,{value:v2.resolvePath(x2)}),n,[],o,v2);n.push(z2[0]);return z2[0].name;}});}return w2;};var f2=function(i,n,o){if(i===undefined){return o?undefined:n;}return i;};var g2=function(i,n,o,v2,w2){var x2={};var y2=function(z2){var A2;var B2=i[z2];var C2=n.some(function(D2){return D2.key===z2;});w.validateKey(z2);x2[z2]={key:z2,id:"CustomColumn::"+z2,name:"CustomColumn::"+z2,header:B2.header,width:B2.width||undefined,horizontalAlign:f2(B2===null||B2===void 0?void 0:B2.horizontalAlign,k1.Begin,C2),type:B1.Default,availability:f2(B2===null||B2===void 0?void 0:B2.availability,m1.Default,C2),template:B2.template||"undefined",position:{anchor:(A2=B2.position)===null||A2===void 0?void 0:A2.anchor,placement:B2.position===undefined?a1.After:B2.position.placement},isNavigable:C2?undefined:d1(B2,w2,true),settings:B2.settings,sortable:false,propertyInfos:e2(B2.properties,n,o,v2),formatOptions:t1({textLinesDisplay:4,textLinesEdit:4},B2.formatOptions)};};for(var z2 in i){y2(z2);}return x2;};function h2(i,n,o){var v2=n.getManifestWrapper();var w2=n.getManifestControlConfiguration(i);var x2=v2.getVariantManagement();var y2=["Page","Control"].indexOf(x2)>-1;var z2=[];if(y2){var A2;var B2=o.type==="AnalyticalTable";if((w2===null||w2===void 0?void 0:(A2=w2.tableSettings)===null||A2===void 0?void 0:A2.personalization)!==undefined){var C2=w2.tableSettings.personalization;if(C2===true){return B2?"Sort,Column,Filter,Group,Aggregate":"Sort,Column,Filter";}else if(typeof C2==="object"){if(C2.sort){z2.push("Sort");}if(C2.column){z2.push("Column");}if(C2.filter){z2.push("Filter");}if(C2.group&&B2){z2.push("Group");}if(C2.aggregate&&B2){z2.push("Aggregate");}return z2.length>0?z2.join(","):undefined;}}else{z2.push("Sort");z2.push("Column");if(x2===i1.Control){z2.push("Filter");}if(B2){z2.push("Group");z2.push("Aggregate");}return z2.join(",");}}return undefined;}_.getP13nMode=h2;function i2(i,n){var o=false;if(i&&n){var v2,w2,x2;var y2=(v2=i.navigationPropertyBinding[n])===null||v2===void 0?void 0:(w2=v2.annotations)===null||w2===void 0?void 0:(x2=w2.UI)===null||x2===void 0?void 0:x2.DeleteHidden;if(y2&&y2.path){if(y2.path.indexOf("/")>0){var z2=y2.path.split("/");var A2=z2[0];var B2=i.entityType.navigationProperties.find(function(E2){return E2.name===n;}).partner;if(B2===A2){o=y2;}}else{o=false;}}else{o=y2;}}else{var C2,D2;o=i&&((C2=i.annotations)===null||C2===void 0?void 0:(D2=C2.UI)===null||D2===void 0?void 0:D2.DeleteHidden);}return o;}function j2(i,n,o){var v2=i.getEntitySet();var w2=i2(v2,n);var x2,y2;if(i.getTemplateType()===g1.ObjectPage){x2=s(i.getDataModelObjectPath(),n);y2=x2?N(x2):x2;}if(y2==="false"){return false;}else if(y2&&w2!==true){if(w2){return"{= !${"+(n?n+"/":"")+w2.path+"} && ${ui>/editMode} === 'Editable'}";}else{return"{= ${ui>/editMode} === 'Editable'}";}}else if(w2===true||!o||i.getTemplateType()===g1.AnalyticalListPage){return false;}else if(i.getTemplateType()!==g1.ListReport){if(w2){return"{= !${"+(n?n+"/":"")+w2.path+"} && ${ui>/editMode} === 'Editable'}";}else{return"{= ${ui>/editMode} === 'Editable'}";}}else{return true;}}_.getDeleteVisible=j2;function k2(i,n,o){var v2,w2,x2,y2,z2,A2,B2;var C2=i.getEntitySet();var D2=i.getDataModelObjectPath();var E2=C2?Q((C2===null||C2===void 0?void 0:(v2=C2.annotations.UI)===null||v2===void 0?void 0:v2.CreateHidden)||false,D2.navigationProperties.map(function(H2){return H2.name;})):L(false);var F2=C2===null||C2===void 0?void 0:(w2=C2.annotations.Common)===null||w2===void 0?void 0:(x2=w2.DraftRoot)===null||x2===void 0?void 0:(y2=x2.NewAction)===null||y2===void 0?void 0:y2.toString();var G2=F2?Q(i===null||i===void 0?void 0:(z2=i.getEntityType().actions[F2].annotations)===null||z2===void 0?void 0:(A2=z2.Core)===null||A2===void 0?void 0:(B2=A2.OperationAvailable)===null||B2===void 0?void 0:B2.valueOf(),[],true):undefined;return G(z(z(J(G2,false),R(F(o),J(o,false),J(G2,undefined))),F(E2)&&J(E2,true),i.getTemplateType()===g1.AnalyticalListPage),false,G(z(n==="External",i.getTemplateType()===g1.ListReport),true,R(E(E2),U.IsEditable)));}_.getCreateVisible=k2;function l2(i,n,o){return G(J(k2(i,n.mode,o),true),i.getTemplateType()===g1.ObjectPage&&o,false);}_.getPasteEnabled=l2;function m2(i,n){var o;if(i===null||i===void 0?void 0:i.SortOrder){var v2=[];var w2={sorters:v2};i.SortOrder.forEach(function(x2){var y2,z2,A2,B2;var C2=(y2=x2.Property)===null||y2===void 0?void 0:(z2=y2.$target)===null||z2===void 0?void 0:z2.name;var D2=n.find(function(E2){return E2.name===C2;});D2===null||D2===void 0?void 0:(A2=D2.propertyInfos)===null||A2===void 0?void 0:A2.forEach(function(E2){w2.sorters.push({name:E2,descending:!!x2.Descending});});if(!(D2===null||D2===void 0?void 0:(B2=D2.propertyInfos)===null||B2===void 0?void 0:B2.length)){w2.sorters.push({name:C2,descending:!!x2.Descending});}});o=w2.sorters.length?JSON.stringify(w2):undefined;}return o;}function n2(i,n){var o=[];i.forEach(function(v2){var w2;if(v2===null||v2===void 0?void 0:(w2=v2.$target)===null||w2===void 0?void 0:w2.name){var x2=n.find(function(y2){var z2;var A2=y2;return!A2.propertyInfos&&A2.relativePath===(v2===null||v2===void 0?void 0:(z2=v2.$target)===null||z2===void 0?void 0:z2.name);});if(x2){o.push(x2.name);}}});return o;}function o2(i,n){var o;if(i===null||i===void 0?void 0:i.GroupBy){var v2=i.GroupBy;var w2=n2(v2,n).map(function(x2){return{name:x2};});o=w2.length?JSON.stringify({groupLevels:w2}):undefined;}return o;}function p2(i,n){var o;if(i===null||i===void 0?void 0:i.Total){var v2=i.Total;var w2={};n2(v2,n).forEach(function(x2){w2[x2]={};});o=JSON.stringify(w2);}return o;}function q2(i,n,o,v2,w2,x2){var y2,z2,A2;var B2=s2(n),C2=B2.navigationPropertyPath;var D2=(y2=o.getDataModelObjectPath().targetEntityType.annotations)===null||y2===void 0?void 0:(z2=y2.UI)===null||z2===void 0?void 0:(A2=z2.HeaderInfo)===null||A2===void 0?void 0:A2.TypeNamePlural;var E2=o.getDataModelObjectPath().startingEntitySet;var F2=o.getManifestWrapper();var G2=C2.length===0,H2=h2(n,o,v2),id=G2&&E2?f1(E2.name,"LineItem"):f1(n);var J2=O1(o);var K2=P1(i,n,o,G2,J2);var L2=G2?30:10;if(x2===null||x2===void 0?void 0:x2.MaxItems){L2=x2.MaxItems.valueOf();}var M2=G2&&E2?E2.name:C2;var N2=F2.getNavigationConfiguration(M2);var O2=T1(i,v2,o,N2);var P2,Q2;if(o.getTemplateType()===g1.ObjectPage){var R2;P2=s(o.getDataModelObjectPath(),undefined,true);if((R2=P2)===null||R2===void 0?void 0:R2.currentEntityRestriction){Q2=undefined;}else{Q2=P2?N(P2,true):P2;}}var S2=o.getDataModelObjectPath();var T2=q(S2);return{id:id,entityName:E2?E2.name:"",collection:u(o.getDataModelObjectPath()),navigationPath:C2,isEntitySet:G2,row:U1(i,n,o,N2,M2),p13nMode:H2,show:{"delete":j2(o,C2,J2.isDeletable),create:N(k2(o,O2===null||O2===void 0?void 0:O2.mode,T2)),paste:N(l2(o,O2,T2))},displayMode:r2(o),create:O2,selectionMode:K2,autoBindOnInit:o.getTemplateType()!==g1.ListReport&&o.getTemplateType()!==g1.AnalyticalListPage,enableControlVM:F2.getVariantManagement()==="Control"&&!!H2,threshold:L2,sortConditions:m2(x2,w2),parentEntityDeleteEnabled:Q2,title:D2};}_.getTableAnnotationConfiguration=q2;function r2(i){var n=i.getTemplateType();if(n===g1.AnalyticalListPage||n===g1.ListReport){return true;}return false;}function s2(i){var n=i.split("@"),o=o1(n,2),v2=o[0],w2=o[1];if(v2.lastIndexOf("/")===v2.length-1){v2=v2.substr(0,v2.length-1);}return{navigationPropertyPath:v2,annotationPath:w2};}function t2(i,n){var o=n.getEntityTypeAnnotation(i);var v2=o.annotation;if(v2){var w2,x2;var y2=[];(w2=v2.SelectOptions)===null||w2===void 0?void 0:w2.forEach(function(z2){var A2=z2.PropertyName;var B2=A2.value;if(y2.indexOf(B2)===-1){y2.push(B2);}});return{text:v2===null||v2===void 0?void 0:(x2=v2.Text)===null||x2===void 0?void 0:x2.toString(),propertyNames:y2};}return undefined;}_.getSelectionVariantConfiguration=t2;function u2(i,n,o){var v2=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var w2=o.getManifestControlConfiguration(n);var x2=w2.tableSettings;var y2;var z2=[];var A2=true;var B2=l1.NewPage;var C2;var D2=true;var E2=false;var F2=false;var G2=false;var H2="ResponsiveTable";var I2=false;var J2=200;var K2=o.getTemplateType()==="ObjectPage";var L2=o.getShellServices();var M2=L2===null||L2===void 0?void 0:L2.getContentDensity();var N2=o.getManifestWrapper().getContentDensities();var O2=o.getEntityType();var P2=new f(O2,o);if((N2===null||N2===void 0?void 0:N2.cozy)===true&&(N2===null||N2===void 0?void 0:N2.compact)!==true||M2==="cozy"){v2=false;}if(x2&&i){var Q2,R2,S2,T2,U2,V2,W2;var X2=o.getAnnotationEntityType(i);x2===null||x2===void 0?void 0:(Q2=x2.quickVariantSelection)===null||Q2===void 0?void 0:(R2=Q2.paths)===null||R2===void 0?void 0:R2.forEach(function(Y2){var Z2;y2=X2.resolvePath("@"+Y2.annotationPath);if(y2){z2.push({annotationPath:Y2.annotationPath});}C2={quickFilters:{enabled:o.getTemplateType()===g1.ListReport?"{= ${pageInternal>hasPendingFilters} !== true}":true,showCounts:x2===null||x2===void 0?void 0:(Z2=x2.quickVariantSelection)===null||Z2===void 0?void 0:Z2.showCounts,paths:z2}};});B2=((S2=x2.creationMode)===null||S2===void 0?void 0:S2.name)||B2;D2=((T2=x2.creationMode)===null||T2===void 0?void 0:T2.createAtEnd)!==undefined?(U2=x2.creationMode)===null||U2===void 0?void 0:U2.createAtEnd:true;E2=!!((V2=x2.creationMode)===null||V2===void 0?void 0:V2.disableAddRowButtonForEmptyData);F2=x2.condensedTableLayout!==undefined?x2.condensedTableLayout:false;G2=!!((W2=x2.quickVariantSelection)===null||W2===void 0?void 0:W2.hideTableTitle);H2=(x2===null||x2===void 0?void 0:x2.type)||"ResponsiveTable";if(o.getTemplateType()==="AnalyticalListPage"){if((x2===null||x2===void 0?void 0:x2.type)==="AnalyticalTable"&&!P2.isAnalyticsSupported()){H2="GridTable";}if(!(x2===null||x2===void 0?void 0:x2.type)){if(o.getManifestWrapper().isDesktop()&&P2.isAnalyticsSupported()){H2="AnalyticalTable";}else{H2="ResponsiveTable";}}}I2=x2.enableFullScreen||false;if(I2===true&&o.getTemplateType()===g1.ListReport){I2=false;o.getDiagnostics().addIssue(m.Manifest,l.Low,k.FULLSCREENMODE_NOT_ON_LISTREPORT);}J2=x2.selectAll===true||x2.selectionLimit===0?0:x2.selectionLimit||200;K2=o.getTemplateType()==="ObjectPage"&&x2.enablePaste!==false;A2=x2.enableExport!==undefined?x2.enableExport:o.getTemplateType()!=="ObjectPage"||K2;}return{filters:C2,type:H2,enableFullScreen:I2,headerVisible:!(y2&&G2),enableExport:A2,creationMode:B2,createAtEnd:D2,disableAddRowButtonForEmptyData:E2,useCondensedTableLayout:F2&&v2,selectionLimit:J2,enablePaste:K2};}_.getTableManifestConfiguration=u2;return _;},false);
