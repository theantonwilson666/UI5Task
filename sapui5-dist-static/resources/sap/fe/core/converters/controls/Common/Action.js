sap.ui.define(["sap/fe/core/converters/ManifestSettings","sap/fe/core/converters/helpers/ConfigurableObject","sap/fe/core/converters/helpers/ID","sap/fe/core/helpers/StableIdHelper","sap/fe/core/helpers/BindingExpression","sap/fe/core/formatters/FPMFormatter"],function(M,C,I,S,B,f){"use strict";var _={};var r=B.resolveBindingString;var a=B.isConstant;var b=B.formatResult;var c=B.or;var d=B.compileBinding;var e=B.bindingExpression;var g=B.annotationExpression;var h=S.replaceSpecialChars;var j=I.CustomActionID;var P=C.Placement;var A=M.ActionType;function k(i){return q(i)||p(i)||m(i)||l();}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function m(o,i){if(!o)return;if(typeof o==="string")return s(o,i);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(o,i);}function p(i){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(i))return Array.from(i);}function q(i){if(Array.isArray(i))return s(i);}function s(n,o){if(o==null||o>n.length)o=n.length;for(var i=0,G=new Array(o);i<o;i++){G[i]=n[i];}return G;}var t;(function(t){t["Accept"]="Accept";t["Attention"]="Attention";t["Back"]="Back";t["Critical"]="Critical";t["Default"]="Default";t["Emphasized"]="Emphasized";t["Ghost"]="Ghost";t["Negative"]="Negative";t["Neutral"]="Neutral";t["Reject"]="Reject";t["Success"]="Success";t["Transparent"]="Transparent";t["Unstyled"]="Unstyled";t["Up"]="Up";})(t||(t={}));_.ButtonType=t;function u(i,n,H){var o;var G={};var J=[];var K=function(L){var N=i[L];if(N.type===A.Menu){var O,Q;var R=[];var T=false;var U=(O=(Q=N.menu)===null||Q===void 0?void 0:Q.map(function(V){var W,X,Y;var Z=n.find(function(Z){return Z.key===V;});if(!Z){Z=i[V];}if((((W=Z)===null||W===void 0?void 0:W.visible)||((X=Z)===null||X===void 0?void 0:X.type)===A.DataFieldForAction||((Y=Z)===null||Y===void 0?void 0:Y.type)===A.DataFieldForIntentBasedNavigation)&&!H.find(function($){return $.key===V;})){T=d(c(r(Z.visible,"boolean"),r(T,"boolean")));R.push(Z);}return V;}))!==null&&O!==void 0?O:[];if(R.length){N.visible=T;N.menu=R;}else{U=[L];}J=[].concat(k(J),k(U));}if(H.find(function(V){return V.key===L;})){N.visible=false;}G[L]=N;};for(var L in i){K(L);}(o=J)===null||o===void 0?void 0:o.forEach(function(L){return delete G[L];});return G;}var v=function(i){var o={};i.forEach(function(n){var G;if(n===null||n===void 0?void 0:(G=n.menu)===null||G===void 0?void 0:G.length){n.menu.reduce(function(H,J){var K=J.key;if(K&&!H[K]){H[K]=true;}return H;},o);}});return i.filter(function(n){return!o[n.key];});};_.removeDuplicateActions=v;var w=function(i,n,o){if(i===undefined){return n?undefined:true;}return y(i,o);};function x(i,n,o,G,H,J){var K={};var L=function(N){var O,Q,R;var T=i[N];var U=(O=T.press)===null||O===void 0?void 0:O.lastIndexOf(".");var V=(o===null||o===void 0?void 0:o.some(function(W){return W.key===N;}))||false;K[N]={id:(o===null||o===void 0?void 0:o.some(function(W){return W.key===N;}))?N:j(N),visible:T.visible===undefined?"true":T.visible,enabled:w(T.enabled,V,n),handlerModule:T.press&&T.press.substring(0,U).replace(/\./gi,"/"),handlerMethod:T.press&&T.press.substring(U+1),press:T.press,type:T.menu?A.Menu:A.Default,text:T.text,key:h(N),enableOnSelect:T.enableOnSelect,position:{anchor:(Q=T.position)===null||Q===void 0?void 0:Q.anchor,placement:T.position===undefined?P.After:T.position.placement},isNavigable:E(T,G,H),requiresSelection:T.requiresSelection===undefined?false:T.requiresSelection,enableAutoScroll:F(T),menu:(R=T.menu)!==null&&R!==void 0?R:[]};};for(var N in i){L(N);}return u(K,o!==null&&o!==void 0?o:[],J!==null&&J!==void 0?J:[]);}_.getActionsFromManifest=x;function y(i,n){var o=r(i,"boolean");if(a(o)&&typeof o.value==="boolean"){return o.value;}else if(o._type!=="EmbeddedBinding"&&o._type!=="EmbeddedExpressionBinding"){var G=o.value;return d(b([e("/","$view"),G,e("selectedContexts","internal")],f.customIsEnabledCheck,n.getAnnotationEntityType()));}else{return d(o);}}function z(i){var n,o;if(!i){return"true";}if(!i.isBound){return"true";}var G=(n=i.annotations)===null||n===void 0?void 0:(o=n.Core)===null||o===void 0?void 0:o.OperationAvailable;if(G){var H=d(g(G));if(H){var J,K;var L=(J=i.parameters)===null||J===void 0?void 0:(K=J[0])===null||K===void 0?void 0:K.fullyQualifiedName;if(L){L=L.replace(i.fullyQualifiedName+"/","");H=H.replace(L+"/","");}return H;}return"true";}return"true";}_.getEnabledBinding=z;function D(i){var n=[];i.forEach(function(o){var G={"LocalProperty":{"$PropertyPath":o.LocalProperty.value},"SemanticObjectProperty":o.SemanticObjectProperty};n.push(G);});return n;}_.getSemanticObjectMapping=D;function E(i,n,o){var G,H;var J=true;if(o){var K=n&&(n.detail||n.display);J=(K===null||K===void 0?void 0:K.route)?true:false;}if(i&&i.afterExecution&&(((G=i.afterExecution)===null||G===void 0?void 0:G.navigateToInstance)===false||((H=i.afterExecution)===null||H===void 0?void 0:H.enableAutoScroll)===true)||!J){return false;}return true;}_.isActionNavigable=E;function F(i){var n;return(i===null||i===void 0?void 0:(n=i.afterExecution)===null||n===void 0?void 0:n.enableAutoScroll)===true;}_.enableAutoScroll=F;return _;},false);
