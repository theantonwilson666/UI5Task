sap.ui.define(["../../helpers/ConfigurableObject","../../helpers/ID","../../helpers/Key","sap/fe/core/converters/annotations/DataField","sap/fe/core/templating/DataModelPathHelper"],function(C,I,K,D,a){"use strict";var _={};var g=a.getTargetObjectPath;var b=a.getTargetEntitySetPath;var c=D.getSemanticObjectPath;var d=K.KeyHelper;var F=I.FormID;var P=C.Placement;var e=C.insertCustomElements;function o(i,r){var s=Object.keys(i);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(i);if(r)t=t.filter(function(u){return Object.getOwnPropertyDescriptor(i,u).enumerable;});s.push.apply(s,t);}return s;}function f(t){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};if(i%2){o(Object(s),true).forEach(function(r){h(t,r,s[r]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(t,Object.getOwnPropertyDescriptors(s));}else{o(Object(s)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(s,r));});}}return t;}function h(i,r,v){if(r in i){Object.defineProperty(i,r,{value:v,enumerable:true,configurable:true,writable:true});}else{i[r]=v;}return i;}var j;(function(j){j["Default"]="Default";j["Annotation"]="Annotation";})(j||(j={}));_.FormElementType=j;function k(i,r){var s=[];var t=r.getEntityTypeAnnotation(i.Target.value);var u=t.annotation;r=t.converterContext;switch(u===null||u===void 0?void 0:u.term){case"com.sap.vocabularies.UI.v1.FieldGroup":u.Data.forEach(function(v){var w,x,y;var z=c(r,v);if(v.$Type!=="com.sap.vocabularies.UI.v1.DataFieldForAction"&&v.$Type!=="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"&&((w=v.annotations)===null||w===void 0?void 0:(x=w.UI)===null||x===void 0?void 0:(y=x.Hidden)===null||y===void 0?void 0:y.valueOf())!==true){s.push({key:d.generateKeyFromDataField(v),type:j.Annotation,annotationPath:r.getEntitySetBasedAnnotationPath(v.fullyQualifiedName)+"/",semanticObjectPath:z,formatOptions:{textLinesDisplay:0,textLinesEdit:4}});}});break;case"com.sap.vocabularies.UI.v1.Identification":u.forEach(function(v){var w,x,y;var z=c(r,v);if(v.$Type!=="com.sap.vocabularies.UI.v1.DataFieldForAction"&&v.$Type!=="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"&&((w=v.annotations)===null||w===void 0?void 0:(x=w.UI)===null||x===void 0?void 0:(y=x.Hidden)===null||y===void 0?void 0:y.valueOf())!==true){s.push({key:d.generateKeyFromDataField(v),type:j.Annotation,annotationPath:r.getEntitySetBasedAnnotationPath(v.fullyQualifiedName)+"/",semanticObjectPath:z,formatOptions:{textLinesDisplay:0,textLinesEdit:4}});}});break;case"com.sap.vocabularies.UI.v1.DataPoint":s.push({key:"DataPoint::"+(u.qualifier?u.qualifier:""),type:j.Annotation,annotationPath:r.getEntitySetBasedAnnotationPath(u.fullyQualifiedName)+"/"});break;case"com.sap.vocabularies.Communication.v1.Contact":s.push({key:"Contact::"+(u.qualifier?u.qualifier:""),type:j.Annotation,annotationPath:r.getEntitySetBasedAnnotationPath(u.fullyQualifiedName)+"/"});break;default:break;}return s;}function l(i,r){var s=r.getManifestWrapper();var t=s.getFormContainer(i.Target.value);var u={};if(t===null||t===void 0?void 0:t.fields){Object.keys(t===null||t===void 0?void 0:t.fields).forEach(function(v){u[v]={key:v,type:j.Default,template:t.fields[v].template,label:t.fields[v].label,position:t.fields[v].position||{placement:P.After},formatOptions:f({textLinesDisplay:0,textLinesEdit:4},t.fields[v].formatOptions)};});}return u;}_.getFormElementsFromManifest=l;function m(i,r){var s,t;var u=r.getEntityTypeAnnotation(i.Target.value);var E;if(u.converterContext.getEntitySet()!==r.getEntitySet()){E=b(u.converterContext.getDataModelObjectPath());}else if(((s=u.converterContext.getDataModelObjectPath().targetObject)===null||s===void 0?void 0:s.containsTarget)===true){E=g(u.converterContext.getDataModelObjectPath(),false);}return{id:i===null||i===void 0?void 0:(t=i.ID)===null||t===void 0?void 0:t.toString(),formElements:e(k(i,r),l(i,r),{formatOptions:"overwrite"}),annotationPath:"/"+i.fullyQualifiedName,entitySet:E};}_.getFormContainer=m;function n(i,r){var s;var t=[];(s=i.Facets)===null||s===void 0?void 0:s.forEach(function(u){if(u.$Type==="com.sap.vocabularies.UI.v1.CollectionFacet"){return;}t.push(m(u,r));});return t;}function p(i){return i.$Type==="com.sap.vocabularies.UI.v1.ReferenceFacet";}_.isReferenceFacet=p;function q(i,r){var s,t,u;switch(i.$Type){case"com.sap.vocabularies.UI.v1.CollectionFacet":var v={id:F({Facet:i}),useFormContainerLabels:true,hasFacetsNotPartOfPreview:i.Facets.some(function(x){var y,z,A;return((y=x.annotations)===null||y===void 0?void 0:(z=y.UI)===null||z===void 0?void 0:(A=z.PartOfPreview)===null||A===void 0?void 0:A.valueOf())===false;}),formContainers:n(i,r)};return v;case"com.sap.vocabularies.UI.v1.ReferenceFacet":var w={id:F({Facet:i}),useFormContainerLabels:false,hasFacetsNotPartOfPreview:((s=i.annotations)===null||s===void 0?void 0:(t=s.UI)===null||t===void 0?void 0:(u=t.PartOfPreview)===null||u===void 0?void 0:u.valueOf())===false,formContainers:[m(i,r)]};return w;default:throw new Error("Cannot create form based on ReferenceURLFacet");}}_.createFormDefinition=q;return _;},false);
