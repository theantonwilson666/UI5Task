sap.ui.define(["../ManifestSettings","sap/fe/core/converters/controls/Common/Action","sap/fe/core/converters/helpers/ConfigurableObject","sap/fe/core/helpers/BindingExpression","sap/fe/core/converters/helpers/Key","sap/fe/core/templating/DataModelPathHelper"],function(M,A,C,B,K,D){"use strict";var _={};var i=D.isPathDeletable;var a=K.KeyHelper;var f=B.fn;var e=B.equal;var n=B.not;var c=B.compileBinding;var b=B.annotationExpression;var P=C.Placement;var g=A.getSemanticObjectMapping;var d=A.ButtonType;var h=M.ActionType;function j(p,q){var r,s,t;return((r=p.annotations)===null||r===void 0?void 0:(s=r.UI)===null||s===void 0?void 0:(t=s.Identification)===null||t===void 0?void 0:t.filter(function(u){var v,w,x;if((u===null||u===void 0?void 0:(v=u.annotations)===null||v===void 0?void 0:(w=v.UI)===null||w===void 0?void 0:(x=w.Hidden)===null||x===void 0?void 0:x.valueOf())!==true){var y,z,E,F,G;if((u===null||u===void 0?void 0:u.$Type)==="com.sap.vocabularies.UI.v1.DataFieldForAction"&&!!u.Determining===q&&(!(u===null||u===void 0?void 0:(y=u.ActionTarget)===null||y===void 0?void 0:y.isBound)||(u===null||u===void 0?void 0:(z=u.ActionTarget)===null||z===void 0?void 0:(E=z.annotations)===null||E===void 0?void 0:(F=E.Core)===null||F===void 0?void 0:(G=F.OperationAvailable)===null||G===void 0?void 0:G.valueOf())!==false)){return true;}}return false;}))||[];}_.getIdentificationDataFieldForActions=j;function k(p,q){var r,s,t;return((r=p.annotations)===null||r===void 0?void 0:(s=r.UI)===null||s===void 0?void 0:(t=s.Identification)===null||t===void 0?void 0:t.filter(function(u){var v,w,x;if((u===null||u===void 0?void 0:(v=u.annotations)===null||v===void 0?void 0:(w=v.UI)===null||w===void 0?void 0:(x=w.Hidden)===null||x===void 0?void 0:x.valueOf())!==true){if((u===null||u===void 0?void 0:u.$Type)==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"&&!!u.Determining===q){return true;}}return false;}))||[];}var I=["UI.CriticalityType/VeryPositive","UI.CriticalityType/Positive","UI.CriticalityType/Negative","UI.CriticalityType/VeryNegative"];function l(p){var q,r,s,t,u,v,w,x;var y=p.getEntitySet();var S=y&&((q=y.annotations)===null||q===void 0?void 0:(r=q.Session)===null||r===void 0?void 0:r.StickySessionSupported),z=y&&((s=y.annotations.Common)===null||s===void 0?void 0:s.DraftRoot),E=y&&((t=y.annotations)===null||t===void 0?void 0:(u=t.Capabilities)===null||u===void 0?void 0:u.DeleteRestrictions),U=y&&((v=y.annotations.UI)===null||v===void 0?void 0:(w=v.UpdateHidden)===null||w===void 0?void 0:w.valueOf());var F=p.getDataModelObjectPath(),G=i(F),H=G?c(G):G;var J=j(p.getEntityType(),false);var L=J.filter(function(O){return I.indexOf(O===null||O===void 0?void 0:O.Criticality)>-1;}).map(function(O){var Q,R;return{type:h.DataFieldForAction,annotationPath:p.getEntitySetBasedAnnotationPath(O.fullyQualifiedName),key:a.generateKeyFromDataField(O),visible:c(n(e(b((Q=O.annotations)===null||Q===void 0?void 0:(R=Q.UI)===null||R===void 0?void 0:R.Hidden),true))),isNavigable:true};});if(((z===null||z===void 0?void 0:z.EditAction)||(S===null||S===void 0?void 0:S.EditAction))&&U!==true){L.push({type:h.Primary,key:"EditAction"});}if(H&&H!=="false"||(E===null||E===void 0?void 0:(x=E.Deletable)===null||x===void 0?void 0:x.valueOf())!==false&&H!=="false"){L.push({type:h.Secondary,key:"DeleteAction",parentEntityDeleteEnabled:H});}var N=k(p.getEntityType(),false);N.filter(function(O){return I.indexOf(O===null||O===void 0?void 0:O.Criticality)===-1;}).map(function(O){var Q,R,T,V,W,X,Y;var Z={semanticObjectMapping:O.Mapping?g(O.Mapping):[]};if(((Q=O.RequiresContext)===null||Q===void 0?void 0:Q.valueOf())===true){throw new Error("RequiresContext property should not be true for header IBN action : "+O.Label);}else if(((R=O.Inline)===null||R===void 0?void 0:R.valueOf())===true){throw new Error("Inline property should not be true for header IBN action : "+O.Label);}L.push({type:h.DataFieldForIntentBasedNavigation,text:(T=O.Label)===null||T===void 0?void 0:T.toString(),annotationPath:p.getEntitySetBasedAnnotationPath(O.fullyQualifiedName),buttonType:d.Ghost,visible:c(n(e(b((V=O.annotations)===null||V===void 0?void 0:(W=V.UI)===null||W===void 0?void 0:(X=W.Hidden)===null||X===void 0?void 0:X.valueOf()),true))),enabled:O.NavigationAvailable!==undefined?c(e(b((Y=O.NavigationAvailable)===null||Y===void 0?void 0:Y.valueOf()),true)):true,key:a.generateKeyFromDataField(O),isNavigable:true,press:c(f("._intentBasedNavigation.navigate",[b(O.SemanticObject),b(O.Action),Z])),customData:c({semanticObject:b(O.SemanticObject),action:b(O.Action)})});});J.filter(function(O){return I.indexOf(O===null||O===void 0?void 0:O.Criticality)===-1;}).map(function(O){var Q,R;L.push({type:h.DataFieldForAction,annotationPath:p.getEntitySetBasedAnnotationPath(O.fullyQualifiedName),key:a.generateKeyFromDataField(O),visible:c(n(e(b((Q=O.annotations)===null||Q===void 0?void 0:(R=Q.UI)===null||R===void 0?void 0:R.Hidden),true))),isNavigable:true});});return L;}_.getHeaderDefaultActions=l;function m(p){var q,r,s;var t=p.getEntityType();var u=((q=t.annotations)===null||q===void 0?void 0:(r=q.UI)===null||r===void 0?void 0:(s=r.Identification)===null||s===void 0?void 0:s.filter(function(v){var w,x,y;return(v===null||v===void 0?void 0:(w=v.annotations)===null||w===void 0?void 0:(x=w.UI)===null||x===void 0?void 0:(y=x.Hidden)===null||y===void 0?void 0:y.valueOf())===true;}))||[];return u.map(function(v){return{type:h.Default,key:a.generateKeyFromDataField(v)};});}_.getHiddenHeaderActions=m;function o(v,p){var q,r,s,t,u,w,x;var y=p.getEntitySet();var S=y&&((q=y.annotations)===null||q===void 0?void 0:(r=q.Session)===null||r===void 0?void 0:r.StickySessionSupported),E=y&&(((s=y.annotations.Common)===null||s===void 0?void 0:(t=s.DraftRoot)===null||t===void 0?void 0:t.term)||((u=y.annotations)===null||u===void 0?void 0:(w=u.Session)===null||w===void 0?void 0:(x=w.StickySessionSupported)===null||x===void 0?void 0:x.term)),z=E==="com.sap.vocabularies.Common.v1.DraftRoot"||S&&(S===null||S===void 0?void 0:S.SaveAction),F=v>1,G=E==="com.sap.vocabularies.Common.v1.DraftRoot"||S&&(S===null||S===void 0?void 0:S.DiscardAction);var H=j(p.getEntityType(),true);var J=H.filter(function(L){return I.indexOf(L===null||L===void 0?void 0:L.Criticality)>-1;}).map(function(L){return{type:h.DataFieldForAction,annotationPath:p.getEntitySetBasedAnnotationPath(L.fullyQualifiedName),key:a.generateKeyFromDataField(L),isNavigable:true};});if(z){J.push({type:h.Primary,key:"SaveAction"});}if(F){J.push({type:h.DefaultApply,key:"ApplyAction"});}H.filter(function(L){return I.indexOf(L===null||L===void 0?void 0:L.Criticality)===-1;}).map(function(L){J.push({type:h.DataFieldForAction,annotationPath:p.getEntitySetBasedAnnotationPath(L.fullyQualifiedName),key:a.generateKeyFromDataField(L),isNavigable:true});});if(G){J.push({type:h.Secondary,key:"CancelAction",position:{placement:P.End}});}return J;}_.getFooterDefaultActions=o;return _;},false);
