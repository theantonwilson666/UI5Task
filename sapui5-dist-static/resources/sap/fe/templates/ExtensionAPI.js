/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2020 SAP SE. All rights reserved
    
 */
sap.ui.define(["sap/ui/base/Object","sap/fe/core/CommonUtils","sap/fe/macros/DelegateUtil","sap/base/Log","sap/ui/core/Component"],function(B,C,D,L,a){"use strict";var e=B.extend("sap.fe.templates.ExtensionAPI",{constructor:function(c,i){this._controller=c;this._view=c.getView();this.editFlow._controller=this._controller;this.intentBasedNavigation._controller=this._controller;this._prefix=i;},destroy:function(){delete this._controller;delete this._view;delete this.editFlow._controller;delete this.intentBasedNavigation._controller;},byId:function(i){var c=this._view.byId(i);if(!c&&this._prefix){c=this._view.byId(this._prefix+"--"+i);}if(c){return c;}},getModel:function(m){var A;if(m&&m!=="ui"){A=C.getAppComponent(this._view);if(!A.getManifestEntry("sap.ui5").models[m]){return null;}}return this._view.getModel(m);},addDependent:function(c){this._view.addDependent(c);},removeDependent:function(c){this._view.removeDependent(c);},navigateToTarget:function(t,c){this._controller._routing.navigateToTarget(c,t);},loadFragment:function(s){var t=this;var T=a.getOwnerComponentFor(this._view);var m=this.getModel().getMetaModel(),p={bindingContexts:{"entitySet":m.createBindingContext("/"+T.getEntitySet())},models:{"entitySet":m,metaModel:m},appComponent:C.getAppComponent(this._view)};var o=D.templateControlFragment(s.name,p,{controller:s.controller,isXML:false,id:s.id});o.then(function(f){t.addDependent(f);}).catch(function(E){L.error(E);});return o;},updateAppState:function(){return this._controller.getAppComponent().getAppStateHandler().createAppState();},editFlow:{securedExecution:function(f,p){return this._controller.editFlow.securedExecution(f,p);},invokeAction:function(A,c,p){var _={};_.label=p.label;if(c){_.contexts=c;}else{_.model=this._controller.getView().getModel();}return this._controller.editFlow.invokeAction(A,_);}},intentBasedNavigation:{navigateOutbound:function(o,n){var i=this._controller.getView().getBindingContext("internal");i.setProperty("externalNavigationContext",{"page":false});this._controller._intentBasedNavigation.navigateOutbound(o,n);}}});return e;});
