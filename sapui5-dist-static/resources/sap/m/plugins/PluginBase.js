/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Element"],function(E){"use strict";var P=E.extend("sap.m.plugins.PluginBase",{metadata:{"abstract":true,library:"sap.m",properties:{enabled:{type:"boolean",defaultValue:true}}}});var p={};P.setConfig=function(c,v){var s=(typeof v=="function")?v.getMetadata().getName():P.getMetadata().getName();Object.assign(p[s]=p[s]||{},c);};P.getPlugin=function(c,v){return c.getDependents().find(function(d){return d.isA(v);});};P.prototype.init=function(){this._bIsActive=false;};P.prototype.isActive=function(){return this._bIsActive;};P.prototype.getControl=function(){return this.getParent();};P.prototype.getControlPluginConfig=function(k,d,v,a){var c=this.getControl();if(!c){return d;}var s=this.getMetadata().getName();var C=c.getMetadata().getName();var m=p[s]||{};var b=m[C]||{};var r=function(h){return(typeof h[k]=="function")?h[k].call(h,v,a):h[k];};if(k in b){return r(b);}for(var e in m){if(c.isA(e)&&k in m[e]){return r(m[e]);}}var f=P.getMetadata().getName();var g=p[f]||{};var G=g[C]||{};if(k in G){return r(G);}for(var e in g){if(c.isA(e)&&k in g[e]){return r(g[e]);}}return d;};P.prototype.isApplicable=function(c){return c.isA("sap.ui.core.Control");};P.prototype.onActivate=function(c){};P.prototype.onDeactivate=function(c){};P.prototype.setParent=function(o){var e=this.getEnabled();if(e&&this.getControl()){this._deactivate();}E.prototype.setParent.apply(this,arguments);if(o&&e){if(!this.isApplicable(o)){throw new Error(this+" is not applicable to "+o);}else{this._activate();}}return this;};P.prototype.setEnabled=function(e){var o=this.getEnabled();this.setProperty("enabled",e,true);var n=this.getEnabled();if(n!=o&&this.getControl()){if(n){this._activate();}else{this._deactivate();}}return this;};P.prototype.setProperty=function(s,v,S){S=S||(this.getMetadata().getProperty(s).appData||{}).invalidate===false;return E.prototype.setProperty.call(this,s,v,S);};P.prototype._activate=function(){if(!this.isActive()){this.onActivate(this.getControl());this.getControlPluginConfig("onActivate",undefined,this.getControl(),this);this._bIsActive=true;}};P.prototype._deactivate=function(){if(this.isActive()){this.onDeactivate(this.getControl());this.getControlPluginConfig("onDeactivate",undefined,this.getControl(),this);this._bIsActive=false;}};return P;});
