/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2013 SAP AG. All rights reserved
 */
sap.ui.define(["sap/landvisz/library","sap/landvisz/ConnectionEntity","sap/landvisz/Connector","sap/landvisz/internal/Connection","sap/landvisz/internal/NestedRowField","sap/landvisz/internal/SingleDataContainer","sap/landvisz/libs/lvsvg","sap/landvisz/Option","sap/ui/commons/Button","sap/ui/commons/Label","sap/ui/commons/layout/HorizontalLayout","sap/ui/commons/Image","./LandscapeViewerRenderer","sap/ui/thirdparty/jquery","sap/ui/thirdparty/jqueryui/jquery-ui-core","sap/ui/thirdparty/jqueryui/jquery-ui-widget","sap/ui/thirdparty/jqueryui/jquery-ui-mouse","sap/ui/thirdparty/jqueryui/jquery-ui-draggable","sap/ui/thirdparty/jqueryui/jquery-ui-droppable",],function(l,C,a,b,N,S,c,O,B,L,H,I,d,q){"use strict";var f=l.ConnectionLine;var E=l.EntityCSSSize;var D=l.DependencyType;var g=l.DependencyVisibility;var h=l.OptionType;var m=l.SelectionViewPosition;var n=l.SolutionType;var V=l.ViewType;var o=sap.landvisz.Option.extend("sap.landvisz.LandscapeViewer",{metadata:{library:"sap.landvisz",properties:{defaultDependencyView:{type:"sap.landvisz.DependencyType",group:"Identification",defaultValue:D.NETWORK_VIEW},height:{type:"int",group:"Dimension",defaultValue:null},width:{type:"int",group:"Dimension",defaultValue:null},title:{type:"string",group:"Data",defaultValue:null},networkDependencyLabel:{type:"string",group:"Data",defaultValue:'Network View'},boxDependencyLabel:{type:"string",group:"Data",defaultValue:'Box View'},boxDependencyLevels:{type:"string[]",group:"Data",defaultValue:null},showDependencyNavigator:{type:"boolean",group:"Identification",defaultValue:true},visibleDependency:{type:"sap.landvisz.DependencyVisibility",group:"Identification",defaultValue:g.BOTH},viewType:{type:"sap.landvisz.ViewType",group:"Identification",defaultValue:null},navigationPath:{type:"string",group:"Data",defaultValue:null},hasParent:{type:"boolean",group:"Misc",defaultValue:true},selectionViewPosition:{type:"sap.landvisz.SelectionViewPosition",group:"Identification",defaultValue:m.CENTER},showClose:{type:"boolean",group:"Identification",defaultValue:true},componentViewLabel:{type:"string",group:"Data",defaultValue:'Component View'},deploymentViewLabel:{type:"string",group:"Data",defaultValue:'Deployment View'},solutionOptionType:{type:"sap.landvisz.OptionType",group:"Identification",defaultValue:null},solutionType:{type:"sap.landvisz.SolutionType",group:"Identification",defaultValue:null},showDeploymentTypeSection:{type:"boolean",group:"Identification",defaultValue:false},deploymentOptionsLabel:{type:"string",group:"Data",defaultValue:'Deployment Options :'},deploymentOptionsTooltip:{type:"string",group:"Data",defaultValue:null},componentViewTooltip:{type:"string",group:"Data",defaultValue:null},deploymentViewTooltip:{type:"string",group:"Data",defaultValue:null},closeButtonTooltip:{type:"string",group:"Data",defaultValue:null},plugContentHeight:{type:"int",group:"Misc",defaultValue:0},connectionLine:{type:"sap.landvisz.ConnectionLine",group:"Misc",defaultValue:f.Line}},aggregations:{systems:{type:"sap.landvisz.LandscapeEntity",multiple:true,singularName:"system"},connectionEntities:{type:"sap.landvisz.ConnectionEntity",multiple:true,singularName:"connectionEntity"},connectors:{type:"sap.landvisz.Connector",multiple:true,singularName:"connector"},solutionOptions:{type:"sap.landvisz.Option",multiple:true,singularName:"solutionOption"},plugContent:{type:"sap.ui.core.Control",multiple:false}},events:{close:{},loadSolutionView:{}}}});o.prototype.init=function(){this.initializationDone=false;this.windowHeight=0;this.windowWidth=0;this.connection=b;this.boxModeHeight=90;this.currentView="";this.firstTime=true;this.boxLeftMargine=0;this.boxTopMargine=0;this.hasBoxThirdLevel=false;this.firstTime=true;this.lindkedEntities=[];var e=sap.ui.getCore().getLibraryResourceBundle("sap.landvisz");this.SHOW_ALL_TEXT=e.getText("SHOW_ALL");this.COLLAPSE_TEXT=e.getText("COLLAPSE_EXPLODE_VIEW");this.MAXIMIZE_TEXT=e.getText("MAXIMIZE");this.RESTORE_TEXT=e.getText("RESTORE");this.CLOSE=e.getText("CLOSE");this.srcEntity="";this.currentViewOptionId="";this.currentSolutionView="";this.selectedOptionEntity=null;var w=q(window);if(this.getHeight()&&""!=this.getHeight()){this.windowHeight=this.getHeight();}else{this.windowHeight=w.height();}if(this.getWidth()){this.windowWidth=this.getWidth();}else{this.windowWidth=w.width();}};o.prototype.onwindowresize=function(e){var v=this.$();if(this.getHasParent()==false){var w=q(window);var r=w.width();var i=w.height();this.windowHeight=i;this.windowWidth=r;this.invalidate();}else if(v&&v[0]&&v[0].parentElement){this.windowWidth=v[0].parentElement.clientWidth;this.windowHeight=v[0].parentElement.clientHeight;this.invalidate();}};o.prototype.onclick=function(e){var s=this.getSystems();var i=s[0];var j=this.$("container");var k=i.$();if(this.getViewType()==V.SELECTION_VIEW&&e.srcControl.getTooltip()==this.MAXIMIZE_TEXT){if(e.srcControl.getTooltip()==this.SHOW_ALL_TEXT)i.expVisible=true;j.css({height:this.entityHeight,width:this.entityWidth});i.$("CLVEntityVLayoutContainer").css({"display":"none"});this._animateMaximizeView(i,j);setTimeout(function(){i.$("CLVEntityVLayoutContainer").css({"display":"block"});i.$("CLVEntityVLayoutProperties").css({"display":"block"});},1000);}if(this.getViewType()==V.SELECTION_VIEW&&e.srcControl.getTooltip()==this.RESTORE_TEXT){var p=this.windowWidth-40;var r=this.windowHeight;i.sViewWidth=p;i.sViewHeight=r;i.$("CLVEntityVLayoutContainer").css({"display":"none"});this._animateRestoreView(i,j);setTimeout(function(){i.$("CLVEntityVLayoutContainer").css({"display":"block"});},1000);}if(e.srcControl.getTooltip()==this.SHOW_ALL_TEXT&&i.entityMaximized!=true)this._animateShowAllView(i,j,k);if(e.srcControl.getTooltip()==this.SHOW_ALL_TEXT&&i.entityMaximized==true){i.sViewWidth=p;i.sViewHeight=r;this._animateSelectionView(j);}else if(e.srcControl.getTooltip()==this.COLLAPSE_TEXT&&this.entityMaximized!=true)this._animateCollapseView(j);else if(e.srcControl instanceof S&&i.explodeViewClosed==true)this._animateCollapseView(j);};o.prototype._animateCollapseView=function(e){var p=this.getSelectionViewPosition();if(p==m.CENTER){var i=(this.windowWidth-this.entityWidth)/2;var t=(this.windowHeight-this.entityHeight)/2;}else if(p==m.LEFT){var i=20;var t=20;}else if(p==m.RIGHT){var i=this.windowHeight-this.entityHeight-20;var t=20;}e.animate({width:this.entityWidth,height:this.entityHeight,left:i,top:t,},1000);};o.prototype._animateSelectionView=function(e){var i;var t;var p=this.getSelectionViewPosition();if(p==m.CENTER){i=(this.windowWidth-this.entityWidth)/2;t=(this.windowHeight-this.entityHeight)/2;}else if(p==m.LEFT){i=20;t=20;}else if(p==m.RIGHT){i=this.windowWidth-this.entityWidth-20;t=20;}e.animate({left:i,top:t,},1000);};o.prototype._animateShowAllView=function(s,e,i){var j=this.windowWidth-12;var k=this.windowHeight;s.sViewWidth=j-this.entityWidth;s.sViewHeight=k;s.left=0;s.top=0;i.css({"position":"relative"});e.animate({left:10,top:0,width:j,height:"100%",},1000);var p=q(document.getElementById("SMV"));setTimeout(function(){p.animate({"display":"block"},1000);},1000);};o.prototype._animateMaximizeView=function(s,e){var i=this.windowWidth-40;var j=this.windowHeight-66;s.sViewWidth=i;s.sViewHeight=j;e.animate({left:20,top:20,width:i,height:j},1000);};o.prototype._animateRestoreView=function(s,e){var i=this.windowWidth-40;var j=this.windowHeight;s.sViewWidth=i;s.sViewHeight=j;var p=this.getSelectionViewPosition();var k;var t;if(p==m.CENTER){k=(this.windowWidth-this.entityWidth)/2;t=(this.windowHeight-this.entityHeight)/2;}else if(p==m.LEFT){k=20;t=20;}else if(p==m.RIGHT){k=this.windowHeight-this.entityHeight-20;t=20;}e.animate({left:k,top:t,width:this.entityWidth,height:this.entityHeight},1000);};o.prototype.resetView=function(s,e){var k=this.$("container");if(s.entityMaximized==true){s.entityMaximized=false;setTimeout(function(){s.invalidate();},1000);var p=this.windowWidth-40;var r=this.windowHeight;s.sViewWidth=p;s.sViewHeight=r;var t=this.getSelectionViewPosition();var u;var v;if(t==m.CENTER){u=(this.windowWidth-this.entityWidth)/2;v=(this.windowHeight-this.entityHeight)/2;}else if(t==m.LEFT){u=20;v=20;}else if(t==m.RIGHT){u=this.windowHeight-this.entityHeight-20;v=20;}s.$("CLVEntityVLayoutProperties").css({"display":"none"});k.animate({left:u,top:v,width:this.entityWidth,height:this.entityHeight},1000);setTimeout(function(){s.$("CLVEntityVLayoutProperties").css({"display":"block"});},1000);setTimeout(function(){e.$().click();},1000);}else if(s.expVisible==true){s.entityMaximized=false;s.expVisible=false;s.oHLayoutMiniNavigation.$().css("display","block");s.showMiniNavigation=true;var w;var x=s.getDataContainers();var y;for(var i=0;i<s.dialogArray.length;i++){w=s.dialogArray[i];y=w.getProperties();if(y&&y.length&&y.length>0){for(var j=0;j<y.length;j++){x[i].addAggregation("properties",y[j],false);}}}for(var i=0;i<x.length;i++){if(i!=s.selectedIndex){x[i].visible=true;}}s.nextIcon.setVisible(true);s.previousIcon.setVisible(true);q(document.getElementById("SMV")).hide(700);s.invalidate();var u;var v;var t=this.getSelectionViewPosition();if(t==m.CENTER){u=(this.windowWidth-this.entityWidth)/2;v=(this.windowHeight-this.entityHeight)/2;}else if(t==m.LEFT){u=20;v=20;}else if(t==m.RIGHT){u=this.windowHeight-this.entityHeight-20;v=20;}k.animate({left:u,top:v,},1000);setTimeout(function(){e.$().click();},1000);}else e.$().click();};o.prototype.initControls=function(){var i=this.getId();if(!this.oHLayoutConnectionEntity)this.oHLayoutConnectionEntity=new H(i+"viewerConnectionEntityHLayout");if(!this.oHLayoutOptions)this.oHLayoutOptions=new H(i+"viewerHLayoutOptions");this.entityWidth;this.entityHeight;this.networkViewVisible=false;this.boxViewVisible=false;if(!this.boxViewLabel)this.boxViewLabel=new L(i+"-viewBoxLabel");if(!this.boxViewImg)this.boxViewImg=new I(i+"-viewBoxImg");if(!this.networkViewLabel)this.networkViewLabel=new L(i+"-viewNetworkLabel");if(!this.closeImg)this.closeImg=new I(i+"-closeImg");if(!this.networkViewBtn)this.networkViewBtn=new B(i+"-viewNetworkBtn").addStyleClass("sapLandviszImg");if(!this.boxViewBtn)this.boxViewBtn=new B(i+"-viewBoxBtn").addStyleClass("sapLandviszImg");if(!this.compViewBtn)this.compViewBtn=new B(i+"-viewComponentBtn").addStyleClass("sapLandviszImg");if(!this.depViewBtn)this.depViewBtn=new B(i+"-viewDeployBtn").addStyleClass("sapLandviszImg");if(!this.navigationPathLabel)this.navigationPathLabel=new L(i+"navigationPathLabel");if(!this.deploymentOptionLabel)this.deploymentOptionLabel=new L(i+"deploymentOptionLabel");var s=this.getSystems()[0].getRenderingSize();if(s==E.Small){this.entityWidth=Math.round(22.7*12);this.entityHeight=Math.round(15.8*12);}if(s==E.RegularSmall){this.entityWidth=Math.round(33.7*12);this.entityHeight=Math.round(22.3*12);}if(s==E.Regular){this.entityWidth=Math.round(38.7*12);this.entityHeight=Math.round(24.5*12);}if(s==E.Medium){this.entityWidth=Math.round(43.5*12);this.entityHeight=Math.round(28*12);}if(s==E.Large){this.entityWidth=Math.round(64.5*12);this.entityHeight=Math.round(41.5*12);}this.visibleEntities=[];this.depTypeOptions=new Object();};o.prototype.appendNavigationPath=function(e){var i=this.navigationPathLabel.getText()+"-->"+e;this.setNavigationPath(i);this.navigationPathLabel.setText(i);};o.prototype.onAfterRendering=function(){q(window).unbind("resize",q.proxy(this.onwindowresize,this));q(window).bind("resize",q.proxy(this.onwindowresize,this));if(this.getViewType()==V.SOLUTION_VIEW){var j=this.$("solutionInnerContainer");var k;var p;var r;var t;var s=5;this.innerLeftMargine=j[0].offsetLeft;this.innerTopMargine=j[0].offsetTop;var u=this.getSystems();var k;var v;var w;var x;var y;for(var i=0;i<u.length;i++){k=u[i].$();v=u[i].left;w=u[i].top;x=v+this.innerLeftMargine;y=w+this.innerTopMargine;u[i].left=x;u[i].top=y;k.css({left:x,top:y});}var z=this.getConnectionEntities();var A=0;for(var i=0;i<z.length;i++){k=z[i].$();v=z[i].left;w=z[i].top;x=v+this.innerLeftMargine;y=w+this.innerTopMargine;A=z[i].top;z[i].left=x;z[i].top=y;k.css({left:x,top:y});var F=z[i].$("connectionLabel");var G=z[i].width-68;F.css({"max-width":G,});}if(this.getSolutionType()==n.DEPLOYMENT_VIEW){var J=this.$("deploymentTypeContainer");var K=j[0].offsetWidth;var M=this.entityHeight+90+10;J.css({left:this.innerLeftMargine,top:M,width:K});if(null!=this.selectedOptionEntity){var P=this.depTypeOptions[this.selectedOptionEntity.getId()];if(this.getShowDeploymentTypeSection()==true&&P.length<=0){var Q=j[0].offsetHeight-40;j.css({height:Q});}}}if(this.getSolutionOptionType()==h.ENTITY){var R=this.$("optionContainer");var K=j[0].offsetWidth-10;var T=this.entityHeight+90+10+5;if(this.getSolutionType()==n.DEPLOYMENT_VIEW){T=A;}if(this.getShowDeploymentTypeSection()==true)T=T+40;R.css({left:this.innerLeftMargine+5,top:T,width:K});}if(this.getSolutionType()==n.COMPONENT_VIEW){this.compViewBtn.addStyleClass("selectedView");this.depViewBtn.removeStyleClass("selectedView");}else if(this.getSolutionType()==n.DEPLOYMENT_VIEW){this.depViewBtn.addStyleClass("selectedView");this.compViewBtn.removeStyleClass("selectedView");}}else if(this.getViewType()==V.SELECTION_VIEW){var U=this.$("container");var u=this.getSystems();var W=u[0];var X=u[0].$();if(u[0].entityMaximized==true)this._animateMaximizeView(W,U);else if(u[0].expVisible==true){var Y=this.windowWidth-12;var Z=this.windowHeight;W.sViewWidth=Y-this.entityWidth;W.sViewHeight=Z;X.css({"position":"relative"});U.css({left:10,top:0,width:Y,height:"100%",});var $=q(document.getElementById("SMV"));setTimeout(function(){$.css({"display":"block"},1000);},1000);}else this._animateSelectionView(U);}else if(this.getViewType()==V.DEPENDENCY_VIEW&&this.currentView==D.NETWORK_VIEW){var _=this.$("boxViewContainer");this.boxLeftMargine=_[0].offsetLeft;this.boxTopMargine=_[0].offsetTop;_.css("display","none");var a1=this.getBoxDependencyLevels();if(a1){for(var i=0;i<a1.length;i++){var b1=this.$("boxViewLabel"+i);b1.css("display","none");}}var c1=this.$("viewContainer");var d1=c1[0].scrollWidth-10;var e1=c1[0].scrollHeight-10;this.svgForConnections=c.getSVG(d1,e1,this.getId()+"-viewContainer");this.connection=b;this.connection.svgForConnections=this.svgForConnections;this.connection.renderConnections(this.getSystems(),this.getConnectionEntities(),this.getConnectionLine());}else if(this.getViewType()==V.DEPENDENCY_VIEW&&this.currentView==D.BOX_VIEW){var _=this.$("boxViewContainer");var k;var p;var r;var t;var s=5;this.boxLeftMargine=_[0].offsetLeft;this.boxTopMargine=_[0].offsetTop;var f1=30;var g1=this.entityHeight;var u=this.getSystems();var k;var v;var w;var x;var y;for(var i=0;i<u.length;i++){k=u[i].$();v=u[i].left;w=u[i].top;x=v+this.boxLeftMargine;y=w+this.boxTopMargine;u[i].left=x;u[i].top=y;k.css({left:x,top:y});}var z=this.getConnectionEntities();for(var i=0;i<z.length;i++){k=z[i].$();v=z[i].left;w=z[i].top;x=v+this.boxLeftMargine;y=w+this.boxTopMargine;z[i].left=x;z[i].top=y;k.css({left:x,top:y});}var h1=this.boxLeftMargine+s;var i1=this.boxModeHeight+(s*2)+this.boxTopMargine;var a1=this.getBoxDependencyLevels();var j1="Systems";var k1="Systems";var l1=this;if(a1){setTimeout(function(){for(var i=0;i<a1.length;i++){if(l1.hasBoxThirdLevel==true){var b1=l1.$("boxViewLabel"+i);i1+=((l1.entityHeight+s)*i);b1.css({left:h1,top:i1,width:f1,height:g1,display:"block"});var e=l1.$("boxViewLabel"+i+"Level");e.css({width:g1,height:g1,});}}},1000);}}if(this.getViewType()==V.DEPENDENCY_VIEW&&this.currentView==D.NETWORK_VIEW){this.networkViewBtn.addStyleClass("selectedView");this.boxViewBtn.removeStyleClass("selectedView");}if(this.getViewType()==V.DEPENDENCY_VIEW&&this.currentView==D.BOX_VIEW){this.boxViewBtn.addStyleClass("selectedView");this.networkViewBtn.removeStyleClass("selectedView");}if(this.getViewType()==V.DEPENDENCY_VIEW){var m1=q.ui?q.ui.version||"pre 1.6":'jQuery-UI not detected';var U=this.$("viewContainer");var n1=this.$("navigation");var l1=this;var U=this.$("viewContainer");var o1=Number(U[0].scrollHeight);var p1=Number(U[0].scrollWidth);var q1=Number(U.height());var r1=Number(U.width());if((p1>r1)||(o1>q1)){if(n1.css('display')=='none'){n1.show(0);l1.getVisibleRegion(0);n1.hide(0);}else{l1.getVisibleRegion(0);}}else n1.hide(0);var s1=this.$("navigation_navigator");var l1=this;s1.bind('drag',function(e){l1.calculateNavigationMovement(U,s1);});s1.draggable({containment:n1});var t1=this.$("navigation_header_arrowdown");var u1=this.$("navigation_header_arrowup");t1.show();t1.click(function(e){n1.animate({height:'0px'},1000,"swing",function(e){s1.hide();});t1.hide();u1.show();e.stopPropagation();});u1.click(function(e){n1.animate({height:'29%'},1000,"swing");u1.hide();t1.show();s1.show();e.stopPropagation();});n1.bind('drag');n1.draggable({cancel:"div.navigationHeader",containment:U});}};o.prototype.calculateNavigationMovement=function(e,j){var k=e.height()/j.height();var w=e.width()/j.width();e.scrollTop((j.css('top').split('px')[0])*k);e.scrollLeft((j.css('left').split('px')[0])*w);var p=this.getConnectionEntities();for(var i=0;i<p.length;i++){if(this.getVisibleDependency()==g.BOTH&&this.currentView==D.NETWORK_VIEW){if(p[i].toolPopup.isOpen())p[i].toolPopup.close();}}};o.prototype.getVisibleRegion=function(){var i=this.$("viewContainer");var j=this.$("navigation");var k=this.$("navigation_navigator");j.css({height:'29%'});setTimeout(function(){c.convertHtmltoCanvas(i,j);},1000);j.hide();setTimeout(function(){j.show("slow");j.animate({height:'29%'},100,"swing",function(e){k.show("slow");});var p=Number(i[0].scrollHeight);var r=Number(i[0].scrollWidth);var s=Number(i.height());var t=Number(i.width());var u=s/p;var w=t/r;setTimeout(function(){var e=Number(j[0].scrollHeight);var v=Number(j[0].scrollWidth);k.height(e*u);k.width(v*w);k.show();k.css({left:0,top:0});},1500);},1000);};o.prototype.onmouseenter=function(e){var s=e.oSource;var p=e.target;var r;var t;var u=false;var v=false;var w=0;for(var i=0;i<this.getConnectionEntities().length;i++){if(this.getConnectionEntities()[i].holdDisplay==true){v=true;w++;}}if((!v)||(w>1)){if(s instanceof C){this.lindkedEntities=[];var x=this.getConnectionEntities();for(var i=0;i<x.length;i++){if(s.getId()!=x[i].getId()){q(document.getElementById(x[i].getId()+"connectionRow")).css({"box-shadow":"none"});x[i].holdDisplay=false;x[i].toolPopup.close();}else{q(document.getElementById(x[i].getId()+"connectionRow")).css({"box-shadow":"rgb(0, 0, 0) 0px 0px 20px"});}}r=this.getConnectors();for(var i=0;i<r.length;i++){if(r[i].getSource()==s.getConnectionId())this.lindkedEntities.push(r[i].getTarget());if(r[i].getTarget()==s.getConnectionId())this.lindkedEntities.push(r[i].getSource());}t=this.getSystems();var y;var z;for(var i=0;i<t.length;i++){y=false;for(var j=0;j<this.lindkedEntities.length;j++){if(t[i].getSystemId()==this.lindkedEntities[j]){y=true;if(s.getLinkedHeader()&&""!=s.getLinkedHeader()){u=false;for(var k=0;k<t[i].propertyHeaders.length;k++){z=t[i].propertyHeaders[k];if(s.getLinkedHeader()==z.getHeader()){if(z.getSelected()!=true){z.setSelected(true);t[i].selectedIndex=k;u=true;}else{t[i].selectedIndex=k;this.filterOverlay(t[i],s.getLinkId());t[i].$("innerOverlay").css({"display":"block"});t[i].$("overlay").css({"display":"block"});}}else t[i].propertyHeaders[k].setSelected(false);t[i].showOverlay=false;t[i].overlayFilter="";}if(u==true&&t[i].showOverlay==false){t[i].showOverlay=true;t[i].overlayFilter=s.getLinkId();t[i].invalidate();}}}}if(y==false){if(t[i].showOverlay==true)t[i].invalidate();else{t[i].$("innerOverlay").css({"display":"none"});t[i].$("overlay").css({"display":"none"});}t[i].showOverlay=false;t[i].overlayFilter="";}}}}};o.prototype.filterOverlay=function(s,e){var i=s.oVLayoutOverlay.getContent();var r;var p;for(var j=0;j<i.length;j++){r=i[j];if(r instanceof N){p=r.getLinearRows();for(var k=0;k<p.length;k++){if(e==p[k].getLinkSource()){r.$().css({display:"block",});p[k].$().css({display:"block",});}else{r.$().css({display:"none",});p[k].$().css({display:"none",});}}}else{if(e==r.getLinkSource()){r.$().css({display:"block",});}else{r.$().css({display:"none",});}}}};o.prototype.showAllOverlay=function(s,e){var i=s.oVLayoutOverlay.getContent();var r;for(var j=0;j<i.length;j++){r=i[j];r.$().css({display:"block",});}};o.prototype.showOverlay=function(i,e){q(document.getElementById(i+"-overlay")).css({display:e,});q(document.getElementById(i+"-innerOverlay")).css({display:e,});};o.prototype.onmouseleave=function(e){var s=e.oSource;var k=e.target;this.lindkedEntities=[];var p;var r;var t=false;var u=false;var v=0;for(var i=0;i<this.getConnectionEntities().length;i++){if(this.getConnectionEntities()[i].holdDisplay==true){u=true;v++;}}if(!(u&&v<2)){if(s instanceof C){if(s.holdDisplay!=true){q(document.getElementById(s.getId()+"connectionRow")).css({"box-shadow":"none"});p=this.getConnectors();for(var i=0;i<p.length;i++){if(p[i].getSource()==s.getConnectionId())this.lindkedEntities.push(p[i].getTarget());if(p[i].getTarget()==s.getConnectionId())this.lindkedEntities.push(p[i].getSource());}r=this.getSystems();for(var i=0;i<r.length;i++){for(var j=0;j<this.lindkedEntities.length;j++){if(r[i].getSystemId()==this.lindkedEntities[j]){r[i].$("innerOverlay").css({"display":"none"});r[i].$("overlay").css({"display":"none"});r[i].showOverlay=false;r[i].overlayFilter="";}}}}}}};o.prototype.getCurrentSolutionView=function(){return this.currentSolutionView;};o.prototype.getCurrentDependencyView=function(){return this.currentView;};o.prototype.setEnableLoadSolution=function(e){if(e==false){this.compViewBtn.addStyleClass("sapLandviszBtnDisable");this.depViewBtn.addStyleClass("sapLandviszBtnDisable");}else if(e==true){this.compViewBtn.removeStyleClass("sapLandviszBtnDisable");this.depViewBtn.removeStyleClass("sapLandviszBtnDisable");}this.compViewBtn.setEnabled(e);this.depViewBtn.setEnabled(e);};o.prototype.getSelectedOption=function(){return this.selectedOptionEntity;};o.prototype.onfocusout=function(e){this.compViewBtn};o.prototype.fetchSelectedOption=function(){return this.selectedOptionEntity;};o.prototype.exit=function(){q(window).unbind("resize",q.proxy(this.onwindowresize,this));};o.prototype.getViewConnectedLayout=function(){var e;var s;var j;var s;var k=this.getConnectors();j=this.oHLayoutOptions.getContent();for(var y=1;y<j.length;y++){if(j[y].getSelected()==true){s=j[y].getOptionSources();break;}}var p=k[0].getSource();var r=[];var t;var u;for(var i=0;i<s.length;i++){t=new a();u=s[i].getSource();t.setSource(p);t.setTarget(u);r.push(t);}e=this.connection.getBoxViewConnectedNodesLayout(r);return e;};o.prototype.getEntityConnectedLayout=function(){var e;var j;var k=this.getConnectors();var p;var r=[];for(var i=0;i<k.length;i++){p=this.getOptionConnector(k[i]);if(""!==p)r.push(p);else r.push(k[i]);}e=this.connection.getBoxViewConnectedNodesLayout(r);return e;};o.prototype.getOptionConnector=function(e){var i=this.getSolutionOptions();var j;var s;var k;var p;for(var x=0;x<i.length;x++){if(i[x].getCurrentEntity()==e.getTarget()){j=i[x].getOptionEntities();for(var y=0;y<j.length;y++){p=j[y].getOptionSources()[0].getSource();if(j[y].getSelected()==true&&p!=e.getTarget()){k=new a();k.setSource(e.getSource());j[y].getOptionSources()[0].getSource();k.setTarget(j[y].getOptionSources()[0].getSource());this.srcEntity=p;return k;}}}}return"";};o.prototype.setHeight=function(e){var w=q(window);if(e&&""!=e)this.windowHeight=e;else this.windowHeight=w.height();};o.prototype.setWidth=function(w){var e=q(window);if(w&&""!=w){this.windowWidth=w;}else{this.windowWidth=e.width();}};return o;});
