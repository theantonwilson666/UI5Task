/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2013 SAP AG. All rights reserved
 */
sap.ui.define(["sap/landvisz/library","sap/landvisz/internal/DataContainer","sap/landvisz/internal/HeaderList","sap/landvisz/internal/LinearRowField","sap/landvisz/internal/NestedRowField","sap/landvisz/internal/SingleDataContainer","sap/landvisz/internal/TreeField","sap/landvisz/LongTextField","sap/ui/core/Control","sap/ui/commons/Button","sap/ui/commons/Label"],function(a,D,H,L,N,S,T,b,C,B,c){"use strict";var E=a.EntityCSSSize;var d=a.LandscapeObject;var V=a.ViewType;var e={};e.render=function(r,o){var f=o.getRenderingSize();if(!this.initializationDone){o.initControls();o.initializationDone=true;r.write("<div");r.addClass("sapLandviszLandscapeEntity");r.writeClasses();r.writeControlData(o);if(o.expVisible==true){r.addStyle("width","100%");r.addStyle("height","100%");}if(this.left!=0)r.addStyle("left",o.left+"px");if(this.top!=0)r.addStyle("top",o.top+"px");if(o.entityMaximized==true){if(o.sViewWidth!=0)r.addStyle("width",o.sViewWidth+"px");if(o.sViewHeight!=0)r.addStyle("height",o.sViewHeight+"px");}if(o.viewType==V.DEPENDENCY_VIEW||o.viewType==V.SOLUTION_VIEW)r.addStyle("position","absolute");else r.addStyle("position","relative");r.writeStyles();r.write(">");this._renderModelingStatus(r,o);this._renderActionBar(r,o);this._renderSystemEntity(r,o);r.write("</div>");r.write("</div>");r.write("</div>");var g=o.oHeadersLayout.getContent();if(g.length>0){for(var i=0;i<g.length-2;i++)o.addAggregation("dataContainers",g[i],false);}if(o.getDataContainers()&&o.getDataContainers().length>0){var h=o.oVLayoutProperties.getContent();var k=o.propertyHeaders[o.selectedIndex];for(var i=0;i<h.length;i++){k.addAggregation("properties",h[i],false);}}if(o.expVisible==true){this._renderUnselectedHeaderPopup(r,o);}if(o.getDataContainers()&&o.getDataContainers().length>0){var l=o.getDataContainers();var k;var m;for(var i=0;i<l.length;i++){k=l[i];m=false;for(var j=0;j<o.dialogArray.length;j++){if(o.dialogArray[j].getHeader()==k.getHeader()){m=true;break;}}if(m==false){o.smvContainer=new S(o.getId()+i+"CLVSMVSection");o.smvContainer.setHeader(k.getHeader());o.dialogArray.push(o.smvContainer);}}}o.firstTime=false;this._renderOverlayContainer(r,o);r.write("</div>");var n=o.oHLayoutAction.getContent();for(var j=n.length-1;j>=0;j--){o.addAggregation("actionBar",n[j],false);}o.containerEvent=false;}};e._renderModelingStatus=function(r,o){var f=o.getRenderingSize();r.write("<div");o.modelStatus.entityMaximized=o.entityMaximized;if(o.entityMaximized!=true){if(f==E.Small)r.addClass("sapLandviszStatusSmallSize");else if(f==E.RegularSmall)r.addClass("sapLandviszStatusRegularSmallSize");else if(f==E.Regular)r.addClass("sapLandviszStatusRegularSize");else if(f==E.Medium)r.addClass("sapLandviszStatusMediumSize");else if(f==E.Large)r.addClass("sapLandviszStatusLargeSize");}else{r.addClass("sapLandviszStatusMaximizeSize");}r.writeClasses();r.write(">");o.modelStatus.setStatus(o.getSystemStatus());o.modelStatus.setStatusTooltip(o.getStatusTooltip());o.modelStatus.setStateIconSrc(o.getStateIconSrc());o.modelStatus.setStateIconTooltip(o.getStateIconTooltip());if(o.getEntityStatus())o.modelStatus.statusImage=o.getEntityStatus();o.modelStatus.renderSize=f;if(o.firstTime==true){o.modelStatus.attachEvent("statusSelected",function(g){o.fireStatusSelect();});}r.renderControl(o.modelStatus);};e._renderActionBar=function(r,o){var f=o.getRenderingSize();var s=o.getShowCustomActions();var g=o.getShowEntityActions();r.write("<div");if(o.entityMaximized!=true){r.addClass("sapLandviszActionBarSizeCommon");if(f==E.Small){r.addClass("sapLandviszActionBarSmallSize");o.oVLayoutProperties.addStyleClass("sapLandviszSmallSizesPropertySection");o.oVLayoutProperties.removeStyleClass("sapLandviszMaximizePropertySection");o._imgFolderPath="16x16/";o.restore=false;}else if(f==E.RegularSmall){r.addClass("sapLandviszActionBarRegularSmallSize");o.oVLayoutProperties.addStyleClass("sapLandviszRegularSmallSizesPropertySection");o.oVLayoutProperties.removeStyleClass("sapLandviszMaximizePropertySection");o._imgFolderPath="16x16/";o.restore=false;}else if(f==E.Regular){r.addClass("sapLandviszActionBarRegularSize");o.oVLayoutProperties.addStyleClass("sapLandviszRegularSizesPropertySection");o.oVLayoutProperties.removeStyleClass("sapLandviszMaximizePropertySection");o._imgFolderPath="16x16/";o.restore=false;}else if(f==E.Medium){r.addClass("sapLandviszActionBarMediumSize");o.oVLayoutProperties.addStyleClass("sapLandviszMediumSizesPropertySection");o.oVLayoutProperties.removeStyleClass("sapLandviszMaximizePropertySection");o.restore=false;o._imgFolderPath="16x16/";}else if(f==E.Large){r.addClass("sapLandviszActionBarLargeSize");o.oVLayoutProperties.addStyleClass("sapLandviszLargeSizesPropertySection");o.oVLayoutProperties.removeStyleClass("sapLandviszMaximizePropertySection");o.restore=true;o._imgFolderPath="24x24/";}if(o.expVisible==true){if(f==E.Regular){o.oVLayoutProperties.addStyleClass("sapLandviszRegularSizesPropertySectionSmv");o.oVLayoutProperties.removeStyleClass("sapLandviszRegularSmallSizesPropertySectionSmv");}else if(f==E.RegularSmall){o.oVLayoutProperties.addStyleClass("sapLandviszRegularSmallSizesPropertySectionSmv");o.oVLayoutProperties.removeStyleClass("sapLandviszRegularSizesPropertySectionSmv");o.oVLayoutProperties.removeStyleClass("sapLandviszMaximizePropertySection");if(o.explodeViewClosed==true)o.oVLayoutProperties.addStyleClass("sapLandviszRegularSmallSizesPropertySection");else o.oVLayoutProperties.removeStyleClass("sapLandviszRegularSmallSizesPropertySection");}}else{o.oVLayoutProperties.removeStyleClass("sapLandviszRegularSizesPropertySectionSmv");}}if(o.entityMaximized==true){var m=o.sViewWidth-30;r.addStyle("width",m+"px");r.addClass("sapLandviszActionBarMaximizeSize");o.oVLayoutProperties.addStyleClass("sapLandviszMaximizePropertySection");o.oVLayoutProperties.addStyleClass("sapLandviszMaximizePropertySection");if(f==E.Large)o.oVLayoutProperties.removeStyleClass("sapLandviszLargeSizesPropertySection");else if(f==E.Small)o.oVLayoutProperties.removeStyleClass("sapLandviszSmallSizesPropertySection");else if(f==E.RegularSmall)o.oVLayoutProperties.removeStyleClass("sapLandviszRegularSmallSizesPropertySection");else if(f==E.Regular)o.oVLayoutProperties.removeStyleClass("sapLandviszRegularSizesPropertySection");else if(f==E.Medium)o.oVLayoutProperties.removeStyleClass("sapLandviszMediumSizesPropertySection");o.oVLayoutProperties.removeStyleClass("sapLandviszRegularSmallSizesPropertySectionSmv");o.restore=true;o._imgFolderPath="24x24/";}r.writeStyles();r.writeClasses();r.write(">");if(s==true)this._renderCustomActionRegion(r,o);o.oHLayoutAllAction.addContent(o.oHLayoutAction);if(g==true)this._renderEntityAction(r,o);if(o.entityMaximized==true){o.oHLayoutAllAction.addStyleClass("sapLandviszAllActionLayoutMaximize");o.oHLayoutAllAction.removeStyleClass("sapLandviszAllActionLayout");}else{o.oHLayoutAllAction.addStyleClass("sapLandviszAllActionLayout");o.oHLayoutAllAction.removeStyleClass("sapLandviszAllActionLayoutMaximize");}r.renderControl(o.oHLayoutAllAction);};e._renderSystemEntity=function(r,o){var f=o.getRenderingSize();r.write("<div");if(o.entityMaximized!=true){if(f==E.Small){r.addClass("sapLandviszLandscapeEntitySmallSize");o.containerWidth=21;}else if(f==E.RegularSmall){r.addClass("sapLandviszLandscapeEntityRegularSmallSize");o.containerWidth=31.5;}else if(f==E.Regular){r.addClass("sapLandviszLandscapeEntityRegularSize");o.containerWidth=36.5;}else if(f==E.Medium){r.addClass("sapLandviszLandscapeEntityMediumSize");o.containerWidth=41;}else if(f==E.Large){r.addClass("sapLandviszLandscapeEntityLargeSize");o.containerWidth=62;}}else if(o.entityMaximized==true){r.addClass("sapLandviszLandscapeEntityMaximizedSize");r.write(" style='");var g;var h;if(o.sViewWidth!=0){g=o.sViewWidth-30;r.write("width:"+g+"px;");}if(o.sViewHeight!=0){h=o.sViewHeight-32;r.write("height:"+h+"px;");}r.write("position:absolute;");r.write("'");}r.writeClasses();r.write(">");if(o.getType()==d.Track){this._renderTrack(r,o);}else{this._renderIdentificationBar(r,o);this._renderDataEntityRegion(r,o);}r.renderControl(o.oHLayout);};e._renderTrack=function(r,o){r.write("<div");r.addClass("trackEntity");r.writeClasses();r.write(">");r.write("<div");r.addClass("trackLogo");r.writeClasses();r.write(">");r.write("</div>");r.write("<div");r.addClass("trackName");r.writeClasses();r.write(">"+o.getSystemName());r.write("</div>");r.write("<div");r.addClass("trackFooter");r.writeClasses();r.write("> "+o.getTrackSystemCount());r.write("</div>");r.renderControl(o.infoIcon);r.write("</div>");};e._renderIdentificationBar=function(r,o){var i=o.getId();if(o.entityMaximized==true){o.oIdnBar.entityMaximized=o.entityMaximized;o.oIdnBar.maxHeight=o.sViewHeight-32;}else o.oIdnBar.entityMaximized=false;o.oIdnBar.setText(o.getSystemName());o.oIdnBar.setTooltip(o.getTooltip());o.oIdnBar.setType(o.getType());o.oIdnBar.setQualifierText(o.getQualifierText());o.oIdnBar.setQualifierTooltip(o.getQualifierTooltip());o.oIdnBar.setQualifierType(o.getQualifierType());o.oIdnBar.setRenderingSize(o.getRenderingSize());o.oIdnBar.setDefaultState(o.getDefaultState());o.oIdnBar.setDescription(o.getDescription());o.oIdnBar.setComponentType(o.getComponentType());o.oVLayout.addContent(o.oIdnBar);o.oHLayout.addContent(o.oVLayout);};e._renderDataEntityRegion=function(r,o){o.propertyHeaders=o.getDataContainers();if(o.propertyHeaders.length>0)this._renderTabContainers(r,o);else if(!o.propertyHeaders||o.propertyHeaders.length<1){o.propertyHeaders=o.getDataContainers();if(o.propertyHeaders&&o.propertyHeaders.length>0)this._renderContainerData(r,o);else if(o.propertyHeaders)this._renderSingleContainerData(r,o);}o.oVLayoutContainer.addContent(o.oVLayoutProperties);if(o.display=="block"){o.oVLayoutContainer.addStyleClass("sapLandviszDisplayBlock");o.oVLayoutContainer.removeStyleClass("sapLandviszDisplayNone");}else{o.oVLayoutContainer.addStyleClass("sapLandviszDisplayNone");o.oVLayoutContainer.removeStyleClass("sapLandviszDisplayBlock");}o.oHLayout.addContent(o.oVLayoutContainer);};e._findContainerProperties=function(k,o,r){for(var i=0;i<o.propertyHeaders.length;i++){if(k==o.propertyHeaders[i].header){o.propertyHeaders[i].selected=true;o.selectedIndex=i;this._renderDataContainerProperties(r,o,o.propertyHeaders[i].properties,"");}else o.propertyHeaders[i].selected=false;}};e._findContainerAggregationProperties=function(k,o,r){for(var i=0;i<o.propertyHeaders.length;i++){if(k==o.propertyHeaders[i].getHeader()){o.propertyHeaders[i].setSelected(true);o.selectedIndex=i;}else o.propertyHeaders[i].setSelected(false);}};e._renderSingleContainerData=function(r,o){var f=o.getDataContainers();var g=o.getId();o.dataContainer=new D(g+"-CLVEntityDataContainer");o.dataContainer.setHeader(f.header);o.dataContainer.setSelected(f.selected);var p=f.properties;this._setPropertiesAggregation(r,o,p,f.header);o.addAggregation("dataContainers",o.dataContainer,false);o.propertyHeaders=o.getDataContainers();this._renderContainerAggregation(r,o);};e._setPropertiesAggregation=function(r,o,p,h){var i;var f=o.getId();if(p&&p.length&&p.length>0){for(var j=0;j<p.length;j++){i=f+j+h+"-CLVRowField";o.dataContainer.addAggregation("properties",p[j],false);}}else if(p instanceof C){i=f+h+"-CLVRowField";o.dataContainer.addAggregation("properties",p,false);}};e._renderContainerData=function(r,o){var f=o.getId();o.isAggregated=false;this._setContainerRenderingSize(o);var s;var g;var p;var h;for(var i=0;i<o.propertyHeaders.length;i++){o.dataContainer=new D(f+i+"-CLVEntityDataContainer");g=o.propertyHeaders[i];o.dataContainer.setHeader(g.header);o.dataContainer.setSelected(g.selected);p=g.properties;this._setPropertiesAggregation(r,o,p,g.header);o.addAggregation("dataContainers",o.dataContainer,false);}o.propertyHeaders=o.getDataContainers();this._renderTabContainers(r,o);};e._makeOtherContainerUnselected=function(o,f){for(var i=0;i<f;i++)o.propertyHeaders[i].setSelected(false);};e._renderTabContainers=function(r,o){var f=o.getId();var s;o.isAggregated=true;var g;this._setContainerRenderingSize(o);for(var i=0;i<o.propertyHeaders.length;i++){o.dataContainer=o.propertyHeaders[i];o.dataContainer.setRenderingSize(o.getRenderingSize());o.dataContainer.setType(o.getType());if(i==0)o.dataContainer.setSelected(true);s=o.dataContainer.getSelected();if(s==true){g=o.dataContainer;o.selectedIndex=i;this._makeOtherContainerUnselected(o,i);}if(o.showMiniNavigation==true&&o.propertyHeaders.length>1){this._createMiniNavigation(r,o,o.dataContainer.getHeader(),o.dataContainer.getSelected());if(i+1==o.propertyHeaders.length){o.oHLayoutMiniNavigation.addStyleClass("sapLandviszMiniNavigationVisible");o.oHLayoutMiniNavigation.removeStyleClass("sapLandviszMiniNavigationHidden");}}else{o.oHLayoutMiniNavigation.addStyleClass("sapLandviszMiniNavigationHidden");o.oHLayoutMiniNavigation.removeStyleClass("sapLandviszMiniNavigationVisible");}o.oVLayoutContainer.addContent(o.oHLayoutMiniNavigation);o.oHeadersLayout.addContent(o.dataContainer);var t=this;if(o.dataContainer.hasChangeEvent==false){o.dataContainer.attachEvent("itemsChanged",function(j){o.oVLayoutProperties.removeAllContent();var k=j.oSource.getHeader();t._findContainerAggregationProperties(k,o,r);t._selectMiniNavigationButton(o,r,k);o.containerEvent=true;o.invalidate();},this);}}o.dataContainer.hasChangeEvent=true;o.oHeadersLayout.addContent(o.previousIcon);o.oHeadersLayout.addContent(o.nextIcon);if(o.containerEvent==false)this._setVisibleTabs(r,o);this._enableNextAndPrevious(r,o,o.selectedIndex);o.oVLayoutContainer.addContent(o.oHeadersLayout);o.oSingleHeaderLabel.setText(g.getHeader());o.oSingleHeaderLabel.setTooltip(g.getHeader());o.oSingleHeaderLabel.addStyleClass("sapLandviszSingleLabelHeaderWidth");o.oSingleHeaderLayout.addContent(o.oSingleHeaderLabel);o.oVLayoutContainer.addContent(o.oSingleHeaderLayout);if(o.expVisible==false&&o.oHeadersLayout.getContent().length>3){o.oHeadersLayout.removeStyleClass("sapLandviszDisplayNone");o.oSingleHeaderLayout.addStyleClass("sapLandviszDisplayNone");o.oSingleHeaderLayout.removeStyleClass("sapLandviszDisplayBlock");o.oVLayoutProperties.removeStyleClass("sapLandviszRegularSizesPropertySectionSmv");}else{if(o.expVisible==true)o.oSingleHeaderLayout.addStyleClass("singleHeaderExplodeView");o.oSingleHeaderLayout.addStyleClass("singleHeader");o.oHeadersLayout.addStyleClass("sapLandviszDisplayNone");o.oHeadersLayout.removeStyleClass("sapLandviszDisplayBlock");o.oSingleHeaderLayout.addStyleClass("sapLandviszDisplayBlock");o.oSingleHeaderLayout.removeStyleClass("sapLandviszDisplayNone");if(o.getRenderingSize()==E.Small)o.oVLayoutProperties.addStyleClass("sapLandviszSmallSizesPropertySectionSmv");else if(o.getRenderingSize()==E.Regular)o.oVLayoutProperties.addStyleClass("sapLandviszRegularSizesPropertySectionSmv");else if(o.getRenderingSize()==E.RegularSmall)o.oVLayoutProperties.addStyleClass("sapLandviszRegularSmallSizesPropertySectionSmv");if(o.getType()==d.TechnicalSystem)o.oSingleHeaderLayout.addStyleClass("sapLandviszTechnicalSystem");else if(o.getType()==d.ProductSystem)o.oSingleHeaderLayout.addStyleClass("sapLandviszProductSystem");else if(o.getType()==d.SapComponent)o.oSingleHeaderLayout.addStyleClass("sapLandviszSapComponent");}if(o.expVisible==false&&o.getRenderingSize()==E.RegularSmall){o.oVLayoutProperties.removeStyleClass("sapLandviszRegularSizesPropertySectionSmv");}if(o.explodeViewClosed==true&&o.getRenderingSize()==E.RegularSmall&&o.oHeadersLayout.getContent().length>3){o.oVLayoutProperties.removeStyleClass("sapLandviszRegularSmallSizesPropertySectionSmv");o.oVLayoutProperties.addStyleClass("sapLandviszRegularSmallSizesPropertySection");}if(o.explodeViewClosed==true&&o.getRenderingSize()==E.Small&&o.oHeadersLayout.getContent().length>3){o.oVLayoutProperties.removeStyleClass("sapLandviszSmallSizesPropertySectionSmv");o.oVLayoutProperties.addStyleClass("sapLandviszSmallSizesPropertySection");}if(o.expVisible==true&&o.getRenderingSize()==E.RegularSmall){o.oVLayoutProperties.addStyleClass("sapLandviszRegularSmallSizesPropertySectionSmv");}var t=this;var m=o.oHLayoutMiniNavigation.getContent();if(m.length>0){var h=o.oHeadersLayout.getContent();for(var i=0;i<h.length-2;i++){if(h[i].inDisplay==true&&h[i].getSelected()==true)m[i].setSelected(true);else if(h[i].inDisplay==true)m[i].inDisplay=true;else m[i].inDisplay=false;}m[o.selectedIndex].setSelected(true);}this._renderDataContainerProperties(r,o,g.getProperties(),g.getHeader());};e._setVisibleTabs=function(r,o){var f=o.getRenderingSize();var s=false;if(o.entityMaximized!=true){if(f==E.Small){if(o.propertyHeaders.length>1)o.visibleTabCount=1;else s=true;}else if(f==E.RegularSmall){if(o.propertyHeaders.length>2)o.visibleTabCount=2;else s=true;}else if(f==E.Regular){if(o.propertyHeaders.length>2)o.visibleTabCount=2;else s=true;}else if(f==E.Medium){if(o.propertyHeaders.length>2)o.visibleTabCount=2;else s=true;}else if(f==E.Large){if(o.propertyHeaders.length>4)o.visibleTabCount=4;else s=true;}}else if(o.entityMaximized==true){var g=Math.floor(o.containerWidth/148);if(o.propertyHeaders.length>g)o.visibleTabCount=g;else s=true;}var t=o.oHeadersLayout.getContent();if(s){var h=o.containerWidth/(t.length-2);if(o.entityMaximized!=true)h=(h*12);h=Math.round(h)-2;for(var i=0;i<t.length;i++){if(i>t.length-3){t[i].inDisplay=false;}else{t[i].width=h+"px";t[i].inDisplay=true;}}}else{var m;var v;var h;var n=0;var p;if(o.visibleTabCount<o.propertyHeaders.length){v=o.visibleTabCount;if(o.entityMaximized!=true)h=o.containerWidth*12;else h=o.containerWidth;h=h-46;h=Math.round((h/o.visibleTabCount)-2);}else v=o.propertyHeaders.length;if(o.previousClicked==true){for(var i=0;i<t.length;i++){if(i>t.length-3){t[i].inDisplay=true;}else{p=t[i].getSelected();if(p==true){n=i-1;m=i;}else{t[i].inDisplay=false;}t[i].width=h+"px";}}v=o.visibleTabCount;if(n>=0){for(var k=n;k>=0;k--){t[k].inDisplay=true;v--}}for(var l=0;l<v;l++){t[l+m].inDisplay=true;}}else{for(var i=0;i<t.length;i++){if(i>t.length-3){t[i].inDisplay=true;}else{p=t[i].getSelected();if(p==true){n=t.length-3-i;m=i;}else{t[i].inDisplay=false;}t[i].width=h+"px";}}if(n>=v){for(var k=0;k<v;k++){t[m+k].inDisplay=true;}}else{for(var j=0;j<=n;j++){v--;t[m+j].inDisplay=true;}for(var k=0;k<=v;k++){t[m-k].inDisplay=true;}}}}};e._enableNextAndPrevious=function(r,o,s){var f="16x16/";var p;var n;var g=o.getRenderingSize();var h=false;if(g==E.Small){if(o.propertyHeaders.length>1)o.visibleTabCount=1;else h=true;}else if(g==E.RegularSmall){if(o.propertyHeaders.length>2)o.visibleTabCount=2;else h=true;}else if(g==E.Regular){if(o.propertyHeaders.length>2)o.visibleTabCount=2;else h=true;}else if(g==E.Medium){if(o.propertyHeaders.length>2)o.visibleTabCount=2;else h=true;}else if(g==E.Large){if(o.propertyHeaders.length>4)o.visibleTabCount=4;else h=true;}var j=false;var t=o.oHeadersLayout.getContent();if(s>0){for(var i=0;i<s;i++){if(t[i].inDisplay==false){j=true;break;}}}if(j==true)p=o._imgResourcePath+f+"leftnav_enable_dark.png";else p=o._imgResourcePath+f+"leftnav_disable.png";var k=false;if(s<o.propertyHeaders.length){for(var i=o.propertyHeaders.length-1;i>s;i--){if(t[i].inDisplay==false){k=true;break;}}}if(k==true)n=o._imgResourcePath+f+"rightnav_enable_dark.png";else n=o._imgResourcePath+f+"rightnav_disable.png";o.nextIcon.addStyleClass("sapLandviszLandscapeEntityNavIcon");o.previousIcon.addStyleClass("sapLandviszLandscapeEntityNavIcon");o.nextIcon.setTooltip(o.NEXT);o.previousIcon.setTooltip(o.PREVIOUS);if(g==E.Small){o.previousIcon.setHeight("14px");o.nextIcon.setHeight("14px");}else if(g==E.RegularSmall){o.previousIcon.setHeight("16px");o.nextIcon.setHeight("16px");}else if(g==E.Regular){o.previousIcon.setHeight("16px");o.nextIcon.setHeight("16px");}else if(g==E.Medium){o.previousIcon.setHeight("16px");o.nextIcon.setHeight("16px");}else if(g==E.Large){o.previousIcon.setHeight("26px");o.nextIcon.setHeight("26px");}o.nextIcon.setSrc(n);o.previousIcon.setSrc(p);o.nextEnabled=k;o.previousEnable=j;var q=this;if(o.hasNavigationEvent==false){o.nextIcon.attachPress(function(l){if(o.nextEnabled==true){o.nextClicked=true;var u;for(var m=0;m<t.length-2;m++){if(t[m].inDisplay==true){u=m+o.visibleTabCount;break;}}q._findContainerAggregationProperties(t[u].getHeader(),o,r);q._selectMiniNavigationButton(o,r,t[u].getHeader());o.containerEvent=false;o.invalidate();}});o.previousIcon.attachPress(function(m){if(o.previousEnable==true){var u;o.previousClicked=true;for(var l=0;l<t.length-2;l++){if(t[l].inDisplay==true){u=l-1;break;}}if(u<0)u=0;q._findContainerAggregationProperties(t[u].getHeader(),o,r);q._selectMiniNavigationButton(o,r,t[u].getHeader());o.containerEvent=false;o.invalidate();}});o.hasNavigationEvent=true;}};e._renderContainerAggregation=function(r,o){var f=o.getId();var s;o.isAggregated=true;var g;this._setContainerRenderingSize(o);for(var i=0;i<o.propertyHeaders.length;i++){o.dataContainer=o.propertyHeaders[i];if(i==0)o.dataContainer.setSelected(true);s=o.dataContainer.getSelected();if(s==true){g=o.dataContainer;o.selectedIndex=i;}if(o.showMiniNavigation==true){this._createMiniNavigation(r,o,o.dataContainer.getHeader(),o.dataContainer.getSelected());if(i+1==o.propertyHeaders.length){o.oHLayoutMiniNavigation.addStyleClass("sapLandviszMiniNavigationVisible");o.oHLayoutMiniNavigation.removeStyleClass("sapLandviszMiniNavigationHidden");}}else{o.oHLayoutMiniNavigation.addStyleClass("sapLandviszMiniNavigationHidden");o.oHLayoutMiniNavigation.removeStyleClass("sapLandviszMiniNavigationVisible");}o.oVLayoutContainer.addContent(o.oHLayoutMiniNavigation);this._initilizeDataContainer(r,o,i);}var t=this;this._renderDataContainerProperties(r,o,g.getProperties(),g.getHeader());};e._setContainerRenderingSize=function(o){var r=o.getRenderingSize();if(o.entityMaximized==true)o.containerWidth=o.sViewWidth-30-(8.4*12);else{if(r==E.Small)o.containerWidth=21-6.1;else if(r==E.RegularSmall)o.containerWidth=31.5-7;else if(r==E.Regular)o.containerWidth=36.5-8.33;else if(r==E.Medium){o.containerWidth=41-8.4;}else if(r==E.Large){o.containerWidth=62-8.4;}}};e._initilizeDataContainer=function(r,o,i){o.dataContainer.lastItem=false;if(i+1==o.propertyHeaders.length)o.dataContainer.lastItem=true;o.dataContainer.oVLayoutContainer=o.oVLayoutContainer;r.renderControl(o.dataContainer);};e._createMiniNavigation=function(r,o,h,s){var m=o.oHLayoutMiniNavigation.getContent();var f=false;var g=0;if(o.getActionBar()&&o.getActionBar().length>0)g=1;if(m.length>0){for(var i=0;i<m.length-g;i++){if(h==m[i].getHeaderTooltip()){o.headerBtn=m[i];f=true;}}}var j=o.getId();if(f==false)o.headerBtn=new H();o.headerBtn.setHeaderTooltip(h);o.headerBtn.setSelected(false);o.headerBtn.setType(o.getType());var k=o.containerWidth/o.propertyHeaders.length;if(o.entityMaximized!=true)k=k*12;o.headerBtn.headerWidth=Math.round(k)-2.5;var v;var t=this;if(f==false)o.headerBtn.attachPress(function(l){v=l.oSource.getHeaderTooltip();t._selectMiniNavigationButton(o,r,v);t._findContainerAggregationProperties(v,o,r);o.containerEvent=false;o.invalidate();});o.headerBtn.removeStyleClass("sapLandviszMiniNavigationSelected");o.headerBtn.removeStyleClass("sapLandviszMiniNavigationInDisplay");o.headerBtn.removeStyleClass("sapLandviszMiniNavigationNormal");o.oHLayoutMiniNavigation.addContent(o.headerBtn);};e._selectMiniNavigationButton=function(o,r,v){this._setContainerRenderingSize(o);var f=o.containerWidth/o.propertyHeaders.length;var h=o.oHLayoutMiniNavigation.getContent();for(var i=0;i<h.length;i++){var g=h[i];if(g.getHeaderTooltip()==v){g.setSelected(true);g.setType(o.getType());}else{g.setSelected(false);}}};e._selectNavigationHeader=function(o,r,v){var f=o.oNavBar.getItems();for(var i=0;i<f.length;i++){if(f[i].getKey()==v){o.oNavBar.setSelectedItem(f[i]);o.oVLayoutProperties.removeAllContent();if(o.isAggregated)this._findContainerAggregationProperties(f[i].getKey(),o,r);else this._findContainerProperties(f[i].getKey(),o,r);}}};e._renderDataContainerProperties=function(r,o,p,h){var f=o.getId();var g;if(p&&p.length&&p.length>0){for(var i=0;i<p.length;i++){this._renderContainerProperty(o,p[i],g)}}else if(p instanceof C){this._renderContainerProperty(o,p,g)}};e._renderContainerProperty=function(o,p,i){if(p instanceof L||p instanceof N||p instanceof T||p instanceof b)p.setRenderingSize(o.getRenderingSize());p.totalWidth=o.containerWidth;p.entityMaximized=o.entityMaximized;o.oVLayoutProperties.addContent(p);};e._renderEntityAction=function(r,o){for(var i=0;i<o.entityActionArray.length;i++){o.entityAction=o.entityActionArray[i];o.entityAction.entityMaximized=o.entityMaximized;if(o.restore==true&&o.entityAction.getActionTooltip()==o.MAXIMIZE_TEXT){o.oHLayoutAllAction.removeContent(o.entityAction);continue;}if(o.restore==false&&o.entityAction.getActionTooltip()==o.RESTORE_TEXT){o.oHLayoutAllAction.removeContent(o.entityAction);continue;}if(o.expVisible==true&&o.entityAction.getActionTooltip()==o.SHOW_ALL_TEXT){o.oHLayoutAllAction.removeContent(o.entityAction);continue;}if(o.expVisible==false&&o.entityAction.getActionTooltip()==o.COLLAPSE_TEXT){o.oHLayoutAllAction.removeContent(o.entityAction);continue;}if(o.expVisible==true&&o.entityAction.getActionTooltip()==o.MAXIMIZE_TEXT){o.oHLayoutAllAction.removeContent(o.entityAction);continue;}if(o.entityMaximized==true&&o.entityAction.getActionTooltip()==o.SHOW_ALL_TEXT){o.oHLayoutAllAction.removeContent(o.entityAction);continue;}if(o.entityAction.getActionTooltip()==o.MAXIMIZE_TEXT)o.entityAction.setIconSrc(o._imgResourcePath+o._imgFolderPath+"maximize_enable_dark.png");if(o.entityAction.getActionTooltip()==o.RESTORE_TEXT)o.entityAction.setIconSrc(o._imgResourcePath+o._imgFolderPath+"restore_enable_dark.png");if(o.entityAction.getActionTooltip()==o.SHOW_ALL_TEXT)o.entityAction.setIconSrc(o._imgResourcePath+o._imgFolderPath+"openshowall_enable_dark.png");if(o.entityAction.getActionTooltip()==o.COLLAPSE_TEXT)o.entityAction.setIconSrc(o._imgResourcePath+o._imgFolderPath+"closeshowall_enable_dark.png");var f=o.getRenderingSize();o.entityAction.setRenderingSize(f);o.oHLayoutAllAction.addContent(o.entityAction);var t=this;if(o.hasEntityEvent==false){o.entityAction.attachPress(function(g){var v=g.oSource;if(v.getActionTooltip()==o.MAXIMIZE_TEXT){o.entityMaximized=true;o.invalidate();o.oHLayoutAllAction.removeContent(v);o.containerEvent=false;}if(v.getActionTooltip()==o.RESTORE_TEXT&&o.entityMaximized==true){setTimeout(function(){o.entityMaximized=false;o.invalidate();},1000);}if(v.getActionTooltip()==o.RESTORE_TEXT){o.entityMaximized=false;o.oHLayoutAllAction.removeContent(v);o.containerEvent=false;}if(v.getActionTooltip()==o.SHOW_ALL_TEXT&&o.entityMaximized==true){o.entityMaximized=false;o.expVisible=true;t._renderExplodeView(r,o);o.showMiniNavigation=false;setTimeout(function(){o.entityMaximized=false;o.invalidate();},1000);}if(v.getActionTooltip()==o.SHOW_ALL_TEXT){o.entityMaximized=false;o.expVisible=true;t._renderExplodeView(r,o);o.showMiniNavigation=false;o.invalidate();}if(v.getActionTooltip()==o.COLLAPSE_TEXT){o.entityMaximized=false;o.expVisible=false;o.showMiniNavigation=true;t._resetHeaderData(r,o);t._resetHeaderNavigation(r,o);o.nextIcon.setVisible(true);o.previousIcon.setVisible(true);jQuery(document.getElementById("SMV")).hide(700);o.invalidate();}});o.hasEntityEvent==true;}}};e._renderExplodeView=function(r,o){this.hideUnselectedHeaders(r,o);};e.hideUnselectedHeaders=function(r,o){var f=o.getDataContainers();for(var i=0;i<f.length;i++){if(i!=o.selectedIndex){f[i].visible=false;}}o.nextIcon.setVisible(false);o.previousIcon.setVisible(false);};e._renderUnselectedHeaderPopup=function(r,o){var f=new Array();r.write("<div");r.writeAttributeEscaped("id","SMV");var g=o.getRenderingSize();if(g==E.RegularSmall)r.addClass("sapLandviszSMVContainerRegularSmall");else if(g==E.Regular)r.addClass("sapLandviszSMVContainerRegular");else if(g==E.Medium)r.addClass("sapLandviszSMVContainerMedium");r.writeClasses();if(o.sViewWidth!=0)r.addStyle("width",o.sViewWidth-2+"px");else if(o.getExplodeViewWidth()&&o.getExplodeViewWidth()!='')r.addStyle("width",o.getExplodeViewWidth());if(o.sViewHeight!=0)r.addStyle("height","100%");else if(o.getExplodeViewHeight()&&o.getExplodeViewHeight()!='')r.addStyle("height",o.getExplodeViewHeight());r.writeStyles();r.write(">");f=o.getDataContainers();var p;var h;var k;var l;var t=this;var g=o.getRenderingSize();if(f.length>0){for(var i=0;i<f.length;i++){h=f[i];if(i!=o.selectedIndex){p=h.getProperties();o.smvContainer=o.dialogArray[i];o.smvContainer.setRenderingSize(o.getRenderingSize());o.smvContainer.setHeader(h.getHeader());for(var j=0;j<p.length;j++){k=p[j];o.smvContainer.addAggregation("properties",k,false);}o.smvContainer.addStyleClass("sapLandviszDisplayNone");r.renderControl(o.smvContainer);o.smvContainer.attachClosed(function(m){o.expVisible=false;var v=m.oSource;var f=o.getDataContainers();var n;for(var i=0;i<f.length;i++){n=v.getProperties();var h=f[i];if(h.getHeader()==v.getHeader()){if(n.length>0){for(var j=0;j<n.length;j++){h.addAggregation("properties",n[j],false);}}}}if(t._checkAllPopupClosed(o,v)){t._resetHeaderNavigation(r,o);o.showMiniNavigation=true;o.nextIcon.setVisible(true);o.previousIcon.setVisible(true);o.invalidate();}});}}}r.write("</div>");};e._resetHeaderData=function(r,o){var f;var g=o.getDataContainers();var h;for(var i=0;i<o.dialogArray.length;i++){f=o.dialogArray[i];h=f.getProperties();if(h&&h.length&&h.length>0){for(var j=0;j<h.length;j++){g[i].addAggregation("properties",h[j],false);}}}};e._resetHeaderNavigation=function(r,o){var f=o.getDataContainers();for(var i=0;i<f.length;i++){if(i!=o.selectedIndex){f[i].visible=true;}}};e._checkAllPopupClosed=function(o,f){var g;for(var i=0;i<o.dialogArray.length;i++){g=o.dialogArray[i];if(g.isOpen()==true&&i!=o.selectedIndex&&f.getHeader()!=g.getHeader()){o.explodeViewClosed=false;return false;}}o.explodeViewClosed=true;return true;};e._renderCustomActionRegion=function(r,o){var f=o.getId();o.actions=o.getActionBar();for(var i=o.actions.length-1;i>=0;i--){o.action=o.actions[i];o.action.setRenderingSize(o.getRenderingSize());o.action.oActToolBar=o.oBtnToolBar;o.action.systemId=o.getSystemId();o.oHLayoutAction.addContent(o.action);}o.oHLayoutAction.addStyleClass("sapLandviszActionLayout");var g=o.oHLayoutAction.getContent();for(var j=0;j<g.length;j++){g[j].setRenderingSize(o.getRenderingSize());}};e._renderOverlayContainer=function(r,o){o.oVLayoutOverlay.removeAllContent();var f=o.getRenderingSize();r.write("<div");r.writeClasses();r.writeAttributeEscaped("id",o.getId()+"-innerOverlay");r.write(" style='");r.write("top:74px;");if(f==E.RegularSmall){r.write("width:24.5em;");r.write("height:15.88em;");r.write("left:108px;");}if(f==E.Regular){r.write("width:28.1em;");r.write("height:18em;");r.write("left:124px;");}else if(f==E.Medium){r.write("width:32.6em;");r.write("height:21.3em;");r.write("left:124px;");}r.write("position:absolute;");r.write("font-size: 12px;");r.write("border: 1px solid grey;");r.write("z-index:10;");r.write("float:left;");if(o.showOverlay==true)r.write("display:block;");else r.write("display:none;");r.write("'");r.write(">");var g=o.getDataContainers();var h;for(var i=0;i<g.length;i++){if(g[i].getSelected()==true){h=g[i].getProperties();break;}}var k;var n;if(h){for(var i=0;i<h.length;i++){if(h[i]instanceof L){k=new L();k.addStyleClass("overlayRow");k.setLabel(h[i].getLabel());k.setValue(h[i].getValue());k.setRenderingSize(h[i].getRenderingSize());k.setIconType(h[i].getIconType());k.setIconTitle(h[i].getIconTitle());if(o.showOverlay==true&&o.overlayFilter=="")k.addStyleClass("sapLandviszDisplayBlock");else if(o.showOverlay==true&&o.overlayFilter==h[i].getLinkSource())k.addStyleClass("sapLandviszDisplayBlock");else k.addStyleClass("sapLandviszDisplayNone");k.setLinkSource(h[i].getLinkSource());k.setRightIconSrc(h[i].getRightIconSrc());o.oVLayoutOverlay.addContent(k);}else if(h[i]instanceof N){n=new N();n.setLabel(h[i].getLabel());n.setRenderingSize(h[i].getRenderingSize());n.setType(h[i].getType());n.setIconTitle(h[i].getIconTitle());n.setLinkSource(h[i].getLinkSource());n.addStyleClass("overlayRow");var l=h[i].getLinearRows();var m=false;for(var j=0;j<l.length;j++){k=new L();k.setLabel(l[j].getLabel());k.setValue(l[j].getValue());k.setRenderingSize(l[j].getRenderingSize());k.setIconType(l[j].getIconType());k.setIconTitle(l[j].getIconTitle());k.setLinkSource(l[j].getLinkSource());if(o.showOverlay==true&&o.overlayFilter==""){k.addStyleClass("sapLandviszDisplayBlock");m=true;}else if(o.showOverlay==true&&o.overlayFilter==l[j].getLinkSource()){k.addStyleClass("sapLandviszDisplayBlock");m=true;}else k.addStyleClass("sapLandviszDisplayNone");k.setRightIconSrc(l[j].getRightIconSrc());n.addAggregation("linearRows",k,false);}if(m==true)n.addStyleClass("sapLandviszDisplayBlock");else n.addStyleClass("sapLandviszDisplayNone");o.oVLayoutOverlay.addContent(n);}}}o.oVLayoutOverlay.addStyleClass("sapLandviszVlayoutOverLay");r.renderControl(o.oVLayoutOverlay);r.write("</div>");r.write("<div");r.writeClasses();r.writeAttributeEscaped("id",o.getId()+"-overlay");r.write(" style='");r.write("left:0px;");r.write("top:0px;");r.write("width:100%;");r.write("height:100%;");r.write("position:absolute;");r.write("background-color:rgb(229, 229, 229);");r.write("font-size: 12px;");r.write("z-index:8;");r.write("cursor:not-allowed;");r.write("opacity:0.5;");r.write("float:left;");if(o.showOverlay==true)r.write("display:block;");else r.write("display:none;");r.write("'");r.write(">");r.write("</div>");};return e;},true);
