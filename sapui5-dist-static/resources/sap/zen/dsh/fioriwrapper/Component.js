/*
 * Copyright (C) 2009-2021 SAP SE or an SAP affiliate company. All rights reserved.
 */
sap.ui.define(["sap/ui/core/UIComponent","sap/ui/generic/app/navigation/service/NavigationHandler","sap/zen/dsh/Dsh"],function(U,N,D){"use strict";return U.extend("sap.zen.dsh.fioriwrapper.Component",{metadata:{manifest:"json"},createContent:function(){function a(e,V,o){if(Array.isArray(e)){for(var B in e){V[e[B]]=o;}}else{V[e]=o;}}var l=null;var b=true;sap.zen.dsh.scriptLoaded=true;var c=this.getMetadata().getConfig();var d={};var f={};var g={};if(c){if(c&&c.semanticObjectMappings){d=c.semanticObjectMappings;f={};for(var h in d){if(d.hasOwnProperty(h)){a(d[h],f,h);}}}}var i="";if(c&&c.appName){i=c.appName;}if(this.getComponentData().startupParameters&&this.getComponentData().startupParameters.appName){i=this.getComponentData().startupParameters.appName;}var j="0ANALYSIS";if(this.getComponentData().startupParameters&&this.getComponentData().startupParameters.XTEMPLATE){j=this.getComponentData().startupParameters.XTEMPLATE[0];}var k="";if(c&&c.systemAlias){k=c.systemAlias;}if(this.getComponentData().startupParameters&&this.getComponentData().startupParameters.XSYSTEM){k=this.getComponentData().startupParameters.XSYSTEM[0];}if(this.getComponentData().startupParameters&&this.getComponentData().startupParameters["sap-system"]){k=this.getComponentData().startupParameters["sap-system"][0];}var m="";if(this.getComponentData().startupParameters&&this.getComponentData().startupParameters.XQUERY){m=this.getComponentData().startupParameters.XQUERY[0];}var n="";if(this.getComponentData().startupParameters&&this.getComponentData().startupParameters.XTITLE){n=this.getComponentData().startupParameters.XTITLE[0];}var p="";if(this.getComponentData().startupParameters&&this.getComponentData().startupParameters.XBOOKMARKID){p=this.getComponentData().startupParameters.XBOOKMARKID[0];}var q="";if(this.getComponentData().startupParameters&&this.getComponentData().startupParameters.XVISIBLEPROMPTS){q=this.getComponentData().startupParameters.XVISIBLEPROMPTS[0];}var r="";if(this.getComponentData().startupParameters&&this.getComponentData().startupParameters.XDISPLAY){r=this.getComponentData().startupParameters.XDISPLAY[0];}var s="";if(this.getComponentData().startupParameters&&this.getComponentData().startupParameters.XCHART_TYPE){s=this.getComponentData().startupParameters.XCHART_TYPE[0];}var t="";if(this.getComponentData().startupParameters&&this.getComponentData().startupParameters.XDATALIMIT_ROWS){t=this.getComponentData().startupParameters.XDATALIMIT_ROWS[0];}var u="";if(this.getComponentData().startupParameters&&this.getComponentData().startupParameters.XDATALIMIT_COLS){u=this.getComponentData().startupParameters.XDATALIMIT_COLS[0];}var v="";if(c.navigationSourceObjects){v=c.navigationSourceObjects;}if(this.getComponentData().startupParameters&&this.getComponentData().startupParameters.XSEMANTIC_OBJECTS){v=this.getComponentData().startupParameters.XSEMANTIC_OBJECTS[0].split(',');}function w(){l=new D({id:"dsh_"+m.replace(/\W/g,''),height:"100%",width:"100%",deployment:"bw",dshAppName:j,repoPath:c.repoPath||"",semanticMappings:d,appComponent:this,systemAlias:k,deferCreation:b});if(m){l.addParameter("XQUERY",m);}if(n){l.addParameter("XTITLE",n);}if(p){l.addParameter("XBOOKMARKID",p);}if(q){l.addParameter("XVISIBLEPROMPTS",q);}if(r){l.addParameter("XDISPLAY",r);}if(s){l.addParameter("XCHART_TYPE",s);}if(t){l.addParameter("XDATALIMIT_ROWS",t);}if(u){l.addParameter("XDATALIMIT_COLS",u);}if(v){l.addParameter("NAV_SOURCES",JSON.stringify(v));}if(f){l.addParameter("NAV_SEMANTIC_MAPPINGS",JSON.stringify(f));}var e={};l.addParameter("NAV_PARAM_RULES",JSON.stringify(e));}var x=this;var y={};var z=new N(this);var A=z.parseNavigation();A.done(function(B,C,E){if(!l){w.call(x);}if(E!==sap.ui.generic.app.navigation.service.NavType.initial){if(B&&B.bNavSelVarHasDefaultsOnly){l.addParameter("XPROMPT","true");}if(typeof l.initializeAppStateData!=="function"){y._sData=B.selectionVariant;y.getData=function(){var o=undefined;if(this._sData===undefined||this._sData===""){return undefined;}try{o=JSON.parse(this._sData);}catch(e){}return{"selectionVariant":o};};}}if(typeof l.initializeAppStateData==="function"){l.initializeAppStateData.call(l,B,g);}else{l.initializeAppState.call(l,y,g);}if(b){l.createPage();}});A.fail(function(e){if(!l){b=true;w.call(x);}if(this.getComponentData().startupParameters){for(var o in this.getComponentData().startupParameters){if(x.getComponentData().startupParameters.hasOwnProperty(o)&&o!=="newBW"&&o!="XTEMPLATE"&&o!="XSEMANTIC_OBJECTS"&&o!="XQUERY"&&o!="XBOOKMARKID"&&o!="XVISIBLEPROMPTS"&&o!="XACH_COMPONENT"&&o!="XSYSTEM"&&o!="XTITLE"&&o!="XDISPLAY"&&o!="XCHART_TYPE"&&o!="XDATALIMIT_ROWS"&&o!="XDATALIMIT_COLS"){var B=x.getComponentData().startupParameters[o][0];l.addParameter(o,B);if(d&&d.hasOwnProperty(o)){a(d[o],g,B);}else{g[o]=B;}}}}sap.ushell.Container.getService("CrossApplicationNavigation").getStartupAppState(x).always(function(S){l.initializeAppState.call(l,S,g);l.createPage();});});if(!l){b=true;w.call(x);}return l;},init:function(){this.sAchComponent=null;this.oSapAppManifestEntry=this.getManifestEntry("sap.app");sap.ui.core.UIComponent.prototype.init.apply(this,arguments);},getManifestEntry:function(k){if(k==="/sap.app/ach"&&this.sAchComponent){return this.sAchComponent;}else if(k==="sap.app"&&this.sAchComponent&&this.oSapAppManifestEntry){return this.oSapAppManifestEntry;}else{return sap.ui.core.UIComponent.prototype.getManifestEntry.apply(this,arguments);}}});});
